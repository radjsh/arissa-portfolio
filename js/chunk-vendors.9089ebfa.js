(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-vendors"],{"00ee":function(e,t,n){var r=n("b622"),i=r("toStringTag"),o={};o[i]="z",e.exports="[object z]"===String(o)},"01b4":function(e,t){var n=function(){this.head=null,this.tail=null};n.prototype={add:function(e){var t={item:e,next:null};this.head?this.tail.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e)return this.head=e.next,this.tail===e&&(this.tail=null),e.item}},e.exports=n},"0366":function(e,t,n){var r=n("e330"),i=n("59ed"),o=r(r.bind);e.exports=function(e,t){return i(e),void 0===t?e:o?o(e,t):function(){return e.apply(t,arguments)}}},"06cf":function(e,t,n){var r=n("83ab"),i=n("c65b"),o=n("d1e7"),a=n("5c6c"),s=n("fc6a"),c=n("a04b"),u=n("1a2d"),l=n("0cfb"),h=Object.getOwnPropertyDescriptor;t.f=r?h:function(e,t){if(e=s(e),t=c(t),l)try{return h(e,t)}catch(n){}if(u(e,t))return a(!i(o.f,e,t),e[t])}},"07fa":function(e,t,n){var r=n("50c4");e.exports=function(e){return r(e.length)}},"0b42":function(e,t,n){var r=n("da84"),i=n("e8b5"),o=n("68ee"),a=n("861d"),s=n("b622"),c=s("species"),u=r.Array;e.exports=function(e){var t;return i(e)&&(t=e.constructor,o(t)&&(t===u||i(t.prototype))?t=void 0:a(t)&&(t=t[c],null===t&&(t=void 0))),void 0===t?u:t}},"0cfb":function(e,t,n){var r=n("83ab"),i=n("d039"),o=n("cc12");e.exports=!r&&!i((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},"0d51":function(e,t,n){var r=n("da84"),i=r.String;e.exports=function(e){try{return i(e)}catch(t){return"Object"}}},"159b":function(e,t,n){var r=n("da84"),i=n("fdbc"),o=n("785a"),a=n("17c2"),s=n("9112"),c=function(e){if(e&&e.forEach!==a)try{s(e,"forEach",a)}catch(t){e.forEach=a}};for(var u in i)i[u]&&c(r[u]&&r[u].prototype);c(o)},1626:function(e,t){e.exports=function(e){return"function"==typeof e}},"17c2":function(e,t,n){"use strict";var r=n("b727").forEach,i=n("a640"),o=i("forEach");e.exports=o?[].forEach:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}},"19aa":function(e,t,n){var r=n("da84"),i=n("3a9b"),o=r.TypeError;e.exports=function(e,t){if(i(t,e))return e;throw o("Incorrect invocation")}},"1a2d":function(e,t,n){var r=n("e330"),i=n("7b0b"),o=r({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return o(i(e),t)}},"1be4":function(e,t,n){var r=n("d066");e.exports=r("document","documentElement")},"1c7e":function(e,t,n){var r=n("b622"),i=r("iterator"),o=!1;try{var a=0,s={next:function(){return{done:!!a++}},return:function(){o=!0}};s[i]=function(){return this},Array.from(s,(function(){throw 2}))}catch(c){}e.exports=function(e,t){if(!t&&!o)return!1;var n=!1;try{var r={};r[i]=function(){return{next:function(){return{done:n=!0}}}},e(r)}catch(c){}return n}},"1cdc":function(e,t,n){var r=n("342f");e.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(r)},"1d80":function(e,t,n){var r=n("da84"),i=r.TypeError;e.exports=function(e){if(void 0==e)throw i("Can't call method on "+e);return e}},"1da1":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n("d3b7");function r(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,i)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(i,o){var a=e.apply(t,n);function s(e){r(a,i,o,s,c,"next",e)}function c(e){r(a,i,o,s,c,"throw",e)}s(void 0)}))}}},"1dde":function(e,t,n){var r=n("d039"),i=n("b622"),o=n("2d00"),a=i("species");e.exports=function(e){return o>=51||!r((function(){var t=[],n=t.constructor={};return n[a]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},2266:function(e,t,n){var r=n("da84"),i=n("0366"),o=n("c65b"),a=n("825a"),s=n("0d51"),c=n("e95a"),u=n("07fa"),l=n("3a9b"),h=n("9a1f"),f=n("35a1"),d=n("2a62"),p=r.TypeError,m=function(e,t){this.stopped=e,this.result=t},v=m.prototype;e.exports=function(e,t,n){var r,g,y,b,w,E,x,_=n&&n.that,T=!(!n||!n.AS_ENTRIES),A=!(!n||!n.IS_ITERATOR),S=!(!n||!n.INTERRUPTED),M=i(t,_),O=function(e){return r&&d(r,"normal",e),new m(!0,e)},R=function(e){return T?(a(e),S?M(e[0],e[1],O):M(e[0],e[1])):S?M(e,O):M(e)};if(A)r=e;else{if(g=f(e),!g)throw p(s(e)+" is not iterable");if(c(g)){for(y=0,b=u(e);b>y;y++)if(w=R(e[y]),w&&l(v,w))return w;return new m(!1)}r=h(e,g)}E=r.next;while(!(x=o(E,r)).done){try{w=R(x.value)}catch(C){d(r,"throw",C)}if("object"==typeof w&&w&&l(v,w))return w}return new m(!1)}},"23cb":function(e,t,n){var r=n("5926"),i=Math.max,o=Math.min;e.exports=function(e,t){var n=r(e);return n<0?i(n+t,0):o(n,t)}},"23e7":function(e,t,n){var r=n("da84"),i=n("06cf").f,o=n("9112"),a=n("6eeb"),s=n("ce4e"),c=n("e893"),u=n("94ca");e.exports=function(e,t){var n,l,h,f,d,p,m=e.target,v=e.global,g=e.stat;if(l=v?r:g?r[m]||s(m,{}):(r[m]||{}).prototype,l)for(h in t){if(d=t[h],e.noTargetGet?(p=i(l,h),f=p&&p.value):f=l[h],n=u(v?h:m+(g?".":"#")+h,e.forced),!n&&void 0!==f){if(typeof d==typeof f)continue;c(d,f)}(e.sham||f&&f.sham)&&o(d,"sham",!0),a(l,h,d,e)}}},"241c":function(e,t,n){var r=n("ca84"),i=n("7839"),o=i.concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,o)}},"260b":function(e,t,n){"use strict";var r=n("cc84");n.d(t,"a",(function(){return r["a"]}));var i="firebase",o="8.10.0";
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
r["a"].registerVersion(i,o,"app"),r["a"].SDK_VERSION=o},2626:function(e,t,n){"use strict";var r=n("d066"),i=n("9bf2"),o=n("b622"),a=n("83ab"),s=o("species");e.exports=function(e){var t=r(e),n=i.f;a&&t&&!t[s]&&n(t,s,{configurable:!0,get:function(){return this}})}},"2a62":function(e,t,n){var r=n("c65b"),i=n("825a"),o=n("dc4a");e.exports=function(e,t,n){var a,s;i(e);try{if(a=o(e,"return"),!a){if("throw"===t)throw n;return n}a=r(a,e)}catch(c){s=!0,a=c}if("throw"===t)throw n;if(s)throw a;return i(a),n}},"2ba4":function(e,t){var n=Function.prototype,r=n.apply,i=n.bind,o=n.call;e.exports="object"==typeof Reflect&&Reflect.apply||(i?o.bind(r):function(){return o.apply(r,arguments)})},"2cf4":function(e,t,n){var r,i,o,a,s=n("da84"),c=n("2ba4"),u=n("0366"),l=n("1626"),h=n("1a2d"),f=n("d039"),d=n("1be4"),p=n("f36a"),m=n("cc12"),v=n("1cdc"),g=n("605d"),y=s.setImmediate,b=s.clearImmediate,w=s.process,E=s.Dispatch,x=s.Function,_=s.MessageChannel,T=s.String,A=0,S={},M="onreadystatechange";try{r=s.location}catch(L){}var O=function(e){if(h(S,e)){var t=S[e];delete S[e],t()}},R=function(e){return function(){O(e)}},C=function(e){O(e.data)},I=function(e){s.postMessage(T(e),r.protocol+"//"+r.host)};y&&b||(y=function(e){var t=p(arguments,1);return S[++A]=function(){c(l(e)?e:x(e),void 0,t)},i(A),A},b=function(e){delete S[e]},g?i=function(e){w.nextTick(R(e))}:E&&E.now?i=function(e){E.now(R(e))}:_&&!v?(o=new _,a=o.port2,o.port1.onmessage=C,i=u(a.postMessage,a)):s.addEventListener&&l(s.postMessage)&&!s.importScripts&&r&&"file:"!==r.protocol&&!f(I)?(i=I,s.addEventListener("message",C,!1)):i=M in m("script")?function(e){d.appendChild(m("script"))[M]=function(){d.removeChild(this),O(e)}}:function(e){setTimeout(R(e),0)}),e.exports={set:y,clear:b}},"2d00":function(e,t,n){var r,i,o=n("da84"),a=n("342f"),s=o.process,c=o.Deno,u=s&&s.versions||c&&c.version,l=u&&u.v8;l&&(r=l.split("."),i=r[0]>0&&r[0]<4?1:+(r[0]+r[1])),!i&&a&&(r=a.match(/Edge\/(\d+)/),(!r||r[1]>=74)&&(r=a.match(/Chrome\/(\d+)/),r&&(i=+r[1]))),e.exports=i},"342f":function(e,t,n){var r=n("d066");e.exports=r("navigator","userAgent")||""},"35a1":function(e,t,n){var r=n("f5df"),i=n("dc4a"),o=n("3f8c"),a=n("b622"),s=a("iterator");e.exports=function(e){if(void 0!=e)return i(e,s)||i(e,"@@iterator")||o[r(e)]}},"37e8":function(e,t,n){var r=n("83ab"),i=n("9bf2"),o=n("825a"),a=n("fc6a"),s=n("df75");e.exports=r?Object.defineProperties:function(e,t){o(e);var n,r=a(t),c=s(t),u=c.length,l=0;while(u>l)i.f(e,n=c[l++],r[n]);return e}},"3a9b":function(e,t,n){var r=n("e330");e.exports=r({}.isPrototypeOf)},"3bbe":function(e,t,n){var r=n("da84"),i=n("1626"),o=r.String,a=r.TypeError;e.exports=function(e){if("object"==typeof e||i(e))return e;throw a("Can't set "+o(e)+" as a prototype")}},"3c35":function(e,t){(function(t){e.exports=t}).call(this,{})},"3f8c":function(e,t){e.exports={}},4362:function(e,t,n){t.nextTick=function(e){var t=Array.prototype.slice.call(arguments);t.shift(),setTimeout((function(){e.apply(null,t)}),0)},t.platform=t.arch=t.execPath=t.title="browser",t.pid=1,t.browser=!0,t.env={},t.argv=[],t.binding=function(e){throw new Error("No such module. (Possibly not yet loaded)")},function(){var e,r="/";t.cwd=function(){return r},t.chdir=function(t){e||(e=n("df7c")),r=e.resolve(t,r)}}(),t.exit=t.kill=t.umask=t.dlopen=t.uptime=t.memoryUsage=t.uvCounters=function(){},t.features={}},"44ad":function(e,t,n){var r=n("da84"),i=n("e330"),o=n("d039"),a=n("c6b6"),s=r.Object,c=i("".split);e.exports=o((function(){return!s("z").propertyIsEnumerable(0)}))?function(e){return"String"==a(e)?c(e,""):s(e)}:s},"44d2":function(e,t,n){var r=n("b622"),i=n("7c73"),o=n("9bf2"),a=r("unscopables"),s=Array.prototype;void 0==s[a]&&o.f(s,a,{configurable:!0,value:i(null)}),e.exports=function(e){s[a][e]=!0}},"44de":function(e,t,n){var r=n("da84");e.exports=function(e,t){var n=r.console;n&&n.error&&(1==arguments.length?n.error(e):n.error(e,t))}},4840:function(e,t,n){var r=n("825a"),i=n("5087"),o=n("b622"),a=o("species");e.exports=function(e,t){var n,o=r(e).constructor;return void 0===o||void 0==(n=r(o)[a])?t:i(n)}},"484e":function(module,__webpack_exports__,__webpack_require__){"use strict";(function(e,t){"object"===typeof exports&&"undefined"!==typeof module?t(exports):"function"===typeof define&&__webpack_require__("3c35")?define(["exports"],t):(e=e||self,t(e.THREE={}))})(void 0,(function(e){function t(){}function n(e,t){this.x=e||0,this.y=t||0}function r(){this.elements=[1,0,0,0,1,0,0,0,1],0<arguments.length&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}function i(e,t,o,a,s,c,u,l,h,f){Object.defineProperty(this,"id",{value:Xo++}),this.uuid=Wo.generateUUID(),this.name="",this.image=void 0!==e?e:i.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==t?t:i.DEFAULT_MAPPING,this.wrapS=void 0!==o?o:1001,this.wrapT=void 0!==a?a:1001,this.magFilter=void 0!==s?s:1006,this.minFilter=void 0!==c?c:1008,this.anisotropy=void 0!==h?h:1,this.format=void 0!==u?u:1023,this.internalFormat=null,this.type=void 0!==l?l:1009,this.offset=new n(0,0),this.repeat=new n(1,1),this.center=new n(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new r,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==f?f:3e3,this.version=0,this.onUpdate=null}function o(e,t,n,r){this.x=e||0,this.y=t||0,this.z=n||0,this.w=void 0!==r?r:1}function a(e,t,n){this.width=e,this.height=t,this.scissor=new o(0,0,e,t),this.scissorTest=!1,this.viewport=new o(0,0,e,t),n=n||{},this.texture=new i(void 0,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.image={},this.texture.image.width=e,this.texture.image.height=t,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:1006,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0===n.stencilBuffer||n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}function s(e,t,n){a.call(this,e,t,n),this.samples=4}function c(e,t,n,r){this._x=e||0,this._y=t||0,this._z=n||0,this._w=void 0!==r?r:1}function u(e,t,n){this.x=e||0,this.y=t||0,this.z=n||0}function l(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],0<arguments.length&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function h(e,t,n,r){this._x=e||0,this._y=t||0,this._z=n||0,this._order=r||h.DefaultOrder}function f(){this.mask=1}function d(){Object.defineProperty(this,"id",{value:aa++}),this.uuid=Wo.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=d.DefaultUp.clone();var e=new u,t=new h,n=new c,i=new u(1,1,1);t._onChange((function(){n.setFromEuler(t,!1)})),n._onChange((function(){t.setFromQuaternion(n,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new l},normalMatrix:{value:new r}}),this.matrix=new l,this.matrixWorld=new l,this.matrixAutoUpdate=d.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new f,this.visible=!0,this.receiveShadow=this.castShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}function p(){d.call(this),this.type="Scene",this.overrideMaterial=this.fog=this.environment=this.background=null,this.autoUpdate=!0,"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function m(e,t){this.min=void 0!==e?e:new u(1/0,1/0,1/0),this.max=void 0!==t?t:new u(-1/0,-1/0,-1/0)}function v(e,t,n,r,i){var o,a=0;for(o=e.length-3;a<=o;a+=3){Ia.fromArray(e,a);var s=i.x*Math.abs(Ia.x)+i.y*Math.abs(Ia.y)+i.z*Math.abs(Ia.z),c=t.dot(Ia),u=n.dot(Ia),l=r.dot(Ia);if(Math.max(-Math.max(c,u,l),Math.min(c,u,l))>s)return!1}return!0}function g(e,t){this.center=void 0!==e?e:new u,this.radius=void 0!==t?t:0}function y(e,t){this.origin=void 0!==e?e:new u,this.direction=void 0!==t?t:new u(0,0,-1)}function b(e,t){this.normal=void 0!==e?e:new u(1,0,0),this.constant=void 0!==t?t:0}function w(e,t,n){this.a=void 0!==e?e:new u,this.b=void 0!==t?t:new u,this.c=void 0!==n?n:new u}function E(e,t,n){return void 0===t&&void 0===n?this.set(e):this.setRGB(e,t,n)}function x(e,t,n){return 0>n&&(n+=1),1<n&&--n,n<1/6?e+6*(t-e)*n:.5>n?t:n<2/3?e+6*(t-e)*(2/3-n):e}function _(e){return.04045>e?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function T(e){return.0031308>e?12.92*e:1.055*Math.pow(e,.41666)-.055}function A(e,t,n,r,i,o){this.a=e,this.b=t,this.c=n,this.normal=r&&r.isVector3?r:new u,this.vertexNormals=Array.isArray(r)?r:[],this.color=i&&i.isColor?i:new E,this.vertexColors=Array.isArray(i)?i:[],this.materialIndex=void 0!==o?o:0}function S(){Object.defineProperty(this,"id",{value:ns++}),this.uuid=Wo.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.blending=1,this.side=0,this.vertexTangents=this.flatShading=!1,this.vertexColors=0,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendEquationAlpha=this.blendDstAlpha=this.blendSrcAlpha=null,this.depthFunc=3,this.depthWrite=this.depthTest=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilZPass=this.stencilZFail=this.stencilFail=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipShadows=this.clipIntersection=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetUnits=this.polygonOffsetFactor=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.toneMapped=this.visible=!0,this.userData={},this.version=0}function M(e){S.call(this),this.type="MeshBasicMaterial",this.color=new E(16777215),this.lightMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.envMap=this.alphaMap=this.specularMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.morphTargets=this.skinning=!1,this.setValues(e)}function O(e,t,n){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===n,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0}function R(e,t,n){O.call(this,new Int8Array(e),t,n)}function C(e,t,n){O.call(this,new Uint8Array(e),t,n)}function I(e,t,n){O.call(this,new Uint8ClampedArray(e),t,n)}function L(e,t,n){O.call(this,new Int16Array(e),t,n)}function D(e,t,n){O.call(this,new Uint16Array(e),t,n)}function P(e,t,n){O.call(this,new Int32Array(e),t,n)}function N(e,t,n){O.call(this,new Uint32Array(e),t,n)}function B(e,t,n){O.call(this,new Float32Array(e),t,n)}function k(e,t,n){O.call(this,new Float64Array(e),t,n)}function F(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingSphere=this.boundingBox=null,this.groupsNeedUpdate=this.uvsNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.verticesNeedUpdate=!1}function U(e){if(0===e.length)return-1/0;for(var t=e[0],n=1,r=e.length;n<r;++n)e[n]>t&&(t=e[n]);return t}function H(){Object.defineProperty(this,"id",{value:is+=2}),this.uuid=Wo.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingSphere=this.boundingBox=null,this.drawRange={start:0,count:1/0},this.userData={}}function j(e,t){d.call(this),this.type="Mesh",this.geometry=void 0!==e?e:new H,this.material=void 0!==t?t:new M,this.updateMorphTargets()}function G(e,t,n,r,i,o,a,s){return null===(1===t.side?r.intersectTriangle(a,o,i,!0,s):r.intersectTriangle(i,o,a,2!==t.side,s))?null:(Ms.copy(s),Ms.applyMatrix4(e.matrixWorld),t=n.ray.origin.distanceTo(Ms),t<n.near||t>n.far?null:{distance:t,point:Ms.clone(),object:e})}function V(e,t,r,i,o,a,s,c,u,l,h,f){if(ps.fromBufferAttribute(o,l),ms.fromBufferAttribute(o,h),vs.fromBufferAttribute(o,f),o=e.morphTargetInfluences,t.morphTargets&&a&&o){ws.set(0,0,0),Es.set(0,0,0),xs.set(0,0,0);for(var d=0,p=a.length;d<p;d++){var m=o[d],v=a[d];0!==m&&(gs.fromBufferAttribute(v,l),ys.fromBufferAttribute(v,h),bs.fromBufferAttribute(v,f),s?(ws.addScaledVector(gs,m),Es.addScaledVector(ys,m),xs.addScaledVector(bs,m)):(ws.addScaledVector(gs.sub(ps),m),Es.addScaledVector(ys.sub(ms),m),xs.addScaledVector(bs.sub(vs),m)))}ps.add(ws),ms.add(Es),vs.add(xs)}return(e=G(e,t,r,i,ps,ms,vs,Ss))&&(c&&(_s.fromBufferAttribute(c,l),Ts.fromBufferAttribute(c,h),As.fromBufferAttribute(c,f),e.uv=w.getUV(Ss,ps,ms,vs,_s,Ts,As,new n)),u&&(_s.fromBufferAttribute(u,l),Ts.fromBufferAttribute(u,h),As.fromBufferAttribute(u,f),e.uv2=w.getUV(Ss,ps,ms,vs,_s,Ts,As,new n)),c=new A(l,h,f),w.getNormal(ps,ms,vs,c.normal),e.face=c),e}function z(){Object.defineProperty(this,"id",{value:Os+=2}),this.uuid=Wo.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingSphere=this.boundingBox=null,this.groupsNeedUpdate=this.lineDistancesNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.uvsNeedUpdate=this.verticesNeedUpdate=this.elementsNeedUpdate=!1}function W(e){var t,n={};for(t in e)for(var r in n[t]={},e[t]){var i=e[t][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture)?n[t][r]=i.clone():Array.isArray(i)?n[t][r]=i.slice():n[t][r]=i}return n}function q(e){for(var t={},n=0;n<e.length;n++){var r,i=W(e[n]);for(r in i)t[r]=i[r]}return t}function Y(e){S.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.morphNormals=this.morphTargets=this.skinning=this.clipping=this.lights=this.fog=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}function X(){d.call(this),this.type="Camera",this.matrixWorldInverse=new l,this.projectionMatrix=new l,this.projectionMatrixInverse=new l}function Q(e,t,n,r){X.call(this),this.type="PerspectiveCamera",this.fov=void 0!==e?e:50,this.zoom=1,this.near=void 0!==n?n:.1,this.far=void 0!==r?r:2e3,this.focus=10,this.aspect=void 0!==t?t:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function K(e,t,n,r){d.call(this),this.type="CubeCamera";var i=new Q(90,1,e,t);i.up.set(0,-1,0),i.lookAt(new u(1,0,0)),this.add(i);var o=new Q(90,1,e,t);o.up.set(0,-1,0),o.lookAt(new u(-1,0,0)),this.add(o);var a=new Q(90,1,e,t);a.up.set(0,0,1),a.lookAt(new u(0,1,0)),this.add(a);var s=new Q(90,1,e,t);s.up.set(0,0,-1),s.lookAt(new u(0,-1,0)),this.add(s);var c=new Q(90,1,e,t);c.up.set(0,-1,0),c.lookAt(new u(0,0,1)),this.add(c);var l=new Q(90,1,e,t);l.up.set(0,-1,0),l.lookAt(new u(0,0,-1)),this.add(l),r=r||{format:1022,magFilter:1006,minFilter:1006},this.renderTarget=new J(n,r),this.renderTarget.texture.name="CubeCamera",this.update=function(e,t){null===this.parent&&this.updateMatrixWorld();var n=e.getRenderTarget(),r=this.renderTarget,u=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0),e.render(t,i),e.setRenderTarget(r,1),e.render(t,o),e.setRenderTarget(r,2),e.render(t,a),e.setRenderTarget(r,3),e.render(t,s),e.setRenderTarget(r,4),e.render(t,c),r.texture.generateMipmaps=u,e.setRenderTarget(r,5),e.render(t,l),e.setRenderTarget(n)},this.clear=function(e,t,n,r){for(var i=e.getRenderTarget(),o=this.renderTarget,a=0;6>a;a++)e.setRenderTarget(o,a),e.clear(t,n,r);e.setRenderTarget(i)}}function J(e,t,n){Number.isInteger(t)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),t=n),a.call(this,e,e,t)}function Z(e,t,n,r,o,a,s,c,u,l,h,f){i.call(this,null,a,s,c,u,l,r,o,h,f),this.image={data:e||null,width:t||1,height:n||1},this.magFilter=void 0!==u?u:1003,this.minFilter=void 0!==l?l:1003,this.flipY=this.generateMipmaps=!1,this.unpackAlignment=1,this.needsUpdate=!0}function $(e,t,n,r,i,o){this.planes=[void 0!==e?e:new b,void 0!==t?t:new b,void 0!==n?n:new b,void 0!==r?r:new b,void 0!==i?i:new b,void 0!==o?o:new b]}function ee(){function e(i,o){!1!==n&&(r(i,o),t.requestAnimationFrame(e))}var t=null,n=!1,r=null;return{start:function(){!0!==n&&null!==r&&(t.requestAnimationFrame(e),n=!0)},stop:function(){n=!1},setAnimationLoop:function(e){r=e},setContext:function(e){t=e}}}function te(e,t){function n(t,n){var r=t.array,i=t.usage,o=e.createBuffer();return e.bindBuffer(n,o),e.bufferData(n,r,i),t.onUploadCallback(),n=5126,r instanceof Float32Array?n=5126:r instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):r instanceof Uint16Array?n=5123:r instanceof Int16Array?n=5122:r instanceof Uint32Array?n=5125:r instanceof Int32Array?n=5124:r instanceof Int8Array?n=5120:r instanceof Uint8Array&&(n=5121),{buffer:o,type:n,bytesPerElement:r.BYTES_PER_ELEMENT,version:t.version}}var r=t.isWebGL2,i=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),i.get(e)},remove:function(t){t.isInterleavedBufferAttribute&&(t=t.data);var n=i.get(t);n&&(e.deleteBuffer(n.buffer),i.delete(t))},update:function(t,o){t.isInterleavedBufferAttribute&&(t=t.data);var a=i.get(t);if(void 0===a)i.set(t,n(t,o));else if(a.version<t.version){var s=t.array,c=t.updateRange;e.bindBuffer(o,a.buffer),-1===c.count?e.bufferSubData(o,0,s):(r?e.bufferSubData(o,c.offset*s.BYTES_PER_ELEMENT,s,c.offset,c.count):e.bufferSubData(o,c.offset*s.BYTES_PER_ELEMENT,s.subarray(c.offset,c.offset+c.count)),c.count=-1),a.version=t.version}}}}function ne(e,t,n,r){z.call(this),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r},this.fromBufferGeometry(new re(e,t,n,r)),this.mergeVertices()}function re(e,t,n,r){H.call(this),this.type="PlaneBufferGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r},e=e||1,t=t||1;var i=e/2,o=t/2;n=Math.floor(n)||1,r=Math.floor(r)||1;var a=n+1,s=r+1,c=e/n,u=t/r,l=[],h=[],f=[],d=[];for(e=0;e<s;e++){var p=e*u-o;for(t=0;t<a;t++)h.push(t*c-i,-p,0),f.push(0,0,1),d.push(t/n),d.push(1-e/r)}for(e=0;e<r;e++)for(t=0;t<n;t++)i=t+a*(e+1),o=t+1+a*(e+1),s=t+1+a*e,l.push(t+a*e,i,s),l.push(i,o,s);this.setIndex(l),this.setAttribute("position",new B(h,3)),this.setAttribute("normal",new B(f,3)),this.setAttribute("uv",new B(d,2))}function ie(e,t,n,r){function i(e,n){t.buffers.color.setClear(e.r,e.g,e.b,n,r)}var o,a,s=new E(0),c=0,u=null,l=0,h=null;return{getClearColor:function(){return s},setClearColor:function(e,t){s.set(e),c=void 0!==t?t:1,i(s,c)},getClearAlpha:function(){return c},setClearAlpha:function(e){c=e,i(s,c)},render:function(t,r,f,d){r=r.background,f=e.xr,(f=f.getSession&&f.getSession())&&"additive"===f.environmentBlendMode&&(r=null),null===r?i(s,c):r&&r.isColor&&(i(r,1),d=!0),(e.autoClear||d)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),r&&(r.isCubeTexture||r.isWebGLCubeRenderTarget||306===r.mapping)?(void 0===a&&(a=new j(new Ds(1,1,1),new Y({type:"BackgroundCubeMaterial",uniforms:W(Us.cube.uniforms),vertexShader:Us.cube.vertexShader,fragmentShader:Us.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),a.geometry.deleteAttribute("normal"),a.geometry.deleteAttribute("uv"),a.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(a.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),n.update(a)),d=r.isWebGLCubeRenderTarget?r.texture:r,a.material.uniforms.envMap.value=d,a.material.uniforms.flipEnvMap.value=d.isCubeTexture?-1:1,u===r&&l===d.version&&h===e.toneMapping||(a.material.needsUpdate=!0,u=r,l=d.version,h=e.toneMapping),t.unshift(a,a.geometry,a.material,0,0,null)):r&&r.isTexture&&(void 0===o&&(o=new j(new re(2,2),new Y({type:"BackgroundMaterial",uniforms:W(Us.background.uniforms),vertexShader:Us.background.vertexShader,fragmentShader:Us.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),o.geometry.deleteAttribute("normal"),Object.defineProperty(o.material,"map",{get:function(){return this.uniforms.t2D.value}}),n.update(o)),o.material.uniforms.t2D.value=r,!0===r.matrixAutoUpdate&&r.updateMatrix(),o.material.uniforms.uvTransform.value.copy(r.matrix),u===r&&l===r.version&&h===e.toneMapping||(o.material.needsUpdate=!0,u=r,l=r.version,h=e.toneMapping),t.unshift(o,o.geometry,o.material,0,0,null))}}}function oe(e,t,n,r){var i,o=r.isWebGL2;this.setMode=function(e){i=e},this.render=function(t,r){e.drawArrays(i,t,r),n.update(r,i)},this.renderInstances=function(r,a,s,c){if(0!==c){if(o){r=e;var u="drawArraysInstanced"}else if(r=t.get("ANGLE_instanced_arrays"),u="drawArraysInstancedANGLE",null===r)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");r[u](i,a,s,c),n.update(s,i,c)}}}function ae(e,t,n){function r(t){if("highp"===t){if(0<e.getShaderPrecisionFormat(35633,36338).precision&&0<e.getShaderPrecisionFormat(35632,36338).precision)return"highp";t="mediump"}return"mediump"===t&&0<e.getShaderPrecisionFormat(35633,36337).precision&&0<e.getShaderPrecisionFormat(35632,36337).precision?"mediump":"lowp"}var i,o="undefined"!==typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext||"undefined"!==typeof WebGL2ComputeRenderingContext&&e instanceof WebGL2ComputeRenderingContext,a=void 0!==n.precision?n.precision:"highp",s=r(a);s!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",s,"instead."),a=s),n=!0===n.logarithmicDepthBuffer,s=e.getParameter(34930);var c=e.getParameter(35660),u=e.getParameter(3379),l=e.getParameter(34076),h=e.getParameter(34921),f=e.getParameter(36347),d=e.getParameter(36348),p=e.getParameter(36349),m=0<c,v=o||!!t.get("OES_texture_float"),g=m&&v,y=o?e.getParameter(36183):0;return{isWebGL2:o,getMaxAnisotropy:function(){if(void 0!==i)return i;var n=t.get("EXT_texture_filter_anisotropic");return i=null!==n?e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:r,precision:a,logarithmicDepthBuffer:n,maxTextures:s,maxVertexTextures:c,maxTextureSize:u,maxCubemapSize:l,maxAttributes:h,maxVertexUniforms:f,maxVaryings:d,maxFragmentUniforms:p,vertexTextures:m,floatFragmentTextures:v,floatVertexTextures:g,maxSamples:y}}function se(){function e(){l.value!==i&&(l.value=i,l.needsUpdate=0<o),n.numPlanes=o,n.numIntersection=0}function t(e,t,r,i){var o=null!==e?e.length:0,a=null;if(0!==o){if(a=l.value,!0!==i||null===a)for(i=r+4*o,t=t.matrixWorldInverse,u.getNormalMatrix(t),(null===a||a.length<i)&&(a=new Float32Array(i)),i=0;i!==o;++i,r+=4)c.copy(e[i]).applyMatrix4(t,u),c.normal.toArray(a,r),a[r+3]=c.constant;l.value=a,l.needsUpdate=!0}return n.numPlanes=o,a}var n=this,i=null,o=0,a=!1,s=!1,c=new b,u=new r,l={value:null,needsUpdate:!1};this.uniform=l,this.numIntersection=this.numPlanes=0,this.init=function(e,n,r){var s=0!==e.length||n||0!==o||a;return a=n,i=t(e,r,0),o=e.length,s},this.beginShadows=function(){s=!0,t(null)},this.endShadows=function(){s=!1,e()},this.setState=function(n,r,c,u,h,f){if(!a||null===n||0===n.length||s&&!c)s?t(null):e();else{c=s?0:o;var d=4*c,p=h.clippingState||null;for(l.value=p,p=t(n,u,d,f),n=0;n!==d;++n)p[n]=i[n];h.clippingState=p,this.numIntersection=r?this.numPlanes:0,this.numPlanes+=c}}}function ce(e){var t={};return{get:function(n){if(void 0!==t[n])return t[n];switch(n){case"WEBGL_depth_texture":var r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(n)}return null===r&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),t[n]=r}}}function ue(e,t,n){function r(e){var i=e.target;for(var s in e=o.get(i),null!==e.index&&t.remove(e.index),e.attributes)t.remove(e.attributes[s]);i.removeEventListener("dispose",r),o.delete(i),(s=a.get(e))&&(t.remove(s),a.delete(e)),n.memory.geometries--}function i(e){var n=[],r=e.index,i=e.attributes.position;if(null!==r){var o=r.array;r=r.version,i=0;for(var s=o.length;i<s;i+=3){var c=o[i+0],u=o[i+1],l=o[i+2];n.push(c,u,u,l,l,c)}}else for(o=i.array,r=i.version,i=0,s=o.length/3-1;i<s;i+=3)c=i+0,u=i+1,l=i+2,n.push(c,u,u,l,l,c);n=new(65535<U(n)?N:D)(n,1),n.version=r,t.update(n,34963),(o=a.get(e))&&t.remove(o),a.set(e,n)}var o=new WeakMap,a=new WeakMap;return{get:function(e,t){var i=o.get(t);return i||(t.addEventListener("dispose",r),t.isBufferGeometry?i=t:t.isGeometry&&(void 0===t._bufferGeometry&&(t._bufferGeometry=(new H).setFromObject(e)),i=t._bufferGeometry),o.set(t,i),n.memory.geometries++,i)},update:function(e){var n=e.index,r=e.attributes;for(var i in null!==n&&t.update(n,34963),r)t.update(r[i],34962);for(i in e=e.morphAttributes,e){n=e[i],r=0;for(var o=n.length;r<o;r++)t.update(n[r],34962)}},getWireframeAttribute:function(e){var t=a.get(e);if(t){var n=e.index;null!==n&&t.version<n.version&&i(e)}else i(e);return a.get(e)}}}function le(e,t,n,r){var i,o,a,s=r.isWebGL2;this.setMode=function(e){i=e},this.setIndex=function(e){o=e.type,a=e.bytesPerElement},this.render=function(t,r){e.drawElements(i,r,o,t*a),n.update(r,i)},this.renderInstances=function(r,c,u,l){if(0!==l){if(s){r=e;var h="drawElementsInstanced"}else if(r=t.get("ANGLE_instanced_arrays"),h="drawElementsInstancedANGLE",null===r)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");r[h](i,u,o,c*a,l),n.update(u,i,l)}}}function he(e){var t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(e,n,r){switch(r=r||1,t.calls++,n){case 4:t.triangles+=e/3*r;break;case 1:t.lines+=e/2*r;break;case 3:t.lines+=r*(e-1);break;case 2:t.lines+=r*e;break;case 0:t.points+=r*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}function fe(e,t){return Math.abs(t[1])-Math.abs(e[1])}function de(e){var t={},n=new Float32Array(8);return{update:function(r,i,o,a){var s=r.morphTargetInfluences,c=void 0===s?0:s.length;if(r=t[i.id],void 0===r){r=[];for(var u=0;u<c;u++)r[u]=[u,0];t[i.id]=r}var l=o.morphTargets&&i.morphAttributes.position;for(o=o.morphNormals&&i.morphAttributes.normal,u=0;u<c;u++){var h=r[u];0!==h[1]&&(l&&i.deleteAttribute("morphTarget"+u),o&&i.deleteAttribute("morphNormal"+u))}for(u=0;u<c;u++)h=r[u],h[0]=u,h[1]=s[u];for(r.sort(fe),u=s=0;8>u;u++)(h=r[u])&&(c=h[0],h=h[1])?(l&&i.setAttribute("morphTarget"+u,l[c]),o&&i.setAttribute("morphNormal"+u,o[c]),n[u]=h,s+=h):n[u]=0;i=i.morphTargetsRelative?1:1-s,a.getUniforms().setValue(e,"morphTargetBaseInfluence",i),a.getUniforms().setValue(e,"morphTargetInfluences",n)}}}function pe(e,t,n,r){var i={};return{update:function(e){var o=r.render.frame,a=e.geometry,s=t.get(e,a);return i[s.id]!==o&&(a.isGeometry&&s.updateFromObject(e),t.update(s),i[s.id]=o),e.isInstancedMesh&&n.update(e.instanceMatrix,34962),s},dispose:function(){i={}}}}function me(e,t,n,r,o,a,s,c,u,l){e=void 0!==e?e:[],i.call(this,e,void 0!==t?t:301,n,r,o,a,void 0!==s?s:1022,c,u,l),this.flipY=!1}function ve(e,t,n,r){i.call(this,null),this.image={data:e||null,width:t||1,height:n||1,depth:r||1},this.minFilter=this.magFilter=1003,this.wrapR=1001,this.flipY=this.generateMipmaps=!1,this.needsUpdate=!0}function ge(e,t,n,r){i.call(this,null),this.image={data:e||null,width:t||1,height:n||1,depth:r||1},this.minFilter=this.magFilter=1003,this.wrapR=1001,this.flipY=this.generateMipmaps=!1,this.needsUpdate=!0}function ye(e,t,n){var r=e[0];if(0>=r||0<r)return e;var i=t*n,o=zs[i];if(void 0===o&&(o=new Float32Array(i),zs[i]=o),0!==t)for(r.toArray(o,0),r=1,i=0;r!==t;++r)i+=n,e[r].toArray(o,i);return o}function be(e,t){if(e.length!==t.length)return!1;for(var n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function we(e,t){for(var n=0,r=t.length;n<r;n++)e[n]=t[n]}function Ee(e,t){var n=Ws[t];void 0===n&&(n=new Int32Array(t),Ws[t]=n);for(var r=0;r!==t;++r)n[r]=e.allocateTextureUnit();return n}function xe(e,t){var n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function _e(e,t){var n=this.cache;void 0!==t.x?n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y):be(n,t)||(e.uniform2fv(this.addr,t),we(n,t))}function Te(e,t){var n=this.cache;void 0!==t.x?n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z):void 0!==t.r?n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b):be(n,t)||(e.uniform3fv(this.addr,t),we(n,t))}function Ae(e,t){var n=this.cache;void 0!==t.x?n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w):be(n,t)||(e.uniform4fv(this.addr,t),we(n,t))}function Se(e,t){var n=this.cache,r=t.elements;void 0===r?be(n,t)||(e.uniformMatrix2fv(this.addr,!1,t),we(n,t)):be(n,r)||(Xs.set(r),e.uniformMatrix2fv(this.addr,!1,Xs),we(n,r))}function Me(e,t){var n=this.cache,r=t.elements;void 0===r?be(n,t)||(e.uniformMatrix3fv(this.addr,!1,t),we(n,t)):be(n,r)||(Ys.set(r),e.uniformMatrix3fv(this.addr,!1,Ys),we(n,r))}function Oe(e,t){var n=this.cache,r=t.elements;void 0===r?be(n,t)||(e.uniformMatrix4fv(this.addr,!1,t),we(n,t)):be(n,r)||(qs.set(r),e.uniformMatrix4fv(this.addr,!1,qs),we(n,r))}function Re(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.safeSetTexture2D(t||Hs,i)}function Ce(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(t||js,i)}function Ie(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(t||Gs,i)}function Le(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.safeSetTextureCube(t||Vs,i)}function De(e,t){var n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function Pe(e,t){var n=this.cache;be(n,t)||(e.uniform2iv(this.addr,t),we(n,t))}function Ne(e,t){var n=this.cache;be(n,t)||(e.uniform3iv(this.addr,t),we(n,t))}function Be(e,t){var n=this.cache;be(n,t)||(e.uniform4iv(this.addr,t),we(n,t))}function ke(e,t){var n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function Fe(e){switch(e){case 5126:return xe;case 35664:return _e;case 35665:return Te;case 35666:return Ae;case 35674:return Se;case 35675:return Me;case 35676:return Oe;case 5124:case 35670:return De;case 35667:case 35671:return Pe;case 35668:case 35672:return Ne;case 35669:case 35673:return Be;case 5125:return ke;case 35678:case 36198:case 36298:case 36306:case 35682:return Re;case 35679:case 36299:case 36307:return Ie;case 35680:case 36300:case 36308:case 36293:return Le;case 36289:case 36303:case 36311:case 36292:return Ce}}function Ue(e,t){e.uniform1fv(this.addr,t)}function He(e,t){e.uniform1iv(this.addr,t)}function je(e,t){e.uniform2iv(this.addr,t)}function Ge(e,t){e.uniform3iv(this.addr,t)}function Ve(e,t){e.uniform4iv(this.addr,t)}function ze(e,t){t=ye(t,this.size,2),e.uniform2fv(this.addr,t)}function We(e,t){t=ye(t,this.size,3),e.uniform3fv(this.addr,t)}function qe(e,t){t=ye(t,this.size,4),e.uniform4fv(this.addr,t)}function Ye(e,t){t=ye(t,this.size,4),e.uniformMatrix2fv(this.addr,!1,t)}function Xe(e,t){t=ye(t,this.size,9),e.uniformMatrix3fv(this.addr,!1,t)}function Qe(e,t){t=ye(t,this.size,16),e.uniformMatrix4fv(this.addr,!1,t)}function Ke(e,t,n){var r=t.length,i=Ee(n,r);for(e.uniform1iv(this.addr,i),e=0;e!==r;++e)n.safeSetTexture2D(t[e]||Hs,i[e])}function Je(e,t,n){var r=t.length,i=Ee(n,r);for(e.uniform1iv(this.addr,i),e=0;e!==r;++e)n.safeSetTextureCube(t[e]||Vs,i[e])}function Ze(e){switch(e){case 5126:return Ue;case 35664:return ze;case 35665:return We;case 35666:return qe;case 35674:return Ye;case 35675:return Xe;case 35676:return Qe;case 5124:case 35670:return He;case 35667:case 35671:return je;case 35668:case 35672:return Ge;case 35669:case 35673:return Ve;case 35678:case 36198:case 36298:case 36306:case 35682:return Ke;case 35680:case 36300:case 36308:case 36293:return Je}}function $e(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=Fe(t.type)}function et(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=Ze(t.type)}function tt(e){this.id=e,this.seq=[],this.map={}}function nt(e,t){this.seq=[],this.map={};for(var n=e.getProgramParameter(t,35718),r=0;r<n;++r){var i=e.getActiveUniform(t,r),o=e.getUniformLocation(t,i.name),a=this,s=i.name,c=s.length;for(Qs.lastIndex=0;;){var u=Qs.exec(s),l=Qs.lastIndex,h=u[1],f=u[3];if("]"===u[2]&&(h|=0),void 0===f||"["===f&&l+2===c){s=a,i=void 0===f?new $e(h,i,o):new et(h,i,o),s.seq.push(i),s.map[i.id]=i;break}f=a.map[h],void 0===f&&(f=new tt(h),h=a,a=f,h.seq.push(a),h.map[a.id]=a),a=f}}}function rt(e,t,n){return t=e.createShader(t),e.shaderSource(t,n),e.compileShader(t),t}function it(e){switch(e){case 3e3:return["Linear","( value )"];case 3001:return["sRGB","( value )"];case 3002:return["RGBE","( value )"];case 3004:return["RGBM","( value, 7.0 )"];case 3005:return["RGBM","( value, 16.0 )"];case 3006:return["RGBD","( value, 256.0 )"];case 3007:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case 3003:return["LogLuv","( value )"];default:throw Error("unsupported encoding: "+e)}}function ot(e,t,n){var r=e.getShaderParameter(t,35713),i=e.getShaderInfoLog(t).trim();if(r&&""===i)return"";for(e=e.getShaderSource(t).split("\n"),t=0;t<e.length;t++)e[t]=t+1+": "+e[t];return e=e.join("\n"),"THREE.WebGLShader: gl.getShaderInfoLog() "+n+"\n"+i+e}function at(e,t){return t=it(t),"vec4 "+e+"( vec4 value ) { return "+t[0]+"ToLinear"+t[1]+"; }"}function st(e,t){return t=it(t),"vec4 "+e+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function ct(e,t){switch(t){case 1:t="Linear";break;case 2:t="Reinhard";break;case 3:t="Uncharted2";break;case 4:t="OptimizedCineon";break;case 5:t="ACESFilmic";break;default:throw Error("unsupported toneMapping: "+t)}return"vec3 "+e+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function ut(e){var t,n=[];for(t in e){var r=e[t];!1!==r&&n.push("#define "+t+" "+r)}return n.join("\n")}function lt(e){return""!==e}function ht(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function ft(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}function dt(e,t){if(e=Fs[t],void 0===e)throw Error("Can not resolve #include <"+t+">");return e.replace(Js,dt)}function pt(e,t,n,r){for(e="",t=parseInt(t);t<parseInt(n);t++)e+=r.replace(/\[ i \]/g,"[ "+t+" ]").replace(/UNROLLED_LOOP_INDEX/g,t);return e}function mt(e){var t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function vt(e){var t="SHADOWMAP_TYPE_BASIC";return 1===e.shadowMapType?t="SHADOWMAP_TYPE_PCF":2===e.shadowMapType?t="SHADOWMAP_TYPE_PCF_SOFT":3===e.shadowMapType&&(t="SHADOWMAP_TYPE_VSM"),t}function gt(e){var t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case 301:case 302:t="ENVMAP_TYPE_CUBE";break;case 306:case 307:t="ENVMAP_TYPE_CUBE_UV";break;case 303:case 304:t="ENVMAP_TYPE_EQUIREC";break;case 305:t="ENVMAP_TYPE_SPHERE"}return t}function yt(e){var t="ENVMAP_MODE_REFLECTION";if(e.envMap)switch(e.envMapMode){case 302:case 304:t="ENVMAP_MODE_REFRACTION"}return t}function bt(e){var t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case 0:t="ENVMAP_BLENDING_MULTIPLY";break;case 1:t="ENVMAP_BLENDING_MIX";break;case 2:t="ENVMAP_BLENDING_ADD"}return t}function wt(e,t,n){var r,i,o=e.getContext(),a=n.defines,s=n.vertexShader,c=n.fragmentShader,u=vt(n),l=gt(n),h=yt(n),f=bt(n),d=0<e.gammaFactor?e.gammaFactor:1,p=n.isWebGL2?"":[n.extensionDerivatives||n.envMapCubeUV||n.bumpMap||n.tangentSpaceNormalMap||n.clearcoatNormalMap||n.flatShading||"physical"===n.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(lt).join("\n"),m=ut(a),v=o.createProgram(),g=n.numMultiviewViews;return n.isRawShaderMaterial?(a=[m].filter(lt).join("\n"),0<a.length&&(a+="\n"),u=[p,m].filter(lt).join("\n"),0<u.length&&(u+="\n")):(a=[mt(n),"#define SHADER_NAME "+n.shaderName,m,n.instancing?"#define USE_INSTANCING":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+d,"#define MAX_BONES "+n.maxBones,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+h:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.useVertexTexture?"#define BONE_TEXTURE":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+u:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING"," attribute mat4 instanceMatrix;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(lt).join("\n"),u=[p,mt(n),"#define SHADER_NAME "+n.shaderName,m,n.alphaTest?"#define ALPHATEST "+n.alphaTest+(n.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+d,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+l:"",n.envMap?"#define "+h:"",n.envMap?"#define "+f:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.sheen?"#define USE_SHEEN":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+u:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(n.extensionShaderTextureLOD||n.envMap)&&n.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==n.toneMapping?"#define TONE_MAPPING":"",0!==n.toneMapping?Fs.tonemapping_pars_fragment:"",0!==n.toneMapping?ct("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.outputEncoding||n.mapEncoding||n.matcapEncoding||n.envMapEncoding||n.emissiveMapEncoding||n.lightMapEncoding?Fs.encodings_pars_fragment:"",n.mapEncoding?at("mapTexelToLinear",n.mapEncoding):"",n.matcapEncoding?at("matcapTexelToLinear",n.matcapEncoding):"",n.envMapEncoding?at("envMapTexelToLinear",n.envMapEncoding):"",n.emissiveMapEncoding?at("emissiveMapTexelToLinear",n.emissiveMapEncoding):"",n.lightMapEncoding?at("lightMapTexelToLinear",n.lightMapEncoding):"",n.outputEncoding?st("linearToOutputTexel",n.outputEncoding):"",n.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(lt).join("\n")),s=s.replace(Js,dt),s=ht(s,n),s=ft(s,n),c=c.replace(Js,dt),c=ht(c,n),c=ft(c,n),s=s.replace(Zs,pt),c=c.replace(Zs,pt),n.isWebGL2&&!n.isRawShaderMaterial&&(l=!1,h=/^\s*#version\s+300\s+es\s*\n/,n.isShaderMaterial&&null!==s.match(h)&&null!==c.match(h)&&(l=!0,s=s.replace(h,""),c=c.replace(h,"")),a="#version 300 es\n\n#define attribute in\n#define varying out\n#define texture2D texture\n"+a,u=["#version 300 es\n\n#define varying in",l?"":"out highp vec4 pc_fragColor;",l?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth\n#define texture2D texture\n#define textureCube texture\n#define texture2DProj textureProj\n#define texture2DLodEXT textureLod\n#define texture2DProjLodEXT textureProjLod\n#define textureCubeLodEXT textureLod\n#define texture2DGradEXT textureGrad\n#define texture2DProjGradEXT textureProjGrad\n#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+u,0<g&&(a=a.replace("#version 300 es\n",["#version 300 es\n\n#extension GL_OVR_multiview2 : require","layout(num_views = "+g+") in;","#define VIEW_ID gl_ViewID_OVR"].join("\n")),a=a.replace("uniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nuniform mat3 normalMatrix;",["uniform mat4 modelViewMatrices["+g+"];","uniform mat4 projectionMatrices["+g+"];","uniform mat4 viewMatrices["+g+"];","uniform mat3 normalMatrices["+g+"];","#define modelViewMatrix modelViewMatrices[VIEW_ID]\n#define projectionMatrix projectionMatrices[VIEW_ID]\n#define viewMatrix viewMatrices[VIEW_ID]\n#define normalMatrix normalMatrices[VIEW_ID]"].join("\n")),u=u.replace("#version 300 es\n","#version 300 es\n\n#extension GL_OVR_multiview2 : require\n#define VIEW_ID gl_ViewID_OVR"),u=u.replace("uniform mat4 viewMatrix;",["uniform mat4 viewMatrices["+g+"];","#define viewMatrix viewMatrices[VIEW_ID]"].join("\n")))),c=u+c,s=rt(o,35633,a+s),c=rt(o,35632,c),o.attachShader(v,s),o.attachShader(v,c),void 0!==n.index0AttributeName?o.bindAttribLocation(v,0,n.index0AttributeName):!0===n.morphTargets&&o.bindAttribLocation(v,0,"position"),o.linkProgram(v),e.debug.checkShaderErrors&&(e=o.getProgramInfoLog(v).trim(),l=o.getShaderInfoLog(s).trim(),h=o.getShaderInfoLog(c).trim(),d=f=!0,!1===o.getProgramParameter(v,35714)?(f=!1,p=ot(o,s,"vertex"),m=ot(o,c,"fragment"),console.error("THREE.WebGLProgram: shader error: ",o.getError(),"35715",o.getProgramParameter(v,35715),"gl.getProgramInfoLog",e,p,m)):""!==e?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",e):""!==l&&""!==h||(d=!1),d&&(this.diagnostics={runnable:f,programLog:e,vertexShader:{log:l,prefix:a},fragmentShader:{log:h,prefix:u}})),o.deleteShader(s),o.deleteShader(c),this.getUniforms=function(){return void 0===r&&(r=new nt(o,v)),r},this.getAttributes=function(){if(void 0===i){for(var e={},t=o.getProgramParameter(v,35721),n=0;n<t;n++){var r=o.getActiveAttrib(v,n).name;e[r]=o.getAttribLocation(v,r)}i=e}return i},this.destroy=function(){o.deleteProgram(v),this.program=void 0},this.name=n.shaderName,this.id=Ks++,this.cacheKey=t,this.usedTimes=1,this.program=v,this.vertexShader=s,this.fragmentShader=c,this.numMultiviewViews=g,this}function Et(e,t,n){function r(e){if(e)e.isTexture?t=e.encoding:e.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),t=e.texture.encoding);else var t=3e3;return t}var i=[],o=n.isWebGL2,a=n.logarithmicDepthBuffer,s=n.floatVertexTextures,c=n.precision,u=n.maxVertexUniforms,l=n.vertexTextures,h={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},f="precision isWebGL2 supportsVertexTextures outputEncoding instancing numMultiviewViews map mapEncoding matcap matcapEncoding envMap envMapMode envMapEncoding envMapCubeUV lightMap lightMapEncoding aoMap emissiveMap emissiveMapEncoding bumpMap normalMap objectSpaceNormalMap tangentSpaceNormalMap clearcoatNormalMap displacementMap specularMap roughnessMap metalnessMap gradientMap alphaMap combine vertexColors vertexTangents vertexUvs uvsVertexOnly fog useFog fogExp2 flatShading sizeAttenuation logarithmicDepthBuffer skinning maxBones useVertexTexture morphTargets morphNormals maxMorphTargets maxMorphNormals premultipliedAlpha numDirLights numPointLights numSpotLights numHemiLights numRectAreaLights numDirLightShadows numPointLightShadows numSpotLightShadows shadowMapEnabled shadowMapType toneMapping physicallyCorrectLights alphaTest doubleSided flipSided numClippingPlanes numClipIntersection depthPacking dithering sheen".split(" ");this.getParameters=function(i,f,d,p,m,v,g){var y=p.fog;p=i.isMeshStandardMaterial?p.environment:null,p=i.envMap||p;var b=h[i.type];if(g.isSkinnedMesh){var w=g.skeleton.bones;if(s)w=1024;else{var E=Math.min(Math.floor((u-20)/4),w.length);E<w.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+w.length+" bones. This GPU supports "+E+"."),w=0):w=E}}else w=0;null!==i.precision&&(c=n.getMaxPrecision(i.precision),c!==i.precision&&console.warn("THREE.WebGLProgram.getParameters:",i.precision,"not supported, using",c,"instead.")),b?(E=Us[b],E={name:i.type,uniforms:Ps.clone(E.uniforms),vertexShader:E.vertexShader,fragmentShader:E.fragmentShader}):E={name:i.type,uniforms:i.uniforms,vertexShader:i.vertexShader,fragmentShader:i.fragmentShader},i.onBeforeCompile(E,e);var x=e.getRenderTarget();return{isWebGL2:o,shaderID:b,shaderName:E.name,uniforms:E.uniforms,vertexShader:E.vertexShader,fragmentShader:E.fragmentShader,defines:i.defines,isRawShaderMaterial:i.isRawShaderMaterial,isShaderMaterial:i.isShaderMaterial,precision:c,instancing:!0===g.isInstancedMesh,supportsVertexTextures:l,numMultiviewViews:x&&x.isWebGLMultiviewRenderTarget?x.numViews:0,outputEncoding:null!==x?r(x.texture):e.outputEncoding,map:!!i.map,mapEncoding:r(i.map),matcap:!!i.matcap,matcapEncoding:r(i.matcap),envMap:!!p,envMapMode:p&&p.mapping,envMapEncoding:r(p),envMapCubeUV:!!p&&(306===p.mapping||307===p.mapping),lightMap:!!i.lightMap,lightMapEncoding:r(i.lightMap),aoMap:!!i.aoMap,emissiveMap:!!i.emissiveMap,emissiveMapEncoding:r(i.emissiveMap),bumpMap:!!i.bumpMap,normalMap:!!i.normalMap,objectSpaceNormalMap:1===i.normalMapType,tangentSpaceNormalMap:0===i.normalMapType,clearcoatNormalMap:!!i.clearcoatNormalMap,displacementMap:!!i.displacementMap,roughnessMap:!!i.roughnessMap,metalnessMap:!!i.metalnessMap,specularMap:!!i.specularMap,alphaMap:!!i.alphaMap,gradientMap:!!i.gradientMap,sheen:!!i.sheen,combine:i.combine,vertexTangents:i.normalMap&&i.vertexTangents,vertexColors:i.vertexColors,vertexUvs:!!i.map||!!i.bumpMap||!!i.normalMap||!!i.specularMap||!!i.alphaMap||!!i.emissiveMap||!!i.roughnessMap||!!i.metalnessMap||!!i.clearcoatNormalMap||!!i.displacementMap,uvsVertexOnly:!(i.map||i.bumpMap||i.normalMap||i.specularMap||i.alphaMap||i.emissiveMap||i.roughnessMap||i.metalnessMap||i.clearcoatNormalMap)&&!!i.displacementMap,fog:!!y,useFog:i.fog,fogExp2:y&&y.isFogExp2,flatShading:i.flatShading,sizeAttenuation:i.sizeAttenuation,logarithmicDepthBuffer:a,skinning:i.skinning&&0<w,maxBones:w,useVertexTexture:s,morphTargets:i.morphTargets,morphNormals:i.morphNormals,maxMorphTargets:e.maxMorphTargets,maxMorphNormals:e.maxMorphNormals,numDirLights:f.directional.length,numPointLights:f.point.length,numSpotLights:f.spot.length,numRectAreaLights:f.rectArea.length,numHemiLights:f.hemi.length,numDirLightShadows:f.directionalShadowMap.length,numPointLightShadows:f.pointShadowMap.length,numSpotLightShadows:f.spotShadowMap.length,numClippingPlanes:m,numClipIntersection:v,dithering:i.dithering,shadowMapEnabled:e.shadowMap.enabled&&0<d.length,shadowMapType:e.shadowMap.type,toneMapping:i.toneMapped?e.toneMapping:0,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:i.premultipliedAlpha,alphaTest:i.alphaTest,doubleSided:2===i.side,flipSided:1===i.side,depthPacking:void 0!==i.depthPacking&&i.depthPacking,index0AttributeName:i.index0AttributeName,extensionDerivatives:i.extensions&&i.extensions.derivatives,extensionFragDepth:i.extensions&&i.extensions.frawbuffers,extensionDrawbuffers:i.extensions&&i.extensions.drawbuffers,extensionShaderTextureLOD:i.extensions&&i.extensions.shaderTextureLOD,rendererExtensionFragDepth:o||null!==t.get("EXT_frag_depth"),rendererExtensionDrawBuffers:o||null!==t.get("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:o||null!==t.get("EXT_shader_texture_lod"),onBeforeCompile:i.onBeforeCompile}},this.getProgramCacheKey=function(t){var n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.fragmentShader),n.push(t.vertexShader)),void 0!==t.defines)for(var r in t.defines)n.push(r),n.push(t.defines[r]);if(void 0===t.isRawShaderMaterial){for(r=0;r<f.length;r++)n.push(t[f[r]]);n.push(e.outputEncoding),n.push(e.gammaFactor)}return n.push(t.onBeforeCompile.toString()),n.join()},this.acquireProgram=function(t,n){for(var r,o=0,a=i.length;o<a;o++){var s=i[o];if(s.cacheKey===n){r=s,++r.usedTimes;break}}return void 0===r&&(r=new wt(e,n,t),i.push(r)),r},this.releaseProgram=function(e){if(0===--e.usedTimes){var t=i.indexOf(e);i[t]=i[i.length-1],i.pop(),e.destroy()}},this.programs=i}function xt(){var e=new WeakMap;return{get:function(t){var n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,r){e.get(t)[n]=r},dispose:function(){e=new WeakMap}}}function _t(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function Tt(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function At(){function e(e,r,i,a,s,c){var u=t[n];return void 0===u?(u={id:e.id,object:e,geometry:r,material:i,program:i.program||o,groupOrder:a,renderOrder:e.renderOrder,z:s,group:c},t[n]=u):(u.id=e.id,u.object=e,u.geometry=r,u.material=i,u.program=i.program||o,u.groupOrder=a,u.renderOrder=e.renderOrder,u.z=s,u.group=c),n++,u}var t=[],n=0,r=[],i=[],o={id:-1};return{opaque:r,transparent:i,init:function(){n=0,r.length=0,i.length=0},push:function(t,n,o,a,s,c){t=e(t,n,o,a,s,c),(!0===o.transparent?i:r).push(t)},unshift:function(t,n,o,a,s,c){t=e(t,n,o,a,s,c),(!0===o.transparent?i:r).unshift(t)},sort:function(e,t){1<r.length&&r.sort(e||_t),1<i.length&&i.sort(t||Tt)}}}function St(){function e(n){n=n.target,n.removeEventListener("dispose",e),t.delete(n)}var t=new WeakMap;return{get:function(n,r){var i=t.get(n);if(void 0===i){var o=new At;t.set(n,new WeakMap),t.get(n).set(r,o),n.addEventListener("dispose",e)}else o=i.get(r),void 0===o&&(o=new At,i.set(r,o));return o},dispose:function(){t=new WeakMap}}}function Mt(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];switch(t.type){case"DirectionalLight":var r={direction:new u,color:new E,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new n};break;case"SpotLight":r={position:new u,direction:new u,color:new E,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new n};break;case"PointLight":r={position:new u,color:new E,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new n,shadowCameraNear:1,shadowCameraFar:1e3};break;case"HemisphereLight":r={direction:new u,skyColor:new E,groundColor:new E};break;case"RectAreaLight":r={color:new E,position:new u,halfWidth:new u,halfHeight:new u}}return e[t.id]=r}}}function Ot(e,t){return(t.castShadow?1:0)-(e.castShadow?1:0)}function Rt(){for(var e=new Mt,t={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},n=0;9>n;n++)t.probe.push(new u);var r=new u,i=new l,o=new l;return{setup:function(n,a,s){for(var c=0,u=0,l=0,h=0;9>h;h++)t.probe[h].set(0,0,0);var f=a=0,d=0,p=0,m=0,v=0,g=0,y=0;s=s.matrixWorldInverse,n.sort(Ot),h=0;for(var b=n.length;h<b;h++){var w=n[h],E=w.color,x=w.intensity,_=w.distance,T=w.shadow&&w.shadow.map?w.shadow.map.texture:null;if(w.isAmbientLight)c+=E.r*x,u+=E.g*x,l+=E.b*x;else if(w.isLightProbe)for(T=0;9>T;T++)t.probe[T].addScaledVector(w.sh.coefficients[T],x);else if(w.isDirectionalLight){var A=e.get(w);A.color.copy(w.color).multiplyScalar(w.intensity),A.direction.setFromMatrixPosition(w.matrixWorld),r.setFromMatrixPosition(w.target.matrixWorld),A.direction.sub(r),A.direction.transformDirection(s),(A.shadow=w.castShadow)&&(x=w.shadow,A.shadowBias=x.bias,A.shadowRadius=x.radius,A.shadowMapSize=x.mapSize,t.directionalShadowMap[a]=T,t.directionalShadowMatrix[a]=w.shadow.matrix,v++),t.directional[a]=A,a++}else w.isSpotLight?(A=e.get(w),A.position.setFromMatrixPosition(w.matrixWorld),A.position.applyMatrix4(s),A.color.copy(E).multiplyScalar(x),A.distance=_,A.direction.setFromMatrixPosition(w.matrixWorld),r.setFromMatrixPosition(w.target.matrixWorld),A.direction.sub(r),A.direction.transformDirection(s),A.coneCos=Math.cos(w.angle),A.penumbraCos=Math.cos(w.angle*(1-w.penumbra)),A.decay=w.decay,(A.shadow=w.castShadow)&&(x=w.shadow,A.shadowBias=x.bias,A.shadowRadius=x.radius,A.shadowMapSize=x.mapSize,t.spotShadowMap[d]=T,t.spotShadowMatrix[d]=w.shadow.matrix,y++),t.spot[d]=A,d++):w.isRectAreaLight?(A=e.get(w),A.color.copy(E).multiplyScalar(x),A.position.setFromMatrixPosition(w.matrixWorld),A.position.applyMatrix4(s),o.identity(),i.copy(w.matrixWorld),i.premultiply(s),o.extractRotation(i),A.halfWidth.set(.5*w.width,0,0),A.halfHeight.set(0,.5*w.height,0),A.halfWidth.applyMatrix4(o),A.halfHeight.applyMatrix4(o),t.rectArea[p]=A,p++):w.isPointLight?(A=e.get(w),A.position.setFromMatrixPosition(w.matrixWorld),A.position.applyMatrix4(s),A.color.copy(w.color).multiplyScalar(w.intensity),A.distance=w.distance,A.decay=w.decay,(A.shadow=w.castShadow)&&(x=w.shadow,A.shadowBias=x.bias,A.shadowRadius=x.radius,A.shadowMapSize=x.mapSize,A.shadowCameraNear=x.camera.near,A.shadowCameraFar=x.camera.far,t.pointShadowMap[f]=T,t.pointShadowMatrix[f]=w.shadow.matrix,g++),t.point[f]=A,f++):w.isHemisphereLight&&(A=e.get(w),A.direction.setFromMatrixPosition(w.matrixWorld),A.direction.transformDirection(s),A.direction.normalize(),A.skyColor.copy(w.color).multiplyScalar(x),A.groundColor.copy(w.groundColor).multiplyScalar(x),t.hemi[m]=A,m++)}t.ambient[0]=c,t.ambient[1]=u,t.ambient[2]=l,n=t.hash,n.directionalLength===a&&n.pointLength===f&&n.spotLength===d&&n.rectAreaLength===p&&n.hemiLength===m&&n.numDirectionalShadows===v&&n.numPointShadows===g&&n.numSpotShadows===y||(t.directional.length=a,t.spot.length=d,t.rectArea.length=p,t.point.length=f,t.hemi.length=m,t.directionalShadowMap.length=v,t.pointShadowMap.length=g,t.spotShadowMap.length=y,t.directionalShadowMatrix.length=v,t.pointShadowMatrix.length=g,t.spotShadowMatrix.length=y,n.directionalLength=a,n.pointLength=f,n.spotLength=d,n.rectAreaLength=p,n.hemiLength=m,n.numDirectionalShadows=v,n.numPointShadows=g,n.numSpotShadows=y,t.version=$s++)},state:t}}function Ct(){var e=new Rt,t=[],n=[];return{init:function(){t.length=0,n.length=0},state:{lightsArray:t,shadowsArray:n,lights:e},setupLights:function(r){e.setup(t,n,r)},pushLight:function(e){t.push(e)},pushShadow:function(e){n.push(e)}}}function It(){function e(n){n=n.target,n.removeEventListener("dispose",e),t.delete(n)}var t=new WeakMap;return{get:function(n,r){if(!1===t.has(n)){var i=new Ct;t.set(n,new WeakMap),t.get(n).set(r,i),n.addEventListener("dispose",e)}else!1===t.get(n).has(r)?(i=new Ct,t.get(n).set(r,i)):i=t.get(n).get(r);return i},dispose:function(){t=new WeakMap}}}function Lt(e){S.call(this),this.type="MeshDepthMaterial",this.depthPacking=3200,this.morphTargets=this.skinning=!1,this.displacementMap=this.alphaMap=this.map=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(e)}function Dt(e){S.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new u,this.nearDistance=1,this.farDistance=1e3,this.morphTargets=this.skinning=!1,this.displacementMap=this.alphaMap=this.map=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(e)}function Pt(e,t,r){function i(e,t,n){n=e<<0|t<<1|n<<2;var r=p[n];return void 0===r&&(r=new Lt({depthPacking:3201,morphTargets:e,skinning:t}),p[n]=r),r}function s(e,t,n){n=e<<0|t<<1|n<<2;var r=m[n];return void 0===r&&(r=new Dt({morphTargets:e,skinning:t}),m[n]=r),r}function c(t,n,r,o,a,c){var u=t.geometry,l=i,h=t.customDepthMaterial;return!0===r.isPointLight&&(l=s,h=t.customDistanceMaterial),void 0===h?(h=!1,!0===n.morphTargets&&(!0===u.isBufferGeometry?h=u.morphAttributes&&u.morphAttributes.position&&0<u.morphAttributes.position.length:!0===u.isGeometry&&(h=u.morphTargets&&0<u.morphTargets.length)),u=!1,!0===t.isSkinnedMesh&&(!0===n.skinning?u=!0:console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",t)),t=l(h,u,!0===t.isInstancedMesh)):t=h,e.localClippingEnabled&&!0===n.clipShadows&&0!==n.clippingPlanes.length&&(h=t.uuid,l=n.uuid,u=v[h],void 0===u&&(u={},v[h]=u),h=u[l],void 0===h&&(h=t.clone(),u[l]=h),t=h),t.visible=n.visible,t.wireframe=n.wireframe,t.side=3===c?null!==n.shadowSide?n.shadowSide:n.side:null!==n.shadowSide?n.shadowSide:g[n.side],t.clipShadows=n.clipShadows,t.clippingPlanes=n.clippingPlanes,t.clipIntersection=n.clipIntersection,t.wireframeLinewidth=n.wireframeLinewidth,t.linewidth=n.linewidth,!0===r.isPointLight&&!0===t.isMeshDistanceMaterial&&(t.referencePosition.setFromMatrixPosition(r.matrixWorld),t.nearDistance=o,t.farDistance=a),t}function u(n,r,i,o,a){if(!1!==n.visible){if(n.layers.test(r.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&3===a)&&(!n.frustumCulled||l.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(i.matrixWorldInverse,n.matrixWorld);var s=t.update(n),h=n.material;if(Array.isArray(h))for(var f=s.groups,d=0,p=f.length;d<p;d++){var m=f[d],v=h[m.materialIndex];v&&v.visible&&(v=c(n,v,o,i.near,i.far,a),e.renderBufferDirect(i,null,s,v,n,m))}else h.visible&&(v=c(n,h,o,i.near,i.far,a),e.renderBufferDirect(i,null,s,v,n,null))}for(n=n.children,s=0,h=n.length;s<h;s++)u(n[s],r,i,o,a)}}var l=new $,h=new n,f=new n,d=new o,p=[],m=[],v={},g={0:1,1:0,2:2},y=new Y({defines:{SAMPLE_RATE:.25,HALF_SAMPLE_RATE:.125},uniforms:{shadow_pass:{value:null},resolution:{value:new n},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n  float mean = 0.0;\n  float squared_mean = 0.0;\n\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy  ) / resolution ) );\n  for ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\n    #ifdef HORIZONAL_PASS\n      vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\n      mean += distribution.x;\n      squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n    #else\n      float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0,  i )  * radius ) / resolution ) );\n      mean += depth;\n      squared_mean += depth * depth;\n    #endif\n  }\n  mean = mean * HALF_SAMPLE_RATE;\n  squared_mean = squared_mean * HALF_SAMPLE_RATE;\n  float std_dev = sqrt( squared_mean - mean * mean );\n  gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),b=y.clone();b.defines.HORIZONAL_PASS=1;var w=new H;w.setAttribute("position",new O(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var E=new j(w,y),x=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(n,i,o){if(!1!==x.enabled&&(!1!==x.autoUpdate||!1!==x.needsUpdate)&&0!==n.length){var s=e.getRenderTarget(),c=e.getActiveCubeFace(),p=e.getActiveMipmapLevel(),m=e.state;m.setBlending(0),m.buffers.color.setClear(1,1,1,1),m.buffers.depth.setTest(!0),m.setScissorTest(!1);for(var v=0,g=n.length;v<g;v++){var w=n[v],_=w.shadow;if(void 0===_)console.warn("THREE.WebGLShadowMap:",w,"has no shadow.");else{h.copy(_.mapSize);var T=_.getFrameExtents();h.multiply(T),f.copy(_.mapSize),(h.x>r||h.y>r)&&(console.warn("THREE.WebGLShadowMap:",w,"has shadow exceeding max texture size, reducing"),h.x>r&&(f.x=Math.floor(r/T.x),h.x=f.x*T.x,_.mapSize.x=f.x),h.y>r&&(f.y=Math.floor(r/T.y),h.y=f.y*T.y,_.mapSize.y=f.y)),null!==_.map||_.isPointLightShadow||3!==this.type||(T={minFilter:1006,magFilter:1006,format:1023},_.map=new a(h.x,h.y,T),_.map.texture.name=w.name+".shadowMap",_.mapPass=new a(h.x,h.y,T),_.camera.updateProjectionMatrix()),null===_.map&&(T={minFilter:1003,magFilter:1003,format:1023},_.map=new a(h.x,h.y,T),_.map.texture.name=w.name+".shadowMap",_.camera.updateProjectionMatrix()),e.setRenderTarget(_.map),e.clear(),T=_.getViewportCount();for(var A=0;A<T;A++){var S=_.getViewport(A);d.set(f.x*S.x,f.y*S.y,f.x*S.z,f.y*S.w),m.viewport(d),_.updateMatrices(w,A),l=_.getFrustum(),u(i,o,_.camera,w,this.type)}_.isPointLightShadow||3!==this.type||(w=_,_=o,T=t.update(E),y.uniforms.shadow_pass.value=w.map.texture,y.uniforms.resolution.value=w.mapSize,y.uniforms.radius.value=w.radius,e.setRenderTarget(w.mapPass),e.clear(),e.renderBufferDirect(_,null,T,y,E,null),b.uniforms.shadow_pass.value=w.mapPass.texture,b.uniforms.resolution.value=w.mapSize,b.uniforms.radius.value=w.radius,e.setRenderTarget(w.map),e.clear(),e.renderBufferDirect(_,null,T,b,E,null))}}x.needsUpdate=!1,e.setRenderTarget(s,c,p)}}}function Nt(e,t,n){function r(t,n,r){var i=new Uint8Array(4),o=e.createTexture();for(e.bindTexture(t,o),e.texParameteri(t,10241,9728),e.texParameteri(t,10240,9728),t=0;t<r;t++)e.texImage2D(n+t,0,6408,1,1,0,6408,5121,i);return o}function i(n,r){g[n]=1,0===y[n]&&(e.enableVertexAttribArray(n),y[n]=1),b[n]!==r&&((d?e:t.get("ANGLE_instanced_arrays"))[d?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,r),b[n]=r)}function a(t){!0!==w[t]&&(e.enable(t),w[t]=!0)}function s(t){!1!==w[t]&&(e.disable(t),w[t]=!1)}function c(t,n,r,i,o,c,u,l){if(0===t)x&&(s(3042),x=!1);else if(x||(a(3042),x=!0),5!==t){if(t!==_||l!==C){if(100===T&&100===M||(e.blendEquation(32774),M=T=100),l)switch(t){case 1:e.blendFuncSeparate(1,771,1,771);break;case 2:e.blendFunc(1,1);break;case 3:e.blendFuncSeparate(0,0,769,771);break;case 4:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case 1:e.blendFuncSeparate(770,771,1,771);break;case 2:e.blendFunc(770,1);break;case 3:e.blendFunc(0,769);break;case 4:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}R=O=S=A=null,_=t,C=l}}else o=o||n,c=c||r,u=u||i,n===T&&o===M||(e.blendEquationSeparate(V[n],V[o]),T=n,M=o),r===A&&i===S&&c===O&&u===R||(e.blendFuncSeparate(z[r],z[i],z[c],z[u]),A=r,S=i,O=c,R=u),_=t,C=null}function u(t){I!==t&&(t?e.frontFace(2304):e.frontFace(2305),I=t)}function l(t){0!==t?(a(2884),t!==L&&(1===t?e.cullFace(1029):2===t?e.cullFace(1028):e.cullFace(1032))):s(2884),L=t}function h(t,n,r){t?(a(32823),(P!==n||N!==r)&&(e.polygonOffset(n,r),P=n,N=r)):s(32823)}function f(t){void 0===t&&(t=33984+B-1),F!==t&&(e.activeTexture(t),F=t)}var d=n.isWebGL2,p=new function(){var t=!1,n=new o,r=null,i=new o(0,0,0,0);return{setMask:function(n){r===n||t||(e.colorMask(n,n,n,n),r=n)},setLocked:function(e){t=e},setClear:function(t,r,o,a,s){!0===s&&(t*=a,r*=a,o*=a),n.set(t,r,o,a),!1===i.equals(n)&&(e.clearColor(t,r,o,a),i.copy(n))},reset:function(){t=!1,r=null,i.set(-1,0,0,0)}}},m=new function(){var t=!1,n=null,r=null,i=null;return{setTest:function(e){e?a(2929):s(2929)},setMask:function(r){n===r||t||(e.depthMask(r),n=r)},setFunc:function(t){if(r!==t){if(t)switch(t){case 0:e.depthFunc(512);break;case 1:e.depthFunc(519);break;case 2:e.depthFunc(513);break;case 3:e.depthFunc(515);break;case 4:e.depthFunc(514);break;case 5:e.depthFunc(518);break;case 6:e.depthFunc(516);break;case 7:e.depthFunc(517);break;default:e.depthFunc(515)}else e.depthFunc(515);r=t}},setLocked:function(e){t=e},setClear:function(t){i!==t&&(e.clearDepth(t),i=t)},reset:function(){t=!1,i=r=n=null}}},v=new function(){var t=!1,n=null,r=null,i=null,o=null,c=null,u=null,l=null,h=null;return{setTest:function(e){t||(e?a(2960):s(2960))},setMask:function(r){n===r||t||(e.stencilMask(r),n=r)},setFunc:function(t,n,a){r===t&&i===n&&o===a||(e.stencilFunc(t,n,a),r=t,i=n,o=a)},setOp:function(t,n,r){c===t&&u===n&&l===r||(e.stencilOp(t,n,r),c=t,u=n,l=r)},setLocked:function(e){t=e},setClear:function(t){h!==t&&(e.clearStencil(t),h=t)},reset:function(){t=!1,h=l=u=c=o=i=r=n=null}}};n=e.getParameter(34921);var g=new Uint8Array(n),y=new Uint8Array(n),b=new Uint8Array(n),w={},E=null,x=null,_=null,T=null,A=null,S=null,M=null,O=null,R=null,C=!1,I=null,L=null,D=null,P=null,N=null,B=e.getParameter(35661),k=!1;n=0,n=e.getParameter(7938),-1!==n.indexOf("WebGL")?(n=parseFloat(/^WebGL ([0-9])/.exec(n)[1]),k=1<=n):-1!==n.indexOf("OpenGL ES")&&(n=parseFloat(/^OpenGL ES ([0-9])/.exec(n)[1]),k=2<=n);var F=null,U={},H=new o,j=new o,G={};G[3553]=r(3553,3553,1),G[34067]=r(34067,34069,6),p.setClear(0,0,0,1),m.setClear(1),v.setClear(0),a(2929),m.setFunc(3),u(!1),l(1),a(2884),c(0);var V={100:32774,101:32778,102:32779};d?(V[103]=32775,V[104]=32776):(n=t.get("EXT_blend_minmax"),null!==n&&(V[103]=n.MIN_EXT,V[104]=n.MAX_EXT));var z={200:0,201:1,202:768,204:770,210:776,208:774,206:772,203:769,205:771,209:775,207:773};return{buffers:{color:p,depth:m,stencil:v},initAttributes:function(){for(var e=0,t=g.length;e<t;e++)g[e]=0},enableAttribute:function(e){i(e,0)},enableAttributeAndDivisor:i,disableUnusedAttributes:function(){for(var t=0,n=y.length;t!==n;++t)y[t]!==g[t]&&(e.disableVertexAttribArray(t),y[t]=0)},enable:a,disable:s,useProgram:function(t){return E!==t&&(e.useProgram(t),E=t,!0)},setBlending:c,setMaterial:function(e,t){2===e.side?s(2884):a(2884);var n=1===e.side;t&&(n=!n),u(n),1===e.blending&&!1===e.transparent?c(0):c(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),m.setFunc(e.depthFunc),m.setTest(e.depthTest),m.setMask(e.depthWrite),p.setMask(e.colorWrite),t=e.stencilWrite,v.setTest(t),t&&(v.setMask(e.stencilWriteMask),v.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),v.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),h(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits)},setFlipSided:u,setCullFace:l,setLineWidth:function(t){t!==D&&(k&&e.lineWidth(t),D=t)},setPolygonOffset:h,setScissorTest:function(e){e?a(3089):s(3089)},activeTexture:f,bindTexture:function(t,n){null===F&&f();var r=U[F];void 0===r&&(r={type:void 0,texture:void 0},U[F]=r),r.type===t&&r.texture===n||(e.bindTexture(t,n||G[t]),r.type=t,r.texture=n)},unbindTexture:function(){var t=U[F];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function(t){!1===H.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),H.copy(t))},viewport:function(t){!1===j.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),j.copy(t))},reset:function(){for(var t=0;t<y.length;t++)1===y[t]&&(e.disableVertexAttribArray(t),y[t]=0);w={},F=null,U={},L=I=_=E=null,p.reset(),m.reset(),v.reset()}}}function Bt(e,t,n,r,i,o,a){function s(e,t){return L?new OffscreenCanvas(e,t):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function c(e,t,n,r){var i=1;if((e.width>r||e.height>r)&&(i=r/Math.max(e.width,e.height)),1>i||!0===t){if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap)return r=t?Wo.floorPowerOfTwo:Math.floor,t=r(i*e.width),i=r(i*e.height),void 0===A&&(A=s(t,i)),n=n?s(t,i):A,n.width=t,n.height=i,n.getContext("2d").drawImage(e,0,0,t,i),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+t+"x"+i+")."),n;"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+").")}return e}function u(e){return Wo.isPowerOfTwo(e.width)&&Wo.isPowerOfTwo(e.height)}function l(e,t){return e.generateMipmaps&&t&&1003!==e.minFilter&&1006!==e.minFilter}function h(t,n,i,o){e.generateMipmap(t),r.get(n).__maxMipLevel=Math.log(Math.max(i,o))*Math.LOG2E}function f(n,r,i){if(!1===S)return r;if(null!==n){if(void 0!==e[n])return e[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}return n=r,6403===r&&(5126===i&&(n=33326),5131===i&&(n=33325),5121===i&&(n=33321)),6407===r&&(5126===i&&(n=34837),5131===i&&(n=34843),5121===i&&(n=32849)),6408===r&&(5126===i&&(n=34836),5131===i&&(n=34842),5121===i&&(n=32856)),33325===n||33326===n||34842===n||34836===n?t.get("EXT_color_buffer_float"):(34843===n||34837===n)&&console.warn("THREE.WebGLRenderer: Floating point textures with RGB format not supported. Please use RGBA instead."),n}function d(e){return 1003===e||1004===e||1005===e?9728:9729}function p(t){t=t.target,t.removeEventListener("dispose",p);var n=r.get(t);void 0!==n.__webglInit&&(e.deleteTexture(n.__webglTexture),r.remove(t)),t.isVideoTexture&&I.delete(t),a.memory.textures--}function m(t){t=t.target,t.removeEventListener("dispose",m);var n=r.get(t),i=r.get(t.texture);if(t){if(void 0!==i.__webglTexture&&e.deleteTexture(i.__webglTexture),t.depthTexture&&t.depthTexture.dispose(),t.isWebGLCubeRenderTarget)for(i=0;6>i;i++)e.deleteFramebuffer(n.__webglFramebuffer[i]),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer[i]);else e.deleteFramebuffer(n.__webglFramebuffer),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer);if(t.isWebGLMultiviewRenderTarget){e.deleteTexture(n.__webglColorTexture),e.deleteTexture(n.__webglDepthStencilTexture),a.memory.textures-=2,i=0;for(var o=n.__webglViewFramebuffers.length;i<o;i++)e.deleteFramebuffer(n.__webglViewFramebuffers[i])}r.remove(t.texture),r.remove(t)}a.memory.textures--}function v(e,t){var i=r.get(e);if(e.isVideoTexture){var o=a.render.frame;I.get(e)!==o&&(I.set(e,o),e.update())}if(0<e.version&&i.__version!==e.version)if(o=e.image,void 0===o)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==o.complete)return void E(i,e,t);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}n.activeTexture(33984+t),n.bindTexture(3553,i.__webglTexture)}function g(t,i){if(6===t.image.length){var a=r.get(t);if(0<t.version&&a.__version!==t.version){w(a,t),n.activeTexture(33984+i),n.bindTexture(34067,a.__webglTexture),e.pixelStorei(37440,t.flipY);var s=t&&(t.isCompressedTexture||t.image[0].isCompressedTexture);i=t.image[0]&&t.image[0].isDataTexture;for(var d=[],p=0;6>p;p++)d[p]=s||i?i?t.image[p].image:t.image[p]:c(t.image[p],!1,!0,O);var m=d[0],v=u(m)||S,g=o.convert(t.format),y=o.convert(t.type),E=f(t.internalFormat,g,y);if(b(34067,t,v),s){for(p=0;6>p;p++){var x=d[p].mipmaps;for(s=0;s<x.length;s++){var _=x[s];1023!==t.format&&1022!==t.format?null!==g?n.compressedTexImage2D(34069+p,s,E,_.width,_.height,0,_.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(34069+p,s,E,_.width,_.height,0,g,y,_.data)}}a.__maxMipLevel=x.length-1}else{for(x=t.mipmaps,p=0;6>p;p++)if(i)for(n.texImage2D(34069+p,0,E,d[p].width,d[p].height,0,g,y,d[p].data),s=0;s<x.length;s++)_=x[s],_=_.image[p].image,n.texImage2D(34069+p,s+1,E,_.width,_.height,0,g,y,_.data);else for(n.texImage2D(34069+p,0,E,g,y,d[p]),s=0;s<x.length;s++)_=x[s],n.texImage2D(34069+p,s+1,E,g,y,_.image[p]);a.__maxMipLevel=x.length}l(t,v)&&h(34067,t,m.width,m.height),a.__version=t.version,t.onUpdate&&t.onUpdate(t)}else n.activeTexture(33984+i),n.bindTexture(34067,a.__webglTexture)}}function y(e,t){n.activeTexture(33984+t),n.bindTexture(34067,r.get(e).__webglTexture)}function b(n,o,a){a?(e.texParameteri(n,10242,P[o.wrapS]),e.texParameteri(n,10243,P[o.wrapT]),32879!==n&&35866!==n||e.texParameteri(n,32882,P[o.wrapR]),e.texParameteri(n,10240,N[o.magFilter]),e.texParameteri(n,10241,N[o.minFilter])):(e.texParameteri(n,10242,33071),e.texParameteri(n,10243,33071),32879!==n&&35866!==n||e.texParameteri(n,32882,33071),1001===o.wrapS&&1001===o.wrapT||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(n,10240,d(o.magFilter)),e.texParameteri(n,10241,d(o.minFilter)),1003!==o.minFilter&&1006!==o.minFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!(a=t.get("EXT_texture_filter_anisotropic"))||1015===o.type&&null===t.get("OES_texture_float_linear")||1016===o.type&&null===(S||t.get("OES_texture_half_float_linear"))||!(1<o.anisotropy||r.get(o).__currentAnisotropy)||(e.texParameterf(n,a.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o.anisotropy,i.getMaxAnisotropy())),r.get(o).__currentAnisotropy=o.anisotropy)}function w(t,n){void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",p),t.__webglTexture=e.createTexture(),a.memory.textures++)}function E(t,r,i){var a=3553;r.isDataTexture2DArray&&(a=35866),r.isDataTexture3D&&(a=32879),w(t,r),n.activeTexture(33984+i),n.bindTexture(a,t.__webglTexture),e.pixelStorei(37440,r.flipY),e.pixelStorei(37441,r.premultiplyAlpha),e.pixelStorei(3317,r.unpackAlignment),i=!S&&(1001!==r.wrapS||1001!==r.wrapT||1003!==r.minFilter&&1006!==r.minFilter),i=i&&!1===u(r.image),i=c(r.image,i,!1,R);var s=u(i)||S,d=o.convert(r.format),p=o.convert(r.type),m=f(r.internalFormat,d,p);b(a,r,s);var v=r.mipmaps;if(r.isDepthTexture){if(m=6402,1015===r.type){if(!1===S)throw Error("Float Depth Texture only supported in WebGL2.0");m=36012}else S&&(m=33189);1026===r.format&&6402===m&&1012!==r.type&&1014!==r.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),r.type=1012,p=o.convert(r.type)),1027===r.format&&(m=34041,1020!==r.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),r.type=1020,p=o.convert(r.type))),n.texImage2D(3553,0,m,i.width,i.height,0,d,p,null)}else if(r.isDataTexture)if(0<v.length&&s){for(var g=0,y=v.length;g<y;g++){var E=v[g];n.texImage2D(3553,g,m,E.width,E.height,0,d,p,E.data)}r.generateMipmaps=!1,t.__maxMipLevel=v.length-1}else n.texImage2D(3553,0,m,i.width,i.height,0,d,p,i.data),t.__maxMipLevel=0;else if(r.isCompressedTexture){for(g=0,y=v.length;g<y;g++)E=v[g],1023!==r.format&&1022!==r.format?null!==d?n.compressedTexImage2D(3553,g,m,E.width,E.height,0,E.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(3553,g,m,E.width,E.height,0,d,p,E.data);t.__maxMipLevel=v.length-1}else if(r.isDataTexture2DArray)n.texImage3D(35866,0,m,i.width,i.height,i.depth,0,d,p,i.data),t.__maxMipLevel=0;else if(r.isDataTexture3D)n.texImage3D(32879,0,m,i.width,i.height,i.depth,0,d,p,i.data),t.__maxMipLevel=0;else if(0<v.length&&s){for(g=0,y=v.length;g<y;g++)E=v[g],n.texImage2D(3553,g,m,d,p,E);r.generateMipmaps=!1,t.__maxMipLevel=v.length-1}else n.texImage2D(3553,0,m,d,p,i),t.__maxMipLevel=0;l(r,s)&&h(a,r,i.width,i.height),t.__version=r.version,r.onUpdate&&r.onUpdate(r)}function x(t,i,a,s){var c=o.convert(i.texture.format),u=o.convert(i.texture.type),l=f(i.texture.internalFormat,c,u);n.texImage2D(s,0,l,i.width,i.height,0,c,u,null),e.bindFramebuffer(36160,t),e.framebufferTexture2D(36160,a,s,r.get(i.texture).__webglTexture,0),e.bindFramebuffer(36160,null)}function _(t,n,r){if(e.bindRenderbuffer(36161,t),n.depthBuffer&&!n.stencilBuffer)r?(r=T(n),e.renderbufferStorageMultisample(36161,r,33189,n.width,n.height)):e.renderbufferStorage(36161,33189,n.width,n.height),e.framebufferRenderbuffer(36160,36096,36161,t);else if(n.depthBuffer&&n.stencilBuffer)r?(r=T(n),e.renderbufferStorageMultisample(36161,r,35056,n.width,n.height)):e.renderbufferStorage(36161,34041,n.width,n.height),e.framebufferRenderbuffer(36160,33306,36161,t);else{t=o.convert(n.texture.format);var i=o.convert(n.texture.type);t=f(n.texture.internalFormat,t,i),r?(r=T(n),e.renderbufferStorageMultisample(36161,r,t,n.width,n.height)):e.renderbufferStorage(36161,t,n.width,n.height)}e.bindRenderbuffer(36161,null)}function T(e){return S&&e.isWebGLMultisampleRenderTarget?Math.min(C,e.samples):0}var A,S=i.isWebGL2,M=i.maxTextures,O=i.maxCubemapSize,R=i.maxTextureSize,C=i.maxSamples,I=new WeakMap,L=!1;try{L="undefined"!==typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(F){}var D=0,P={1e3:10497,1001:33071,1002:33648},N={1003:9728,1004:9984,1005:9986,1006:9729,1007:9985,1008:9987},B=!1,k=!1;this.allocateTextureUnit=function(){var e=D;return e>=M&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+M),D+=1,e},this.resetTextureUnits=function(){D=0},this.setTexture2D=v,this.setTexture2DArray=function(e,t){var i=r.get(e);0<e.version&&i.__version!==e.version?E(i,e,t):(n.activeTexture(33984+t),n.bindTexture(35866,i.__webglTexture))},this.setTexture3D=function(e,t){var i=r.get(e);0<e.version&&i.__version!==e.version?E(i,e,t):(n.activeTexture(33984+t),n.bindTexture(32879,i.__webglTexture))},this.setTextureCube=g,this.setTextureCubeDynamic=y,this.setupRenderTarget=function(i){var s=r.get(i),c=r.get(i.texture);i.addEventListener("dispose",m),c.__webglTexture=e.createTexture(),a.memory.textures++;var d=!0===i.isWebGLCubeRenderTarget,p=!0===i.isWebGLMultisampleRenderTarget,g=!0===i.isWebGLMultiviewRenderTarget,y=u(i)||S;if(d){s.__webglFramebuffer=[];for(var w=0;6>w;w++)s.__webglFramebuffer[w]=e.createFramebuffer()}else if(s.__webglFramebuffer=e.createFramebuffer(),p)if(S){s.__webglMultisampledFramebuffer=e.createFramebuffer(),s.__webglColorRenderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(36161,s.__webglColorRenderbuffer),p=o.convert(i.texture.format);var E=o.convert(i.texture.type);p=f(i.texture.internalFormat,p,E),E=T(i),e.renderbufferStorageMultisample(36161,E,p,i.width,i.height),e.bindFramebuffer(36160,s.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064,36161,s.__webglColorRenderbuffer),e.bindRenderbuffer(36161,null),i.depthBuffer&&(s.__webglDepthRenderbuffer=e.createRenderbuffer(),_(s.__webglDepthRenderbuffer,i,!0)),e.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");else if(g){w=i.width;var A=i.height;p=i.numViews,e.bindFramebuffer(36160,s.__webglFramebuffer);var M=t.get("OVR_multiview2");a.memory.textures+=2,E=e.createTexture(),e.bindTexture(35866,E),e.texParameteri(35866,10240,9728),e.texParameteri(35866,10241,9728),e.texImage3D(35866,0,32856,w,A,p,0,6408,5121,null),M.framebufferTextureMultiviewOVR(36160,36064,E,0,0,p);var O=e.createTexture();for(e.bindTexture(35866,O),e.texParameteri(35866,10240,9728),e.texParameteri(35866,10241,9728),e.texImage3D(35866,0,35056,w,A,p,0,34041,34042,null),M.framebufferTextureMultiviewOVR(36160,33306,O,0,0,p),A=Array(p),w=0;w<p;++w)A[w]=e.createFramebuffer(),e.bindFramebuffer(36160,A[w]),e.framebufferTextureLayer(36160,36064,E,0,w);s.__webglColorTexture=E,s.__webglDepthStencilTexture=O,s.__webglViewFramebuffers=A,e.bindFramebuffer(36160,null),e.bindTexture(35866,null)}if(d){for(n.bindTexture(34067,c.__webglTexture),b(34067,i.texture,y),w=0;6>w;w++)x(s.__webglFramebuffer[w],i,36064,34069+w);l(i.texture,y)&&h(34067,i.texture,i.width,i.height),n.bindTexture(34067,null)}else g||(n.bindTexture(3553,c.__webglTexture),b(3553,i.texture,y),x(s.__webglFramebuffer,i,36064,3553),l(i.texture,y)&&h(3553,i.texture,i.width,i.height),n.bindTexture(3553,null));if(i.depthBuffer){if(s=r.get(i),c=!0===i.isWebGLCubeRenderTarget,i.depthTexture){if(c)throw Error("target.depthTexture not supported in Cube render targets");if(i&&i.isWebGLCubeRenderTarget)throw Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(36160,s.__webglFramebuffer),!i.depthTexture||!i.depthTexture.isDepthTexture)throw Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");if(r.get(i.depthTexture).__webglTexture&&i.depthTexture.image.width===i.width&&i.depthTexture.image.height===i.height||(i.depthTexture.image.width=i.width,i.depthTexture.image.height=i.height,i.depthTexture.needsUpdate=!0),v(i.depthTexture,0),s=r.get(i.depthTexture).__webglTexture,1026===i.depthTexture.format)e.framebufferTexture2D(36160,36096,3553,s,0);else{if(1027!==i.depthTexture.format)throw Error("Unknown depthTexture format");e.framebufferTexture2D(36160,33306,3553,s,0)}}else if(c)for(s.__webglDepthbuffer=[],c=0;6>c;c++)e.bindFramebuffer(36160,s.__webglFramebuffer[c]),s.__webglDepthbuffer[c]=e.createRenderbuffer(),_(s.__webglDepthbuffer[c],i);else e.bindFramebuffer(36160,s.__webglFramebuffer),s.__webglDepthbuffer=e.createRenderbuffer(),_(s.__webglDepthbuffer,i);e.bindFramebuffer(36160,null)}},this.updateRenderTargetMipmap=function(e){var t=e.texture,i=u(e)||S;if(l(t,i)){i=e.isWebGLCubeRenderTarget?34067:3553;var o=r.get(t).__webglTexture;n.bindTexture(i,o),h(i,t,e.width,e.height),n.bindTexture(i,null)}},this.updateMultisampleRenderTarget=function(t){if(t.isWebGLMultisampleRenderTarget)if(S){var n=r.get(t);e.bindFramebuffer(36008,n.__webglMultisampledFramebuffer),e.bindFramebuffer(36009,n.__webglFramebuffer),n=t.width;var i=t.height,o=16384;t.depthBuffer&&(o|=256),t.stencilBuffer&&(o|=1024),e.blitFramebuffer(0,0,n,i,0,0,n,i,o,9728)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.safeSetTexture2D=function(e,t){e&&e.isWebGLRenderTarget&&(!1===B&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),B=!0),e=e.texture),v(e,t)},this.safeSetTextureCube=function(e,t){e&&e.isWebGLCubeRenderTarget&&(!1===k&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),k=!0),e=e.texture),e&&e.isCubeTexture||Array.isArray(e.image)&&6===e.image.length?g(e,t):y(e,t)}}function kt(e,t,n){var r=n.isWebGL2;return{convert:function(e){if(1009===e)return 5121;if(1017===e)return 32819;if(1018===e)return 32820;if(1019===e)return 33635;if(1010===e)return 5120;if(1011===e)return 5122;if(1012===e)return 5123;if(1013===e)return 5124;if(1014===e)return 5125;if(1015===e)return 5126;if(1016===e){if(r)return 5131;var n=t.get("OES_texture_half_float");return null!==n?n.HALF_FLOAT_OES:null}if(1021===e)return 6406;if(1022===e)return 6407;if(1023===e)return 6408;if(1024===e)return 6409;if(1025===e)return 6410;if(1026===e)return 6402;if(1027===e)return 34041;if(1028===e)return 6403;if(1029===e)return 36244;if(1030===e)return 33319;if(1031===e)return 33320;if(1032===e)return 36248;if(1033===e)return 36249;if(33776===e||33777===e||33778===e||33779===e){if(n=t.get("WEBGL_compressed_texture_s3tc"),null===n)return null;if(33776===e)return n.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===e)return n.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===e)return n.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===e)return n.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===e||35841===e||35842===e||35843===e){if(n=t.get("WEBGL_compressed_texture_pvrtc"),null===n)return null;if(35840===e)return n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===e)return n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===e)return n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===e)return n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}return 36196===e?(n=t.get("WEBGL_compressed_texture_etc1"),null!==n?n.COMPRESSED_RGB_ETC1_WEBGL:null):37808===e||37809===e||37810===e||37811===e||37812===e||37813===e||37814===e||37815===e||37816===e||37817===e||37818===e||37819===e||37820===e||37821===e?(n=t.get("WEBGL_compressed_texture_astc"),null!==n?e:null):1020===e?r?34042:(n=t.get("WEBGL_depth_texture"),null!==n?n.UNSIGNED_INT_24_8_WEBGL:null):void 0}}}function Ft(e,t,n,r){a.call(this,e,t,r),this.stencilBuffer=this.depthBuffer=!1,this.numViews=n}function Ut(e,t){function i(e){return e.isArrayCamera?e.cameras:(h[0]=e,h)}function o(e){if(void 0===e.isArrayCamera)return!0;if(e=e.cameras,e.length>v)return!1;for(var t=1,n=e.length;t<n;t++)if(e[0].viewport.z!==e[t].viewport.z||e[0].viewport.w!==e[t].viewport.w)return!1;return!0}var a,s,c,u,h,f,d,p=e.extensions,m=e.properties,v=0;this.isAvailable=function(){if(void 0===d){var e=p.get("OVR_multiview2");if(d=null!==e&&!1===t.getContextAttributes().antialias)for(v=t.getParameter(e.MAX_VIEWS_OVR),a=new Ft(0,0,2),f=new n,u=[],c=[],h=[],e=0;e<v;e++)u[e]=new l,c[e]=new r}return d},this.attachCamera=function(t){if(!1!==o(t)){if((s=e.getRenderTarget())?f.set(s.width,s.height):e.getDrawingBufferSize(f),t.isArrayCamera){var n=t.cameras[0].viewport;a.setSize(n.z,n.w),a.setNumViews(t.cameras.length)}else a.setSize(f.x,f.y),a.setNumViews(2);e.setRenderTarget(a)}},this.detachCamera=function(n){if(a===e.getRenderTarget()){e.setRenderTarget(s);var r=a,i=r.numViews,o=m.get(r).__webglViewFramebuffers,c=r.width;if(r=r.height,n.isArrayCamera)for(var u=0;u<i;u++){var l=n.cameras[u].viewport,h=l.x,d=l.y,p=h+l.z;l=d+l.w,t.bindFramebuffer(36008,o[u]),t.blitFramebuffer(0,0,c,r,h,d,p,l,16384,9728)}else t.bindFramebuffer(36008,o[0]),t.blitFramebuffer(0,0,c,r,0,0,f.x,f.y,16384,9728)}},this.updateCameraProjectionMatricesUniform=function(e,n){e=i(e);for(var r=0;r<e.length;r++)u[r].copy(e[r].projectionMatrix);n.setValue(t,"projectionMatrices",u)},this.updateCameraViewMatricesUniform=function(e,n){e=i(e);for(var r=0;r<e.length;r++)u[r].copy(e[r].matrixWorldInverse);n.setValue(t,"viewMatrices",u)},this.updateObjectMatricesUniforms=function(e,n,r){n=i(n);for(var o=0;o<n.length;o++)u[o].multiplyMatrices(n[o].matrixWorldInverse,e.matrixWorld),c[o].getNormalMatrix(u[o]);r.setValue(t,"modelViewMatrices",u),r.setValue(t,"normalMatrices",c)}}function Ht(e){Q.call(this),this.cameras=e||[]}function jt(){d.call(this),this.type="Group"}function Gt(e,t){function n(e){var t=m.get(e.inputSource);t&&(t.targetRay&&t.targetRay.dispatchEvent({type:e.type}),t.grip&&t.grip.dispatchEvent({type:e.type}))}function r(){m.forEach((function(e,t){e.targetRay&&(e.targetRay.dispatchEvent({type:"disconnected",data:t}),e.targetRay.visible=!1),e.grip&&(e.grip.dispatchEvent({type:"disconnected",data:t}),e.grip.visible=!1)})),m.clear(),e.setFramebuffer(null),e.setRenderTarget(e.getRenderTarget()),T.stop(),c.isPresenting=!1,c.dispatchEvent({type:"sessionend"})}function i(e){h=e,T.setContext(l),T.start(),c.isPresenting=!0,c.dispatchEvent({type:"sessionstart"})}function a(e){for(var t=l.inputSources,n=0;n<p.length;n++)m.set(t[n],p[n]);for(n=0;n<e.removed.length;n++){t=e.removed[n];var r=m.get(t);r&&(r.targetRay&&r.targetRay.dispatchEvent({type:"disconnected",data:t}),r.grip&&r.grip.dispatchEvent({type:"disconnected",data:t}),m.delete(t))}for(n=0;n<e.added.length;n++)t=e.added[n],(r=m.get(t))&&(r.targetRay&&r.targetRay.dispatchEvent({type:"connected",data:t}),r.grip&&r.grip.dispatchEvent({type:"connected",data:t}))}function s(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.getInverse(e.matrixWorld)}var c=this,l=null,h=null,f="local-floor",d=null,p=[],m=new Map,v=new Q;v.layers.enable(1),v.viewport=new o;var g=new Q;g.layers.enable(2),g.viewport=new o;var y=new Ht([v,g]);y.layers.enable(1),y.layers.enable(2);var b=null,w=null;this.isPresenting=this.enabled=!1,this.getController=function(e){var t=p[e];return void 0===t&&(t={},p[e]=t),void 0===t.targetRay&&(t.targetRay=new jt,t.targetRay.matrixAutoUpdate=!1,t.targetRay.visible=!1),t.targetRay},this.getControllerGrip=function(e){var t=p[e];return void 0===t&&(t={},p[e]=t),void 0===t.grip&&(t.grip=new jt,t.grip.matrixAutoUpdate=!1,t.grip.visible=!1),t.grip},this.setFramebufferScaleFactor=function(){},this.setReferenceSpaceType=function(e){f=e},this.getReferenceSpace=function(){return h},this.getSession=function(){return l},this.setSession=function(e){l=e,null!==l&&(l.addEventListener("select",n),l.addEventListener("selectstart",n),l.addEventListener("selectend",n),l.addEventListener("squeeze",n),l.addEventListener("squeezestart",n),l.addEventListener("squeezeend",n),l.addEventListener("end",r),e=t.getContextAttributes(),e=new XRWebGLLayer(l,t,{antialias:e.antialias,alpha:e.alpha,depth:e.depth,stencil:e.stencil}),l.updateRenderState({baseLayer:e}),l.requestReferenceSpace(f).then(i),l.addEventListener("inputsourceschange",a))};var E=new u,x=new u;this.getCamera=function(e){y.near=g.near=v.near=e.near,y.far=g.far=v.far=e.far,b===y.near&&w===y.far||(l.updateRenderState({depthNear:y.near,depthFar:y.far}),b=y.near,w=y.far);var t=e.parent,n=y.cameras;s(y,t);for(var r=0;r<n.length;r++)s(n[r],t);for(e.matrixWorld.copy(y.matrixWorld),e=e.children,r=0,t=e.length;r<t;r++)e[r].updateMatrixWorld(!0);E.setFromMatrixPosition(v.matrixWorld),x.setFromMatrixPosition(g.matrixWorld),r=E.distanceTo(x);var i=v.projectionMatrix.elements,o=g.projectionMatrix.elements,a=i[14]/(i[10]-1);e=i[14]/(i[10]+1),t=(i[9]+1)/i[5],n=(i[9]-1)/i[5];var c=(i[8]-1)/i[0],u=(o[8]+1)/o[0];return o=a*c,i=a*u,u=r/(-c+u),c=u*-c,v.matrixWorld.decompose(y.position,y.quaternion,y.scale),y.translateX(c),y.translateZ(u),y.matrixWorld.compose(y.position,y.quaternion,y.scale),y.matrixWorldInverse.getInverse(y.matrixWorld),a+=u,u=e+u,y.projectionMatrix.makePerspective(o-c,i+(r-c),t*e/u*a,n*e/u*a,a,u),y};var _=null,T=new ee;T.setAnimationLoop((function(t,n){if(d=n.getViewerPose(h),null!==d){var r=d.views,i=l.renderState.baseLayer;e.setFramebuffer(i.framebuffer);for(var o=0;o<r.length;o++){var a=r[o],s=i.getViewport(a),c=y.cameras[o];c.matrix.fromArray(a.transform.matrix),c.projectionMatrix.fromArray(a.projectionMatrix),c.viewport.set(s.x,s.y,s.width,s.height),0===o&&y.matrix.copy(c.matrix)}}for(r=l.inputSources,o=0;o<p.length;o++)i=p[o],a=r[o],c=s=null,a&&(i.targetRay&&(s=n.getPose(a.targetRaySpace,h),null!==s&&(i.targetRay.matrix.fromArray(s.transform.matrix),i.targetRay.matrix.decompose(i.targetRay.position,i.targetRay.rotation,i.targetRay.scale))),i.grip&&a.gripSpace&&(c=n.getPose(a.gripSpace,h),null!==c&&(i.grip.matrix.fromArray(c.transform.matrix),i.grip.matrix.decompose(i.grip.position,i.grip.rotation,i.grip.scale)))),i.targetRay&&(i.targetRay.visible=null!==s),i.grip&&(i.grip.visible=null!==c);_&&_(t,n)})),this.setAnimationLoop=function(e){_=e},this.dispose=function(){}}function Vt(e){var t;function r(){L=new ce(Fe),D=new ae(Fe,L,e),!1===D.isWebGL2&&(L.get("WEBGL_depth_texture"),L.get("OES_texture_float"),L.get("OES_texture_half_float"),L.get("OES_texture_half_float_linear"),L.get("OES_standard_derivatives"),L.get("OES_element_index_uint"),L.get("ANGLE_instanced_arrays")),L.get("OES_texture_float_linear"),X=new kt(Fe,L,D),P=new Nt(Fe,L,D),P.scissor(xe.copy(Ce).multiplyScalar(Se).floor()),P.viewport(Ee.copy(Re).multiplyScalar(Se).floor()),N=new he(Fe),B=new xt,k=new Bt(Fe,L,P,B,D,X,N),F=new te(Fe,D),U=new ue(Fe,F,N),H=new pe(Fe,U,F,N),W=new de(Fe),j=new Et(Q,L,D),G=new St,V=new It,z=new ie(Q,P,H,S),q=new oe(Fe,L,N,D),Y=new le(Fe,L,N,D),N.programs=j.programs,Q.capabilities=D,Q.extensions=L,Q.properties=B,Q.renderLists=G,Q.state=P,Q.info=N}function i(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),K=!0}function a(){console.log("THREE.WebGLRenderer: Context Restored."),K=!1,r()}function s(e){e=e.target,e.removeEventListener("dispose",s),c(e),B.remove(e)}function c(e){var t=B.get(e).program;e.program=void 0,void 0!==t&&j.releaseProgram(t)}function h(e,t){e.render((function(e){Q.renderBufferImmediate(e,t)}))}function f(e,t,n,r){if(!1!==e.visible){if(e.layers.test(t.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)I.pushLight(e),e.castShadow&&I.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||Le.intersectsSprite(e)){r&&ke.setFromMatrixPosition(e.matrixWorld).applyMatrix4(Be);var i=H.update(e),o=e.material;o.visible&&C.push(e,i,o,n,ke.z,null)}}else if(e.isImmediateRenderObject)r&&ke.setFromMatrixPosition(e.matrixWorld).applyMatrix4(Be),C.push(e,null,e.material,n,ke.z,null);else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.frame!==N.render.frame&&(e.skeleton.update(),e.skeleton.frame=N.render.frame),!e.frustumCulled||Le.intersectsObject(e)))if(r&&ke.setFromMatrixPosition(e.matrixWorld).applyMatrix4(Be),i=H.update(e),o=e.material,Array.isArray(o))for(var a=i.groups,s=0,c=a.length;s<c;s++){var u=a[s],l=o[u.materialIndex];l&&l.visible&&C.push(e,i,l,n,ke.z,u)}else o.visible&&C.push(e,i,o,n,ke.z,null);for(e=e.children,s=0,c=e.length;s<c;s++)f(e[s],t,n,r)}}function d(e,t,n,r){for(var i=0,o=e.length;i<o;i++){var a=e[i],s=a.object,c=a.geometry,u=void 0===r?a.material:r;if(a=a.group,n.isArrayCamera)if(we=n,Ue.enabled&&He.isAvailable())m(s,t,n,c,u,a);else for(var l=n.cameras,h=0,f=l.length;h<f;h++){var d=l[h];s.layers.test(d.layers)&&(P.viewport(Ee.copy(d.viewport)),I.setupLights(d),m(s,t,d,c,u,a))}else we=null,m(s,t,n,c,u,a)}}function m(e,n,r,i,o,a){if(e.onBeforeRender(Q,n,r,i,o,a),I=V.get(n,we||r),e.modelViewMatrix.multiplyMatrices(r.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),e.isImmediateRenderObject){var s=g(r,n,o,e);P.setMaterial(o),ge=t=null,ye=!1,h(e,s)}else Q.renderBufferDirect(r,n,i,o,e,a);e.onAfterRender(Q,n,r,i,o,a),I=V.get(n,we||r)}function v(e,t,n){var r=B.get(e),i=I.state.lights,o=i.state.version;n=j.getParameters(e,i.state,I.state.shadowsArray,t,De.numPlanes,De.numIntersection,n);var a=j.getProgramCacheKey(n),u=r.program,l=!0;if(void 0===u)e.addEventListener("dispose",s);else if(u.cacheKey!==a)c(e);else{if(r.lightsStateVersion!==o)r.lightsStateVersion=o;else if(void 0!==n.shaderID)return;l=!1}if(l&&(u=j.acquireProgram(n,a),r.program=u,r.uniforms=n.uniforms,r.environment=e.isMeshStandardMaterial?t.environment:null,r.outputEncoding=Q.outputEncoding,e.program=u),n=u.getAttributes(),e.morphTargets)for(a=e.numSupportedMorphTargets=0;a<Q.maxMorphTargets;a++)0<=n["morphTarget"+a]&&e.numSupportedMorphTargets++;if(e.morphNormals)for(a=e.numSupportedMorphNormals=0;a<Q.maxMorphNormals;a++)0<=n["morphNormal"+a]&&e.numSupportedMorphNormals++;n=r.uniforms,(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(r.numClippingPlanes=De.numPlanes,r.numIntersection=De.numIntersection,n.clippingPlanes=De.uniform),r.fog=t.fog,r.needsLights=e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights,r.lightsStateVersion=o,r.needsLights&&(n.ambientLightColor.value=i.state.ambient,n.lightProbe.value=i.state.probe,n.directionalLights.value=i.state.directional,n.spotLights.value=i.state.spot,n.rectAreaLights.value=i.state.rectArea,n.pointLights.value=i.state.point,n.hemisphereLights.value=i.state.hemi,n.directionalShadowMap.value=i.state.directionalShadowMap,n.directionalShadowMatrix.value=i.state.directionalShadowMatrix,n.spotShadowMap.value=i.state.spotShadowMap,n.spotShadowMatrix.value=i.state.spotShadowMatrix,n.pointShadowMap.value=i.state.pointShadowMap,n.pointShadowMatrix.value=i.state.pointShadowMatrix),e=r.program.getUniforms(),e=nt.seqWithValue(e.seq,n),r.uniformsList=e}function g(e,t,n,r){k.resetTextureUnits();var i=t.fog,o=n.isMeshStandardMaterial?t.environment:null,a=B.get(n),s=I.state.lights;Pe&&(Ne||e!==be)&&De.setState(n.clippingPlanes,n.clipIntersection,n.clipShadows,e,a,e===be&&n.id===ve),n.version===a.__version?void 0===a.program||n.fog&&a.fog!==i||a.environment!==o||a.needsLights&&a.lightsStateVersion!==s.state.version?v(n,t,r):void 0===a.numClippingPlanes||a.numClippingPlanes===De.numPlanes&&a.numIntersection===De.numIntersection?a.outputEncoding!==Q.outputEncoding&&v(n,t,r):v(n,t,r):(v(n,t,r),a.__version=n.version);var c=!1,u=!1,l=!1;t=a.program,s=t.getUniforms();var h=a.uniforms;if(P.useProgram(t.program)&&(l=u=c=!0),n.id!==ve&&(ve=n.id,u=!0),(c||be!==e)&&(0<t.numMultiviewViews?He.updateCameraProjectionMatricesUniform(e,s):s.setValue(Fe,"projectionMatrix",e.projectionMatrix),D.logarithmicDepthBuffer&&s.setValue(Fe,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),be!==e&&(be=e,l=u=!0),(n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshStandardMaterial||n.envMap)&&(c=s.map.cameraPosition,void 0!==c&&c.setValue(Fe,ke.setFromMatrixPosition(e.matrixWorld))),(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial)&&s.setValue(Fe,"isOrthographic",!0===e.isOrthographicCamera),(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.skinning)&&(0<t.numMultiviewViews?He.updateCameraViewMatricesUniform(e,s):s.setValue(Fe,"viewMatrix",e.matrixWorldInverse))),n.skinning&&(s.setOptional(Fe,r,"bindMatrix"),s.setOptional(Fe,r,"bindMatrixInverse"),c=r.skeleton)){var f=c.bones;if(D.floatVertexTextures){if(void 0===c.boneTexture){f=Math.sqrt(4*f.length),f=Wo.ceilPowerOfTwo(f),f=Math.max(f,4);var d=new Float32Array(f*f*4);d.set(c.boneMatrices);var p=new Z(d,f,f,1023,1015);c.boneMatrices=d,c.boneTexture=p,c.boneTextureSize=f}s.setValue(Fe,"boneTexture",c.boneTexture,k),s.setValue(Fe,"boneTextureSize",c.boneTextureSize)}else s.setOptional(Fe,c,"boneMatrices")}if((u||a.receiveShadow!==r.receiveShadow)&&(a.receiveShadow=r.receiveShadow,s.setValue(Fe,"receiveShadow",r.receiveShadow)),u){if(s.setValue(Fe,"toneMappingExposure",Q.toneMappingExposure),s.setValue(Fe,"toneMappingWhitePoint",Q.toneMappingWhitePoint),a.needsLights&&(u=l,h.ambientLightColor.needsUpdate=u,h.lightProbe.needsUpdate=u,h.directionalLights.needsUpdate=u,h.pointLights.needsUpdate=u,h.spotLights.needsUpdate=u,h.rectAreaLights.needsUpdate=u,h.hemisphereLights.needsUpdate=u),i&&n.fog&&(h.fogColor.value.copy(i.color),i.isFog?(h.fogNear.value=i.near,h.fogFar.value=i.far):i.isFogExp2&&(h.fogDensity.value=i.density)),n.isMeshBasicMaterial)y(h,n);else if(n.isMeshLambertMaterial)y(h,n),n.emissiveMap&&(h.emissiveMap.value=n.emissiveMap);else if(n.isMeshToonMaterial)y(h,n),h.specular.value.copy(n.specular),h.shininess.value=Math.max(n.shininess,1e-4),n.gradientMap&&(h.gradientMap.value=n.gradientMap),n.emissiveMap&&(h.emissiveMap.value=n.emissiveMap),n.bumpMap&&(h.bumpMap.value=n.bumpMap,h.bumpScale.value=n.bumpScale,1===n.side&&(h.bumpScale.value*=-1)),n.normalMap&&(h.normalMap.value=n.normalMap,h.normalScale.value.copy(n.normalScale),1===n.side&&h.normalScale.value.negate()),n.displacementMap&&(h.displacementMap.value=n.displacementMap,h.displacementScale.value=n.displacementScale,h.displacementBias.value=n.displacementBias);else if(n.isMeshPhongMaterial)y(h,n),h.specular.value.copy(n.specular),h.shininess.value=Math.max(n.shininess,1e-4),n.emissiveMap&&(h.emissiveMap.value=n.emissiveMap),n.bumpMap&&(h.bumpMap.value=n.bumpMap,h.bumpScale.value=n.bumpScale,1===n.side&&(h.bumpScale.value*=-1)),n.normalMap&&(h.normalMap.value=n.normalMap,h.normalScale.value.copy(n.normalScale),1===n.side&&h.normalScale.value.negate()),n.displacementMap&&(h.displacementMap.value=n.displacementMap,h.displacementScale.value=n.displacementScale,h.displacementBias.value=n.displacementBias);else if(n.isMeshStandardMaterial)y(h,n,o),n.isMeshPhysicalMaterial?(b(h,n,o),h.reflectivity.value=n.reflectivity,h.clearcoat.value=n.clearcoat,h.clearcoatRoughness.value=n.clearcoatRoughness,n.sheen&&h.sheen.value.copy(n.sheen),n.clearcoatNormalMap&&(h.clearcoatNormalScale.value.copy(n.clearcoatNormalScale),h.clearcoatNormalMap.value=n.clearcoatNormalMap,1===n.side&&h.clearcoatNormalScale.value.negate()),h.transparency.value=n.transparency):b(h,n,o);else if(n.isMeshMatcapMaterial)y(h,n),n.matcap&&(h.matcap.value=n.matcap),n.bumpMap&&(h.bumpMap.value=n.bumpMap,h.bumpScale.value=n.bumpScale,1===n.side&&(h.bumpScale.value*=-1)),n.normalMap&&(h.normalMap.value=n.normalMap,h.normalScale.value.copy(n.normalScale),1===n.side&&h.normalScale.value.negate()),n.displacementMap&&(h.displacementMap.value=n.displacementMap,h.displacementScale.value=n.displacementScale,h.displacementBias.value=n.displacementBias);else if(n.isMeshDepthMaterial)y(h,n),n.displacementMap&&(h.displacementMap.value=n.displacementMap,h.displacementScale.value=n.displacementScale,h.displacementBias.value=n.displacementBias);else if(n.isMeshDistanceMaterial)y(h,n),n.displacementMap&&(h.displacementMap.value=n.displacementMap,h.displacementScale.value=n.displacementScale,h.displacementBias.value=n.displacementBias),h.referencePosition.value.copy(n.referencePosition),h.nearDistance.value=n.nearDistance,h.farDistance.value=n.farDistance;else if(n.isMeshNormalMaterial)y(h,n),n.bumpMap&&(h.bumpMap.value=n.bumpMap,h.bumpScale.value=n.bumpScale,1===n.side&&(h.bumpScale.value*=-1)),n.normalMap&&(h.normalMap.value=n.normalMap,h.normalScale.value.copy(n.normalScale),1===n.side&&h.normalScale.value.negate()),n.displacementMap&&(h.displacementMap.value=n.displacementMap,h.displacementScale.value=n.displacementScale,h.displacementBias.value=n.displacementBias);else if(n.isLineBasicMaterial)h.diffuse.value.copy(n.color),h.opacity.value=n.opacity,n.isLineDashedMaterial&&(h.dashSize.value=n.dashSize,h.totalSize.value=n.dashSize+n.gapSize,h.scale.value=n.scale);else if(n.isPointsMaterial){if(h.diffuse.value.copy(n.color),h.opacity.value=n.opacity,h.size.value=n.size*Se,h.scale.value=.5*Ae,n.map&&(h.map.value=n.map),n.alphaMap&&(h.alphaMap.value=n.alphaMap),n.map)var m=n.map;else n.alphaMap&&(m=n.alphaMap);void 0!==m&&(!0===m.matrixAutoUpdate&&m.updateMatrix(),h.uvTransform.value.copy(m.matrix))}else if(n.isSpriteMaterial){if(h.diffuse.value.copy(n.color),h.opacity.value=n.opacity,h.rotation.value=n.rotation,n.map&&(h.map.value=n.map),n.alphaMap&&(h.alphaMap.value=n.alphaMap),n.map)var g=n.map;else n.alphaMap&&(g=n.alphaMap);void 0!==g&&(!0===g.matrixAutoUpdate&&g.updateMatrix(),h.uvTransform.value.copy(g.matrix))}else n.isShadowMaterial&&(h.color.value.copy(n.color),h.opacity.value=n.opacity);void 0!==h.ltc_1&&(h.ltc_1.value=ks.LTC_1),void 0!==h.ltc_2&&(h.ltc_2.value=ks.LTC_2),nt.upload(Fe,a.uniformsList,h,k),n.isShaderMaterial&&(n.uniformsNeedUpdate=!1)}return n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(nt.upload(Fe,a.uniformsList,h,k),n.uniformsNeedUpdate=!1),n.isSpriteMaterial&&s.setValue(Fe,"center",r.center),0<t.numMultiviewViews?He.updateObjectMatricesUniforms(r,e,s):(s.setValue(Fe,"modelViewMatrix",r.modelViewMatrix),s.setValue(Fe,"normalMatrix",r.normalMatrix)),s.setValue(Fe,"modelMatrix",r.matrixWorld),t}function y(e,t,n){if(e.opacity.value=t.opacity,t.color&&e.diffuse.value.copy(t.color),t.emissive&&e.emissive.value.copy(t.emissive).multiplyScalar(t.emissiveIntensity),t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.specularMap&&(e.specularMap.value=t.specularMap),(n=t.envMap||n)&&(e.envMap.value=n,e.flipEnvMap.value=n.isCubeTexture?-1:1,e.reflectivity.value=t.reflectivity,e.refractionRatio.value=t.refractionRatio,e.maxMipLevel.value=B.get(n).__maxMipLevel),t.lightMap&&(e.lightMap.value=t.lightMap,e.lightMapIntensity.value=t.lightMapIntensity),t.aoMap&&(e.aoMap.value=t.aoMap,e.aoMapIntensity.value=t.aoMapIntensity),t.map)var r=t.map;else t.specularMap?r=t.specularMap:t.displacementMap?r=t.displacementMap:t.normalMap?r=t.normalMap:t.bumpMap?r=t.bumpMap:t.roughnessMap?r=t.roughnessMap:t.metalnessMap?r=t.metalnessMap:t.alphaMap?r=t.alphaMap:t.emissiveMap&&(r=t.emissiveMap);if(void 0!==r&&(r.isWebGLRenderTarget&&(r=r.texture),!0===r.matrixAutoUpdate&&r.updateMatrix(),e.uvTransform.value.copy(r.matrix)),t.aoMap)var i=t.aoMap;else t.lightMap&&(i=t.lightMap);void 0!==i&&(i.isWebGLRenderTarget&&(i=i.texture),!0===i.matrixAutoUpdate&&i.updateMatrix(),e.uv2Transform.value.copy(i.matrix))}function b(e,t,n){e.roughness.value=t.roughness,e.metalness.value=t.metalness,t.roughnessMap&&(e.roughnessMap.value=t.roughnessMap),t.metalnessMap&&(e.metalnessMap.value=t.metalnessMap),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),(t.envMap||n)&&(e.envMapIntensity.value=t.envMapIntensity)}e=e||{};var w=void 0!==e.canvas?e.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),E=void 0!==e.context?e.context:null,x=void 0!==e.alpha&&e.alpha,_=void 0===e.depth||e.depth,T=void 0===e.stencil||e.stencil,A=void 0!==e.antialias&&e.antialias,S=void 0===e.premultipliedAlpha||e.premultipliedAlpha,M=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,O=void 0!==e.powerPreference?e.powerPreference:"default",R=void 0!==e.failIfMajorPerformanceCaveat&&e.failIfMajorPerformanceCaveat,C=null,I=null;this.domElement=w,this.debug={checkShaderErrors:!0},this.sortObjects=this.autoClearStencil=this.autoClearDepth=this.autoClearColor=this.autoClear=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=3e3,this.physicallyCorrectLights=!1,this.toneMappingWhitePoint=this.toneMappingExposure=this.toneMapping=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var L,D,P,N,B,k,F,U,H,j,G,V,z,W,q,Y,X,Q=this,K=!1,J=null,ne=0,re=0,fe=null,me=null,ve=-1,ge=t=null,ye=!1,be=null,we=null,Ee=new o,xe=new o,_e=null,Te=w.width,Ae=w.height,Se=1,Me=null,Oe=null,Re=new o(0,0,Te,Ae),Ce=new o(0,0,Te,Ae),Ie=!1,Le=new $,De=new se,Pe=!1,Ne=!1,Be=new l,ke=new u;try{x={alpha:x,depth:_,stencil:T,antialias:A,premultipliedAlpha:S,preserveDrawingBuffer:M,powerPreference:O,failIfMajorPerformanceCaveat:R,xrCompatible:!0},w.addEventListener("webglcontextlost",i,!1),w.addEventListener("webglcontextrestored",a,!1);var Fe=E||w.getContext("webgl",x)||w.getContext("experimental-webgl",x);if(null===Fe){if(null!==w.getContext("webgl"))throw Error("Error creating WebGL context with your selected attributes.");throw Error("Error creating WebGL context.")}void 0===Fe.getShaderPrecisionFormat&&(Fe.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(We){throw console.error("THREE.WebGLRenderer: "+We.message),We}r();var Ue=new Gt(Q,Fe);this.xr=Ue;var He=new Ut(Q,Fe),je=new Pt(Q,H,D.maxTextureSize);this.shadowMap=je,this.getContext=function(){return Fe},this.getContextAttributes=function(){return Fe.getContextAttributes()},this.forceContextLoss=function(){var e=L.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){var e=L.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return Se},this.setPixelRatio=function(e){void 0!==e&&(Se=e,this.setSize(Te,Ae,!1))},this.getSize=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),e=new n),e.set(Te,Ae)},this.setSize=function(e,t,n){Ue.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(Te=e,Ae=t,w.width=Math.floor(e*Se),w.height=Math.floor(t*Se),!1!==n&&(w.style.width=e+"px",w.style.height=t+"px"),this.setViewport(0,0,e,t))},this.getDrawingBufferSize=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),e=new n),e.set(Te*Se,Ae*Se).floor()},this.setDrawingBufferSize=function(e,t,n){Te=e,Ae=t,Se=n,w.width=Math.floor(e*n),w.height=Math.floor(t*n),this.setViewport(0,0,e,t)},this.getCurrentViewport=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),e=new o),e.copy(Ee)},this.getViewport=function(e){return e.copy(Re)},this.setViewport=function(e,t,n,r){e.isVector4?Re.set(e.x,e.y,e.z,e.w):Re.set(e,t,n,r),P.viewport(Ee.copy(Re).multiplyScalar(Se).floor())},this.getScissor=function(e){return e.copy(Ce)},this.setScissor=function(e,t,n,r){e.isVector4?Ce.set(e.x,e.y,e.z,e.w):Ce.set(e,t,n,r),P.scissor(xe.copy(Ce).multiplyScalar(Se).floor())},this.getScissorTest=function(){return Ie},this.setScissorTest=function(e){P.setScissorTest(Ie=e)},this.setOpaqueSort=function(e){Me=e},this.setTransparentSort=function(e){Oe=e},this.getClearColor=function(){return z.getClearColor()},this.setClearColor=function(){z.setClearColor.apply(z,arguments)},this.getClearAlpha=function(){return z.getClearAlpha()},this.setClearAlpha=function(){z.setClearAlpha.apply(z,arguments)},this.clear=function(e,t,n){var r=0;(void 0===e||e)&&(r|=16384),(void 0===t||t)&&(r|=256),(void 0===n||n)&&(r|=1024),Fe.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){w.removeEventListener("webglcontextlost",i,!1),w.removeEventListener("webglcontextrestored",a,!1),G.dispose(),V.dispose(),B.dispose(),H.dispose(),Ue.dispose(),ze.stop()},this.renderBufferImmediate=function(e,t){P.initAttributes();var n=B.get(e);e.hasPositions&&!n.position&&(n.position=Fe.createBuffer()),e.hasNormals&&!n.normal&&(n.normal=Fe.createBuffer()),e.hasUvs&&!n.uv&&(n.uv=Fe.createBuffer()),e.hasColors&&!n.color&&(n.color=Fe.createBuffer()),t=t.getAttributes(),e.hasPositions&&(Fe.bindBuffer(34962,n.position),Fe.bufferData(34962,e.positionArray,35048),P.enableAttribute(t.position),Fe.vertexAttribPointer(t.position,3,5126,!1,0,0)),e.hasNormals&&(Fe.bindBuffer(34962,n.normal),Fe.bufferData(34962,e.normalArray,35048),P.enableAttribute(t.normal),Fe.vertexAttribPointer(t.normal,3,5126,!1,0,0)),e.hasUvs&&(Fe.bindBuffer(34962,n.uv),Fe.bufferData(34962,e.uvArray,35048),P.enableAttribute(t.uv),Fe.vertexAttribPointer(t.uv,2,5126,!1,0,0)),e.hasColors&&(Fe.bindBuffer(34962,n.color),Fe.bufferData(34962,e.colorArray,35048),P.enableAttribute(t.color),Fe.vertexAttribPointer(t.color,3,5126,!1,0,0)),P.disableUnusedAttributes(),Fe.drawArrays(4,0,e.count),e.count=0};var Ge=new p;this.renderBufferDirect=function(e,n,r,i,o,a){null===n&&(n=Ge);var s=o.isMesh&&0>o.matrixWorld.determinant(),c=g(e,n,i,o);P.setMaterial(i,s);var u=!1;if(t===r.id&&ge===c.id&&ye===(!0===i.wireframe)||(t=r.id,ge=c.id,ye=!0===i.wireframe,u=!0),(i.morphTargets||i.morphNormals)&&(W.update(o,r,i,c),u=!0),e=r.index,n=r.attributes.position,null===e){if(void 0===n||0===n.count)return}else if(0===e.count)return;var l=1;if(!0===i.wireframe&&(e=U.getWireframeAttribute(r),l=2),s=q,null!==e){var h=F.get(e);s=Y,s.setIndex(h)}if(u){if(!1!==D.isWebGL2||!o.isInstancedMesh&&!r.isInstancedBufferGeometry||null!==L.get("ANGLE_instanced_arrays")){P.initAttributes(),u=r.attributes,c=c.getAttributes();var f=i.defaultAttributeValues;for(_ in c){var d=c[_];if(0<=d){var p=u[_];if(void 0!==p){var m=p.normalized,v=p.itemSize,y=F.get(p);if(void 0!==y){var b=y.buffer,w=y.type;if(y=y.bytesPerElement,p.isInterleavedBufferAttribute){var E=p.data,x=E.stride;p=p.offset,E&&E.isInstancedInterleavedBuffer?(P.enableAttributeAndDivisor(d,E.meshPerAttribute),void 0===r.maxInstancedCount&&(r.maxInstancedCount=E.meshPerAttribute*E.count)):P.enableAttribute(d),Fe.bindBuffer(34962,b),Fe.vertexAttribPointer(d,v,w,m,x*y,p*y)}else p.isInstancedBufferAttribute?(P.enableAttributeAndDivisor(d,p.meshPerAttribute),void 0===r.maxInstancedCount&&(r.maxInstancedCount=p.meshPerAttribute*p.count)):P.enableAttribute(d),Fe.bindBuffer(34962,b),Fe.vertexAttribPointer(d,v,w,m,0,0)}}else if("instanceMatrix"===_)y=F.get(o.instanceMatrix),void 0!==y&&(b=y.buffer,w=y.type,P.enableAttributeAndDivisor(d+0,1),P.enableAttributeAndDivisor(d+1,1),P.enableAttributeAndDivisor(d+2,1),P.enableAttributeAndDivisor(d+3,1),Fe.bindBuffer(34962,b),Fe.vertexAttribPointer(d+0,4,w,!1,64,0),Fe.vertexAttribPointer(d+1,4,w,!1,64,16),Fe.vertexAttribPointer(d+2,4,w,!1,64,32),Fe.vertexAttribPointer(d+3,4,w,!1,64,48));else if(void 0!==f&&(m=f[_],void 0!==m))switch(m.length){case 2:Fe.vertexAttrib2fv(d,m);break;case 3:Fe.vertexAttrib3fv(d,m);break;case 4:Fe.vertexAttrib4fv(d,m);break;default:Fe.vertexAttrib1fv(d,m)}}}P.disableUnusedAttributes()}null!==e&&Fe.bindBuffer(34963,h.buffer)}var _=r.drawRange.start*l;u=null!==a?a.start*l:0,h=Math.max(_,u),a=Math.max(0,Math.min(null!==e?e.count:n.count,_+r.drawRange.count*l,u+(null!==a?a.count*l:1/0))-1-h+1),0!==a&&(o.isMesh?!0===i.wireframe?(P.setLineWidth(i.wireframeLinewidth*(null===fe?Se:1)),s.setMode(1)):s.setMode(4):o.isLine?(i=i.linewidth,void 0===i&&(i=1),P.setLineWidth(i*(null===fe?Se:1)),o.isLineSegments?s.setMode(1):o.isLineLoop?s.setMode(2):s.setMode(3)):o.isPoints?s.setMode(0):o.isSprite&&s.setMode(4),o.isInstancedMesh?s.renderInstances(r,h,a,o.count):r.isInstancedBufferGeometry?s.renderInstances(r,h,a,r.maxInstancedCount):s.render(h,a))},this.compile=function(e,t){I=V.get(e,t),I.init(),e.traverse((function(e){e.isLight&&(I.pushLight(e),e.castShadow&&I.pushShadow(e))})),I.setupLights(t);var n={};e.traverse((function(t){if(t.material)if(Array.isArray(t.material))for(var r=0;r<t.material.length;r++)!1===t.material[r].uuid in n&&(v(t.material[r],e,t),n[t.material[r].uuid]=!0);else!1===t.material.uuid in n&&(v(t.material,e,t),n[t.material.uuid]=!0)}))};var Ve=null,ze=new ee;ze.setAnimationLoop((function(e){Ue.isPresenting||Ve&&Ve(e)})),"undefined"!==typeof window&&ze.setContext(window),this.setAnimationLoop=function(e){Ve=e,Ue.setAnimationLoop(e),ze.start()},this.render=function(e,n,r,i){if(void 0!==r){console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead.");var o=r}if(void 0!==i){console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead.");var a=i}n&&n.isCamera?K||(ge=t=null,ye=!1,ve=-1,be=null,!0===e.autoUpdate&&e.updateMatrixWorld(),null===n.parent&&n.updateMatrixWorld(),Ue.enabled&&Ue.isPresenting&&(n=Ue.getCamera(n)),I=V.get(e,n),I.init(),e.onBeforeRender(Q,e,n,o||fe),Be.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),Le.setFromProjectionMatrix(Be),Ne=this.localClippingEnabled,Pe=De.init(this.clippingPlanes,Ne,n),C=G.get(e,n),C.init(),f(e,n,0,Q.sortObjects),!0===Q.sortObjects&&C.sort(Me,Oe),Pe&&De.beginShadows(),je.render(I.state.shadowsArray,e,n),I.setupLights(n),Pe&&De.endShadows(),this.info.autoReset&&this.info.reset(),void 0!==o&&this.setRenderTarget(o),Ue.enabled&&He.isAvailable()&&He.attachCamera(n),z.render(C,e,n,a),r=C.opaque,i=C.transparent,e.overrideMaterial?(o=e.overrideMaterial,r.length&&d(r,e,n,o),i.length&&d(i,e,n,o)):(r.length&&d(r,e,n),i.length&&d(i,e,n)),e.onAfterRender(Q,e,n),null!==fe&&(k.updateRenderTargetMipmap(fe),k.updateMultisampleRenderTarget(fe)),P.buffers.depth.setTest(!0),P.buffers.depth.setMask(!0),P.buffers.color.setMask(!0),P.setPolygonOffset(!1),Ue.enabled&&He.isAvailable()&&He.detachCamera(n),I=C=null):console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.setFramebuffer=function(e){J!==e&&null===fe&&Fe.bindFramebuffer(36160,e),J=e},this.getActiveCubeFace=function(){return ne},this.getActiveMipmapLevel=function(){return re},this.getRenderTarget=function(){return fe},this.setRenderTarget=function(e,t,n){fe=e,ne=t,re=n,e&&void 0===B.get(e).__webglFramebuffer&&k.setupRenderTarget(e);var r=J,i=!1;e?(r=B.get(e).__webglFramebuffer,e.isWebGLCubeRenderTarget?(r=r[t||0],i=!0):r=e.isWebGLMultisampleRenderTarget?B.get(e).__webglMultisampledFramebuffer:r,Ee.copy(e.viewport),xe.copy(e.scissor),_e=e.scissorTest):(Ee.copy(Re).multiplyScalar(Se).floor(),xe.copy(Ce).multiplyScalar(Se).floor(),_e=Ie),me!==r&&(Fe.bindFramebuffer(36160,r),me=r),P.viewport(Ee),P.scissor(xe),P.setScissorTest(_e),i&&(e=B.get(e.texture),Fe.framebufferTexture2D(36160,36064,34069+(t||0),e.__webglTexture,n||0))},this.readRenderTargetPixels=function(e,t,n,r,i,o,a){if(e&&e.isWebGLRenderTarget){var s=B.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==a&&(s=s[a]),s){a=!1,s!==me&&(Fe.bindFramebuffer(36160,s),a=!0);try{var c=e.texture,u=c.format,l=c.type;1023!==u&&X.convert(u)!==Fe.getParameter(35739)?console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format."):1009===l||X.convert(l)===Fe.getParameter(35738)||1015===l&&(D.isWebGL2||L.get("OES_texture_float")||L.get("WEBGL_color_buffer_float"))||1016===l&&(D.isWebGL2?L.get("EXT_color_buffer_float"):L.get("EXT_color_buffer_half_float"))?36053===Fe.checkFramebufferStatus(36160)?0<=t&&t<=e.width-r&&0<=n&&n<=e.height-i&&Fe.readPixels(t,n,r,i,X.convert(u),X.convert(l),o):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete."):console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.")}finally{a&&Fe.bindFramebuffer(36160,me)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(e,t,n){void 0===n&&(n=0);var r=Math.pow(2,-n),i=Math.floor(t.image.width*r);r=Math.floor(t.image.height*r);var o=X.convert(t.format);k.setTexture2D(t,0),Fe.copyTexImage2D(3553,n,o,e.x,e.y,i,r,0),P.unbindTexture()},this.copyTextureToTexture=function(e,t,n,r){var i=t.image.width,o=t.image.height,a=X.convert(n.format),s=X.convert(n.type);k.setTexture2D(n,0),t.isDataTexture?Fe.texSubImage2D(3553,r||0,e.x,e.y,i,o,a,s,t.image.data):Fe.texSubImage2D(3553,r||0,e.x,e.y,a,s,t.image),P.unbindTexture()},this.initTexture=function(e){k.setTexture2D(e,0),P.unbindTexture()},"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function zt(e,t){this.name="",this.color=new E(e),this.density=void 0!==t?t:25e-5}function Wt(e,t,n){this.name="",this.color=new E(e),this.near=void 0!==t?t:1,this.far=void 0!==n?n:1e3}function qt(e,t){this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0}function Yt(e,t,n,r){this.data=e,this.itemSize=t,this.offset=n,this.normalized=!0===r}function Xt(e){S.call(this),this.type="SpriteMaterial",this.color=new E(16777215),this.alphaMap=this.map=null,this.rotation=0,this.transparent=this.sizeAttenuation=!0,this.setValues(e)}function Qt(e){if(d.call(this),this.type="Sprite",void 0===tc){tc=new H;var t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]);t=new qt(t,5),tc.setIndex([0,1,2,0,2,3]),tc.setAttribute("position",new Yt(t,3,0,!1)),tc.setAttribute("uv",new Yt(t,2,3,!1))}this.geometry=tc,this.material=void 0!==e?e:new Xt,this.center=new n(.5,.5)}function Kt(e,t,n,r,i,o){oc.subVectors(e,n).addScalar(.5).multiply(r),void 0!==i?(ac.x=o*oc.x-i*oc.y,ac.y=i*oc.x+o*oc.y):ac.copy(oc),e.copy(t),e.x+=ac.x,e.y+=ac.y,e.applyMatrix4(sc)}function Jt(){d.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}function Zt(e,t){e&&e.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),j.call(this,e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new l,this.bindMatrixInverse=new l}function $t(e,t){if(e=e||[],this.bones=e.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),this.frame=-1,void 0===t)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else for(console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[],e=0,t=this.bones.length;e<t;e++)this.boneInverses.push(new l)}function en(){d.call(this),this.type="Bone"}function tn(e,t,n){j.call(this,e,t),this.instanceMatrix=new O(new Float32Array(16*n),16),this.count=n,this.frustumCulled=!1}function nn(e){S.call(this),this.type="LineBasicMaterial",this.color=new E(16777215),this.linewidth=1,this.linejoin=this.linecap="round",this.setValues(e)}function rn(e,t,n){1===n&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."),d.call(this),this.type="Line",this.geometry=void 0!==e?e:new H,this.material=void 0!==t?t:new nn}function on(e,t){rn.call(this,e,t),this.type="LineSegments"}function an(e,t){rn.call(this,e,t),this.type="LineLoop"}function sn(e){S.call(this),this.type="PointsMaterial",this.color=new E(16777215),this.alphaMap=this.map=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.setValues(e)}function cn(e,t){d.call(this),this.type="Points",this.geometry=void 0!==e?e:new H,this.material=void 0!==t?t:new sn,this.updateMorphTargets()}function un(e,t,n,r,i,o,a){var s=Cc.distanceSqToPoint(e);s<n&&(n=new u,Cc.closestPointToPoint(e,n),n.applyMatrix4(r),e=i.ray.origin.distanceTo(n),e<i.near||e>i.far||o.push({distance:e,distanceToRay:Math.sqrt(s),point:n,index:t,face:null,object:a}))}function ln(e,t,n,r,o,a,s,c,u){i.call(this,e,t,n,r,o,a,s,c,u),this.format=void 0!==s?s:1022,this.minFilter=void 0!==a?a:1006,this.magFilter=void 0!==o?o:1006,this.generateMipmaps=!1}function hn(e,t,n,r,o,a,s,c,u,l,h,f){i.call(this,null,a,s,c,u,l,r,o,h,f),this.image={width:t,height:n},this.mipmaps=e,this.generateMipmaps=this.flipY=!1}function fn(e,t,n,r,o,a,s,c,u){i.call(this,e,t,n,r,o,a,s,c,u),this.needsUpdate=!0}function dn(e,t,n,r,o,a,s,c,u,l){if(l=void 0!==l?l:1026,1026!==l&&1027!==l)throw Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&1026===l&&(n=1012),void 0===n&&1027===l&&(n=1020),i.call(this,null,r,o,a,s,c,l,n,u),this.image={width:e,height:t},this.magFilter=void 0!==s?s:1003,this.minFilter=void 0!==c?c:1003,this.generateMipmaps=this.flipY=!1}function pn(e){H.call(this),this.type="WireframeGeometry";var t,n,r,i=[],o=[0,0],a={},s=["a","b","c"];if(e&&e.isGeometry){var c=e.faces,l=0;for(n=c.length;l<n;l++){var h=c[l];for(t=0;3>t;t++){var f=h[s[t]],d=h[s[(t+1)%3]];o[0]=Math.min(f,d),o[1]=Math.max(f,d),f=o[0]+","+o[1],void 0===a[f]&&(a[f]={index1:o[0],index2:o[1]})}}for(f in a)l=a[f],s=e.vertices[l.index1],i.push(s.x,s.y,s.z),s=e.vertices[l.index2],i.push(s.x,s.y,s.z)}else if(e&&e.isBufferGeometry)if(s=new u,null!==e.index){c=e.attributes.position,h=e.index;var p=e.groups;for(0===p.length&&(p=[{start:0,count:h.count,materialIndex:0}]),e=0,r=p.length;e<r;++e)for(l=p[e],t=l.start,n=l.count,l=t,n=t+n;l<n;l+=3)for(t=0;3>t;t++)f=h.getX(l+t),d=h.getX(l+(t+1)%3),o[0]=Math.min(f,d),o[1]=Math.max(f,d),f=o[0]+","+o[1],void 0===a[f]&&(a[f]={index1:o[0],index2:o[1]});for(f in a)l=a[f],s.fromBufferAttribute(c,l.index1),i.push(s.x,s.y,s.z),s.fromBufferAttribute(c,l.index2),i.push(s.x,s.y,s.z)}else for(c=e.attributes.position,l=0,n=c.count/3;l<n;l++)for(t=0;3>t;t++)a=3*l+t,s.fromBufferAttribute(c,a),i.push(s.x,s.y,s.z),a=3*l+(t+1)%3,s.fromBufferAttribute(c,a),i.push(s.x,s.y,s.z);this.setAttribute("position",new B(i,3))}function mn(e,t,n){z.call(this),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:n},this.fromBufferGeometry(new vn(e,t,n)),this.mergeVertices()}function vn(e,t,n){H.call(this),this.type="ParametricBufferGeometry",this.parameters={func:e,slices:t,stacks:n};var r,i,o=[],a=[],s=[],c=[],l=new u,h=new u,f=new u,d=new u,p=new u;3>e.length&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");var m=t+1;for(r=0;r<=n;r++){var v=r/n;for(i=0;i<=t;i++){var g=i/t;e(g,v,h),a.push(h.x,h.y,h.z),0<=g-1e-5?(e(g-1e-5,v,f),d.subVectors(h,f)):(e(g+1e-5,v,f),d.subVectors(f,h)),0<=v-1e-5?(e(g,v-1e-5,f),p.subVectors(h,f)):(e(g,v+1e-5,f),p.subVectors(f,h)),l.crossVectors(d,p).normalize(),s.push(l.x,l.y,l.z),c.push(g,v)}}for(r=0;r<n;r++)for(i=0;i<t;i++)e=r*m+i+1,l=(r+1)*m+i+1,h=(r+1)*m+i,o.push(r*m+i,e,h),o.push(e,l,h);this.setIndex(o),this.setAttribute("position",new B(a,3)),this.setAttribute("normal",new B(s,3)),this.setAttribute("uv",new B(c,2))}function gn(e,t,n,r){z.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r},this.fromBufferGeometry(new yn(e,t,n,r)),this.mergeVertices()}function yn(e,t,r,i){function o(e){c.push(e.x,e.y,e.z)}function a(t,n){t*=3,n.x=e[t+0],n.y=e[t+1],n.z=e[t+2]}function s(e,t,n,r){0>r&&1===e.x&&(l[t]=e.x-1),0===n.x&&0===n.z&&(l[t]=r/2/Math.PI+.5)}H.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:e,indices:t,radius:r,detail:i},r=r||1,i=i||0;var c=[],l=[];(function(e){for(var n=new u,r=new u,i=new u,s=0;s<t.length;s+=3){a(t[s+0],n),a(t[s+1],r),a(t[s+2],i);var c,l,h=n,f=r,d=i,p=Math.pow(2,e),m=[];for(l=0;l<=p;l++){m[l]=[];var v=h.clone().lerp(d,l/p),g=f.clone().lerp(d,l/p),y=p-l;for(c=0;c<=y;c++)m[l][c]=0===c&&l===p?v:v.clone().lerp(g,c/y)}for(l=0;l<p;l++)for(c=0;c<2*(p-l)-1;c++)h=Math.floor(c/2),0===c%2?(o(m[l][h+1]),o(m[l+1][h]),o(m[l][h])):(o(m[l][h+1]),o(m[l+1][h+1]),o(m[l+1][h]))}})(i),function(e){for(var t=new u,n=0;n<c.length;n+=3)t.x=c[n+0],t.y=c[n+1],t.z=c[n+2],t.normalize().multiplyScalar(e),c[n+0]=t.x,c[n+1]=t.y,c[n+2]=t.z}(r),function(){for(var e=new u,t=0;t<c.length;t+=3)e.x=c[t+0],e.y=c[t+1],e.z=c[t+2],l.push(Math.atan2(e.z,-e.x)/2/Math.PI+.5,1-(Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))/Math.PI+.5));e=new u,t=new u;for(var r=new u,i=new u,o=new n,a=new n,h=new n,f=0,d=0;f<c.length;f+=9,d+=6){e.set(c[f+0],c[f+1],c[f+2]),t.set(c[f+3],c[f+4],c[f+5]),r.set(c[f+6],c[f+7],c[f+8]),o.set(l[d+0],l[d+1]),a.set(l[d+2],l[d+3]),h.set(l[d+4],l[d+5]),i.copy(e).add(t).add(r).divideScalar(3);var p=Math.atan2(i.z,-i.x);s(o,d+0,e,p),s(a,d+2,t,p),s(h,d+4,r,p)}for(e=0;e<l.length;e+=6)t=l[e+0],r=l[e+2],i=l[e+4],o=Math.min(t,r,i),.9<Math.max(t,r,i)&&.1>o&&(.2>t&&(l[e+0]+=1),.2>r&&(l[e+2]+=1),.2>i&&(l[e+4]+=1))}(),this.setAttribute("position",new B(c,3)),this.setAttribute("normal",new B(c.slice(),3)),this.setAttribute("uv",new B(l,2)),0===i?this.computeVertexNormals():this.normalizeNormals()}function bn(e,t){z.call(this),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new wn(e,t)),this.mergeVertices()}function wn(e,t){yn.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronBufferGeometry",this.parameters={radius:e,detail:t}}function En(e,t){z.call(this),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new xn(e,t)),this.mergeVertices()}function xn(e,t){yn.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronBufferGeometry",this.parameters={radius:e,detail:t}}function _n(e,t){z.call(this),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Tn(e,t)),this.mergeVertices()}function Tn(e,t){var n=(1+Math.sqrt(5))/2;yn.call(this,[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronBufferGeometry",this.parameters={radius:e,detail:t}}function An(e,t){z.call(this),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Sn(e,t)),this.mergeVertices()}function Sn(e,t){var n=(1+Math.sqrt(5))/2,r=1/n;yn.call(this,[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Mn(e,t,n,r,i,o){z.call(this),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:i},void 0!==o&&console.warn("THREE.TubeGeometry: taper has been removed."),e=new On(e,t,n,r,i),this.tangents=e.tangents,this.normals=e.normals,this.binormals=e.binormals,this.fromBufferGeometry(e),this.mergeVertices()}function On(e,t,r,i,o){function a(n){p=e.getPointAt(n/t,p);var o=s.normals[n];for(n=s.binormals[n],l=0;l<=i;l++){var a=l/i*Math.PI*2,c=Math.sin(a);a=-Math.cos(a),f.x=a*o.x+c*n.x,f.y=a*o.y+c*n.y,f.z=a*o.z+c*n.z,f.normalize(),v.push(f.x,f.y,f.z),h.x=p.x+r*f.x,h.y=p.y+r*f.y,h.z=p.z+r*f.z,m.push(h.x,h.y,h.z)}}H.call(this),this.type="TubeBufferGeometry",this.parameters={path:e,tubularSegments:t,radius:r,radialSegments:i,closed:o},t=t||64,r=r||1,i=i||8,o=o||!1;var s=e.computeFrenetFrames(t,o);this.tangents=s.tangents,this.normals=s.normals,this.binormals=s.binormals;var c,l,h=new u,f=new u,d=new n,p=new u,m=[],v=[],g=[],y=[];for(c=0;c<t;c++)a(c);for(a(!1===o?t:0),c=0;c<=t;c++)for(l=0;l<=i;l++)d.x=c/t,d.y=l/i,g.push(d.x,d.y);(function(){for(l=1;l<=t;l++)for(c=1;c<=i;c++){var e=(i+1)*l+(c-1),n=(i+1)*l+c,r=(i+1)*(l-1)+c;y.push((i+1)*(l-1)+(c-1),e,r),y.push(e,n,r)}})(),this.setIndex(y),this.setAttribute("position",new B(m,3)),this.setAttribute("normal",new B(v,3)),this.setAttribute("uv",new B(g,2))}function Rn(e,t,n,r,i,o,a){z.call(this),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:i,q:o},void 0!==a&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new Cn(e,t,n,r,i,o)),this.mergeVertices()}function Cn(e,t,n,r,i,o){function a(e,t,n,r,i){var o=Math.sin(e);t=n/t*e,n=Math.cos(t),i.x=r*(2+n)*.5*Math.cos(e),i.y=r*(2+n)*o*.5,i.z=r*Math.sin(t)*.5}H.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:i,q:o},e=e||1,t=t||.4,n=Math.floor(n)||64,r=Math.floor(r)||8,i=i||2,o=o||3;var s,c=[],l=[],h=[],f=[],d=new u,p=new u,m=new u,v=new u,g=new u,y=new u,b=new u;for(s=0;s<=n;++s){var w=s/n*i*Math.PI*2;for(a(w,i,o,e,m),a(w+.01,i,o,e,v),y.subVectors(v,m),b.addVectors(v,m),g.crossVectors(y,b),b.crossVectors(g,y),g.normalize(),b.normalize(),w=0;w<=r;++w){var E=w/r*Math.PI*2,x=-t*Math.cos(E);E=t*Math.sin(E),d.x=m.x+(x*b.x+E*g.x),d.y=m.y+(x*b.y+E*g.y),d.z=m.z+(x*b.z+E*g.z),l.push(d.x,d.y,d.z),p.subVectors(d,m).normalize(),h.push(p.x,p.y,p.z),f.push(s/n),f.push(w/r)}}for(w=1;w<=n;w++)for(s=1;s<=r;s++)e=(r+1)*w+(s-1),t=(r+1)*w+s,i=(r+1)*(w-1)+s,c.push((r+1)*(w-1)+(s-1),e,i),c.push(e,t,i);this.setIndex(c),this.setAttribute("position",new B(l,3)),this.setAttribute("normal",new B(h,3)),this.setAttribute("uv",new B(f,2))}function In(e,t,n,r,i){z.call(this),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i},this.fromBufferGeometry(new Ln(e,t,n,r,i)),this.mergeVertices()}function Ln(e,t,n,r,i){H.call(this),this.type="TorusBufferGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i},e=e||1,t=t||.4,n=Math.floor(n)||8,r=Math.floor(r)||6,i=i||2*Math.PI;var o,a,s=[],c=[],l=[],h=[],f=new u,d=new u,p=new u;for(o=0;o<=n;o++)for(a=0;a<=r;a++){var m=a/r*i,v=o/n*Math.PI*2;d.x=(e+t*Math.cos(v))*Math.cos(m),d.y=(e+t*Math.cos(v))*Math.sin(m),d.z=t*Math.sin(v),c.push(d.x,d.y,d.z),f.x=e*Math.cos(m),f.y=e*Math.sin(m),p.subVectors(d,f).normalize(),l.push(p.x,p.y,p.z),h.push(a/r),h.push(o/n)}for(o=1;o<=n;o++)for(a=1;a<=r;a++)e=(r+1)*(o-1)+a-1,t=(r+1)*(o-1)+a,i=(r+1)*o+a,s.push((r+1)*o+a-1,e,i),s.push(e,t,i);this.setIndex(s),this.setAttribute("position",new B(c,3)),this.setAttribute("normal",new B(l,3)),this.setAttribute("uv",new B(h,2))}function Dn(e,t,n,r,i){for(var o,a=0,s=t,c=n-r;s<n;s+=r)a+=(e[c]-e[s])*(e[s+1]+e[c+1]),c=s;if(i===0<a)for(i=t;i<n;i+=r)o=Yn(i,e[i],e[i+1],o);else for(i=n-r;i>=t;i-=r)o=Yn(i,e[i],e[i+1],o);return o&&Vn(o,o.next)&&(Xn(o),o=o.next),o}function Pn(e,t){if(!e)return e;t||(t=e);do{var n=!1;if(e.steiner||!Vn(e,e.next)&&0!==Gn(e.prev,e,e.next))e=e.next;else{if(Xn(e),e=t=e.prev,e===e.next)break;n=!0}}while(n||e!==t);return t}function Nn(e,t,n,r,i,o,a){if(e){if(!a&&o){var s=e,c=s;do{null===c.z&&(c.z=Un(c.x,c.y,r,i,o)),c.prevZ=c.prev,c=c.nextZ=c.next}while(c!==s);c.prevZ.nextZ=null,c.prevZ=null,s=c;var u,l,h,f,d=1;do{c=s;var p=s=null;for(l=0;c;){l++;var m=c;for(u=h=0;u<d&&(h++,m=m.nextZ,m);u++);for(f=d;0<h||0<f&&m;)0!==h&&(0===f||!m||c.z<=m.z)?(u=c,c=c.nextZ,h--):(u=m,m=m.nextZ,f--),p?p.nextZ=u:s=u,u.prevZ=p,p=u;c=m}p.nextZ=null,d*=2}while(1<l)}for(s=e;e.prev!==e.next;){if(c=e.prev,m=e.next,o)p=Bn(e,r,i,o);else e:if(p=e,l=p.prev,h=p,d=p.next,0<=Gn(l,h,d))p=!1;else{for(u=p.next.next;u!==p.prev;){if(jn(l.x,l.y,h.x,h.y,d.x,d.y,u.x,u.y)&&0<=Gn(u.prev,u,u.next)){p=!1;break e}u=u.next}p=!0}if(p)t.push(c.i/n),t.push(e.i/n),t.push(m.i/n),Xn(e),s=e=m.next;else if(e=m,e===s){if(a){if(1===a){a=t,s=n,c=e;do{m=c.prev,p=c.next.next,!Vn(m,p)&&zn(m,c,c.next,p)&&Wn(m,p)&&Wn(p,m)&&(a.push(m.i/s),a.push(c.i/s),a.push(p.i/s),Xn(c),Xn(c.next),c=e=p),c=c.next}while(c!==e);e=c,Nn(e,t,n,r,i,o,2)}else if(2===a)e:{a=e;do{for(s=a.next.next;s!==a.prev;){if(c=a.i!==s.i){if(c=a,m=s,p=c.next.i!==m.i&&c.prev.i!==m.i){t:{p=c;do{if(p.i!==c.i&&p.next.i!==c.i&&p.i!==m.i&&p.next.i!==m.i&&zn(p,p.next,c,m)){p=!0;break t}p=p.next}while(p!==c);p=!1}p=!p}if(p=p&&Wn(c,m)&&Wn(m,c)){p=c,l=!1,h=(c.x+m.x)/2,m=(c.y+m.y)/2;do{p.y>m!==p.next.y>m&&p.next.y!==p.y&&h<(p.next.x-p.x)*(m-p.y)/(p.next.y-p.y)+p.x&&(l=!l),p=p.next}while(p!==c);p=l}c=p}if(c){e=qn(a,s),a=Pn(a,a.next),e=Pn(e,e.next),Nn(a,t,n,r,i,o),Nn(e,t,n,r,i,o);break e}s=s.next}a=a.next}while(a!==e)}}else Nn(Pn(e),t,n,r,i,o,1);break}}}}function Bn(e,t,n,r){var i=e.prev,o=e.next;if(0<=Gn(i,e,o))return!1;var a=i.x>e.x?i.x>o.x?i.x:o.x:e.x>o.x?e.x:o.x,s=i.y>e.y?i.y>o.y?i.y:o.y:e.y>o.y?e.y:o.y,c=Un(i.x<e.x?i.x<o.x?i.x:o.x:e.x<o.x?e.x:o.x,i.y<e.y?i.y<o.y?i.y:o.y:e.y<o.y?e.y:o.y,t,n,r);for(t=Un(a,s,t,n,r),n=e.prevZ,r=e.nextZ;n&&n.z>=c&&r&&r.z<=t;){if(n!==e.prev&&n!==e.next&&jn(i.x,i.y,e.x,e.y,o.x,o.y,n.x,n.y)&&0<=Gn(n.prev,n,n.next))return!1;if(n=n.prevZ,r!==e.prev&&r!==e.next&&jn(i.x,i.y,e.x,e.y,o.x,o.y,r.x,r.y)&&0<=Gn(r.prev,r,r.next))return!1;r=r.nextZ}for(;n&&n.z>=c;){if(n!==e.prev&&n!==e.next&&jn(i.x,i.y,e.x,e.y,o.x,o.y,n.x,n.y)&&0<=Gn(n.prev,n,n.next))return!1;n=n.prevZ}for(;r&&r.z<=t;){if(r!==e.prev&&r!==e.next&&jn(i.x,i.y,e.x,e.y,o.x,o.y,r.x,r.y)&&0<=Gn(r.prev,r,r.next))return!1;r=r.nextZ}return!0}function kn(e,t){return e.x-t.x}function Fn(e,t){var n=t,r=e.x,i=e.y,o=-1/0;do{if(i<=n.y&&i>=n.next.y&&n.next.y!==n.y){var a=n.x+(i-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(a<=r&&a>o){if(o=a,a===r){if(i===n.y)return n;if(i===n.next.y)return n.next}var s=n.x<n.next.x?n:n.next}}n=n.next}while(n!==t);if(!s)return null;if(r===o)return s.prev;t=s,a=s.x;var c=s.y,u=1/0;for(n=s.next;n!==t;){if(r>=n.x&&n.x>=a&&r!==n.x&&jn(i<c?r:o,i,a,c,i<c?o:r,i,n.x,n.y)){var l=Math.abs(i-n.y)/(r-n.x);(l<u||l===u&&n.x>s.x)&&Wn(n,e)&&(s=n,u=l)}n=n.next}return s}function Un(e,t,n,r,i){return e=32767*(e-n)*i,t=32767*(t-r)*i,e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),1431655765&(e|e<<1)|(1431655765&(t|t<<1))<<1}function Hn(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function jn(e,t,n,r,i,o,a,s){return 0<=(i-a)*(t-s)-(e-a)*(o-s)&&0<=(e-a)*(r-s)-(n-a)*(t-s)&&0<=(n-a)*(o-s)-(i-a)*(r-s)}function Gn(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function Vn(e,t){return e.x===t.x&&e.y===t.y}function zn(e,t,n,r){return!!(Vn(e,n)&&Vn(t,r)||Vn(e,r)&&Vn(n,t))||0<Gn(e,t,n)!==0<Gn(e,t,r)&&0<Gn(n,r,e)!==0<Gn(n,r,t)}function Wn(e,t){return 0>Gn(e.prev,e,e.next)?0<=Gn(e,t,e.next)&&0<=Gn(e,e.prev,t):0>Gn(e,t,e.prev)||0>Gn(e,e.next,t)}function qn(e,t){var n=new Qn(e.i,e.x,e.y),r=new Qn(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function Yn(e,t,n,r){return e=new Qn(e,t,n),r?(e.next=r.next,e.prev=r,r.next.prev=e,r.next=e):(e.prev=e,e.next=e),e}function Xn(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Qn(e,t,n){this.i=e,this.x=t,this.y=n,this.nextZ=this.prevZ=this.z=this.next=this.prev=null,this.steiner=!1}function Kn(e){var t=e.length;2<t&&e[t-1].equals(e[0])&&e.pop()}function Jn(e,t){for(var n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}function Zn(e,t){z.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},this.fromBufferGeometry(new $n(e,t)),this.mergeVertices()}function $n(e,t){function r(e){function r(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(n).add(e)}function s(e,t,r){var i=e.x-t.x,o=e.y-t.y,a=r.x-e.x,s=r.y-e.y,c=i*i+o*o;if(Math.abs(i*s-o*a)>Number.EPSILON){var u=Math.sqrt(c),l=Math.sqrt(a*a+s*s);if(c=t.x-o/u,t=t.y+i/u,s=((r.x-s/l-c)*s-(r.y+a/l-t)*a)/(i*s-o*a),a=c+i*s-e.x,i=t+o*s-e.y,o=a*a+i*i,2>=o)return new n(a,i);o=Math.sqrt(o/2)}else e=!1,i>Number.EPSILON?a>Number.EPSILON&&(e=!0):i<-Number.EPSILON?a<-Number.EPSILON&&(e=!0):Math.sign(o)===Math.sign(s)&&(e=!0),e?(a=-o,o=Math.sqrt(c)):(a=i,i=o,o=Math.sqrt(c/2));return new n(a/o,i/o)}function c(e,t){for(j=e.length;0<=--j;){var n=j,r=j-1;0>r&&(r=e.length-1);var a,s=v+2*x;for(a=0;a<s;a++){var c=U*a,u=U*(a+1),l=t+r+c,h=t+r+u;u=t+n+u,f(t+n+c),f(l),f(u),f(l),f(h),f(u),c=o.length/3,c=T.generateSideWallUV(i,o,c-6,c-3,c-2,c-1),d(c[0]),d(c[1]),d(c[3]),d(c[1]),d(c[2]),d(c[3])}}}function l(e,t,n){p.push(e),p.push(t),p.push(n)}function h(e,t,n){f(e),f(t),f(n),e=o.length/3,e=T.generateTopUV(i,o,e-3,e-2,e-1),d(e[0]),d(e[1]),d(e[2])}function f(e){o.push(p[3*e]),o.push(p[3*e+1]),o.push(p[3*e+2])}function d(e){a.push(e.x),a.push(e.y)}var p=[],m=void 0!==t.curveSegments?t.curveSegments:12,v=void 0!==t.steps?t.steps:1,g=void 0!==t.depth?t.depth:100,y=void 0===t.bevelEnabled||t.bevelEnabled,b=void 0!==t.bevelThickness?t.bevelThickness:6,w=void 0!==t.bevelSize?t.bevelSize:b-2,E=void 0!==t.bevelOffset?t.bevelOffset:0,x=void 0!==t.bevelSegments?t.bevelSegments:3,_=t.extrudePath,T=void 0!==t.UVGenerator?t.UVGenerator:Nc;void 0!==t.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),g=t.amount);var A,S=!1;if(_){var M=_.getSpacedPoints(v);S=!0,y=!1;var O=_.computeFrenetFrames(v,!1),R=new u,C=new u,I=new u}y||(E=w=b=x=0),m=e.extractPoints(m),e=m.shape;var L=m.holes;if(!Pc.isClockWise(e)){e=e.reverse();var D=0;for(A=L.length;D<A;D++){var P=L[D];Pc.isClockWise(P)&&(L[D]=P.reverse())}}var N=Pc.triangulateShape(e,L),B=e;for(D=0,A=L.length;D<A;D++)P=L[D],e=e.concat(P);var k,F,U=e.length,H=N.length;m=[];var j=0,G=B.length,V=G-1;for(k=j+1;j<G;j++,V++,k++)V===G&&(V=0),k===G&&(k=0),m[j]=s(B[j],B[V],B[k]);_=[];var z=m.concat();for(D=0,A=L.length;D<A;D++){P=L[D];var W=[];for(j=0,G=P.length,V=G-1,k=j+1;j<G;j++,V++,k++)V===G&&(V=0),k===G&&(k=0),W[j]=s(P[j],P[V],P[k]);_.push(W),z=z.concat(W)}for(V=0;V<x;V++){G=V/x;var q=b*Math.cos(G*Math.PI/2);for(k=w*Math.sin(G*Math.PI/2)+E,j=0,G=B.length;j<G;j++){var Y=r(B[j],m[j],k);l(Y.x,Y.y,-q)}for(D=0,A=L.length;D<A;D++)for(P=L[D],W=_[D],j=0,G=P.length;j<G;j++)Y=r(P[j],W[j],k),l(Y.x,Y.y,-q)}for(k=w+E,j=0;j<U;j++)Y=y?r(e[j],z[j],k):e[j],S?(C.copy(O.normals[0]).multiplyScalar(Y.x),R.copy(O.binormals[0]).multiplyScalar(Y.y),I.copy(M[0]).add(C).add(R),l(I.x,I.y,I.z)):l(Y.x,Y.y,0);for(G=1;G<=v;G++)for(j=0;j<U;j++)Y=y?r(e[j],z[j],k):e[j],S?(C.copy(O.normals[G]).multiplyScalar(Y.x),R.copy(O.binormals[G]).multiplyScalar(Y.y),I.copy(M[G]).add(C).add(R),l(I.x,I.y,I.z)):l(Y.x,Y.y,g/v*G);for(V=x-1;0<=V;V--){for(G=V/x,q=b*Math.cos(G*Math.PI/2),k=w*Math.sin(G*Math.PI/2)+E,j=0,G=B.length;j<G;j++)Y=r(B[j],m[j],k),l(Y.x,Y.y,g+q);for(D=0,A=L.length;D<A;D++)for(P=L[D],W=_[D],j=0,G=P.length;j<G;j++)Y=r(P[j],W[j],k),S?l(Y.x,Y.y+M[v-1].y,M[v-1].x+q):l(Y.x,Y.y,g+q)}(function(){var e=o.length/3;if(y){var t=0*U;for(j=0;j<H;j++)F=N[j],h(F[2]+t,F[1]+t,F[0]+t);for(t=U*(v+2*x),j=0;j<H;j++)F=N[j],h(F[0]+t,F[1]+t,F[2]+t)}else{for(j=0;j<H;j++)F=N[j],h(F[2],F[1],F[0]);for(j=0;j<H;j++)F=N[j],h(F[0]+U*v,F[1]+U*v,F[2]+U*v)}i.addGroup(e,o.length/3-e,0)})(),function(){var e=o.length/3,t=0;for(c(B,t),t+=B.length,D=0,A=L.length;D<A;D++)P=L[D],c(P,t),t+=P.length;i.addGroup(e,o.length/3-e,1)}()}H.call(this),this.type="ExtrudeBufferGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];for(var i=this,o=[],a=[],s=0,c=e.length;s<c;s++)r(e[s]);this.setAttribute("position",new B(o,3)),this.setAttribute("uv",new B(a,2)),this.computeVertexNormals()}function er(e,t,n){if(n.shapes=[],Array.isArray(e))for(var r=0,i=e.length;r<i;r++)n.shapes.push(e[r].uuid);else n.shapes.push(e.uuid);return void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON()),n}function tr(e,t){z.call(this),this.type="TextGeometry",this.parameters={text:e,parameters:t},this.fromBufferGeometry(new nr(e,t)),this.mergeVertices()}function nr(e,t){t=t||{};var n=t.font;if(!n||!n.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new z;e=n.generateShapes(e,t.size),t.depth=void 0!==t.height?t.height:50,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),$n.call(this,e,t),this.type="TextBufferGeometry"}function rr(e,t,n,r,i,o,a){z.call(this),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:o,thetaLength:a},this.fromBufferGeometry(new ir(e,t,n,r,i,o,a)),this.mergeVertices()}function ir(e,t,n,r,i,o,a){H.call(this),this.type="SphereBufferGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:o,thetaLength:a},e=e||1,t=Math.max(3,Math.floor(t)||8),n=Math.max(2,Math.floor(n)||6),r=void 0!==r?r:0,i=void 0!==i?i:2*Math.PI,o=void 0!==o?o:0,a=void 0!==a?a:Math.PI;var s,c,l=Math.min(o+a,Math.PI),h=0,f=[],d=new u,p=new u,m=[],v=[],g=[],y=[];for(c=0;c<=n;c++){var b=[],w=c/n,E=0;for(0==c&&0==o?E=.5/t:c==n&&l==Math.PI&&(E=-.5/t),s=0;s<=t;s++){var x=s/t;d.x=-e*Math.cos(r+x*i)*Math.sin(o+w*a),d.y=e*Math.cos(o+w*a),d.z=e*Math.sin(r+x*i)*Math.sin(o+w*a),v.push(d.x,d.y,d.z),p.copy(d).normalize(),g.push(p.x,p.y,p.z),y.push(x+E,1-w),b.push(h++)}f.push(b)}for(c=0;c<n;c++)for(s=0;s<t;s++)e=f[c][s+1],r=f[c][s],i=f[c+1][s],a=f[c+1][s+1],(0!==c||0<o)&&m.push(e,r,a),(c!==n-1||l<Math.PI)&&m.push(r,i,a);this.setIndex(m),this.setAttribute("position",new B(v,3)),this.setAttribute("normal",new B(g,3)),this.setAttribute("uv",new B(y,2))}function or(e,t,n,r,i,o){z.call(this),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:o},this.fromBufferGeometry(new ar(e,t,n,r,i,o)),this.mergeVertices()}function ar(e,t,r,i,o,a){H.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:r,phiSegments:i,thetaStart:o,thetaLength:a},e=e||.5,t=t||1,o=void 0!==o?o:0,a=void 0!==a?a:2*Math.PI,r=void 0!==r?Math.max(3,r):8,i=void 0!==i?Math.max(1,i):1;var s,c,l=[],h=[],f=[],d=[],p=e,m=(t-e)/i,v=new u,g=new n;for(s=0;s<=i;s++){for(c=0;c<=r;c++)e=o+c/r*a,v.x=p*Math.cos(e),v.y=p*Math.sin(e),h.push(v.x,v.y,v.z),f.push(0,0,1),g.x=(v.x/t+1)/2,g.y=(v.y/t+1)/2,d.push(g.x,g.y);p+=m}for(s=0;s<i;s++)for(t=s*(r+1),c=0;c<r;c++)e=c+t,o=e+r+1,a=e+r+2,p=e+1,l.push(e,o,p),l.push(o,a,p);this.setIndex(l),this.setAttribute("position",new B(h,3)),this.setAttribute("normal",new B(f,3)),this.setAttribute("uv",new B(d,2))}function sr(e,t,n,r){z.call(this),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},this.fromBufferGeometry(new cr(e,t,n,r)),this.mergeVertices()}function cr(e,t,r,i){H.call(this),this.type="LatheBufferGeometry",this.parameters={points:e,segments:t,phiStart:r,phiLength:i},t=Math.floor(t)||12,r=r||0,i=i||2*Math.PI,i=Wo.clamp(i,0,2*Math.PI);var o,a=[],s=[],c=[],l=1/t,h=new u,f=new n;for(o=0;o<=t;o++){var d=r+o*l*i,p=Math.sin(d),m=Math.cos(d);for(d=0;d<=e.length-1;d++)h.x=e[d].x*p,h.y=e[d].y,h.z=e[d].x*m,s.push(h.x,h.y,h.z),f.x=o/t,f.y=d/(e.length-1),c.push(f.x,f.y)}for(o=0;o<t;o++)for(d=0;d<e.length-1;d++)r=d+o*e.length,l=r+e.length,h=r+e.length+1,f=r+1,a.push(r,l,f),a.push(l,h,f);if(this.setIndex(a),this.setAttribute("position",new B(s,3)),this.setAttribute("uv",new B(c,2)),this.computeVertexNormals(),i===2*Math.PI)for(i=this.attributes.normal.array,a=new u,s=new u,c=new u,r=t*e.length*3,d=o=0;o<e.length;o++,d+=3)a.x=i[d+0],a.y=i[d+1],a.z=i[d+2],s.x=i[r+d+0],s.y=i[r+d+1],s.z=i[r+d+2],c.addVectors(a,s).normalize(),i[d+0]=i[r+d+0]=c.x,i[d+1]=i[r+d+1]=c.y,i[d+2]=i[r+d+2]=c.z}function ur(e,t){z.call(this),this.type="ShapeGeometry","object"===typeof t&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),t=t.curveSegments),this.parameters={shapes:e,curveSegments:t},this.fromBufferGeometry(new lr(e,t)),this.mergeVertices()}function lr(e,t){function n(e){var n,s=i.length/3;e=e.extractPoints(t);var u=e.shape,l=e.holes;for(!1===Pc.isClockWise(u)&&(u=u.reverse()),e=0,n=l.length;e<n;e++){var h=l[e];!0===Pc.isClockWise(h)&&(l[e]=h.reverse())}var f=Pc.triangulateShape(u,l);for(e=0,n=l.length;e<n;e++)h=l[e],u=u.concat(h);for(e=0,n=u.length;e<n;e++)h=u[e],i.push(h.x,h.y,0),o.push(0,0,1),a.push(h.x,h.y);for(e=0,n=f.length;e<n;e++)u=f[e],r.push(u[0]+s,u[1]+s,u[2]+s),c+=3}H.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:e,curveSegments:t},t=t||12;var r=[],i=[],o=[],a=[],s=0,c=0;if(!1===Array.isArray(e))n(e);else for(var u=0;u<e.length;u++)n(e[u]),this.addGroup(s,c,u),s+=c,c=0;this.setIndex(r),this.setAttribute("position",new B(i,3)),this.setAttribute("normal",new B(o,3)),this.setAttribute("uv",new B(a,2))}function hr(e,t){if(t.shapes=[],Array.isArray(e))for(var n=0,r=e.length;n<r;n++)t.shapes.push(e[n].uuid);else t.shapes.push(e.uuid);return t}function fr(e,t){H.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:t};var n=[];t=Math.cos(Wo.DEG2RAD*(void 0!==t?t:1));var r=[0,0],i={},o=["a","b","c"];if(e.isBufferGeometry){var a=new z;a.fromBufferGeometry(e)}else a=e.clone();a.mergeVertices(),a.computeFaceNormals(),e=a.vertices,a=a.faces;for(var s=0,c=a.length;s<c;s++)for(var u=a[s],l=0;3>l;l++){var h=u[o[l]],f=u[o[(l+1)%3]];r[0]=Math.min(h,f),r[1]=Math.max(h,f),h=r[0]+","+r[1],void 0===i[h]?i[h]={index1:r[0],index2:r[1],face1:s,face2:void 0}:i[h].face2=s}for(h in i)r=i[h],(void 0===r.face2||a[r.face1].normal.dot(a[r.face2].normal)<=t)&&(o=e[r.index1],n.push(o.x,o.y,o.z),o=e[r.index2],n.push(o.x,o.y,o.z));this.setAttribute("position",new B(n,3))}function dr(e,t,n,r,i,o,a,s){z.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:i,openEnded:o,thetaStart:a,thetaLength:s},this.fromBufferGeometry(new pr(e,t,n,r,i,o,a,s)),this.mergeVertices()}function pr(e,t,r,i,o,a,s,c){function l(r){var o,a=new n,l=new u,g=0,w=!0===r?e:t,E=!0===r?1:-1,x=v;for(o=1;o<=i;o++)d.push(0,y*E,0),p.push(0,E,0),m.push(.5,.5),v++;var _=v;for(o=0;o<=i;o++){var T=o/i*c+s,A=Math.cos(T);T=Math.sin(T),l.x=w*T,l.y=y*E,l.z=w*A,d.push(l.x,l.y,l.z),p.push(0,E,0),a.x=.5*A+.5,a.y=.5*T*E+.5,m.push(a.x,a.y),v++}for(o=0;o<i;o++)a=x+o,l=_+o,!0===r?f.push(l,l+1,a):f.push(l+1,l,a),g+=3;h.addGroup(b,g,!0===r?1:2),b+=g}H.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:i,heightSegments:o,openEnded:a,thetaStart:s,thetaLength:c};var h=this;e=void 0!==e?e:1,t=void 0!==t?t:1,r=r||1,i=Math.floor(i)||8,o=Math.floor(o)||1,a=void 0!==a&&a,s=void 0!==s?s:0,c=void 0!==c?c:2*Math.PI;var f=[],d=[],p=[],m=[],v=0,g=[],y=r/2,b=0;(function(){var n,a,l=new u,w=new u,E=0,x=(t-e)/r;for(a=0;a<=o;a++){var _=[],T=a/o,A=T*(t-e)+e;for(n=0;n<=i;n++){var S=n/i,M=S*c+s,O=Math.sin(M);M=Math.cos(M),w.x=A*O,w.y=-T*r+y,w.z=A*M,d.push(w.x,w.y,w.z),l.set(O,x,M).normalize(),p.push(l.x,l.y,l.z),m.push(S,1-T),_.push(v++)}g.push(_)}for(n=0;n<i;n++)for(a=0;a<o;a++)l=g[a+1][n],w=g[a+1][n+1],x=g[a][n+1],f.push(g[a][n],l,x),f.push(l,w,x),E+=6;h.addGroup(b,E,0),b+=E})(),!1===a&&(0<e&&l(!0),0<t&&l(!1)),this.setIndex(f),this.setAttribute("position",new B(d,3)),this.setAttribute("normal",new B(p,3)),this.setAttribute("uv",new B(m,2))}function mr(e,t,n,r,i,o,a){dr.call(this,0,e,t,n,r,i,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:o,thetaLength:a}}function vr(e,t,n,r,i,o,a){pr.call(this,0,e,t,n,r,i,o,a),this.type="ConeBufferGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:o,thetaLength:a}}function gr(e,t,n,r){z.call(this),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},this.fromBufferGeometry(new yr(e,t,n,r)),this.mergeVertices()}function yr(e,t,r,i){H.call(this),this.type="CircleBufferGeometry",this.parameters={radius:e,segments:t,thetaStart:r,thetaLength:i},e=e||1,t=void 0!==t?Math.max(3,t):8,r=void 0!==r?r:0,i=void 0!==i?i:2*Math.PI;var o,a=[],s=[],c=[],l=[],h=new u,f=new n;s.push(0,0,0),c.push(0,0,1),l.push(.5,.5);var d=0;for(o=3;d<=t;d++,o+=3){var p=r+d/t*i;h.x=e*Math.cos(p),h.y=e*Math.sin(p),s.push(h.x,h.y,h.z),c.push(0,0,1),f.x=(s[o]/e+1)/2,f.y=(s[o+1]/e+1)/2,l.push(f.x,f.y)}for(o=1;o<=t;o++)a.push(o,o+1,0);this.setIndex(a),this.setAttribute("position",new B(s,3)),this.setAttribute("normal",new B(c,3)),this.setAttribute("uv",new B(l,2))}function br(e){S.call(this),this.type="ShadowMaterial",this.color=new E(0),this.transparent=!0,this.setValues(e)}function wr(e){Y.call(this,e),this.type="RawShaderMaterial"}function Er(e){S.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new E(16777215),this.roughness=1,this.metalness=0,this.lightMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new E(0),this.emissiveIntensity=1,this.bumpMap=this.emissiveMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new n(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.envMap=this.alphaMap=this.metalnessMap=this.roughnessMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(e)}function xr(e){Er.call(this),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearcoatRoughness=this.clearcoat=0,this.sheen=null,this.clearcoatNormalScale=new n(1,1),this.clearcoatNormalMap=null,this.transparency=0,this.setValues(e)}function _r(e){S.call(this),this.type="MeshPhongMaterial",this.color=new E(16777215),this.specular=new E(1118481),this.shininess=30,this.lightMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new E(0),this.emissiveIntensity=1,this.bumpMap=this.emissiveMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new n(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.envMap=this.alphaMap=this.specularMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(e)}function Tr(e){S.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new E(16777215),this.specular=new E(1118481),this.shininess=30,this.lightMap=this.gradientMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new E(0),this.emissiveIntensity=1,this.bumpMap=this.emissiveMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new n(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=this.specularMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(e)}function Ar(e){S.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new n(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.morphNormals=this.morphTargets=this.skinning=this.fog=!1,this.setValues(e)}function Sr(e){S.call(this),this.type="MeshLambertMaterial",this.color=new E(16777215),this.lightMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new E(0),this.emissiveIntensity=1,this.envMap=this.alphaMap=this.specularMap=this.emissiveMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(e)}function Mr(e){S.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new E(16777215),this.bumpMap=this.map=this.matcap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new n(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(e)}function Or(e){nn.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}function Rr(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n}function Cr(e,t,n,r){Rr.call(this,e,t,n,r),this._offsetNext=this._weightNext=this._offsetPrev=this._weightPrev=-0}function Ir(e,t,n,r){Rr.call(this,e,t,n,r)}function Lr(e,t,n,r){Rr.call(this,e,t,n,r)}function Dr(e,t,n,r){if(void 0===e)throw Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Fc.convertArray(t,this.TimeBufferType),this.values=Fc.convertArray(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}function Pr(e,t,n){Dr.call(this,e,t,n)}function Nr(e,t,n,r){Dr.call(this,e,t,n,r)}function Br(e,t,n,r){Dr.call(this,e,t,n,r)}function kr(e,t,n,r){Rr.call(this,e,t,n,r)}function Fr(e,t,n,r){Dr.call(this,e,t,n,r)}function Ur(e,t,n,r){Dr.call(this,e,t,n,r)}function Hr(e,t,n,r){Dr.call(this,e,t,n,r)}function jr(e,t,n){this.name=e,this.tracks=n,this.duration=void 0!==t?t:-1,this.uuid=Wo.generateUUID(),0>this.duration&&this.resetDuration()}function Gr(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Br;case"vector":case"vector2":case"vector3":case"vector4":return Hr;case"color":return Nr;case"quaternion":return Fr;case"bool":case"boolean":return Pr;case"string":return Ur}throw Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}function Vr(e){if(void 0===e.type)throw Error("THREE.KeyframeTrack: track type undefined, can not parse");var t=Gr(e.type);if(void 0===e.times){var n=[],r=[];Fc.flattenJSON(e.keys,n,r,"value"),e.times=n,e.values=r}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}function zr(e,t,n){var r=this,i=!1,o=0,a=0,s=void 0,c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){a++,!1===i&&void 0!==r.onStart&&r.onStart(e,o,a),i=!0},this.itemEnd=function(e){o++,void 0!==r.onProgress&&r.onProgress(e,o,a),o===a&&(i=!1,void 0!==r.onLoad)&&r.onLoad()},this.itemError=function(e){void 0!==r.onError&&r.onError(e)},this.resolveURL=function(e){return s?s(e):e},this.setURLModifier=function(e){return s=e,this},this.addHandler=function(e,t){return c.push(e,t),this},this.removeHandler=function(e){return e=c.indexOf(e),-1!==e&&c.splice(e,2),this},this.getHandler=function(e){for(var t=0,n=c.length;t<n;t+=2){var r=c[t],i=c[t+1];if(r.global&&(r.lastIndex=0),r.test(e))return i}return null}}function Wr(e){this.manager=void 0!==e?e:Hc,this.crossOrigin="anonymous",this.resourcePath=this.path=""}function qr(e){Wr.call(this,e)}function Yr(e){Wr.call(this,e)}function Xr(e){Wr.call(this,e)}function Qr(e){Wr.call(this,e)}function Kr(e){Wr.call(this,e)}function Jr(e){Wr.call(this,e)}function Zr(e){Wr.call(this,e)}function $r(){this.type="Curve",this.arcLengthDivisions=200}function ei(e,t,n,r,i,o,a,s){$r.call(this),this.type="EllipseCurve",this.aX=e||0,this.aY=t||0,this.xRadius=n||1,this.yRadius=r||1,this.aStartAngle=i||0,this.aEndAngle=o||2*Math.PI,this.aClockwise=a||!1,this.aRotation=s||0}function ti(e,t,n,r,i,o){ei.call(this,e,t,n,n,r,i,o),this.type="ArcCurve"}function ni(){var e=0,t=0,n=0,r=0;return{initCatmullRom:function(i,o,a,s,c){i=c*(a-i),s=c*(s-o),e=o,t=i,n=-3*o+3*a-2*i-s,r=2*o-2*a+i+s},initNonuniformCatmullRom:function(i,o,a,s,c,u,l){i=((o-i)/c-(a-i)/(c+u)+(a-o)/u)*u,s=((a-o)/u-(s-o)/(u+l)+(s-a)/l)*u,e=o,t=i,n=-3*o+3*a-2*i-s,r=2*o-2*a+i+s},calc:function(i){var o=i*i;return e+t*i+n*o+r*o*i}}}function ri(e,t,n,r){$r.call(this),this.type="CatmullRomCurve3",this.points=e||[],this.closed=t||!1,this.curveType=n||"centripetal",this.tension=r||.5}function ii(e,t,n,r,i){t=.5*(r-t),i=.5*(i-n);var o=e*e;return(2*n-2*r+t+i)*e*o+(-3*n+3*r-2*t-i)*o+t*e+n}function oi(e,t,n,r){var i=1-e;return i*i*t+2*(1-e)*e*n+e*e*r}function ai(e,t,n,r,i){var o=1-e,a=1-e;return o*o*o*t+3*a*a*e*n+3*(1-e)*e*e*r+e*e*e*i}function si(e,t,r,i){$r.call(this),this.type="CubicBezierCurve",this.v0=e||new n,this.v1=t||new n,this.v2=r||new n,this.v3=i||new n}function ci(e,t,n,r){$r.call(this),this.type="CubicBezierCurve3",this.v0=e||new u,this.v1=t||new u,this.v2=n||new u,this.v3=r||new u}function ui(e,t){$r.call(this),this.type="LineCurve",this.v1=e||new n,this.v2=t||new n}function li(e,t){$r.call(this),this.type="LineCurve3",this.v1=e||new u,this.v2=t||new u}function hi(e,t,r){$r.call(this),this.type="QuadraticBezierCurve",this.v0=e||new n,this.v1=t||new n,this.v2=r||new n}function fi(e,t,n){$r.call(this),this.type="QuadraticBezierCurve3",this.v0=e||new u,this.v1=t||new u,this.v2=n||new u}function di(e){$r.call(this),this.type="SplineCurve",this.points=e||[]}function pi(){$r.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function mi(e){pi.call(this),this.type="Path",this.currentPoint=new n,e&&this.setFromPoints(e)}function vi(e){mi.call(this,e),this.uuid=Wo.generateUUID(),this.type="Shape",this.holes=[]}function gi(e,t){d.call(this),this.type="Light",this.color=new E(e),this.intensity=void 0!==t?t:1,this.receiveShadow=void 0}function yi(e,t,n){gi.call(this,e,n),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(d.DefaultUp),this.updateMatrix(),this.groundColor=new E(t)}function bi(e){this.camera=e,this.bias=0,this.radius=1,this.mapSize=new n(512,512),this.mapPass=this.map=null,this.matrix=new l,this._frustum=new $,this._frameExtents=new n(1,1),this._viewportCount=1,this._viewports=[new o(0,0,1,1)]}function wi(){bi.call(this,new Q(50,1,.5,500))}function Ei(e,t,n,r,i,o){gi.call(this,e,t),this.type="SpotLight",this.position.copy(d.DefaultUp),this.updateMatrix(),this.target=new d,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}}),this.distance=void 0!==n?n:0,this.angle=void 0!==r?r:Math.PI/3,this.penumbra=void 0!==i?i:0,this.decay=void 0!==o?o:1,this.shadow=new wi}function xi(){bi.call(this,new Q(90,1,.5,500)),this._frameExtents=new n(4,2),this._viewportCount=6,this._viewports=[new o(2,1,1,1),new o(0,1,1,1),new o(3,1,1,1),new o(1,1,1,1),new o(3,0,1,1),new o(1,0,1,1)],this._cubeDirections=[new u(1,0,0),new u(-1,0,0),new u(0,0,1),new u(0,0,-1),new u(0,1,0),new u(0,-1,0)],this._cubeUps=[new u(0,1,0),new u(0,1,0),new u(0,1,0),new u(0,1,0),new u(0,0,1),new u(0,0,-1)]}function _i(e,t,n,r){gi.call(this,e,t),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}}),this.distance=void 0!==n?n:0,this.decay=void 0!==r?r:1,this.shadow=new xi}function Ti(e,t,n,r,i,o){X.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=void 0!==e?e:-1,this.right=void 0!==t?t:1,this.top=void 0!==n?n:1,this.bottom=void 0!==r?r:-1,this.near=void 0!==i?i:.1,this.far=void 0!==o?o:2e3,this.updateProjectionMatrix()}function Ai(){bi.call(this,new Ti(-5,5,5,-5,.5,500))}function Si(e,t){gi.call(this,e,t),this.type="DirectionalLight",this.position.copy(d.DefaultUp),this.updateMatrix(),this.target=new d,this.shadow=new Ai}function Mi(e,t){gi.call(this,e,t),this.type="AmbientLight",this.castShadow=void 0}function Oi(e,t,n,r){gi.call(this,e,t),this.type="RectAreaLight",this.width=void 0!==n?n:10,this.height=void 0!==r?r:10}function Ri(e){Wr.call(this,e),this.textures={}}function Ci(){H.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function Ii(e,t,n,r){"number"===typeof n&&(r=n,n=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),O.call(this,e,t,n),this.meshPerAttribute=r||1}function Li(e){Wr.call(this,e)}function Di(e){Wr.call(this,e)}function Pi(e){"undefined"===typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"===typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),Wr.call(this,e),this.options=void 0}function Ni(){this.type="ShapePath",this.color=new E,this.subPaths=[],this.currentPath=null}function Bi(e){this.type="Font",this.data=e}function ki(e){Wr.call(this,e)}function Fi(e){Wr.call(this,e)}function Ui(){this.coefficients=[];for(var e=0;9>e;e++)this.coefficients.push(new u)}function Hi(e,t){gi.call(this,void 0,t),this.sh=void 0!==e?e:new Ui}function ji(e,t,n){Hi.call(this,void 0,n),e=(new E).set(e),n=(new E).set(t),t=new u(e.r,e.g,e.b),e=new u(n.r,n.g,n.b),n=Math.sqrt(Math.PI);var r=n*Math.sqrt(.75);this.sh.coefficients[0].copy(t).add(e).multiplyScalar(n),this.sh.coefficients[1].copy(t).sub(e).multiplyScalar(r)}function Gi(e,t){Hi.call(this,void 0,t),e=(new E).set(e),this.sh.coefficients[0].set(e.r,e.g,e.b).multiplyScalar(2*Math.sqrt(Math.PI))}function Vi(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Q,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Q,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}function zi(e){this.autoStart=void 0===e||e,this.elapsedTime=this.oldTime=this.startTime=0,this.running=!1}function Wi(){d.call(this),this.type="AudioListener",this.context=$c.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new zi}function qi(e){d.call(this),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.offset=this.loopEnd=this.loopStart=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this._pausedAt=this._startedAt=0,this.filters=[]}function Yi(e){qi.call(this,e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}function Xi(e,t){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=void 0!==t?t:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}function Qi(e,t,n){switch(this.binding=e,this.valueSize=n,e=Float64Array,t){case"quaternion":t=this._slerp;break;case"string":case"bool":e=Array,t=this._select;break;default:t=this._lerp}this.buffer=new e(4*n),this._mixBufferRegion=t,this.referenceCount=this.useCount=this.cumulativeWeight=0}function Ki(e,t,n){n=n||Ji.parseTrackName(t),this._targetGroup=e,this._bindings=e.subscribe_(t,n)}function Ji(e,t,n){this.path=t,this.parsedPath=n||Ji.parseTrackName(t),this.node=Ji.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e}function Zi(){this.uuid=Wo.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var e={};this._indicesByUUID=e;for(var t=0,n=arguments.length;t!==n;++t)e[arguments[t].uuid]=t;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var r=this;this.stats={objects:{get total(){return r._objects.length},get inUse(){return this.total-r.nCachedObjects_}},get bindingsPerObject(){return r._bindings.length}}}function $i(e,t,n){this._mixer=e,this._clip=t,this._localRoot=n||null,e=t.tracks,t=e.length,n=Array(t);for(var r={endingStart:2400,endingEnd:2400},i=0;i!==t;++i){var o=e[i].createInterpolant(null);n[i]=o,o.settings=r}this._interpolantSettings=r,this._interpolants=n,this._propertyBindings=Array(t),this._weightInterpolant=this._timeScaleInterpolant=this._byClipCacheIndex=this._cacheIndex=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this._effectiveWeight=this.weight=this._effectiveTimeScale=this.timeScale=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtEnd=this.zeroSlopeAtStart=!0}function eo(e){this._root=e,this._initMemoryManager(),this.time=this._accuIndex=0,this.timeScale=1}function to(e,t){"string"===typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=t),this.value=e}function no(e,t,n){qt.call(this,e,t),this.meshPerAttribute=n||1}function ro(e,t,n,r){this.ray=new y(e,t),this.near=n||0,this.far=r||1/0,this.camera=null,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function io(e,t){return e.distance-t.distance}function oo(e,t,n,r){if(!1!==e.visible&&(e.raycast(t,n),!0===r)){e=e.children,r=0;for(var i=e.length;r<i;r++)oo(e[r],t,n,!0)}}function ao(e,t,n){return this.radius=void 0!==e?e:1,this.phi=void 0!==t?t:0,this.theta=void 0!==n?n:0,this}function so(e,t,n){return this.radius=void 0!==e?e:1,this.theta=void 0!==t?t:0,this.y=void 0!==n?n:0,this}function co(e,t){this.min=void 0!==e?e:new n(1/0,1/0),this.max=void 0!==t?t:new n(-1/0,-1/0)}function uo(e,t){this.start=void 0!==e?e:new u,this.end=void 0!==t?t:new u}function lo(e){d.call(this),this.material=e,this.render=function(){}}function ho(e,t){d.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,e=new H,t=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(var n=0,r=1;32>n;n++,r++){var i=n/32*Math.PI*2,o=r/32*Math.PI*2;t.push(Math.cos(i),Math.sin(i),1,Math.cos(o),Math.sin(o),1)}e.setAttribute("position",new B(t,3)),t=new nn({fog:!1}),this.cone=new on(e,t),this.add(this.cone),this.update()}function fo(e){var t=[];e&&e.isBone&&t.push(e);for(var n=0;n<e.children.length;n++)t.push.apply(t,fo(e.children[n]));return t}function po(e){for(var t=fo(e),n=new H,r=[],i=[],o=new E(0,0,1),a=new E(0,1,0),s=0;s<t.length;s++){var c=t[s];c.parent&&c.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),i.push(o.r,o.g,o.b),i.push(a.r,a.g,a.b))}n.setAttribute("position",new B(r,3)),n.setAttribute("color",new B(i,3)),r=new nn({vertexColors:2,depthTest:!1,depthWrite:!1,transparent:!0}),on.call(this,n,r),this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}function mo(e,t,n){this.light=e,this.light.updateMatrixWorld(),this.color=n,e=new ir(t,4,2),t=new M({wireframe:!0,fog:!1}),j.call(this,e,t),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function vo(e,t,n){d.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,e=new xn(t),e.rotateY(.5*Math.PI),this.material=new M({wireframe:!0,fog:!1}),void 0===this.color&&(this.material.vertexColors=2),t=e.getAttribute("position"),t=new Float32Array(3*t.count),e.setAttribute("color",new O(t,3)),this.add(new j(e,this.material)),this.update()}function go(e,t,n,r){e=e||10,t=t||10,n=new E(void 0!==n?n:4473924),r=new E(void 0!==r?r:8947848);var i=t/2,o=e/t,a=e/2;e=[];for(var s=[],c=0,u=0,l=-a;c<=t;c++,l+=o){e.push(-a,0,l,a,0,l),e.push(l,0,-a,l,0,a);var h=c===i?n:r;h.toArray(s,u),u+=3,h.toArray(s,u),u+=3,h.toArray(s,u),u+=3,h.toArray(s,u),u+=3}t=new H,t.setAttribute("position",new B(e,3)),t.setAttribute("color",new B(s,3)),n=new nn({vertexColors:2}),on.call(this,t,n)}function yo(e,t,n,r,i,o){e=e||10,t=t||16,n=n||8,r=r||64,i=new E(void 0!==i?i:4473924),o=new E(void 0!==o?o:8947848);var a,s=[],c=[];for(a=0;a<=t;a++){var u=a/t*2*Math.PI,l=Math.sin(u)*e;u=Math.cos(u)*e,s.push(0,0,0),s.push(l,0,u);var h=1&a?i:o;c.push(h.r,h.g,h.b),c.push(h.r,h.g,h.b)}for(a=0;a<=n;a++){h=1&a?i:o;var f=e-e/n*a;for(t=0;t<r;t++)u=t/r*2*Math.PI,l=Math.sin(u)*f,u=Math.cos(u)*f,s.push(l,0,u),c.push(h.r,h.g,h.b),u=(t+1)/r*2*Math.PI,l=Math.sin(u)*f,u=Math.cos(u)*f,s.push(l,0,u),c.push(h.r,h.g,h.b)}e=new H,e.setAttribute("position",new B(s,3)),e.setAttribute("color",new B(c,3)),s=new nn({vertexColors:2}),on.call(this,e,s)}function bo(e,t,n){d.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,void 0===t&&(t=1),e=new H,e.setAttribute("position",new B([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3)),t=new nn({fog:!1}),this.lightPlane=new rn(e,t),this.add(this.lightPlane),e=new H,e.setAttribute("position",new B([0,0,0,0,0,1],3)),this.targetLine=new rn(e,t),this.add(this.targetLine),this.update()}function wo(e){function t(e,t,r){n(e,r),n(t,r)}function n(e,t){o.push(0,0,0),a.push(t.r,t.g,t.b),void 0===s[e]&&(s[e]=[]),s[e].push(o.length/3-1)}var r=new H,i=new nn({color:16777215,vertexColors:1}),o=[],a=[],s={},c=new E(16755200),u=new E(16711680),l=new E(43775),h=new E(16777215),f=new E(3355443);t("n1","n2",c),t("n2","n4",c),t("n4","n3",c),t("n3","n1",c),t("f1","f2",c),t("f2","f4",c),t("f4","f3",c),t("f3","f1",c),t("n1","f1",c),t("n2","f2",c),t("n3","f3",c),t("n4","f4",c),t("p","n1",u),t("p","n2",u),t("p","n3",u),t("p","n4",u),t("u1","u2",l),t("u2","u3",l),t("u3","u1",l),t("c","t",h),t("p","c",f),t("cn1","cn2",f),t("cn3","cn4",f),t("cf1","cf2",f),t("cf3","cf4",f),r.setAttribute("position",new B(o,3)),r.setAttribute("color",new B(a,3)),on.call(this,r,i),this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update()}function Eo(e,t,n,r,i,o,a){if(Iu.set(i,o,a).unproject(r),e=t[e],void 0!==e)for(n=n.getAttribute("position"),t=0,r=e.length;t<r;t++)n.setXYZ(e[t],Iu.x,Iu.y,Iu.z)}function xo(e,t){this.object=e,void 0===t&&(t=16776960),e=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]);var n=new Float32Array(24),r=new H;r.setIndex(new O(e,1)),r.setAttribute("position",new O(n,3)),on.call(this,r,new nn({color:t})),this.matrixAutoUpdate=!1,this.update()}function _o(e,t){this.type="Box3Helper",this.box=e,t=t||16776960,e=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]);var n=new H;n.setIndex(new O(e,1)),n.setAttribute("position",new B([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),on.call(this,n,new nn({color:t})),this.geometry.computeBoundingSphere()}function To(e,t,n){this.type="PlaneHelper",this.plane=e,this.size=void 0===t?1:t,e=void 0!==n?n:16776960,t=new H,t.setAttribute("position",new B([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),t.computeBoundingSphere(),rn.call(this,t,new nn({color:e})),t=new H,t.setAttribute("position",new B([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),t.computeBoundingSphere(),this.add(new j(t,new M({color:e,opacity:.2,transparent:!0,depthWrite:!1})))}function Ao(e,t,n,r,i,o){d.call(this),void 0===e&&(e=new u(0,0,1)),void 0===t&&(t=new u(0,0,0)),void 0===n&&(n=1),void 0===r&&(r=16776960),void 0===i&&(i=.2*n),void 0===o&&(o=.2*i),void 0===Pu&&(Pu=new H,Pu.setAttribute("position",new B([0,0,0,0,1,0],3)),Nu=new pr(0,.5,1,5,1),Nu.translate(0,-.5,0)),this.position.copy(t),this.line=new rn(Pu,new nn({color:r})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new j(Nu,new M({color:r})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,i,o)}function So(e){e=e||1;var t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e];e=new H,e.setAttribute("position",new B(t,3)),e.setAttribute("color",new B([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3)),t=new nn({vertexColors:2}),on.call(this,e,t)}function Mo(e){Ku=e,Co(Gu)}function Oo(e){var t={magFilter:1003,minFilter:1003,generateMipmaps:!1,type:e?e.type:1009,format:e?e.format:1023,encoding:e?e.encoding:3002,depthBuffer:!1,stencilBuffer:!1},n=Io(t);return n.depthBuffer=!e,Qu=Io(t),n}function Ro(e){Qu.dispose(),Ku.setRenderTarget(Ju),e.scissorTest=!1,e.setSize(e.width,e.height)}function Co(e){var t=new p;t.add(new j(qu[0],e)),Ku.compile(t,ju)}function Io(e){return e=new a(3*ku,3*ku,e),e.texture.mapping=306,e.texture.name="PMREM.cubeUv",e.scissorTest=!0,e}function Lo(e,t,n,r,i){e.viewport.set(t,n,r,i),e.scissor.set(t,n,r,i)}function Do(e){var t=Ku.autoClear;Ku.autoClear=!1;for(var n=1;n<Uu;n++)Po(e,n-1,n,Math.sqrt(Xu[n]*Xu[n]-Xu[n-1]*Xu[n-1]),el[(n-1)%el.length]);Ku.autoClear=t}function Po(e,t,n,r,i){No(e,Qu,t,n,r,"latitudinal",i),No(Qu,e,n,n,r,"longitudinal",i)}function No(e,t,n,r,i,o,a){"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");var s=new p;s.add(new j(qu[r],Gu));var c=Gu.uniforms,u=Yu[n]-1;u=isFinite(i)?Math.PI/(2*u):2*Math.PI/39;var l=i/u,h=isFinite(i)?1+Math.floor(3*l):20;20<h&&console.warn("sigmaRadians, "+i+", is too large and will clip, as it requested "+h+" samples when the maximum is set to 20"),i=[];for(var f=0,d=0;20>d;++d){var m=d/l;m=Math.exp(-m*m/2),i.push(m),0==d?f+=m:d<h&&(f+=2*m)}for(d=0;d<i.length;d++)i[d]/=f;c.envMap.value=e.texture,c.samples.value=h,c.weights.value=i,c.latitudinal.value="latitudinal"===o,a&&(c.poleAxis.value=a),c.dTheta.value=u,c.mipInt.value=8-n,c.inputEncoding.value=Hu[e.texture.encoding],c.outputEncoding.value=Hu[e.texture.encoding],e=Yu[r],m=3*Math.max(0,ku-2*e),Lo(t,m,(0===r?0:2*ku)+2*e*(4<r?r-8+4:0),3*e,2*e),Ku.setRenderTarget(t),Ku.render(s,ju)}function Bo(){var e=new n(1,1);return e=new wr({uniforms:{envMap:{value:null},texelSize:{value:e},inputEncoding:{value:Hu[3e3]},outputEncoding:{value:Hu[3e3]}},vertexShader:Fo(),fragmentShader:"\nprecision mediump float;\nprecision mediump int;\nvarying vec3 vOutputDirection;\nuniform sampler2D envMap;\nuniform vec2 texelSize;\n\n"+Uo()+"\n\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n\nvoid main() {\n\tgl_FragColor = vec4(0.0);\n\tvec3 outputDirection = normalize(vOutputDirection);\n\tvec2 uv;\n\tuv.y = asin(clamp(outputDirection.y, -1.0, 1.0)) * RECIPROCAL_PI + 0.5;\n\tuv.x = atan(outputDirection.z, outputDirection.x) * RECIPROCAL_PI2 + 0.5;\n\tvec2 f = fract(uv / texelSize - 0.5);\n\tuv -= f * texelSize;\n\tvec3 tl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n\tuv.x += texelSize.x;\n\tvec3 tr = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n\tuv.y += texelSize.y;\n\tvec3 br = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n\tuv.x -= texelSize.x;\n\tvec3 bl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n\tvec3 tm = mix(tl, tr, f.x);\n\tvec3 bm = mix(bl, br, f.x);\n\tgl_FragColor.rgb = mix(tm, bm, f.y);\n\tgl_FragColor = linearToOutputTexel(gl_FragColor);\n}\n\t\t",blending:0,depthTest:!1,depthWrite:!1}),e.type="EquirectangularToCubeUV",e}function ko(){var e=new wr({uniforms:{envMap:{value:null},inputEncoding:{value:Hu[3e3]},outputEncoding:{value:Hu[3e3]}},vertexShader:Fo(),fragmentShader:"\nprecision mediump float;\nprecision mediump int;\nvarying vec3 vOutputDirection;\nuniform samplerCube envMap;\n\n"+Uo()+"\n\nvoid main() {\n\tgl_FragColor = vec4(0.0);\n\tgl_FragColor.rgb = envMapTexelToLinear(textureCube(envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ))).rgb;\n\tgl_FragColor = linearToOutputTexel(gl_FragColor);\n}\n\t\t",blending:0,depthTest:!1,depthWrite:!1});return e.type="CubemapToCubeUV",e}function Fo(){return"\nprecision mediump float;\nprecision mediump int;\nattribute vec3 position;\nattribute vec2 uv;\nattribute float faceIndex;\nvarying vec3 vOutputDirection;\nvec3 getDirection(vec2 uv, float face) {\n\tuv = 2.0 * uv - 1.0;\n\tvec3 direction = vec3(uv, 1.0);\n\tif (face == 0.0) {\n\t\tdirection = direction.zyx;\n\t\tdirection.z *= -1.0;\n\t} else if (face == 1.0) {\n\t\tdirection = direction.xzy;\n\t\tdirection.z *= -1.0;\n\t} else if (face == 3.0) {\n\t\tdirection = direction.zyx;\n\t\tdirection.x *= -1.0;\n\t} else if (face == 4.0) {\n\t\tdirection = direction.xzy;\n\t\tdirection.y *= -1.0;\n\t} else if (face == 5.0) {\n\t\tdirection.xz *= -1.0;\n\t}\n\treturn direction;\n}\nvoid main() {\n\tvOutputDirection = getDirection(uv, faceIndex);\n\tgl_Position = vec4( position, 1.0 );\n}\n\t"}function Uo(){return"\nuniform int inputEncoding;\nuniform int outputEncoding;\n\n#include <encodings_pars_fragment>\n\nvec4 inputTexelToLinear(vec4 value){\n\tif(inputEncoding == 0){\n\t\treturn value;\n\t}else if(inputEncoding == 1){\n\t\treturn sRGBToLinear(value);\n\t}else if(inputEncoding == 2){\n\t\treturn RGBEToLinear(value);\n\t}else if(inputEncoding == 3){\n\t\treturn RGBMToLinear(value, 7.0);\n\t}else if(inputEncoding == 4){\n\t\treturn RGBMToLinear(value, 16.0);\n\t}else if(inputEncoding == 5){\n\t\treturn RGBDToLinear(value, 256.0);\n\t}else{\n\t\treturn GammaToLinear(value, 2.2);\n\t}\n}\n\nvec4 linearToOutputTexel(vec4 value){\n\tif(outputEncoding == 0){\n\t\treturn value;\n\t}else if(outputEncoding == 1){\n\t\treturn LinearTosRGB(value);\n\t}else if(outputEncoding == 2){\n\t\treturn LinearToRGBE(value);\n\t}else if(outputEncoding == 3){\n\t\treturn LinearToRGBM(value, 7.0);\n\t}else if(outputEncoding == 4){\n\t\treturn LinearToRGBM(value, 16.0);\n\t}else if(outputEncoding == 5){\n\t\treturn LinearToRGBD(value, 256.0);\n\t}else{\n\t\treturn LinearToGamma(value, 2.2);\n\t}\n}\n\nvec4 envMapTexelToLinear(vec4 color) {\n\treturn inputTexelToLinear(color);\n}\n\t"}function Ho(e){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),ri.call(this,e),this.type="catmullrom",this.closed=!0}function jo(e){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),ri.call(this,e),this.type="catmullrom"}function Go(e){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),ri.call(this,e),this.type="catmullrom"}void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Number.isInteger&&(Number.isInteger=function(e){return"number"===typeof e&&isFinite(e)&&Math.floor(e)===e}),void 0===Math.sign&&(Math.sign=function(e){return 0>e?-1:0<e?1:+e}),!1==="name"in Function.prototype&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&(Object.assign=function(e){if(void 0===e||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(void 0!==r&&null!==r)for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t}),Object.assign(t.prototype,{addEventListener:function(e,t){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)},hasEventListener:function(e,t){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)},removeEventListener:function(e,t){void 0!==this._listeners&&(e=this._listeners[e],void 0!==e&&(t=e.indexOf(t),-1!==t&&e.splice(t,1)))},dispatchEvent:function(e){if(void 0!==this._listeners){var t=this._listeners[e.type];if(void 0!==t){e.target=this,t=t.slice(0);for(var n=0,r=t.length;n<r;n++)t[n].call(this,e)}}}});for(var Vo=[],zo=0;256>zo;zo++)Vo[zo]=(16>zo?"0":"")+zo.toString(16);var Wo={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(Vo[255&e]+Vo[e>>8&255]+Vo[e>>16&255]+Vo[e>>24&255]+"-"+Vo[255&t]+Vo[t>>8&255]+"-"+Vo[t>>16&15|64]+Vo[t>>24&255]+"-"+Vo[63&n|128]+Vo[n>>8&255]+"-"+Vo[n>>16&255]+Vo[n>>24&255]+Vo[255&r]+Vo[r>>8&255]+Vo[r>>16&255]+Vo[r>>24&255]).toUpperCase()},clamp:function(e,t,n){return Math.max(t,Math.min(n,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(e,t,n,r,i){return r+(e-t)*(i-r)/(n-t)},lerp:function(e,t,n){return(1-n)*e+n*t},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t),e*e*(3-2*e))},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t),e*e*e*(e*(6*e-15)+10))},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},degToRad:function(e){return e*Wo.DEG2RAD},radToDeg:function(e){return e*Wo.RAD2DEG},isPowerOfTwo:function(e){return 0===(e&e-1)&&0!==e},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))},setQuaternionFromProperEuler:function(e,t,n,r,i){var o=Math.cos,a=Math.sin,s=o(n/2);n=a(n/2);var c=o((t+r)/2),u=a((t+r)/2),l=o((t-r)/2),h=a((t-r)/2);o=o((r-t)/2),t=a((r-t)/2),"XYX"===i?e.set(s*u,n*l,n*h,s*c):"YZY"===i?e.set(n*h,s*u,n*l,s*c):"ZXZ"===i?e.set(n*l,n*h,s*u,s*c):"XZX"===i?e.set(s*u,n*t,n*o,s*c):"YXY"===i?e.set(n*o,s*u,n*t,s*c):"ZYZ"===i?e.set(n*t,n*o,s*u,s*c):console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order.")}};Object.defineProperties(n.prototype,{width:{get:function(){return this.x},set:function(e){this.x=e}},height:{get:function(){return this.y},set:function(e){this.y=e}}}),Object.assign(n.prototype,{isVector2:!0,set:function(e,t){return this.x=e,this.y=t,this},setScalar:function(e){return this.y=this.x=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)},addScalar:function(e){return this.x+=e,this.y+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)},subScalar:function(e){return this.x-=e,this.y-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this},divide:function(e){return this.x/=e.x,this.y/=e.y,this},divideScalar:function(e){return this.multiplyScalar(1/e)},applyMatrix3:function(e){var t=this.x,n=this.y;return e=e.elements,this.x=e[0]*t+e[3]*n+e[6],this.y=e[1]*t+e[4]*n+e[7],this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this},clampScalar:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this},clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x),this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(e){return this.x*e.x+this.y*e.y},cross:function(e){return this.x*e.y-this.y*e.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var e=Math.atan2(this.y,this.x);return 0>e&&(e+=2*Math.PI),e},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x;return e=this.y-e.y,t*t+e*e},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this},rotateAround:function(e,t){var n=Math.cos(t);t=Math.sin(t);var r=this.x-e.x,i=this.y-e.y;return this.x=r*n-i*t+e.x,this.y=r*t+i*n+e.y,this}}),Object.assign(r.prototype,{isMatrix3:!0,set:function(e,t,n,r,i,o,a,s,c){var u=this.elements;return u[0]=e,u[1]=r,u[2]=a,u[3]=t,u[4]=i,u[5]=s,u[6]=n,u[7]=o,u[8]=c,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(e){var t=this.elements;return e=e.elements,t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],this},setFromMatrix4:function(e){return e=e.elements,this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this},multiply:function(e){return this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var n=e.elements,r=t.elements;t=this.elements,e=n[0];var i=n[3],o=n[6],a=n[1],s=n[4],c=n[7],u=n[2],l=n[5];n=n[8];var h=r[0],f=r[3],d=r[6],p=r[1],m=r[4],v=r[7],g=r[2],y=r[5];return r=r[8],t[0]=e*h+i*p+o*g,t[3]=e*f+i*m+o*y,t[6]=e*d+i*v+o*r,t[1]=a*h+s*p+c*g,t[4]=a*f+s*m+c*y,t[7]=a*d+s*v+c*r,t[2]=u*h+l*p+n*g,t[5]=u*f+l*m+n*y,t[8]=u*d+l*v+n*r,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this},determinant:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],c=e[7];return e=e[8],t*o*e-t*a*c-n*i*e+n*a*s+r*i*c-r*o*s},getInverse:function(e,t){e&&e.isMatrix4&&console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.");var n=e.elements;e=this.elements;var r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],c=n[5],u=n[6],l=n[7];n=n[8];var h=n*s-c*l,f=c*u-n*a,d=l*a-s*u,p=r*h+i*f+o*d;if(0===p){if(!0===t)throw Error("THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0");return console.warn("THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0"),this.identity()}return t=1/p,e[0]=h*t,e[1]=(o*l-n*i)*t,e[2]=(c*i-o*s)*t,e[3]=f*t,e[4]=(n*r-o*u)*t,e[5]=(o*a-c*r)*t,e[6]=d*t,e[7]=(i*u-l*r)*t,e[8]=(s*r-i*a)*t,this},transpose:function(){var e=this.elements,t=e[1];return e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this},getNormalMatrix:function(e){return this.setFromMatrix4(e).getInverse(this).transpose()},transposeIntoArray:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this},setUvTransform:function(e,t,n,r,i,o,a){var s=Math.cos(i);i=Math.sin(i),this.set(n*s,n*i,-n*(s*o+i*a)+o+e,-r*i,r*s,-r*(-i*o+s*a)+a+t,0,0,1)},scale:function(e,t){var n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this},rotate:function(e){var t=Math.cos(e);e=Math.sin(e);var n=this.elements,r=n[0],i=n[3],o=n[6],a=n[1],s=n[4],c=n[7];return n[0]=t*r+e*a,n[3]=t*i+e*s,n[6]=t*o+e*c,n[1]=-e*r+t*a,n[4]=-e*i+t*s,n[7]=-e*o+t*c,this},translate:function(e,t){var n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this},equals:function(e){var t=this.elements;e=e.elements;for(var n=0;9>n;n++)if(t[n]!==e[n])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var n=0;9>n;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}});var qo,Yo={getDataURL:function(e){if("undefined"==typeof HTMLCanvasElement)return e.src;if(!(e instanceof HTMLCanvasElement)){void 0===qo&&(qo=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),qo.width=e.width,qo.height=e.height;var t=qo.getContext("2d");e instanceof ImageData?t.putImageData(e,0,0):t.drawImage(e,0,0,e.width,e.height),e=qo}return 2048<e.width||2048<e.height?e.toDataURL("image/jpeg",.6):e.toDataURL("image/png")}},Xo=0;i.DEFAULT_IMAGE=void 0,i.DEFAULT_MAPPING=300,i.prototype=Object.assign(Object.create(t.prototype),{constructor:i,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this},toJSON:function(e){var t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];var n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){var r=this.image;if(void 0===r.uuid&&(r.uuid=Wo.generateUUID()),!t&&void 0===e.images[r.uuid]){if(Array.isArray(r))for(var i=[],o=0,a=r.length;o<a;o++)i.push(Yo.getDataURL(r[o]));else i=Yo.getDataURL(r);e.images[r.uuid]={uuid:r.uuid,url:i}}n.image=r.uuid}return t||(e.textures[this.uuid]=n),n},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(e){if(300!==this.mapping)return e;if(e.applyMatrix3(this.matrix),0>e.x||1<e.x)switch(this.wrapS){case 1e3:e.x-=Math.floor(e.x);break;case 1001:e.x=0>e.x?0:1;break;case 1002:e.x=1===Math.abs(Math.floor(e.x)%2)?Math.ceil(e.x)-e.x:e.x-Math.floor(e.x)}if(0>e.y||1<e.y)switch(this.wrapT){case 1e3:e.y-=Math.floor(e.y);break;case 1001:e.y=0>e.y?0:1;break;case 1002:e.y=1===Math.abs(Math.floor(e.y)%2)?Math.ceil(e.y)-e.y:e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}}),Object.defineProperty(i.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.defineProperties(o.prototype,{width:{get:function(){return this.z},set:function(e){this.z=e}},height:{get:function(){return this.w},set:function(e){this.w=e}}}),Object.assign(o.prototype,{isVector4:!0,set:function(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this},setScalar:function(e){return this.w=this.z=this.y=this.x=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setW:function(e){return this.w=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this},applyMatrix4:function(e){var t=this.x,n=this.y,r=this.z,i=this.w;return e=e.elements,this.x=e[0]*t+e[4]*n+e[8]*r+e[12]*i,this.y=e[1]*t+e[5]*n+e[9]*r+e[13]*i,this.z=e[2]*t+e[6]*n+e[10]*r+e[14]*i,this.w=e[3]*t+e[7]*n+e[11]*r+e[15]*i,this},divideScalar:function(e){return this.multiplyScalar(1/e)},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return 1e-4>t?(this.x=1,this.z=this.y=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this},setAxisAngleFromRotationMatrix:function(e){e=e.elements;var t=e[0],n=e[4],r=e[8],i=e[1],o=e[5],a=e[9],s=e[2],c=e[6],u=e[10];return.01>Math.abs(n-i)&&.01>Math.abs(r-s)&&.01>Math.abs(a-c)?.1>Math.abs(n+i)&&.1>Math.abs(r+s)&&.1>Math.abs(a+c)&&.1>Math.abs(t+o+u-3)?(this.set(1,0,0,0),this):(e=Math.PI,t=(t+1)/2,o=(o+1)/2,u=(u+1)/2,n=(n+i)/4,r=(r+s)/4,a=(a+c)/4,t>o&&t>u?.01>t?(c=0,n=s=.707106781):(c=Math.sqrt(t),s=n/c,n=r/c):o>u?.01>o?(c=.707106781,s=0,n=.707106781):(s=Math.sqrt(o),c=n/s,n=a/s):.01>u?(s=c=.707106781,n=0):(n=Math.sqrt(u),c=r/n,s=a/n),this.set(c,s,n,e),this):(e=Math.sqrt((c-a)*(c-a)+(r-s)*(r-s)+(i-n)*(i-n)),.001>Math.abs(e)&&(e=1),this.x=(c-a)/e,this.y=(r-s)/e,this.z=(i-n)/e,this.w=Math.acos((t+o+u-1)/2),this)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this},clampScalar:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this},clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x),this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y),this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z),this.w=0>this.w?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}}),a.prototype=Object.assign(Object.create(t.prototype),{constructor:a,isWebGLRenderTarget:!0,setSize:function(e,t){this.width===e&&this.height===t||(this.width=e,this.height=t,this.texture.image.width=e,this.texture.image.height=t,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.width=e.width,this.height=e.height,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),s.prototype=Object.assign(Object.create(a.prototype),{constructor:s,isWebGLMultisampleRenderTarget:!0,copy:function(e){return a.prototype.copy.call(this,e),this.samples=e.samples,this}}),Object.assign(c,{slerp:function(e,t,n,r){return n.copy(e).slerp(t,r)},slerpFlat:function(e,t,n,r,i,o,a){var s=n[r+0],c=n[r+1],u=n[r+2];n=n[r+3],r=i[o+0];var l=i[o+1],h=i[o+2];if(i=i[o+3],n!==i||s!==r||c!==l||u!==h){o=1-a;var f=s*r+c*l+u*h+n*i,d=0<=f?1:-1,p=1-f*f;p>Number.EPSILON&&(p=Math.sqrt(p),f=Math.atan2(p,f*d),o=Math.sin(o*f)/p,a=Math.sin(a*f)/p),d*=a,s=s*o+r*d,c=c*o+l*d,u=u*o+h*d,n=n*o+i*d,o===1-a&&(a=1/Math.sqrt(s*s+c*c+u*u+n*n),s*=a,c*=a,u*=a,n*=a)}e[t]=s,e[t+1]=c,e[t+2]=u,e[t+3]=n}}),Object.defineProperties(c.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},w:{get:function(){return this._w},set:function(e){this._w=e,this._onChangeCallback()}}}),Object.assign(c.prototype,{isQuaternion:!0,set:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this},setFromEuler:function(e,t){if(!e||!e.isEuler)throw Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=e._x,r=e._y,i=e._z;e=e.order;var o=Math.cos,a=Math.sin,s=o(n/2),c=o(r/2);return o=o(i/2),n=a(n/2),r=a(r/2),i=a(i/2),"XYZ"===e?(this._x=n*c*o+s*r*i,this._y=s*r*o-n*c*i,this._z=s*c*i+n*r*o,this._w=s*c*o-n*r*i):"YXZ"===e?(this._x=n*c*o+s*r*i,this._y=s*r*o-n*c*i,this._z=s*c*i-n*r*o,this._w=s*c*o+n*r*i):"ZXY"===e?(this._x=n*c*o-s*r*i,this._y=s*r*o+n*c*i,this._z=s*c*i+n*r*o,this._w=s*c*o-n*r*i):"ZYX"===e?(this._x=n*c*o-s*r*i,this._y=s*r*o+n*c*i,this._z=s*c*i-n*r*o,this._w=s*c*o+n*r*i):"YZX"===e?(this._x=n*c*o+s*r*i,this._y=s*r*o+n*c*i,this._z=s*c*i-n*r*o,this._w=s*c*o-n*r*i):"XZY"===e&&(this._x=n*c*o-s*r*i,this._y=s*r*o-n*c*i,this._z=s*c*i+n*r*o,this._w=s*c*o+n*r*i),!1!==t&&this._onChangeCallback(),this},setFromAxisAngle:function(e,t){t/=2;var n=Math.sin(t);return this._x=e.x*n,this._y=e.y*n,this._z=e.z*n,this._w=Math.cos(t),this._onChangeCallback(),this},setFromRotationMatrix:function(e){var t=e.elements,n=t[0];e=t[4];var r=t[8],i=t[1],o=t[5],a=t[9],s=t[2],c=t[6];t=t[10];var u=n+o+t;return 0<u?(n=.5/Math.sqrt(u+1),this._w=.25/n,this._x=(c-a)*n,this._y=(r-s)*n,this._z=(i-e)*n):n>o&&n>t?(n=2*Math.sqrt(1+n-o-t),this._w=(c-a)/n,this._x=.25*n,this._y=(e+i)/n,this._z=(r+s)/n):o>t?(n=2*Math.sqrt(1+o-n-t),this._w=(r-s)/n,this._x=(e+i)/n,this._y=.25*n,this._z=(a+c)/n):(n=2*Math.sqrt(1+t-n-o),this._w=(i-e)/n,this._x=(r+s)/n,this._y=(a+c)/n,this._z=.25*n),this._onChangeCallback(),this},setFromUnitVectors:function(e,t){var n=e.dot(t)+1;return 1e-6>n?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0):(this._x=0,this._y=-e.z,this._z=e.y)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x),this._w=n,this.normalize()},angleTo:function(e){return 2*Math.acos(Math.abs(Wo.clamp(this.dot(e),-1,1)))},rotateTowards:function(e,t){var n=this.angleTo(e);return 0===n||this.slerp(e,Math.min(1,t/n)),this},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();return 0===e?(this._z=this._y=this._x=0,this._w=1):(e=1/e,this._x*=e,this._y*=e,this._z*=e,this._w*=e),this._onChangeCallback(),this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)},premultiply:function(e){return this.multiplyQuaternions(e,this)},multiplyQuaternions:function(e,t){var n=e._x,r=e._y,i=e._z;e=e._w;var o=t._x,a=t._y,s=t._z;return t=t._w,this._x=n*t+e*o+r*s-i*a,this._y=r*t+e*a+i*o-n*s,this._z=i*t+e*s+n*a-r*o,this._w=e*t-n*o-r*a-i*s,this._onChangeCallback(),this},slerp:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var n=this._x,r=this._y,i=this._z,o=this._w,a=o*e._w+n*e._x+r*e._y+i*e._z;if(0>a?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),1<=a)return this._w=o,this._x=n,this._y=r,this._z=i,this;if(e=1-a*a,e<=Number.EPSILON)return a=1-t,this._w=a*o+t*this._w,this._x=a*n+t*this._x,this._y=a*r+t*this._y,this._z=a*i+t*this._z,this.normalize(),this._onChangeCallback(),this;e=Math.sqrt(e);var s=Math.atan2(e,a);return a=Math.sin((1-t)*s)/e,t=Math.sin(t*s)/e,this._w=o*a+this._w*t,this._x=n*a+this._x*t,this._y=r*a+this._y*t,this._z=i*a+this._z*t,this._onChangeCallback(),this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e,t){return void 0===t&&(t=0),this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e},_onChange:function(e){return this._onChangeCallback=e,this},_onChangeCallback:function(){}});var Qo=new u,Ko=new c;Object.assign(u.prototype,{isVector3:!0,set:function(e,t,n){return this.x=e,this.y=t,this.z=n,this},setScalar:function(e){return this.z=this.y=this.x=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this},multiplyVectors:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},applyEuler:function(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(Ko.setFromEuler(e))},applyAxisAngle:function(e,t){return this.applyQuaternion(Ko.setFromAxisAngle(e,t))},applyMatrix3:function(e){var t=this.x,n=this.y,r=this.z;return e=e.elements,this.x=e[0]*t+e[3]*n+e[6]*r,this.y=e[1]*t+e[4]*n+e[7]*r,this.z=e[2]*t+e[5]*n+e[8]*r,this},applyNormalMatrix:function(e){return this.applyMatrix3(e).normalize()},applyMatrix4:function(e){var t=this.x,n=this.y,r=this.z;e=e.elements;var i=1/(e[3]*t+e[7]*n+e[11]*r+e[15]);return this.x=(e[0]*t+e[4]*n+e[8]*r+e[12])*i,this.y=(e[1]*t+e[5]*n+e[9]*r+e[13])*i,this.z=(e[2]*t+e[6]*n+e[10]*r+e[14])*i,this},applyQuaternion:function(e){var t=this.x,n=this.y,r=this.z,i=e.x,o=e.y,a=e.z;e=e.w;var s=e*t+o*r-a*n,c=e*n+a*t-i*r,u=e*r+i*n-o*t;return t=-i*t-o*n-a*r,this.x=s*e+t*-i+c*-a-u*-o,this.y=c*e+t*-o+u*-i-s*-a,this.z=u*e+t*-a+s*-o-c*-i,this},project:function(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)},unproject:function(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)},transformDirection:function(e){var t=this.x,n=this.y,r=this.z;return e=e.elements,this.x=e[0]*t+e[4]*n+e[8]*r,this.y=e[1]*t+e[5]*n+e[9]*r,this.z=e[2]*t+e[6]*n+e[10]*r,this.normalize()},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this},clampScalar:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this},clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x),this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y),this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},cross:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)},crossVectors:function(e,t){var n=e.x,r=e.y;e=e.z;var i=t.x,o=t.y;return t=t.z,this.x=r*t-e*o,this.y=e*i-n*t,this.z=n*o-r*i,this},projectOnVector:function(e){var t=e.lengthSq();return 0===t?this.set(0,0,0):(t=e.dot(this)/t,this.copy(e).multiplyScalar(t))},projectOnPlane:function(e){return Qo.copy(this).projectOnVector(e),this.sub(Qo)},reflect:function(e){return this.sub(Qo.copy(e).multiplyScalar(2*this.dot(e)))},angleTo:function(e){var t=Math.sqrt(this.lengthSq()*e.lengthSq());return 0===t?Math.PI/2:(e=this.dot(e)/t,Math.acos(Wo.clamp(e,-1,1)))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y;return e=this.z-e.z,t*t+n*n+e*e},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)},setFromSpherical:function(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)},setFromSphericalCoords:function(e,t,n){var r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this},setFromCylindrical:function(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)},setFromCylindricalCoords:function(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this},setFromMatrixPosition:function(e){return e=e.elements,this.x=e[12],this.y=e[13],this.z=e[14],this},setFromMatrixScale:function(e){var t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length();return e=this.setFromMatrixColumn(e,2).length(),this.x=t,this.y=n,this.z=e,this},setFromMatrixColumn:function(e,t){return this.fromArray(e.elements,4*t)},setFromMatrix3Column:function(e,t){return this.fromArray(e.elements,3*t)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}});var Jo=new u,Zo=new l,$o=new u(0,0,0),ea=new u(1,1,1),ta=new u,na=new u,ra=new u;Object.assign(l.prototype,{isMatrix4:!0,set:function(e,t,n,r,i,o,a,s,c,u,l,h,f,d,p,m){var v=this.elements;return v[0]=e,v[4]=t,v[8]=n,v[12]=r,v[1]=i,v[5]=o,v[9]=a,v[13]=s,v[2]=c,v[6]=u,v[10]=l,v[14]=h,v[3]=f,v[7]=d,v[11]=p,v[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new l).fromArray(this.elements)},copy:function(e){var t=this.elements;return e=e.elements,t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],this},copyPosition:function(e){var t=this.elements;return e=e.elements,t[12]=e[12],t[13]=e[13],t[14]=e[14],this},extractBasis:function(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},makeBasis:function(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this},extractRotation:function(e){var t=this.elements,n=e.elements,r=1/Jo.setFromMatrixColumn(e,0).length(),i=1/Jo.setFromMatrixColumn(e,1).length();return e=1/Jo.setFromMatrixColumn(e,2).length(),t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*i,t[5]=n[5]*i,t[6]=n[6]*i,t[7]=0,t[8]=n[8]*e,t[9]=n[9]*e,t[10]=n[10]*e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},makeRotationFromEuler:function(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=this.elements,n=e.x,r=e.y,i=e.z,o=Math.cos(n);n=Math.sin(n);var a=Math.cos(r);r=Math.sin(r);var s=Math.cos(i);if(i=Math.sin(i),"XYZ"===e.order){e=o*s;var c=o*i,u=n*s,l=n*i;t[0]=a*s,t[4]=-a*i,t[8]=r,t[1]=c+u*r,t[5]=e-l*r,t[9]=-n*a,t[2]=l-e*r,t[6]=u+c*r,t[10]=o*a}else"YXZ"===e.order?(e=a*s,c=a*i,u=r*s,l=r*i,t[0]=e+l*n,t[4]=u*n-c,t[8]=o*r,t[1]=o*i,t[5]=o*s,t[9]=-n,t[2]=c*n-u,t[6]=l+e*n,t[10]=o*a):"ZXY"===e.order?(e=a*s,c=a*i,u=r*s,l=r*i,t[0]=e-l*n,t[4]=-o*i,t[8]=u+c*n,t[1]=c+u*n,t[5]=o*s,t[9]=l-e*n,t[2]=-o*r,t[6]=n,t[10]=o*a):"ZYX"===e.order?(e=o*s,c=o*i,u=n*s,l=n*i,t[0]=a*s,t[4]=u*r-c,t[8]=e*r+l,t[1]=a*i,t[5]=l*r+e,t[9]=c*r-u,t[2]=-r,t[6]=n*a,t[10]=o*a):"YZX"===e.order?(e=o*a,c=o*r,u=n*a,l=n*r,t[0]=a*s,t[4]=l-e*i,t[8]=u*i+c,t[1]=i,t[5]=o*s,t[9]=-n*s,t[2]=-r*s,t[6]=c*i+u,t[10]=e-l*i):"XZY"===e.order&&(e=o*a,c=o*r,u=n*a,l=n*r,t[0]=a*s,t[4]=-i,t[8]=r*s,t[1]=e*i+l,t[5]=o*s,t[9]=c*i-u,t[2]=u*i-c,t[6]=n*s,t[10]=l*i+e);return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},makeRotationFromQuaternion:function(e){return this.compose($o,e,ea)},lookAt:function(e,t,n){var r=this.elements;return ra.subVectors(e,t),0===ra.lengthSq()&&(ra.z=1),ra.normalize(),ta.crossVectors(n,ra),0===ta.lengthSq()&&(1===Math.abs(n.z)?ra.x+=1e-4:ra.z+=1e-4,ra.normalize(),ta.crossVectors(n,ra)),ta.normalize(),na.crossVectors(ra,ta),r[0]=ta.x,r[4]=na.x,r[8]=ra.x,r[1]=ta.y,r[5]=na.y,r[9]=ra.y,r[2]=ta.z,r[6]=na.z,r[10]=ra.z,this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var n=e.elements,r=t.elements;t=this.elements,e=n[0];var i=n[4],o=n[8],a=n[12],s=n[1],c=n[5],u=n[9],l=n[13],h=n[2],f=n[6],d=n[10],p=n[14],m=n[3],v=n[7],g=n[11];n=n[15];var y=r[0],b=r[4],w=r[8],E=r[12],x=r[1],_=r[5],T=r[9],A=r[13],S=r[2],M=r[6],O=r[10],R=r[14],C=r[3],I=r[7],L=r[11];return r=r[15],t[0]=e*y+i*x+o*S+a*C,t[4]=e*b+i*_+o*M+a*I,t[8]=e*w+i*T+o*O+a*L,t[12]=e*E+i*A+o*R+a*r,t[1]=s*y+c*x+u*S+l*C,t[5]=s*b+c*_+u*M+l*I,t[9]=s*w+c*T+u*O+l*L,t[13]=s*E+c*A+u*R+l*r,t[2]=h*y+f*x+d*S+p*C,t[6]=h*b+f*_+d*M+p*I,t[10]=h*w+f*T+d*O+p*L,t[14]=h*E+f*A+d*R+p*r,t[3]=m*y+v*x+g*S+n*C,t[7]=m*b+v*_+g*M+n*I,t[11]=m*w+v*T+g*O+n*L,t[15]=m*E+v*A+g*R+n*r,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},determinant:function(){var e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],o=e[1],a=e[5],s=e[9],c=e[13],u=e[2],l=e[6],h=e[10],f=e[14];return e[3]*(+i*s*l-r*c*l-i*a*h+n*c*h+r*a*f-n*s*f)+e[7]*(+t*s*f-t*c*h+i*o*h-r*o*f+r*c*u-i*s*u)+e[11]*(+t*c*l-t*a*f-i*o*l+n*o*f+i*a*u-n*c*u)+e[15]*(-r*a*u-t*s*l+t*a*h+r*o*l-n*o*h+n*s*u)},transpose:function(){var e=this.elements,t=e[1];return e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},setPosition:function(e,t,n){var r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this},getInverse:function(e,t){var n=this.elements,r=e.elements;e=r[0];var i=r[1],o=r[2],a=r[3],s=r[4],c=r[5],u=r[6],l=r[7],h=r[8],f=r[9],d=r[10],p=r[11],m=r[12],v=r[13],g=r[14];r=r[15];var y=f*g*l-v*d*l+v*u*p-c*g*p-f*u*r+c*d*r,b=m*d*l-h*g*l-m*u*p+s*g*p+h*u*r-s*d*r,w=h*v*l-m*f*l+m*c*p-s*v*p-h*c*r+s*f*r,E=m*f*u-h*v*u-m*c*d+s*v*d+h*c*g-s*f*g,x=e*y+i*b+o*w+a*E;if(0===x){if(!0===t)throw Error("THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0");return console.warn("THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0"),this.identity()}return t=1/x,n[0]=y*t,n[1]=(v*d*a-f*g*a-v*o*p+i*g*p+f*o*r-i*d*r)*t,n[2]=(c*g*a-v*u*a+v*o*l-i*g*l-c*o*r+i*u*r)*t,n[3]=(f*u*a-c*d*a-f*o*l+i*d*l+c*o*p-i*u*p)*t,n[4]=b*t,n[5]=(h*g*a-m*d*a+m*o*p-e*g*p-h*o*r+e*d*r)*t,n[6]=(m*u*a-s*g*a-m*o*l+e*g*l+s*o*r-e*u*r)*t,n[7]=(s*d*a-h*u*a+h*o*l-e*d*l-s*o*p+e*u*p)*t,n[8]=w*t,n[9]=(m*f*a-h*v*a-m*i*p+e*v*p+h*i*r-e*f*r)*t,n[10]=(s*v*a-m*c*a+m*i*l-e*v*l-s*i*r+e*c*r)*t,n[11]=(h*c*a-s*f*a-h*i*l+e*f*l+s*i*p-e*c*p)*t,n[12]=E*t,n[13]=(h*v*o-m*f*o+m*i*d-e*v*d-h*i*g+e*f*g)*t,n[14]=(m*c*o-s*v*o-m*i*u+e*v*u+s*i*g-e*c*g)*t,n[15]=(s*f*o-h*c*o+h*i*u-e*f*u-s*i*d+e*c*d)*t,this},scale:function(e){var t=this.elements,n=e.x,r=e.y;return e=e.z,t[0]*=n,t[4]*=r,t[8]*=e,t[1]*=n,t[5]*=r,t[9]*=e,t[2]*=n,t[6]*=r,t[10]*=e,t[3]*=n,t[7]*=r,t[11]*=e,this},getMaxScaleOnAxis:function(){var e=this.elements;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10]))},makeTranslation:function(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this},makeRotationX:function(e){var t=Math.cos(e);return e=Math.sin(e),this.set(1,0,0,0,0,t,-e,0,0,e,t,0,0,0,0,1),this},makeRotationY:function(e){var t=Math.cos(e);return e=Math.sin(e),this.set(t,0,e,0,0,1,0,0,-e,0,t,0,0,0,0,1),this},makeRotationZ:function(e){var t=Math.cos(e);return e=Math.sin(e),this.set(t,-e,0,0,e,t,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(e,t){var n=Math.cos(t);t=Math.sin(t);var r=1-n,i=e.x,o=e.y;e=e.z;var a=r*i,s=r*o;return this.set(a*i+n,a*o-t*e,a*e+t*o,0,a*o+t*e,s*o+n,s*e-t*i,0,a*e-t*o,s*e+t*i,r*e*e+n,0,0,0,0,1),this},makeScale:function(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this},makeShear:function(e,t,n){return this.set(1,t,n,0,e,1,n,0,e,t,1,0,0,0,0,1),this},compose:function(e,t,n){var r=this.elements,i=t._x,o=t._y,a=t._z,s=t._w,c=i+i,u=o+o,l=a+a;t=i*c;var h=i*u;i*=l;var f=o*u;o*=l,a*=l,c*=s,u*=s,s*=l,l=n.x;var d=n.y;return n=n.z,r[0]=(1-(f+a))*l,r[1]=(h+s)*l,r[2]=(i-u)*l,r[3]=0,r[4]=(h-s)*d,r[5]=(1-(t+a))*d,r[6]=(o+c)*d,r[7]=0,r[8]=(i+u)*n,r[9]=(o-c)*n,r[10]=(1-(t+f))*n,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this},decompose:function(e,t,n){var r=this.elements,i=Jo.set(r[0],r[1],r[2]).length(),o=Jo.set(r[4],r[5],r[6]).length(),a=Jo.set(r[8],r[9],r[10]).length();0>this.determinant()&&(i=-i),e.x=r[12],e.y=r[13],e.z=r[14],Zo.copy(this),e=1/i,r=1/o;var s=1/a;return Zo.elements[0]*=e,Zo.elements[1]*=e,Zo.elements[2]*=e,Zo.elements[4]*=r,Zo.elements[5]*=r,Zo.elements[6]*=r,Zo.elements[8]*=s,Zo.elements[9]*=s,Zo.elements[10]*=s,t.setFromRotationMatrix(Zo),n.x=i,n.y=o,n.z=a,this},makePerspective:function(e,t,n,r,i,o){void 0===o&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var a=this.elements;return a[0]=2*i/(t-e),a[4]=0,a[8]=(t+e)/(t-e),a[12]=0,a[1]=0,a[5]=2*i/(n-r),a[9]=(n+r)/(n-r),a[13]=0,a[2]=0,a[6]=0,a[10]=-(o+i)/(o-i),a[14]=-2*o*i/(o-i),a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this},makeOrthographic:function(e,t,n,r,i,o){var a=this.elements,s=1/(t-e),c=1/(n-r),u=1/(o-i);return a[0]=2*s,a[4]=0,a[8]=0,a[12]=-(t+e)*s,a[1]=0,a[5]=2*c,a[9]=0,a[13]=-(n+r)*c,a[2]=0,a[6]=0,a[10]=-2*u,a[14]=-(o+i)*u,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this},equals:function(e){var t=this.elements;e=e.elements;for(var n=0;16>n;n++)if(t[n]!==e[n])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var n=0;16>n;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}});var ia=new l,oa=new c;h.RotationOrders="XYZ YZX ZXY XZY YXZ ZYX".split(" "),h.DefaultOrder="XYZ",Object.defineProperties(h.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},order:{get:function(){return this._order},set:function(e){this._order=e,this._onChangeCallback()}}}),Object.assign(h.prototype,{isEuler:!0,set:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._order=r||this._order,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this},setFromRotationMatrix:function(e,t,n){var r=Wo.clamp,i=e.elements;e=i[0];var o=i[4],a=i[8],s=i[1],c=i[5],u=i[9],l=i[2],h=i[6];return i=i[10],t=t||this._order,"XYZ"===t?(this._y=Math.asin(r(a,-1,1)),.9999999>Math.abs(a)?(this._x=Math.atan2(-u,i),this._z=Math.atan2(-o,e)):(this._x=Math.atan2(h,c),this._z=0)):"YXZ"===t?(this._x=Math.asin(-r(u,-1,1)),.9999999>Math.abs(u)?(this._y=Math.atan2(a,i),this._z=Math.atan2(s,c)):(this._y=Math.atan2(-l,e),this._z=0)):"ZXY"===t?(this._x=Math.asin(r(h,-1,1)),.9999999>Math.abs(h)?(this._y=Math.atan2(-l,i),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(s,e))):"ZYX"===t?(this._y=Math.asin(-r(l,-1,1)),.9999999>Math.abs(l)?(this._x=Math.atan2(h,i),this._z=Math.atan2(s,e)):(this._x=0,this._z=Math.atan2(-o,c))):"YZX"===t?(this._z=Math.asin(r(s,-1,1)),.9999999>Math.abs(s)?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-l,e)):(this._x=0,this._y=Math.atan2(a,i))):"XZY"===t?(this._z=Math.asin(-r(o,-1,1)),.9999999>Math.abs(o)?(this._x=Math.atan2(h,c),this._y=Math.atan2(a,e)):(this._x=Math.atan2(-u,i),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+t),this._order=t,!1!==n&&this._onChangeCallback(),this},setFromQuaternion:function(e,t,n){return ia.makeRotationFromQuaternion(e),this.setFromRotationMatrix(ia,t,n)},setFromVector3:function(e,t){return this.set(e.x,e.y,e.z,t||this._order)},reorder:function(e){return oa.setFromEuler(this),this.setFromQuaternion(oa,e)},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e},toVector3:function(e){return e?e.set(this._x,this._y,this._z):new u(this._x,this._y,this._z)},_onChange:function(e){return this._onChangeCallback=e,this},_onChangeCallback:function(){}}),Object.assign(f.prototype,{set:function(e){this.mask=1<<e|0},enable:function(e){this.mask=this.mask|1<<e|0},enableAll:function(){this.mask=-1},toggle:function(e){this.mask^=1<<e|0},disable:function(e){this.mask&=~(1<<e|0)},disableAll:function(){this.mask=0},test:function(e){return 0!==(this.mask&e.mask)}});var aa=0,sa=new u,ca=new c,ua=new l,la=new u,ha=new u,fa=new u,da=new c,pa=new u(1,0,0),ma=new u(0,1,0),va=new u(0,0,1),ga={type:"added"},ya={type:"removed"};d.DefaultUp=new u(0,1,0),d.DefaultMatrixAutoUpdate=!0,d.prototype=Object.assign(Object.create(t.prototype),{constructor:d,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix4:function(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(e){return this.quaternion.premultiply(e),this},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:function(e,t){return ca.setFromAxisAngle(e,t),this.quaternion.multiply(ca),this},rotateOnWorldAxis:function(e,t){return ca.setFromAxisAngle(e,t),this.quaternion.premultiply(ca),this},rotateX:function(e){return this.rotateOnAxis(pa,e)},rotateY:function(e){return this.rotateOnAxis(ma,e)},rotateZ:function(e){return this.rotateOnAxis(va,e)},translateOnAxis:function(e,t){return sa.copy(e).applyQuaternion(this.quaternion),this.position.add(sa.multiplyScalar(t)),this},translateX:function(e){return this.translateOnAxis(pa,e)},translateY:function(e){return this.translateOnAxis(ma,e)},translateZ:function(e){return this.translateOnAxis(va,e)},localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:function(e){return e.applyMatrix4(ua.getInverse(this.matrixWorld))},lookAt:function(e,t,n){e.isVector3?la.copy(e):la.set(e,t,n),e=this.parent,this.updateWorldMatrix(!0,!1),ha.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?ua.lookAt(ha,la,this.up):ua.lookAt(la,ha,this.up),this.quaternion.setFromRotationMatrix(ua),e&&(ua.extractRotation(e.matrixWorld),ca.setFromRotationMatrix(ua),this.quaternion.premultiply(ca.inverse()))},add:function(e){if(1<arguments.length){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(ga)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)},remove:function(e){if(1<arguments.length){for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}return t=this.children.indexOf(e),-1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(ya)),this},attach:function(e){return this.updateWorldMatrix(!0,!1),ua.getInverse(this.matrixWorld),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),ua.multiply(e.parent.matrixWorld)),e.applyMatrix4(ua),e.updateWorldMatrix(!1,!1),this.add(e),this},getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(e,t){if(this[e]===t)return this;for(var n=0,r=this.children.length;n<r;n++){var i=this.children[n].getObjectByProperty(e,t);if(void 0!==i)return i}},getWorldPosition:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),e=new u),this.updateMatrixWorld(!0),e.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),e=new c),this.updateMatrixWorld(!0),this.matrixWorld.decompose(ha,e,fa),e},getWorldScale:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),e=new u),this.updateMatrixWorld(!0),this.matrixWorld.decompose(ha,da,e),e},getWorldDirection:function(e){void 0===e&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),e=new u),this.updateMatrixWorld(!0);var t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()},raycast:function(){},traverse:function(e){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverse(e)},traverseVisible:function(e){if(!1!==this.visible){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}},traverseAncestors:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].updateMatrixWorld(e)},updateWorldMatrix:function(e,t){var n=this.parent;if(!0===e&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t)for(e=this.children,t=0,n=e.length;t<n;t++)e[t].updateWorldMatrix(!1,!0)},toJSON:function(e){function t(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}function n(e){var t,n=[];for(t in e){var r=e[t];delete r.metadata,n.push(r)}return n}var r=void 0===e||"string"===typeof e,i={};r&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{}},i.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var o={};if(o.uuid=this.uuid,o.type=this.type,""!==this.name&&(o.name=this.name),!0===this.castShadow&&(o.castShadow=!0),!0===this.receiveShadow&&(o.receiveShadow=!0),!1===this.visible&&(o.visible=!1),!1===this.frustumCulled&&(o.frustumCulled=!1),0!==this.renderOrder&&(o.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(o.userData=this.userData),o.layers=this.layers.mask,o.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(o.matrixAutoUpdate=!1),this.isInstancedMesh&&(o.type="InstancedMesh",o.count=this.count,o.instanceMatrix=this.instanceMatrix.toJSON()),this.isMesh||this.isLine||this.isPoints){o.geometry=t(e.geometries,this.geometry);var a=this.geometry.parameters;if(void 0!==a&&void 0!==a.shapes)if(a=a.shapes,Array.isArray(a))for(var s=0,c=a.length;s<c;s++)t(e.shapes,a[s]);else t(e.shapes,a)}if(void 0!==this.material)if(Array.isArray(this.material)){for(a=[],s=0,c=this.material.length;s<c;s++)a.push(t(e.materials,this.material[s]));o.material=a}else o.material=t(e.materials,this.material);if(0<this.children.length)for(o.children=[],s=0;s<this.children.length;s++)o.children.push(this.children[s].toJSON(e).object);if(r){r=n(e.geometries),s=n(e.materials),c=n(e.textures);var u=n(e.images);a=n(e.shapes),0<r.length&&(i.geometries=r),0<s.length&&(i.materials=s),0<c.length&&(i.textures=c),0<u.length&&(i.images=u),0<a.length&&(i.shapes=a)}return i.object=o,i},clone:function(e){return(new this.constructor).copy(this,e)},copy:function(e,t){if(void 0===t&&(t=!0),this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(t=0;t<e.children.length;t++)this.add(e.children[t].clone());return this}}),p.prototype=Object.assign(Object.create(d.prototype),{constructor:p,isScene:!0,copy:function(e,t){return d.prototype.copy.call(this,e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this},toJSON:function(e){var t=d.prototype.toJSON.call(this,e);return null!==this.background&&(t.object.background=this.background.toJSON(e)),null!==this.environment&&(t.object.environment=this.environment.toJSON(e)),null!==this.fog&&(t.object.fog=this.fog.toJSON()),t},dispose:function(){this.dispatchEvent({type:"dispose"})}});var ba=[new u,new u,new u,new u,new u,new u,new u,new u],wa=new u,Ea=new m,xa=new u,_a=new u,Ta=new u,Aa=new u,Sa=new u,Ma=new u,Oa=new u,Ra=new u,Ca=new u,Ia=new u;Object.assign(m.prototype,{isBox3:!0,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromArray:function(e){for(var t=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0,s=0,c=e.length;s<c;s+=3){var u=e[s],l=e[s+1],h=e[s+2];u<t&&(t=u),l<n&&(n=l),h<r&&(r=h),u>i&&(i=u),l>o&&(o=l),h>a&&(a=h)}return this.min.set(t,n,r),this.max.set(i,o,a),this},setFromBufferAttribute:function(e){for(var t=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0,s=0,c=e.count;s<c;s++){var u=e.getX(s),l=e.getY(s),h=e.getZ(s);u<t&&(t=u),l<n&&(n=l),h<r&&(r=h),u>i&&(i=u),l>o&&(o=l),h>a&&(a=h)}return this.min.set(t,n,r),this.max.set(i,o,a),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(e,t){return t=wa.copy(t).multiplyScalar(.5),this.min.copy(e).sub(t),this.max.copy(e).add(t),this},setFromObject:function(e){return this.makeEmpty(),this.expandByObject(e)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(e){return void 0===e&&(console.warn("THREE.Box3: .getCenter() target is now required"),e=new u),this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return void 0===e&&(console.warn("THREE.Box3: .getSize() target is now required"),e=new u),this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},expandByObject:function(e){e.updateWorldMatrix(!1,!1);var t=e.geometry;void 0!==t&&(null===t.boundingBox&&t.computeBoundingBox(),Ea.copy(t.boundingBox),Ea.applyMatrix4(e.matrixWorld),this.expandByPoint(Ea.min),this.expandByPoint(Ea.max)),e=e.children,t=0;for(var n=e.length;t<n;t++)this.expandByObject(e[t]);return this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z},getParameter:function(e,t){return void 0===t&&(console.warn("THREE.Box3: .getParameter() target is now required"),t=new u),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)},intersectsSphere:function(e){return this.clampPoint(e.center,wa),wa.distanceToSquared(e.center)<=e.radius*e.radius},intersectsPlane:function(e){if(0<e.normal.x)var t=e.normal.x*this.min.x,n=e.normal.x*this.max.x;else t=e.normal.x*this.max.x,n=e.normal.x*this.min.x;return 0<e.normal.y?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),0<e.normal.z?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant},intersectsTriangle:function(e){return!this.isEmpty()&&(this.getCenter(Oa),Ra.subVectors(this.max,Oa),xa.subVectors(e.a,Oa),_a.subVectors(e.b,Oa),Ta.subVectors(e.c,Oa),Aa.subVectors(_a,xa),Sa.subVectors(Ta,_a),Ma.subVectors(xa,Ta),e=[0,-Aa.z,Aa.y,0,-Sa.z,Sa.y,0,-Ma.z,Ma.y,Aa.z,0,-Aa.x,Sa.z,0,-Sa.x,Ma.z,0,-Ma.x,-Aa.y,Aa.x,0,-Sa.y,Sa.x,0,-Ma.y,Ma.x,0],!!v(e,xa,_a,Ta,Ra)&&(e=[1,0,0,0,1,0,0,0,1],!!v(e,xa,_a,Ta,Ra)&&(Ca.crossVectors(Aa,Sa),e=[Ca.x,Ca.y,Ca.z],v(e,xa,_a,Ta,Ra))))},clampPoint:function(e,t){return void 0===t&&(console.warn("THREE.Box3: .clampPoint() target is now required"),t=new u),t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(e){return wa.copy(e).clamp(this.min,this.max).sub(e).length()},getBoundingSphere:function(e){return void 0===e&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(e.center),e.radius=.5*this.getSize(wa).length(),e},intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},applyMatrix4:function(e){return this.isEmpty()||(ba[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),ba[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),ba[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),ba[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),ba[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),ba[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),ba[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),ba[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(ba)),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}});var La=new m;Object.assign(g.prototype,{set:function(e,t){return this.center.copy(e),this.radius=t,this},setFromPoints:function(e,t){var n=this.center;void 0!==t?n.copy(t):La.setFromPoints(e).getCenter(n);for(var r=t=0,i=e.length;r<i;r++)t=Math.max(t,n.distanceToSquared(e[r]));return this.radius=Math.sqrt(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},empty:function(){return 0>=this.radius},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t},intersectsBox:function(e){return e.intersectsSphere(this)},intersectsPlane:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius},clampPoint:function(e,t){var n=this.center.distanceToSquared(e);return void 0===t&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),t=new u),t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t},getBoundingBox:function(e){return void 0===e&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),e=new m),e.set(this.center,this.center),e.expandByScalar(this.radius),e},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius*=e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius}});var Da=new u,Pa=new u,Na=new u,Ba=new u,ka=new u,Fa=new u,Ua=new u;Object.assign(y.prototype,{set:function(e,t){return this.origin.copy(e),this.direction.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,t){return void 0===t&&(console.warn("THREE.Ray: .at() target is now required"),t=new u),t.copy(this.direction).multiplyScalar(e).add(this.origin)},lookAt:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this},recast:function(e){return this.origin.copy(this.at(e,Da)),this},closestPointToPoint:function(e,t){return void 0===t&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),t=new u),t.subVectors(e,this.origin),e=t.dot(this.direction),0>e?t.copy(this.origin):t.copy(this.direction).multiplyScalar(e).add(this.origin)},distanceToPoint:function(e){return Math.sqrt(this.distanceSqToPoint(e))},distanceSqToPoint:function(e){var t=Da.subVectors(e,this.origin).dot(this.direction);return 0>t?this.origin.distanceToSquared(e):(Da.copy(this.direction).multiplyScalar(t).add(this.origin),Da.distanceToSquared(e))},distanceSqToSegment:function(e,t,n,r){Pa.copy(e).add(t).multiplyScalar(.5),Na.copy(t).sub(e).normalize(),Ba.copy(this.origin).sub(Pa);var i=.5*e.distanceTo(t),o=-this.direction.dot(Na),a=Ba.dot(this.direction),s=-Ba.dot(Na),c=Ba.lengthSq(),u=Math.abs(1-o*o);if(0<u){e=o*s-a,t=o*a-s;var l=i*u;0<=e?t>=-l?t<=l?(i=1/u,e*=i,t*=i,o=e*(e+o*t+2*a)+t*(o*e+t+2*s)+c):(t=i,e=Math.max(0,-(o*t+a)),o=-e*e+t*(t+2*s)+c):(t=-i,e=Math.max(0,-(o*t+a)),o=-e*e+t*(t+2*s)+c):t<=-l?(e=Math.max(0,-(-o*i+a)),t=0<e?-i:Math.min(Math.max(-i,-s),i),o=-e*e+t*(t+2*s)+c):t<=l?(e=0,t=Math.min(Math.max(-i,-s),i),o=t*(t+2*s)+c):(e=Math.max(0,-(o*i+a)),t=0<e?i:Math.min(Math.max(-i,-s),i),o=-e*e+t*(t+2*s)+c)}else t=0<o?-i:i,e=Math.max(0,-(o*t+a)),o=-e*e+t*(t+2*s)+c;return n&&n.copy(this.direction).multiplyScalar(e).add(this.origin),r&&r.copy(Na).multiplyScalar(t).add(Pa),o},intersectSphere:function(e,t){Da.subVectors(e.center,this.origin);var n=Da.dot(this.direction),r=Da.dot(Da)-n*n;return e=e.radius*e.radius,r>e?null:(e=Math.sqrt(e-r),r=n-e,n+=e,0>r&&0>n?null:0>r?this.at(n,t):this.at(r,t))},intersectsSphere:function(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius},distanceToPlane:function(e){var t=e.normal.dot(this.direction);return 0===t?0===e.distanceToPoint(this.origin)?0:null:(e=-(this.origin.dot(e.normal)+e.constant)/t,0<=e?e:null)},intersectPlane:function(e,t){return e=this.distanceToPlane(e),null===e?null:this.at(e,t)},intersectsPlane:function(e){var t=e.distanceToPoint(this.origin);return 0===t||0>e.normal.dot(this.direction)*t},intersectBox:function(e,t){var n=1/this.direction.x,r=1/this.direction.y,i=1/this.direction.z,o=this.origin;if(0<=n){var a=(e.min.x-o.x)*n;n*=e.max.x-o.x}else a=(e.max.x-o.x)*n,n*=e.min.x-o.x;if(0<=r){var s=(e.min.y-o.y)*r;r*=e.max.y-o.y}else s=(e.max.y-o.y)*r,r*=e.min.y-o.y;return a>r||s>n?null:((s>a||a!==a)&&(a=s),(r<n||n!==n)&&(n=r),0<=i?(s=(e.min.z-o.z)*i,e=(e.max.z-o.z)*i):(s=(e.max.z-o.z)*i,e=(e.min.z-o.z)*i),a>e||s>n?null:((s>a||a!==a)&&(a=s),(e<n||n!==n)&&(n=e),0>n?null:this.at(0<=a?a:n,t)))},intersectsBox:function(e){return null!==this.intersectBox(e,Da)},intersectTriangle:function(e,t,n,r,i){if(ka.subVectors(t,e),Fa.subVectors(n,e),Ua.crossVectors(ka,Fa),t=this.direction.dot(Ua),0<t){if(r)return null;r=1}else{if(!(0>t))return null;r=-1,t=-t}return Ba.subVectors(this.origin,e),e=r*this.direction.dot(Fa.crossVectors(Ba,Fa)),0>e?null:(n=r*this.direction.dot(ka.cross(Ba)),0>n||e+n>t?null:(e=-r*Ba.dot(Ua),0>e?null:this.at(e/t,i)))},applyMatrix4:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}});var Ha=new u,ja=new u,Ga=new r;Object.assign(b.prototype,{isPlane:!0,set:function(e,t){return this.normal.copy(e),this.constant=t,this},setComponents:function(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this},setFromNormalAndCoplanarPoint:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this},setFromCoplanarPoints:function(e,t,n){return t=Ha.subVectors(n,t).cross(ja.subVectors(e,t)).normalize(),this.setFromNormalAndCoplanarPoint(t,e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this},normalize:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){return void 0===t&&(console.warn("THREE.Plane: .projectPoint() target is now required"),t=new u),t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)},intersectLine:function(e,t){void 0===t&&(console.warn("THREE.Plane: .intersectLine() target is now required"),t=new u);var n=e.delta(Ha),r=this.normal.dot(n);if(0===r){if(0===this.distanceToPoint(e.start))return t.copy(e.start)}else if(r=-(e.start.dot(this.normal)+this.constant)/r,!(0>r||1<r))return t.copy(n).multiplyScalar(r).add(e.start)},intersectsLine:function(e){var t=this.distanceToPoint(e.start);return e=this.distanceToPoint(e.end),0>t&&0<e||0>e&&0<t},intersectsBox:function(e){return e.intersectsPlane(this)},intersectsSphere:function(e){return e.intersectsPlane(this)},coplanarPoint:function(e){return void 0===e&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),e=new u),e.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(e,t){return t=t||Ga.getNormalMatrix(e),e=this.coplanarPoint(Ha).applyMatrix4(e),t=this.normal.applyMatrix3(t).normalize(),this.constant=-e.dot(t),this},translate:function(e){return this.constant-=e.dot(this.normal),this},equals:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}});var Va=new u,za=new u,Wa=new u,qa=new u,Ya=new u,Xa=new u,Qa=new u,Ka=new u,Ja=new u,Za=new u;Object.assign(w,{getNormal:function(e,t,n,r){return void 0===r&&(console.warn("THREE.Triangle: .getNormal() target is now required"),r=new u),r.subVectors(n,t),Va.subVectors(e,t),r.cross(Va),e=r.lengthSq(),0<e?r.multiplyScalar(1/Math.sqrt(e)):r.set(0,0,0)},getBarycoord:function(e,t,n,r,i){Va.subVectors(r,t),za.subVectors(n,t),Wa.subVectors(e,t),e=Va.dot(Va),t=Va.dot(za),n=Va.dot(Wa);var o=za.dot(za);r=za.dot(Wa);var a=e*o-t*t;return void 0===i&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),i=new u),0===a?i.set(-2,-1,-1):(a=1/a,o=(o*n-t*r)*a,e=(e*r-t*n)*a,i.set(1-o-e,e,o))},containsPoint:function(e,t,n,r){return w.getBarycoord(e,t,n,r,qa),0<=qa.x&&0<=qa.y&&1>=qa.x+qa.y},getUV:function(e,t,n,r,i,o,a,s){return this.getBarycoord(e,t,n,r,qa),s.set(0,0),s.addScaledVector(i,qa.x),s.addScaledVector(o,qa.y),s.addScaledVector(a,qa.z),s},isFrontFacing:function(e,t,n,r){return Va.subVectors(n,t),za.subVectors(e,t),0>Va.cross(za).dot(r)}}),Object.assign(w.prototype,{set:function(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this},setFromPointsAndIndices:function(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},getArea:function(){return Va.subVectors(this.c,this.b),za.subVectors(this.a,this.b),.5*Va.cross(za).length()},getMidpoint:function(e){return void 0===e&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),e=new u),e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(e){return w.getNormal(this.a,this.b,this.c,e)},getPlane:function(e){return void 0===e&&(console.warn("THREE.Triangle: .getPlane() target is now required"),e=new b),e.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(e,t){return w.getBarycoord(e,this.a,this.b,this.c,t)},getUV:function(e,t,n,r,i){return w.getUV(e,this.a,this.b,this.c,t,n,r,i)},containsPoint:function(e){return w.containsPoint(e,this.a,this.b,this.c)},isFrontFacing:function(e){return w.isFrontFacing(this.a,this.b,this.c,e)},intersectsBox:function(e){return e.intersectsTriangle(this)},closestPointToPoint:function(e,t){void 0===t&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),t=new u);var n=this.a,r=this.b,i=this.c;Ya.subVectors(r,n),Xa.subVectors(i,n),Ka.subVectors(e,n);var o=Ya.dot(Ka),a=Xa.dot(Ka);if(0>=o&&0>=a)return t.copy(n);Ja.subVectors(e,r);var s=Ya.dot(Ja),c=Xa.dot(Ja);if(0<=s&&c<=s)return t.copy(r);var l=o*c-s*a;if(0>=l&&0<=o&&0>=s)return r=o/(o-s),t.copy(n).addScaledVector(Ya,r);Za.subVectors(e,i),e=Ya.dot(Za);var h=Xa.dot(Za);return 0<=h&&e<=h?t.copy(i):(o=e*a-o*h,0>=o&&0<=a&&0>=h?(l=a/(a-h),t.copy(n).addScaledVector(Xa,l)):(a=s*h-e*c,0>=a&&0<=c-s&&0<=e-h?(Qa.subVectors(i,r),l=(c-s)/(c-s+(e-h)),t.copy(r).addScaledVector(Qa,l)):(i=1/(a+o+l),r=o*i,l*=i,t.copy(n).addScaledVector(Ya,r).addScaledVector(Xa,l))))},equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}});var $a={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},es={h:0,s:0,l:0},ts={h:0,s:0,l:0};Object.assign(E.prototype,{isColor:!0,r:1,g:1,b:1,set:function(e){return e&&e.isColor?this.copy(e):"number"===typeof e?this.setHex(e):"string"===typeof e&&this.setStyle(e),this},setScalar:function(e){return this.b=this.g=this.r=e,this},setHex:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this},setRGB:function(e,t,n){return this.r=e,this.g=t,this.b=n,this},setHSL:function(e,t,n){return e=Wo.euclideanModulo(e,1),t=Wo.clamp(t,0,1),n=Wo.clamp(n,0,1),0===t?this.r=this.g=this.b=n:(t=.5>=n?n*(1+t):n+t-n*t,n=2*n-t,this.r=x(n,t,e+1/3),this.g=x(n,t,e),this.b=x(n,t,e-1/3)),this},setStyle:function(e){function t(t){void 0!==t&&1>parseFloat(t)&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}var n;if(n=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){var r=n[2];switch(n[1]){case"rgb":case"rgba":if(n=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(r))return this.r=Math.min(255,parseInt(n[1],10))/255,this.g=Math.min(255,parseInt(n[2],10))/255,this.b=Math.min(255,parseInt(n[3],10))/255,t(n[5]),this;if(n=/^(\d+)%\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(r))return this.r=Math.min(100,parseInt(n[1],10))/100,this.g=Math.min(100,parseInt(n[2],10))/100,this.b=Math.min(100,parseInt(n[3],10))/100,t(n[5]),this;break;case"hsl":case"hsla":if(n=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(r)){r=parseFloat(n[1])/360;var i=parseInt(n[2],10)/100,o=parseInt(n[3],10)/100;return t(n[5]),this.setHSL(r,i,o)}}}else if(n=/^#([A-Fa-f0-9]+)$/.exec(e)){if(n=n[1],r=n.length,3===r)return this.r=parseInt(n.charAt(0)+n.charAt(0),16)/255,this.g=parseInt(n.charAt(1)+n.charAt(1),16)/255,this.b=parseInt(n.charAt(2)+n.charAt(2),16)/255,this;if(6===r)return this.r=parseInt(n.charAt(0)+n.charAt(1),16)/255,this.g=parseInt(n.charAt(2)+n.charAt(3),16)/255,this.b=parseInt(n.charAt(4)+n.charAt(5),16)/255,this}return e&&0<e.length?this.setColorName(e):this},setColorName:function(e){var t=$a[e];return void 0!==t?this.setHex(t):console.warn("THREE.Color: Unknown color "+e),this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e,t){return void 0===t&&(t=2),this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this},copyLinearToGamma:function(e,t){return void 0===t&&(t=2),t=0<t?1/t:1,this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this},convertGammaToLinear:function(e){return this.copyGammaToLinear(this,e),this},convertLinearToGamma:function(e){return this.copyLinearToGamma(this,e),this},copySRGBToLinear:function(e){return this.r=_(e.r),this.g=_(e.g),this.b=_(e.b),this},copyLinearToSRGB:function(e){return this.r=T(e.r),this.g=T(e.g),this.b=T(e.b),this},convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(e){void 0===e&&(console.warn("THREE.Color: .getHSL() target is now required"),e={h:0,s:0,l:0});var t,n=this.r,r=this.g,i=this.b,o=Math.max(n,r,i),a=Math.min(n,r,i),s=(a+o)/2;if(a===o)a=t=0;else{var c=o-a;switch(a=.5>=s?c/(o+a):c/(2-o-a),o){case n:t=(r-i)/c+(r<i?6:0);break;case r:t=(i-n)/c+2;break;case i:t=(n-r)/c+4}t/=6}return e.h=t,e.s=a,e.l=s,e},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(e,t,n){return this.getHSL(es),es.h+=e,es.s+=t,es.l+=n,this.setHSL(es.h,es.s,es.l),this},add:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this},addColors:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this},addScalar:function(e){return this.r+=e,this.g+=e,this.b+=e,this},sub:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this},multiply:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this},multiplyScalar:function(e){return this.r*=e,this.g*=e,this.b*=e,this},lerp:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this},lerpHSL:function(e,t){this.getHSL(es),e.getHSL(ts),e=Wo.lerp(es.h,ts.h,t);var n=Wo.lerp(es.s,ts.s,t);return t=Wo.lerp(es.l,ts.l,t),this.setHSL(e,n,t),this},equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e,t){return void 0===t&&(t=0),this.r=e[t],this.g=e[t+1],this.b=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e},toJSON:function(){return this.getHex()}}),E.NAMES=$a,Object.assign(A.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(var t=0,n=e.vertexNormals.length;t<n;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(t=0,n=e.vertexColors.length;t<n;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}});var ns=0;S.prototype=Object.assign(Object.create(t.prototype),{constructor:S,isMaterial:!0,onBeforeCompile:function(){},setValues:function(e){if(void 0!==e)for(var t in e){var n=e[t];if(void 0===n)console.warn("THREE.Material: '"+t+"' parameter is undefined.");else if("shading"===t)console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===n;else{var r=this[t];void 0===r?console.warn("THREE."+this.type+": '"+t+"' is not a property of this material."):r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n}}},toJSON:function(e){function t(e){var t,n=[];for(t in e){var r=e[t];delete r.metadata,n.push(r)}return n}var n=void 0===e||"string"===typeof e;n&&(e={textures:{},images:{}});var r={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};return r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),void 0!==this.roughness&&(r.roughness=this.roughness),void 0!==this.metalness&&(r.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(r.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),void 0!==this.shininess&&(r.shininess=this.shininess),void 0!==this.clearcoat&&(r.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,r.reflectivity=this.reflectivity,r.refractionRatio=this.refractionRatio,void 0!==this.combine&&(r.combine=this.combine),void 0!==this.envMapIntensity&&(r.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.size&&(r.size=this.size),void 0!==this.sizeAttenuation&&(r.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(r.blending=this.blending),!0===this.flatShading&&(r.flatShading=this.flatShading),0!==this.side&&(r.side=this.side),0!==this.vertexColors&&(r.vertexColors=this.vertexColors),1>this.opacity&&(r.opacity=this.opacity),!0===this.transparent&&(r.transparent=this.transparent),r.depthFunc=this.depthFunc,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,r.stencilWrite=this.stencilWrite,r.stencilWriteMask=this.stencilWriteMask,r.stencilFunc=this.stencilFunc,r.stencilRef=this.stencilRef,r.stencilFuncMask=this.stencilFuncMask,r.stencilFail=this.stencilFail,r.stencilZFail=this.stencilZFail,r.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(r.rotation=this.rotation),!0===this.polygonOffset&&(r.polygonOffset=!0),0!==this.polygonOffsetFactor&&(r.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(r.linewidth=this.linewidth),void 0!==this.dashSize&&(r.dashSize=this.dashSize),void 0!==this.gapSize&&(r.gapSize=this.gapSize),void 0!==this.scale&&(r.scale=this.scale),!0===this.dithering&&(r.dithering=!0),0<this.alphaTest&&(r.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(r.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(r.wireframe=this.wireframe),1<this.wireframeLinewidth&&(r.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(r.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(r.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(r.morphTargets=!0),!0===this.morphNormals&&(r.morphNormals=!0),!0===this.skinning&&(r.skinning=!0),!1===this.visible&&(r.visible=!1),!1===this.toneMapped&&(r.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),n&&(n=t(e.textures),e=t(e.images),0<n.length&&(r.textures=n),0<e.length&&(r.images=e)),r},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.name=e.name,this.fog=e.fog,this.blending=e.blending,this.side=e.side,this.flatShading=e.flatShading,this.vertexTangents=e.vertexTangents,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;var t=e.clippingPlanes,n=null;if(null!==t){var r=t.length;n=Array(r);for(var i=0;i!==r;++i)n[i]=t[i].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(S.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),M.prototype=Object.create(S.prototype),M.prototype.constructor=M,M.prototype.isMeshBasicMaterial=!0,M.prototype.copy=function(e){return S.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this};var rs=new u;Object.defineProperty(O.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(O.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setUsage:function(e){return this.usage=e,this},copy:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this},copyAt:function(e,t,n){e*=this.itemSize,n*=t.itemSize;for(var r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r];return this},copyArray:function(e){return this.array.set(e),this},copyColorsArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),o=new E),t[n++]=o.r,t[n++]=o.g,t[n++]=o.b}return this},copyVector2sArray:function(e){for(var t=this.array,r=0,i=0,o=e.length;i<o;i++){var a=e[i];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),a=new n),t[r++]=a.x,t[r++]=a.y}return this},copyVector3sArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),o=new u),t[n++]=o.x,t[n++]=o.y,t[n++]=o.z}return this},copyVector4sArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var a=e[r];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),a=new o),t[n++]=a.x,t[n++]=a.y,t[n++]=a.z,t[n++]=a.w}return this},applyMatrix3:function(e){for(var t=0,n=this.count;t<n;t++)rs.x=this.getX(t),rs.y=this.getY(t),rs.z=this.getZ(t),rs.applyMatrix3(e),this.setXYZ(t,rs.x,rs.y,rs.z);return this},applyMatrix4:function(e){for(var t=0,n=this.count;t<n;t++)rs.x=this.getX(t),rs.y=this.getY(t),rs.z=this.getZ(t),rs.applyMatrix4(e),this.setXYZ(t,rs.x,rs.y,rs.z);return this},applyNormalMatrix:function(e){for(var t=0,n=this.count;t<n;t++)rs.x=this.getX(t),rs.y=this.getY(t),rs.z=this.getZ(t),rs.applyNormalMatrix(e),this.setXYZ(t,rs.x,rs.y,rs.z);return this},transformDirection:function(e){for(var t=0,n=this.count;t<n;t++)rs.x=this.getX(t),rs.y=this.getY(t),rs.z=this.getZ(t),rs.transformDirection(e),this.setXYZ(t,rs.x,rs.y,rs.z);return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,t){return this.array[e*this.itemSize]=t,this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,t){return this.array[e*this.itemSize+3]=t,this},setXY:function(e,t,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this},setXYZ:function(e,t,n,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this},setXYZW:function(e,t,n,r,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this},onUpload:function(e){return this.onUploadCallback=e,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}}),R.prototype=Object.create(O.prototype),R.prototype.constructor=R,C.prototype=Object.create(O.prototype),C.prototype.constructor=C,I.prototype=Object.create(O.prototype),I.prototype.constructor=I,L.prototype=Object.create(O.prototype),L.prototype.constructor=L,D.prototype=Object.create(O.prototype),D.prototype.constructor=D,P.prototype=Object.create(O.prototype),P.prototype.constructor=P,N.prototype=Object.create(O.prototype),N.prototype.constructor=N,B.prototype=Object.create(O.prototype),B.prototype.constructor=B,k.prototype=Object.create(O.prototype),k.prototype.constructor=k,Object.assign(F.prototype,{computeGroups:function(e){var t=[],n=void 0;e=e.faces;for(var r=0;r<e.length;r++){var i=e[r];if(i.materialIndex!==n){n=i.materialIndex,void 0!==o&&(o.count=3*r-o.start,t.push(o));var o={start:3*r,materialIndex:n}}}void 0!==o&&(o.count=3*r-o.start,t.push(o)),this.groups=t},fromGeometry:function(e){var t=e.faces,r=e.vertices,i=e.faceVertexUvs,o=i[0]&&0<i[0].length,a=i[1]&&0<i[1].length,s=e.morphTargets,c=s.length;if(0<c){for(var u=[],l=0;l<c;l++)u[l]={name:s[l].name,data:[]};this.morphTargets.position=u}var h=e.morphNormals,f=h.length;if(0<f){var d=[];for(l=0;l<f;l++)d[l]={name:h[l].name,data:[]};this.morphTargets.normal=d}var p=e.skinIndices,m=e.skinWeights,v=p.length===r.length,g=m.length===r.length;for(0<r.length&&0===t.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported."),l=0;l<t.length;l++){var y=t[l];this.vertices.push(r[y.a],r[y.b],r[y.c]);var b=y.vertexNormals;for(3===b.length?this.normals.push(b[0],b[1],b[2]):(b=y.normal,this.normals.push(b,b,b)),b=y.vertexColors,3===b.length?this.colors.push(b[0],b[1],b[2]):(b=y.color,this.colors.push(b,b,b)),!0===o&&(b=i[0][l],void 0!==b?this.uvs.push(b[0],b[1],b[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",l),this.uvs.push(new n,new n,new n))),!0===a&&(b=i[1][l],void 0!==b?this.uvs2.push(b[0],b[1],b[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",l),this.uvs2.push(new n,new n,new n))),b=0;b<c;b++){var w=s[b].vertices;u[b].data.push(w[y.a],w[y.b],w[y.c])}for(b=0;b<f;b++)w=h[b].vertexNormals[l],d[b].data.push(w.a,w.b,w.c);v&&this.skinIndices.push(p[y.a],p[y.b],p[y.c]),g&&this.skinWeights.push(m[y.a],m[y.b],m[y.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this}});var is=1,os=new l,as=new d,ss=new u,cs=new m,us=new m,ls=new u;H.prototype=Object.assign(Object.create(t.prototype),{constructor:H,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(e){Array.isArray(e)?this.index=new(65535<U(e)?N:D)(e,1):this.index=e},getAttribute:function(e){return this.attributes[e]},setAttribute:function(e,t){return this.attributes[e]=t,this},deleteAttribute:function(e){return delete this.attributes[e],this},addGroup:function(e,t,n){this.groups.push({start:e,count:t,materialIndex:void 0!==n?n:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,t){this.drawRange.start=e,this.drawRange.count=t},applyMatrix4:function(e){var t=this.attributes.position;if(void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0),t=this.attributes.normal,void 0!==t){var n=(new r).getNormalMatrix(e);t.applyNormalMatrix(n),t.needsUpdate=!0}return t=this.attributes.tangent,void 0!==t&&(t.transformDirection(e),t.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(e){return os.makeRotationX(e),this.applyMatrix4(os),this},rotateY:function(e){return os.makeRotationY(e),this.applyMatrix4(os),this},rotateZ:function(e){return os.makeRotationZ(e),this.applyMatrix4(os),this},translate:function(e,t,n){return os.makeTranslation(e,t,n),this.applyMatrix4(os),this},scale:function(e,t,n){return os.makeScale(e,t,n),this.applyMatrix4(os),this},lookAt:function(e){return as.lookAt(e),as.updateMatrix(),this.applyMatrix4(as.matrix),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(ss).negate(),this.translate(ss.x,ss.y,ss.z),this},setFromObject:function(e){var t=e.geometry;if(e.isPoints||e.isLine){e=new B(3*t.vertices.length,3);var n=new B(3*t.colors.length,3);this.setAttribute("position",e.copyVector3sArray(t.vertices)),this.setAttribute("color",n.copyColorsArray(t.colors)),t.lineDistances&&t.lineDistances.length===t.vertices.length&&(e=new B(t.lineDistances.length,1),this.setAttribute("lineDistance",e.copyArray(t.lineDistances))),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone())}else e.isMesh&&t&&t.isGeometry&&this.fromGeometry(t);return this},setFromPoints:function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n];t.push(i.x,i.y,i.z||0)}return this.setAttribute("position",new B(t,3)),this},updateFromObject:function(e){var t=e.geometry;if(e.isMesh){var n=t.__directGeometry;if(!0===t.elementsNeedUpdate&&(n=void 0,t.elementsNeedUpdate=!1),void 0===n)return this.fromGeometry(t);n.verticesNeedUpdate=t.verticesNeedUpdate,n.normalsNeedUpdate=t.normalsNeedUpdate,n.colorsNeedUpdate=t.colorsNeedUpdate,n.uvsNeedUpdate=t.uvsNeedUpdate,n.groupsNeedUpdate=t.groupsNeedUpdate,t.verticesNeedUpdate=!1,t.normalsNeedUpdate=!1,t.colorsNeedUpdate=!1,t.uvsNeedUpdate=!1,t.groupsNeedUpdate=!1,t=n}return!0===t.verticesNeedUpdate&&(n=this.attributes.position,void 0!==n&&(n.copyVector3sArray(t.vertices),n.needsUpdate=!0),t.verticesNeedUpdate=!1),!0===t.normalsNeedUpdate&&(n=this.attributes.normal,void 0!==n&&(n.copyVector3sArray(t.normals),n.needsUpdate=!0),t.normalsNeedUpdate=!1),!0===t.colorsNeedUpdate&&(n=this.attributes.color,void 0!==n&&(n.copyColorsArray(t.colors),n.needsUpdate=!0),t.colorsNeedUpdate=!1),t.uvsNeedUpdate&&(n=this.attributes.uv,void 0!==n&&(n.copyVector2sArray(t.uvs),n.needsUpdate=!0),t.uvsNeedUpdate=!1),t.lineDistancesNeedUpdate&&(n=this.attributes.lineDistance,void 0!==n&&(n.copyArray(t.lineDistances),n.needsUpdate=!0),t.lineDistancesNeedUpdate=!1),t.groupsNeedUpdate&&(t.computeGroups(e.geometry),this.groups=t.groups,t.groupsNeedUpdate=!1),this},fromGeometry:function(e){return e.__directGeometry=(new F).fromGeometry(e),this.fromDirectGeometry(e.__directGeometry)},fromDirectGeometry:function(e){var t=new Float32Array(3*e.vertices.length);for(var n in this.setAttribute("position",new O(t,3).copyVector3sArray(e.vertices)),0<e.normals.length&&(t=new Float32Array(3*e.normals.length),this.setAttribute("normal",new O(t,3).copyVector3sArray(e.normals))),0<e.colors.length&&(t=new Float32Array(3*e.colors.length),this.setAttribute("color",new O(t,3).copyColorsArray(e.colors))),0<e.uvs.length&&(t=new Float32Array(2*e.uvs.length),this.setAttribute("uv",new O(t,2).copyVector2sArray(e.uvs))),0<e.uvs2.length&&(t=new Float32Array(2*e.uvs2.length),this.setAttribute("uv2",new O(t,2).copyVector2sArray(e.uvs2))),this.groups=e.groups,e.morphTargets){t=[];for(var r=e.morphTargets[n],i=0,o=r.length;i<o;i++){var a=r[i],s=new B(3*a.data.length,3);s.name=a.name,t.push(s.copyVector3sArray(a.data))}this.morphAttributes[n]=t}return 0<e.skinIndices.length&&(n=new B(4*e.skinIndices.length,4),this.setAttribute("skinIndex",n.copyVector4sArray(e.skinIndices))),0<e.skinWeights.length&&(n=new B(4*e.skinWeights.length,4),this.setAttribute("skinWeight",n.copyVector4sArray(e.skinWeights))),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new m);var e=this.attributes.position,t=this.morphAttributes.position;if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t){e=0;for(var n=t.length;e<n;e++)cs.setFromBufferAttribute(t[e]),this.morphTargetsRelative?(ls.addVectors(this.boundingBox.min,cs.min),this.boundingBox.expandByPoint(ls),ls.addVectors(this.boundingBox.max,cs.max),this.boundingBox.expandByPoint(ls)):(this.boundingBox.expandByPoint(cs.min),this.boundingBox.expandByPoint(cs.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new g);var e=this.attributes.position,t=this.morphAttributes.position;if(e){var n=this.boundingSphere.center;if(cs.setFromBufferAttribute(e),t)for(var r=0,i=t.length;r<i;r++){var o=t[r];us.setFromBufferAttribute(o),this.morphTargetsRelative?(ls.addVectors(cs.min,us.min),cs.expandByPoint(ls),ls.addVectors(cs.max,us.max),cs.expandByPoint(ls)):(cs.expandByPoint(us.min),cs.expandByPoint(us.max))}cs.getCenter(n);var a=0;for(r=0,i=e.count;r<i;r++)ls.fromBufferAttribute(e,r),a=Math.max(a,n.distanceToSquared(ls));if(t)for(r=0,i=t.length;r<i;r++){o=t[r];for(var s=this.morphTargetsRelative,c=0,u=o.count;c<u;c++)ls.fromBufferAttribute(o,c),s&&(ss.fromBufferAttribute(e,c),ls.add(ss)),a=Math.max(a,n.distanceToSquared(ls))}this.boundingSphere.radius=Math.sqrt(a),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}},computeFaceNormals:function(){},computeVertexNormals:function(){var e=this.index,t=this.attributes;if(t.position){var n=t.position.array;if(void 0===t.normal)this.setAttribute("normal",new O(new Float32Array(n.length),3));else for(var r=t.normal.array,i=0,o=r.length;i<o;i++)r[i]=0;r=t.normal.array;var a=new u,s=new u,c=new u,l=new u,h=new u;if(e){var f=e.array;for(i=0,o=e.count;i<o;i+=3){e=3*f[i+0];var d=3*f[i+1],p=3*f[i+2];a.fromArray(n,e),s.fromArray(n,d),c.fromArray(n,p),l.subVectors(c,s),h.subVectors(a,s),l.cross(h),r[e]+=l.x,r[e+1]+=l.y,r[e+2]+=l.z,r[d]+=l.x,r[d+1]+=l.y,r[d+2]+=l.z,r[p]+=l.x,r[p+1]+=l.y,r[p+2]+=l.z}}else for(i=0,o=n.length;i<o;i+=9)a.fromArray(n,i),s.fromArray(n,i+3),c.fromArray(n,i+6),l.subVectors(c,s),h.subVectors(a,s),l.cross(h),r[i]=l.x,r[i+1]=l.y,r[i+2]=l.z,r[i+3]=l.x,r[i+4]=l.y,r[i+5]=l.z,r[i+6]=l.x,r[i+7]=l.y,r[i+8]=l.z;this.normalizeNormals(),t.normal.needsUpdate=!0}},merge:function(e,t){if(e&&e.isBufferGeometry){void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var n,r=this.attributes;for(n in r)if(void 0!==e.attributes[n]){var i=r[n].array,o=e.attributes[n],a=o.array,s=o.itemSize*t;o=Math.min(a.length,i.length-s);for(var c=0;c<o;c++,s++)i[s]=a[c]}return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e)},normalizeNormals:function(){for(var e=this.attributes.normal,t=0,n=e.count;t<n;t++)ls.x=e.getX(t),ls.y=e.getY(t),ls.z=e.getZ(t),ls.normalize(),e.setXYZ(t,ls.x,ls.y,ls.z)},toNonIndexed:function(){function e(e,t){var n=e.array;e=e.itemSize;for(var r,i=new n.constructor(t.length*e),o=0,a=0,s=t.length;a<s;a++){r=t[a]*e;for(var c=0;c<e;c++)i[o++]=n[r++]}return new O(i,e)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var t,n=new H,r=this.index.array,i=this.attributes;for(t in i){var o=i[t];o=e(o,r),n.setAttribute(t,o)}var a=this.morphAttributes;for(t in a){var s=[],c=a[t];i=0;for(var u=c.length;i<u;i++)o=c[i],o=e(o,r),s.push(o);n.morphAttributes[t]=s}for(n.morphTargetsRelative=this.morphTargetsRelative,r=this.groups,i=0,t=r.length;i<t;i++)o=r[i],n.addGroup(o.start,o.count,o.materialIndex);return n},toJSON:function(){var e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),0<Object.keys(this.userData).length&&(e.userData=this.userData),void 0!==this.parameters){var t=this.parameters;for(u in t)void 0!==t[u]&&(e[u]=t[u]);return e}e.data={attributes:{}},t=this.index,null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});var n=this.attributes;for(u in n){t=n[u];var r=t.toJSON();""!==t.name&&(r.name=t.name),e.data.attributes[u]=r}n={};var i=!1;for(u in this.morphAttributes){for(var o=this.morphAttributes[u],a=[],s=0,c=o.length;s<c;s++)t=o[s],r=t.toJSON(),""!==t.name&&(r.name=t.name),a.push(r);0<a.length&&(n[u]=a,i=!0)}i&&(e.data.morphAttributes=n,e.data.morphTargetsRelative=this.morphTargetsRelative);var u=this.groups;return 0<u.length&&(e.data.groups=JSON.parse(JSON.stringify(u))),u=this.boundingSphere,null!==u&&(e.data.boundingSphere={center:u.center.toArray(),radius:u.radius}),e},clone:function(){return(new H).copy(this)},copy:function(e){var t;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingSphere=this.boundingBox=null,this.name=e.name;var n=e.index;for(a in null!==n&&this.setIndex(n.clone()),n=e.attributes,n)this.setAttribute(a,n[a].clone());var r=e.morphAttributes;for(a in r){var i=[],o=r[a];for(n=0,t=o.length;n<t;n++)i.push(o[n].clone());this.morphAttributes[a]=i}this.morphTargetsRelative=e.morphTargetsRelative;var a=e.groups;for(n=0,t=a.length;n<t;n++)r=a[n],this.addGroup(r.start,r.count,r.materialIndex);return a=e.boundingBox,null!==a&&(this.boundingBox=a.clone()),a=e.boundingSphere,null!==a&&(this.boundingSphere=a.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var hs=new l,fs=new y,ds=new g,ps=new u,ms=new u,vs=new u,gs=new u,ys=new u,bs=new u,ws=new u,Es=new u,xs=new u,_s=new n,Ts=new n,As=new n,Ss=new u,Ms=new u;j.prototype=Object.assign(Object.create(d.prototype),{constructor:j,isMesh:!0,copy:function(e){return d.prototype.copy.call(this,e),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this},updateMorphTargets:function(){var e=this.geometry;if(e.isBufferGeometry){e=e.morphAttributes;var t=Object.keys(e);if(0<t.length){var n=e[t[0]];if(void 0!==n)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,t=n.length;e<t;e++){var r=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[r]=e}}}else e=e.morphTargets,void 0!==e&&0<e.length&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")},raycast:function(e,t){var r=this.geometry,i=this.material,o=this.matrixWorld;if(void 0!==i&&(null===r.boundingSphere&&r.computeBoundingSphere(),ds.copy(r.boundingSphere),ds.applyMatrix4(o),!1!==e.ray.intersectsSphere(ds)&&(hs.getInverse(o),fs.copy(e.ray).applyMatrix4(hs),null===r.boundingBox||!1!==fs.intersectsBox(r.boundingBox))))if(r.isBufferGeometry){var a=r.index;o=r.attributes.position;var s,c,u=r.morphAttributes.position,l=r.morphTargetsRelative,h=r.attributes.uv,f=r.attributes.uv2,d=r.groups,p=r.drawRange;if(null!==a)if(Array.isArray(i)){var m=0;for(s=d.length;m<s;m++){var v=d[m],g=i[v.materialIndex],y=Math.max(v.start,p.start);for(c=r=Math.min(v.start+v.count,p.start+p.count);y<c;y+=3){r=a.getX(y);var b=a.getX(y+1),E=a.getX(y+2);(r=V(this,g,e,fs,o,u,l,h,f,r,b,E))&&(r.faceIndex=Math.floor(y/3),r.face.materialIndex=v.materialIndex,t.push(r))}}}else for(y=Math.max(0,p.start),r=Math.min(a.count,p.start+p.count),m=y,s=r;m<s;m+=3)r=a.getX(m),b=a.getX(m+1),E=a.getX(m+2),(r=V(this,i,e,fs,o,u,l,h,f,r,b,E))&&(r.faceIndex=Math.floor(m/3),t.push(r));else if(void 0!==o)if(Array.isArray(i))for(m=0,s=d.length;m<s;m++)for(v=d[m],g=i[v.materialIndex],y=Math.max(v.start,p.start),c=r=Math.min(v.start+v.count,p.start+p.count);y<c;y+=3)r=y,b=y+1,E=y+2,(r=V(this,g,e,fs,o,u,l,h,f,r,b,E))&&(r.faceIndex=Math.floor(y/3),r.face.materialIndex=v.materialIndex,t.push(r));else for(y=Math.max(0,p.start),r=Math.min(o.count,p.start+p.count),m=y,s=r;m<s;m+=3)r=m,b=m+1,E=m+2,(r=V(this,i,e,fs,o,u,l,h,f,r,b,E))&&(r.faceIndex=Math.floor(m/3),t.push(r))}else if(r.isGeometry)for(o=Array.isArray(i),u=r.vertices,l=r.faces,r=r.faceVertexUvs[0],0<r.length&&(a=r),p=0,m=l.length;p<m;p++)s=l[p],r=o?i[s.materialIndex]:i,void 0!==r&&(h=u[s.a],f=u[s.b],d=u[s.c],r=G(this,r,e,fs,h,f,d,Ss))&&(a&&a[p]&&(v=a[p],_s.copy(v[0]),Ts.copy(v[1]),As.copy(v[2]),r.uv=w.getUV(Ss,h,f,d,_s,Ts,As,new n)),r.face=s,r.faceIndex=p,t.push(r))},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var Os=0,Rs=new l,Cs=new d,Is=new u;z.prototype=Object.assign(Object.create(t.prototype),{constructor:z,isGeometry:!0,applyMatrix4:function(e){for(var t=(new r).getNormalMatrix(e),n=0,i=this.vertices.length;n<i;n++)this.vertices[n].applyMatrix4(e);for(n=0,i=this.faces.length;n<i;n++){e=this.faces[n],e.normal.applyMatrix3(t).normalize();for(var o=0,a=e.vertexNormals.length;o<a;o++)e.vertexNormals[o].applyMatrix3(t).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.normalsNeedUpdate=this.verticesNeedUpdate=!0,this},rotateX:function(e){return Rs.makeRotationX(e),this.applyMatrix4(Rs),this},rotateY:function(e){return Rs.makeRotationY(e),this.applyMatrix4(Rs),this},rotateZ:function(e){return Rs.makeRotationZ(e),this.applyMatrix4(Rs),this},translate:function(e,t,n){return Rs.makeTranslation(e,t,n),this.applyMatrix4(Rs),this},scale:function(e,t,n){return Rs.makeScale(e,t,n),this.applyMatrix4(Rs),this},lookAt:function(e){return Cs.lookAt(e),Cs.updateMatrix(),this.applyMatrix4(Cs.matrix),this},fromBufferGeometry:function(e){function t(e,t,i,o){var a=void 0===c?[]:[r.colors[e].clone(),r.colors[t].clone(),r.colors[i].clone()],f=void 0===s?[]:[(new u).fromArray(s,3*e),(new u).fromArray(s,3*t),(new u).fromArray(s,3*i)];o=new A(e,t,i,f,a,o),r.faces.push(o),void 0!==l&&r.faceVertexUvs[0].push([(new n).fromArray(l,2*e),(new n).fromArray(l,2*t),(new n).fromArray(l,2*i)]),void 0!==h&&r.faceVertexUvs[1].push([(new n).fromArray(h,2*e),(new n).fromArray(h,2*t),(new n).fromArray(h,2*i)])}var r=this,i=null!==e.index?e.index.array:void 0,o=e.attributes;if(void 0===o.position)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;var a=o.position.array,s=void 0!==o.normal?o.normal.array:void 0,c=void 0!==o.color?o.color.array:void 0,l=void 0!==o.uv?o.uv.array:void 0,h=void 0!==o.uv2?o.uv2.array:void 0;for(void 0!==h&&(this.faceVertexUvs[1]=[]),o=0;o<a.length;o+=3)r.vertices.push((new u).fromArray(a,o)),void 0!==c&&r.colors.push((new E).fromArray(c,o));var f=e.groups;if(0<f.length)for(o=0;o<f.length;o++){a=f[o];var d=a.start,p=d;for(d+=a.count;p<d;p+=3)void 0!==i?t(i[p],i[p+1],i[p+2],a.materialIndex):t(p,p+1,p+2,a.materialIndex)}else if(void 0!==i)for(o=0;o<i.length;o+=3)t(i[o],i[o+1],i[o+2]);else for(o=0;o<a.length/3;o+=3)t(o,o+1,o+2);return this.computeFaceNormals(),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(Is).negate(),this.translate(Is.x,Is.y,Is.z),this},normalize:function(){this.computeBoundingSphere();var e=this.boundingSphere.center,t=this.boundingSphere.radius;t=0===t?1:1/t;var n=new l;return n.set(t,0,0,-t*e.x,0,t,0,-t*e.y,0,0,t,-t*e.z,0,0,0,1),this.applyMatrix4(n),this},computeFaceNormals:function(){for(var e=new u,t=new u,n=0,r=this.faces.length;n<r;n++){var i=this.faces[n],o=this.vertices[i.a],a=this.vertices[i.b];e.subVectors(this.vertices[i.c],a),t.subVectors(o,a),e.cross(t),e.normalize(),i.normal.copy(e)}},computeVertexNormals:function(e){var t;void 0===e&&(e=!0);var n=Array(this.vertices.length),r=0;for(t=this.vertices.length;r<t;r++)n[r]=new u;if(e){var i=new u,o=new u;for(e=0,r=this.faces.length;e<r;e++){t=this.faces[e];var a=this.vertices[t.a],s=this.vertices[t.b],c=this.vertices[t.c];i.subVectors(c,s),o.subVectors(a,s),i.cross(o),n[t.a].add(i),n[t.b].add(i),n[t.c].add(i)}}else for(this.computeFaceNormals(),e=0,r=this.faces.length;e<r;e++)t=this.faces[e],n[t.a].add(t.normal),n[t.b].add(t.normal),n[t.c].add(t.normal);for(r=0,t=this.vertices.length;r<t;r++)n[r].normalize();for(e=0,r=this.faces.length;e<r;e++)t=this.faces[e],a=t.vertexNormals,3===a.length?(a[0].copy(n[t.a]),a[1].copy(n[t.b]),a[2].copy(n[t.c])):(a[0]=n[t.a].clone(),a[1]=n[t.b].clone(),a[2]=n[t.c].clone());0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var e;this.computeFaceNormals();var t=0;for(e=this.faces.length;t<e;t++){var n=this.faces[t],r=n.vertexNormals;3===r.length?(r[0].copy(n.normal),r[1].copy(n.normal),r[2].copy(n.normal)):(r[0]=n.normal.clone(),r[1]=n.normal.clone(),r[2]=n.normal.clone())}0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var e,t,n=0;for(t=this.faces.length;n<t;n++){var r=this.faces[n];r.__originalFaceNormal?r.__originalFaceNormal.copy(r.normal):r.__originalFaceNormal=r.normal.clone(),r.__originalVertexNormals||(r.__originalVertexNormals=[]);var i=0;for(e=r.vertexNormals.length;i<e;i++)r.__originalVertexNormals[i]?r.__originalVertexNormals[i].copy(r.vertexNormals[i]):r.__originalVertexNormals[i]=r.vertexNormals[i].clone()}var o=new z;for(o.faces=this.faces,i=0,e=this.morphTargets.length;i<e;i++){if(!this.morphNormals[i]){this.morphNormals[i]={},this.morphNormals[i].faceNormals=[],this.morphNormals[i].vertexNormals=[],r=this.morphNormals[i].faceNormals;var a=this.morphNormals[i].vertexNormals;for(n=0,t=this.faces.length;n<t;n++){var s=new u,c={a:new u,b:new u,c:new u};r.push(s),a.push(c)}}for(a=this.morphNormals[i],o.vertices=this.morphTargets[i].vertices,o.computeFaceNormals(),o.computeVertexNormals(),n=0,t=this.faces.length;n<t;n++)r=this.faces[n],s=a.faceNormals[n],c=a.vertexNormals[n],s.copy(r.normal),c.a.copy(r.vertexNormals[0]),c.b.copy(r.vertexNormals[1]),c.c.copy(r.vertexNormals[2])}for(n=0,t=this.faces.length;n<t;n++)r=this.faces[n],r.normal=r.__originalFaceNormal,r.vertexNormals=r.__originalVertexNormals},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new m),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new g),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,n){if(e&&e.isGeometry){var i,o=this.vertices.length,a=this.vertices,s=e.vertices,c=this.faces,u=e.faces,l=this.colors,h=e.colors;void 0===n&&(n=0),void 0!==t&&(i=(new r).getNormalMatrix(t));for(var f=0,d=s.length;f<d;f++){var p=s[f].clone();void 0!==t&&p.applyMatrix4(t),a.push(p)}for(f=0,d=h.length;f<d;f++)l.push(h[f].clone());for(f=0,d=u.length;f<d;f++){s=u[f];var m=s.vertexNormals;for(h=s.vertexColors,l=new A(s.a+o,s.b+o,s.c+o),l.normal.copy(s.normal),void 0!==i&&l.normal.applyMatrix3(i).normalize(),t=0,a=m.length;t<a;t++)p=m[t].clone(),void 0!==i&&p.applyMatrix3(i).normalize(),l.vertexNormals.push(p);for(l.color.copy(s.color),t=0,a=h.length;t<a;t++)p=h[t],l.vertexColors.push(p.clone());l.materialIndex=s.materialIndex+n,c.push(l)}for(f=0,d=e.faceVertexUvs.length;f<d;f++)for(n=e.faceVertexUvs[f],void 0===this.faceVertexUvs[f]&&(this.faceVertexUvs[f]=[]),t=0,a=n.length;t<a;t++){for(i=n[t],o=[],c=0,u=i.length;c<u;c++)o.push(i[c].clone());this.faceVertexUvs[f].push(o)}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e)},mergeMesh:function(e){e&&e.isMesh?(e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e)},mergeVertices:function(){var e,t={},n=[],r=[],i=Math.pow(10,4),o=0;for(e=this.vertices.length;o<e;o++){var a=this.vertices[o];a=Math.round(a.x*i)+"_"+Math.round(a.y*i)+"_"+Math.round(a.z*i),void 0===t[a]?(t[a]=o,n.push(this.vertices[o]),r[o]=n.length-1):r[o]=r[t[a]]}for(t=[],o=0,e=this.faces.length;o<e;o++)for(i=this.faces[o],i.a=r[i.a],i.b=r[i.b],i.c=r[i.c],i=[i.a,i.b,i.c],a=0;3>a;a++)if(i[a]===i[(a+1)%3]){t.push(o);break}for(o=t.length-1;0<=o;o--)for(i=t[o],this.faces.splice(i,1),r=0,e=this.faceVertexUvs.length;r<e;r++)this.faceVertexUvs[r].splice(i,1);return o=this.vertices.length-n.length,this.vertices=n,o},setFromPoints:function(e){this.vertices=[];for(var t=0,n=e.length;t<n;t++){var r=e[t];this.vertices.push(new u(r.x,r.y,r.z||0))}return this},sortFacesByMaterialIndex:function(){for(var e=this.faces,t=e.length,n=0;n<t;n++)e[n]._id=n;e.sort((function(e,t){return e.materialIndex-t.materialIndex}));var r,i,o=this.faceVertexUvs[0],a=this.faceVertexUvs[1];for(o&&o.length===t&&(r=[]),a&&a.length===t&&(i=[]),n=0;n<t;n++){var s=e[n]._id;r&&r.push(o[s]),i&&i.push(a[s])}r&&(this.faceVertexUvs[0]=r),i&&(this.faceVertexUvs[1]=i)},toJSON:function(){function e(e,t,n){return n?e|1<<t:e&~(1<<t)}function t(e){var t=e.x.toString()+e.y.toString()+e.z.toString();return void 0!==u[t]||(u[t]=c.length/3,c.push(e.x,e.y,e.z)),u[t]}function n(e){var t=e.r.toString()+e.g.toString()+e.b.toString();return void 0!==h[t]||(h[t]=l.length,l.push(e.getHex())),h[t]}function r(e){var t=e.x.toString()+e.y.toString();return void 0!==d[t]||(d[t]=f.length/2,f.push(e.x,e.y)),d[t]}var i={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),void 0!==this.parameters){var o,a=this.parameters;for(o in a)void 0!==a[o]&&(i[o]=a[o]);return i}for(a=[],o=0;o<this.vertices.length;o++){var s=this.vertices[o];a.push(s.x,s.y,s.z)}s=[];var c=[],u={},l=[],h={},f=[],d={};for(o=0;o<this.faces.length;o++){var p=this.faces[o],m=void 0!==this.faceVertexUvs[0][o],v=0<p.normal.length(),g=0<p.vertexNormals.length,y=1!==p.color.r||1!==p.color.g||1!==p.color.b,b=0<p.vertexColors.length,w=0;w=e(w,0,0),w=e(w,1,!0),w=e(w,2,!1),w=e(w,3,m),w=e(w,4,v),w=e(w,5,g),w=e(w,6,y),w=e(w,7,b),s.push(w),s.push(p.a,p.b,p.c),s.push(p.materialIndex),m&&(m=this.faceVertexUvs[0][o],s.push(r(m[0]),r(m[1]),r(m[2]))),v&&s.push(t(p.normal)),g&&(v=p.vertexNormals,s.push(t(v[0]),t(v[1]),t(v[2]))),y&&s.push(n(p.color)),b&&(p=p.vertexColors,s.push(n(p[0]),n(p[1]),n(p[2])))}return i.data={},i.data.vertices=a,i.data.normals=c,0<l.length&&(i.data.colors=l),0<f.length&&(i.data.uvs=[f]),i.data.faces=s,i},clone:function(){return(new z).copy(this)},copy:function(e){var t,n,r;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingSphere=this.boundingBox=null,this.name=e.name;var i=e.vertices,o=0;for(t=i.length;o<t;o++)this.vertices.push(i[o].clone());for(i=e.colors,o=0,t=i.length;o<t;o++)this.colors.push(i[o].clone());for(i=e.faces,o=0,t=i.length;o<t;o++)this.faces.push(i[o].clone());for(o=0,t=e.faceVertexUvs.length;o<t;o++){var a=e.faceVertexUvs[o];for(void 0===this.faceVertexUvs[o]&&(this.faceVertexUvs[o]=[]),i=0,n=a.length;i<n;i++){var s=a[i],c=[],u=0;for(r=s.length;u<r;u++)c.push(s[u].clone());this.faceVertexUvs[o].push(c)}}for(u=e.morphTargets,o=0,t=u.length;o<t;o++){if(r={},r.name=u[o].name,void 0!==u[o].vertices)for(r.vertices=[],i=0,n=u[o].vertices.length;i<n;i++)r.vertices.push(u[o].vertices[i].clone());if(void 0!==u[o].normals)for(r.normals=[],i=0,n=u[o].normals.length;i<n;i++)r.normals.push(u[o].normals[i].clone());this.morphTargets.push(r)}for(u=e.morphNormals,o=0,t=u.length;o<t;o++){if(r={},void 0!==u[o].vertexNormals)for(r.vertexNormals=[],i=0,n=u[o].vertexNormals.length;i<n;i++)a=u[o].vertexNormals[i],s={},s.a=a.a.clone(),s.b=a.b.clone(),s.c=a.c.clone(),r.vertexNormals.push(s);if(void 0!==u[o].faceNormals)for(r.faceNormals=[],i=0,n=u[o].faceNormals.length;i<n;i++)r.faceNormals.push(u[o].faceNormals[i].clone());this.morphNormals.push(r)}for(i=e.skinWeights,o=0,t=i.length;o<t;o++)this.skinWeights.push(i[o].clone());for(i=e.skinIndices,o=0,t=i.length;o<t;o++)this.skinIndices.push(i[o].clone());for(i=e.lineDistances,o=0,t=i.length;o<t;o++)this.lineDistances.push(i[o]);return o=e.boundingBox,null!==o&&(this.boundingBox=o.clone()),o=e.boundingSphere,null!==o&&(this.boundingSphere=o.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var Ls=function(e){function t(t,n,r,i,o,a){e.call(this),this.type="BoxGeometry",this.parameters={width:t,height:n,depth:r,widthSegments:i,heightSegments:o,depthSegments:a},this.fromBufferGeometry(new Ds(t,n,r,i,o,a)),this.mergeVertices()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t}(z),Ds=function(e){function t(t,n,r,i,o,a){function s(e,t,n,r,i,o,a,s,v,g,y){var b=o/v,w=a/g,E=o/2,x=a/2,_=s/2;a=v+1;var T,A,S=g+1,M=o=0,O=new u;for(A=0;A<S;A++){var R=A*w-x;for(T=0;T<a;T++)O[e]=(T*b-E)*r,O[t]=R*i,O[n]=_,h.push(O.x,O.y,O.z),O[e]=0,O[t]=0,O[n]=0<s?1:-1,f.push(O.x,O.y,O.z),d.push(T/v),d.push(1-A/g),o+=1}for(A=0;A<g;A++)for(T=0;T<v;T++)e=p+T+a*(A+1),t=p+(T+1)+a*(A+1),n=p+(T+1)+a*A,l.push(p+T+a*A,e,n),l.push(e,t,n),M+=6;c.addGroup(m,M,y),m+=M,p+=o}e.call(this),this.type="BoxBufferGeometry",this.parameters={width:t,height:n,depth:r,widthSegments:i,heightSegments:o,depthSegments:a};var c=this;t=t||1,n=n||1,r=r||1,i=Math.floor(i)||1,o=Math.floor(o)||1,a=Math.floor(a)||1;var l=[],h=[],f=[],d=[],p=0,m=0;s("z","y","x",-1,-1,r,n,t,a,o,0),s("z","y","x",1,-1,r,n,-t,a,o,1),s("x","z","y",1,1,t,r,n,i,a,2),s("x","z","y",1,-1,t,r,-n,i,a,3),s("x","y","z",1,-1,t,n,r,i,o,4),s("x","y","z",-1,-1,t,n,-r,i,o,5),this.setIndex(l),this.setAttribute("position",new B(h,3)),this.setAttribute("normal",new B(f,3)),this.setAttribute("uv",new B(d,2))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t}(H),Ps={clone:W,merge:q};Y.prototype=Object.create(S.prototype),Y.prototype.constructor=Y,Y.prototype.isShaderMaterial=!0,Y.prototype.copy=function(e){return S.prototype.copy.call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=W(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=e.extensions,this},Y.prototype.toJSON=function(e){var t=S.prototype.toJSON.call(this,e);for(var n in t.uniforms={},this.uniforms){var r=this.uniforms[n].value;t.uniforms[n]=r&&r.isTexture?{type:"t",value:r.toJSON(e).uuid}:r&&r.isColor?{type:"c",value:r.getHex()}:r&&r.isVector2?{type:"v2",value:r.toArray()}:r&&r.isVector3?{type:"v3",value:r.toArray()}:r&&r.isVector4?{type:"v4",value:r.toArray()}:r&&r.isMatrix3?{type:"m3",value:r.toArray()}:r&&r.isMatrix4?{type:"m4",value:r.toArray()}:{value:r}}for(var i in 0<Object.keys(this.defines).length&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,e={},this.extensions)!0===this.extensions[i]&&(e[i]=!0);return 0<Object.keys(e).length&&(t.extensions=e),t},X.prototype=Object.assign(Object.create(d.prototype),{constructor:X,isCamera:!0,copy:function(e,t){return d.prototype.copy.call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this},getWorldDirection:function(e){void 0===e&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),e=new u),this.updateMatrixWorld(!0);var t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()},updateMatrixWorld:function(e){d.prototype.updateMatrixWorld.call(this,e),this.matrixWorldInverse.getInverse(this.matrixWorld)},updateWorldMatrix:function(e,t){d.prototype.updateWorldMatrix.call(this,e,t),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}}),Q.prototype=Object.assign(Object.create(X.prototype),{constructor:Q,isPerspectiveCamera:!0,copy:function(e,t){return X.prototype.copy.call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this},setFocalLength:function(e){e=.5*this.getFilmHeight()/e,this.fov=2*Wo.RAD2DEG*Math.atan(e),this.updateProjectionMatrix()},getFocalLength:function(){var e=Math.tan(.5*Wo.DEG2RAD*this.fov);return.5*this.getFilmHeight()/e},getEffectiveFOV:function(){return 2*Wo.RAD2DEG*Math.atan(Math.tan(.5*Wo.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(e,t,n,r,i,o){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=this.near,t=e*Math.tan(.5*Wo.DEG2RAD*this.fov)/this.zoom,n=2*t,r=this.aspect*n,i=-.5*r,o=this.view;if(null!==this.view&&this.view.enabled){var a=o.fullWidth,s=o.fullHeight;i+=o.offsetX*r/a,t-=o.offsetY*n/s,r*=o.width/a,n*=o.height/s}o=this.filmOffset,0!==o&&(i+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,t,t-n,e,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(e){return e=d.prototype.toJSON.call(this,e),e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}),K.prototype=Object.create(d.prototype),K.prototype.constructor=K,J.prototype=Object.create(a.prototype),J.prototype.constructor=J,J.prototype.isWebGLCubeRenderTarget=!0,J.prototype.fromEquirectangularTexture=function(e,t){this.texture.type=t.type,this.texture.format=t.format,this.texture.encoding=t.encoding;var n=new p,r=new Y({type:"CubemapFromEquirect",uniforms:W({tEquirect:{value:null}}),vertexShader:"varying vec3 vWorldDirection;\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",fragmentShader:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV;\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n}",side:1,blending:0});return r.uniforms.tEquirect.value=t,t=new j(new Ds(5,5,5),r),n.add(t),r=new K(1,10,1),r.renderTarget=this,r.renderTarget.texture.name="CubeCameraTexture",r.update(e,n),t.geometry.dispose(),t.material.dispose(),this},Z.prototype=Object.create(i.prototype),Z.prototype.constructor=Z,Z.prototype.isDataTexture=!0;var Ns=new g,Bs=new u;Object.assign($.prototype,{set:function(e,t,n,r,i,o){var a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(n),a[3].copy(r),a[4].copy(i),a[5].copy(o),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){for(var t=this.planes,n=0;6>n;n++)t[n].copy(e.planes[n]);return this},setFromProjectionMatrix:function(e){var t=this.planes,n=e.elements;e=n[0];var r=n[1],i=n[2],o=n[3],a=n[4],s=n[5],c=n[6],u=n[7],l=n[8],h=n[9],f=n[10],d=n[11],p=n[12],m=n[13],v=n[14];return n=n[15],t[0].setComponents(o-e,u-a,d-l,n-p).normalize(),t[1].setComponents(o+e,u+a,d+l,n+p).normalize(),t[2].setComponents(o+r,u+s,d+h,n+m).normalize(),t[3].setComponents(o-r,u-s,d-h,n-m).normalize(),t[4].setComponents(o-i,u-c,d-f,n-v).normalize(),t[5].setComponents(o+i,u+c,d+f,n+v).normalize(),this},intersectsObject:function(e){var t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),Ns.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(Ns)},intersectsSprite:function(e){return Ns.center.set(0,0,0),Ns.radius=.7071067811865476,Ns.applyMatrix4(e.matrixWorld),this.intersectsSphere(Ns)},intersectsSphere:function(e){var t=this.planes,n=e.center;e=-e.radius;for(var r=0;6>r;r++)if(t[r].distanceToPoint(n)<e)return!1;return!0},intersectsBox:function(e){for(var t=this.planes,n=0;6>n;n++){var r=t[n];if(Bs.x=0<r.normal.x?e.max.x:e.min.x,Bs.y=0<r.normal.y?e.max.y:e.min.y,Bs.z=0<r.normal.z?e.max.z:e.min.z,0>r.distanceToPoint(Bs))return!1}return!0},containsPoint:function(e){for(var t=this.planes,n=0;6>n;n++)if(0>t[n].distanceToPoint(e))return!1;return!0}});var ks={common:{diffuse:{value:new E(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new r},uv2Transform:{value:new r},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new n(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new E(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new E(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new r}},sprite:{diffuse:{value:new E(15658734)},opacity:{value:1},center:{value:new n(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new r}}};ne.prototype=Object.create(z.prototype),ne.prototype.constructor=ne,re.prototype=Object.create(H.prototype),re.prototype.constructor=re;var Fs={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\n\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\n\treturn Fr * fresnel + F0;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\n\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\treturn specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie(float roughness, float NoH) {\n\tfloat invAlpha  = 1.0 / roughness;\n\tfloat cos2h = NoH * NoH;\n\tfloat sin2h = max(1.0 - cos2h, 0.0078125);\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\n}\nfloat V_Neubelt(float NoV, float NoL) {\n\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\n}\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 H = normalize( V + L );\n\tfloat dotNH = saturate( dot( N, H ) );\n\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( STANDARD ) && ! defined( PHONG ) && ! defined( MATCAP )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( STANDARD ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvarying vec3 vViewPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( STANDARD ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n  return m[ 2 ][ 3 ] == - 1.0;\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_maxMipLevel 8.0\n#define cubeUV_minMipLevel 4.0\n#define cubeUV_maxTileSize 256.0\n#define cubeUV_minTileSize 16.0\nfloat getFace(vec3 direction) {\n    vec3 absDirection = abs(direction);\n    float face = -1.0;\n    if (absDirection.x > absDirection.z) {\n      if (absDirection.x > absDirection.y)\n        face = direction.x > 0.0 ? 0.0 : 3.0;\n      else\n        face = direction.y > 0.0 ? 1.0 : 4.0;\n    } else {\n      if (absDirection.z > absDirection.y)\n        face = direction.z > 0.0 ? 2.0 : 5.0;\n      else\n        face = direction.y > 0.0 ? 1.0 : 4.0;\n    }\n    return face;\n}\nvec2 getUV(vec3 direction, float face) {\n    vec2 uv;\n    if (face == 0.0) {\n      uv = vec2(-direction.z, direction.y) / abs(direction.x);\n    } else if (face == 1.0) {\n      uv = vec2(direction.x, -direction.z) / abs(direction.y);\n    } else if (face == 2.0) {\n      uv = direction.xy / abs(direction.z);\n    } else if (face == 3.0) {\n      uv = vec2(direction.z, direction.y) / abs(direction.x);\n    } else if (face == 4.0) {\n      uv = direction.xz / abs(direction.y);\n    } else {\n      uv = vec2(-direction.x, direction.y) / abs(direction.z);\n    }\n    return 0.5 * (uv + 1.0);\n}\nvec3 bilinearCubeUV(sampler2D envMap, vec3 direction, float mipInt) {\n  float face = getFace(direction);\n  float filterInt = max(cubeUV_minMipLevel - mipInt, 0.0);\n  mipInt = max(mipInt, cubeUV_minMipLevel);\n  float faceSize = exp2(mipInt);\n  float texelSize = 1.0 / (3.0 * cubeUV_maxTileSize);\n  vec2 uv = getUV(direction, face) * (faceSize - 1.0);\n  vec2 f = fract(uv);\n  uv += 0.5 - f;\n  if (face > 2.0) {\n    uv.y += faceSize;\n    face -= 3.0;\n  }\n  uv.x += face * faceSize;\n  if(mipInt < cubeUV_maxMipLevel){\n    uv.y += 2.0 * cubeUV_maxTileSize;\n  }\n  uv.y += filterInt * 2.0 * cubeUV_minTileSize;\n  uv.x += 3.0 * max(0.0, cubeUV_maxTileSize - 2.0 * faceSize);\n  uv *= texelSize;\n  vec3 tl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  uv.x += texelSize;\n  vec3 tr = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  uv.y += texelSize;\n  vec3 br = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  uv.x -= texelSize;\n  vec3 bl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  vec3 tm = mix(tl, tr, f.x);\n  vec3 bm = mix(bl, br, f.x);\n  return mix(tm, bm, f.y);\n}\n#define r0 1.0\n#define v0 0.339\n#define m0 -2.0\n#define r1 0.8\n#define v1 0.276\n#define m1 -1.0\n#define r4 0.4\n#define v4 0.046\n#define m4 2.0\n#define r5 0.305\n#define v5 0.016\n#define m5 3.0\n#define r6 0.21\n#define v6 0.0038\n#define m6 4.0\nfloat roughnessToMip(float roughness) {\n  float mip = 0.0;\n  if (roughness >= r1) {\n    mip = (r0 - roughness) * (m1 - m0) / (r0 - r1) + m0;\n  } else if (roughness >= r4) {\n    mip = (r1 - roughness) * (m4 - m1) / (r1 - r4) + m1;\n  } else if (roughness >= r5) {\n    mip = (r4 - roughness) * (m5 - m4) / (r4 - r5) + m4;\n  } else if (roughness >= r6) {\n    mip = (r5 - roughness) * (m6 - m5) / (r5 - r6) + m5;\n  } else {\n    mip = -2.0 * log2(1.16 * roughness);  }\n  return mip;\n}\nvec4 textureCubeUV(sampler2D envMap, vec3 sampleDir, float roughness) {\n  float mip = clamp(roughnessToMip(roughness), m0, cubeUV_maxMipLevel);\n  float mipF = fract(mip);\n  float mipInt = floor(mip);\n  vec3 color0 = bilinearCubeUV(envMap, sampleDir, mipInt);\n  if (mipF == 0.0) {\n    return vec4(color0, 1.0);\n  } else {\n    vec3 color1 = bilinearCubeUV(envMap, sampleDir, mipInt + 1.0);\n    return vec4(mix(color0, color1, mipF), 1.0);\n  }\n}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\ttransformedNormal = mat3( instanceMatrix ) * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\t\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t}  else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\treflectVec = normalize( reflectVec );\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifndef ENVMAP_TYPE_CUBE_UV\n\t\tenvColor = envMapTexelToLinear( envColor );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t  vec3 reflectVec = reflect( -viewDir, normal );\n\t\t  reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t#else\n\t\t  vec3 reflectVec = refract( -viewDir, normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) { \n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tfogDepth = -mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn texture2D( gradientMap, coord ).rgb;\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\treflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct ToonMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;\nmaterial.specularRoughness = min( material.specularRoughness, 1.0 );\n#ifdef REFLECTIVITY\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#endif\n#ifdef CLEARCOAT\n\tmaterial.clearcoat = saturate( clearcoat );\tmaterial.clearcoatRoughness = max( clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheen;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n#ifdef CLEARCOAT\n\tfloat clearcoat;\n\tfloat clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tvec3 sheenColor;\n#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = ccDotNL * directLight.color;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tccIrradiance *= PI;\n\t\t#endif\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\n\t\t\tmaterial.specularRoughness,\n\t\t\tdirectLight.direction,\n\t\t\tgeometry,\n\t\t\tmaterial.sheenColor\n\t\t);\n\t#else\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);\n\t#endif\n\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t\tfloat ccDotNL = ccDotNV;\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\tfloat clearcoatInv = 1.0 - clearcoatDHR;\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tdirectLight.color *= all( bvec3( pointLight.shadow, directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tdirectLight.color *= all( bvec3( spotLight.shadow, directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectLight.color *= all( bvec3( directionalLight.shadow, directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\n\t#ifdef CLEARCOAT\n\t\tclearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",normal_fragment_begin:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\tbitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal, mapN );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\n\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\tvec3 N = normalize( surf_norm );\n\t\tmat3 tsn = mat3( S, T, N );\n\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN );\n\t#endif\n#endif",clearcoat_normalmap_pars_fragment:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= all( bvec2( directionalLight.shadow, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= all( bvec2( spotLight.shadow, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= all( bvec2( pointLight.shadow, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( ( color * ( 2.51 * color + 0.03 ) ) / ( color * ( 2.43 * color + 0.59 ) + 0.14 ) );\n}",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV;\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define REFLECTIVITY\n\t#define CLEARCOAT\n\t#define TRANSPARENCY\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef TRANSPARENCY\n\tuniform float transparency;\n#endif\n#ifdef REFLECTIVITY\n\tuniform float reflectivity;\n#endif\n#ifdef CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheen;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#ifdef TRANSPARENCY\n\t\tdiffuseColor.a *= saturate( 1. - transparency + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) );\n\t#endif\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",shadow_vert:"#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}"},Us={basic:{uniforms:q([ks.common,ks.specularmap,ks.envmap,ks.aomap,ks.lightmap,ks.fog]),vertexShader:Fs.meshbasic_vert,fragmentShader:Fs.meshbasic_frag},lambert:{uniforms:q([ks.common,ks.specularmap,ks.envmap,ks.aomap,ks.lightmap,ks.emissivemap,ks.fog,ks.lights,{emissive:{value:new E(0)}}]),vertexShader:Fs.meshlambert_vert,fragmentShader:Fs.meshlambert_frag},phong:{uniforms:q([ks.common,ks.specularmap,ks.envmap,ks.aomap,ks.lightmap,ks.emissivemap,ks.bumpmap,ks.normalmap,ks.displacementmap,ks.fog,ks.lights,{emissive:{value:new E(0)},specular:{value:new E(1118481)},shininess:{value:30}}]),vertexShader:Fs.meshphong_vert,fragmentShader:Fs.meshphong_frag},standard:{uniforms:q([ks.common,ks.envmap,ks.aomap,ks.lightmap,ks.emissivemap,ks.bumpmap,ks.normalmap,ks.displacementmap,ks.roughnessmap,ks.metalnessmap,ks.fog,ks.lights,{emissive:{value:new E(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:Fs.meshphysical_vert,fragmentShader:Fs.meshphysical_frag},toon:{uniforms:q([ks.common,ks.specularmap,ks.aomap,ks.lightmap,ks.emissivemap,ks.bumpmap,ks.normalmap,ks.displacementmap,ks.gradientmap,ks.fog,ks.lights,{emissive:{value:new E(0)},specular:{value:new E(1118481)},shininess:{value:30}}]),vertexShader:Fs.meshtoon_vert,fragmentShader:Fs.meshtoon_frag},matcap:{uniforms:q([ks.common,ks.bumpmap,ks.normalmap,ks.displacementmap,ks.fog,{matcap:{value:null}}]),vertexShader:Fs.meshmatcap_vert,fragmentShader:Fs.meshmatcap_frag},points:{uniforms:q([ks.points,ks.fog]),vertexShader:Fs.points_vert,fragmentShader:Fs.points_frag},dashed:{uniforms:q([ks.common,ks.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Fs.linedashed_vert,fragmentShader:Fs.linedashed_frag},depth:{uniforms:q([ks.common,ks.displacementmap]),vertexShader:Fs.depth_vert,fragmentShader:Fs.depth_frag},normal:{uniforms:q([ks.common,ks.bumpmap,ks.normalmap,ks.displacementmap,{opacity:{value:1}}]),vertexShader:Fs.normal_vert,fragmentShader:Fs.normal_frag},sprite:{uniforms:q([ks.sprite,ks.fog]),vertexShader:Fs.sprite_vert,fragmentShader:Fs.sprite_frag},background:{uniforms:{uvTransform:{value:new r},t2D:{value:null}},vertexShader:Fs.background_vert,fragmentShader:Fs.background_frag},cube:{uniforms:q([ks.envmap,{opacity:{value:1}}]),vertexShader:Fs.cube_vert,fragmentShader:Fs.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Fs.equirect_vert,fragmentShader:Fs.equirect_frag},distanceRGBA:{uniforms:q([ks.common,ks.displacementmap,{referencePosition:{value:new u},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Fs.distanceRGBA_vert,fragmentShader:Fs.distanceRGBA_frag},shadow:{uniforms:q([ks.lights,ks.fog,{color:{value:new E(0)},opacity:{value:1}}]),vertexShader:Fs.shadow_vert,fragmentShader:Fs.shadow_frag}};Us.physical={uniforms:q([Us.standard.uniforms,{transparency:{value:0},clearcoat:{value:0},clearcoatRoughness:{value:0},sheen:{value:new E(0)},clearcoatNormalScale:{value:new n(1,1)},clearcoatNormalMap:{value:null}}]),vertexShader:Fs.meshphysical_vert,fragmentShader:Fs.meshphysical_frag},me.prototype=Object.create(i.prototype),me.prototype.constructor=me,me.prototype.isCubeTexture=!0,Object.defineProperty(me.prototype,"images",{get:function(){return this.image},set:function(e){this.image=e}}),ve.prototype=Object.create(i.prototype),ve.prototype.constructor=ve,ve.prototype.isDataTexture2DArray=!0,ge.prototype=Object.create(i.prototype),ge.prototype.constructor=ge,ge.prototype.isDataTexture3D=!0;var Hs=new i,js=new ve,Gs=new ge,Vs=new me,zs=[],Ws=[],qs=new Float32Array(16),Ys=new Float32Array(9),Xs=new Float32Array(4);et.prototype.updateCache=function(e){var t=this.cache;e instanceof Float32Array&&t.length!==e.length&&(this.cache=new Float32Array(e.length)),we(t,e)},tt.prototype.setValue=function(e,t,n){for(var r=this.seq,i=0,o=r.length;i!==o;++i){var a=r[i];a.setValue(e,t[a.id],n)}};var Qs=/([\w\d_]+)(\])?(\[|\.)?/g;nt.prototype.setValue=function(e,t,n,r){t=this.map[t],void 0!==t&&t.setValue(e,n,r)},nt.prototype.setOptional=function(e,t,n){t=t[n],void 0!==t&&this.setValue(e,n,t)},nt.upload=function(e,t,n,r){for(var i=0,o=t.length;i!==o;++i){var a=t[i],s=n[a.id];!1!==s.needsUpdate&&a.setValue(e,s.value,r)}},nt.seqWithValue=function(e,t){for(var n=[],r=0,i=e.length;r!==i;++r){var o=e[r];o.id in t&&n.push(o)}return n};var Ks=0,Js=/^[ \t]*#include +<([\w\d./]+)>/gm,Zs=/#pragma unroll_loop[\s]+?for \( int i = (\d+); i < (\d+); i \+\+ \) \{([\s\S]+?)(?=\})\}/g,$s=0;Lt.prototype=Object.create(S.prototype),Lt.prototype.constructor=Lt,Lt.prototype.isMeshDepthMaterial=!0,Lt.prototype.copy=function(e){return S.prototype.copy.call(this,e),this.depthPacking=e.depthPacking,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this},Dt.prototype=Object.create(S.prototype),Dt.prototype.constructor=Dt,Dt.prototype.isMeshDistanceMaterial=!0,Dt.prototype.copy=function(e){return S.prototype.copy.call(this,e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this},Ft.prototype=Object.assign(Object.create(a.prototype),{constructor:Ft,isWebGLMultiviewRenderTarget:!0,copy:function(e){return a.prototype.copy.call(this,e),this.numViews=e.numViews,this},setNumViews:function(e){return this.numViews!==e&&(this.numViews=e,this.dispose()),this}}),Ht.prototype=Object.assign(Object.create(Q.prototype),{constructor:Ht,isArrayCamera:!0}),jt.prototype=Object.assign(Object.create(d.prototype),{constructor:jt,isGroup:!0}),Object.assign(Gt.prototype,t.prototype),Object.assign(zt.prototype,{isFogExp2:!0,clone:function(){return new zt(this.color,this.density)},toJSON:function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}),Object.assign(Wt.prototype,{isFog:!0,clone:function(){return new Wt(this.color,this.near,this.far)},toJSON:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}),Object.defineProperty(qt.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(qt.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setUsage:function(e){return this.usage=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this},copyAt:function(e,t,n){e*=this.stride,n*=t.stride;for(var r=0,i=this.stride;r<i;r++)this.array[e+r]=t.array[n+r];return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(e){return this.onUploadCallback=e,this}});var ec=new u;Object.defineProperties(Yt.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),Object.assign(Yt.prototype,{isInterleavedBufferAttribute:!0,applyMatrix4:function(e){for(var t=0,n=this.data.count;t<n;t++)ec.x=this.getX(t),ec.y=this.getY(t),ec.z=this.getZ(t),ec.applyMatrix4(e),this.setXYZ(t,ec.x,ec.y,ec.z);return this},setX:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this},setY:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this},setZ:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this},setW:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(e,t,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this},setXYZ:function(e,t,n,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this},setXYZW:function(e,t,n,r,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=i,this}}),Xt.prototype=Object.create(S.prototype),Xt.prototype.constructor=Xt,Xt.prototype.isSpriteMaterial=!0,Xt.prototype.copy=function(e){return S.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this};var tc,nc=new u,rc=new u,ic=new u,oc=new n,ac=new n,sc=new l,cc=new u,uc=new u,lc=new u,hc=new n,fc=new n,dc=new n;Qt.prototype=Object.assign(Object.create(d.prototype),{constructor:Qt,isSprite:!0,raycast:function(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),rc.setFromMatrixScale(this.matrixWorld),sc.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),ic.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&rc.multiplyScalar(-ic.z);var r=this.material.rotation;if(0!==r)var i=Math.cos(r),o=Math.sin(r);r=this.center,Kt(cc.set(-.5,-.5,0),ic,r,rc,o,i),Kt(uc.set(.5,-.5,0),ic,r,rc,o,i),Kt(lc.set(.5,.5,0),ic,r,rc,o,i),hc.set(0,0),fc.set(1,0),dc.set(1,1);var a=e.ray.intersectTriangle(cc,uc,lc,!1,nc);null===a&&(Kt(uc.set(-.5,.5,0),ic,r,rc,o,i),fc.set(0,1),a=e.ray.intersectTriangle(cc,lc,uc,!1,nc),null===a)||(o=e.ray.origin.distanceTo(nc),o<e.near||o>e.far||t.push({distance:o,point:nc.clone(),uv:w.getUV(nc,cc,uc,lc,hc,fc,dc,new n),face:null,object:this}))},clone:function(){return new this.constructor(this.material).copy(this)},copy:function(e){return d.prototype.copy.call(this,e),void 0!==e.center&&this.center.copy(e.center),this}});var pc=new u,mc=new u;Jt.prototype=Object.assign(Object.create(d.prototype),{constructor:Jt,isLOD:!0,copy:function(e){d.prototype.copy.call(this,e,!1);for(var t=e.levels,n=0,r=t.length;n<r;n++){var i=t[n];this.addLevel(i.object.clone(),i.distance)}return this.autoUpdate=e.autoUpdate,this},addLevel:function(e,t){void 0===t&&(t=0),t=Math.abs(t);for(var n=this.levels,r=0;r<n.length&&!(t<n[r].distance);r++);return n.splice(r,0,{distance:t,object:e}),this.add(e),this},getObjectForDistance:function(e){var t=this.levels;if(0<t.length){for(var n=1,r=t.length;n<r&&!(e<t[n].distance);n++);return t[n-1].object}return null},raycast:function(e,t){if(0<this.levels.length){pc.setFromMatrixPosition(this.matrixWorld);var n=e.ray.origin.distanceTo(pc);this.getObjectForDistance(n).raycast(e,t)}},update:function(e){var t=this.levels;if(1<t.length){pc.setFromMatrixPosition(e.matrixWorld),mc.setFromMatrixPosition(this.matrixWorld),e=pc.distanceTo(mc),t[0].object.visible=!0;for(var n=1,r=t.length;n<r;n++){if(!(e>=t[n].distance))break;t[n-1].object.visible=!1,t[n].object.visible=!0}for(;n<r;n++)t[n].object.visible=!1}},toJSON:function(e){e=d.prototype.toJSON.call(this,e),!1===this.autoUpdate&&(e.object.autoUpdate=!1),e.object.levels=[];for(var t=this.levels,n=0,r=t.length;n<r;n++){var i=t[n];e.object.levels.push({object:i.object.uuid,distance:i.distance})}return e}}),Zt.prototype=Object.assign(Object.create(j.prototype),{constructor:Zt,isSkinnedMesh:!0,bind:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.getInverse(t)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){for(var e=new o,t=this.geometry.attributes.skinWeight,n=0,r=t.count;n<r;n++){e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.w=t.getW(n);var i=1/e.manhattanLength();1/0!==i?e.multiplyScalar(i):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}},updateMatrixWorld:function(e){j.prototype.updateMatrixWorld.call(this,e),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var vc=new l,gc=new l;Object.assign($t.prototype,{calculateInverses:function(){this.boneInverses=[];for(var e=0,t=this.bones.length;e<t;e++){var n=new l;this.bones[e]&&n.getInverse(this.bones[e].matrixWorld),this.boneInverses.push(n)}},pose:function(){var e,t,n=0;for(t=this.bones.length;n<t;n++)(e=this.bones[n])&&e.matrixWorld.getInverse(this.boneInverses[n]);for(n=0,t=this.bones.length;n<t;n++)(e=this.bones[n])&&(e.parent&&e.parent.isBone?(e.matrix.getInverse(e.parent.matrixWorld),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))},update:function(){for(var e=this.bones,t=this.boneInverses,n=this.boneMatrices,r=this.boneTexture,i=0,o=e.length;i<o;i++)vc.multiplyMatrices(e[i]?e[i].matrixWorld:gc,t[i]),vc.toArray(n,16*i);void 0!==r&&(r.needsUpdate=!0)},clone:function(){return new $t(this.bones,this.boneInverses)},getBoneByName:function(e){for(var t=0,n=this.bones.length;t<n;t++){var r=this.bones[t];if(r.name===e)return r}}}),en.prototype=Object.assign(Object.create(d.prototype),{constructor:en,isBone:!0});var yc=new l,bc=new l,wc=[],Ec=new j;tn.prototype=Object.assign(Object.create(j.prototype),{constructor:tn,isInstancedMesh:!0,getMatrixAt:function(e,t){t.fromArray(this.instanceMatrix.array,16*e)},raycast:function(e,t){var n=this.matrixWorld,r=this.count;if(Ec.geometry=this.geometry,Ec.material=this.material,void 0!==Ec.material)for(var i=0;i<r;i++)this.getMatrixAt(i,yc),bc.multiplyMatrices(n,yc),Ec.matrixWorld=bc,Ec.raycast(e,wc),0<wc.length&&(wc[0].instanceId=i,wc[0].object=this,t.push(wc[0]),wc.length=0)},setMatrixAt:function(e,t){t.toArray(this.instanceMatrix.array,16*e)},updateMorphTargets:function(){}}),nn.prototype=Object.create(S.prototype),nn.prototype.constructor=nn,nn.prototype.isLineBasicMaterial=!0,nn.prototype.copy=function(e){return S.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this};var xc=new u,_c=new u,Tc=new l,Ac=new y,Sc=new g;rn.prototype=Object.assign(Object.create(d.prototype),{constructor:rn,isLine:!0,computeLineDistances:function(){var e=this.geometry;if(e.isBufferGeometry)if(null===e.index){for(var t=e.attributes.position,n=[0],r=1,i=t.count;r<i;r++)xc.fromBufferAttribute(t,r-1),_c.fromBufferAttribute(t,r),n[r]=n[r-1],n[r]+=xc.distanceTo(_c);e.setAttribute("lineDistance",new B(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(e.isGeometry)for(t=e.vertices,n=e.lineDistances,n[0]=0,r=1,i=t.length;r<i;r++)n[r]=n[r-1],n[r]+=t[r-1].distanceTo(t[r]);return this},raycast:function(e,t){var n=e.linePrecision,r=this.geometry,i=this.matrixWorld;if(null===r.boundingSphere&&r.computeBoundingSphere(),Sc.copy(r.boundingSphere),Sc.applyMatrix4(i),Sc.radius+=n,!1!==e.ray.intersectsSphere(Sc)){Tc.getInverse(i),Ac.copy(e.ray).applyMatrix4(Tc),n/=(this.scale.x+this.scale.y+this.scale.z)/3,n*=n;var o=new u,a=new u;i=new u;var s=new u,c=this&&this.isLineSegments?2:1;if(r.isBufferGeometry){var l=r.index,h=r.attributes.position.array;if(null!==l){l=l.array,r=0;for(var f=l.length-1;r<f;r+=c){var d=l[r+1];o.fromArray(h,3*l[r]),a.fromArray(h,3*d),d=Ac.distanceSqToSegment(o,a,s,i),d>n||(s.applyMatrix4(this.matrixWorld),d=e.ray.origin.distanceTo(s),d<e.near||d>e.far||t.push({distance:d,point:i.clone().applyMatrix4(this.matrixWorld),index:r,face:null,faceIndex:null,object:this}))}}else for(r=0,f=h.length/3-1;r<f;r+=c)o.fromArray(h,3*r),a.fromArray(h,3*r+3),d=Ac.distanceSqToSegment(o,a,s,i),d>n||(s.applyMatrix4(this.matrixWorld),d=e.ray.origin.distanceTo(s),d<e.near||d>e.far||t.push({distance:d,point:i.clone().applyMatrix4(this.matrixWorld),index:r,face:null,faceIndex:null,object:this}))}else if(r.isGeometry)for(o=r.vertices,a=o.length,r=0;r<a-1;r+=c)d=Ac.distanceSqToSegment(o[r],o[r+1],s,i),d>n||(s.applyMatrix4(this.matrixWorld),d=e.ray.origin.distanceTo(s),d<e.near||d>e.far||t.push({distance:d,point:i.clone().applyMatrix4(this.matrixWorld),index:r,face:null,faceIndex:null,object:this}))}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var Mc=new u,Oc=new u;on.prototype=Object.assign(Object.create(rn.prototype),{constructor:on,isLineSegments:!0,computeLineDistances:function(){var e=this.geometry;if(e.isBufferGeometry)if(null===e.index){for(var t=e.attributes.position,n=[],r=0,i=t.count;r<i;r+=2)Mc.fromBufferAttribute(t,r),Oc.fromBufferAttribute(t,r+1),n[r]=0===r?0:n[r-1],n[r+1]=n[r]+Mc.distanceTo(Oc);e.setAttribute("lineDistance",new B(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(e.isGeometry)for(t=e.vertices,n=e.lineDistances,r=0,i=t.length;r<i;r+=2)Mc.copy(t[r]),Oc.copy(t[r+1]),n[r]=0===r?0:n[r-1],n[r+1]=n[r]+Mc.distanceTo(Oc);return this}}),an.prototype=Object.assign(Object.create(rn.prototype),{constructor:an,isLineLoop:!0}),sn.prototype=Object.create(S.prototype),sn.prototype.constructor=sn,sn.prototype.isPointsMaterial=!0,sn.prototype.copy=function(e){return S.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.morphTargets=e.morphTargets,this};var Rc=new l,Cc=new y,Ic=new g,Lc=new u;cn.prototype=Object.assign(Object.create(d.prototype),{constructor:cn,isPoints:!0,raycast:function(e,t){var n=this.geometry,r=this.matrixWorld,i=e.params.Points.threshold;if(null===n.boundingSphere&&n.computeBoundingSphere(),Ic.copy(n.boundingSphere),Ic.applyMatrix4(r),Ic.radius+=i,!1!==e.ray.intersectsSphere(Ic))if(Rc.getInverse(r),Cc.copy(e.ray).applyMatrix4(Rc),i/=(this.scale.x+this.scale.y+this.scale.z)/3,i*=i,n.isBufferGeometry){var o=n.index;if(n=n.attributes.position.array,null!==o){var a=o.array;o=0;for(var s=a.length;o<s;o++){var c=a[o];Lc.fromArray(n,3*c),un(Lc,c,i,r,e,t,this)}}else for(o=0,a=n.length/3;o<a;o++)Lc.fromArray(n,3*o),un(Lc,o,i,r,e,t,this)}else for(n=n.vertices,o=0,a=n.length;o<a;o++)un(n[o],o,i,r,e,t,this)},updateMorphTargets:function(){var e=this.geometry;if(e.isBufferGeometry){e=e.morphAttributes;var t=Object.keys(e);if(0<t.length){var n=e[t[0]];if(void 0!==n)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,t=n.length;e<t;e++){var r=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[r]=e}}}else e=e.morphTargets,void 0!==e&&0<e.length&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),ln.prototype=Object.assign(Object.create(i.prototype),{constructor:ln,isVideoTexture:!0,update:function(){var e=this.image;e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),hn.prototype=Object.create(i.prototype),hn.prototype.constructor=hn,hn.prototype.isCompressedTexture=!0,fn.prototype=Object.create(i.prototype),fn.prototype.constructor=fn,fn.prototype.isCanvasTexture=!0,dn.prototype=Object.create(i.prototype),dn.prototype.constructor=dn,dn.prototype.isDepthTexture=!0,pn.prototype=Object.create(H.prototype),pn.prototype.constructor=pn,mn.prototype=Object.create(z.prototype),mn.prototype.constructor=mn,vn.prototype=Object.create(H.prototype),vn.prototype.constructor=vn,gn.prototype=Object.create(z.prototype),gn.prototype.constructor=gn,yn.prototype=Object.create(H.prototype),yn.prototype.constructor=yn,bn.prototype=Object.create(z.prototype),bn.prototype.constructor=bn,wn.prototype=Object.create(yn.prototype),wn.prototype.constructor=wn,En.prototype=Object.create(z.prototype),En.prototype.constructor=En,xn.prototype=Object.create(yn.prototype),xn.prototype.constructor=xn,_n.prototype=Object.create(z.prototype),_n.prototype.constructor=_n,Tn.prototype=Object.create(yn.prototype),Tn.prototype.constructor=Tn,An.prototype=Object.create(z.prototype),An.prototype.constructor=An,Sn.prototype=Object.create(yn.prototype),Sn.prototype.constructor=Sn,Mn.prototype=Object.create(z.prototype),Mn.prototype.constructor=Mn,On.prototype=Object.create(H.prototype),On.prototype.constructor=On,On.prototype.toJSON=function(){var e=H.prototype.toJSON.call(this);return e.path=this.parameters.path.toJSON(),e},Rn.prototype=Object.create(z.prototype),Rn.prototype.constructor=Rn,Cn.prototype=Object.create(H.prototype),Cn.prototype.constructor=Cn,In.prototype=Object.create(z.prototype),In.prototype.constructor=In,Ln.prototype=Object.create(H.prototype),Ln.prototype.constructor=Ln;var Dc={triangulate:function(e,t,n){n=n||2;var r,i=t&&t.length,o=i?t[0]*n:e.length,a=Dn(e,0,o,n,!0),s=[];if(!a||a.next===a.prev)return s;if(i){var c,u=n;i=[];var l=0;for(c=t.length;l<c;l++){var h=t[l]*u,f=l<c-1?t[l+1]*u:e.length;h=Dn(e,h,f,u,!1),h===h.next&&(h.steiner=!0),i.push(Hn(h))}for(i.sort(kn),l=0;l<i.length;l++)t=i[l],u=a,(u=Fn(t,u))&&(t=qn(u,t),Pn(t,t.next)),a=Pn(a,a.next)}if(e.length>80*n){var d=r=e[0],p=i=e[1];for(u=n;u<o;u+=n)l=e[u],t=e[u+1],l<d&&(d=l),t<p&&(p=t),l>r&&(r=l),t>i&&(i=t);r=Math.max(r-d,i-p),r=0!==r?1/r:0}return Nn(a,s,n,d,p,r),s}},Pc={area:function(e){for(var t=e.length,n=0,r=t-1,i=0;i<t;r=i++)n+=e[r].x*e[i].y-e[i].x*e[r].y;return.5*n},isClockWise:function(e){return 0>Pc.area(e)},triangulateShape:function(e,t){var n=[],r=[],i=[];Kn(e),Jn(n,e);var o=e.length;for(t.forEach(Kn),e=0;e<t.length;e++)r.push(o),o+=t[e].length,Jn(n,t[e]);for(t=Dc.triangulate(n,r),e=0;e<t.length;e+=3)i.push(t.slice(e,e+3));return i}};Zn.prototype=Object.create(z.prototype),Zn.prototype.constructor=Zn,Zn.prototype.toJSON=function(){var e=z.prototype.toJSON.call(this);return er(this.parameters.shapes,this.parameters.options,e)},$n.prototype=Object.create(H.prototype),$n.prototype.constructor=$n,$n.prototype.toJSON=function(){var e=H.prototype.toJSON.call(this);return er(this.parameters.shapes,this.parameters.options,e)};var Nc={generateTopUV:function(e,t,r,i,o){e=t[3*i],i=t[3*i+1];var a=t[3*o];return o=t[3*o+1],[new n(t[3*r],t[3*r+1]),new n(e,i),new n(a,o)]},generateSideWallUV:function(e,t,r,i,o,a){e=t[3*r];var s=t[3*r+1];r=t[3*r+2];var c=t[3*i],u=t[3*i+1];i=t[3*i+2];var l=t[3*o],h=t[3*o+1];o=t[3*o+2];var f=t[3*a],d=t[3*a+1];return t=t[3*a+2],.01>Math.abs(s-u)?[new n(e,1-r),new n(c,1-i),new n(l,1-o),new n(f,1-t)]:[new n(s,1-r),new n(u,1-i),new n(h,1-o),new n(d,1-t)]}};tr.prototype=Object.create(z.prototype),tr.prototype.constructor=tr,nr.prototype=Object.create($n.prototype),nr.prototype.constructor=nr,rr.prototype=Object.create(z.prototype),rr.prototype.constructor=rr,ir.prototype=Object.create(H.prototype),ir.prototype.constructor=ir,or.prototype=Object.create(z.prototype),or.prototype.constructor=or,ar.prototype=Object.create(H.prototype),ar.prototype.constructor=ar,sr.prototype=Object.create(z.prototype),sr.prototype.constructor=sr,cr.prototype=Object.create(H.prototype),cr.prototype.constructor=cr,ur.prototype=Object.create(z.prototype),ur.prototype.constructor=ur,ur.prototype.toJSON=function(){var e=z.prototype.toJSON.call(this);return hr(this.parameters.shapes,e)},lr.prototype=Object.create(H.prototype),lr.prototype.constructor=lr,lr.prototype.toJSON=function(){var e=H.prototype.toJSON.call(this);return hr(this.parameters.shapes,e)},fr.prototype=Object.create(H.prototype),fr.prototype.constructor=fr,dr.prototype=Object.create(z.prototype),dr.prototype.constructor=dr,pr.prototype=Object.create(H.prototype),pr.prototype.constructor=pr,mr.prototype=Object.create(dr.prototype),mr.prototype.constructor=mr,vr.prototype=Object.create(pr.prototype),vr.prototype.constructor=vr,gr.prototype=Object.create(z.prototype),gr.prototype.constructor=gr,yr.prototype=Object.create(H.prototype),yr.prototype.constructor=yr;var Bc=Object.freeze({__proto__:null,WireframeGeometry:pn,ParametricGeometry:mn,ParametricBufferGeometry:vn,TetrahedronGeometry:bn,TetrahedronBufferGeometry:wn,OctahedronGeometry:En,OctahedronBufferGeometry:xn,IcosahedronGeometry:_n,IcosahedronBufferGeometry:Tn,DodecahedronGeometry:An,DodecahedronBufferGeometry:Sn,PolyhedronGeometry:gn,PolyhedronBufferGeometry:yn,TubeGeometry:Mn,TubeBufferGeometry:On,TorusKnotGeometry:Rn,TorusKnotBufferGeometry:Cn,TorusGeometry:In,TorusBufferGeometry:Ln,TextGeometry:tr,TextBufferGeometry:nr,SphereGeometry:rr,SphereBufferGeometry:ir,RingGeometry:or,RingBufferGeometry:ar,PlaneGeometry:ne,PlaneBufferGeometry:re,LatheGeometry:sr,LatheBufferGeometry:cr,ShapeGeometry:ur,ShapeBufferGeometry:lr,ExtrudeGeometry:Zn,ExtrudeBufferGeometry:$n,EdgesGeometry:fr,ConeGeometry:mr,ConeBufferGeometry:vr,CylinderGeometry:dr,CylinderBufferGeometry:pr,CircleGeometry:gr,CircleBufferGeometry:yr,BoxGeometry:Ls,BoxBufferGeometry:Ds});br.prototype=Object.create(S.prototype),br.prototype.constructor=br,br.prototype.isShadowMaterial=!0,br.prototype.copy=function(e){return S.prototype.copy.call(this,e),this.color.copy(e.color),this},wr.prototype=Object.create(Y.prototype),wr.prototype.constructor=wr,wr.prototype.isRawShaderMaterial=!0,Er.prototype=Object.create(S.prototype),Er.prototype.constructor=Er,Er.prototype.isMeshStandardMaterial=!0,Er.prototype.copy=function(e){return S.prototype.copy.call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},xr.prototype=Object.create(Er.prototype),xr.prototype.constructor=xr,xr.prototype.isMeshPhysicalMaterial=!0,xr.prototype.copy=function(e){return Er.prototype.copy.call(this,e),this.defines={STANDARD:"",PHYSICAL:""},this.reflectivity=e.reflectivity,this.clearcoat=e.clearcoat,this.clearcoatRoughness=e.clearcoatRoughness,this.sheen=e.sheen?(this.sheen||new E).copy(e.sheen):null,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.transparency=e.transparency,this},_r.prototype=Object.create(S.prototype),_r.prototype.constructor=_r,_r.prototype.isMeshPhongMaterial=!0,_r.prototype.copy=function(e){return S.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Tr.prototype=Object.create(S.prototype),Tr.prototype.constructor=Tr,Tr.prototype.isMeshToonMaterial=!0,Tr.prototype.copy=function(e){return S.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Ar.prototype=Object.create(S.prototype),Ar.prototype.constructor=Ar,Ar.prototype.isMeshNormalMaterial=!0,Ar.prototype.copy=function(e){return S.prototype.copy.call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Sr.prototype=Object.create(S.prototype),Sr.prototype.constructor=Sr,Sr.prototype.isMeshLambertMaterial=!0,Sr.prototype.copy=function(e){return S.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Mr.prototype=Object.create(S.prototype),Mr.prototype.constructor=Mr,Mr.prototype.isMeshMatcapMaterial=!0,Mr.prototype.copy=function(e){return S.prototype.copy.call(this,e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Or.prototype=Object.create(nn.prototype),Or.prototype.constructor=Or,Or.prototype.isLineDashedMaterial=!0,Or.prototype.copy=function(e){return nn.prototype.copy.call(this,e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this};var kc=Object.freeze({__proto__:null,ShadowMaterial:br,SpriteMaterial:Xt,RawShaderMaterial:wr,ShaderMaterial:Y,PointsMaterial:sn,MeshPhysicalMaterial:xr,MeshStandardMaterial:Er,MeshPhongMaterial:_r,MeshToonMaterial:Tr,MeshNormalMaterial:Ar,MeshLambertMaterial:Sr,MeshDepthMaterial:Lt,MeshDistanceMaterial:Dt,MeshBasicMaterial:M,MeshMatcapMaterial:Mr,LineDashedMaterial:Or,LineBasicMaterial:nn,Material:S}),Fc={arraySlice:function(e,t,n){return Fc.isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)},convertArray:function(e,t,n){return!e||!n&&e.constructor===t?e:"number"===typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){for(var t=e.length,n=Array(t),r=0;r!==t;++r)n[r]=r;return n.sort((function(t,n){return e[t]-e[n]})),n},sortedArray:function(e,t,n){for(var r=e.length,i=new e.constructor(r),o=0,a=0;a!==r;++o)for(var s=n[o]*t,c=0;c!==t;++c)i[a++]=e[s+c];return i},flattenJSON:function(e,t,n,r){for(var i=1,o=e[0];void 0!==o&&void 0===o[r];)o=e[i++];if(void 0!==o){var a=o[r];if(void 0!==a)if(Array.isArray(a))do{a=o[r],void 0!==a&&(t.push(o.time),n.push.apply(n,a)),o=e[i++]}while(void 0!==o);else if(void 0!==a.toArray)do{a=o[r],void 0!==a&&(t.push(o.time),a.toArray(n,n.length)),o=e[i++]}while(void 0!==o);else do{a=o[r],void 0!==a&&(t.push(o.time),n.push(a)),o=e[i++]}while(void 0!==o)}},subclip:function(e,t,n,r,i){i=i||30,e=e.clone(),e.name=t;var o=[];for(t=0;t<e.tracks.length;++t){for(var a=e.tracks[t],s=a.getValueSize(),c=[],u=[],l=0;l<a.times.length;++l){var h=a.times[l]*i;if(!(h<n||h>=r))for(c.push(a.times[l]),h=0;h<s;++h)u.push(a.values[l*s+h])}0!==c.length&&(a.times=Fc.convertArray(c,a.times.constructor),a.values=Fc.convertArray(u,a.values.constructor),o.push(a))}for(e.tracks=o,n=1/0,t=0;t<e.tracks.length;++t)n>e.tracks[t].times[0]&&(n=e.tracks[t].times[0]);for(t=0;t<e.tracks.length;++t)e.tracks[t].shift(-1*n);return e.resetDuration(),e}};Object.assign(Rr.prototype,{evaluate:function(e){var t=this.parameterPositions,n=this._cachedIndex,r=t[n],i=t[n-1];e:{t:{n:{r:if(!(e<r)){for(var o=n+2;;){if(void 0===r){if(e<i)break r;return this._cachedIndex=n=t.length,this.afterEnd_(n-1,e,i)}if(n===o)break;if(i=r,r=t[++n],e<r)break t}r=t.length;break n}if(e>=i)break e;for(o=t[1],e<o&&(n=2,i=o),o=n-2;;){if(void 0===i)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(n===o)break;if(r=i,i=t[--n-1],e>=i)break t}r=n,n=0}for(;n<r;)i=n+r>>>1,e<t[i]?r=i:n=i+1;if(r=t[n],i=t[n-1],void 0===i)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(void 0===r)return this._cachedIndex=n=t.length,this.afterEnd_(n-1,i,e)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,e,r)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(e){var t=this.resultBuffer,n=this.sampleValues,r=this.valueSize;e*=r;for(var i=0;i!==r;++i)t[i]=n[e+i];return t},interpolate_:function(){throw Error("call to abstract method")},intervalChanged_:function(){}}),Object.assign(Rr.prototype,{beforeStart_:Rr.prototype.copySampleValue_,afterEnd_:Rr.prototype.copySampleValue_}),Cr.prototype=Object.assign(Object.create(Rr.prototype),{constructor:Cr,DefaultSettings_:{endingStart:2400,endingEnd:2400},intervalChanged_:function(e,t,n){var r=this.parameterPositions,i=e-2,o=e+1,a=r[i],s=r[o];if(void 0===a)switch(this.getSettings_().endingStart){case 2401:i=e,a=2*t-n;break;case 2402:i=r.length-2,a=t+r[i]-r[i+1];break;default:i=e,a=n}if(void 0===s)switch(this.getSettings_().endingEnd){case 2401:o=e,s=2*n-t;break;case 2402:o=1,s=n+r[1]-r[0];break;default:o=e-1,s=t}e=.5*(n-t),r=this.valueSize,this._weightPrev=e/(t-a),this._weightNext=e/(s-n),this._offsetPrev=i*r,this._offsetNext=o*r},interpolate_:function(e,t,n,r){var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize;e*=a;var s=e-a,c=this._offsetPrev,u=this._offsetNext,l=this._weightPrev,h=this._weightNext,f=(n-t)/(r-t);for(n=f*f,r=n*f,t=-l*r+2*l*n-l*f,l=(1+l)*r+(-1.5-2*l)*n+(-.5+l)*f+1,f=(-1-h)*r+(1.5+h)*n+.5*f,h=h*r-h*n,n=0;n!==a;++n)i[n]=t*o[c+n]+l*o[s+n]+f*o[e+n]+h*o[u+n];return i}}),Ir.prototype=Object.assign(Object.create(Rr.prototype),{constructor:Ir,interpolate_:function(e,t,n,r){var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize;e*=a;var s=e-a;for(t=(n-t)/(r-t),n=1-t,r=0;r!==a;++r)i[r]=o[s+r]*n+o[e+r]*t;return i}}),Lr.prototype=Object.assign(Object.create(Rr.prototype),{constructor:Lr,interpolate_:function(e){return this.copySampleValue_(e-1)}}),Object.assign(Dr,{toJSON:function(e){var t=e.constructor;if(void 0!==t.toJSON)t=t.toJSON(e);else{t={name:e.name,times:Fc.convertArray(e.times,Array),values:Fc.convertArray(e.values,Array)};var n=e.getInterpolation();n!==e.DefaultInterpolation&&(t.interpolation=n)}return t.type=e.ValueTypeName,t}}),Object.assign(Dr.prototype,{constructor:Dr,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:2301,InterpolantFactoryMethodDiscrete:function(e){return new Lr(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodLinear:function(e){return new Ir(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:function(e){return new Cr(this.times,this.values,this.getValueSize(),e)},setInterpolation:function(e){switch(e){case 2300:var t=this.InterpolantFactoryMethodDiscrete;break;case 2301:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){if(t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name,void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw Error(t);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",t),this}return this.createInterpolant=t,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}},getValueSize:function(){return this.values.length/this.times.length},shift:function(e){if(0!==e)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]+=e;return this},scale:function(e){if(1!==e)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]*=e;return this},trim:function(e,t){for(var n=this.times,r=n.length,i=0,o=r-1;i!==r&&n[i]<e;)++i;for(;-1!==o&&n[o]>t;)--o;return++o,0===i&&o===r||(i>=o&&(o=Math.max(o,1),i=o-1),e=this.getValueSize(),this.times=Fc.arraySlice(n,i,o),this.values=Fc.arraySlice(this.values,i*e,o*e)),this},validate:function(){var e=!0,t=this.getValueSize();0!==t-Math.floor(t)&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);var n=this.times;t=this.values;var r=n.length;0===r&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);for(var i=null,o=0;o!==r;o++){var a=n[o];if("number"===typeof a&&isNaN(a)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,a),e=!1;break}if(null!==i&&i>a){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,a,i),e=!1;break}i=a}if(void 0!==t&&Fc.isTypedArray(t))for(o=0,n=t.length;o!==n;++o)if(r=t[o],isNaN(r)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,o,r),e=!1;break}return e},optimize:function(){for(var e=Fc.arraySlice(this.times),t=Fc.arraySlice(this.values),n=this.getValueSize(),r=2302===this.getInterpolation(),i=1,o=e.length-1,a=1;a<o;++a){var s=!1,c=e[a];if(c!==e[a+1]&&(1!==a||c!==c[0]))if(r)s=!0;else{var u=a*n,l=u-n,h=u+n;for(c=0;c!==n;++c){var f=t[u+c];if(f!==t[l+c]||f!==t[h+c]){s=!0;break}}}if(s){if(a!==i)for(e[i]=e[a],s=a*n,u=i*n,c=0;c!==n;++c)t[u+c]=t[s+c];++i}}if(0<o){for(e[i]=e[o],s=o*n,u=i*n,c=0;c!==n;++c)t[u+c]=t[s+c];++i}return i!==e.length?(this.times=Fc.arraySlice(e,0,i),this.values=Fc.arraySlice(t,0,i*n)):(this.times=e,this.values=t),this},clone:function(){var e=Fc.arraySlice(this.times,0),t=Fc.arraySlice(this.values,0);return e=new this.constructor(this.name,e,t),e.createInterpolant=this.createInterpolant,e}}),Pr.prototype=Object.assign(Object.create(Dr.prototype),{constructor:Pr,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Nr.prototype=Object.assign(Object.create(Dr.prototype),{constructor:Nr,ValueTypeName:"color"}),Br.prototype=Object.assign(Object.create(Dr.prototype),{constructor:Br,ValueTypeName:"number"}),kr.prototype=Object.assign(Object.create(Rr.prototype),{constructor:kr,interpolate_:function(e,t,n,r){var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize;for(e*=a,t=(n-t)/(r-t),n=e+a;e!==n;e+=4)c.slerpFlat(i,0,o,e-a,o,e,t);return i}}),Fr.prototype=Object.assign(Object.create(Dr.prototype),{constructor:Fr,ValueTypeName:"quaternion",DefaultInterpolation:2301,InterpolantFactoryMethodLinear:function(e){return new kr(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:void 0}),Ur.prototype=Object.assign(Object.create(Dr.prototype),{constructor:Ur,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Hr.prototype=Object.assign(Object.create(Dr.prototype),{constructor:Hr,ValueTypeName:"vector"}),Object.assign(jr,{parse:function(e){for(var t=[],n=e.tracks,r=1/(e.fps||1),i=0,o=n.length;i!==o;++i)t.push(Vr(n[i]).scale(r));return new jr(e.name,e.duration,t)},toJSON:function(e){var t=[],n=e.tracks;e={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid};for(var r=0,i=n.length;r!==i;++r)t.push(Dr.toJSON(n[r]));return e},CreateFromMorphTargetSequence:function(e,t,n,r){for(var i=t.length,o=[],a=0;a<i;a++){var s=[],c=[];s.push((a+i-1)%i,a,(a+1)%i),c.push(0,1,0);var u=Fc.getKeyframeOrder(s);s=Fc.sortedArray(s,1,u),c=Fc.sortedArray(c,1,u),r||0!==s[0]||(s.push(i),c.push(c[0])),o.push(new Br(".morphTargetInfluences["+t[a].name+"]",s,c).scale(1/n))}return new jr(e,-1,o)},findByName:function(e,t){var n=e;for(Array.isArray(e)||(n=e.geometry&&e.geometry.animations||e.animations),e=0;e<n.length;e++)if(n[e].name===t)return n[e];return null},CreateClipsFromMorphTargetSequences:function(e,t,n){for(var r={},i=/^([\w-]*?)([\d]+)$/,o=0,a=e.length;o<a;o++){var s=e[o],c=s.name.match(i);if(c&&1<c.length){var u=c[1];(c=r[u])||(r[u]=c=[]),c.push(s)}}for(u in e=[],r)e.push(jr.CreateFromMorphTargetSequence(u,r[u],t,n));return e},parseAnimation:function(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;var n=function(e,t,n,r,i){if(0!==n.length){var o=[],a=[];Fc.flattenJSON(n,o,a,r),0!==o.length&&i.push(new e(t,o,a))}},r=[],i=e.name||"default",o=e.length||-1,a=e.fps||30;e=e.hierarchy||[];for(var s=0;s<e.length;s++){var c=e[s].keys;if(c&&0!==c.length)if(c[0].morphTargets){o={};for(var u=0;u<c.length;u++)if(c[u].morphTargets)for(var l=0;l<c[u].morphTargets.length;l++)o[c[u].morphTargets[l]]=-1;for(var h in o){var f=[],d=[];for(l=0;l!==c[u].morphTargets.length;++l){var p=c[u];f.push(p.time),d.push(p.morphTarget===h?1:0)}r.push(new Br(".morphTargetInfluence["+h+"]",f,d))}o=o.length*(a||1)}else u=".bones["+t[s].name+"]",n(Hr,u+".position",c,"pos",r),n(Fr,u+".quaternion",c,"rot",r),n(Hr,u+".scale",c,"scl",r)}return 0===r.length?null:new jr(i,o,r)}}),Object.assign(jr.prototype,{resetDuration:function(){for(var e=0,t=0,n=this.tracks.length;t!==n;++t){var r=this.tracks[t];e=Math.max(e,r.times[r.times.length-1])}return this.duration=e,this},trim:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this},validate:function(){for(var e=!0,t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e},optimize:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this},clone:function(){for(var e=[],t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new jr(this.name,this.duration,e)}});var Uc={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}},Hc=new zr;Object.assign(Wr.prototype,{load:function(){},parse:function(){},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this},setResourcePath:function(e){return this.resourcePath=e,this}});var jc={};qr.prototype=Object.assign(Object.create(Wr.prototype),{constructor:qr,load:function(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,o=Uc.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout((function(){t&&t(o),i.manager.itemEnd(e)}),0),o;if(void 0===jc[e]){var a=e.match(/^data:(.*?)(;base64)?,(.*)$/);if(a){n=a[1];var s=!!a[2];a=a[3],a=decodeURIComponent(a),s&&(a=atob(a));try{var c=(this.responseType||"").toLowerCase();switch(c){case"arraybuffer":case"blob":var u=new Uint8Array(a.length);for(s=0;s<a.length;s++)u[s]=a.charCodeAt(s);var l="blob"===c?new Blob([u.buffer],{type:n}):u.buffer;break;case"document":l=(new DOMParser).parseFromString(a,n);break;case"json":l=JSON.parse(a);break;default:l=a}setTimeout((function(){t&&t(l),i.manager.itemEnd(e)}),0)}catch(f){setTimeout((function(){r&&r(f),i.manager.itemError(e),i.manager.itemEnd(e)}),0)}}else{jc[e]=[],jc[e].push({onLoad:t,onProgress:n,onError:r});var h=new XMLHttpRequest;for(s in h.open("GET",e,!0),h.addEventListener("load",(function(t){var n=this.response,r=jc[e];if(delete jc[e],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),Uc.add(e,n);for(var o=0,a=r.length;o<a;o++){var s=r[o];s.onLoad&&s.onLoad(n)}}else{for(o=0,a=r.length;o<a;o++)s=r[o],s.onError&&s.onError(t);i.manager.itemError(e)}i.manager.itemEnd(e)}),!1),h.addEventListener("progress",(function(t){for(var n=jc[e],r=0,i=n.length;r<i;r++){var o=n[r];o.onProgress&&o.onProgress(t)}}),!1),h.addEventListener("error",(function(t){var n=jc[e];delete jc[e];for(var r=0,o=n.length;r<o;r++){var a=n[r];a.onError&&a.onError(t)}i.manager.itemError(e),i.manager.itemEnd(e)}),!1),h.addEventListener("abort",(function(t){var n=jc[e];delete jc[e];for(var r=0,o=n.length;r<o;r++){var a=n[r];a.onError&&a.onError(t)}i.manager.itemError(e),i.manager.itemEnd(e)}),!1),void 0!==this.responseType&&(h.responseType=this.responseType),void 0!==this.withCredentials&&(h.withCredentials=this.withCredentials),h.overrideMimeType&&h.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),this.requestHeader)h.setRequestHeader(s,this.requestHeader[s]);h.send(null)}return i.manager.itemStart(e),h}jc[e].push({onLoad:t,onProgress:n,onError:r})},setResponseType:function(e){return this.responseType=e,this},setWithCredentials:function(e){return this.withCredentials=e,this},setMimeType:function(e){return this.mimeType=e,this},setRequestHeader:function(e){return this.requestHeader=e,this}}),Yr.prototype=Object.assign(Object.create(Wr.prototype),{constructor:Yr,load:function(e,t,n,r){var i=this,o=new qr(i.manager);o.setPath(i.path),o.load(e,(function(e){t(i.parse(JSON.parse(e)))}),n,r)},parse:function(e){for(var t=[],n=0;n<e.length;n++){var r=jr.parse(e[n]);t.push(r)}return t}}),Xr.prototype=Object.assign(Object.create(Wr.prototype),{constructor:Xr,load:function(e,t,n,r){function i(i){c.load(e[i],(function(e){e=o.parse(e,!0),a[i]={width:e.width,height:e.height,format:e.format,mipmaps:e.mipmaps},u+=1,6===u&&(1===e.mipmapCount&&(s.minFilter=1006),s.format=e.format,s.needsUpdate=!0,t&&t(s))}),n,r)}var o=this,a=[],s=new hn;s.image=a;var c=new qr(this.manager);if(c.setPath(this.path),c.setResponseType("arraybuffer"),Array.isArray(e))for(var u=0,l=0,h=e.length;l<h;++l)i(l);else c.load(e,(function(e){if(e=o.parse(e,!0),e.isCubemap)for(var n=e.mipmaps.length/e.mipmapCount,r=0;r<n;r++){a[r]={mipmaps:[]};for(var i=0;i<e.mipmapCount;i++)a[r].mipmaps.push(e.mipmaps[r*e.mipmapCount+i]),a[r].format=e.format,a[r].width=e.width,a[r].height=e.height}else s.image.width=e.width,s.image.height=e.height,s.mipmaps=e.mipmaps;1===e.mipmapCount&&(s.minFilter=1006),s.format=e.format,s.needsUpdate=!0,t&&t(s)}),n,r);return s}}),Qr.prototype=Object.assign(Object.create(Wr.prototype),{constructor:Qr,load:function(e,t,n,r){var i=this,o=new Z,a=new qr(this.manager);return a.setResponseType("arraybuffer"),a.setPath(this.path),a.load(e,(function(e){(e=i.parse(e))&&(void 0!==e.image?o.image=e.image:void 0!==e.data&&(o.image.width=e.width,o.image.height=e.height,o.image.data=e.data),o.wrapS=void 0!==e.wrapS?e.wrapS:1001,o.wrapT=void 0!==e.wrapT?e.wrapT:1001,o.magFilter=void 0!==e.magFilter?e.magFilter:1006,o.minFilter=void 0!==e.minFilter?e.minFilter:1006,o.anisotropy=void 0!==e.anisotropy?e.anisotropy:1,void 0!==e.format&&(o.format=e.format),void 0!==e.type&&(o.type=e.type),void 0!==e.mipmaps&&(o.mipmaps=e.mipmaps,o.minFilter=1008),1===e.mipmapCount&&(o.minFilter=1006),o.needsUpdate=!0,t&&t(o,e))}),n,r),o}}),Kr.prototype=Object.assign(Object.create(Wr.prototype),{constructor:Kr,load:function(e,t,n,r){function i(){c.removeEventListener("load",i,!1),c.removeEventListener("error",o,!1),Uc.add(e,this),t&&t(this),a.manager.itemEnd(e)}function o(t){c.removeEventListener("load",i,!1),c.removeEventListener("error",o,!1),r&&r(t),a.manager.itemError(e),a.manager.itemEnd(e)}void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var a=this,s=Uc.get(e);if(void 0!==s)return a.manager.itemStart(e),setTimeout((function(){t&&t(s),a.manager.itemEnd(e)}),0),s;var c=document.createElementNS("http://www.w3.org/1999/xhtml","img");return c.addEventListener("load",i,!1),c.addEventListener("error",o,!1),"data:"!==e.substr(0,5)&&void 0!==this.crossOrigin&&(c.crossOrigin=this.crossOrigin),a.manager.itemStart(e),c.src=e,c}}),Jr.prototype=Object.assign(Object.create(Wr.prototype),{constructor:Jr,load:function(e,t,n,r){function i(n){a.load(e[n],(function(e){o.images[n]=e,s++,6===s&&(o.needsUpdate=!0,t&&t(o))}),void 0,r)}var o=new me,a=new Kr(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);var s=0;for(n=0;n<e.length;++n)i(n);return o}}),Zr.prototype=Object.assign(Object.create(Wr.prototype),{constructor:Zr,load:function(e,t,n,r){var o=new i,a=new Kr(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,(function(n){o.image=n,n=0<e.search(/\.jpe?g($|\?)/i)||0===e.search(/^data:image\/jpeg/),o.format=n?1022:1023,o.needsUpdate=!0,void 0!==t&&t(o)}),n,r),o}}),Object.assign($r.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(e,t){return e=this.getUtoTmapping(e),this.getPoint(e,t)},getPoints:function(e){void 0===e&&(e=5);for(var t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return t},getSpacedPoints:function(e){void 0===e&&(e=5);for(var t=[],n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t},getLength:function(){var e=this.getLengths();return e[e.length-1]},getLengths:function(e){if(void 0===e&&(e=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,n=[],r=this.getPoint(0),i=0;for(n.push(0),t=1;t<=e;t++){var o=this.getPoint(t/e);i+=o.distanceTo(r),n.push(i),r=o}return this.cacheArcLengths=n},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(e,t){var n=this.getLengths(),r=n.length;t=t||e*n[r-1];for(var i,o=0,a=r-1;o<=a;)if(e=Math.floor(o+(a-o)/2),i=n[e]-t,0>i)o=e+1;else{if(!(0<i)){a=e;break}a=e-1}return e=a,n[e]===t?e/(r-1):(o=n[e],(e+(t-o)/(n[e+1]-o))/(r-1))},getTangent:function(e){var t=e-1e-4;return e+=1e-4,0>t&&(t=0),1<e&&(e=1),t=this.getPoint(t),this.getPoint(e).clone().sub(t).normalize()},getTangentAt:function(e){return e=this.getUtoTmapping(e),this.getTangent(e)},computeFrenetFrames:function(e,t){var n,r=new u,i=[],o=[],a=[],s=new u,c=new l;for(n=0;n<=e;n++){var h=n/e;i[n]=this.getTangentAt(h),i[n].normalize()}o[0]=new u,a[0]=new u,n=Number.MAX_VALUE,h=Math.abs(i[0].x);var f=Math.abs(i[0].y),d=Math.abs(i[0].z);for(h<=n&&(n=h,r.set(1,0,0)),f<=n&&(n=f,r.set(0,1,0)),d<=n&&r.set(0,0,1),s.crossVectors(i[0],r).normalize(),o[0].crossVectors(i[0],s),a[0].crossVectors(i[0],o[0]),n=1;n<=e;n++)o[n]=o[n-1].clone(),a[n]=a[n-1].clone(),s.crossVectors(i[n-1],i[n]),s.length()>Number.EPSILON&&(s.normalize(),r=Math.acos(Wo.clamp(i[n-1].dot(i[n]),-1,1)),o[n].applyMatrix4(c.makeRotationAxis(s,r))),a[n].crossVectors(i[n],o[n]);if(!0===t)for(r=Math.acos(Wo.clamp(o[0].dot(o[e]),-1,1)),r/=e,0<i[0].dot(s.crossVectors(o[0],o[e]))&&(r=-r),n=1;n<=e;n++)o[n].applyMatrix4(c.makeRotationAxis(i[n],r*n)),a[n].crossVectors(i[n],o[n]);return{tangents:i,normals:o,binormals:a}},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this},toJSON:function(){var e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e},fromJSON:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}),ei.prototype=Object.create($r.prototype),ei.prototype.constructor=ei,ei.prototype.isEllipseCurve=!0,ei.prototype.getPoint=function(e,t){t=t||new n;for(var r=2*Math.PI,i=this.aEndAngle-this.aStartAngle,o=Math.abs(i)<Number.EPSILON;0>i;)i+=r;for(;i>r;)i-=r;i<Number.EPSILON&&(i=o?0:r),!0!==this.aClockwise||o||(i=i===r?-r:i-r),r=this.aStartAngle+e*i,e=this.aX+this.xRadius*Math.cos(r);var a=this.aY+this.yRadius*Math.sin(r);return 0!==this.aRotation&&(r=Math.cos(this.aRotation),i=Math.sin(this.aRotation),o=e-this.aX,a-=this.aY,e=o*r-a*i+this.aX,a=o*i+a*r+this.aY),t.set(e,a)},ei.prototype.copy=function(e){return $r.prototype.copy.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},ei.prototype.toJSON=function(){var e=$r.prototype.toJSON.call(this);return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e},ei.prototype.fromJSON=function(e){return $r.prototype.fromJSON.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},ti.prototype=Object.create(ei.prototype),ti.prototype.constructor=ti,ti.prototype.isArcCurve=!0;var Gc=new u,Vc=new ni,zc=new ni,Wc=new ni;ri.prototype=Object.create($r.prototype),ri.prototype.constructor=ri,ri.prototype.isCatmullRomCurve3=!0,ri.prototype.getPoint=function(e,t){t=t||new u;var n=this.points,r=n.length;e*=r-(this.closed?0:1);var i=Math.floor(e);if(e-=i,this.closed?i+=0<i?0:(Math.floor(Math.abs(i)/r)+1)*r:0===e&&i===r-1&&(i=r-2,e=1),this.closed||0<i)var o=n[(i-1)%r];else Gc.subVectors(n[0],n[1]).add(n[0]),o=Gc;var a=n[i%r],s=n[(i+1)%r];if(this.closed||i+2<r?n=n[(i+2)%r]:(Gc.subVectors(n[r-1],n[r-2]).add(n[r-1]),n=Gc),"centripetal"===this.curveType||"chordal"===this.curveType){var c="chordal"===this.curveType?.5:.25;r=Math.pow(o.distanceToSquared(a),c),i=Math.pow(a.distanceToSquared(s),c),c=Math.pow(s.distanceToSquared(n),c),1e-4>i&&(i=1),1e-4>r&&(r=i),1e-4>c&&(c=i),Vc.initNonuniformCatmullRom(o.x,a.x,s.x,n.x,r,i,c),zc.initNonuniformCatmullRom(o.y,a.y,s.y,n.y,r,i,c),Wc.initNonuniformCatmullRom(o.z,a.z,s.z,n.z,r,i,c)}else"catmullrom"===this.curveType&&(Vc.initCatmullRom(o.x,a.x,s.x,n.x,this.tension),zc.initCatmullRom(o.y,a.y,s.y,n.y,this.tension),Wc.initCatmullRom(o.z,a.z,s.z,n.z,this.tension));return t.set(Vc.calc(e),zc.calc(e),Wc.calc(e)),t},ri.prototype.copy=function(e){$r.prototype.copy.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++)this.points.push(e.points[t].clone());return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},ri.prototype.toJSON=function(){var e=$r.prototype.toJSON.call(this);e.points=[];for(var t=0,n=this.points.length;t<n;t++)e.points.push(this.points[t].toArray());return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e},ri.prototype.fromJSON=function(e){$r.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var r=e.points[t];this.points.push((new u).fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},si.prototype=Object.create($r.prototype),si.prototype.constructor=si,si.prototype.isCubicBezierCurve=!0,si.prototype.getPoint=function(e,t){t=t||new n;var r=this.v0,i=this.v1,o=this.v2,a=this.v3;return t.set(ai(e,r.x,i.x,o.x,a.x),ai(e,r.y,i.y,o.y,a.y)),t},si.prototype.copy=function(e){return $r.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},si.prototype.toJSON=function(){var e=$r.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},si.prototype.fromJSON=function(e){return $r.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},ci.prototype=Object.create($r.prototype),ci.prototype.constructor=ci,ci.prototype.isCubicBezierCurve3=!0,ci.prototype.getPoint=function(e,t){t=t||new u;var n=this.v0,r=this.v1,i=this.v2,o=this.v3;return t.set(ai(e,n.x,r.x,i.x,o.x),ai(e,n.y,r.y,i.y,o.y),ai(e,n.z,r.z,i.z,o.z)),t},ci.prototype.copy=function(e){return $r.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},ci.prototype.toJSON=function(){var e=$r.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},ci.prototype.fromJSON=function(e){return $r.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},ui.prototype=Object.create($r.prototype),ui.prototype.constructor=ui,ui.prototype.isLineCurve=!0,ui.prototype.getPoint=function(e,t){return t=t||new n,1===e?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t},ui.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},ui.prototype.getTangent=function(){return this.v2.clone().sub(this.v1).normalize()},ui.prototype.copy=function(e){return $r.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},ui.prototype.toJSON=function(){var e=$r.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},ui.prototype.fromJSON=function(e){return $r.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},li.prototype=Object.create($r.prototype),li.prototype.constructor=li,li.prototype.isLineCurve3=!0,li.prototype.getPoint=function(e,t){return t=t||new u,1===e?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t},li.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},li.prototype.copy=function(e){return $r.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},li.prototype.toJSON=function(){var e=$r.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},li.prototype.fromJSON=function(e){return $r.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},hi.prototype=Object.create($r.prototype),hi.prototype.constructor=hi,hi.prototype.isQuadraticBezierCurve=!0,hi.prototype.getPoint=function(e,t){t=t||new n;var r=this.v0,i=this.v1,o=this.v2;return t.set(oi(e,r.x,i.x,o.x),oi(e,r.y,i.y,o.y)),t},hi.prototype.copy=function(e){return $r.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},hi.prototype.toJSON=function(){var e=$r.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},hi.prototype.fromJSON=function(e){return $r.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},fi.prototype=Object.create($r.prototype),fi.prototype.constructor=fi,fi.prototype.isQuadraticBezierCurve3=!0,fi.prototype.getPoint=function(e,t){t=t||new u;var n=this.v0,r=this.v1,i=this.v2;return t.set(oi(e,n.x,r.x,i.x),oi(e,n.y,r.y,i.y),oi(e,n.z,r.z,i.z)),t},fi.prototype.copy=function(e){return $r.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},fi.prototype.toJSON=function(){var e=$r.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},fi.prototype.fromJSON=function(e){return $r.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},di.prototype=Object.create($r.prototype),di.prototype.constructor=di,di.prototype.isSplineCurve=!0,di.prototype.getPoint=function(e,t){t=t||new n;var r=this.points,i=(r.length-1)*e;e=Math.floor(i),i-=e;var o=r[0===e?e:e-1],a=r[e],s=r[e>r.length-2?r.length-1:e+1];return r=r[e>r.length-3?r.length-1:e+2],t.set(ii(i,o.x,a.x,s.x,r.x),ii(i,o.y,a.y,s.y,r.y)),t},di.prototype.copy=function(e){$r.prototype.copy.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++)this.points.push(e.points[t].clone());return this},di.prototype.toJSON=function(){var e=$r.prototype.toJSON.call(this);e.points=[];for(var t=0,n=this.points.length;t<n;t++)e.points.push(this.points[t].toArray());return e},di.prototype.fromJSON=function(e){$r.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,r=e.points.length;t<r;t++){var i=e.points[t];this.points.push((new n).fromArray(i))}return this};var qc=Object.freeze({__proto__:null,ArcCurve:ti,CatmullRomCurve3:ri,CubicBezierCurve:si,CubicBezierCurve3:ci,EllipseCurve:ei,LineCurve:ui,LineCurve3:li,QuadraticBezierCurve:hi,QuadraticBezierCurve3:fi,SplineCurve:di});pi.prototype=Object.assign(Object.create($r.prototype),{constructor:pi,add:function(e){this.curves.push(e)},closePath:function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new ui(t,e))},getPoint:function(e){var t=e*this.getLength(),n=this.getCurveLengths();for(e=0;e<n.length;){if(n[e]>=t)return t=n[e]-t,e=this.curves[e],n=e.getLength(),e.getPointAt(0===n?0:1-t/n);e++}return null},getLength:function(){var e=this.getCurveLengths();return e[e.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e},getSpacedPoints:function(e){void 0===e&&(e=40);for(var t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t},getPoints:function(e){e=e||12;for(var t,n=[],r=0,i=this.curves;r<i.length;r++){var o=i[r];o=o.getPoints(o&&o.isEllipseCurve?2*e:o&&(o.isLineCurve||o.isLineCurve3)?1:o&&o.isSplineCurve?e*o.points.length:e);for(var a=0;a<o.length;a++){var s=o[a];t&&t.equals(s)||(n.push(s),t=s)}}return this.autoClose&&1<n.length&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n},copy:function(e){$r.prototype.copy.call(this,e),this.curves=[];for(var t=0,n=e.curves.length;t<n;t++)this.curves.push(e.curves[t].clone());return this.autoClose=e.autoClose,this},toJSON:function(){var e=$r.prototype.toJSON.call(this);e.autoClose=this.autoClose,e.curves=[];for(var t=0,n=this.curves.length;t<n;t++)e.curves.push(this.curves[t].toJSON());return e},fromJSON:function(e){$r.prototype.fromJSON.call(this,e),this.autoClose=e.autoClose,this.curves=[];for(var t=0,n=e.curves.length;t<n;t++){var r=e.curves[t];this.curves.push((new qc[r.type]).fromJSON(r))}return this}}),mi.prototype=Object.assign(Object.create(pi.prototype),{constructor:mi,setFromPoints:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this},moveTo:function(e,t){return this.currentPoint.set(e,t),this},lineTo:function(e,t){var r=new ui(this.currentPoint.clone(),new n(e,t));return this.curves.push(r),this.currentPoint.set(e,t),this},quadraticCurveTo:function(e,t,r,i){return e=new hi(this.currentPoint.clone(),new n(e,t),new n(r,i)),this.curves.push(e),this.currentPoint.set(r,i),this},bezierCurveTo:function(e,t,r,i,o,a){return e=new si(this.currentPoint.clone(),new n(e,t),new n(r,i),new n(o,a)),this.curves.push(e),this.currentPoint.set(o,a),this},splineThru:function(e){var t=[this.currentPoint.clone()].concat(e);return t=new di(t),this.curves.push(t),this.currentPoint.copy(e[e.length-1]),this},arc:function(e,t,n,r,i,o){return this.absarc(e+this.currentPoint.x,t+this.currentPoint.y,n,r,i,o),this},absarc:function(e,t,n,r,i,o){return this.absellipse(e,t,n,n,r,i,o),this},ellipse:function(e,t,n,r,i,o,a,s){return this.absellipse(e+this.currentPoint.x,t+this.currentPoint.y,n,r,i,o,a,s),this},absellipse:function(e,t,n,r,i,o,a,s){return e=new ei(e,t,n,r,i,o,a,s),0<this.curves.length&&(t=e.getPoint(0),t.equals(this.currentPoint)||this.lineTo(t.x,t.y)),this.curves.push(e),e=e.getPoint(1),this.currentPoint.copy(e),this},copy:function(e){return pi.prototype.copy.call(this,e),this.currentPoint.copy(e.currentPoint),this},toJSON:function(){var e=pi.prototype.toJSON.call(this);return e.currentPoint=this.currentPoint.toArray(),e},fromJSON:function(e){return pi.prototype.fromJSON.call(this,e),this.currentPoint.fromArray(e.currentPoint),this}}),vi.prototype=Object.assign(Object.create(mi.prototype),{constructor:vi,getPointsHoles:function(e){for(var t=[],n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t},extractPoints:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}},copy:function(e){mi.prototype.copy.call(this,e),this.holes=[];for(var t=0,n=e.holes.length;t<n;t++)this.holes.push(e.holes[t].clone());return this},toJSON:function(){var e=mi.prototype.toJSON.call(this);e.uuid=this.uuid,e.holes=[];for(var t=0,n=this.holes.length;t<n;t++)e.holes.push(this.holes[t].toJSON());return e},fromJSON:function(e){mi.prototype.fromJSON.call(this,e),this.uuid=e.uuid,this.holes=[];for(var t=0,n=e.holes.length;t<n;t++){var r=e.holes[t];this.holes.push((new mi).fromJSON(r))}return this}}),gi.prototype=Object.assign(Object.create(d.prototype),{constructor:gi,isLight:!0,copy:function(e){return d.prototype.copy.call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this},toJSON:function(e){return e=d.prototype.toJSON.call(this,e),e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}}),yi.prototype=Object.assign(Object.create(gi.prototype),{constructor:yi,isHemisphereLight:!0,copy:function(e){return gi.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}),Object.assign(bi.prototype,{_projScreenMatrix:new l,_lightPositionWorld:new u,_lookTarget:new u,getViewportCount:function(){return this._viewportCount},getFrustum:function(){return this._frustum},updateMatrices:function(e){var t=this.camera,n=this.matrix,r=this._projScreenMatrix,i=this._lookTarget,o=this._lightPositionWorld;o.setFromMatrixPosition(e.matrixWorld),t.position.copy(o),i.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(i),t.updateMatrixWorld(),r.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(r),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(t.projectionMatrix),n.multiply(t.matrixWorldInverse)},getViewport:function(e){return this._viewports[e]},getFrameExtents:function(){return this._frameExtents},copy:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var e={};return 0!==this.bias&&(e.bias=this.bias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}),wi.prototype=Object.assign(Object.create(bi.prototype),{constructor:wi,isSpotLightShadow:!0,updateMatrices:function(e){var t=this.camera,n=2*Wo.RAD2DEG*e.angle,r=this.mapSize.width/this.mapSize.height,i=e.distance||t.far;n===t.fov&&r===t.aspect&&i===t.far||(t.fov=n,t.aspect=r,t.far=i,t.updateProjectionMatrix()),bi.prototype.updateMatrices.call(this,e)}}),Ei.prototype=Object.assign(Object.create(gi.prototype),{constructor:Ei,isSpotLight:!0,copy:function(e){return gi.prototype.copy.call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),xi.prototype=Object.assign(Object.create(bi.prototype),{constructor:xi,isPointLightShadow:!0,updateMatrices:function(e,t){void 0===t&&(t=0);var n=this.camera,r=this.matrix,i=this._lightPositionWorld,o=this._lookTarget,a=this._projScreenMatrix;i.setFromMatrixPosition(e.matrixWorld),n.position.copy(i),o.copy(n.position),o.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(o),n.updateMatrixWorld(),r.makeTranslation(-i.x,-i.y,-i.z),a.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(a)}}),_i.prototype=Object.assign(Object.create(gi.prototype),{constructor:_i,isPointLight:!0,copy:function(e){return gi.prototype.copy.call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}),Ti.prototype=Object.assign(Object.create(X.prototype),{constructor:Ti,isOrthographicCamera:!0,copy:function(e,t){return X.prototype.copy.call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this},setViewOffset:function(e,t,n,r,i,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2,i=n-e;n+=e,e=r+t,t=r-t,null!==this.view&&this.view.enabled&&(r=(this.right-this.left)/this.view.fullWidth/this.zoom,t=(this.top-this.bottom)/this.view.fullHeight/this.zoom,i+=r*this.view.offsetX,n=i+r*this.view.width,e-=t*this.view.offsetY,t=e-t*this.view.height),this.projectionMatrix.makeOrthographic(i,n,e,t,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(e){return e=d.prototype.toJSON.call(this,e),e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}),Ai.prototype=Object.assign(Object.create(bi.prototype),{constructor:Ai,isDirectionalLightShadow:!0,updateMatrices:function(e){bi.prototype.updateMatrices.call(this,e)}}),Si.prototype=Object.assign(Object.create(gi.prototype),{constructor:Si,isDirectionalLight:!0,copy:function(e){return gi.prototype.copy.call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),Mi.prototype=Object.assign(Object.create(gi.prototype),{constructor:Mi,isAmbientLight:!0}),Oi.prototype=Object.assign(Object.create(gi.prototype),{constructor:Oi,isRectAreaLight:!0,copy:function(e){return gi.prototype.copy.call(this,e),this.width=e.width,this.height=e.height,this},toJSON:function(e){return e=gi.prototype.toJSON.call(this,e),e.object.width=this.width,e.object.height=this.height,e}}),Ri.prototype=Object.assign(Object.create(Wr.prototype),{constructor:Ri,load:function(e,t,n,r){var i=this,o=new qr(i.manager);o.setPath(i.path),o.load(e,(function(e){t(i.parse(JSON.parse(e)))}),n,r)},parse:function(e){function t(e){return void 0===i[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),i[e]}var i=this.textures,a=new kc[e.type];if(void 0!==e.uuid&&(a.uuid=e.uuid),void 0!==e.name&&(a.name=e.name),void 0!==e.color&&a.color.setHex(e.color),void 0!==e.roughness&&(a.roughness=e.roughness),void 0!==e.metalness&&(a.metalness=e.metalness),void 0!==e.sheen&&(a.sheen=(new E).setHex(e.sheen)),void 0!==e.emissive&&a.emissive.setHex(e.emissive),void 0!==e.specular&&a.specular.setHex(e.specular),void 0!==e.shininess&&(a.shininess=e.shininess),void 0!==e.clearcoat&&(a.clearcoat=e.clearcoat),void 0!==e.clearcoatRoughness&&(a.clearcoatRoughness=e.clearcoatRoughness),void 0!==e.vertexColors&&(a.vertexColors=e.vertexColors),void 0!==e.fog&&(a.fog=e.fog),void 0!==e.flatShading&&(a.flatShading=e.flatShading),void 0!==e.blending&&(a.blending=e.blending),void 0!==e.combine&&(a.combine=e.combine),void 0!==e.side&&(a.side=e.side),void 0!==e.opacity&&(a.opacity=e.opacity),void 0!==e.transparent&&(a.transparent=e.transparent),void 0!==e.alphaTest&&(a.alphaTest=e.alphaTest),void 0!==e.depthTest&&(a.depthTest=e.depthTest),void 0!==e.depthWrite&&(a.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(a.colorWrite=e.colorWrite),void 0!==e.stencilWrite&&(a.stencilWrite=e.stencilWrite),void 0!==e.stencilWriteMask&&(a.stencilWriteMask=e.stencilWriteMask),void 0!==e.stencilFunc&&(a.stencilFunc=e.stencilFunc),void 0!==e.stencilRef&&(a.stencilRef=e.stencilRef),void 0!==e.stencilFuncMask&&(a.stencilFuncMask=e.stencilFuncMask),void 0!==e.stencilFail&&(a.stencilFail=e.stencilFail),void 0!==e.stencilZFail&&(a.stencilZFail=e.stencilZFail),void 0!==e.stencilZPass&&(a.stencilZPass=e.stencilZPass),void 0!==e.wireframe&&(a.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(a.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(a.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(a.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(a.rotation=e.rotation),1!==e.linewidth&&(a.linewidth=e.linewidth),void 0!==e.dashSize&&(a.dashSize=e.dashSize),void 0!==e.gapSize&&(a.gapSize=e.gapSize),void 0!==e.scale&&(a.scale=e.scale),void 0!==e.polygonOffset&&(a.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(a.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(a.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.skinning&&(a.skinning=e.skinning),void 0!==e.morphTargets&&(a.morphTargets=e.morphTargets),void 0!==e.morphNormals&&(a.morphNormals=e.morphNormals),void 0!==e.dithering&&(a.dithering=e.dithering),void 0!==e.visible&&(a.visible=e.visible),void 0!==e.toneMapped&&(a.toneMapped=e.toneMapped),void 0!==e.userData&&(a.userData=e.userData),void 0!==e.uniforms)for(var s in e.uniforms){var c=e.uniforms[s];switch(a.uniforms[s]={},c.type){case"t":a.uniforms[s].value=t(c.value);break;case"c":a.uniforms[s].value=(new E).setHex(c.value);break;case"v2":a.uniforms[s].value=(new n).fromArray(c.value);break;case"v3":a.uniforms[s].value=(new u).fromArray(c.value);break;case"v4":a.uniforms[s].value=(new o).fromArray(c.value);break;case"m3":a.uniforms[s].value=(new r).fromArray(c.value);case"m4":a.uniforms[s].value=(new l).fromArray(c.value);break;default:a.uniforms[s].value=c.value}}if(void 0!==e.defines&&(a.defines=e.defines),void 0!==e.vertexShader&&(a.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(a.fragmentShader=e.fragmentShader),void 0!==e.extensions)for(var h in e.extensions)a.extensions[h]=e.extensions[h];return void 0!==e.shading&&(a.flatShading=1===e.shading),void 0!==e.size&&(a.size=e.size),void 0!==e.sizeAttenuation&&(a.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(a.map=t(e.map)),void 0!==e.matcap&&(a.matcap=t(e.matcap)),void 0!==e.alphaMap&&(a.alphaMap=t(e.alphaMap),a.transparent=!0),void 0!==e.bumpMap&&(a.bumpMap=t(e.bumpMap)),void 0!==e.bumpScale&&(a.bumpScale=e.bumpScale),void 0!==e.normalMap&&(a.normalMap=t(e.normalMap)),void 0!==e.normalMapType&&(a.normalMapType=e.normalMapType),void 0!==e.normalScale&&(s=e.normalScale,!1===Array.isArray(s)&&(s=[s,s]),a.normalScale=(new n).fromArray(s)),void 0!==e.displacementMap&&(a.displacementMap=t(e.displacementMap)),void 0!==e.displacementScale&&(a.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(a.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(a.roughnessMap=t(e.roughnessMap)),void 0!==e.metalnessMap&&(a.metalnessMap=t(e.metalnessMap)),void 0!==e.emissiveMap&&(a.emissiveMap=t(e.emissiveMap)),void 0!==e.emissiveIntensity&&(a.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(a.specularMap=t(e.specularMap)),void 0!==e.envMap&&(a.envMap=t(e.envMap)),void 0!==e.envMapIntensity&&(a.envMapIntensity=e.envMapIntensity),void 0!==e.reflectivity&&(a.reflectivity=e.reflectivity),void 0!==e.refractionRatio&&(a.refractionRatio=e.refractionRatio),void 0!==e.lightMap&&(a.lightMap=t(e.lightMap)),void 0!==e.lightMapIntensity&&(a.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(a.aoMap=t(e.aoMap)),void 0!==e.aoMapIntensity&&(a.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(a.gradientMap=t(e.gradientMap)),void 0!==e.clearcoatNormalMap&&(a.clearcoatNormalMap=t(e.clearcoatNormalMap)),void 0!==e.clearcoatNormalScale&&(a.clearcoatNormalScale=(new n).fromArray(e.clearcoatNormalScale)),a},setTextures:function(e){return this.textures=e,this}});var Yc={decodeText:function(e){if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(e);for(var t="",n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch(i){return t}},extractUrlBase:function(e){var t=e.lastIndexOf("/");return-1===t?"./":e.substr(0,t+1)}};Ci.prototype=Object.assign(Object.create(H.prototype),{constructor:Ci,isInstancedBufferGeometry:!0,copy:function(e){return H.prototype.copy.call(this,e),this.maxInstancedCount=e.maxInstancedCount,this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var e=H.prototype.toJSON.call(this);return e.maxInstancedCount=this.maxInstancedCount,e.isInstancedBufferGeometry=!0,e}}),Ii.prototype=Object.assign(Object.create(O.prototype),{constructor:Ii,isInstancedBufferAttribute:!0,copy:function(e){return O.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this},toJSON:function(){var e=O.prototype.toJSON.call(this);return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}),Li.prototype=Object.assign(Object.create(Wr.prototype),{constructor:Li,load:function(e,t,n,r){var i=this,o=new qr(i.manager);o.setPath(i.path),o.load(e,(function(e){t(i.parse(JSON.parse(e)))}),n,r)},parse:function(e){var t=e.isInstancedBufferGeometry?new Ci:new H,n=e.data.index;if(void 0!==n){var r=new Xc[n.type](n.array);t.setIndex(new O(r,1))}for(var i in n=e.data.attributes,n){var o=n[i];r=new Xc[o.type](o.array),r=new(o.isInstancedBufferAttribute?Ii:O)(r,o.itemSize,o.normalized),void 0!==o.name&&(r.name=o.name),t.setAttribute(i,r)}var a=e.data.morphAttributes;if(a)for(i in a){var s=a[i],c=[];n=0;for(var l=s.length;n<l;n++)o=s[n],r=new Xc[o.type](o.array),r=new O(r,o.itemSize,o.normalized),void 0!==o.name&&(r.name=o.name),c.push(r);t.morphAttributes[i]=c}if(e.data.morphTargetsRelative&&(t.morphTargetsRelative=!0),i=e.data.groups||e.data.drawcalls||e.data.offsets,void 0!==i)for(n=0,o=i.length;n!==o;++n)r=i[n],t.addGroup(r.start,r.count,r.materialIndex);return n=e.data.boundingSphere,void 0!==n&&(i=new u,void 0!==n.center&&i.fromArray(n.center),t.boundingSphere=new g(i,n.radius)),e.name&&(t.name=e.name),e.userData&&(t.userData=e.userData),t}});var Xc={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!==typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};Di.prototype=Object.assign(Object.create(Wr.prototype),{constructor:Di,load:function(e,t,n,r){var i=this,o=""===this.path?Yc.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o,o=new qr(i.manager),o.setPath(this.path),o.load(e,(function(n){var o=null;try{o=JSON.parse(n)}catch(a){return void 0!==r&&r(a),void console.error("THREE:ObjectLoader: Can't parse "+e+".",a.message)}n=o.metadata,void 0===n||void 0===n.type||"geometry"===n.type.toLowerCase()?console.error("THREE.ObjectLoader: Can't load "+e):i.parse(o,t)}),n,r)},parse:function(e,t){var n=this.parseShape(e.shapes);n=this.parseGeometries(e.geometries,n);var r=this.parseImages(e.images,(function(){void 0!==t&&t(i)}));r=this.parseTextures(e.textures,r),r=this.parseMaterials(e.materials,r);var i=this.parseObject(e.object,n,r);return e.animations&&(i.animations=this.parseAnimations(e.animations)),void 0!==e.images&&0!==e.images.length||void 0===t||t(i),i},parseShape:function(e){var t={};if(void 0!==e)for(var n=0,r=e.length;n<r;n++){var i=(new vi).fromJSON(e[n]);t[i.uuid]=i}return t},parseGeometries:function(e,t){var n={};if(void 0!==e)for(var r=new Li,i=0,o=e.length;i<o;i++){var a=e[i];switch(a.type){case"PlaneGeometry":case"PlaneBufferGeometry":var s=new Bc[a.type](a.width,a.height,a.widthSegments,a.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":s=new Bc[a.type](a.width,a.height,a.depth,a.widthSegments,a.heightSegments,a.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":s=new Bc[a.type](a.radius,a.segments,a.thetaStart,a.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":s=new Bc[a.type](a.radiusTop,a.radiusBottom,a.height,a.radialSegments,a.heightSegments,a.openEnded,a.thetaStart,a.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":s=new Bc[a.type](a.radius,a.height,a.radialSegments,a.heightSegments,a.openEnded,a.thetaStart,a.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":s=new Bc[a.type](a.radius,a.widthSegments,a.heightSegments,a.phiStart,a.phiLength,a.thetaStart,a.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":s=new Bc[a.type](a.radius,a.detail);break;case"RingGeometry":case"RingBufferGeometry":s=new Bc[a.type](a.innerRadius,a.outerRadius,a.thetaSegments,a.phiSegments,a.thetaStart,a.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":s=new Bc[a.type](a.radius,a.tube,a.radialSegments,a.tubularSegments,a.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":s=new Bc[a.type](a.radius,a.tube,a.tubularSegments,a.radialSegments,a.p,a.q);break;case"TubeGeometry":case"TubeBufferGeometry":s=new Bc[a.type]((new qc[a.path.type]).fromJSON(a.path),a.tubularSegments,a.radius,a.radialSegments,a.closed);break;case"LatheGeometry":case"LatheBufferGeometry":s=new Bc[a.type](a.points,a.segments,a.phiStart,a.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":s=new Bc[a.type](a.vertices,a.indices,a.radius,a.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":s=[];for(var c=0,u=a.shapes.length;c<u;c++){var l=t[a.shapes[c]];s.push(l)}s=new Bc[a.type](s,a.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":for(s=[],c=0,u=a.shapes.length;c<u;c++)l=t[a.shapes[c]],s.push(l);c=a.options.extrudePath,void 0!==c&&(a.options.extrudePath=(new qc[c.type]).fromJSON(c)),s=new Bc[a.type](s,a.options);break;case"BufferGeometry":case"InstancedBufferGeometry":s=r.parse(a);break;case"Geometry":"THREE"in window&&"LegacyJSONLoader"in THREE?s=(new THREE.LegacyJSONLoader).parse(a,this.resourcePath).geometry:console.error('THREE.ObjectLoader: You have to import LegacyJSONLoader in order load geometry data of type "Geometry".');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+a.type+'"');continue}s.uuid=a.uuid,void 0!==a.name&&(s.name=a.name),!0===s.isBufferGeometry&&void 0!==a.userData&&(s.userData=a.userData),n[a.uuid]=s}return n},parseMaterials:function(e,t){var n={},r={};if(void 0!==e){var i=new Ri;i.setTextures(t),t=0;for(var o=e.length;t<o;t++){var a=e[t];if("MultiMaterial"===a.type){for(var s=[],c=0;c<a.materials.length;c++){var u=a.materials[c];void 0===n[u.uuid]&&(n[u.uuid]=i.parse(u)),s.push(n[u.uuid])}r[a.uuid]=s}else void 0===n[a.uuid]&&(n[a.uuid]=i.parse(a)),r[a.uuid]=n[a.uuid]}}return r},parseAnimations:function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n],i=jr.parse(r);void 0!==r.uuid&&(i.uuid=r.uuid),t.push(i)}return t},parseImages:function(e,t){function n(e){return r.manager.itemStart(e),o.load(e,(function(){r.manager.itemEnd(e)}),void 0,(function(){r.manager.itemError(e),r.manager.itemEnd(e)}))}var r=this,i={};if(void 0!==e&&0<e.length){t=new zr(t);var o=new Kr(t);o.setCrossOrigin(this.crossOrigin),t=0;for(var a=e.length;t<a;t++){var s=e[t],c=s.url;if(Array.isArray(c)){i[s.uuid]=[];for(var u=0,l=c.length;u<l;u++){var h=c[u];h=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(h)?h:r.resourcePath+h,i[s.uuid].push(n(h))}}else h=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(s.url)?s.url:r.resourcePath+s.url,i[s.uuid]=n(h)}}return i},parseTextures:function(e,t){function n(e,t){return"number"===typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}var r={};if(void 0!==e)for(var o=0,a=e.length;o<a;o++){var s=e[o];void 0===s.image&&console.warn('THREE.ObjectLoader: No "image" specified for',s.uuid),void 0===t[s.image]&&console.warn("THREE.ObjectLoader: Undefined image",s.image);var c=Array.isArray(t[s.image])?new me(t[s.image]):new i(t[s.image]);c.needsUpdate=!0,c.uuid=s.uuid,void 0!==s.name&&(c.name=s.name),void 0!==s.mapping&&(c.mapping=n(s.mapping,Qc)),void 0!==s.offset&&c.offset.fromArray(s.offset),void 0!==s.repeat&&c.repeat.fromArray(s.repeat),void 0!==s.center&&c.center.fromArray(s.center),void 0!==s.rotation&&(c.rotation=s.rotation),void 0!==s.wrap&&(c.wrapS=n(s.wrap[0],Kc),c.wrapT=n(s.wrap[1],Kc)),void 0!==s.format&&(c.format=s.format),void 0!==s.type&&(c.type=s.type),void 0!==s.encoding&&(c.encoding=s.encoding),void 0!==s.minFilter&&(c.minFilter=n(s.minFilter,Jc)),void 0!==s.magFilter&&(c.magFilter=n(s.magFilter,Jc)),void 0!==s.anisotropy&&(c.anisotropy=s.anisotropy),void 0!==s.flipY&&(c.flipY=s.flipY),void 0!==s.premultiplyAlpha&&(c.premultiplyAlpha=s.premultiplyAlpha),void 0!==s.unpackAlignment&&(c.unpackAlignment=s.unpackAlignment),r[s.uuid]=c}return r},parseObject:function(e,t,n){function r(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function i(e){if(void 0!==e){if(Array.isArray(e)){for(var t=[],r=0,i=e.length;r<i;r++){var o=e[r];void 0===n[o]&&console.warn("THREE.ObjectLoader: Undefined material",o),t.push(n[o])}return t}return void 0===n[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),n[e]}}switch(e.type){case"Scene":var o=new p;void 0!==e.background&&Number.isInteger(e.background)&&(o.background=new E(e.background)),void 0!==e.fog&&("Fog"===e.fog.type?o.fog=new Wt(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(o.fog=new zt(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":o=new Q(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(o.focus=e.focus),void 0!==e.zoom&&(o.zoom=e.zoom),void 0!==e.filmGauge&&(o.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(o.filmOffset=e.filmOffset),void 0!==e.view&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new Ti(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(o.zoom=e.zoom),void 0!==e.view&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new Mi(e.color,e.intensity);break;case"DirectionalLight":o=new Si(e.color,e.intensity);break;case"PointLight":o=new _i(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new Oi(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new Ei(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new yi(e.color,e.groundColor,e.intensity);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":o=r(e.geometry);var a=i(e.material);o=o.bones&&0<o.bones.length?new Zt(o,a):new j(o,a);break;case"InstancedMesh":o=r(e.geometry),a=i(e.material);var s=e.instanceMatrix;o=new tn(o,a,e.count),o.instanceMatrix=new O(new Float32Array(s.array),16);break;case"LOD":o=new Jt;break;case"Line":o=new rn(r(e.geometry),i(e.material),e.mode);break;case"LineLoop":o=new an(r(e.geometry),i(e.material));break;case"LineSegments":o=new on(r(e.geometry),i(e.material));break;case"PointCloud":case"Points":o=new cn(r(e.geometry),i(e.material));break;case"Sprite":o=new Qt(i(e.material));break;case"Group":o=new jt;break;default:o=new d}if(o.uuid=e.uuid,void 0!==e.name&&(o.name=e.name),void 0!==e.matrix?(o.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(void 0!==e.position&&o.position.fromArray(e.position),void 0!==e.rotation&&o.rotation.fromArray(e.rotation),void 0!==e.quaternion&&o.quaternion.fromArray(e.quaternion),void 0!==e.scale&&o.scale.fromArray(e.scale)),void 0!==e.castShadow&&(o.castShadow=e.castShadow),void 0!==e.receiveShadow&&(o.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(o.shadow.bias=e.shadow.bias),void 0!==e.shadow.radius&&(o.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&o.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(o.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(o.visible=e.visible),void 0!==e.frustumCulled&&(o.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(o.renderOrder=e.renderOrder),void 0!==e.userData&&(o.userData=e.userData),void 0!==e.layers&&(o.layers.mask=e.layers),void 0!==e.children)for(s=e.children,a=0;a<s.length;a++)o.add(this.parseObject(s[a],t,n));if("LOD"===e.type)for(void 0!==e.autoUpdate&&(o.autoUpdate=e.autoUpdate),e=e.levels,s=0;s<e.length;s++){a=e[s];var c=o.getObjectByProperty("uuid",a.object);void 0!==c&&o.addLevel(c,a.distance)}return o}});var Qc={UVMapping:300,CubeReflectionMapping:301,CubeRefractionMapping:302,EquirectangularReflectionMapping:303,EquirectangularRefractionMapping:304,SphericalReflectionMapping:305,CubeUVReflectionMapping:306,CubeUVRefractionMapping:307},Kc={RepeatWrapping:1e3,ClampToEdgeWrapping:1001,MirroredRepeatWrapping:1002},Jc={NearestFilter:1003,NearestMipmapNearestFilter:1004,NearestMipmapLinearFilter:1005,LinearFilter:1006,LinearMipmapNearestFilter:1007,LinearMipmapLinearFilter:1008};Pi.prototype=Object.assign(Object.create(Wr.prototype),{constructor:Pi,setOptions:function(e){return this.options=e,this},load:function(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,o=Uc.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout((function(){t&&t(o),i.manager.itemEnd(e)}),0),o;fetch(e).then((function(e){return e.blob()})).then((function(e){return void 0===i.options?createImageBitmap(e):createImageBitmap(e,i.options)})).then((function(n){Uc.add(e,n),t&&t(n),i.manager.itemEnd(e)})).catch((function(t){r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)})),i.manager.itemStart(e)}}),Object.assign(Ni.prototype,{moveTo:function(e,t){return this.currentPath=new mi,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this},lineTo:function(e,t){return this.currentPath.lineTo(e,t),this},quadraticCurveTo:function(e,t,n,r){return this.currentPath.quadraticCurveTo(e,t,n,r),this},bezierCurveTo:function(e,t,n,r,i,o){return this.currentPath.bezierCurveTo(e,t,n,r,i,o),this},splineThru:function(e){return this.currentPath.splineThru(e),this},toShapes:function(e,t){function n(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n],o=new vi;o.curves=i.curves,t.push(o)}return t}function r(e,t){for(var n=t.length,r=!1,i=n-1,o=0;o<n;i=o++){var a=t[i],s=t[o],c=s.x-a.x,u=s.y-a.y;if(Math.abs(u)>Number.EPSILON){if(0>u&&(a=t[o],c=-c,s=t[i],u=-u),!(e.y<a.y||e.y>s.y))if(e.y===a.y){if(e.x===a.x)return!0}else{if(i=u*(e.x-a.x)-c*(e.y-a.y),0===i)return!0;0>i||(r=!r)}}else if(e.y===a.y&&(s.x<=e.x&&e.x<=a.x||a.x<=e.x&&e.x<=s.x))return!0}return r}var i=Pc.isClockWise,o=this.subPaths;if(0===o.length)return[];if(!0===t)return n(o);if(t=[],1===o.length){var a=o[0],s=new vi;return s.curves=a.curves,t.push(s),t}var c=!i(o[0].getPoints());c=e?!c:c,s=[];var u=[],l=[],h=0;u[h]=void 0,l[h]=[];for(var f=0,d=o.length;f<d;f++){a=o[f];var p=a.getPoints(),m=i(p);(m=e?!m:m)?(!c&&u[h]&&h++,u[h]={s:new vi,p:p},u[h].s.curves=a.curves,c&&h++,l[h]=[]):l[h].push({h:a,p:p[0]})}if(!u[0])return n(o);if(1<u.length){for(f=!1,e=[],i=0,o=u.length;i<o;i++)s[i]=[];for(i=0,o=u.length;i<o;i++)for(a=l[i],m=0;m<a.length;m++){for(c=a[m],h=!0,p=0;p<u.length;p++)r(c.p,u[p].p)&&(i!==p&&e.push({froms:i,tos:p,hole:m}),h?(h=!1,s[p].push(c)):f=!0);h&&s[i].push(c)}0<e.length&&(f||(l=s))}for(f=0,i=u.length;f<i;f++)for(s=u[f].s,t.push(s),e=l[f],o=0,a=e.length;o<a;o++)s.holes.push(e[o].h);return t}}),Object.assign(Bi.prototype,{isFont:!0,generateShapes:function(e,t){void 0===t&&(t=100);var n=[],r=t;t=this.data;var i=Array.from?Array.from(e):String(e).split("");r/=t.resolution;var o=(t.boundingBox.yMax-t.boundingBox.yMin+t.underlineThickness)*r;e=[];for(var a=0,s=0,c=0;c<i.length;c++){var u=i[c];if("\n"===u)a=0,s-=o;else{var l=u;u=r;var h=a,f=s,d=t,p=d.glyphs[l]||d.glyphs["?"];if(p){if(l=new Ni,p.o){d=p._cachedOutline||(p._cachedOutline=p.o.split(" "));for(var m=0,v=d.length;m<v;)switch(d[m++]){case"m":var g=d[m++]*u+h,y=d[m++]*u+f;l.moveTo(g,y);break;case"l":g=d[m++]*u+h,y=d[m++]*u+f,l.lineTo(g,y);break;case"q":var b=d[m++]*u+h,w=d[m++]*u+f,E=d[m++]*u+h,x=d[m++]*u+f;l.quadraticCurveTo(E,x,b,w);break;case"b":b=d[m++]*u+h,w=d[m++]*u+f,E=d[m++]*u+h,x=d[m++]*u+f,g=d[m++]*u+h,y=d[m++]*u+f,l.bezierCurveTo(E,x,g,y,b,w)}}u={offsetX:p.ha*u,path:l}}else console.error('THREE.Font: character "'+l+'" does not exists in font family '+d.familyName+"."),u=void 0;a+=u.offsetX,e.push(u.path)}}for(t=0,i=e.length;t<i;t++)Array.prototype.push.apply(n,e[t].toShapes());return n}}),ki.prototype=Object.assign(Object.create(Wr.prototype),{constructor:ki,load:function(e,t,n,r){var i=this,o=new qr(this.manager);o.setPath(this.path),o.load(e,(function(e){try{var n=JSON.parse(e)}catch(r){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),n=JSON.parse(e.substring(65,e.length-2))}e=i.parse(n),t&&t(e)}),n,r)},parse:function(e){return new Bi(e)}});var Zc,$c={getContext:function(){return void 0===Zc&&(Zc=new(window.AudioContext||window.webkitAudioContext)),Zc},setContext:function(e){Zc=e}};Fi.prototype=Object.assign(Object.create(Wr.prototype),{constructor:Fi,load:function(e,t,n,r){var i=new qr(this.manager);i.setResponseType("arraybuffer"),i.setPath(this.path),i.load(e,(function(e){e=e.slice(0),$c.getContext().decodeAudioData(e,(function(e){t(e)}))}),n,r)}}),Object.assign(Ui.prototype,{isSphericalHarmonics3:!0,set:function(e){for(var t=0;9>t;t++)this.coefficients[t].copy(e[t]);return this},zero:function(){for(var e=0;9>e;e++)this.coefficients[e].set(0,0,0);return this},getAt:function(e,t){var n=e.x,r=e.y;e=e.z;var i=this.coefficients;return t.copy(i[0]).multiplyScalar(.282095),t.addScale(i[1],.488603*r),t.addScale(i[2],.488603*e),t.addScale(i[3],.488603*n),t.addScale(i[4],1.092548*n*r),t.addScale(i[5],1.092548*r*e),t.addScale(i[6],.315392*(3*e*e-1)),t.addScale(i[7],1.092548*n*e),t.addScale(i[8],.546274*(n*n-r*r)),t},getIrradianceAt:function(e,t){var n=e.x,r=e.y;e=e.z;var i=this.coefficients;return t.copy(i[0]).multiplyScalar(.886227),t.addScale(i[1],1.023328*r),t.addScale(i[2],1.023328*e),t.addScale(i[3],1.023328*n),t.addScale(i[4],.858086*n*r),t.addScale(i[5],.858086*r*e),t.addScale(i[6],.743125*e*e-.247708),t.addScale(i[7],.858086*n*e),t.addScale(i[8],.429043*(n*n-r*r)),t},add:function(e){for(var t=0;9>t;t++)this.coefficients[t].add(e.coefficients[t]);return this},scale:function(e){for(var t=0;9>t;t++)this.coefficients[t].multiplyScalar(e);return this},lerp:function(e,t){for(var n=0;9>n;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this},equals:function(e){for(var t=0;9>t;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0},copy:function(e){return this.set(e.coefficients)},clone:function(){return(new this.constructor).copy(this)},fromArray:function(e,t){void 0===t&&(t=0);for(var n=this.coefficients,r=0;9>r;r++)n[r].fromArray(e,t+3*r);return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);for(var n=this.coefficients,r=0;9>r;r++)n[r].toArray(e,t+3*r);return e}}),Object.assign(Ui,{getBasisAt:function(e,t){var n=e.x,r=e.y;e=e.z,t[0]=.282095,t[1]=.488603*r,t[2]=.488603*e,t[3]=.488603*n,t[4]=1.092548*n*r,t[5]=1.092548*r*e,t[6]=.315392*(3*e*e-1),t[7]=1.092548*n*e,t[8]=.546274*(n*n-r*r)}}),Hi.prototype=Object.assign(Object.create(gi.prototype),{constructor:Hi,isLightProbe:!0,copy:function(e){return gi.prototype.copy.call(this,e),this.sh.copy(e.sh),this.intensity=e.intensity,this},toJSON:function(e){return gi.prototype.toJSON.call(this,e)}}),ji.prototype=Object.assign(Object.create(Hi.prototype),{constructor:ji,isHemisphereLightProbe:!0,copy:function(e){return Hi.prototype.copy.call(this,e),this},toJSON:function(e){return Hi.prototype.toJSON.call(this,e)}}),Gi.prototype=Object.assign(Object.create(Hi.prototype),{constructor:Gi,isAmbientLightProbe:!0,copy:function(e){return Hi.prototype.copy.call(this,e),this},toJSON:function(e){return Hi.prototype.toJSON.call(this,e)}});var eu=new l,tu=new l;Object.assign(Vi.prototype,{update:function(e){var t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep;var n=e.projectionMatrix.clone(),r=t.eyeSep/2,i=r*t.near/t.focus,o=t.near*Math.tan(Wo.DEG2RAD*t.fov*.5)/t.zoom;tu.elements[12]=-r,eu.elements[12]=r,r=-o*t.aspect+i;var a=o*t.aspect+i;n.elements[0]=2*t.near/(a-r),n.elements[8]=(a+r)/(a-r),this.cameraL.projectionMatrix.copy(n),r=-o*t.aspect-i,a=o*t.aspect-i,n.elements[0]=2*t.near/(a-r),n.elements[8]=(a+r)/(a-r),this.cameraR.projectionMatrix.copy(n)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(tu),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(eu)}}),Object.assign(zi.prototype,{start:function(){this.oldTime=this.startTime=("undefined"===typeof performance?Date:performance).now(),this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.autoStart=this.running=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var t=("undefined"===typeof performance?Date:performance).now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}});var nu=new u,ru=new c,iu=new u,ou=new u;Wi.prototype=Object.assign(Object.create(d.prototype),{constructor:Wi,getInput:function(){return this.gain},removeFilter:function(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this},getFilter:function(){return this.filter},setFilter:function(e){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this},updateMatrixWorld:function(e){d.prototype.updateMatrixWorld.call(this,e),e=this.context.listener;var t=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(nu,ru,iu),ou.set(0,0,-1).applyQuaternion(ru),e.positionX){var n=this.context.currentTime+this.timeDelta;e.positionX.linearRampToValueAtTime(nu.x,n),e.positionY.linearRampToValueAtTime(nu.y,n),e.positionZ.linearRampToValueAtTime(nu.z,n),e.forwardX.linearRampToValueAtTime(ou.x,n),e.forwardY.linearRampToValueAtTime(ou.y,n),e.forwardZ.linearRampToValueAtTime(ou.z,n),e.upX.linearRampToValueAtTime(t.x,n),e.upY.linearRampToValueAtTime(t.y,n),e.upZ.linearRampToValueAtTime(t.z,n)}else e.setPosition(nu.x,nu.y,nu.z),e.setOrientation(ou.x,ou.y,ou.z,t.x,t.y,t.z)}}),qi.prototype=Object.assign(Object.create(d.prototype),{constructor:qi,getOutput:function(){return this.gain},setNodeSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this},setMediaElementSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this},setMediaStreamSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this},setBuffer:function(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(e){if(void 0===e&&(e=0),!0===this.isPlaying)console.warn("THREE.Audio: Audio is already playing.");else{if(!1!==this.hasPlaybackControl)return this._startedAt=this.context.currentTime+e,e=this.context.createBufferSource(),e.buffer=this.buffer,e.loop=this.loop,e.loopStart=this.loopStart,e.loopEnd=this.loopEnd,e.onended=this.onEnded.bind(this),e.start(this._startedAt,this._pausedAt+this.offset,this.duration),this.isPlaying=!0,this.source=e,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect();console.warn("THREE.Audio: this Audio has no playback control.")}},pause:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._pausedAt=(this.context.currentTime-this._startedAt)*this.playbackRate,this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")},stop:function(){if(!1!==this.hasPlaybackControl)return this._pausedAt=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")},connect:function(){if(0<this.filters.length){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(0<this.filters.length){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(e){return e||(e=[]),!0===this.isPlaying?(this.disconnect(),this.filters=e,this.connect()):this.filters=e,this},setDetune:function(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this},getDetune:function(){return this.detune},getFilter:function(){return this.getFilters()[0]},setFilter:function(e){return this.setFilters(e?[e]:[])},setPlaybackRate:function(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")},setLoopStart:function(e){return this.loopStart=e,this},setLoopEnd:function(e){return this.loopEnd=e,this},getVolume:function(){return this.gain.gain.value},setVolume:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}});var au=new u,su=new c,cu=new u,uu=new u;Yi.prototype=Object.assign(Object.create(qi.prototype),{constructor:Yi,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(e){return this.panner.refDistance=e,this},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(e){return this.panner.rolloffFactor=e,this},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(e){return this.panner.distanceModel=e,this},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(e){return this.panner.maxDistance=e,this},setDirectionalCone:function(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this},updateMatrixWorld:function(e){if(d.prototype.updateMatrixWorld.call(this,e),!0!==this.hasPlaybackControl||!1!==this.isPlaying)if(this.matrixWorld.decompose(au,su,cu),uu.set(0,0,1).applyQuaternion(su),e=this.panner,e.positionX){var t=this.context.currentTime+this.listener.timeDelta;e.positionX.linearRampToValueAtTime(au.x,t),e.positionY.linearRampToValueAtTime(au.y,t),e.positionZ.linearRampToValueAtTime(au.z,t),e.orientationX.linearRampToValueAtTime(uu.x,t),e.orientationY.linearRampToValueAtTime(uu.y,t),e.orientationZ.linearRampToValueAtTime(uu.z,t)}else e.setPosition(au.x,au.y,au.z),e.setOrientation(uu.x,uu.y,uu.z)}}),Object.assign(Xi.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var e=0,t=this.getFrequencyData(),n=0;n<t.length;n++)e+=t[n];return e/t.length}}),Object.assign(Qi.prototype,{accumulate:function(e,t){var n=this.buffer,r=this.valueSize;e=e*r+r;var i=this.cumulativeWeight;if(0===i){for(i=0;i!==r;++i)n[e+i]=n[i];i=t}else i+=t,this._mixBufferRegion(n,e,0,t/i,r);this.cumulativeWeight=i},apply:function(e){var t=this.valueSize,n=this.buffer;e=e*t+t;var r=this.cumulativeWeight,i=this.binding;this.cumulativeWeight=0,1>r&&this._mixBufferRegion(n,e,3*t,1-r,t),r=t;for(var o=t+t;r!==o;++r)if(n[r]!==n[r+t]){i.setValue(n,e);break}},saveOriginalState:function(){var e=this.buffer,t=this.valueSize,n=3*t;this.binding.getValue(e,n);for(var r=t;r!==n;++r)e[r]=e[n+r%t];this.cumulativeWeight=0},restoreOriginalState:function(){this.binding.setValue(this.buffer,3*this.valueSize)},_select:function(e,t,n,r,i){if(.5<=r)for(r=0;r!==i;++r)e[t+r]=e[n+r]},_slerp:function(e,t,n,r){c.slerpFlat(e,t,e,t,e,n,r)},_lerp:function(e,t,n,r,i){for(var o=1-r,a=0;a!==i;++a){var s=t+a;e[s]=e[s]*o+e[n+a]*r}}});var lu=/[\[\]\.:\/]/g,hu="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",fu=/((?:WC+[\/:])*)/.source.replace("WC","[^\\[\\]\\.:\\/]"),du=/(WCOD+)?/.source.replace("WCOD",hu),pu=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC","[^\\[\\]\\.:\\/]"),mu=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC","[^\\[\\]\\.:\\/]"),vu=new RegExp("^"+fu+du+pu+mu+"$"),gu=["material","materials","bones"];Object.assign(Ki.prototype,{getValue:function(e,t){this.bind();var n=this._bindings[this._targetGroup.nCachedObjects_];void 0!==n&&n.getValue(e,t)},setValue:function(e,t){for(var n=this._bindings,r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(e,t)},bind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()},unbind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}),Object.assign(Ji,{Composite:Ki,create:function(e,t,n){return e&&e.isAnimationObjectGroup?new Ji.Composite(e,t,n):new Ji(e,t,n)},sanitizeNodeName:function(e){return e.replace(/\s/g,"_").replace(lu,"")},parseTrackName:function(e){var t=vu.exec(e);if(!t)throw Error("PropertyBinding: Cannot parse trackName: "+e);t={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]};var n=t.nodeName&&t.nodeName.lastIndexOf(".");if(void 0!==n&&-1!==n){var r=t.nodeName.substring(n+1);-1!==gu.indexOf(r)&&(t.nodeName=t.nodeName.substring(0,n),t.objectName=r)}if(null===t.propertyName||0===t.propertyName.length)throw Error("PropertyBinding: can not parse propertyName from trackName: "+e);return t},findNode:function(e,t){if(!t||""===t||"root"===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){var n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){var r=function(e){for(var n=0;n<e.length;n++){var i=e[n];if(i.name===t||i.uuid===t||(i=r(i.children)))return i}return null};if(e=r(e.children))return e}return null}}),Object.assign(Ji.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(e,t){e[t]=this.node[this.propertyName]},function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)e[t++]=n[r]},function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]},function(e,t){this.resolvedProperty.toArray(e,t)}],SetterByBindingTypeAndVersioning:[[function(e,t){this.targetObject[this.propertyName]=e[t]},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++]},function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0},function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty.fromArray(e,t)},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(e,t){this.bind(),this.getValue(e,t)},setValue:function(e,t){this.bind(),this.setValue(e,t)},bind:function(){var e=this.node,t=this.parsedPath,n=t.objectName,r=t.propertyName,i=t.propertyIndex;if(e||(this.node=e=Ji.findNode(this.rootNode,t.nodeName)||this.rootNode),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,e){if(n){var o=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);for(e=e.skeleton.bones,n=0;n<e.length;n++)if(e[n].name===o){o=n;break}break;default:if(void 0===e[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n]}if(void 0!==o){if(void 0===e[o])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[o]}}if(o=e[r],void 0===o)console.error("THREE.PropertyBinding: Trying to update property for track: "+t.nodeName+"."+r+" but it wasn't found.",e);else{if(t=this.Versioning.None,this.targetObject=e,void 0!==e.needsUpdate?t=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(t=this.Versioning.MatrixWorldNeedsUpdate),n=this.BindingType.Direct,void 0!==i){if("morphTargetInfluences"===r){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(e.geometry.isBufferGeometry){if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);for(n=0;n<this.node.geometry.morphAttributes.position.length;n++)if(e.geometry.morphAttributes.position[n].name===i){i=n;break}}else{if(!e.geometry.morphTargets)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",this);for(n=0;n<this.node.geometry.morphTargets.length;n++)if(e.geometry.morphTargets[n].name===i){i=n;break}}}n=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=i}else void 0!==o.fromArray&&void 0!==o.toArray?(n=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(n=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[n],this.setValue=this.SetterByBindingTypeAndVersioning[n][t]}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(Ji.prototype,{_getValue_unbound:Ji.prototype.getValue,_setValue_unbound:Ji.prototype.setValue}),Object.assign(Zi.prototype,{isAnimationObjectGroup:!0,add:function(){for(var e=this._objects,t=e.length,n=this.nCachedObjects_,r=this._indicesByUUID,i=this._paths,o=this._parsedPaths,a=this._bindings,s=a.length,c=void 0,u=0,l=arguments.length;u!==l;++u){var h=arguments[u],f=h.uuid,d=r[f];if(void 0===d){d=t++,r[f]=d,e.push(h),f=0;for(var p=s;f!==p;++f)a[f].push(new Ji(h,i[f],o[f]))}else if(d<n){c=e[d];var m=--n;for(p=e[m],r[p.uuid]=d,e[d]=p,r[f]=m,e[m]=h,f=0,p=s;f!==p;++f){var v=a[f],g=v[d];v[d]=v[m],void 0===g&&(g=new Ji(h,i[f],o[f])),v[m]=g}}else e[d]!==c&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=n},remove:function(){for(var e=this._objects,t=this.nCachedObjects_,n=this._indicesByUUID,r=this._bindings,i=r.length,o=0,a=arguments.length;o!==a;++o){var s=arguments[o],c=s.uuid,u=n[c];if(void 0!==u&&u>=t){var l=t++,h=e[l];for(n[h.uuid]=u,e[u]=h,n[c]=l,e[l]=s,s=0,c=i;s!==c;++s){h=r[s];var f=h[u];h[u]=h[l],h[l]=f}}}this.nCachedObjects_=t},uncache:function(){for(var e=this._objects,t=e.length,n=this.nCachedObjects_,r=this._indicesByUUID,i=this._bindings,o=i.length,a=0,s=arguments.length;a!==s;++a){var c=arguments[a].uuid,u=r[c];if(void 0!==u)if(delete r[c],u<n){c=--n;var l=e[c],h=--t,f=e[h];for(r[l.uuid]=u,e[u]=l,r[f.uuid]=c,e[c]=f,e.pop(),l=0,f=o;l!==f;++l){var d=i[l],p=d[h];d[u]=d[c],d[c]=p,d.pop()}}else for(h=--t,f=e[h],r[f.uuid]=u,e[u]=f,e.pop(),l=0,f=o;l!==f;++l)d=i[l],d[u]=d[h],d.pop()}this.nCachedObjects_=n},subscribe_:function(e,t){var n=this._bindingsIndicesByPath,r=n[e],i=this._bindings;if(void 0!==r)return i[r];var o=this._paths,a=this._parsedPaths,s=this._objects,c=this.nCachedObjects_,u=Array(s.length);for(r=i.length,n[e]=r,o.push(e),a.push(t),i.push(u),n=c,r=s.length;n!==r;++n)u[n]=new Ji(s[n],e,t);return u},unsubscribe_:function(e){var t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){var r=this._paths,i=this._parsedPaths,o=this._bindings,a=o.length-1,s=o[a];t[e[a]]=n,o[n]=s,o.pop(),i[n]=i[a],i.pop(),r[n]=r[a],r.pop()}}}),Object.assign($i.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(e){return this._startTime=e,this},setLoop:function(e,t){return this.loop=e,this.repetitions=t,this},setEffectiveWeight:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(e){return this._scheduleFading(e,0,1)},fadeOut:function(e){return this._scheduleFading(e,1,0)},crossFadeFrom:function(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){n=this._clip.duration;var r=e._clip.duration,i=n/r;e.warp(1,r/n,t),this.warp(i,1,t)}return this},crossFadeTo:function(e,t,n){return e.crossFadeFrom(this,t,n)},stopFading:function(){var e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},setEffectiveTimeScale:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()},syncWith:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()},halt:function(e){return this.warp(this._effectiveTimeScale,0,e)},warp:function(e,t,n){var r=this._mixer,i=r.time,o=this._timeScaleInterpolant,a=this.timeScale;return null===o&&(this._timeScaleInterpolant=o=r._lendControlInterpolant()),r=o.parameterPositions,o=o.sampleValues,r[0]=i,r[1]=i+n,o[0]=e/a,o[1]=t/a,this},stopWarping:function(){var e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(e,t,n,r){if(this.enabled){var i=this._startTime;if(null!==i){if(t=(e-i)*n,0>t||0===n)return;this._startTime=null,t*=n}if(t*=this._updateTimeScale(e),n=this._updateTime(t),e=this._updateWeight(e),0<e){t=this._interpolants,i=this._propertyBindings;for(var o=0,a=t.length;o!==a;++o)t[o].evaluate(n),i[o].accumulate(r,e)}}else this._updateWeight(e)},_updateWeight:function(e){var t=0;if(this.enabled){t=this.weight;var n=this._weightInterpolant;if(null!==n){var r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=t},_updateTimeScale:function(e){var t=0;if(!this.paused){t=this.timeScale;var n=this._timeScaleInterpolant;if(null!==n){var r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t},_updateTime:function(e){var t=this.time+e,n=this._clip.duration,r=this.loop,i=this._loopCount,o=2202===r;if(0===e)return-1===i?t:o&&1===(1&i)?n-t:t;if(2200===r)e:{if(-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1)),t>=n)t=n;else{if(!(0>t)){this.time=t;break e}t=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=t,this._mixer.dispatchEvent({type:"finished",action:this,direction:0>e?-1:1})}else{if(-1===i&&(0<=e?(i=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),t>=n||0>t){r=Math.floor(t/n),t-=n*r,i+=Math.abs(r);var a=this.repetitions-i;0>=a?(this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=t=0<e?n:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:0<e?1:-1})):(1===a?(e=0>e,this._setEndings(e,!e,o)):this._setEndings(!1,!1,o),this._loopCount=i,this.time=t,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:r}))}else this.time=t;if(o&&1===(1&i))return n-t}return t},_setEndings:function(e,t,n){var r=this._interpolantSettings;n?(r.endingStart=2401,r.endingEnd=2401):(r.endingStart=e?this.zeroSlopeAtStart?2401:2400:2402,r.endingEnd=t?this.zeroSlopeAtEnd?2401:2400:2402)},_scheduleFading:function(e,t,n){var r=this._mixer,i=r.time,o=this._weightInterpolant;return null===o&&(this._weightInterpolant=o=r._lendControlInterpolant()),r=o.parameterPositions,o=o.sampleValues,r[0]=i,o[0]=t,r[1]=i+e,o[1]=n,this}}),eo.prototype=Object.assign(Object.create(t.prototype),{constructor:eo,_bindAction:function(e,t){var n=e._localRoot||this._root,r=e._clip.tracks,i=r.length,o=e._propertyBindings;e=e._interpolants;var a=n.uuid,s=this._bindingsByRootAndName,c=s[a];for(void 0===c&&(c={},s[a]=c),s=0;s!==i;++s){var u=r[s],l=u.name,h=c[l];if(void 0===h){if(h=o[s],void 0!==h){null===h._cacheIndex&&(++h.referenceCount,this._addInactiveBinding(h,a,l));continue}h=new Qi(Ji.create(n,l,t&&t._propertyBindings[s].binding.parsedPath),u.ValueTypeName,u.getValueSize()),++h.referenceCount,this._addInactiveBinding(h,a,l)}o[s]=h,e[s].resultBuffer=h.buffer}},_activateAction:function(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){var t=(e._localRoot||this._root).uuid,n=e._clip.uuid,r=this._actionsByClip[n];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,n,t)}for(t=e._propertyBindings,n=0,r=t.length;n!==r;++n){var i=t[n];0===i.useCount++&&(this._lendBinding(i),i.saveOriginalState())}this._lendAction(e)}},_deactivateAction:function(e){if(this._isActiveAction(e)){for(var t=e._propertyBindings,n=0,r=t.length;n!==r;++n){var i=t[n];0===--i.useCount&&(i.restoreOriginalState(),this._takeBackBinding(i))}this._takeBackAction(e)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}},_isActiveAction:function(e){return e=e._cacheIndex,null!==e&&e<this._nActiveActions},_addInactiveAction:function(e,t,n){var r=this._actions,i=this._actionsByClip,o=i[t];void 0===o?(o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,i[t]=o):(t=o.knownActions,e._byClipCacheIndex=t.length,t.push(e)),e._cacheIndex=r.length,r.push(e),o.actionByRoot[n]=e},_removeInactiveAction:function(e){var t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null,t=e._clip.uuid,n=this._actionsByClip,r=n[t];var i=r.knownActions,o=i[i.length-1],a=e._byClipCacheIndex;o._byClipCacheIndex=a,i[a]=o,i.pop(),e._byClipCacheIndex=null,delete r.actionByRoot[(e._localRoot||this._root).uuid],0===i.length&&delete n[t],this._removeInactiveBindingsForAction(e)},_removeInactiveBindingsForAction:function(e){e=e._propertyBindings;for(var t=0,n=e.length;t!==n;++t){var r=e[t];0===--r.referenceCount&&this._removeInactiveBinding(r)}},_lendAction:function(e){var t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_takeBackAction:function(e){var t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_addInactiveBinding:function(e,t,n){var r=this._bindingsByRootAndName,i=r[t],o=this._bindings;void 0===i&&(i={},r[t]=i),i[n]=e,e._cacheIndex=o.length,o.push(e)},_removeInactiveBinding:function(e){var t=this._bindings,n=e.binding,r=n.rootNode.uuid;n=n.path;var i=this._bindingsByRootAndName,o=i[r],a=t[t.length-1];e=e._cacheIndex,a._cacheIndex=e,t[e]=a,t.pop(),delete o[n],0===Object.keys(o).length&&delete i[r]},_lendBinding:function(e){var t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_takeBackBinding:function(e){var t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_lendControlInterpolant:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,n=e[t];return void 0===n&&(n=new Ir(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),n.__cacheIndex=t,e[t]=n),n},_takeBackControlInterpolant:function(e){var t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,i=t[r];e.__cacheIndex=r,t[r]=e,i.__cacheIndex=n,t[n]=i},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(e,t){var n=t||this._root,r=n.uuid;n="string"===typeof e?jr.findByName(n,e):e,e=null!==n?n.uuid:e;var i=this._actionsByClip[e],o=null;if(void 0!==i){if(o=i.actionByRoot[r],void 0!==o)return o;o=i.knownActions[0],null===n&&(n=o._clip)}return null===n?null:(t=new $i(this,n,t),this._bindAction(t,o),this._addInactiveAction(t,e,r),t)},existingAction:function(e,t){var n=t||this._root;return t=n.uuid,n="string"===typeof e?jr.findByName(n,e):e,e=this._actionsByClip[n?n.uuid:e],void 0!==e&&e.actionByRoot[t]||null},stopAllAction:function(){for(var e=this._actions,t=this._nActiveActions,n=this._bindings,r=this._nActiveBindings,i=this._nActiveBindings=this._nActiveActions=0;i!==t;++i)e[i].reset();for(i=0;i!==r;++i)n[i].useCount=0;return this},update:function(e){e*=this.timeScale;for(var t=this._actions,n=this._nActiveActions,r=this.time+=e,i=Math.sign(e),o=this._accuIndex^=1,a=0;a!==n;++a)t[a]._update(r,e,i,o);for(e=this._bindings,t=this._nActiveBindings,a=0;a!==t;++a)e[a].apply(o);return this},setTime:function(e){for(var t=this.time=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)},getRoot:function(){return this._root},uncacheClip:function(e){var t=this._actions;e=e.uuid;var n=this._actionsByClip,r=n[e];if(void 0!==r){r=r.knownActions;for(var i=0,o=r.length;i!==o;++i){var a=r[i];this._deactivateAction(a);var s=a._cacheIndex,c=t[t.length-1];a._cacheIndex=null,a._byClipCacheIndex=null,c._cacheIndex=s,t[s]=c,t.pop(),this._removeInactiveBindingsForAction(a)}delete n[e]}},uncacheRoot:function(e){e=e.uuid;var t=this._actionsByClip;for(r in t){var n=t[r].actionByRoot[e];void 0!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}var r=this._bindingsByRootAndName[e];if(void 0!==r)for(var i in r)e=r[i],e.restoreOriginalState(),this._removeInactiveBinding(e)},uncacheAction:function(e,t){e=this.existingAction(e,t),null!==e&&(this._deactivateAction(e),this._removeInactiveAction(e))}}),to.prototype.clone=function(){return new to(void 0===this.value.clone?this.value:this.value.clone())},no.prototype=Object.assign(Object.create(qt.prototype),{constructor:no,isInstancedInterleavedBuffer:!0,copy:function(e){return qt.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}}),Object.assign(ro.prototype,{linePrecision:1,set:function(e,t){this.ray.set(e,t)},setFromCamera:function(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(e,t,n){return n=n||[],oo(e,this,n,t),n.sort(io),n},intersectObjects:function(e,t,n){if(n=n||[],!1===Array.isArray(e))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),n;for(var r=0,i=e.length;r<i;r++)oo(e[r],this,n,t);return n.sort(io),n}}),Object.assign(ao.prototype,{set:function(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this},makeSafe:function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this},setFromVector3:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)},setFromCartesianCoords:function(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?this.phi=this.theta=0:(this.theta=Math.atan2(e,n),this.phi=Math.acos(Wo.clamp(t/this.radius,-1,1))),this}}),Object.assign(so.prototype,{set:function(e,t,n){return this.radius=e,this.theta=t,this.y=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this},setFromVector3:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)},setFromCartesianCoords:function(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}});var yu=new n;Object.assign(co.prototype,{set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(e,t){return t=yu.copy(t).multiplyScalar(.5),this.min.copy(e).sub(t),this.max.copy(e).add(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(e){return void 0===e&&(console.warn("THREE.Box2: .getCenter() target is now required"),e=new n),this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return void 0===e&&(console.warn("THREE.Box2: .getSize() target is now required"),e=new n),this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y},getParameter:function(e,t){return void 0===t&&(console.warn("THREE.Box2: .getParameter() target is now required"),t=new n),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)},clampPoint:function(e,t){return void 0===t&&(console.warn("THREE.Box2: .clampPoint() target is now required"),t=new n),t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(e){return yu.copy(e).clamp(this.min,this.max).sub(e).length()},intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}});var bu=new u,wu=new u;Object.assign(uo.prototype,{set:function(e,t){return this.start.copy(e),this.end.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.start.copy(e.start),this.end.copy(e.end),this},getCenter:function(e){return void 0===e&&(console.warn("THREE.Line3: .getCenter() target is now required"),e=new u),e.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){return void 0===e&&(console.warn("THREE.Line3: .delta() target is now required"),e=new u),e.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,t){return void 0===t&&(console.warn("THREE.Line3: .at() target is now required"),t=new u),this.delta(t).multiplyScalar(e).add(this.start)},closestPointToPointParameter:function(e,t){return bu.subVectors(e,this.start),wu.subVectors(this.end,this.start),e=wu.dot(wu),e=wu.dot(bu)/e,t&&(e=Wo.clamp(e,0,1)),e},closestPointToPoint:function(e,t,n){return e=this.closestPointToPointParameter(e,t),void 0===n&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),n=new u),this.delta(n).multiplyScalar(e).add(this.start)},applyMatrix4:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}}),lo.prototype=Object.create(d.prototype),lo.prototype.constructor=lo,lo.prototype.isImmediateRenderObject=!0;var Eu=new u;ho.prototype=Object.create(d.prototype),ho.prototype.constructor=ho,ho.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},ho.prototype.update=function(){this.light.updateMatrixWorld();var e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),Eu.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(Eu),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)};var xu=new u,_u=new l,Tu=new l;po.prototype=Object.create(on.prototype),po.prototype.constructor=po,po.prototype.updateMatrixWorld=function(e){var t=this.bones,n=this.geometry,r=n.getAttribute("position");Tu.getInverse(this.root.matrixWorld);for(var i=0,o=0;i<t.length;i++){var a=t[i];a.parent&&a.parent.isBone&&(_u.multiplyMatrices(Tu,a.matrixWorld),xu.setFromMatrixPosition(_u),r.setXYZ(o,xu.x,xu.y,xu.z),_u.multiplyMatrices(Tu,a.parent.matrixWorld),xu.setFromMatrixPosition(_u),r.setXYZ(o+1,xu.x,xu.y,xu.z),o+=2)}n.getAttribute("position").needsUpdate=!0,d.prototype.updateMatrixWorld.call(this,e)},mo.prototype=Object.create(j.prototype),mo.prototype.constructor=mo,mo.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},mo.prototype.update=function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)};var Au=new u,Su=new E,Mu=new E;vo.prototype=Object.create(d.prototype),vo.prototype.constructor=vo,vo.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},vo.prototype.update=function(){var e=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var t=e.geometry.getAttribute("color");Su.copy(this.light.color),Mu.copy(this.light.groundColor);for(var n=0,r=t.count;n<r;n++){var i=n<r/2?Su:Mu;t.setXYZ(n,i.r,i.g,i.b)}t.needsUpdate=!0}e.lookAt(Au.setFromMatrixPosition(this.light.matrixWorld).negate())},go.prototype=Object.assign(Object.create(on.prototype),{constructor:go,copy:function(e){return on.prototype.copy.call(this,e),this.geometry.copy(e.geometry),this.material.copy(e.material),this},clone:function(){return(new this.constructor).copy(this)}}),yo.prototype=Object.create(on.prototype),yo.prototype.constructor=yo;var Ou=new u,Ru=new u,Cu=new u;bo.prototype=Object.create(d.prototype),bo.prototype.constructor=bo,bo.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},bo.prototype.update=function(){Ou.setFromMatrixPosition(this.light.matrixWorld),Ru.setFromMatrixPosition(this.light.target.matrixWorld),Cu.subVectors(Ru,Ou),this.lightPlane.lookAt(Ru),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Ru),this.targetLine.scale.z=Cu.length()};var Iu=new u,Lu=new X;wo.prototype=Object.create(on.prototype),wo.prototype.constructor=wo,wo.prototype.update=function(){var e=this.geometry,t=this.pointMap;Lu.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Eo("c",t,e,Lu,0,0,-1),Eo("t",t,e,Lu,0,0,1),Eo("n1",t,e,Lu,-1,-1,-1),Eo("n2",t,e,Lu,1,-1,-1),Eo("n3",t,e,Lu,-1,1,-1),Eo("n4",t,e,Lu,1,1,-1),Eo("f1",t,e,Lu,-1,-1,1),Eo("f2",t,e,Lu,1,-1,1),Eo("f3",t,e,Lu,-1,1,1),Eo("f4",t,e,Lu,1,1,1),Eo("u1",t,e,Lu,.7,1.1,-1),Eo("u2",t,e,Lu,-.7,1.1,-1),Eo("u3",t,e,Lu,0,2,-1),Eo("cf1",t,e,Lu,-1,0,1),Eo("cf2",t,e,Lu,1,0,1),Eo("cf3",t,e,Lu,0,-1,1),Eo("cf4",t,e,Lu,0,1,1),Eo("cn1",t,e,Lu,-1,0,-1),Eo("cn2",t,e,Lu,1,0,-1),Eo("cn3",t,e,Lu,0,-1,-1),Eo("cn4",t,e,Lu,0,1,-1),e.getAttribute("position").needsUpdate=!0};var Du=new m;xo.prototype=Object.create(on.prototype),xo.prototype.constructor=xo,xo.prototype.update=function(e){if(void 0!==e&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&Du.setFromObject(this.object),!Du.isEmpty()){e=Du.min;var t=Du.max,n=this.geometry.attributes.position,r=n.array;r[0]=t.x,r[1]=t.y,r[2]=t.z,r[3]=e.x,r[4]=t.y,r[5]=t.z,r[6]=e.x,r[7]=e.y,r[8]=t.z,r[9]=t.x,r[10]=e.y,r[11]=t.z,r[12]=t.x,r[13]=t.y,r[14]=e.z,r[15]=e.x,r[16]=t.y,r[17]=e.z,r[18]=e.x,r[19]=e.y,r[20]=e.z,r[21]=t.x,r[22]=e.y,r[23]=e.z,n.needsUpdate=!0,this.geometry.computeBoundingSphere()}},xo.prototype.setFromObject=function(e){return this.object=e,this.update(),this},xo.prototype.copy=function(e){return on.prototype.copy.call(this,e),this.object=e.object,this},xo.prototype.clone=function(){return(new this.constructor).copy(this)},_o.prototype=Object.create(on.prototype),_o.prototype.constructor=_o,_o.prototype.updateMatrixWorld=function(e){var t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),d.prototype.updateMatrixWorld.call(this,e))},To.prototype=Object.create(rn.prototype),To.prototype.constructor=To,To.prototype.updateMatrixWorld=function(e){var t=-this.plane.constant;1e-8>Math.abs(t)&&(t=1e-8),this.scale.set(.5*this.size,.5*this.size,t),this.children[0].material.side=0>t?1:0,this.lookAt(this.plane.normal),d.prototype.updateMatrixWorld.call(this,e)};var Pu,Nu,Bu=new u;Ao.prototype=Object.create(d.prototype),Ao.prototype.constructor=Ao,Ao.prototype.setDirection=function(e){.99999<e.y?this.quaternion.set(0,0,0,1):-.99999>e.y?this.quaternion.set(1,0,0,0):(Bu.set(e.z,0,-e.x).normalize(),this.quaternion.setFromAxisAngle(Bu,Math.acos(e.y)))},Ao.prototype.setLength=function(e,t,n){void 0===t&&(t=.2*e),void 0===n&&(n=.2*t),this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()},Ao.prototype.setColor=function(e){this.line.material.color.set(e),this.cone.material.color.set(e)},Ao.prototype.copy=function(e){return d.prototype.copy.call(this,e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this},Ao.prototype.clone=function(){return(new this.constructor).copy(this)},So.prototype=Object.create(on.prototype),So.prototype.constructor=So;var ku=Math.pow(2,8),Fu=[.125,.215,.35,.446,.526,.582],Uu=5+Fu.length,Hu={3e3:0,3001:1,3002:2,3004:3,3005:4,3006:5,3007:6},ju=new Ti,Gu=function(e){var t=new Float32Array(e),n=new u(0,1,0);return e=new wr({defines:{n:e},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:t},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:n},inputEncoding:{value:Hu[3e3]},outputEncoding:{value:Hu[3e3]}},vertexShader:Fo(),fragmentShader:"\nprecision mediump float;\nprecision mediump int;\nvarying vec3 vOutputDirection;\nuniform sampler2D envMap;\nuniform int samples;\nuniform float weights[n];\nuniform bool latitudinal;\nuniform float dTheta;\nuniform float mipInt;\nuniform vec3 poleAxis;\n\n"+Uo()+"\n\n#define ENVMAP_TYPE_CUBE_UV\n#include <cube_uv_reflection_fragment>\n\nvoid main() {\n\tgl_FragColor = vec4(0.0);\n\tfor (int i = 0; i < n; i++) {\n\t\tif (i >= samples)\n\t\t\tbreak;\n\t\tfor (int dir = -1; dir < 2; dir += 2) {\n\t\t\tif (i == 0 && dir == 1)\n\t\t\t\tcontinue;\n\t\t\tvec3 axis = latitudinal ? poleAxis : cross(poleAxis, vOutputDirection);\n\t\t\tif (all(equal(axis, vec3(0.0))))\n\t\t\t\taxis = cross(vec3(0.0, 1.0, 0.0), vOutputDirection);\n\t\t\taxis = normalize(axis);\n\t\t\tfloat theta = dTheta * float(dir * i);\n\t\t\tfloat cosTheta = cos(theta);\n\t\t\t// Rodrigues' axis-angle rotation\n\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross(axis, vOutputDirection) * sin(theta)\n\t\t\t\t\t+ axis * dot(axis, vOutputDirection) * (1.0 - cosTheta);\n\t\t\tgl_FragColor.rgb +=\n\t\t\t\t\tweights[i] * bilinearCubeUV(envMap, sampleDirection, mipInt);\n\t\t}\n\t}\n\tgl_FragColor = linearToOutputTexel(gl_FragColor);\n}\n\t\t",blending:0,depthTest:!1,depthWrite:!1}),e.type="SphericalGaussianBlur",e}(20),Vu=null,zu=null,Wu=function(){for(var e=[],t=[],n=[],r=8,i=0;i<Uu;i++){var o=Math.pow(2,r);t.push(o);var a=1/o;4<i?a=Fu[i-8+4-1]:0==i&&(a=0),n.push(a),a=1/(o-1),o=-a/2,a=1+a/2;var s=[o,o,a,o,a,a,o,o,a,a,o,a];o=new Float32Array(108),a=new Float32Array(72);for(var c=new Float32Array(36),u=0;6>u;u++){var l=u%3*2/3-1,h=2<u?0:-1;o.set([l,h,0,l+2/3,h,0,l+2/3,h+1,0,l,h,0,l+2/3,h+1,0,l,h+1,0],18*u),a.set(s,12*u),c.set([u,u,u,u,u,u],6*u)}s=new H,s.setAttribute("position",new O(o,3)),s.setAttribute("uv",new O(a,2)),s.setAttribute("faceIndex",new O(c,1)),e.push(s),4<r&&r--}return{_lodPlanes:e,_sizeLods:t,_sigmas:n}}(),qu=Wu._lodPlanes,Yu=Wu._sizeLods,Xu=Wu._sigmas,Qu=null,Ku=null,Ju=null,Zu=(1+Math.sqrt(5))/2,$u=1/Zu,el=[new u(1,1,1),new u(-1,1,1),new u(1,1,-1),new u(-1,1,-1),new u(0,Zu,$u),new u(0,Zu,-$u),new u($u,0,Zu),new u(-$u,0,Zu),new u(Zu,$u,0),new u(-Zu,$u,0)];Mo.prototype={constructor:Mo,fromScene:function(e,t,n,r){void 0===t&&(t=0),void 0===n&&(n=.1),void 0===r&&(r=100),Ju=Ku.getRenderTarget();var i=Oo();n=new Q(90,1,n,r),r=[1,1,1,1,-1,1];var o=[1,1,-1,-1,-1,1],a=Ku.outputEncoding,s=Ku.toneMapping,c=Ku.toneMappingExposure,u=Ku.getClearColor(),l=Ku.getClearAlpha();Ku.toneMapping=1,Ku.toneMappingExposure=1,Ku.outputEncoding=3e3,e.scale.z*=-1;var h=e.background;if(h&&h.isColor){h.convertSRGBToLinear();var f=Math.min(Math.max(Math.ceil(Math.log2(Math.max(h.r,h.g,h.b))),-128),127);h=h.multiplyScalar(Math.pow(2,-f)),Ku.setClearColor(h,(f+128)/255),e.background=null}for(h=0;6>h;h++)f=h%3,0==f?(n.up.set(0,r[h],0),n.lookAt(o[h],0,0)):1==f?(n.up.set(0,0,r[h]),n.lookAt(0,o[h],0)):(n.up.set(0,r[h],0),n.lookAt(0,0,o[h])),Lo(i,f*ku,2<h?ku:0,ku,ku),Ku.setRenderTarget(i),Ku.render(e,n);return Ku.toneMapping=s,Ku.toneMappingExposure=c,Ku.outputEncoding=a,Ku.setClearColor(u,l),e.scale.z*=-1,0<t&&Po(i,0,0,t),Do(i),Ro(i),i},fromEquirectangular:function(e){return e.magFilter=1003,e.minFilter=1003,e.generateMipmaps=!1,this.fromCubemap(e)},fromCubemap:function(e){Ju=Ku.getRenderTarget();var t=Oo(e),n=new p;e.isCubeTexture?null==zu&&(zu=ko()):null==Vu&&(Vu=Bo());var r=e.isCubeTexture?zu:Vu;return n.add(new j(qu[0],r)),r=r.uniforms,r.envMap.value=e,e.isCubeTexture||r.texelSize.value.set(1/e.image.width,1/e.image.height),r.inputEncoding.value=Hu[e.encoding],r.outputEncoding.value=Hu[e.encoding],Lo(t,0,0,3*ku,2*ku),Ku.setRenderTarget(t),Ku.render(n,ju),Do(t),Ro(t),t},compileCubemapShader:function(){null==zu&&(zu=ko(),Co(zu))},compileEquirectangularShader:function(){null==Vu&&(Vu=Bo(),Co(Vu))},dispose:function(){Gu.dispose(),null!=zu&&zu.dispose(),null!=Vu&&Vu.dispose();for(var e=0;e<qu.length;e++)qu[e].dispose()}},$r.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create($r.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},Object.assign(pi.prototype,{createPointsGeometry:function(e){return console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead."),e=this.getPoints(e),this.createGeometry(e)},createSpacedPointsGeometry:function(e){return console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead."),e=this.getSpacedPoints(e),this.createGeometry(e)},createGeometry:function(e){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var t=new z,n=0,r=e.length;n<r;n++){var i=e[n];t.vertices.push(new u(i.x,i.y,i.z||0))}return t}}),Object.assign(mi.prototype,{fromPoints:function(e){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(e)}}),Ho.prototype=Object.create(ri.prototype),jo.prototype=Object.create(ri.prototype),Go.prototype=Object.create(ri.prototype),Object.assign(Go.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),go.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},po.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Object.assign(Wr.prototype,{extractUrlBase:function(e){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),Yc.extractUrlBase(e)}}),Wr.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},Object.assign(Di.prototype,{setTexturePath:function(e){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(e)}}),Object.assign(co.prototype,{center:function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},size:function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)}}),Object.assign(m.prototype,{center:function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionSphere:function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},size:function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)}}),$.prototype.setFromMatrix=function(e){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(e)},uo.prototype.center=function(e){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(e)},Object.assign(Wo,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(e){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),Wo.floorPowerOfTwo(e)},nextPowerOfTwo:function(e){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),Wo.ceilPowerOfTwo(e)}}),Object.assign(r.prototype,{flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},multiplyVector3:function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBufferAttribute:function(e){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(l.prototype,{extractPosition:function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},getPosition:function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new u).setFromMatrixColumn(this,3)},setRotationFromQuaternion:function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector4:function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},crossVector:function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBufferAttribute:function(e){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(e,t,n,r,i,o){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,r,n,i,o)}}),b.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)},c.prototype.multiplyVector3=function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},Object.assign(y.prototype,{isIntersectionBox:function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionPlane:function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},isIntersectionSphere:function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)}}),Object.assign(w.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(e,t){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(e,t)},midpoint:function(e){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(e)},normal:function(e){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(e)},plane:function(e){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(e)}}),Object.assign(w,{barycoordFromPoint:function(e,t,n,r,i){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),w.getBarycoord(e,t,n,r,i)},normal:function(e,t,n,r){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),w.getNormal(e,t,n,r)}}),Object.assign(vi.prototype,{extractAllPoints:function(e){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(e)},extrude:function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Zn(this,e)},makeGeometry:function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new ur(this,e)}}),Object.assign(n.prototype,{fromAttribute:function(e,t,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},distanceToManhattan:function(e){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(u.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},applyProjection:function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},fromAttribute:function(e,t,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},distanceToManhattan:function(e){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(o.prototype,{fromAttribute:function(e,t,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(z.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")},applyMatrix:function(e){return console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}}),Object.assign(d.prototype,{getChildByName:function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},applyMatrix:function(e){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}}),Object.defineProperties(d.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.assign(j.prototype,{setDrawMode:function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}),Object.defineProperties(j.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),0},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),Object.defineProperties(Jt.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty($t.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),Zt.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Object.defineProperty($r.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(e){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=e}}),Q.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},Object.defineProperties(gi.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),Object.defineProperties(O.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),35048===this.usage},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(35048)}}}),Object.assign(O.prototype,{setDynamic:function(e){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===e?35048:35044),this},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},setArray:function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}}),Object.assign(H.prototype,{addIndex:function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},addAttribute:function(e,t,n){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?"index"===e?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t),this):this.setAttribute(e,t):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(e,new O(t,n)))},addDrawCall:function(e,t,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},removeAttribute:function(e){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(e)},applyMatrix:function(e){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}}),Object.defineProperties(H.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.defineProperties(qt.prototype,{dynamic:{get:function(){return console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),35048===this.usage},set:function(e){console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.setUsage(e)}}}),Object.assign(qt.prototype,{setDynamic:function(e){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===e?35048:35044),this},setArray:function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}}),Object.assign($n.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}}),Object.defineProperties(to.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(S.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new E}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===e}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(e){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=e}}}),Object.defineProperties(_r.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(Y.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),Object.assign(Vt.prototype,{clearTarget:function(e,t,n,r){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(e),this.clear(t,n,r)},animate:function(e){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(e)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},allocTextureUnit:function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},setTexture:function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},setTexture2D:function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},setTextureCube:function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},getActiveMipMapLevel:function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()}}),Object.defineProperties(Vt.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(e){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===e?3001:3e3}}}),Object.defineProperties(Pt.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(a.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),Object.defineProperties(qi.prototype,{load:{value:function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var t=this;return(new Fi).load(e,(function(e){t.setBuffer(e)})),this}},startTime:{set:function(){console.warn("THREE.Audio: .startTime is now .play( delay ).")}}}),Xi.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},K.prototype.updateCubeMap=function(e,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(e,t)},Yo.crossOrigin=void 0,Yo.loadTexture=function(e,t,n,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var i=new Zr;return i.setCrossOrigin(this.crossOrigin),e=i.load(e,n,void 0,r),t&&(e.mapping=t),e},Yo.loadTextureCube=function(e,t,n,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var i=new Jr;return i.setCrossOrigin(this.crossOrigin),e=i.load(e,n,void 0,r),t&&(e.mapping=t),e},Yo.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},Yo.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")},"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"113"}})),e.ACESFilmicToneMapping=5,e.AddEquation=100,e.AddOperation=2,e.AdditiveBlending=2,e.AlphaFormat=1021,e.AlwaysDepth=1,e.AlwaysStencilFunc=519,e.AmbientLight=Mi,e.AmbientLightProbe=Gi,e.AnimationClip=jr,e.AnimationLoader=Yr,e.AnimationMixer=eo,e.AnimationObjectGroup=Zi,e.AnimationUtils=Fc,e.ArcCurve=ti,e.ArrayCamera=Ht,e.ArrowHelper=Ao,e.Audio=qi,e.AudioAnalyser=Xi,e.AudioContext=$c,e.AudioListener=Wi,e.AudioLoader=Fi,e.AxesHelper=So,e.AxisHelper=function(e){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new So(e)},e.BackSide=1,e.BasicDepthPacking=3200,e.BasicShadowMap=0,e.BinaryTextureLoader=function(e){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new Qr(e)},e.Bone=en,e.BooleanKeyframeTrack=Pr,e.BoundingBoxHelper=function(e,t){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new xo(e,t)},e.Box2=co,e.Box3=m,e.Box3Helper=_o,e.BoxBufferGeometry=Ds,e.BoxGeometry=Ls,e.BoxHelper=xo,e.BufferAttribute=O,e.BufferGeometry=H,e.BufferGeometryLoader=Li,e.ByteType=1010,e.Cache=Uc,e.Camera=X,e.CameraHelper=wo,e.CanvasRenderer=function(){console.error("THREE.CanvasRenderer has been removed")},e.CanvasTexture=fn,e.CatmullRomCurve3=ri,e.CineonToneMapping=4,e.CircleBufferGeometry=yr,e.CircleGeometry=gr,e.ClampToEdgeWrapping=1001,e.Clock=zi,e.ClosedSplineCurve3=Ho,e.Color=E,e.ColorKeyframeTrack=Nr,e.CompressedTexture=hn,e.CompressedTextureLoader=Xr,e.ConeBufferGeometry=vr,e.ConeGeometry=mr,e.CubeCamera=K,e.CubeGeometry=Ls,e.CubeReflectionMapping=301,e.CubeRefractionMapping=302,e.CubeTexture=me,e.CubeTextureLoader=Jr,e.CubeUVReflectionMapping=306,e.CubeUVRefractionMapping=307,e.CubicBezierCurve=si,e.CubicBezierCurve3=ci,e.CubicInterpolant=Cr,e.CullFaceBack=1,e.CullFaceFront=2,e.CullFaceFrontBack=3,e.CullFaceNone=0,e.Curve=$r,e.CurvePath=pi,e.CustomBlending=5,e.CylinderBufferGeometry=pr,e.CylinderGeometry=dr,e.Cylindrical=so,e.DataTexture=Z,e.DataTexture2DArray=ve,e.DataTexture3D=ge,e.DataTextureLoader=Qr,e.DecrementStencilOp=7683,e.DecrementWrapStencilOp=34056,e.DefaultLoadingManager=Hc,e.DepthFormat=1026,e.DepthStencilFormat=1027,e.DepthTexture=dn,e.DirectionalLight=Si,e.DirectionalLightHelper=bo,e.DirectionalLightShadow=Ai,e.DiscreteInterpolant=Lr,e.DodecahedronBufferGeometry=Sn,e.DodecahedronGeometry=An,e.DoubleSide=2,e.DstAlphaFactor=206,e.DstColorFactor=208,e.DynamicBufferAttribute=function(e,t){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setUsage( THREE.DynamicDrawUsage ) instead."),new O(e,t).setUsage(35048)},e.DynamicCopyUsage=35050,e.DynamicDrawUsage=35048,e.DynamicReadUsage=35049,e.EdgesGeometry=fr,e.EdgesHelper=function(e,t){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new on(new fr(e.geometry),new nn({color:void 0!==t?t:16777215}))},e.EllipseCurve=ei,e.EqualDepth=4,e.EqualStencilFunc=514,e.EquirectangularReflectionMapping=303,e.EquirectangularRefractionMapping=304,e.Euler=h,e.EventDispatcher=t,e.ExtrudeBufferGeometry=$n,e.ExtrudeGeometry=Zn,e.Face3=A,e.Face4=function(e,t,n,r,i,o,a){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new A(e,t,n,i,o,a)},e.FaceColors=1,e.FileLoader=qr,e.FlatShading=1,e.Float32Attribute=function(e,t){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new B(e,t)},e.Float32BufferAttribute=B,e.Float64Attribute=function(e,t){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new k(e,t)},e.Float64BufferAttribute=k,e.FloatType=1015,e.Fog=Wt,e.FogExp2=zt,e.Font=Bi,e.FontLoader=ki,e.FrontFaceDirectionCCW=1,e.FrontFaceDirectionCW=0,e.FrontSide=0,e.Frustum=$,e.GammaEncoding=3007,e.Geometry=z,e.GeometryUtils={merge:function(e,t,n){if(console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead."),t.isMesh){t.matrixAutoUpdate&&t.updateMatrix();var r=t.matrix;t=t.geometry}e.merge(t,r,n)},center:function(e){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),e.center()}},e.GreaterDepth=6,e.GreaterEqualDepth=5,e.GreaterEqualStencilFunc=518,e.GreaterStencilFunc=516,e.GridHelper=go,e.Group=jt,e.HalfFloatType=1016,e.HemisphereLight=yi,e.HemisphereLightHelper=vo,e.HemisphereLightProbe=ji,e.IcosahedronBufferGeometry=Tn,e.IcosahedronGeometry=_n,e.ImageBitmapLoader=Pi,e.ImageLoader=Kr,e.ImageUtils=Yo,e.ImmediateRenderObject=lo,e.IncrementStencilOp=7682,e.IncrementWrapStencilOp=34055,e.InstancedBufferAttribute=Ii,e.InstancedBufferGeometry=Ci,e.InstancedInterleavedBuffer=no,e.InstancedMesh=tn,e.Int16Attribute=function(e,t){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new L(e,t)},e.Int16BufferAttribute=L,e.Int32Attribute=function(e,t){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new P(e,t)},e.Int32BufferAttribute=P,e.Int8Attribute=function(e,t){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new R(e,t)},e.Int8BufferAttribute=R,e.IntType=1013,e.InterleavedBuffer=qt,e.InterleavedBufferAttribute=Yt,e.Interpolant=Rr,e.InterpolateDiscrete=2300,e.InterpolateLinear=2301,e.InterpolateSmooth=2302,e.InvertStencilOp=5386,e.JSONLoader=function(){console.error("THREE.JSONLoader has been removed.")},e.KeepStencilOp=7680,e.KeyframeTrack=Dr,e.LOD=Jt,e.LatheBufferGeometry=cr,e.LatheGeometry=sr,e.Layers=f,e.LensFlare=function(){console.error("THREE.LensFlare has been moved to /examples/js/objects/Lensflare.js")},e.LessDepth=2,e.LessEqualDepth=3,e.LessEqualStencilFunc=515,e.LessStencilFunc=513,e.Light=gi,e.LightProbe=Hi,e.LightShadow=bi,e.Line=rn,e.Line3=uo,e.LineBasicMaterial=nn,e.LineCurve=ui,e.LineCurve3=li,e.LineDashedMaterial=Or,e.LineLoop=an,e.LinePieces=1,e.LineSegments=on,e.LineStrip=0,e.LinearEncoding=3e3,e.LinearFilter=1006,e.LinearInterpolant=Ir,e.LinearMipMapLinearFilter=1008,e.LinearMipMapNearestFilter=1007,e.LinearMipmapLinearFilter=1008,e.LinearMipmapNearestFilter=1007,e.LinearToneMapping=1,e.Loader=Wr,e.LoaderUtils=Yc,e.LoadingManager=zr,e.LogLuvEncoding=3003,e.LoopOnce=2200,e.LoopPingPong=2202,e.LoopRepeat=2201,e.LuminanceAlphaFormat=1025,e.LuminanceFormat=1024,e.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},e.Material=S,e.MaterialLoader=Ri,e.Math=Wo,e.MathUtils=Wo,e.Matrix3=r,e.Matrix4=l,e.MaxEquation=104,e.Mesh=j,e.MeshBasicMaterial=M,e.MeshDepthMaterial=Lt,e.MeshDistanceMaterial=Dt,e.MeshFaceMaterial=function(e){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),e},e.MeshLambertMaterial=Sr,e.MeshMatcapMaterial=Mr,e.MeshNormalMaterial=Ar,e.MeshPhongMaterial=_r,e.MeshPhysicalMaterial=xr,e.MeshStandardMaterial=Er,e.MeshToonMaterial=Tr,e.MinEquation=103,e.MirroredRepeatWrapping=1002,e.MixOperation=1,e.MultiMaterial=function(e){return void 0===e&&(e=[]),console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),e.isMultiMaterial=!0,e.materials=e,e.clone=function(){return e.slice()},e},e.MultiplyBlending=4,e.MultiplyOperation=0,e.NearestFilter=1003,e.NearestMipMapLinearFilter=1005,e.NearestMipMapNearestFilter=1004,e.NearestMipmapLinearFilter=1005,e.NearestMipmapNearestFilter=1004,e.NeverDepth=0,e.NeverStencilFunc=512,e.NoBlending=0,e.NoColors=0,e.NoToneMapping=0,e.NormalBlending=1,e.NotEqualDepth=7,e.NotEqualStencilFunc=517,e.NumberKeyframeTrack=Br,e.Object3D=d,e.ObjectLoader=Di,e.ObjectSpaceNormalMap=1,e.OctahedronBufferGeometry=xn,e.OctahedronGeometry=En,e.OneFactor=201,e.OneMinusDstAlphaFactor=207,e.OneMinusDstColorFactor=209,e.OneMinusSrcAlphaFactor=205,e.OneMinusSrcColorFactor=203,e.OrthographicCamera=Ti,e.PCFShadowMap=1,e.PCFSoftShadowMap=2,e.PMREMGenerator=Mo,e.ParametricBufferGeometry=vn,e.ParametricGeometry=mn,e.Particle=function(e){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new Qt(e)},e.ParticleBasicMaterial=function(e){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new sn(e)},e.ParticleSystem=function(e,t){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new cn(e,t)},e.ParticleSystemMaterial=function(e){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new sn(e)},e.Path=mi,e.PerspectiveCamera=Q,e.Plane=b,e.PlaneBufferGeometry=re,e.PlaneGeometry=ne,e.PlaneHelper=To,e.PointCloud=function(e,t){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new cn(e,t)},e.PointCloudMaterial=function(e){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new sn(e)},e.PointLight=_i,e.PointLightHelper=mo,e.Points=cn,e.PointsMaterial=sn,e.PolarGridHelper=yo,e.PolyhedronBufferGeometry=yn,e.PolyhedronGeometry=gn,e.PositionalAudio=Yi,e.PropertyBinding=Ji,e.PropertyMixer=Qi,e.QuadraticBezierCurve=hi,e.QuadraticBezierCurve3=fi,e.Quaternion=c,e.QuaternionKeyframeTrack=Fr,e.QuaternionLinearInterpolant=kr,e.REVISION="113",e.RGBADepthPacking=3201,e.RGBAFormat=1023,e.RGBAIntegerFormat=1033,e.RGBA_ASTC_10x10_Format=37819,e.RGBA_ASTC_10x5_Format=37816,e.RGBA_ASTC_10x6_Format=37817,e.RGBA_ASTC_10x8_Format=37818,e.RGBA_ASTC_12x10_Format=37820,e.RGBA_ASTC_12x12_Format=37821,e.RGBA_ASTC_4x4_Format=37808,e.RGBA_ASTC_5x4_Format=37809,e.RGBA_ASTC_5x5_Format=37810,e.RGBA_ASTC_6x5_Format=37811,e.RGBA_ASTC_6x6_Format=37812,e.RGBA_ASTC_8x5_Format=37813,e.RGBA_ASTC_8x6_Format=37814,e.RGBA_ASTC_8x8_Format=37815,e.RGBA_PVRTC_2BPPV1_Format=35843,e.RGBA_PVRTC_4BPPV1_Format=35842,e.RGBA_S3TC_DXT1_Format=33777,e.RGBA_S3TC_DXT3_Format=33778,e.RGBA_S3TC_DXT5_Format=33779,e.RGBDEncoding=3006,e.RGBEEncoding=3002,e.RGBEFormat=1023,e.RGBFormat=1022,e.RGBIntegerFormat=1032,e.RGBM16Encoding=3005,e.RGBM7Encoding=3004,e.RGB_ETC1_Format=36196,e.RGB_PVRTC_2BPPV1_Format=35841,e.RGB_PVRTC_4BPPV1_Format=35840,e.RGB_S3TC_DXT1_Format=33776,e.RGFormat=1030,e.RGIntegerFormat=1031,e.RawShaderMaterial=wr,e.Ray=y,e.Raycaster=ro,e.RectAreaLight=Oi,e.RedFormat=1028,e.RedIntegerFormat=1029,e.ReinhardToneMapping=2,e.RepeatWrapping=1e3,e.ReplaceStencilOp=7681,e.ReverseSubtractEquation=102,e.RingBufferGeometry=ar,e.RingGeometry=or,e.Scene=p,e.SceneUtils={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")}},e.ShaderChunk=Fs,e.ShaderLib=Us,e.ShaderMaterial=Y,e.ShadowMaterial=br,e.Shape=vi,e.ShapeBufferGeometry=lr,e.ShapeGeometry=ur,e.ShapePath=Ni,e.ShapeUtils=Pc,e.ShortType=1011,e.Skeleton=$t,e.SkeletonHelper=po,e.SkinnedMesh=Zt,e.SmoothShading=2,e.Sphere=g,e.SphereBufferGeometry=ir,e.SphereGeometry=rr,e.Spherical=ao,e.SphericalHarmonics3=Ui,e.SphericalReflectionMapping=305,e.Spline=Go,e.SplineCurve=di,e.SplineCurve3=jo,e.SpotLight=Ei,e.SpotLightHelper=ho,e.SpotLightShadow=wi,e.Sprite=Qt,e.SpriteMaterial=Xt,e.SrcAlphaFactor=204,e.SrcAlphaSaturateFactor=210,e.SrcColorFactor=202,e.StaticCopyUsage=35046,e.StaticDrawUsage=35044,e.StaticReadUsage=35045,e.StereoCamera=Vi,e.StreamCopyUsage=35042,e.StreamDrawUsage=35040,e.StreamReadUsage=35041,e.StringKeyframeTrack=Ur,e.SubtractEquation=101,e.SubtractiveBlending=3,e.TOUCH={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},e.TangentSpaceNormalMap=0,e.TetrahedronBufferGeometry=wn,e.TetrahedronGeometry=bn,e.TextBufferGeometry=nr,e.TextGeometry=tr,e.Texture=i,e.TextureLoader=Zr,e.TorusBufferGeometry=Ln,e.TorusGeometry=In,e.TorusKnotBufferGeometry=Cn,e.TorusKnotGeometry=Rn,e.Triangle=w,e.TriangleFanDrawMode=2,e.TriangleStripDrawMode=1,e.TrianglesDrawMode=0,e.TubeBufferGeometry=On,e.TubeGeometry=Mn,e.UVMapping=300,e.Uint16Attribute=function(e,t){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new D(e,t)},e.Uint16BufferAttribute=D,e.Uint32Attribute=function(e,t){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new N(e,t)},e.Uint32BufferAttribute=N,e.Uint8Attribute=function(e,t){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new C(e,t)},e.Uint8BufferAttribute=C,e.Uint8ClampedAttribute=function(e,t){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new I(e,t)},e.Uint8ClampedBufferAttribute=I,e.Uncharted2ToneMapping=3,e.Uniform=to,e.UniformsLib=ks,e.UniformsUtils=Ps,e.UnsignedByteType=1009,e.UnsignedInt248Type=1020,e.UnsignedIntType=1014,e.UnsignedShort4444Type=1017,e.UnsignedShort5551Type=1018,e.UnsignedShort565Type=1019,e.UnsignedShortType=1012,e.VSMShadowMap=3,e.Vector2=n,e.Vector3=u,e.Vector4=o,e.VectorKeyframeTrack=Hr,e.Vertex=function(e,t,n){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new u(e,t,n)},e.VertexColors=2,e.VideoTexture=ln,e.WebGLCubeRenderTarget=J,e.WebGLMultisampleRenderTarget=s,e.WebGLRenderTarget=a,e.WebGLRenderTargetCube=function(e,t,n){return console.warn("THREE.WebGLRenderTargetCube( width, height, options ) is now WebGLCubeRenderTarget( size, options )."),new J(e,n)},e.WebGLRenderer=Vt,e.WebGLUtils=kt,e.WireframeGeometry=pn,e.WireframeHelper=function(e,t){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new on(new pn(e.geometry),new nn({color:void 0!==t?t:16777215}))},e.WrapAroundEnding=2402,e.XHRLoader=function(e){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new qr(e)},e.ZeroCurvatureEnding=2400,e.ZeroFactor=200,e.ZeroSlopeEnding=2401,e.ZeroStencilOp=0,e.sRGBEncoding=3001,Object.defineProperty(e,"__esModule",{value:!0})}));const speRuntimeFactory=function(exports,THREE){
/*! *****************************************************************************
      Copyright (c) Microsoft Corporation.
  
      Permission to use, copy, modify, and/or distribute this software for any
      purpose with or without fee is hereby granted.
  
      THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
      REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
      AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
      INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
      LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
      OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
      PERFORMANCE OF THIS SOFTWARE.
      ***************************************************************************** */
var extendStatics=function(e,t){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function __extends(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}extendStatics(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var __assign=function(){return(__assign=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},GLTF_GENERATOR_FORMAT,GLTF_COMPONENT_TYPE,GLTF_RENDER_MODE,GLTF_TEXTURE_MAG_FILTER,GLTF_TEXTURE_MIN_FILTER,GLTF_TEXTURE_WRAP_MODE,GLTF_BUFFER_TARGET,GLTF_ACCESSOR_TYPE,GLTF_LIGHTING_TECHNIQUE,GLTF_MATERIAL_ALPHA_MODE,GLTF_MATERIAL_SIDE,GLTF_MATERIAL_SHADING_MODE,RUNTIME_VIEWMODE,RUNTIME_QUALITY,OBJECT_TYPE,CAMERA_TYPE,LIGHT_TYPE,LAYER_TYPE,UNIFORM_TYPE;function __awaiter(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))}function __generator(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function __values(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function __spread(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read(arguments[t]));return e}function GetAccessorComponentSize(e){switch(e){case GLTF_COMPONENT_TYPE.UNSIGNED_BYTE:return 1;case GLTF_COMPONENT_TYPE.UNSIGNED_SHORT:return 2;case GLTF_COMPONENT_TYPE.UNSIGNED_INT:case GLTF_COMPONENT_TYPE.FLOAT:return 4;default:return console.error("GetAccessorComponentSize >>> invalid component-type ("+e+")"),1}}function GetAccessorItemSize(e){switch(e){case GLTF_ACCESSOR_TYPE.SCALAR:return 1;case GLTF_ACCESSOR_TYPE.VEC2:return 2;case GLTF_ACCESSOR_TYPE.VEC3:return 3;case GLTF_ACCESSOR_TYPE.VEC4:case GLTF_ACCESSOR_TYPE.MAT2:return 4;case GLTF_ACCESSOR_TYPE.MAT3:return 9;case GLTF_ACCESSOR_TYPE.MAT4:return 16;default:return console.error("GetAccessorItemSize >>> invalid item-type ("+e+")"),1}}function CreateFromJson(e){return e}!function(e){e[e.FORMAT_GLTF_2_0_COMPAT=0]="FORMAT_GLTF_2_0_COMPAT",e[e.FORMAT_GLTF_SPLINE_EXT=1]="FORMAT_GLTF_SPLINE_EXT"}(GLTF_GENERATOR_FORMAT||(GLTF_GENERATOR_FORMAT={})),function(e){e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.FLOAT=5126]="FLOAT"}(GLTF_COMPONENT_TYPE||(GLTF_COMPONENT_TYPE={})),function(e){e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(GLTF_RENDER_MODE||(GLTF_RENDER_MODE={})),function(e){e[e.NEAREST=9728]="NEAREST",e[e.LINEAR=9729]="LINEAR"}(GLTF_TEXTURE_MAG_FILTER||(GLTF_TEXTURE_MAG_FILTER={})),function(e){e[e.NEAREST=9728]="NEAREST",e[e.LINEAR=9729]="LINEAR",e[e.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",e[e.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",e[e.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",e[e.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR"}(GLTF_TEXTURE_MIN_FILTER||(GLTF_TEXTURE_MIN_FILTER={})),function(e){e[e.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",e[e.REPEAT=10497]="REPEAT"}(GLTF_TEXTURE_WRAP_MODE||(GLTF_TEXTURE_WRAP_MODE={})),function(e){e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER"}(GLTF_BUFFER_TARGET||(GLTF_BUFFER_TARGET={})),function(e){e.SCALAR="SCALAR",e.VEC2="VEC2",e.VEC3="VEC3",e.VEC4="VEC4",e.MAT2="MAT2",e.MAT3="MAT3",e.MAT4="MAT4"}(GLTF_ACCESSOR_TYPE||(GLTF_ACCESSOR_TYPE={})),function(e){e.CONSTANT="CONSTANT",e.BLINN="BLINN",e.LAMBERT="LAMBERT",e.PHYSICAL="PHYSICAL",e.TOON="TOON"}(GLTF_LIGHTING_TECHNIQUE||(GLTF_LIGHTING_TECHNIQUE={})),function(e){e.OPAQUE="OPAQUE",e.MASK="MASK",e.BLEND="BLEND"}(GLTF_MATERIAL_ALPHA_MODE||(GLTF_MATERIAL_ALPHA_MODE={})),function(e){e[e.FRONT_SIDE=0]="FRONT_SIDE",e[e.BACK_SIDE=1]="BACK_SIDE",e[e.DOUBLE_SIDE=2]="DOUBLE_SIDE"}(GLTF_MATERIAL_SIDE||(GLTF_MATERIAL_SIDE={})),function(e){e[e.FLAT_SHADING=1]="FLAT_SHADING",e[e.SMOOTH_SHADING=2]="SMOOTH_SHADING"}(GLTF_MATERIAL_SHADING_MODE||(GLTF_MATERIAL_SHADING_MODE={})),function(e){e[e.FULLSCREEN=1]="FULLSCREEN",e[e.CUSTOM_SIZE=2]="CUSTOM_SIZE"}(RUNTIME_VIEWMODE||(RUNTIME_VIEWMODE={})),function(e){e.HIGH="high",e.MIDDLE="middle",e.LOW="low",e.DEFAULT="default"}(RUNTIME_QUALITY||(RUNTIME_QUALITY={})),function(e){e.EMPTY_OBJECT="emtpy_object",e.MESH_3D="mesh_3d",e.MESH_2D="mesh_2d",e.TEXTFRAME="textframe",e.VECTOR_OBJECT="vector_object",e.LIGHT="light",e.CAMERA="camera",e.SCENE="scene"}(OBJECT_TYPE||(OBJECT_TYPE={})),function(e){e.PERSPECTIVE="perspective",e.ORTHOGRAPHIC="orthographic"}(CAMERA_TYPE||(CAMERA_TYPE={})),function(e){e.SPOT="spot",e.POINT="point",e.DIRECTIONAL="directional",e.HEMISPHERIC="hemispheric"}(LIGHT_TYPE||(LIGHT_TYPE={})),function(e){e.LIGHTING="light",e.COLOR="color",e.GRADIENT="gradient",e.NORMAL="normal",e.DEPTH="depth",e.TEXTURE="texture",e.NOISE="noise",e.FRESNEL="fresnel",e.POINTS="points",e.LINES="lines"}(LAYER_TYPE||(LAYER_TYPE={})),function(e){e[e.BOOLEAN=0]="BOOLEAN",e[e.INTEGER=1]="INTEGER",e[e.FLOAT=2]="FLOAT",e[e.VECTOR2=3]="VECTOR2",e[e.VECTOR3=4]="VECTOR3",e[e.VECTOR4=5]="VECTOR4",e[e.COLOR=6]="COLOR",e[e.ARRAY_INTEGER=7]="ARRAY_INTEGER",e[e.ARRAY_FLOAT=8]="ARRAY_FLOAT",e[e.ARRAY_VECTOR2=9]="ARRAY_VECTOR2",e[e.ARRAY_VECTOR3=10]="ARRAY_VECTOR3",e[e.ARRAY_VECTOR4=11]="ARRAY_VECTOR4",e[e.ARRAY_COLOR=12]="ARRAY_COLOR",e[e.MATRIX_3=13]="MATRIX_3",e[e.MATRIX_4=14]="MATRIX_4",e[e.TEXTURE=15]="TEXTURE"}(UNIFORM_TYPE||(UNIFORM_TYPE={}));var Raycaster=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.setFromCamera=function(e,t){"OrthographicCamera"===t.cameraType?(this.ray.origin.set(e.x,e.y,-1).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):"PerspectiveCamera"===t.cameraType?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):console.error("Raycaster: Unsupported camera type.")},t.prototype.createRaycastLineHelper=function(){var e=new THREE.LineBasicMaterial({color:16711680,linewidth:10}),t=new THREE.Geometry,n=new THREE.Vector3(this.ray.origin.x,this.ray.origin.y,this.ray.origin.z),r=new THREE.Vector3(this.ray.direction.x,this.ray.direction.y,this.ray.direction.z),i=(new THREE.Vector3).lerpVectors(n,r,.5);return r.multiplyScalar(0),t.vertices.push(n),t.vertices.push(i),t.vertices.push(r),new THREE.Line(t,e)},t}(THREE.Raycaster),CylinderGeometry=function(){function e(){}return e.create=function(e){return this.build(this.normalizeInputs(e))},e.normalizeInputs=function(e,t){var n,r,i,o,a,s=Object.assign({},null!==(n=null==t?void 0:t.parameters)&&void 0!==n?n:{width:100,radialSegments:64,heightSegments:1,openEnded:!1,thetaStart:0,thetaLength:360,cornerRadius:0,cornerSegments:8,hollow:0},e.parameters),c=s.width/2,u=null!==(r=s.radiusTop)&&void 0!==r?r:c,l=null!==(i=s.radiusBottom)&&void 0!==i?i:c;return u===l?(u=c,l=c):u>l?l=l*c/(u=c):(u=u*c/l,l=c),{parameters:Object.assign(s,{width:Math.abs(s.width),height:Math.abs(null!==(o=s.height)&&void 0!==o?o:s.width),depth:Math.abs(null!==(a=s.depth)&&void 0!==a?a:s.width),radiusTop:u,radiusBottom:l})}},e.build=function(e){var t=e.parameters,n=t.width,r=t.depth,i=t.height,o=t.radialSegments,a=t.heightSegments,s=t.openEnded,c=t.thetaStart,u=t.thetaLength,l=t.radiusTop,h=t.radiusBottom,f=t.cornerRadius,d=t.cornerSegments,p=t.hollow,m=new RoundedCylinderBufferGeometry(l,h,i,o,a,s,c,u*Math.PI/180,f,f,d,p);return m.scale(1,1,r/n),Object.assign(m,{userData:__assign(__assign({},e),{type:"CylinderGeometry"})})},e}();function two2three(e,t,n){n.x=e.x*t.x,n.y=e.y,n.z=e.x*t.y}function flip(e){return new THREE.Vector2(e.y,-e.x)}var RoundedCylinderBufferGeometry=function(e){function t(t,n,r,i,o,a,s,c,u,l,h,f,d){void 0===d&&(d=!1);var p=e.call(this)||this;p.type="RoundedCylinderBufferGeometry",t=void 0!==t?t:1,n=void 0!==n?n:1,r=r||1,i=Math.floor(i)||8,o=Math.floor(o)||1,a=void 0!==a&&a,s=void 0!==s?s:0,c=void 0!==c?c:2*Math.PI,a&&(u=0,l=0);var m=[],v=[],g=[],y=[],b=0,w=r/2,E=new THREE.Vector3,x=new THREE.Vector3;d&&0==t&&(t=u),d&&0==n&&(n=l);var _=new THREE.Vector2(t,w),T=new THREE.Vector2(n,-w),A=null,S=null,M=null,O=null,R=_.clone().sub(T),C=0,I=0,L=0;f>0&&(C=Math.min(t,n)*(1-f),I=t-C,L=n-C);var D=_.clone();D.x-=C;var P=Math.PI-R.angle(),N=R.angle(),B=Math.tan(N/2),k=Math.tan(P/2),F=B+k,U=f?F:k,H=f?F:B;if(u=Math.min(u,(t-I)/U,R.length()/F),l=Math.min(l,(n-L)/H,R.length()/F),u>0){var j=u/B;A=_.clone().sub(new THREE.Vector2(j,u)),f&&((M=A.clone()).x-=C-F*u),_.sub(R.clone().setLength(j))}l>0&&(j=l/k,S=T.clone().sub(new THREE.Vector2(j,-l)),T.add(R.clone().setLength(j)),f&&((O=S.clone()).x-=C-F*l,D.sub(R.clone().setLength(j))));for(var G=(R=_.clone().sub(T)).length()<.5,V=[],z=0;z<=i;z++){var W=[],q=z/i,Y=q*c+s,X=new THREE.Vector2(Math.sin(Y),Math.cos(Y));if(O&&S?(oe(W,q,X,P,l,O,-1,!0),oe(W,q,X,N,l,S,-1,!1)):S?(ae(W,X,S.x,0,-1),oe(W,q,X,N,l,S,-1,!1)):a||ae(W,X,n,L,-1),two2three(flip(R).normalize(),X,E),!G)for(var Q=0;Q<=o;Q++){var K=Q/o;two2three(R.clone().multiplyScalar(K).add(T),X,x),v.push(x.x,x.y,x.z),g.push(E.x,E.y,E.z),y.push(q,.5+x.y/r),W.push(b++)}if(M&&A?(oe(W,q,X,P,u,A,1,!1),oe(W,q,X,N,u,M,1,!0)):A?(oe(W,q,X,P,u,A,1,!1),ae(W,X,A.x,0,1)):a||ae(W,X,t,I,1),f&&!G)for(two2three(flip(R).multiplyScalar(-1).normalize(),X,E),Q=0;Q<=o;Q++)K=Q/o,two2three(R.clone().multiplyScalar(-K).add(D),X,x),v.push(x.x,x.y,x.z),g.push(E.x,E.y,E.z),y.push(q,.5+x.y/r),W.push(b++);f&&!a&&W.push(W[0]),V.push(W)}for(var J=0;J<V.length-1;J++)for(var Z=0;Z<V[0].length-1;Z++)if(!a||!f||Z!=o){var $=V[J][Z],ee=V[J+1][Z],te=V[J+1][Z+1],ne=V[J][Z+1],re=v[3*te+0],ie=v[3*te+2];m.push($,ee,ne),0==re&&0==ie||m.push(ee,te,ne)}function oe(e,t,n,i,o,a,s,c){for(var u=0;u<h+1;u++){var l=u/h,f=s<0?l:1-l;c&&(f-=1),f*=i;var d=new THREE.Vector2(Math.sin(f),Math.cos(f)*s);two2three(d.clone().multiplyScalar(o).add(a),n,x),v.push(x.x,x.y,x.z),two2three(d,n,E),g.push(E.x,E.y,E.z),y.push(t,.5+x.y/r),e.push(b++)}}function ae(e,t,n,r,i){var o,a,s=new THREE.Vector3,c=new THREE.Vector2,u=[n,r];i<0&&u.reverse();try{for(var l=__values(u),h=l.next();!h.done;h=l.next()){var f=h.value;c.set(f,w*i),two2three(c,t,s),v.push(s.x,s.y,s.z),g.push(0,i,0),y.push(.5,.5),e.push(b++)}}catch(e){o={error:e}}finally{try{h&&!h.done&&(a=l.return)&&a.call(l)}finally{if(o)throw o.error}}}function se(e,r,i){var o,a,s=new THREE.Vector2(Math.sin(i),Math.cos(i)),c=new THREE.Vector2(-Math.cos(i),Math.sin(i)),u=new THREE.Vector3,l=e<0?function(e,t,n){return m.push(e,t,n)}:function(e,t,n){return m.push(e,n,t)};two2three(new THREE.Vector2((t+n+I+L)/4,0),s,u),v.push(u.x,u.y,u.z),g.push(c.x,0,c.y),y.push(.5,.5);var h=b++;try{for(var f=__values(r),d=f.next();!d.done;d=f.next()){var p=d.value,w=v.slice(3*p,3*p+3);v.push.apply(v,__spread(w)),g.push(c.x,0,c.y);var E=y.slice(2*p,2*p+2);y.push.apply(y,__spread(E)),b++}}catch(e){o={error:e}}finally{try{d&&!d.done&&(a=f.return)&&a.call(f)}finally{if(o)throw o.error}}for(var x=h+1;x<b-1;x++)l(h,x,x+1);l(h,b-1,h+1)}return c<2*Math.PI&&(se(-1,V[0],s),se(1,V[V.length-1],s+c)),p.setIndex(m),p.setAttribute("position",new THREE.Float32BufferAttribute(v,3)),p.setAttribute("normal",new THREE.Float32BufferAttribute(g,3)),p.setAttribute("uv",new THREE.Float32BufferAttribute(y,2)),p}return __extends(t,e),t}(THREE.BufferGeometry),ConeGeometry=function(){function e(){}return e.create=function(e){return this.build(this.normalizeInputs(e))},e.normalizeInputs=function(e,t){var n,r,i,o=Object.assign({},null!==(n=null==t?void 0:t.parameters)&&void 0!==n?n:{width:100,radialSegments:32,heightSegments:32,openEnded:!1,thetaStart:0,thetaLength:360,cornerRadiusTop:0,cornerRadiusBottom:0,cornerSegments:8},e.parameters);return{parameters:Object.assign(o,{width:Math.abs(o.width),height:Math.abs(null!==(r=o.height)&&void 0!==r?r:o.width),depth:Math.abs(null!==(i=o.depth)&&void 0!==i?i:o.width)})}},e.build=function(e){var t,n=e.parameters,r=n.width,i=n.depth,o=n.height,a=n.radialSegments,s=n.heightSegments,c=n.openEnded,u=n.thetaStart,l=n.thetaLength,h=n.cornerRadiusTop,f=n.cornerRadiusBottom,d=n.cornerSegments;return(t=h>0||f>0||l<360?new RoundedCylinderBufferGeometry(0,r/2,o,a,s,c,u,l*Math.PI/180,h,f,d,0,!0):new THREE.ConeBufferGeometry(r/2,o,a,s,c)).scale(1,1,i/r),Object.assign(t,{userData:__assign(__assign({},e),{type:"ConeGeometry"})})},e}(),CubeGeometry=function(){function e(){}return e.create=function(e){return this.build(this.normalizeInputs(e))},e.normalizeInputs=function(e,t){var n,r,i,o=Object.assign({},null!==(n=null==t?void 0:t.parameters)&&void 0!==n?n:{width:100,widthSegments:1,heightSegments:1,depthSegments:1,cornerRadius:0,cornerSegments:8},e.parameters);return{parameters:Object.assign(o,{width:Math.abs(o.width),height:Math.abs(null!==(r=o.height)&&void 0!==r?r:o.width),depth:Math.abs(null!==(i=o.depth)&&void 0!==i?i:o.width)})}},e.build=function(e){var t,n=e.parameters,r=n.width,i=n.height,o=n.depth,a=n.widthSegments,s=n.heightSegments,c=n.depthSegments,u=n.cornerRadius,l=n.cornerSegments;return t=0==u?new THREE.BoxBufferGeometry(r,i,o,a,s,c):new RoundedBoxBufferGeometry(r,i,o,a,s,c,u,l),Object.assign(t,{userData:__assign(__assign({},e),{type:"CubeGeometry"})})},e}(),pi2=Math.PI/2,RoundedBoxBufferGeometry=function(e){function t(t,n,r,i,o,a,s,c){void 0===t&&(t=1),void 0===n&&(n=1),void 0===r&&(r=1),void 0===i&&(i=1),void 0===o&&(o=1),void 0===a&&(a=1),void 0===s&&(s=0),void 0===c&&(c=4);var u=e.call(this)||this;u.type="BoxBufferGeometry";var l=u;i=Math.floor(i),o=Math.floor(o),a=Math.floor(a),c=Math.floor(c),s=Math.min(s,t/2,n/2,r/2);var h=[],f=[],d=[],p=[],m=0,v=0;function g(e,t,n,r,i,o,a,c,u,g,y){for(var b=(o-2*s)/u,w=(a-2*s)/g,E=o/2-s,x=a/2-s,_=c/2,T=u+1,A=g+1,S=0,M=0,O=new THREE.Vector3,R=0;R<A;R++)for(var C=R*w-x,I=0;I<T;I++){var L=I*b-E;O[e]=L*r,O[t]=C*i,O[n]=_,f.push(O.x,O.y,O.z),O[e]=0,O[t]=0,O[n]=c>0?1:-1,d.push(O.x,O.y,O.z),p.push(I/u),p.push(1-R/g),S+=1}for(R=0;R<g;R++)for(I=0;I<u;I++){var D=m+I+T*R,P=m+I+T*(R+1),N=m+(I+1)+T*(R+1),B=m+(I+1)+T*R;h.push(D,P,B),h.push(P,N,B),M+=6}l.addGroup(v,M,y),v+=M,m+=S}function y(e,t,n,r,i,o,a,u,g,y,b){for(var w=(a-2*s)/y,E=a/2-s,x=u/2-s,_=g/2,T=y+1,A=0,S=0,M=new THREE.Vector3,O=new THREE.Vector3,R=0;R<c+1;R++){var C=R/c*pi2,I=Math.sin(C)*s,L=(1-Math.cos(C))*s,D=Math.sin(C),P=Math.cos(C);M[t]=(x+I)*i,M[n]=(_-L)*o,O[e]=0,O[t]=D*Math.sign(M[t]),O[n]=P*Math.sign(M[n]);for(var N=0;N<T;N++){var B=N*w-E;M[e]=B*r,f.push(M.x,M.y,M.z),d.push(O.x,O.y,O.z),p.push(N/y),p.push(0),A+=1}}for(R=0;R<c;R++)for(N=0;N<y;N++){C=m+N+T*R;var k=m+N+T*(R+1),F=m+(N+1)+T*(R+1),U=m+(N+1)+T*R;h.push(C,k,U),h.push(k,F,U),S+=6}l.addGroup(v,S,b),v+=S,m+=A}function b(e,i,o){var a=new THREE.Vector3,u=new THREE.Vector3(t/2,n/2,r/2);u.subScalar(s);for(var l=[],v=e*i*o>0?function(e,t,n){return h.push(e,t,n)}:function(e,t,n){return h.push(e,n,t)},g=0;g<=c;g++){for(var y=[],b=pi2*(1-g/c),w=Math.cos(b),E=Math.sin(b),x=0,_=0;_<=g;_++){var T=Math.cos(x),A=Math.sin(x);a.x=w*T,a.y=E,a.z=w*A;var S=u.clone().addScaledVector(a,s);f.push(e*S.x,i*S.y,o*S.z),d.push(e*a.x,i*a.y,o*a.z),p.push(0,0),y.push(m++),x+=pi2/g}l.push(y)}for(var M=l.length-1,O=0;O<M;O++){var R=l[O],C=l[O+1],I=R.length-1;v(R[0],C[1],C[0]);for(var L=1;L<=I;L++)v(R[L-1],R[L],C[L]),v(R[L],C[L+1],C[L])}}return g("z","y","x",-1,-1,r,n,t,a,o,0),g("z","y","x",1,-1,r,n,-t,a,o,1),g("x","z","y",1,1,t,r,n,i,a,2),g("x","z","y",1,-1,t,r,-n,i,a,3),g("x","y","z",1,-1,t,n,r,i,o,4),g("x","y","z",-1,-1,t,n,-r,i,o,5),s>0&&(y("z","y","x",-1,-1,1,r,n,t,a,0),y("z","y","x",1,-1,-1,r,n,t,a,1),y("z","y","x",-1,1,-1,r,n,t,a,1),y("z","y","x",1,1,1,r,n,t,a,0),y("x","y","z",-1,-1,-1,t,n,r,i,0),y("x","y","z",1,-1,1,t,n,r,i,1),y("x","y","z",-1,1,1,t,n,r,i,0),y("x","y","z",1,1,-1,t,n,r,i,1),y("y","x","z",-1,-1,1,n,t,r,o,0),y("y","x","z",1,-1,-1,n,t,r,o,1),y("y","x","z",1,1,1,n,t,r,o,1),y("y","x","z",-1,1,-1,n,t,r,o,0),b(1,1,1),b(-1,1,1),b(1,-1,1),b(-1,-1,1),b(1,1,-1),b(-1,1,-1),b(1,-1,-1),b(-1,-1,-1)),u.setIndex(h),u.setAttribute("position",new THREE.Float32BufferAttribute(f,3)),u.setAttribute("normal",new THREE.Float32BufferAttribute(d,3)),u.setAttribute("uv",new THREE.Float32BufferAttribute(p,2)),u}return __extends(t,e),t}(THREE.BufferGeometry),DodecahedronGeometry=function(){function e(){}return e.create=function(e){return this.build(this.normalizeInputs(e))},e.normalizeInputs=function(e,t){var n,r,i,o=Object.assign({},null!==(n=null==t?void 0:t.parameters)&&void 0!==n?n:{width:100,detail:0},e.parameters);return{parameters:Object.assign(o,{width:Math.abs(o.width),height:Math.abs(null!==(r=o.height)&&void 0!==r?r:o.width),depth:Math.abs(null!==(i=o.depth)&&void 0!==i?i:o.width)})}},e.build=function(e){var t=e.parameters,n=t.width,r=t.height,i=t.depth,o=t.detail,a=new THREE.DodecahedronBufferGeometry(.5*n,o);return a.scale(1,r/n,i/n),Object.assign(a,{userData:__assign(__assign({},e),{type:"DodecahedronGeometry"})})},e}(),asVec=function(e,t){var n=t.x-e.x,r=t.y-e.y,i=Math.sqrt(n*n+r*r),o=n/i,a=r/i;return{x:n,y:r,len:i,nx:o,ny:a,ang:Math.atan2(a,o)}},roundShapePolygon=function(e,t,n){var r,i,o,a,s,c,u,l,h,f,d,p,m,v,g=t.length;for(a=t[g-2],e.curves=[],r=1;r<g-1;r++){s=t[r%g],c=t[(r+1)%g];var y=asVec(s,a),b=asVec(s,c);u=y.nx*b.ny-y.ny*b.nx,l=y.nx*b.nx-y.ny*-b.ny,d=Math.asin(u),h=1,f=!1,l<0?d<0?d=Math.PI+d:(d=Math.PI-d,h=-1,f=!0):d>0&&(h=-1,f=!0),p=d/2,(v=Math.abs(Math.cos(p)*n/Math.sin(p)))>Math.min(y.len/2,b.len/2)?(v=Math.min(y.len/2,b.len/2),m=Math.abs(v*Math.sin(p)/Math.cos(p))):m=n,i=s.x+b.nx*v,o=s.y+b.ny*v,i+=-b.ny*m*h,o+=b.nx*m*h,e.absarc(i,o,m,y.ang+Math.PI/2*h,b.ang-Math.PI/2*h,f),a=s,s=c}e.closePath()},resizeGeometry=function(e,t){var n=t.width,r=t.height,i=t.depth;n=Math.abs(n),r=Math.abs(r),i=Math.abs(i);var o,a,s,c=e.userData.parameters;0===n?(n=c.width,o=1):o=n/c.width,0===r?(r=c.height,a=1):a=r/c.height,0===i?(i=c.depth,s=1):s=i/c.depth,e.scale(o,a,s),c.width=n,c.height=r,c.depth=i},fixUvs=function(e,t,n){var r=e.getAttribute("uv");if(r)for(var i=0;i<r.count;i++){var o=r.getX(i),a=r.getY(i);r.setXY(i,(o+t/2)/t,1-(a-n/2)/n*-1)}},EllipseGeometry=function(){function e(){}return e.create=function(e){return this.build(this.normalizeInputs(e))},e.normalizeInputs=function(e,t){var n,r,i=Object.assign({},null!==(n=null==t?void 0:t.parameters)&&void 0!==n?n:{width:100,depth:0,spikes:128,angle:360,innerRadius:0},e.parameters);return{parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(null!==(r=i.height)&&void 0!==r?r:i.width)})}},e.build=function(e){var t,n=e.parameters,r=n.width,i=n.height,o=n.spikes,a=n.angle,s=n.innerRadius;if(s>0){var c=.5*r,u=s*c/100;(t=new THREE.RingBufferGeometry(u,c,o,1,Math.PI/2,a*Math.PI/180)).scale(1,Math.abs(i)/Math.abs(r),1)}else{for(var l=.5*r,h=.5*i,f=a*Math.PI/180*-1/o,d=new THREE.Shape,p=0;p<=o;p++){var m=f*p,v=0+Math.sin(m)*l,g=0+Math.cos(m)*h;d.lineTo(v,g)}360===a&&(d.curves=d.curves.slice(1)),t=new THREE.ShapeBufferGeometry(d),fixUvs(t,r,i)}return Object.assign(t,{userData:__assign(__assign({},e),{type:"EllipseGeometry"})})},e}(),HelixGeometry=function(){function e(){}return e.create=function(e){return this.build(this.normalizeInputs(e))},e.normalizeInputs=function(e,t){var n,r,i,o=Object.assign({},null!==(n=null==t?void 0:t.parameters)&&void 0!==n?n:{width:100,revolutions:2,segments:40,pathRadius:10,pathType:0,pathSegments:30,cornerRadius:30,cornerSegments:4},e.parameters),a=Math.abs(o.width),s=Math.abs(null!==(r=o.height)&&void 0!==r?r:a),c=Math.abs(null!==(i=o.depth)&&void 0!==i?i:a),u=Math.abs(Math.min(a,c))/2;return{parameters:Object.assign(o,{width:a,height:s,depth:c,radius:u,segments:Math.round(o.segments),pathSegments:Math.round(o.pathSegments),cornerSegments:Math.round(o.cornerSegments)})}},e.build=function(e){var t=e.parameters,n=t.width,r=t.height,i=t.depth,o=t.radius,a=t.revolutions,s=t.segments,c=t.pathRadius,u=t.pathType,l=t.pathSegments,h=t.cornerRadius,f=t.cornerSegments,d=new HelixBufferGeometry(!1,n,r,i,o,a,s,c,u,l,h,f);return Object.assign(d,{userData:__assign(__assign({},e),{type:"HelixGeometry"})})},e}(),HelixBufferGeometry=function(e){function t(t,n,r,i,o,a,s,c,u,l,h,f){var d,p,m,v,g,y,b,w,E=e.call(this)||this,x=[],_=[],T=[],A=[],S=[],M=[],O=[],R=new THREE.Vector3,C=new THREE.Vector3,I=new THREE.Vector3,L=new THREE.Vector3,D=new THREE.Vector3,P=new THREE.Vector3,N=new THREE.Vector3,B=new THREE.Vector3,k=new THREE.Vector3,F=new THREE.Vector3,U=new THREE.Vector3,H=o-c,j=r-2*c+.001,G=j/a,V=Math.ceil(s*a),z=j/V,W=-j/2,q=2*Math.PI/l,Y=Math.PI/2/f,X=Math.min((1-h/100)*c,c-.1),Q=c-X;function K(e,n){var r=Math.PI/2;y=n*z,w=2*Math.PI*(y%G)/G+r,y+=W,b=Math.sin(w)*H,g=Math.cos(w)*H,t?e.set(g,b,y):e.set(g,y,b)}K(I,-1),K(L,0),D.copy(I);for(var J=I.distanceTo(L),Z=J*V+2*Q,$=Z-Q,ee=0;ee<=V;ee++){K(R,ee),U.subVectors(R,D).normalize(),D.copy(R),k.copy(R).setComponent(+t+1,0).normalize(),F.crossVectors(U,k).normalize();for(var te=0==ee?3*Math.PI/2:Y,ne=0==ee?0:$,re=0,ie=0;re<=l;ie=++re*q){if(P.addVectors(I.copy(k).multiplyScalar(c*Math.cos(ie)),L.copy(F).multiplyScalar(c*Math.sin(ie))),B.copy(P).normalize(),0==ee||ee==V){L.copy(B).multiplyScalar(X),C.addVectors(R,L);for(var oe=0,ae=te;oe<f;ae=++oe*Y+te){N.addVectors(I.copy(U).multiplyScalar(Q*Math.sin(ae)),L.copy(B).multiplyScalar(Q*Math.cos(ae))),L.addVectors(C,N),N.normalize(),S.push(L.x,L.y,L.z),M.push(N.x,N.y,N.z);var se=+(0==ee)+Math.sin(ae);O.push((ne+Q*se)/Z,re/l,0)}}L.addVectors(R,P),_.push(L.x,L.y,L.z),T.push(B.x,B.y,B.z),A.push((Q+ee*J)/Z,re/l)}}var ce=S.length/2;for(re=0;re<f;re++)for(oe=0;oe<=l;oe++){var ue=ce+3*(oe*f+re),le=3*((l-oe)*f+f-re-1);_.push.apply(_,__spread(S.slice(ue,ue+3))),_.unshift.apply(_,__spread(S.slice(le,le+3))),T.push.apply(T,__spread(M.slice(ue,ue+3))),T.unshift.apply(T,__spread(M.slice(le,le+3))),A.push.apply(A,__spread(O.slice(ue,ue+2))),A.unshift.apply(A,__spread(O.slice(le,le+2)))}var he=l+1;for(re=0;re<V+2*f;re++)for(oe=0;oe<he-1;oe++)m=(d=re*he+oe)+he,v=(p=d+1)+he,x.push(d,p,m,p,v,m);for(d=_.length/3-l-1,re=0;re<l-2;re++)x.push(d,d+re+1,d+re+2),x.push(0,re+2,re+1);return E.setIndex(x),E.setAttribute("position",new THREE.Float32BufferAttribute(_,3)),E.setAttribute("normal",new THREE.Float32BufferAttribute(T,3)),E.setAttribute("uv",new THREE.Float32BufferAttribute(A,2)),E}return __extends(t,e),t}(THREE.BufferGeometry),IcosahedronGeometry=function(){function e(){}return e.create=function(e){return this.build(this.normalizeInputs(e))},e.normalizeInputs=function(e,t){var n,r,i,o=Object.assign({},null!==(n=null==t?void 0:t.parameters)&&void 0!==n?n:{width:100,detail:0},e.parameters);return{parameters:Object.assign(o,{width:Math.abs(o.width),height:Math.abs(null!==(r=o.height)&&void 0!==r?r:o.width),depth:Math.abs(null!==(i=o.depth)&&void 0!==i?i:o.width)})}},e.build=function(e){var t=e.parameters,n=t.width,r=t.height,i=t.depth,o=t.detail,a=new THREE.IcosahedronBufferGeometry(.5*n,o);return a.scale(1,r/n,i/n),Object.assign(a,{userData:__assign(__assign({},e),{type:"IcosahedronGeometry"})})},e}(),LatheGeometry=function(){function e(){}return e.create=function(e){return this.build(this.normalizeInputs(e))},e.normalizeInputs=function(e,t){var n,r,i,o=Object.assign({},null!==(n=null==t?void 0:t.parameters)&&void 0!==n?n:{width:100,segments:64,verticalSegments:64,points:[{x:0,y:-50,id:0},{x:50,y:-50,id:1},{x:50,y:50,id:2},{x:0,y:50,id:3}]},e.parameters);return{parameters:Object.assign(o,{width:Math.abs(o.width),height:Math.abs(null!==(r=o.height)&&void 0!==r?r:o.width),depth:Math.abs(null!==(i=o.depth)&&void 0!==i?i:o.width)})}},e.build=function(e){var t=e.parameters,n=t.points,r=t.segments,i=t.verticalSegments,o=new THREE.Shape;o.moveTo(n[0].x,n[0].y),o.bezierCurveTo(n[1].x,n[1].y,n[2].x,n[2].y,n[3].x,n[3].y);var a=new THREE.LatheBufferGeometry(o.extractPoints(i).shape,r);return a.rotateZ(Math.PI),Object.assign(a,{userData:__assign(__assign({},e),{type:"LatheGeometry"})})},e}(),ABC=["a","b","c"];function getFaceIndexByString(e,t){switch(t){case"c":return e.c;case"b":return e.b;case"a":default:return e.a}}function getEdge(e,t,n){var r=Math.min(e,t)+"_"+Math.max(e,t);return n.get(r)}function processEdge(e,t,n,r,i,o){var a,s=Math.min(e,t),c=Math.max(e,t),u=s+"_"+c;r.has(u)?a=r.get(u):(a={a:n[s],b:n[c],newEdge:null,faces:[]},r.set(u,a)),a.faces.push(i),o[e].edges.push(a),o[t].edges.push(a)}function generateLookups(e,t,n,r){var i,o,a;for(i=0,o=e.length;i<o;i++)n[i]={edges:[]};for(i=0,o=t.length;i<o;i++)processEdge((a=t[i]).a,a.b,e,r,a,n),processEdge(a.b,a.c,e,r,a,n),processEdge(a.c,a.a,e,r,a,n)}function newFace(e,t,n,r,i){e.push(new THREE.Face3(t,n,r,void 0,void 0,i))}function midpoint(e,t){return Math.abs(t-e)/2+Math.min(e,t)}function newUv(e,t,n,r){e.push([t.clone(),n.clone(),r.clone()])}var SubdivisionModifier=function(){function e(e){void 0===e&&(e=1),this.subdivisions=e}return e.prototype.modify=function(e){(e=e instanceof THREE.BufferGeometry?(new THREE.Geometry).fromBufferGeometry(e):e.clone()).mergeVertices();for(var t=this.subdivisions;t-- >0;)this._smooth(e);return e.computeFaceNormals(),e.computeVertexNormals(),e},e.prototype._smooth=function(e){var t,n,r,i,o,a,s,c=new THREE.Vector3,u=e.vertices,l=e.faces,h=e.faceVertexUvs[0],f=void 0!==h&&h.length>0,d=[],p=new Map;generateLookups(u,l,d,p);var m,v,g,y,b,w,E,x,_,T,A,S,M,O,R=[];try{for(var C=__values(Array.from(p.keys())),I=C.next();!I.done;I=C.next()){var L=I.value;for(v=p.get(L),g=new THREE.Vector3,b=3/8,w=1/8,2!=(E=v.faces.length)&&(b=.5,w=0),g.addVectors(v.a,v.b).multiplyScalar(b),c.set(0,0,0),a=0;a<E;a++){for(y=v.faces[a],s=0;s<3&&((m=u[getFaceIndexByString(y,ABC[s])])===v.a||m===v.b);s++);m&&c.add(m)}c.multiplyScalar(w),g.add(c),v.newEdge=R.length,R.push(g)}}catch(e){t={error:e}}finally{try{I&&!I.done&&(n=C.return)&&n.call(C)}finally{if(t)throw t.error}}var D=[];for(i=0,o=u.length;i<o;i++){for(M=u[i],3==(r=(S=d[i].edges).length)?x=3/16:r>3&&(x=3/(8*r)),_=1-r*Number(x),T=x,r<=2&&2==r&&(_=3/4,T=1/8),O=M.clone().multiplyScalar(_),c.set(0,0,0),a=0;a<r;a++)m=(A=S[a]).a!==M?A.a:A.b,c.add(m);c.multiplyScalar(Number(T)),O.add(c),D.push(O)}var P,N,B,k,F,U,H,j=D.concat(R),G=D.length,V=[],z=[],W=new THREE.Vector2,q=new THREE.Vector2,Y=new THREE.Vector2;for(i=0,o=l.length;i<o;i++)y=l[i],newFace(V,P=Number(getEdge(y.a,y.b,p).newEdge)+G,N=Number(getEdge(y.b,y.c,p).newEdge)+G,B=Number(getEdge(y.c,y.a,p).newEdge)+G,y.materialIndex),newFace(V,y.a,P,B,y.materialIndex),newFace(V,y.b,N,P,y.materialIndex),newFace(V,y.c,B,N,y.materialIndex),f&&(F=(k=h[i])[0],U=k[1],H=k[2],W.set(midpoint(F.x,U.x),midpoint(F.y,U.y)),q.set(midpoint(U.x,H.x),midpoint(U.y,H.y)),Y.set(midpoint(F.x,H.x),midpoint(F.y,H.y)),newUv(z,W,q,Y),newUv(z,F,W,Y),newUv(z,U,q,W),newUv(z,H,Y,q));e.vertices=j,e.faces=V,f&&(e.faceVertexUvs[0]=z)},e}(),_size=new THREE.Vector3,NonParametricGeometry=function(){function e(){}return e.create=function(e){return this.build(this.normalizeInputs(e))},e.normalizeInputs=function(e,t){var n,r,i,o=null!==(r=null!==(n=e.geometry)&&void 0!==n?n:null==t?void 0:t.geometry)&&void 0!==r?r:(new THREE.BufferGeometry).copy(new THREE.BoxBufferGeometry(100,100,100));void 0===t?(o.computeBoundingBox(),o.boundingBox.getSize(_size),i={width:_size.x,height:_size.y,depth:_size.z,subdivisions:0}):i=t.parameters;var a=__assign(__assign({},i),e.parameters);return{parameters:{width:Math.abs(a.width),height:Math.abs(a.height),depth:Math.abs(a.depth),subdivisions:Math.abs(a.subdivisions)},geometry:o}},e.build=function(e){var t,n=e.parameters,r=n.width,i=n.height,o=n.depth,a=n.subdivisions,s=null!==(t=e.geometry)&&void 0!==t?t:(new THREE.BufferGeometry).copy(new THREE.BoxBufferGeometry(100,100,100)),c=s.userData.parameters;void 0===c?(s.computeBoundingBox(),s.boundingBox.getSize(_size)):_size.set(c.width,c.height,c.depth),r===_size.x&&i===_size.y&&o===_size.z||s.scale(0===_size.x?1:r/_size.x,0===_size.y?1:i/_size.y,0===_size.z?1:o/_size.z);var u=s.originalGeometry;if(a>0){if(void 0===u||(null==c?void 0:c.subdivisions)!==a){void 0===u&&(u=s);var l=new SubdivisionModifier(a);s=(new THREE.BufferGeometry).fromGeometry(l.modify(u))}}else void 0!==u&&(s=u),u=void 0;return void 0!==u&&Object.assign(s,{originalGeometry:u}),delete e.geometry,Object.assign(s,{userData:__assign(__assign({},e),{type:"NonParametricGeometry"})})},e.loadFromUrl=function(e,t,n){var r=this;new THREE.BufferGeometryLoader(n).load(e,(function(e){var n=r.normalizeInputs({geometry:e});e.boundingBox.getSize(_size);var i=100/_size.x;Object.assign(n.parameters,{width:100,height:_size.y*i,depth:_size.z*i}),t(r.build(n))}))},e}(),PolygonGeometry=function(){function e(){}return e.create=function(e){return this.build(this.normalizeInputs(e))},e.normalizeInputs=function(e,t){var n,r,i=Object.assign({},null!==(n=null==t?void 0:t.parameters)&&void 0!==n?n:{width:100,depth:0,spikes:5,cornerRadius:0,extrudeDepth:0,extrudeBevelSize:0,extrudeBevelSegments:1},e.parameters);return{parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(null!==(r=i.height)&&void 0!==r?r:i.width)})}},e.build=function(e){for(var t,n=e.parameters,r=n.width,i=n.height,o=n.spikes,a=n.cornerRadius,s=n.extrudeDepth,c=n.extrudeBevelSize,u=n.extrudeBevelSegments,l=.5*r,h=.5*i,f=2*Math.PI/o,d=new THREE.Shape,p=0;p<=o;p++){var m=f*p,v=0+Math.sin(m)*l,g=0+Math.cos(m)*h;d.lineTo(v,g)}return 0!==a&&roundShapePolygon(d,d.getPoints(),a),t=s>0?new THREE.ExtrudeBufferGeometry(d,{curveSegments:64,steps:1,depth:s,bevelEnabled:!0,bevelThickness:c,bevelSize:c,bevelOffset:0,bevelSegments:u}):new THREE.ShapeBufferGeometry(d,32),fixUvs(t,r,i),Object.assign(t,{userData:__assign(__assign({},e),{type:"PolygonGeometry"})})},e}(),PyramidGeometry=function(){function e(){}return e.create=function(e){return this.build(this.normalizeInputs(e))},e.normalizeInputs=function(e,t){var n,r,i,o=Object.assign({},null!==(n=null==t?void 0:t.parameters)&&void 0!==n?n:{width:100,radialSegments:4,heightSegments:1,cornerRadius:0,cornerSegments:8,openEnded:!1},e.parameters);return{parameters:Object.assign(o,{width:Math.abs(o.width),height:Math.abs(null!==(r=o.height)&&void 0!==r?r:o.width),depth:Math.abs(null!==(i=o.depth)&&void 0!==i?i:o.width)})}},e.build=function(e){var t=e.parameters,n=t.width,r=t.height,i=t.depth,o=t.radialSegments,a=t.heightSegments,s=t.openEnded,c=t.cornerRadius,u=t.cornerSegments,l=new RoundedPyramidBufferGeometry(.5*n,r,o,a,s,c,u);return l.scale(1,1,i/n),Object.assign(l,{userData:__assign(__assign({},e),{type:"PyramidGeometry"})})},e}();function two2three$1(e,t,n){n.x=e.x*t.x,n.y=e.y,n.z=e.x*t.y}function offset3d(e,t,n,r,i,o){var a=t.clone().sub(e),s=n.clone().sub(e),c=a.angleTo(s);if(a.normalize(),s.normalize(),r===i){var u=a.add(s).normalize();o.copy(e).addScaledVector(u,r/Math.sin(c/2))}else{var l=a.angleTo(s);o.copy(e),o.addScaledVector(a,i/Math.sin(l)),o.addScaledVector(s,r/Math.sin(l))}}function projectOntoLine(e,t,n){var r=e.clone().sub(t),i=n.clone().sub(t);return r.projectOnVector(i),r.add(t)}var RoundedPyramidBufferGeometry=function(e){function t(t,n,r,i,o,a,s){var c;void 0===t&&(t=.5),void 0===n&&(n=1),void 0===r&&(r=4),void 0===o&&(o=!1),void 0===a&&(a=0),void 0===s&&(s=4);var u=e.call(this)||this;r=Math.floor(Math.max(3,r)),s=Math.floor(s);var l,h=[],f=[],d=[],p=[],m=0,v=n/2,g=Math.PI/r,y=t*Math.cos(Math.PI/r),b=2*Math.PI/r,w=(r-2)*Math.PI/r,E=Math.PI-w,x=new THREE.Vector3(0,-v,0),_=new THREE.Vector3(0,v,0),T=new THREE.Vector2(t,-v),A=new THREE.Vector2(y,-v),S=new THREE.Vector2(0,_.y).sub(A),M=new THREE.Vector2(0,_.y).sub(T),O=new THREE.Vector2(S.y,-S.x).normalize(),R=new THREE.Vector2(M.y,-M.x).normalize(),C=t*Math.cos(Math.PI/r)*Math.tan((Math.PI-S.angle())/2)-1e-8;a=Math.min(a,C);var I=new THREE.Vector3(O.x,O.y,0),L=new THREE.Vector3(Math.cos(b)*I.x,I.y,Math.sin(b)*I.x);l=I.angleTo(L);var D=a/Math.tan((Math.PI-S.angle())/2),P=a/Math.tan((Math.PI-l)/2),N=new THREE.Vector3;if(!o){f.push(x.x,x.y,x.z),d.push(0,-1,0),p.push(0,0);var B=m++,k=[],F=T.clone(),U=D/Math.cos(Math.PI/r);F.x-=U;for(var H=0;H<r;H++){var j=H/r*Math.PI*2+g;two2three$1(F,new THREE.Vector2(Math.sin(j),Math.cos(j)),N),f.push(N.x,N.y,N.z),d.push(0,-1,0),p.push(0,0),k.push(m++)}for(H=0;H<k.length;H++)h.push(k[H],B,k[(H+1)%k.length])}I=new THREE.Vector3;var G=new THREE.Vector3,V=new THREE.Vector3,z=new THREE.Vector3,W=new THREE.Vector3,q=new THREE.Vector3;for(H=0;H<r;H++){var Y=H/r*Math.PI*2+g,X=(H+.5)/r*Math.PI*2+g,Q=(H+1)/r*Math.PI*2+g,K=new THREE.Vector2(Math.sin(Y),Math.cos(Y)),J=new THREE.Vector2(Math.sin(X),Math.cos(X)),Z=new THREE.Vector2(Math.sin(Q),Math.cos(Q));two2three$1(T,K,G),two2three$1(T,Z,V),two2three$1(O,J,I),offset3d(_,G,V,P,P,z),f.push(z.x,z.y,z.z),offset3d(G,_,V,P,D,W),f.push(W.x,W.y,W.z),offset3d(V,G,_,D,P,q),f.push(q.x,q.y,q.z),d.push(I.x,I.y,I.z),d.push(I.x,I.y,I.z),d.push(I.x,I.y,I.z),p.push(0,0),p.push(0,0),p.push(0,0);var $=m++,ee=m++,te=m++;if(h.push($,ee,te),a>0){B=G.clone().add(V).multiplyScalar(.5);var ne=_.clone().sub(B).normalize(),re=x.clone().sub(B).normalize().add(ne).normalize().multiplyScalar(-1);Oe(B,q.clone().sub(W),re,S.angle());var ie,oe=void 0;two2three$1(R,Z,re=new THREE.Vector3),ie=(c=__read(Oe(B=projectOntoLine(B=q.clone().add(z).multiplyScalar(.5),V,_),q.clone().sub(z),re,l,z.y),2))[0],oe=c[1];var ae=(B=ie).clone().setY(0).normalize(),se=new THREE.Vector3(0,-1,0),ce=ae.clone().cross(se);Re(B,ae,se,ce);var ue=S.angle(),le=Math.PI-ue;(B=_.clone()).y-=a/Math.sin(ue-Math.PI/2);for(var he=new THREE.Vector3,fe=[],de=0;de<s;de++){for(var pe=[],me=Math.PI/2-le*de/s,ve=Math.cos(me),ge=Math.sin(me),ye=X,be=0;be<=de;be++){var we=Math.cos(ye),Ee=Math.sin(ye);I.x=ve*Ee,I.y=ge,I.z=ve*we,he.copy(B).addScaledVector(I,a),f.push(he.x,he.y,he.z),d.push(I.x,I.y,I.z),p.push(0,0),pe.push(m++),ye+=2*Math.PI/de/r}fe.push(pe)}oe.reverse(),fe.push(oe);for(var xe=fe.length-1,_e=0;_e<xe;_e++){var Te=fe[_e],Ae=fe[_e+1],Se=Te.length-1;h.push(Ae[1],Te[0],Ae[0]);for(var Me=1;Me<=Se;Me++)h.push(Te[Me],Te[Me-1],Ae[Me]),h.push(Ae[Me+1],Te[Me],Ae[Me])}}}function Oe(e,t,n,r,i){var o=-r/2,c=(Math.PI-r)/2,u=t.clone().normalize().cross(n);e.addScaledVector(n,-a/Math.sin(c));for(var l=new THREE.Vector3,v=new THREE.Vector3,g=m,y=[],b=0;b<=s;b++){var w=o+b/s*r;v.set(0,0,0),v.addScaledVector(u,Math.sin(w)),v.addScaledVector(n,Math.cos(w));for(var E=0;E<=1;E++){var x=E/1-.5;if(l.copy(e),l.addScaledVector(t,x),l.addScaledVector(v,a),null!=i){var _=Math.max(0,l.y-i);l.addScaledVector(t,-_/t.y)}f.push(l.x,l.y,l.z),d.push(v.x,v.y,v.z),p.push(0,0),0===E&&y.push(m),m++}}for(b=0;b<s;b++)for(E=0;E<1;E++){var T=(w=g+E+2*b)+2,A=T+1,S=w+1;h.push(w,T,S),h.push(T,A,S)}return[e.clone().addScaledVector(t,.5),y]}function Re(e,t,n,r){for(var i=Math.PI/2,o=M.angle()-i,c=[],u=new THREE.Vector3,l=new THREE.Vector3,v=0;v<=s;v++){for(var g=[],y=v/s,b=0;b<=v;b++){var w=((v?b/v:0)-.5)*E,x=Math.cos(w),_=Math.sin(w),T=(i+Math.atan(Math.tan(o)*x))*y,A=Math.cos(T),S=Math.sin(T);u.set(0,0,0),u.addScaledVector(t,S*x),u.addScaledVector(n,A),u.addScaledVector(r,S*_),l.copy(e).addScaledVector(u,a),f.push(l.x,l.y,l.z),d.push(u.x,u.y,u.z),p.push(0,0),g.push(m++)}c.push(g)}for(var O=c.length-1,R=0;R<O;R++){var C=c[R],I=c[R+1],L=C.length-1;h.push(C[0],I[1],I[0]);for(var D=1;D<=L;D++)h.push(C[D-1],C[D],I[D]),h.push(C[D],I[D+1],I[D])}}return u.setIndex(h),u.setAttribute("position",new THREE.Float32BufferAttribute(f,3)),u.setAttribute("normal",new THREE.Float32BufferAttribute(d,3)),u.setAttribute("uv",new THREE.Float32BufferAttribute(p,2)),u}return __extends(t,e),t}(THREE.BufferGeometry),RectangleGeometry=function(){function e(){}return e.create=function(e){return this.build(this.normalizeInputs(e))},e.normalizeInputs=function(e,t){var n,r,i,o=Object.assign({},null!==(n=null==t?void 0:t.parameters)&&void 0!==n?n:{width:100,depth:0,cornerRadius:[0,0,0,0],cornerType:1,extrudeDepth:0,extrudeBevelSize:0,extrudeBevelSegments:1},e.parameters),a=Object.assign(null!==(r=null==t?void 0:t.ui)&&void 0!==r?r:{enabledIndieCorners:!1},e.ui);return{parameters:Object.assign(o,{width:Math.abs(o.width),height:Math.abs(null!==(i=o.height)&&void 0!==i?i:o.width)}),ui:a}},e.build=function(e){var t=e.parameters,n=t.width,r=t.height,i=t.cornerRadius,o=t.cornerType,a=t.extrudeDepth,s=t.extrudeBevelSize,c=t.extrudeBevelSegments,u={x:.5*n,y:.5*r},l={x:-u.x,y:-u.y},h={x:u.x,y:u.y};function f(e,t,i){return t>n&&i>r?Math.min(e*n/t,e*r/i):t>n?e*n/t:i>r?e*r/i:e}var d=[];d[0]=0===i[0]?0:f(i[0],i[0]+i[3],i[0]+i[1]),d[1]=0===i[1]?0:f(i[1],i[1]+i[2],i[1]+i[0]),d[2]=0===i[2]?0:f(i[2],i[2]+i[1],i[2]+i[3]),d[3]=0===i[3]?0:f(i[3],i[3]+i[0],i[3]+i[2]);var p,m=l.x,v=h.x,g=h.y,y=l.y,b=new THREE.Shape;if(b.moveTo(m,g-d[0]),1==o)i[0]>0&&b.quadraticCurveTo(m,g,m+d[0],g),b.lineTo(v-d[1],g),i[1]>0&&b.quadraticCurveTo(v,g,v,g-d[1]),b.lineTo(v,y+d[2]),i[2]>0&&b.quadraticCurveTo(v,y,v-d[2],y),b.lineTo(m+d[3],y),i[3]>0&&b.quadraticCurveTo(m,y,m,y+d[3]),b.lineTo(m,g-d[0]);else{var w=4*(Math.SQRT2-1)/3;i[0]>0&&b.bezierCurveTo(m,g+d[0]*(w-1),m-d[0]*(w-1),g,m+d[0],g),b.lineTo(v-d[1],g),i[1]>0&&b.bezierCurveTo(v+d[1]*(w-1),g,v,g+d[1]*(w-1),v,g-d[1]),b.lineTo(v,y+d[2]),i[2]>0&&b.bezierCurveTo(v,y-d[2]*(w-1),v+d[2]*(w-1),y,v-d[2],y),b.lineTo(m+d[3],y),i[3]>0&&b.bezierCurveTo(m-d[3]*(w-1),y,m,y-d[3]*(w-1),m,y+d[3])}return b.lineTo(m,g-d[0]),p=a>0?new THREE.ExtrudeBufferGeometry(b,{curveSegments:64,steps:1,depth:a,bevelEnabled:!0,bevelThickness:s,bevelSize:s,bevelOffset:0,bevelSegments:c}):new THREE.ShapeBufferGeometry(b,32),fixUvs(p,n,r),Object.assign(p,{userData:__assign(__assign({},e),{type:"RectangleGeometry"})})},e}(),SphereGeometry=function(){function e(){}return e.create=function(e){return this.build(this.normalizeInputs(e))},e.normalizeInputs=function(e,t){var n,r,i,o=Object.assign({},null!==(n=null==t?void 0:t.parameters)&&void 0!==n?n:{width:100,widthSegments:64,heightSegments:64,phiStart:0,phiLength:2*Math.PI,thetaStart:0,thetaLength:Math.PI},e.parameters);return{parameters:Object.assign(o,{width:Math.abs(o.width),height:Math.abs(null!==(r=o.height)&&void 0!==r?r:o.width),depth:Math.abs(null!==(i=o.depth)&&void 0!==i?i:o.width)})}},e.build=function(e){var t=e.parameters,n=t.width,r=void 0===n?100:n,i=t.height,o=void 0===i?r:i,a=t.depth,s=void 0===a?r:a,c=t.widthSegments,u=void 0===c?64:c,l=t.heightSegments,h=void 0===l?64:l,f=t.phiStart,d=t.phiLength,p=t.thetaStart,m=t.thetaLength,v=new THREE.SphereBufferGeometry(.5*r,u,h,f,d,p,m);return v.scale(1,o/r,s/r),Object.assign(v,{userData:__assign(__assign({},e),{type:"SphereGeometry"})})},e}(),StarGeometry=function(){function e(){}return e.create=function(e){return this.build(this.normalizeInputs(e))},e.normalizeInputs=function(e,t){var n,r,i=Object.assign({},null!==(n=null==t?void 0:t.parameters)&&void 0!==n?n:{width:100,depth:0,innerRadiusPercent:38.19,spikes:5,cornerRadius:0,angle:360,extrudeDepth:0,extrudeBevelSize:0,extrudeBevelSegments:1},e.parameters);return{parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(null!==(r=i.height)&&void 0!==r?r:i.width)})}},e.build=function(e){var t,n=e.parameters,r=n.width,i=n.height,o=n.innerRadiusPercent,a=n.spikes,s=n.cornerRadius,c=n.angle,u=n.extrudeDepth,l=n.extrudeBevelSize,h=n.extrudeBevelSegments,f=.5*r,d=.5*i,p=c*Math.PI/360/a,m=Math.PI/2*3*-1,v=f*o/100,g=d*o/100,y=new THREE.Shape;if(3==a&&50==o){p=2*Math.PI/a;for(var b=0;b<=a;b++){var w=p*b,E=0+Math.sin(w)*f,x=0+Math.cos(w)*d;y.lineTo(E,x)}}else{for(y.moveTo(0,0+c==360?d:0),b=0;b<a;b++)E=0+Math.cos(m)*f,x=0+Math.sin(m)*d,y.lineTo(E,x),m+=p,E=0+Math.cos(m)*v,x=0+Math.sin(m)*g,y.lineTo(E,x),m+=p;y.lineTo(0,0+c==360?d:0)}return 0!==s&&roundShapePolygon(y,y.getPoints(),s),t=u>0?new THREE.ExtrudeBufferGeometry(y,{steps:1,depth:u,bevelEnabled:!0,bevelThickness:l,bevelSize:l,bevelOffset:0,bevelSegments:h}):new THREE.ShapeBufferGeometry(y),fixUvs(t,r,i),Object.assign(t,{userData:__assign(__assign({},e),{type:"StarGeometry"})})},e}(),TextFrameGeometry=function(){function e(){}return e.create=function(e){return this.build(this.normalizeInputs(e))},e.normalizeInputs=function(e,t){var n,r,i=Object.assign({},null!==(n=null==t?void 0:t.parameters)&&void 0!==n?n:{width:100,depth:0},e.parameters);return{parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(null!==(r=i.height)&&void 0!==r?r:i.width),depth:Math.abs(i.depth)})}},e.build=function(e){var t=e.parameters,n=t.width,r=t.height,i=new THREE.PlaneBufferGeometry(n,r);return Object.assign(i,{userData:__assign(__assign({},e),{type:"TextFrameGeometry"})})},e}(),TorusGeometry=function(){function e(){}return e.create=function(e){return this.build(this.normalizeInputs(e))},e.normalizeInputs=function(e,t){var n,r,i,o=Object.assign({},null!==(n=null==t?void 0:t.parameters)&&void 0!==n?n:{width:100,radialSegments:64,tubularSegments:64,arc:2*Math.PI,cornerRadius:30,cornerSegments:8},e.parameters),a=Math.abs(o.width),s=Math.abs(null!==(r=o.height)&&void 0!==r?r:o.width),c=Math.abs(null!==(i=o.depth)&&void 0!==i?i:.25*o.width);return{parameters:Object.assign(o,{width:a,height:s,depth:c})}},e.build=function(e){var t=e.parameters,n=t.width,r=t.height,i=t.depth,o=t.radialSegments,a=t.tubularSegments,s=genTorus(n,r,i,.5*n,t.arc,o,0,0,a,t.cornerRadius,t.cornerSegments);return s.scale(1,r/n,1),Object.assign(s,{userData:__assign(__assign({},e),{type:"TorusGeometry"})})},e}();function genTorus(e,t,n,r,i,o,a,s,c,u,l){var h;return t=(h=__read([n,t],2))[0],n=h[1],a=t/2,1==(i/=2*Math.PI)&&(u=0),new HelixBufferGeometry(!0,e,t,n,r,i,o,a,s,c,u,l)}var TorusKnotGeometry=function(){function e(){}return e.create=function(e){return this.build(this.normalizeInputs(e))},e.normalizeInputs=function(e,t){var n,r,i,o=Object.assign({},null!==(n=null==t?void 0:t.parameters)&&void 0!==n?n:{width:100,depth:1,tube:50,tubularSegments:64,radialSegments:32,p:2,q:3},e.parameters);return{parameters:Object.assign(o,{width:Math.abs(o.width),height:Math.abs(null!==(r=o.height)&&void 0!==r?r:o.width),depth:Math.abs(null!==(i=o.depth)&&void 0!==i?i:1)})}},e.build=function(e){var t=e.parameters,n=t.width,r=t.tube,i=t.tubularSegments,o=t.radialSegments,a=t.p,s=t.q,c=.5*n-r,u=new THREE.TorusKnotBufferGeometry(c,r,i,o,a,s);return Object.assign(u,{userData:__assign(__assign({},e),{type:"TorusKnotGeometry"})})},e}(),TriangleGeometry=function(){function e(){}return e.create=function(e){return this.build(this.normalizeInputs(e))},e.normalizeInputs=function(e,t){var n,r,i=Object.assign({},null!==(n=null==t?void 0:t.parameters)&&void 0!==n?n:{width:100,depth:0,spikes:5,cornerRadius:0,extrudeDepth:0,extrudeBevelSize:0,extrudeBevelSegments:1,isRect:!1},e.parameters);return{parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(null!==(r=i.height)&&void 0!==r?r:i.width*(i.isRect?1:Math.sqrt(3)/2))})}},e.build=function(e){var t,n=e.parameters,r=n.width,i=void 0===r?100:r,o=n.height,a=n.cornerRadius,s=n.extrudeDepth,c=n.extrudeBevelSize,u=n.extrudeBevelSegments,l=n.isRect,h=new THREE.Shape;if(l)h.moveTo(.5*-i,.5*o),h.lineTo(.5*i,.5*-o),h.lineTo(.5*-i,.5*-o),h.lineTo(.5*-i,.5*o);else{var f={x:.5*i,y:.5*o};h.moveTo(0,f.y),h.lineTo(f.x,-f.y),h.lineTo(-f.x,-f.y),h.lineTo(0,f.y)}return 0!==a&&roundShapePolygonTriangle(h,h.getPoints(),a),t=s>0?new THREE.ExtrudeBufferGeometry(h,{curveSegments:64,steps:1,depth:s,bevelEnabled:!0,bevelThickness:c,bevelSize:c,bevelOffset:0,bevelSegments:u}):new THREE.ShapeBufferGeometry(h,32),fixUvs(t,i,o),Object.assign(t,{userData:__assign(__assign({},e),{type:"TriangleGeometry"})})},e}();function roundShapePolygonTriangle(e,t,n){var r,i,o,a,s,c,u,l,h,f,d,p,m,v,g=function(e,t){var n=t.x-e.x,r=t.y-e.y,i=Math.sqrt(n*n+r*r),o=n/i,a=r/i;return{x:n,y:r,len:i,nx:o,ny:a,ang:Math.atan2(a,o)}},y=t.length-1;for(a=t[y-1],e.curves=[],r=0;r<y;r++){s=t[r%y],c=t[(r+1)%y];var b=g(s,a),w=g(s,c);u=b.nx*w.ny-b.ny*w.nx,l=b.nx*w.nx-b.ny*-w.ny,d=Math.asin(u),h=1,f=!1,l<0?d<0?d=Math.PI+d:(d=Math.PI-d,h=-1,f=!0):d>0&&(h=-1,f=!0),p=.5*d,(v=Math.abs(Math.cos(p)*n/Math.sin(p)))>Math.min(.5*b.len,.5*w.len)?(v=Math.min(.5*b.len,.5*w.len),m=Math.abs(v*Math.sin(p)/Math.cos(p))):m=n,i=s.x+w.nx*v,o=s.y+w.ny*v,i+=-w.ny*m*h,o+=w.nx*m*h,e.absarc(i,o,m,b.ang+Math.PI/2*h,w.ang-Math.PI/2*h,f),a=s,s=c}e.closePath()}var Point=function(){function e(e){this.position=new THREE.Vector2,this.startPosition=new THREE.Vector2,this.uuid=THREE.MathUtils.generateUUID(),this.position=e.clone()}return e.prototype.start=function(){this.reset()},e.prototype.reset=function(){this.startPosition.copy(this.position)},e.prototype.applyOffset=function(e){this.position.copy(this.startPosition).add(e)},e.prototype.copy=function(e){return this.position.copy(e.position),this.startPosition.copy(e.startPosition),this},e.prototype.clone=function(){return new e(this.position).copy(this)},e.prototype.toJSON=function(){return[this.position.x,this.position.y]},e}(),BezierControl=function(e){function t(t){var n=e.call(this,t.position)||this;return n.parent=t,n}return __extends(t,e),t.prototype.copy=function(t){return e.prototype.copy.call(this,t),this},t.prototype.clone=function(){return new t(this.parent).copy(this)},t}(Point),BezierPoint=function(e){function t(t){var n=e.call(this,t)||this;return n.controls=[],n.roundness=0,n.areControlsDirectionsMirrored=!0,n.controls.push(new BezierControl(n),new BezierControl(n)),n}return __extends(t,e),t.prototype.getOppositeControl=function(e){var t=this.controls.indexOf(e);return 0===t?this.controls[1]:1===t?this.controls[0]:null},t.prototype.applyOffsetToControls=function(e,t){void 0===t&&(t=1);for(var n=0,r=this.controls.length;n<r;n++){var i=this.controls[n];this.position.distanceTo(i.position)<=t?i.position.copy(this.position):i.applyOffset(e)}},t.prototype.controlsMoved=function(){return!(this.position.equals(this.controls[0].position)&&this.position.equals(this.controls[1].position))},t.prototype.copy=function(t){return e.prototype.copy.call(this,t),this.controls[0].copy(t.controls[0]),this.controls[1].copy(t.controls[1]),this},t.prototype.clone=function(){return new t(this.position).copy(this)},t.prototype.toJSON=function(){return e.prototype.toJSON.call(this).concat(this.controls[0].toJSON(),this.controls[1].toJSON(),[this.roundness])},t}(Point),toTCurve=function(e){return e},tempV2=new THREE.Vector2,tempbV2=new THREE.Vector2,tempaV3=new THREE.Vector3,tempbV3=new THREE.Vector3;function isStraightLine(e,t){return e.position.equals(e.controls[1].position)&&t.position.equals(t.controls[0].position)}function pointsToBuffer(e,t,n,r){void 0===n&&(n=12),void 0===r&&(r=!0);for(var i,o=tempbV3.set(0,0,0),a=0,s=0;s<t.length;s++)for(var c=toTCurve(t[s]),u=tempV2,l=getCurveDivision(c,n),h=0;h<=l;h++)if(c instanceof THREE.CubicBezierCurve||c instanceof THREE.LineCurve){if(c.getPoint(h/l,u),o.set(u.x,u.y,0),null==i?void 0:i.equals(o))continue;void 0===i&&(i=tempaV3),i.copy(o),e.setXYZ(a,o.x,o.y,o.z),a++}return r&&a>1&&(e.getX(a-1)!==e.getX(0)||e.getY(a-1)!==e.getY(0)||e.getZ(a-1)!==e.getZ(0))&&(e.setXYZ(a,e.getX(0),e.getY(0),e.getZ(0)),a++),e}function pointsSegmentsToBuffer(e,t,n,r,i){void 0===r&&(r=12),void 0===i&&(i=!0);for(var o=tempbV3.set(0,0,0),a=0,s=[],c=0;c<t.length;c++)if(!1!==n[c]){var u=void 0,l=toTCurve(t[c]),h=tempV2,f=getCurveDivision(l,r);s.push(f);for(var d=0;d<=f;d++)if(l instanceof THREE.CubicBezierCurve||l instanceof THREE.LineCurve){if(l.getPoint(d/f,h),o.set(h.x,h.y,0),null==u?void 0:u.equals(o))continue;void 0===u?u=tempaV3:(e.setXYZ(a,u.x,u.y,u.z),a++,e.setXYZ(a,o.x,o.y,o.z),a++),u.copy(o)}}return i&&a>1&&(e.getX(a-1)!==e.getX(0)||e.getY(a-1)!==e.getY(0)||e.getZ(a-1)!==e.getZ(0))&&(e.setXYZ(a,e.getX(0),e.getY(0),e.getZ(0)),a++),s}function getCurvesDivisions(e,t){void 0===t&&(t=12);for(var n=[],r=0;r<e.length;r++)n.push(getCurveDivision(e[r],t));return n}function getCurveDivision(e,t){return void 0===t&&(t=12),e&&e instanceof THREE.EllipseCurve?2*t:e&&(e instanceof THREE.LineCurve||e instanceof THREE.LineCurve3)?1:e&&e instanceof THREE.SplineCurve?t*e.points.length:t}function pointsToFlatArray(e,t,n,r){var i;void 0===n&&(n=12),void 0===r&&(r=!0);for(var o=0,a=0;a<t.length;a++)for(var s=toTCurve(t[a]),c=getCurveDivision(s,n),u=tempV2,l=0;l<=c;l++)if(s instanceof THREE.CubicBezierCurve||s instanceof THREE.LineCurve){if(s.getPoint(l/c,u),null==i?void 0:i.equals(u))continue;void 0===i&&(i=tempbV2),i.copy(u),e.push(u.x,u.y),o++}return r&&o>1&&(e[o-1]!==e[1]||e[o-2]!==e[0])&&(e.push(e[0],e[1]),o++),e}var ts1V2=new THREE.Vector2,ts2V2=new THREE.Vector2,ts3V2=new THREE.Vector2,ts4V2=new THREE.Vector2,ts5V2=new THREE.Vector2,VectorShape=function(e){function t(t,n){void 0===t&&(t=100),void 0===n&&(n=100);var r=e.call(this)||this;return r.points=[],r.shapeHoles=[],r.eventDispatcher=new THREE.EventDispatcher,r.plane=new THREE.Plane(new THREE.Vector3(0,0,-1)),r.isClosed=!1,r.uuid=THREE.MathUtils.generateUUID(),r._width=t,r._height=n,r}return __extends(t,e),Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),t.prototype.applySize=function(e,t){0===e&&(e=.001),0===t&&(t=.001),this.applyScale(e/this.width,t/this.height),this._width=e,this._height=t},t.prototype.applyScale=function(e,t){for(var n=ts1V2.set(e,t),r=0,i=this.points.length;r<i;r++){var o=this.points[r];o.position.multiply(n),o.controls[0].position.multiply(n),o.controls[1].position.multiply(n)}this.update()},t.prototype.createPoint=function(e,t){var n;return void 0===t&&(t=0),n=e instanceof THREE.Vector2?e:new THREE.Vector2(e,t),new BezierPoint(n)},t.prototype.addPoint=function(e){this.points.push(e),this._update()},t.prototype.addPointAt=function(e,t){this.points.splice(t,0,e),this._update()},t.prototype.getLastPoint=function(){return this.points[this.points.length-1]},t.prototype.removePoint=function(e){var t=this.points.indexOf(e);t>=0&&this.points.splice(t,1),this._update()},t.prototype.splitCurveAt=function(e,t,n){void 0===n&&(n=.5);var r=this.points.indexOf(e),i=this.points.indexOf(t);if(r<0||i<0)return null;var o=isStraightLine(e,t),a=new THREE.Vector2,s=new BezierPoint(a);if(o)a.subVectors(t.position,e.position).multiplyScalar(n).add(e.position),s.position.copy(a),s.controls[0].position.copy(a),s.controls[1].position.copy(a);else{var c=ts1V2.subVectors(e.controls[1].position,e.position).multiplyScalar(n).add(e.position),u=ts2V2.subVectors(t.controls[0].position,e.controls[1].position).multiplyScalar(n).add(e.controls[1].position),l=ts3V2.subVectors(t.position,t.controls[0].position).multiplyScalar(n).add(t.controls[0].position),h=c,f=ts4V2.subVectors(u,c).multiplyScalar(n).add(c),d=ts5V2.subVectors(l,u).multiplyScalar(n).add(u),p=l;a.subVectors(d,f).multiplyScalar(n).add(f),s.position.copy(a),s.controls[0].position.copy(f),s.controls[1].position.copy(d),e.controls[1].position.copy(h),t.controls[0].position.copy(p)}return this.points.splice(r+1,0,s),this._update(),s},t.prototype.update=function(){this._update()},t.prototype.extractShapePointsToBuffer=function(e,t){return void 0===t&&(t=12),this.curveDivisions=getCurvesDivisions(this.curves,t),pointsToBuffer(e,this.curves,t,this.autoClose),this.curveDivisions.reduce((function(e,t){return e+t}),0)+1},t.prototype.extractFilteredShapePointsToBuffer=function(e,t,n){return void 0===n&&(n=12),2*pointsSegmentsToBuffer(e,this.curves,t,n,this.autoClose).reduce((function(e,t){return e+t}),0)},t.prototype.extractShapePointsToFlatArray=function(e,t){return void 0===t&&(t=12),this.curveDivisions=getCurvesDivisions(this.curves,t),pointsToFlatArray(e,this.curves,t,this.autoClose)},t.prototype.getCurveIndexFromVertexId=function(e){var t=0;if(!this.curveDivisions)throw Error("no cache curveDivisions cache");for(var n=0,r=this.curveDivisions.length;n<r;n++){var i=this.curveDivisions[n];if(e<t+i)return[n,(e-t+1)/i];t+=i}return[0,1]},t.prototype.getCurveT=function(e,t,n){var r=this.points[e],i=this.points[e>=this.points.length-1?0:e+1],o=this.curveDivisions,a=o[e];if(isStraightLine(r,i)){var s=r.position.distanceTo(i.position);return r.position.distanceTo(ts1V2.set(n.x,n.y))/s}for(var c=0,u=0;u<e;u++)c+=o[u];return(t-c+1)/a},t.prototype.dispose=function(){this.eventDispatcher=null},t.prototype._update=function(){var e,t;this.curves=[];for(var n=0,r=this.points.length;n<r;n++){var i=this.points[n];0===n?this.moveTo(i.position.x,i.position.y):isStraightLine(t=this.points[n-1],i)?this.lineTo(i.position.x,i.position.y):this.bezierCurveTo(t.controls[1].position.x,t.controls[1].position.y,i.controls[0].position.x,i.controls[0].position.y,i.position.x,i.position.y)}this.isClosed&&(i=this.points[0],isStraightLine(t=this.points[this.points.length-1],i)?this.lineTo(i.position.x,i.position.y):this.bezierCurveTo(t.controls[1].position.x,t.controls[1].position.y,i.controls[0].position.x,i.controls[0].position.y,i.position.x,i.position.y));null===(e=this.eventDispatcher)||void 0===e||e.dispatchEvent({type:"update"})},t.prototype.clone=function(){var e=new t(this._width,this._height);return e.points=this.points.map((function(e){return e.clone()})),e.isClosed=this.isClosed,e},t.prototype.toJSON=function(){return{points:this.points.reduce((function(e,t){return e.concat(t.toJSON())}),[]),isClosed:this.isClosed}},t.prototype.fromJSON=function(e){this.points=[];for(var t=e.points.length/7,n=0;n<t;n++){var r=7*n,i=e.points[r+0],o=e.points[r+1],a=e.points[r+2],s=e.points[r+3],c=e.points[r+4],u=e.points[r+5],l=e.points[r+6],h=new BezierPoint(new THREE.Vector2(i,o));h.controls[0].position.set(a,s),h.controls[1].position.set(c,u),h.roundness=l,this.points.push(h)}return this.isClosed=e.isClosed,this._update(),this},t}(THREE.Shape),WINDING,ELEMENT;function assert(e,t){if(!e)throw t||"Assertion Failed!"}!function(e){e[e.ODD=0]="ODD",e[e.NONZERO=1]="NONZERO",e[e.POSITIVE=2]="POSITIVE",e[e.NEGATIVE=3]="NEGATIVE",e[e.ABS_GEQ_TWO=4]="ABS_GEQ_TWO"}(WINDING||(WINDING={})),function(e){e[e.POLYGONS=0]="POLYGONS",e[e.CONNECTED_POLYGONS=1]="CONNECTED_POLYGONS",e[e.BOUNDARY_CONTOURS=2]="BOUNDARY_CONTOURS"}(ELEMENT||(ELEMENT={}));var Geom=function(){function e(){}return e.vertEq=function(e,t){return e.s===t.s&&e.t===t.t},e.vertLeq=function(e,t){return e.s<t.s||e.s===t.s&&e.t<=t.t},e.transLeq=function(e,t){return e.t<t.t||e.t===t.t&&e.s<=t.s},e.edgeGoesLeft=function(t){return e.vertLeq(t.Dst,t.Org)},e.edgeGoesRight=function(t){return e.vertLeq(t.Org,t.Dst)},e.vertL1dist=function(e,t){return Math.abs(e.s-t.s)+Math.abs(e.t-t.t)},e.edgeEval=function(t,n,r){assert(e.vertLeq(t,n)&&e.vertLeq(n,r));var i=n.s-t.s,o=r.s-n.s;return i+o>0?i<o?n.t-t.t+(t.t-r.t)*(i/(i+o)):n.t-r.t+(r.t-t.t)*(o/(i+o)):0},e.edgeSign=function(t,n,r){assert(e.vertLeq(t,n)&&e.vertLeq(n,r));var i=n.s-t.s,o=r.s-n.s;return i+o>0?(n.t-r.t)*i+(n.t-t.t)*o:0},e.transEval=function(t,n,r){assert(e.transLeq(t,n)&&e.transLeq(n,r));var i=n.t-t.t,o=r.t-n.t;return i+o>0?i<o?n.s-t.s+(t.s-r.s)*(i/(i+o)):n.s-r.s+(r.s-t.s)*(o/(i+o)):0},e.transSign=function(t,n,r){assert(e.transLeq(t,n)&&e.transLeq(n,r));var i=n.t-t.t,o=r.t-n.t;return i+o>0?(n.s-r.s)*i+(n.s-t.s)*o:0},e.vertCCW=function(e,t,n){return e.s*(t.t-n.t)+t.s*(n.t-e.t)+n.s*(e.t-t.t)>=0},e.interpolate=function(e,t,n,r){return(e=e<0?0:e)<=(n=n<0?0:n)?0===n?(t+r)/2:t+e/(e+n)*(r-t):r+n/(e+n)*(t-r)},e.intersect=function(t,n,r,i,o){var a,s,c;e.vertLeq(t,n)||(c=t,t=n,n=c),e.vertLeq(r,i)||(c=r,r=i,i=c),e.vertLeq(t,r)||(c=t,t=r,r=c,c=n,n=i,i=c),e.vertLeq(r,n)?e.vertLeq(n,i)?((a=e.edgeEval(t,r,n))+(s=e.edgeEval(r,n,i))<0&&(a=-a,s=-s),o.s=e.interpolate(a,r.s,s,n.s)):((a=e.edgeSign(t,r,n))+(s=-e.edgeSign(t,i,n))<0&&(a=-a,s=-s),o.s=e.interpolate(a,r.s,s,i.s)):o.s=(r.s+n.s)/2,e.transLeq(t,n)||(c=t,t=n,n=c),e.transLeq(r,i)||(c=r,r=i,i=c),e.transLeq(t,r)||(c=t,t=r,r=c,c=n,n=i,i=c),e.transLeq(r,n)?e.transLeq(n,i)?((a=e.transEval(t,r,n))+(s=e.transEval(r,n,i))<0&&(a=-a,s=-s),o.t=e.interpolate(a,r.t,s,n.t)):((a=e.transSign(t,r,n))+(s=-e.transSign(t,i,n))<0&&(a=-a,s=-s),o.t=e.interpolate(a,r.t,s,i.t)):o.t=(r.t+n.t)/2},e}(),TESSface=function(){this.next=null,this.prev=null,this.anEdge=null,this.trail=null,this.n=0,this.marked=!1,this.inside=!1},TESShalfEdge=function(){function e(e){this.side=e,this.next=null,this.Org=null,this.Sym=null,this.Onext=null,this.Lnext=null,this.Lface=null,this.activeRegion=null,this.winding=0}return Object.defineProperty(e.prototype,"Rface",{get:function(){return this.Sym.Lface},set:function(e){this.Sym.Lface=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Dst",{get:function(){return this.Sym.Org},set:function(e){this.Sym.Org=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Oprev",{get:function(){return this.Sym.Lnext},set:function(e){this.Sym.Lnext=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Lprev",{get:function(){return this.Onext.Sym},set:function(e){this.Onext.Sym=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Dprev",{get:function(){return this.Lnext.Sym},set:function(e){this.Lnext.Sym=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Rprev",{get:function(){return this.Sym.Onext},set:function(e){this.Sym.Onext=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Dnext",{get:function(){return this.Sym.Onext.Sym},set:function(e){this.Sym.Onext.Sym=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Rnext",{get:function(){return this.Sym.Lnext.Sym},set:function(e){this.Sym.Lnext.Sym=e},enumerable:!0,configurable:!0}),e}(),TESSvertex=function(){this.next=null,this.prev=null,this.anEdge=null,this.coords=[0,0,0],this.s=0,this.t=0,this.pqHandle=0,this.n=0,this.idx=0},TESSmesh=function(){function e(){var e=new TESSvertex,t=new TESSface,n=new TESShalfEdge(0),r=new TESShalfEdge(1);e.next=e.prev=e,e.anEdge=null,t.next=t.prev=t,n.next=n,n.Sym=r,r.next=r,r.Sym=n,this.vHead=e,this.fHead=t,this.eHead=n,this.eHeadSym=r}return e.prototype.makeEdge_=function(e){var t=new TESShalfEdge(0),n=new TESShalfEdge(1);e.Sym.side<e.side&&(e=e.Sym);var r=e.Sym.next;return n.next=r,r.Sym.next=t,t.next=e,e.Sym.next=n,t.Sym=n,t.Onext=t,t.Lnext=n,t.Org=null,t.Lface=null,t.winding=0,t.activeRegion=null,n.Sym=t,n.Onext=n,n.Lnext=t,n.Org=null,n.Lface=null,n.winding=0,n.activeRegion=null,t},e.prototype.splice_=function(e,t){var n=e.Onext,r=t.Onext;n.Sym.Lnext=t,r.Sym.Lnext=e,e.Onext=r,t.Onext=n},e.prototype.makeVertex_=function(e,t,n){var r=e;assert(r,"Vertex can't be null!");var i=n.prev;r.prev=i,i.next=r,r.next=n,n.prev=r,r.anEdge=t;var o=t;do{o.Org=r,o=o.Onext}while(o!==t)},e.prototype.makeFace_=function(e,t,n){var r=e;assert(r,"Face can't be null");var i=n.prev;r.prev=i,i.next=r,r.next=n,n.prev=r,r.anEdge=t,r.trail=null,r.marked=!1,r.inside=n.inside;var o=t;do{o.Lface=r,o=o.Lnext}while(o!==t)},e.prototype.killEdge_=function(e){e.Sym.side<e.side&&(e=e.Sym);var t=e.next,n=e.Sym.next;t.Sym.next=n,n.Sym.next=t},e.prototype.killVertex_=function(e,t){var n=e.anEdge,r=n;do{r.Org=t,r=r.Onext}while(r!==n);var i=e.prev,o=e.next;o.prev=i,i.next=o},e.prototype.killFace_=function(e,t){var n=e.anEdge,r=n;do{r.Lface=t,r=r.Lnext}while(r!==n);var i=e.prev,o=e.next;o.prev=i,i.next=o},e.prototype.makeEdge=function(){var e=new TESSvertex,t=new TESSvertex,n=new TESSface,r=this.makeEdge_(this.eHead);return this.makeVertex_(e,r,this.vHead),this.makeVertex_(t,r.Sym,this.vHead),this.makeFace_(n,r,this.fHead),r},e.prototype.splice=function(e,t){var n=!1,r=!1;if(e!==t){if(t.Org!==e.Org&&(r=!0,this.killVertex_(t.Org,e.Org)),t.Lface!==e.Lface&&(n=!0,this.killFace_(t.Lface,e.Lface)),this.splice_(t,e),!r){var i=new TESSvertex;this.makeVertex_(i,t,e.Org),e.Org.anEdge=e}if(!n){var o=new TESSface;this.makeFace_(o,t,e.Lface),e.Lface.anEdge=e}}},e.prototype.delete=function(e){var t=e.Sym,n=!1;if(e.Lface!==e.Rface&&(n=!0,this.killFace_(e.Lface,e.Rface)),e.Onext===e)this.killVertex_(e.Org,null);else if(e.Rface.anEdge=e.Oprev,e.Org.anEdge=e.Onext,this.splice_(e,e.Oprev),!n){var r=new TESSface;this.makeFace_(r,e,e.Lface)}t.Onext===t?(this.killVertex_(t.Org,null),this.killFace_(t.Lface,null)):(e.Lface.anEdge=t.Oprev,t.Org.anEdge=t.Onext,this.splice_(t,t.Oprev)),this.killEdge_(e)},e.prototype.addEdgeVertex=function(e){var t=this.makeEdge_(e),n=t.Sym;this.splice_(t,e.Lnext),t.Org=e.Dst;var r=new TESSvertex;return this.makeVertex_(r,n,t.Org),t.Lface=n.Lface=e.Lface,t},e.prototype.splitEdge=function(e){var t=this.addEdgeVertex(e).Sym;return this.splice_(e.Sym,e.Sym.Oprev),this.splice_(e.Sym,t),e.Dst=t.Org,t.Dst.anEdge=t.Sym,t.Rface=e.Rface,t.winding=e.winding,t.Sym.winding=e.Sym.winding,t},e.prototype.connect=function(e,t){var n=!1,r=this.makeEdge_(e),i=r.Sym;if(t.Lface!==e.Lface&&(n=!0,this.killFace_(t.Lface,e.Lface)),this.splice_(r,e.Lnext),this.splice_(i,t),r.Org=e.Dst,i.Org=t.Org,r.Lface=i.Lface=e.Lface,e.Lface.anEdge=i,!n){var o=new TESSface;this.makeFace_(o,r,e.Lface)}return r},e.prototype.zapFace=function(e){var t,n,r,i,o,a=e.anEdge;n=a.Lnext;do{n=(t=n).Lnext,t.Lface=null,null===t.Rface&&(t.Onext===t?this.killVertex_(t.Org,null):(t.Org.anEdge=t.Onext,this.splice_(t,t.Oprev)),(r=t.Sym).Onext===r?this.killVertex_(r.Org,null):(r.Org.anEdge=r.Onext,this.splice_(r,r.Oprev)),this.killEdge_(t))}while(t!=a);i=e.prev,(o=e.next).prev=i,i.next=o},e.prototype.countFaceVerts_=function(e){var t=e.anEdge,n=0;do{n++,t=t.Lnext}while(t!==e.anEdge);return n},e.prototype.mergeConvexFaces=function(e){var t,n,r,i,o;for(t=this.fHead.next;t!==this.fHead;t=t.next)if(t.inside)for(o=(n=t.anEdge).Org;r=n.Lnext,(i=n.Sym)&&i.Lface&&i.Lface.inside&&this.countFaceVerts_(t)+this.countFaceVerts_(i.Lface)-2<=e&&Geom.vertCCW(n.Lprev.Org,n.Org,i.Lnext.Lnext.Org)&&Geom.vertCCW(i.Lprev.Org,i.Org,n.Lnext.Lnext.Org)&&(r=i.Lnext,this.delete(i),n=null,i=null),!n||n.Lnext.Org!==o;)n=r;return!0},e.prototype.check=function(){var e,t,n,r,i,o,a=this.fHead,s=this.vHead,c=this.eHead;for(t=a,t=a;(e=t.next)!==a;t=e){assert(e.prev===t),i=e.anEdge;do{assert(i.Sym!==i),assert(i.Sym.Sym===i),assert(i.Lnext.Onext.Sym===i),assert(i.Onext.Sym.Lnext===i),assert(i.Lface===e),i=i.Lnext}while(i!==e.anEdge)}for(assert(e.prev===t&&null===e.anEdge),r=s,r=s;(n=r.next)!==s;r=n){assert(n.prev===r),i=n.anEdge;do{assert(i.Sym!==i),assert(i.Sym.Sym===i),assert(i.Lnext.Onext.Sym===i),assert(i.Onext.Sym.Lnext===i),assert(i.Org===n),i=i.Onext}while(i!==n.anEdge)}for(assert(n.prev===r&&null===n.anEdge),o=c,o=c;(i=o.next)!==c;o=i)assert(i.Sym.next===o.Sym),assert(i.Sym!==i),assert(i.Sym.Sym===i),assert(null!==i.Org),assert(null!==i.Dst),assert(i.Lnext.Onext.Sym===i),assert(i.Onext.Sym.Lnext===i);assert(i.Sym.next===o.Sym&&i.Sym===this.eHeadSym&&i.Sym.Sym===i&&null===i.Org&&null===i.Dst&&null===i.Lface&&null===i.Rface)},e}(),PQnode=function(){this.handle=null},PQhandleElem=function(){this.key=null,this.node=0},PriorityQ=function(){function e(e,t){this.leq=t,this.max=0,this.nodes=[],this.handles=[],this.initialized=!1,this.freeList=0,this.size=0,this.max=e,this.nodes=[],this.handles=[];for(var n=0;n<e+1;n++)this.nodes[n]=new PQnode,this.handles[n]=new PQhandleElem;this.initialized=!1,this.nodes[1].handle=1,this.handles[1].key=null}return e.prototype.floatDown_=function(e){var t,n,r,i=this.nodes,o=this.handles;for(t=i[e].handle;;){if((r=e<<1)<this.size&&this.leq(o[i[r+1].handle].key,o[i[r].handle].key)&&++r,assert(r<=this.max),n=i[r].handle,r>this.size||this.leq(o[t].key,o[n].key)){i[e].handle=t,o[t].node=e;break}i[e].handle=n,o[n].node=e,e=r}},e.prototype.floatUp_=function(e){var t,n,r,i=this.nodes,o=this.handles;for(t=i[e].handle;;){if(n=i[r=e>>1].handle,0===r||this.leq(o[n].key,o[t].key)){i[e].handle=t,o[t].node=e;break}i[e].handle=n,o[n].node=e,e=r}},e.prototype.init=function(){for(var e=this.size;e>=1;--e)this.floatDown_(e);this.initialized=!0},e.prototype.min=function(){return this.handles[this.nodes[1].handle].key},e.prototype.insert=function(e){var t,n;if(2*(t=++this.size)>this.max){var r,i;for(this.max*=2,i=this.nodes.length,this.nodes.length=this.max+1,r=i;r<this.nodes.length;r++)this.nodes[r]=new PQnode;for(i=this.handles.length,this.handles.length=this.max+1,r=i;r<this.handles.length;r++)this.handles[r]=new PQhandleElem}return 0===this.freeList?n=t:(n=this.freeList,this.freeList=this.handles[n].node),this.nodes[t].handle=n,this.handles[n].node=t,this.handles[n].key=e,this.initialized&&this.floatUp_(t),n},e.prototype.extractMin=function(){var e=this.nodes,t=this.handles,n=e[1].handle,r=t[n].key;return this.size>0&&(e[1].handle=e[this.size].handle,t[e[1].handle].node=1,t[n].key=null,t[n].node=this.freeList,this.freeList=n,--this.size,this.size>0&&this.floatDown_(1)),r},e.prototype.delete=function(e){var t,n=this.nodes,r=this.handles;assert(e>=1&&e<=this.max&&null!==r[e].key),n[t=r[e].node].handle=n[this.size].handle,r[n[t].handle].node=t,--this.size,t<=this.size&&(t<=1||this.leq(r[n[t>>1].handle].key,r[n[t].handle].key)?this.floatDown_(t):this.floatUp_(t)),r[e].key=null,r[e].node=this.freeList,this.freeList=e},e}(),ActiveRegion=function(){this.eUp=null,this.nodeUp=null,this.windingNumber=0,this.inside=!1,this.sentinel=!1,this.dirty=!1,this.fixUpperEdge=!1},DictNode=function(){this.key=null,this.next=null,this.prev=null},Dict=function(){function e(e,t){this.frame=e,this.leq=t,this.head=new DictNode,this.head.next=this.head,this.head.prev=this.head}return e.prototype.min=function(){return this.head.next},e.prototype.max=function(){return this.head.prev},e.prototype.insert=function(e){return this.insertBefore(this.head,e)},e.prototype.search=function(e){var t=this.head;do{t=t.next}while(null!==t.key&&!this.leq(this.frame,e,t.key));return t},e.prototype.insertBefore=function(e,t){do{e=e.prev}while(null!==e.key&&!this.leq(this.frame,e.key,t));var n=new DictNode;return n.key=t,n.next=e.next,e.next.prev=n,n.prev=e,e.next=n,n},e.prototype.delete=function(e){e.next.prev=e.prev,e.prev.next=e.next},e}(),Sweep=function(){function e(){}return e.regionBelow=function(e){return e.nodeUp.prev.key},e.regionAbove=function(e){return e.nodeUp.next.key},e.debugEvent=function(e){},e.addWinding=function(e,t){e.winding+=t.winding,e.Sym.winding+=t.Sym.winding},e.edgeLeq=function(e,t,n){var r=e.event,i=t.eUp,o=n.eUp;return i.Dst===r?o.Dst===r?Geom.vertLeq(i.Org,o.Org)?Geom.edgeSign(o.Dst,i.Org,o.Org)<=0:Geom.edgeSign(i.Dst,o.Org,i.Org)>=0:Geom.edgeSign(o.Dst,r,o.Org)<=0:o.Dst===r?Geom.edgeSign(i.Dst,r,i.Org)>=0:Geom.edgeEval(i.Dst,r,i.Org)>=Geom.edgeEval(o.Dst,r,o.Org)},e.deleteRegion=function(e,t){t.fixUpperEdge&&assert(0===t.eUp.winding),t.eUp.activeRegion=null,e.dict.delete(t.nodeUp)},e.fixUpperEdge=function(e,t,n){assert(t.fixUpperEdge),e.mesh.delete(t.eUp),t.fixUpperEdge=!1,t.eUp=n,n.activeRegion=t},e.topLeftRegion=function(t,n){var r,i=n.eUp.Org;do{n=e.regionAbove(n)}while(n.eUp.Org===i);if(n.fixUpperEdge){if(null===(r=t.mesh.connect(e.regionBelow(n).eUp.Sym,n.eUp.Lnext)))return null;e.fixUpperEdge(t,n,r),n=e.regionAbove(n)}return n},e.topRightRegion=function(t){var n=t.eUp.Dst;do{t=e.regionAbove(t)}while(t.eUp.Dst===n);return t},e.addRegionBelow=function(e,t,n){var r=new ActiveRegion;return r.eUp=n,r.nodeUp=e.dict.insertBefore(t.nodeUp,r),r.fixUpperEdge=!1,r.sentinel=!1,r.dirty=!1,n.activeRegion=r,r},e.isWindingInside=function(e,t){switch(e.windingRule){case WINDING.ODD:return 0!=(1&t);case WINDING.NONZERO:return 0!==t;case WINDING.POSITIVE:return t>0;case WINDING.NEGATIVE:return t<0;case WINDING.ABS_GEQ_TWO:return t>=2||t<=-2}throw new Error("Invalid winding rulle")},e.computeWinding=function(t,n){n.windingNumber=e.regionAbove(n).windingNumber+n.eUp.winding,n.inside=e.isWindingInside(t,n.windingNumber)},e.finishRegion=function(t,n){var r=n.eUp,i=r.Lface;i.inside=n.inside,i.anEdge=r,e.deleteRegion(t,n)},e.finishLeftRegions=function(t,n,r){for(var i,o=null,a=n,s=n.eUp;a!==r;){if(a.fixUpperEdge=!1,(i=(o=e.regionBelow(a)).eUp).Org!=s.Org){if(!o.fixUpperEdge){e.finishRegion(t,a);break}i=t.mesh.connect(s.Lprev,i.Sym),e.fixUpperEdge(t,o,i)}s.Onext!==i&&(t.mesh.splice(i.Oprev,i),t.mesh.splice(s,i)),e.finishRegion(t,a),s=o.eUp,a=o}return s},e.addRightEdges=function(t,n,r,i,o,a){var s,c,u,l,h=!0;u=r;do{assert(Geom.vertLeq(u.Org,u.Dst)),e.addRegionBelow(t,n,u.Sym),u=u.Onext}while(u!==i);for(null===o&&(o=e.regionBelow(n).eUp.Rprev),c=n,l=o;(u=(s=e.regionBelow(c)).eUp.Sym).Org===l.Org;)u.Onext!==l&&(t.mesh.splice(u.Oprev,u),t.mesh.splice(l.Oprev,u)),s.windingNumber=c.windingNumber-u.winding,s.inside=e.isWindingInside(t,s.windingNumber),c.dirty=!0,!h&&e.checkForRightSplice(t,c)&&(e.addWinding(u,l),e.deleteRegion(t,c),t.mesh.delete(l)),h=!1,c=s,l=u;c.dirty=!0,assert(c.windingNumber-u.winding===s.windingNumber),a&&e.walkDirtyRegions(t,c)},e.spliceMergeVertices=function(e,t,n){e.mesh.splice(t,n)},e.vertexWeights=function(e,t,n){var r=Geom.vertL1dist(t,e),i=Geom.vertL1dist(n,e),o=.5*i/(r+i),a=.5*r/(r+i);e.coords[0]+=o*t.coords[0]+a*n.coords[0],e.coords[1]+=o*t.coords[1]+a*n.coords[1],e.coords[2]+=o*t.coords[2]+a*n.coords[2]},e.getIntersectData=function(t,n,r,i,o,a){n.coords[0]=n.coords[1]=n.coords[2]=0,n.idx=-1,e.vertexWeights(n,r,i),e.vertexWeights(n,o,a)},e.checkForRightSplice=function(t,n){var r=e.regionBelow(n),i=n.eUp,o=r.eUp;if(Geom.vertLeq(i.Org,o.Org)){if(Geom.edgeSign(o.Dst,i.Org,o.Org)>0)return!1;Geom.vertEq(i.Org,o.Org)?i.Org!==o.Org&&(t.pq.delete(i.Org.pqHandle),e.spliceMergeVertices(t,o.Oprev,i)):(t.mesh.splitEdge(o.Sym),t.mesh.splice(i,o.Oprev),n.dirty=r.dirty=!0)}else{if(Geom.edgeSign(i.Dst,o.Org,i.Org)<0)return!1;e.regionAbove(n).dirty=n.dirty=!0,t.mesh.splitEdge(i.Sym),t.mesh.splice(o.Oprev,i)}return!0},e.checkForLeftSplice=function(t,n){var r,i=e.regionBelow(n),o=n.eUp,a=i.eUp;if(assert(!Geom.vertEq(o.Dst,a.Dst)),Geom.vertLeq(o.Dst,a.Dst)){if(Geom.edgeSign(o.Dst,a.Dst,o.Org)<0)return!1;e.regionAbove(n).dirty=n.dirty=!0,r=t.mesh.splitEdge(o),t.mesh.splice(a.Sym,r),r.Lface.inside=n.inside}else{if(Geom.edgeSign(a.Dst,o.Dst,a.Org)>0)return!1;n.dirty=i.dirty=!0,r=t.mesh.splitEdge(a),t.mesh.splice(o.Lnext,a.Sym),r.Rface.inside=n.inside}return!0},e.checkForIntersect=function(t,n){var r,i,o=e.regionBelow(n),a=n.eUp,s=o.eUp,c=a.Org,u=s.Org,l=a.Dst,h=s.Dst,f=new TESSvertex;if(assert(!Geom.vertEq(h,l)),assert(Geom.edgeSign(l,t.event,c)<=0),assert(Geom.edgeSign(h,t.event,u)>=0),assert(c!==t.event&&u!==t.event),assert(!n.fixUpperEdge&&!o.fixUpperEdge),c===u)return!1;if(Math.min(c.t,l.t)>Math.max(u.t,h.t))return!1;if(Geom.vertLeq(c,u)){if(Geom.edgeSign(h,c,u)>0)return!1}else if(Geom.edgeSign(l,u,c)<0)return!1;return e.debugEvent(t),Geom.intersect(l,c,h,u,f),assert(Math.min(c.t,l.t)<=f.t),assert(f.t<=Math.max(u.t,h.t)),assert(Math.min(h.s,l.s)<=f.s),assert(f.s<=Math.max(u.s,c.s)),Geom.vertLeq(f,t.event)&&(f.s=t.event.s,f.t=t.event.t),r=Geom.vertLeq(c,u)?c:u,Geom.vertLeq(r,f)&&(f.s=r.s,f.t=r.t),Geom.vertEq(f,c)||Geom.vertEq(f,u)?(e.checkForRightSplice(t,n),!1):!Geom.vertEq(l,t.event)&&Geom.edgeSign(l,t.event,f)>=0||!Geom.vertEq(h,t.event)&&Geom.edgeSign(h,t.event,f)<=0?h===t.event?(t.mesh.splitEdge(a.Sym),t.mesh.splice(s.Sym,a),n=e.topLeftRegion(t,n),a=e.regionBelow(n).eUp,e.finishLeftRegions(t,e.regionBelow(n),o),e.addRightEdges(t,n,a.Oprev,a,a,!0),!0):l===t.event?(t.mesh.splitEdge(s.Sym),t.mesh.splice(a.Lnext,s.Oprev),o=n,n=e.topRightRegion(n),i=e.regionBelow(n).eUp.Rprev,o.eUp=s.Oprev,s=e.finishLeftRegions(t,o,null),e.addRightEdges(t,n,s.Onext,a.Rprev,i,!0),!0):(Geom.edgeSign(l,t.event,f)>=0&&(e.regionAbove(n).dirty=n.dirty=!0,t.mesh.splitEdge(a.Sym),a.Org.s=t.event.s,a.Org.t=t.event.t),Geom.edgeSign(h,t.event,f)<=0&&(n.dirty=o.dirty=!0,t.mesh.splitEdge(s.Sym),s.Org.s=t.event.s,s.Org.t=t.event.t),!1):(t.mesh.splitEdge(a.Sym),t.mesh.splitEdge(s.Sym),t.mesh.splice(s.Oprev,a),a.Org.s=f.s,a.Org.t=f.t,a.Org.pqHandle=t.pq.insert(a.Org),e.getIntersectData(t,a.Org,c,l,u,h),e.regionAbove(n).dirty=n.dirty=o.dirty=!0,!1)},e.walkDirtyRegions=function(t,n){for(var r,i,o=e.regionBelow(n);;){for(;o.dirty;)n=o,o=e.regionBelow(o);if(!n.dirty&&(o=n,null===(n=e.regionAbove(n))||!n.dirty))return;if(n.dirty=!1,r=n.eUp,i=o.eUp,r.Dst!==i.Dst&&e.checkForLeftSplice(t,n)&&(o.fixUpperEdge?(e.deleteRegion(t,o),t.mesh.delete(i),i=(o=e.regionBelow(n)).eUp):n.fixUpperEdge&&(e.deleteRegion(t,n),t.mesh.delete(r),r=(n=e.regionAbove(o)).eUp)),r.Org!==i.Org)if(r.Dst===i.Dst||n.fixUpperEdge||o.fixUpperEdge||r.Dst!==t.event&&i.Dst!==t.event)e.checkForRightSplice(t,n);else if(e.checkForIntersect(t,n))return;r.Org===i.Org&&r.Dst===i.Dst&&(e.addWinding(i,r),e.deleteRegion(t,n),t.mesh.delete(r),n=e.regionAbove(o))}},e.connectRightVertex=function(t,n,r){var i,o=r.Onext,a=e.regionBelow(n),s=n.eUp,c=a.eUp,u=!1;s.Dst!==c.Dst&&e.checkForIntersect(t,n),Geom.vertEq(s.Org,t.event)&&(t.mesh.splice(o.Oprev,s),n=e.topLeftRegion(t,n),o=e.regionBelow(n).eUp,e.finishLeftRegions(t,e.regionBelow(n),a),u=!0),Geom.vertEq(c.Org,t.event)&&(t.mesh.splice(r,c.Oprev),r=e.finishLeftRegions(t,a,null),u=!0),u?e.addRightEdges(t,n,r.Onext,o,o,!0):(i=Geom.vertLeq(c.Org,s.Org)?c.Oprev:s,i=t.mesh.connect(r.Lprev,i),e.addRightEdges(t,n,i,i.Onext,i.Onext,!1),i.Sym.activeRegion.fixUpperEdge=!0,e.walkDirtyRegions(t,n))},e.connectLeftDegenerate=function(t,n,r){var i,o,a,s,c;return i=n.eUp,Geom.vertEq(i.Org,r)?(assert(!1),void e.spliceMergeVertices(t,i,r.anEdge)):Geom.vertEq(i.Dst,r)?(assert(!1),n=e.topRightRegion(n),o=s=(a=(c=e.regionBelow(n)).eUp.Sym).Onext,c.fixUpperEdge&&(assert(o!==a),e.deleteRegion(t,c),t.mesh.delete(a),a=o.Oprev),t.mesh.splice(r.anEdge,a),Geom.edgeGoesLeft(o)||(o=null),void e.addRightEdges(t,n,a.Onext,s,o,!0)):(t.mesh.splitEdge(i.Sym),n.fixUpperEdge&&(t.mesh.delete(i.Onext),n.fixUpperEdge=!1),t.mesh.splice(r.anEdge,i),void e.sweepEvent(t,r))},e.connectLeftVertex=function(t,n){var r,i,o,a,s,c,u=new ActiveRegion;u.eUp=n.anEdge.Sym,r=t.dict.search(u).key,(i=e.regionBelow(r))&&(a=r.eUp,s=i.eUp,0!==Geom.edgeSign(a.Dst,n,a.Org)?(o=Geom.vertLeq(s.Dst,a.Dst)?r:i,r.inside||o.fixUpperEdge?(c=o===r?t.mesh.connect(n.anEdge.Sym,a.Lnext):t.mesh.connect(s.Dnext,n.anEdge).Sym,o.fixUpperEdge?e.fixUpperEdge(t,o,c):e.computeWinding(t,e.addRegionBelow(t,r,c)),e.sweepEvent(t,n)):e.addRightEdges(t,r,n.anEdge,n.anEdge,null,!0)):e.connectLeftDegenerate(t,r,n))},e.sweepEvent=function(t,n){t.event=n,e.debugEvent(t);for(var r=n.anEdge;null===r.activeRegion;)if((r=r.Onext)===n.anEdge)return void e.connectLeftVertex(t,n);var i=e.topLeftRegion(t,r.activeRegion);assert(null!==i);var o=e.regionBelow(i),a=o.eUp,s=e.finishLeftRegions(t,o,null);s.Onext===a?e.connectRightVertex(t,i,s):e.addRightEdges(t,i,s.Onext,a,a,!0)},e.addSentinel=function(e,t,n,r){var i=new ActiveRegion,o=e.mesh.makeEdge();o.Org.s=n,o.Org.t=r,o.Dst.s=t,o.Dst.t=r,e.event=o.Dst,i.eUp=o,i.windingNumber=0,i.inside=!1,i.fixUpperEdge=!1,i.sentinel=!0,i.dirty=!1,i.nodeUp=e.dict.insert(i)},e.initEdgeDict=function(t){t.dict=new Dict(t,e.edgeLeq);var n=t.bmax[0]-t.bmin[0],r=t.bmax[1]-t.bmin[1],i=t.bmin[0]-n,o=t.bmax[0]+n,a=t.bmin[1]-r,s=t.bmax[1]+r;e.addSentinel(t,i,o,a),e.addSentinel(t,i,o,s)},e.doneEdgeDict=function(t){for(var n,r=0;null!==(n=t.dict.min().key);)n.sentinel||(assert(n.fixUpperEdge),assert(1==++r)),assert(0===n.windingNumber),e.deleteRegion(t,n)},e.removeDegenerateEdges=function(t){var n,r,i,o=t.mesh.eHead;for(n=o.next;n!==o;n=r)r=n.next,i=n.Lnext,Geom.vertEq(n.Org,n.Dst)&&n.Lnext.Lnext!==n&&(e.spliceMergeVertices(t,i,n),t.mesh.delete(n),i=(n=i).Lnext),i.Lnext===n&&(i!==n&&(i!==r&&i!==r.Sym||(r=r.next),t.mesh.delete(i)),n!==r&&n!==r.Sym||(r=r.next),t.mesh.delete(n))},e.initPriorityQ=function(e){var t,n,r,i=0;for(n=(r=e.mesh.vHead).next;n!==r;n=n.next)i++;for(i+=8,t=e.pq=new PriorityQ(i,Geom.vertLeq),n=(r=e.mesh.vHead).next;n!==r;n=n.next)n.pqHandle=t.insert(n);return n===r&&(t.init(),!0)},e.donePriorityQ=function(e){e.pq=null},e.removeDegenerateFaces=function(t,n){var r,i,o;for(r=n.fHead.next;r!==n.fHead;r=i)i=r.next,assert((o=r.anEdge).Lnext!==o),o.Lnext.Lnext===o&&(e.addWinding(o.Onext,o),t.mesh.delete(o));return!0},e.computeInterior=function(t,n){var r,i;if(void 0===n&&(n=!0),e.removeDegenerateEdges(t),!e.initPriorityQ(t))return!1;for(e.initEdgeDict(t);null!==(r=t.pq.extractMin());){for(;null!==(i=t.pq.min())&&Geom.vertEq(i,r);)i=t.pq.extractMin(),e.spliceMergeVertices(t,r.anEdge,i.anEdge);e.sweepEvent(t,r)}return t.event=t.dict.min().key.eUp.Org,e.debugEvent(t),e.doneEdgeDict(t),e.donePriorityQ(t),!!e.removeDegenerateFaces(t,t.mesh)&&(n&&t.mesh.check(),!0)},e}(),Tesselator=function(){function e(){this.mesh=new TESSmesh,this.normal=[0,0,0],this.sUnit=[0,0,0],this.tUnit=[0,0,0],this.bmin=[0,0],this.bmax=[0,0],this.windingRule=WINDING.ODD,this.dict=null,this.pq=null,this.event=null,this.vertexIndexCounter=0,this.vertices=[],this.vertexIndices=[],this.vertexCount=0,this.elements=[],this.elementCount=0}return e.prototype.dot_=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},e.prototype.normalize_=function(e){var t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2];if(!t)throw"Zero-size vector!";t=Math.sqrt(t),e[0]/=t,e[1]/=t,e[2]/=t},e.prototype.longAxis_=function(e){var t=0;return Math.abs(e[1])>Math.abs(e[0])&&(t=1),Math.abs(e[2])>Math.abs(e[t])&&(t=2),t},e.prototype.computeNormal_=function(e){var t,n,r,i,o,a,s=[0,0,0],c=[0,0,0],u=[0,0,0],l=[0,0,0],h=[0,0,0],f=[null,null,null],d=[null,null,null],p=this.mesh.vHead;t=p.next;for(var m=0;m<3;++m)i=t.coords[m],c[m]=i,d[m]=t,s[m]=i,f[m]=t;for(t=p.next;t!==p;t=t.next)for(var v=0;v<3;++v)(i=t.coords[v])<c[v]&&(c[v]=i,d[v]=t),i>s[v]&&(s[v]=i,f[v]=t);var g=0;if(s[1]-c[1]>s[0]-c[0]&&(g=1),s[2]-c[2]>s[g]-c[g]&&(g=2),c[g]>=s[g])return e[0]=0,e[1]=0,void(e[2]=1);for(a=0,n=d[g],r=f[g],u[0]=n.coords[0]-r.coords[0],u[1]=n.coords[1]-r.coords[1],u[2]=n.coords[2]-r.coords[2],t=p.next;t!==p;t=t.next)l[0]=t.coords[0]-r.coords[0],l[1]=t.coords[1]-r.coords[1],l[2]=t.coords[2]-r.coords[2],h[0]=u[1]*l[2]-u[2]*l[1],h[1]=u[2]*l[0]-u[0]*l[2],h[2]=u[0]*l[1]-u[1]*l[0],(o=h[0]*h[0]+h[1]*h[1]+h[2]*h[2])>a&&(a=o,e[0]=h[0],e[1]=h[1],e[2]=h[2]);a<=0&&(e[0]=e[1]=e[2]=0,e[this.longAxis_(u)]=1)},e.prototype.checkOrientation_=function(){for(var e,t,n=this.mesh.fHead,r=this.mesh.vHead,i=0,o=n.next;o!==n;o=o.next)if(!((t=o.anEdge).winding<=0))do{i+=(t.Org.s-t.Dst.s)*(t.Org.t+t.Dst.t),t=t.Lnext}while(t!==o.anEdge);if(i<0){for(e=r.next;e!==r;e=e.next)e.t=-e.t;this.tUnit[0]=-this.tUnit[0],this.tUnit[1]=-this.tUnit[1],this.tUnit[2]=-this.tUnit[2]}},e.prototype.projectPolygon_=function(){var e,t,n=this.mesh.vHead,r=[0,0,0],i=!1;r[0]=this.normal[0],r[1]=this.normal[1],r[2]=this.normal[2],r[0]||r[1]||r[2]||(this.computeNormal_(r),i=!0),e=this.sUnit,t=this.tUnit;var o=this.longAxis_(r);e[o]=0,e[(o+1)%3]=1,e[(o+2)%3]=0,t[o]=0,t[(o+1)%3]=0,t[(o+2)%3]=r[o]>0?1:-1;for(var a=n.next;a!==n;a=a.next)a.s=this.dot_(a.coords,e),a.t=this.dot_(a.coords,t);i&&this.checkOrientation_();for(var s=!0,c=n.next;c!==n;c=c.next)s?(this.bmin[0]=this.bmax[0]=c.s,this.bmin[1]=this.bmax[1]=c.t,s=!1):(c.s<this.bmin[0]&&(this.bmin[0]=c.s),c.s>this.bmax[0]&&(this.bmax[0]=c.s),c.t<this.bmin[1]&&(this.bmin[1]=c.t),c.t>this.bmax[1]&&(this.bmax[1]=c.t))},e.prototype.addWinding_=function(e,t){e.winding+=t.winding,e.Sym.winding+=t.Sym.winding},e.prototype.tessellateMonoRegion_=function(e,t){var n,r;if((n=t.anEdge).Lnext===n||n.Lnext.Lnext===n)throw"Mono region invalid";for(;Geom.vertLeq(n.Dst,n.Org);n=n.Lprev);for(;Geom.vertLeq(n.Org,n.Dst);n=n.Lnext);for(r=n.Lprev;n.Lnext!==r;)if(Geom.vertLeq(n.Dst,r.Org)){for(;r.Lnext!==n&&(Geom.edgeGoesLeft(r.Lnext)||Geom.edgeSign(r.Org,r.Dst,r.Lnext.Dst)<=0);)r=e.connect(r.Lnext,r).Sym;r=r.Lprev}else{for(;r.Lnext!==n&&(Geom.edgeGoesRight(n.Lprev)||Geom.edgeSign(n.Dst,n.Org,n.Lprev.Org)>=0);)n=e.connect(n,n.Lprev).Sym;n=n.Lnext}if(r.Lnext===n)throw"Mono region invalid";for(;r.Lnext.Lnext!==n;)r=e.connect(r.Lnext,r).Sym;return!0},e.prototype.tessellateInterior_=function(e){for(var t,n=e.fHead.next;n!==e.fHead;n=t)if(t=n.next,n.inside&&!this.tessellateMonoRegion_(e,n))return!1;return!0},e.prototype.discardExterior_=function(e){for(var t,n=e.fHead.next;n!==e.fHead;n=t)t=n.next,n.inside||e.zapFace(n)},e.prototype.setWindingNumber_=function(e,t,n){for(var r,i=e.eHead.next;i!==e.eHead;i=r)r=i.next,i.Rface.inside!==i.Lface.inside?i.winding=i.Lface.inside?t:-t:n?e.delete(i):i.winding=0},e.prototype.getNeighbourFace_=function(e){return e.Rface&&e.Rface.inside?e.Rface.n:-1},e.prototype.outputPolymesh_=function(e,t,n,r){var i,o,a=0,s=0;n>3&&e.mergeConvexFaces(n);for(var c=e.vHead.next;c!==e.vHead;c=c.next)c.n=-1;for(var u=e.fHead.next;u!==e.fHead;u=u.next)if(u.n=-1,u.inside){i=u.anEdge,o=0;do{-1===(c=i.Org).n&&(c.n=s,s++),o++,i=i.Lnext}while(i!==u.anEdge);if(o>n)throw"Face vertex greater that support polygon";u.n=a,++a}for(this.elementCount=a,t===ELEMENT.CONNECTED_POLYGONS&&(a*=2),this.elements=[],this.elements.length=a*n,this.vertexCount=s,this.vertices=[],this.vertices.length=s*r,this.vertexIndices=[],this.vertexIndices.length=s,c=e.vHead.next;c!==e.vHead;c=c.next)if(-1!==c.n){var l=c.n*r;this.vertices[l+0]=c.coords[0],this.vertices[l+1]=c.coords[1],r>2&&(this.vertices[l+2]=c.coords[2]),this.vertexIndices[c.n]=c.idx}var h=0;for(u=e.fHead.next;u!==e.fHead;u=u.next)if(u.inside){i=u.anEdge,o=0;do{c=i.Org,this.elements[h++]=c.n,o++,i=i.Lnext}while(i!==u.anEdge);for(var f=o;f<n;++f)this.elements[h++]=-1;if(t===ELEMENT.CONNECTED_POLYGONS){i=u.anEdge;do{this.elements[h++]=this.getNeighbourFace_(i),i=i.Lnext}while(i!==u.anEdge);for(var d=o;d<n;++d)this.elements[h++]=-1}}},e.prototype.outputContours_=function(e,t){var n,r,i=0,o=0;this.vertexCount=0,this.elementCount=0;for(var a=e.fHead.next;a!==e.fHead;a=a.next)if(a.inside){r=n=a.anEdge;do{this.vertexCount++,n=n.Lnext}while(n!==r);this.elementCount++}this.elements=[],this.elements.length=2*this.elementCount,this.vertices=[],this.vertices.length=this.vertexCount*t,this.vertexIndices=[],this.vertexIndices.length=this.vertexCount;var s=0,c=0,u=0;for(i=0,a=e.fHead.next;a!==e.fHead;a=a.next)if(a.inside){o=0,r=n=a.anEdge;do{this.vertices[s++]=n.Org.coords[0],this.vertices[s++]=n.Org.coords[1],t>2&&(this.vertices[s++]=n.Org.coords[2]),this.vertexIndices[c++]=n.Org.idx,o++,n=n.Lnext}while(n!==r);this.elements[u++]=i,this.elements[u++]=o,i+=o}},e.prototype.addContour=function(e,t){null===this.mesh&&(this.mesh=new TESSmesh),e<2&&(e=2),e>3&&(e=3);for(var n=null,r=0;r<t.length;r+=e)null===n?(n=this.mesh.makeEdge(),this.mesh.splice(n,n.Sym)):(this.mesh.splitEdge(n),n=n.Lnext),n.Org.coords[0]=t[r+0],n.Org.coords[1]=t[r+1],n.Org.coords[2]=e>2?t[r+2]:0,n.Org.idx=this.vertexIndexCounter++,n.winding=1,n.Sym.winding=-1},e.prototype.tesselate=function(e,t,n,r,i,o){if(void 0===e&&(e=WINDING.ODD),void 0===t&&(t=ELEMENT.POLYGONS),void 0===o&&(o=!0),this.vertices=[],this.elements=[],this.vertexIndices=[],this.vertexIndexCounter=0,i&&(this.normal[0]=i[0],this.normal[1]=i[1],this.normal[2]=i[2]),this.windingRule=e,r<2&&(r=2),r>3&&(r=3),!this.mesh)return!1;this.projectPolygon_(),Sweep.computeInterior(this,o);var a=this.mesh;return t===ELEMENT.BOUNDARY_CONTOURS?this.setWindingNumber_(a,1,!0):this.tessellateInterior_(a),o&&a.check(),t===ELEMENT.BOUNDARY_CONTOURS?this.outputContours_(a,r):this.outputPolymesh_(a,t,n,r),!0},e}();function tesselate(e){var t=e.windingRule,n=void 0===t?WINDING.ODD:t,r=e.elementType,i=void 0===r?ELEMENT.POLYGONS:r,o=e.polySize,a=void 0===o?3:o,s=e.vertexSize,c=void 0===s?2:s,u=e.normal,l=void 0===u?[0,0,1]:u,h=e.contours,f=void 0===h?[]:h,d=e.strict,p=void 0===d||d,m=e.debug,v=void 0!==m&&m;if(!f&&p)throw new Error("Contours can't be empty");if(f){for(var g=new Tesselator,y=0;y<f.length;y++)g.addContour(c||2,f[y]);return g.tesselate(n,i,a,c,l,p),{vertices:g.vertices,vertexIndices:g.vertexIndices,vertexCount:g.vertexCount,elements:g.elements,elementCount:g.elementCount,mesh:v?g.mesh:void 0}}}WINDING.ODD,WINDING.NONZERO,WINDING.POSITIVE,WINDING.NEGATIVE,WINDING.ABS_GEQ_TWO,ELEMENT.POLYGONS,ELEMENT.CONNECTED_POLYGONS,ELEMENT.BOUNDARY_CONTOURS;var VectorSurfaceGeometry=function(e){function t(t,n,r,i){void 0===n&&(n=12),void 0===r&&(r=100),void 0===i&&(i={});var o=e.call(this)||this;return o.type="ShapeGeometry",o.windingRule=WINDING.ODD,o.elementType=ELEMENT.POLYGONS,o.polySize=3,o.vertexSize=2,o.strict=!0,o._drawCount=0,o._shape=t,o._curveSegments=n,o._maxCount=r,o._maxDrawCount=3*r,o._triangulationOptions=Object.assign({windingRule:WINDING.ODD,elementType:ELEMENT.POLYGONS,polySize:3,vertexSize:2,strict:!0},i),o._positionAttribute=new THREE.BufferAttribute(new Float32Array(3*r),3),o._normalAttribute=new THREE.BufferAttribute(new Float32Array(3*r),3),o._uvAttribute=new THREE.BufferAttribute(new Float32Array(2*r),2),o._indexAttribute=new THREE.BufferAttribute(new Uint32Array(3*r),1),o.setAttribute("position",o._positionAttribute),o.setAttribute("normal",o._normalAttribute),o.setAttribute("uv",o._uvAttribute),o.setIndex(o._indexAttribute),o.updateFromShape(),o}return __extends(t,e),t.prototype.copy=function(t){return this._drawCount=t.drawCount,this._maxDrawCount=t._maxDrawCount,this._maxCount=t.maxCount,e.prototype.copy.call(this,t)},Object.defineProperty(t.prototype,"curveSegments",{get:function(){return this._curveSegments},set:function(e){this._curveSegments=e,this.updateFromShape()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"drawCount",{get:function(){return this._drawCount},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxDrawCount",{get:function(){return this._maxDrawCount},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxCount",{get:function(){return this._maxCount},enumerable:!1,configurable:!0}),t.prototype.updateFromShape=function(){var e=tesselate({contours:[this._shape.extractShapePointsToFlatArray([],this._curveSegments)],windingRule:this._triangulationOptions.windingRule,elementType:this._triangulationOptions.elementType,polySize:this._triangulationOptions.polySize,vertexSize:this._triangulationOptions.vertexSize,strict:this._triangulationOptions.strict});if(e){this._drawCount=0;for(var t=1/0,n=-1/0,r=1/0,i=-1/0,o=0,a=e.vertexCount;o<a;o++){var s=2*o;(l=e.vertices[s+0])<t&&(t=l),l>n&&(n=l),(h=e.vertices[s+1])<r&&(r=h),h>i&&(i=h)}var c=n-t,u=i-r;for(o=0,a=e.vertexCount;o<a;o++){s=2*o;var l,h,f=((l=e.vertices[s+0])-t)/c,d=((h=e.vertices[s+1])-r)/u;this._positionAttribute.setXYZ(o,l,h,0),this._normalAttribute.setXYZ(o,0,0,1),this._uvAttribute.setXY(o,f,d)}for(o=0,a=e.elementCount;o<a;o++){var p=3*o,m=e.elements[p+0],v=e.elements[p+1],g=e.elements[p+2];this._indexAttribute.setX(p+0,m),this._indexAttribute.setX(p+1,v),this._indexAttribute.setX(p+2,g),this._drawCount+=3}this._positionAttribute.needsUpdate=!0,this._normalAttribute.needsUpdate=!0,this._uvAttribute.needsUpdate=!0,this._indexAttribute.needsUpdate=!0,this.setDrawRange(0,this._drawCount)}return this._drawCount>this._maxDrawCount},t}(THREE.BufferGeometry),isCW=function(e){for(var t=0,n=e.length/2,r=n-1,i=0;i<n;r=i++)t+=e[2*r+0]*e[2*i+1]-e[2*i+0]*e[2*r+1];return t<0},VectorExtrusionGeometry=function(e){function t(t,n,r){var i;void 0===r&&(r=12);var o=e.call(this)||this;o.type="ShapeGeometry",o._vertCount=0,o.vertCache={},o._shape=t,o._depth=n;var a=o._shape.extractShapePointsToFlatArray([],r),s=tesselate({windingRule:WINDING.ODD,elementType:ELEMENT.POLYGONS,polySize:3,vertexSize:2,strict:!0,contours:[a]});if(!s)throw new Error("error generating geometry");for(var c=1/0,u=-1/0,l=1/0,h=-1/0,f=0,d=s.vertexCount;f<d;f++){var p=2*f;(y=s.vertices[p+0])<c&&(c=y),y>u&&(u=y),(b=s.vertices[p+1])<l&&(l=b),b>h&&(h=b)}o._minX=c,o._minY=l,o._width=u-c,o._height=h-l;var m=2*s.vertexCount+4*s.vertexCount+4*s.vertexCount;o._positions=new Float32Array(3*m),o._normals=new Float32Array(3*m),o._uvs=new Float32Array(2*m),o._indices=new Uint32Array(3*m);var v=0,g=[];for(f=0,d=s.vertexCount;f<d;f++){var y=s.vertices[2*f+0],b=s.vertices[2*f+1],w=3*(o._vertCount+0),E=3*(o._vertCount+1),x=2*(o._vertCount+0),_=2*(o._vertCount+1);o._positions[w+0]=y,o._positions[w+1]=b,o._positions[w+2]=n,o._normals[w+0]=0,o._normals[w+1]=0,o._normals[w+2]=1,o._uvs[x+0]=(y-c)/o._width,o._uvs[x+1]=(b-l)/o._height,o._positions[E+0]=y,o._positions[E+1]=b,o._positions[E+2]=0,o._normals[E+0]=0,o._normals[E+1]=0,o._normals[E+2]=-1,o._uvs[_+0]=(y-c)/o._width,o._uvs[_+1]=(b-l)/o._height,g[f]=o._vertCount,o._vertCount+=2}for(f=0,d=s.elementCount;f<d;f++){var T=3*f,A=s.elements[T+0],S=s.elements[T+1],M=s.elements[T+2];o._indices[v+0]=g[A]+0,o._indices[v+1]=g[S]+0,o._indices[v+2]=g[M]+0,o._indices[v+3]=g[M]+1,o._indices[v+4]=g[S]+1,o._indices[v+5]=g[A]+1,v+=6}var O=tesselate({windingRule:WINDING.ODD,elementType:ELEMENT.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[a]});if(!O)throw new Error("error generating geometry");var R=!1;for(R=1===O.elementCount?!isCW(a):O.elementCount%2==1,f=0,d=O.elementCount;f<d;f++){p=2*f;var C=O.elements[p+0],I=O.elements[p+1],L=C+I,D=L-2,P=L-1,N=C,B=C+1;do{var k=o.buildVert(O,[D,P,N],"pre",R),F=o.buildVert(O,[P,N,B],"post",R);o._indices[v+0]=F.bottom,o._indices[v+1]=F.top,o._indices[v+2]=k.bottom,o._indices[v+3]=F.top,o._indices[v+4]=k.top,o._indices[v+5]=k.bottom,v+=6,D=(i=__read([P,N,B,B+1],4))[0],P=i[1],N=i[2],(B=i[3])>=L&&(B-=I)}while(N!==C);R=!R}var U=new THREE.BufferAttribute(o._positions.slice(0,3*o._vertCount),3),H=new THREE.BufferAttribute(o._normals.slice(0,3*o._vertCount),3),j=new THREE.BufferAttribute(o._uvs.slice(0,2*o._vertCount),2),G=new THREE.BufferAttribute(o._indices.slice(0,v),1);return U.needsUpdate=!0,H.needsUpdate=!0,j.needsUpdate=!0,G.needsUpdate=!0,o.setAttribute("position",U),o.setAttribute("normal",H),o.setAttribute("uv",j),o.setIndex(G),o}return __extends(t,e),t.prototype.buildVert=function(e,t,n,r){var i=1;r&&(t.reverse(),n="pre"===n?"post":"pre",i=-1);var o,a=__read(t,3),s=a[0],c=a[1],u=a[2],l=e.vertexIndices[c],h=e.vertices[2*c+0],f=e.vertices[2*c+1];if(l<0)if("post"===n){var d=e.vertices[2*s+0],p=e.vertices[2*s+1];o=new THREE.Vector2(d-h,p-f).normalize()}else{var m=e.vertices[2*u+0],v=e.vertices[2*u+1];o=new THREE.Vector2(h-m,f-v).normalize()}else{var g=__read(this._shape.getCurveIndexFromVertexId(l-1),2),y=g[0],b=g[1],w=this._shape.curves.length,E=b>0&&b<1;0===b&&"pre"===n?(y=(y-1+w)%w,b=1):1===b&&"post"===n&&(y=(y+1)%w,b=0);var x="pre"===n?"post":"pre",_=this.vertCache[""+c+x];if(_&&E)return _;if(o=this._shape.curves[y].getTangent(b),_&&o.dot(_.tangent)>.9)return _}var T={top:this._vertCount+0,bottom:this._vertCount+1,tangent:o},A=3*(this._vertCount+0),S=3*(this._vertCount+1),M=2*(this._vertCount+0),O=2*(this._vertCount+1);return this._positions[A+0]=h,this._positions[A+1]=f,this._positions[A+2]=this._depth,this._normals[A+0]=-o.y*i,this._normals[A+1]=o.x*i,this._normals[A+2]=0,this._uvs[M+0]=(h-this._minX)/this._width,this._uvs[M+1]=(f-this._minY)/this._height,this._positions[S+0]=h,this._positions[S+1]=f,this._positions[S+2]=0,this._normals[S+0]=-o.y*i,this._normals[S+1]=o.x*i,this._normals[S+2]=0,this._uvs[O+0]=(h-this._minX)/this._width,this._uvs[O+1]=(f-this._minY)/this._height,this._vertCount+=2,this.vertCache[""+c+n]=T,T},t}(THREE.BufferGeometry),VectorGeometry=function(){function e(){}return e.create=function(e){return this.build(this.normalizeInputs(e))},e.normalizeInputs=function(e,t){var n,r,i,o=Object.assign({},null!==(n=null==t?void 0:t.parameters)&&void 0!==n?n:{width:100,depth:0,subdivisions:40,extrudeDepth:0,surfaceMaxCount:100},e.parameters),a=Math.abs(o.width),s=Math.abs(null!==(r=o.height)&&void 0!==r?r:o.width),c=null!==(i=e.shape)&&void 0!==i?i:null==t?void 0:t.shape;void 0!==c&&(c instanceof VectorShape?c.width===a&&c.height===s||c.applySize(a,s):c=new VectorShape(a,s).fromJSON(c));var u=null!=c?c:new VectorShape(a,s);return{parameters:Object.assign(o,{width:a,height:s}),shape:u}},e.build=function(e){var t,n=e.parameters,r=n.extrudeDepth,i=n.subdivisions,o=n.surfaceMaxCount;return t=r<=0?new VectorSurfaceGeometry(e.shape,i,o):new VectorExtrusionGeometry(e.shape,r,i),Object.assign(t,{userData:__assign(__assign({},e),{type:"VectorGeometry"})})},e}();new THREE.Sphere,new THREE.Matrix4,new THREE.Ray,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3;var VectorLineGeometry=function(e){function t(t){void 0===t&&(t=500);var n=e.call(this)||this;return n._drawCount=0,n.positions=new THREE.BufferAttribute(new Float32Array(3*t),3),n.setAttribute("position",n.positions),n}return __extends(t,e),Object.defineProperty(t.prototype,"drawCount",{get:function(){return this._drawCount},set:function(e){this._drawCount=e,this.setDrawRange(0,e)},enumerable:!1,configurable:!0}),t}(THREE.BufferGeometry),geometries={ConeGeometry:ConeGeometry,CubeGeometry:CubeGeometry,CylinderGeometry:CylinderGeometry,DodecahedronGeometry:DodecahedronGeometry,EllipseGeometry:EllipseGeometry,HelixGeometry:HelixGeometry,IcosahedronGeometry:IcosahedronGeometry,LatheGeometry:LatheGeometry,NonParametricGeometry:NonParametricGeometry,PolygonGeometry:PolygonGeometry,PyramidGeometry:PyramidGeometry,RectangleGeometry:RectangleGeometry,SphereGeometry:SphereGeometry,StarGeometry:StarGeometry,TextFrameGeometry:TextFrameGeometry,TorusGeometry:TorusGeometry,TorusKnotGeometry:TorusKnotGeometry,TriangleGeometry:TriangleGeometry,VectorGeometry:VectorGeometry},createGeometry=function(e){return geometries[e.type].create(e)},isEntity=function(e){return"isEntity"in e},isMeshEntity=function(e){return"isAbstractMesh"in e},isHelperableEntity=function(e){return"objectHelper"in e},_box3=new THREE.Box3,_center=new THREE.Vector3,_halfSize=new THREE.Vector3,_matrix=new THREE.Matrix4,_traverseSetFromObjectSize=function(e,t,n,r){if(isMeshEntity(e)){var i=e.geometry.userData.parameters,o=e.geometry.getAttribute("position");_box3.setFromArray(o.array),_box3.getCenter(_center),e.forceComputeSize?_box3.getSize(_halfSize).multiplyScalar(.5):_halfSize.set(i.width,i.height,i.depth).multiplyScalar(.5)}else isHelperableEntity(e)&&!0===r?(o=e.geometryHelper.getAttribute("position"),_box3.setFromArray(o.array),_box3.getCenter(_center),_box3.getSize(_halfSize).multiplyScalar(.5)):(_center.setScalar(0),_halfSize.setScalar(0));_matrix.copy(t).multiply(e.matrixWorld),0===_halfSize.x&&0===_halfSize.y&&0===_halfSize.z?n.push(new THREE.Vector3(_center.x,_center.y,_center.z).applyMatrix4(_matrix)):n.push(new THREE.Vector3(-_halfSize.x,_halfSize.y,_halfSize.z).add(_center).applyMatrix4(_matrix),new THREE.Vector3(-_halfSize.x,-_halfSize.y,_halfSize.z).add(_center).applyMatrix4(_matrix),new THREE.Vector3(_halfSize.x,-_halfSize.y,_halfSize.z).add(_center).applyMatrix4(_matrix),new THREE.Vector3(_halfSize.x,_halfSize.y,_halfSize.z).add(_center).applyMatrix4(_matrix),new THREE.Vector3(-_halfSize.x,_halfSize.y,-_halfSize.z).add(_center).applyMatrix4(_matrix),new THREE.Vector3(-_halfSize.x,-_halfSize.y,-_halfSize.z).add(_center).applyMatrix4(_matrix),new THREE.Vector3(_halfSize.x,-_halfSize.y,-_halfSize.z).add(_center).applyMatrix4(_matrix),new THREE.Vector3(_halfSize.x,_halfSize.y,-_halfSize.z).add(_center).applyMatrix4(_matrix))},Box3=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.transform=new THREE.Matrix4,r.vertices=[],r.faces=[],r.edges=[],r.centerEdges=[],r}return __extends(t,e),t.prototype.setFromObjectSize=function(e,t){void 0===t&&(t=!1),e.updateWorldMatrix(!1,!1),this.makeEmpty(),this.transform=e.matrixWorld;var n=(new THREE.Matrix4).getInverse(e.matrixWorld);return this.expandByObjectSize(e,n,t)},t.prototype.expandByObjectSize=function(e,t,n){void 0===n&&(n=!1);var r=[];return!0===n?e.traverseEntity((function(n){return _traverseSetFromObjectSize(n,t,r,"enableHelper"in e&&e.enableHelper)})):_traverseSetFromObjectSize(e,t,r,"enableHelper"in e&&e.enableHelper),this.setFromPoints(r)},t.prototype.getCenter=function(t){return(t=e.prototype.getCenter.call(this,t)).applyMatrix4(this.transform),t},t.prototype.getPositionToCenter=function(t){return e.prototype.getCenter.call(this,t)},t.prototype.computeVertices=function(){this.getSize(_halfSize).multiplyScalar(.5),this.getCenter(_center),_matrix.copy(this.transform).setPosition(_center),this.vertices=[new THREE.Vector3(-_halfSize.x,_halfSize.y,_halfSize.z).applyMatrix4(_matrix),new THREE.Vector3(-_halfSize.x,-_halfSize.y,_halfSize.z).applyMatrix4(_matrix),new THREE.Vector3(_halfSize.x,-_halfSize.y,_halfSize.z).applyMatrix4(_matrix),new THREE.Vector3(_halfSize.x,_halfSize.y,_halfSize.z).applyMatrix4(_matrix),new THREE.Vector3(-_halfSize.x,_halfSize.y,-_halfSize.z).applyMatrix4(_matrix),new THREE.Vector3(-_halfSize.x,-_halfSize.y,-_halfSize.z).applyMatrix4(_matrix),new THREE.Vector3(_halfSize.x,-_halfSize.y,-_halfSize.z).applyMatrix4(_matrix),new THREE.Vector3(_halfSize.x,_halfSize.y,-_halfSize.z).applyMatrix4(_matrix)]},t.prototype.computeEdges=function(){this.vertices.length>0&&this.computeVertices(),this.edges=[new THREE.Line3(this.vertices[0],this.vertices[3]),new THREE.Line3(this.vertices[1],this.vertices[2]),new THREE.Line3(this.vertices[5],this.vertices[6]),new THREE.Line3(this.vertices[4],this.vertices[7]),new THREE.Line3(this.vertices[0],this.vertices[1]),new THREE.Line3(this.vertices[3],this.vertices[2]),new THREE.Line3(this.vertices[7],this.vertices[6]),new THREE.Line3(this.vertices[4],this.vertices[5]),new THREE.Line3(this.vertices[0],this.vertices[4]),new THREE.Line3(this.vertices[1],this.vertices[5]),new THREE.Line3(this.vertices[2],this.vertices[6]),new THREE.Line3(this.vertices[3],this.vertices[7])],this.centerEdges=this.edges.map((function(e){return e.getCenter(new THREE.Vector3)}))},t.prototype.computeFaces=function(){this.vertices.length>0&&this.computeVertices(),this.faces=[(new THREE.Vector3).copy(this.vertices[0]).sub(this.vertices[2]).multiplyScalar(.5).add(this.vertices[2]),(new THREE.Vector3).copy(this.vertices[7]).sub(this.vertices[5]).multiplyScalar(.5).add(this.vertices[5]),(new THREE.Vector3).copy(this.vertices[4]).sub(this.vertices[1]).multiplyScalar(.5).add(this.vertices[1]),(new THREE.Vector3).copy(this.vertices[3]).sub(this.vertices[6]).multiplyScalar(.5).add(this.vertices[6]),(new THREE.Vector3).copy(this.vertices[4]).sub(this.vertices[3]).multiplyScalar(.5).add(this.vertices[3]),(new THREE.Vector3).copy(this.vertices[1]).sub(this.vertices[6]).multiplyScalar(.5).add(this.vertices[6])]},t}(THREE.Box3);function slerp(e,t,n,r){if(0===r)return n.copy(e);if(1===r)return n.copy(t);var i=e.w*t.w+e.x*t.x+e.y*t.y+e.z*t.z;if(i>=1)return n.copy(e);var o=1-i*i;if(o<=Number.EPSILON){var a=1-r;return n.w=a*e.w+r*t.w,n.x=a*e.x+r*t.x,n.y=a*e.y+r*t.y,n.z=a*e.z+r*t.z,n.normalize(),n}var s=Math.sqrt(o),c=Math.atan2(s,i),u=Math.sin((1-r)*c)/s,l=Math.sin(r*c)/s;return n.w=e.w*u+t.w*l,n.x=e.x*u+t.x*l,n.y=e.y*u+t.y*l,n.z=e.z*u+t.z*l,n}var interactionTargets=new Set,INTERACTION_EASING;!function(e){e[e.LINEAR=0]="LINEAR",e[e.EASE=1]="EASE",e[e.EASE_IN=2]="EASE_IN",e[e.EASE_OUT=3]="EASE_OUT",e[e.EASE_IN_OUT=4]="EASE_IN_OUT",e[e.CUBIC=5]="CUBIC",e[e.SPRING=6]="SPRING"}(INTERACTION_EASING||(INTERACTION_EASING={}));var InteractionTarget=function(){function e(){this.easing=INTERACTION_EASING.EASE_IN_OUT,this.duration=1e3,this.delay=0,this.cubicControls=[.5,.05,.1,.3],this.springParameters={mass:1,stiffness:80,damping:10,velocity:0},this.repeat=!1,this.cycle=!1,this.rewind=!1}return Object.defineProperty(e.prototype,"sp_mass",{get:function(){return this.springParameters.mass},set:function(e){this.springParameters.mass=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sp_stiffness",{get:function(){return this.springParameters.stiffness},set:function(e){this.springParameters.stiffness=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sp_damping",{get:function(){return this.springParameters.damping},set:function(e){this.springParameters.damping=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sp_velocity",{get:function(){return this.springParameters.velocity},set:function(e){this.springParameters.velocity=e},enumerable:!1,configurable:!0}),e.prototype.copy=function(e){return this.easing=e.easing,this.duration=e.duration,this.delay=e.delay,this.cubicControls=__spread(e.cubicControls),this.springParameters=__assign({},e.springParameters),this.repeat=e.repeat,this.cycle=e.cycle,this.rewind=e.rewind,this},e.prototype.clone=function(){return(new e).copy(this)},e.prototype.toJSON=function(){var e={easing:this.easing,duration:this.duration,delay:this.delay,cubicControls:this.cubicControls,springParameters:__assign({},this.springParameters)};return!0===this.repeat&&(e.repeat=!0),!0===this.cycle&&(e.cycle=!0),!0===this.rewind&&(e.rewind=!0),void 0!==this.object&&(e.object=this.object.uuid),void 0!==this.state&&(e.state=this.state.uuid),e},e.prototype.fromJSON=function(e,t,n){return this.easing=e.easing,this.duration=e.duration,this.delay=e.delay,this.cubicControls=__spread(e.cubicControls),this.springParameters.mass=e.springParameters.mass,this.springParameters.stiffness=e.springParameters.stiffness,this.springParameters.damping=e.springParameters.damping,this.springParameters.velocity=e.springParameters.velocity,void 0!==e.repeat&&(this.repeat=e.repeat),void 0!==e.cycle&&(this.cycle=e.cycle),void 0!==e.rewind&&(this.rewind=e.rewind),void 0!==e.object&&(this.object=t[e.object]),void 0!==e.state&&(this.state=n[e.state]),this},e}(),INTERACTION_EVENT;function isIOS(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}!function(e){e[e.MOUSE_DOWN=0]="MOUSE_DOWN",e[e.MOUSE_UP=1]="MOUSE_UP",e[e.MOUSE_HOVER=2]="MOUSE_HOVER",e[e.MOUSE_ENTER=3]="MOUSE_ENTER",e[e.MOUSE_LEAVE=4]="MOUSE_LEAVE",e[e.KEY_DOWN=5]="KEY_DOWN",e[e.KEY_UP=6]="KEY_UP",e[e.START=7]="START",e[e.OPEN_LINK=8]="OPEN_LINK",e[e.LOOK_AT=9]="LOOK_AT",e[e.FOLLOW=10]="FOLLOW"}(INTERACTION_EVENT||(INTERACTION_EVENT={}));var InteractionEvent=function(){function e(e,t){this.targets=[],this.ui={isCollapsed:!1},this._type=e,this.key=t}return Object.defineProperty(e.prototype,"type",{get:function(){return this._type},set:function(e){this._type=e,e===INTERACTION_EVENT.LOOK_AT?this.distance=1e3:this.distance=void 0,e!==INTERACTION_EVENT.KEY_DOWN&&e!==INTERACTION_EVENT.KEY_UP&&(this.key=void 0)},enumerable:!1,configurable:!0}),e.prototype.newTarget=function(e){var t=new InteractionTarget;if(t.object=e,void 0!==e){var n=e.interaction.states;n.length>0&&(t.state=n[n.length-1])}return this.targets.push(t),interactionTargets.add(t),t},e.prototype.addTarget=function(e,t){void 0===t&&(t=0),this.targets.splice(t,0,e),interactionTargets.add(e)},e.prototype.removeTarget=function(e){interactionTargets.delete(this.targets[e]),this.targets.splice(e,1)},e.prototype.dispatchReverse=function(){for(var e=0,t=this.targets.length;e<t;++e){var n=this.targets[e];void 0!==n.state&&void 0!==n.object&&n.object.interaction.reverse(n)}},e.prototype.dispatch=function(){if(void 0===this.url||this._type!==INTERACTION_EVENT.OPEN_LINK&&this._type!==INTERACTION_EVENT.MOUSE_DOWN&&this._type!==INTERACTION_EVENT.MOUSE_UP&&this._type!==INTERACTION_EVENT.KEY_DOWN&&this._type!==INTERACTION_EVENT.KEY_UP)for(var e=0,t=this.targets.length;e<t;++e){var n=this.targets[e];void 0!==n.state&&void 0!==n.object&&n.object.interaction.play(n)}else isIOS()?window.location.assign(this.url):window.open(this.url,"_blank")},e.prototype.copy=function(e){return this._type=e.type,this.key=e.key,this.url=e.url,this.distance=e.distance,this.ui.isCollapsed=e.ui.isCollapsed,this},e.prototype.clone=function(){return(new e).copy(this)},e.prototype.toJSON=function(){var e={type:this._type,key:this.key,ui:{isCollapsed:this.ui.isCollapsed}};if(void 0!==this.url&&(e.url=this.url),void 0!==this.distance&&(e.distance=this.distance),this.targets.length>0){e.targets=[];for(var t=0,n=this.targets.length;t<n;++t)e.targets.push(this.targets[t].toJSON())}return e},e.prototype.fromJSON=function(e,t,n){if(this._type=e.type,this.key=e.key,this.targets=[],this.ui={isCollapsed:e.ui.isCollapsed},this.url=e.url,void 0!==e.distance&&(this.distance=e.distance),void 0!==e.targets)for(var r=0,i=e.targets.length;r<i;++r)this.addTarget((new InteractionTarget).fromJSON(e.targets[r],t,n),r);return this},e}();const Layer=function(e,t){this.id=e,this.next=void 0,this.setValues(t)};Layer.prototype={constructor:Layer,setValues:function(e){if(void 0===e)return;const t=this.id;switch(this.type=e.type,this.uniforms={},this.defines={},this.uniforms[`f${t}_alpha`]={value:void 0!==e.alpha?e.alpha:1},this.uniforms[`f${t}_mode`]={value:void 0!==e.mode?e.mode:0},this.varProgram=`\n\t\t\t// SPE: Default uniforms ********************\n\t\t\tuniform float f${t}_alpha;\n\t\t\tuniform int f${t}_mode;\n\t\t\t// ******************************************\n\t\t\t`,e.type){case"light":this.paramNames=["alpha","mode"],this.getProgram=function(){return`\n\t\t\t\t\t\t// SPE: Light base layer shader-code *****************************************************************************\n\t\t\t\t\t\t// @todo: instead of == use absolute distance for vector comparison\n\t\t\t\t\t\tif ( outgoingLight != diffuseColor.rgb ) {\n\t\t\t\t\t\t\tfloat lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );\n\t\t\t\t\t\t\taccumAlpha += ( 1.0 - accumAlpha ) * f${this.id}_alpha * lightAccu;\n\t\t\t\t\t\t\toutgoingLight = spe_blend( diffuseColor.rgb, outgoingLight, f${this.id}_alpha, f${this.id}_mode );\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// ***************************************************************************************************************\n\t\t\t\t\t`},this.fromJSON=function(e){return this.uniforms[`f${this.id}_alpha`].value=e.uniforms[`f${this.id}_alpha`].value,this.uniforms[`f${this.id}_mode`].value=e.uniforms[`f${this.id}_mode`].value,this};break;case"color":this.paramNames=["alpha","mode","color"],this.uniforms[`f${t}_color`]={value:e.color?e.color:new THREE.Color(5855577)},this.varProgram+=`\n\t\t\t\t\t// SPE: Color layer uniforms *******\n\t\t\t\t\tuniform vec3 f${t}_color;\n\t\t\t\t\t// *********************************\n\t\t\t\t\t`,this.getProgram=function(e){return`\n\t\t\t\t\t\t// SPE: Color layer shader-code *********************************************************************\n\t\t\t\t\t\tfloat f${this.id}_calpha = f${this.id}_alpha / clamp( f${this.id}_alpha + accumAlpha, 0.00001, 1.0 );\n\t\t\t\t\t\taccumAlpha += ( 1.0 - accumAlpha ) * f${this.id}_alpha;\n\t\t\t\t\t\t${e} = spe_blend( ${e}, f${this.id}_color, f${this.id}_calpha, f${this.id}_mode );\n\t\t\t\t\t\t// **************************************************************************************************\n\t\t\t\t\t`},this.fromJSON=function(e){return this.uniforms[`f${this.id}_alpha`].value=e.uniforms[`f${this.id}_alpha`].value,this.uniforms[`f${this.id}_mode`].value=e.uniforms[`f${this.id}_mode`].value,this.uniforms[`f${this.id}_color`].value.set(e.uniforms[`f${this.id}_color`].value),this};break;case"texture":this.paramNames=["alpha","mode","texture","crop"],e.texture=e.texture||new THREE.Texture,this.defines.USE_UV="",this.uniforms[`f${t}_texture`]={value:e.texture},this.uniforms[`f${t}_mat`]={value:e.texture.matrix},this.uniforms[`f${t}_crop`]={value:e.crop?e.crop:0},this.varProgram+=`\n\t\t\t\t\t// SPE: Texture layer uniforms ******************\n\t\t\t\t\tuniform sampler2D f${t}_texture;\n\t\t\t\t\tuniform mat3 f${t}_mat;\n\t\t\t\t\tuniform float f${t}_crop;\n\t\t\t\t\t// **********************************************\n\t\t\t\t\t`,this.getProgram=function(e){return`\n\t\t\t\t\t\t// SPE: Texture layer shader-code ************************************************************************\n\t\t\t\t\t\tvec2 f${this.id}_vUv = ( f${this.id}_mat * vec3( vUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;\n\t\t\t\t\t\tvec4 f${this.id}_tmp = texture2D( f${this.id}_texture, f${this.id}_vUv );\n\t\t\t\t\t\tvec3 f${this.id}_col = f${this.id}_tmp.rgb;\n\t\t\t\t\t\tfloat f${this.id}_lalpha = f${this.id}_alpha * f${this.id}_tmp.a;\n\t\t\t\t\t\tif ( f${this.id}_crop > 0.5 ) {\n\t\t\t\t\t\t\tif ( f${this.id}_vUv.x < 0.0 || f${this.id}_vUv.x > 1.0 ||\n\t\t\t\t\t\t\t\t f${this.id}_vUv.y < 0.0 || f${this.id}_vUv.y > 1.0 ) \n\t\t\t\t\t\t\t\tf${this.id}_lalpha = 0.;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfloat f${this.id}_calpha =  f${this.id}_lalpha / clamp( f${this.id}_lalpha + accumAlpha, 0.00001, 1.0 );\n\t\t\t\t\t\taccumAlpha += ( 1.0 - accumAlpha ) * f${this.id}_lalpha;\n\t\t\t\t\t\t${e} = spe_blend( ${e}, f${this.id}_col, f${this.id}_calpha, f${this.id}_mode );\n\t\t\t\t\t\t// *******************************************************************************************************\n\t\t\t\t\t`},this.fromJSON=function(e,t){let n;return this.uniforms[`f${this.id}_alpha`].value=e.uniforms[`f${this.id}_alpha`].value,this.uniforms[`f${this.id}_mode`].value=e.uniforms[`f${this.id}_mode`].value,n=e.uniforms[`f${this.id}_texture`]?t[e.uniforms[`f${this.id}_texture`].value]:t[e.uniforms[`f${this.id}_tex`].value],this.uniforms[`f${this.id}_texture`].value=n,this.uniforms[`f${this.id}_mat`].value=n.matrix.fromArray(e.uniforms[`f${this.id}_mat`].value.elements),this.uniforms[`f${this.id}_crop`].value=e.uniforms[`f${this.id}_crop`].value,this},this.dispose=function(){this.uniforms[`f${this.id}_texture`].value instanceof THREE.VideoTexture&&this.uniforms[`f${this.id}_texture`].value.image.pause(),this.uniforms[`f${this.id}_texture`].value.dispose()};break;case"normal":this.paramNames=["alpha","mode","cnormal"],this.defines.USE_LAYER_NORMAL="",this.uniforms[`f${t}_cnormal`]={value:e.cnormal?e.cnormal:new THREE.Vector3(1,1,1)},this.varProgram+=`\n\t\t\t\t\t// SPE: Normal layer uniforms ************\n\t\t\t\t\tuniform vec3 f${t}_cnormal;\n\t\t\t\t\t// ***************************************\n\t\t\t\t\t`,this.getProgram=function(e){return`\n\t\t\t\t\t\t// SPE: Normal layer shader-code *******************************************************************\n\t\t\t\t\t\tvec3 f${this.id}_normal = packNormalToRGB( normal ).rgb;\n\t\t\t\t\t\tf${this.id}_normal *= step( vec3(0.5), f${t}_cnormal );\n\t\t\t\t\t\tfloat f${this.id}_calpha = f${this.id}_alpha / clamp( f${this.id}_alpha + accumAlpha, 0.00001, 1.0 );\n\t\t\t\t\t\taccumAlpha += ( 1.0 - accumAlpha ) * f${this.id}_alpha;\n\t\t\t\t\t\t${e} = spe_blend( ${e}, f${this.id}_normal, f${this.id}_calpha, f${this.id}_mode );\n\t\t\t\t\t\t// *************************************************************************************************\n\t\t\t\t\t`},this.fromJSON=function(e){this.uniforms[`f${this.id}_alpha`].value=e.uniforms[`f${this.id}_alpha`].value,this.uniforms[`f${this.id}_mode`].value=e.uniforms[`f${this.id}_mode`].value;let t=e.uniforms[`f${this.id}_cnormal`].value;return this.uniforms[`f${this.id}_cnormal`].value.set(t.x,t.y,t.z),this};break;case"depth":this.paramNames=["alpha","mode","near","far","origin","isVector","colorA","colorB"],this.defines.USE_LAYER_DEPTH="",this.uniforms[`f${t}_near`]={value:e.near?e.near:700},this.uniforms[`f${t}_far`]={value:e.far?e.far:1e3},this.uniforms[`f${t}_origin`]={value:e.origin?e.origin:new THREE.Vector3},this.uniforms[`f${t}_isVector`]={value:e.isVector?e.isVector:0},this.uniforms[`f${t}_colorA`]={value:e.colorA?e.colorA:new THREE.Color},this.uniforms[`f${t}_colorB`]={value:e.colorB?e.colorB:new THREE.Color(0,0,0)},this.varProgram+=`\n\t\t\t\t\t// SPE: Depth layer uniforms ******************************\n\t\t\t\t\tuniform float f${t}_near;\n\t\t\t\t\tuniform float f${t}_far;\n\t\t\t\t\tuniform float f${t}_isVector;\n\t\t\t\t\tuniform vec3 f${t}_origin;\n\t\t\t\t\tuniform vec3 f${t}_colorA;\n\t\t\t\t\tuniform vec3 f${t}_colorB;\n\t\t\t\t\t// ********************************************************\n\t\t\t\t\t`,this.getProgram=function(e){return`\n\t\t\t\t\t\t// SPE: Depth layer shader-code ******************************************************************************\n\t\t\t\t\t\tvec3 base${this.id} = ( f${this.id}_isVector > 0.5 ) ?  f${this.id}_origin : cameraPosition;\n\t\t\t\t\t\tfloat dist${this.id} = length( dWorldPosition.xyz - base${this.id} );\n\n\t\t\t\t\t\tfloat dep${this.id} = ( dist${this.id} - f${this.id}_near ) / ( f${this.id}_far - f${this.id}_near );\n\t\t\t\t\t\tvec3 f${this.id}_depth =  mix( f${this.id}_colorB, f${this.id}_colorA, 1.0 - clamp( dep${this.id}, 0., 1. ) );\n\n\t\t\t\t\t\tfloat f${this.id}_calpha = f${this.id}_alpha / clamp( f${this.id}_alpha + accumAlpha, 0.001, 1.0 );\n\t\t\t\t\t\taccumAlpha += ( 1.0 - accumAlpha ) * f${this.id}_alpha;\n\n\t\t\t\t\t\t${e} = spe_blend( ${e}, f${this.id}_depth, f${this.id}_calpha, f${this.id}_mode );\n\t\t\t\t\t\t// ***********************************************************************************************************\n\t\t\t\t\t`},this.fromJSON=function(e){this.uniforms[`f${this.id}_alpha`].value=e.uniforms[`f${this.id}_alpha`].value,this.uniforms[`f${this.id}_mode`].value=e.uniforms[`f${this.id}_mode`].value,this.uniforms[`f${this.id}_near`].value=e.uniforms[`f${this.id}_near`].value,this.uniforms[`f${this.id}_far`].value=e.uniforms[`f${this.id}_far`].value,this.uniforms[`f${this.id}_isVector`].value=e.uniforms[`f${this.id}_isVector`].value;let t=e.uniforms[`f${this.id}_colorA`].value;this.uniforms[`f${this.id}_colorA`].value.set(t);let n=e.uniforms[`f${this.id}_colorB`].value;this.uniforms[`f${this.id}_colorB`].value.set(n);let r=e.uniforms[`f${this.id}_origin`].value;return this.uniforms[`f${this.id}_origin`].value.set(r.x,r.y,r.z),this};break;case"noise":this.paramNames=["alpha","mode","scale","move","distortion","fA","fB","colorA","colorB","colorC","colorD","intA","intB","intC","intD"],this.defines.NUM_OCTAVES=5,this.defines.USE_UV="",this.defines.USE_LAYER_NOISE="",this.uniforms[`f${t}_scale`]={value:e.scale?e.scale:2,type:"f"},this.uniforms[`f${t}_move`]={value:e.move?e.move:1,type:"f"},this.uniforms[`f${t}_distortion`]={value:e.distortion?e.distortion:new THREE.Vector2(1,1),type:"v2"},this.uniforms[`f${t}_fA`]={value:e.fA?e.fA:new THREE.Vector2(1.7,9.2),type:"v2"},this.uniforms[`f${t}_fB`]={value:e.fB?e.fB:new THREE.Vector2(8.3,2.8),type:"v2"},this.uniforms[`f${t}_colorA`]={value:e.colorA?e.colorA:new THREE.Color(.4,.4,.4),type:"v3"},this.uniforms[`f${t}_colorB`]={value:e.colorB?e.colorB:new THREE.Color(.4,.4,.4),type:"v3"},this.uniforms[`f${t}_colorC`]={value:e.colorC?e.colorC:new THREE.Color(1,1,1),type:"v3"},this.uniforms[`f${t}_colorD`]={value:e.colorD?e.colorD:new THREE.Color(1,1,1),type:"v3"},this.uniforms[`f${t}_intA`]={value:e.intA?e.intA:10},this.uniforms[`f${t}_intB`]={value:e.intB?e.intB:10},this.uniforms[`f${t}_intC`]={value:e.intC?e.intC:10},this.uniforms[`f${t}_intD`]={value:e.intD?e.intD:10},this.varProgram+=`\n\t\t\t\t\t// SPE: Noise layer uniforms *******************\n\t\t\t\t\tuniform float f${t}_scale;\n\t\t\t\t\tuniform float f${t}_move;\n\t\t\t\t\tuniform vec2 f${t}_fA;\n\t\t\t\t\tuniform vec2 f${t}_fB;\n\t\t\t\t\tuniform vec2 f${t}_distortion;\n\t\t\t\t\tuniform vec3 f${t}_colorA;\n\t\t\t\t\tuniform vec3 f${t}_colorB;\n\t\t\t\t\tuniform vec3 f${t}_colorC;\n\t\t\t\t\tuniform vec3 f${t}_colorD;\n\t\t\t\t\tuniform float f${t}_intA;\n\t\t\t\t\tuniform float f${t}_intB;\n\t\t\t\t\tuniform float f${t}_intC;\n\t\t\t\t\tuniform float f${t}_intD;\n\t\t\t\t\t// *********************************************\n\t\t\t\t`,this.getProgram=function(e){let t=`f${this.id}_`;return`\n\t\t\t\t\t\t// SPE: Noise layer shader-code **************************************************************\n\t\t\t\t\t\tvec2 ${t}st = vUv * ${t}scale;\n\t\t\t\t\t\tvec3 ${t}color;\n\n\t\t\t\t\t\tvec2 ${t}q = vec2( fbm( ${t}st ), fbm( ${t}st + vec2(1.0) ) );\n\n\t\t\t\t\t\tvec2 ${t}r = vec2( fbm( ${t}st + ${t}distortion * ${t}q + ${t}fA + ${t}move ),\n\t\t\t\t\t\t\t\t\t   \t\t fbm( ${t}st + ${t}distortion * ${t}q + ${t}fB + ${t}move ) );\n\n\t\t\t\t\t\tfloat ${t}f = fbm( ${t}st + ${t}r );\n\n\t\t\t\t\t\t${t}color = mix( ${t}colorA * ${t}intA, ${t}colorB * ${t}intB,\n\t\t\t\t\t\t\t\t\t clamp((${t}f*${t}f)*4.0,0.0,1.0) );\n\n\t\t\t\t\t\t${t}color = mix( ${t}color, ${t}colorC * ${t}intC,\n\t\t\t\t\t\t\t\t\t clamp( length(${t}q), 0.0, 1.0 ) );\n\n\t\t\t\t\t\t${t}color = mix( ${t}color, ${t}colorD * ${t}intD,\n\t\t\t\t\t\t\t\t\t clamp( length(${t}r.x), 0.0, 1.0 ) );\n\n\t\t\t\t\t\tvec3 ${t}noise = clamp( vec3( ${t}f * ${t}color ), 0.0, 1.0 );\n\n\t\t\t\t\t\tfloat ${t}calpha = ${t}alpha / clamp( ${t}alpha + accumAlpha, 0.001, 1.0 );\n\t\t\t\t\t\taccumAlpha += ( 1.0 - accumAlpha ) * ${t}alpha;\n\n\t\t\t\t\t\t${e} = spe_blend( ${e}, ${t}noise, ${t}calpha, ${t}mode );\n\t\t\t\t\t\t// *******************************************************************************************\n\t\t\t\t\t`},this.fromJSON=function(e){this.uniforms[`f${this.id}_alpha`].value=e.uniforms[`f${this.id}_alpha`].value,this.uniforms[`f${this.id}_mode`].value=e.uniforms[`f${this.id}_mode`].value,this.uniforms[`f${this.id}_scale`].value=e.uniforms[`f${this.id}_scale`].value,this.uniforms[`f${this.id}_move`].value=e.uniforms[`f${this.id}_move`].value,this.uniforms[`f${this.id}_intA`].value=e.uniforms[`f${this.id}_intA`].value,this.uniforms[`f${this.id}_intB`].value=e.uniforms[`f${this.id}_intB`].value,this.uniforms[`f${this.id}_intC`].value=e.uniforms[`f${this.id}_intC`].value,this.uniforms[`f${this.id}_intD`].value=e.uniforms[`f${this.id}_intD`].value;let t=e.uniforms[`f${this.id}_colorA`].value;this.uniforms[`f${this.id}_colorA`].value.set(t);let n=e.uniforms[`f${this.id}_colorB`].value;this.uniforms[`f${this.id}_colorB`].value.set(n);let r=e.uniforms[`f${this.id}_colorC`].value;this.uniforms[`f${this.id}_colorC`].value.set(r);let i=e.uniforms[`f${this.id}_colorD`].value;this.uniforms[`f${this.id}_colorD`].value.set(i);let o=e.uniforms[`f${this.id}_distortion`].value;this.uniforms[`f${this.id}_distortion`].value.set(o.x,o.y);let a=e.uniforms[`f${this.id}_fA`].value;this.uniforms[`f${this.id}_fA`].value.set(a.x,a.y);let s=e.uniforms[`f${this.id}_fB`].value;return this.uniforms[`f${this.id}_fB`].value.set(s.x,s.y),this};break;case"fresnel":this.paramNames=["alpha","mode","bias","scale","intensity","factor","color"],this.defines.USE_LAYER_FRESNEL="",this.uniforms[`f${t}_bias`]={value:e.bias?e.bias:.1},this.uniforms[`f${t}_scale`]={value:e.scale?e.scale:1},this.uniforms[`f${t}_intensity`]={value:e.intensity?e.intensity:2},this.uniforms[`f${t}_factor`]={value:e.factor?e.factor:1},this.uniforms[`f${t}_color`]={value:e.color?e.color:new THREE.Color},this.varProgram+=`\n\t\t\t\t\t// SPE: Fresnel layer uniforms **************************************************\n\t\t\t\t\tuniform float f${t}_bias;\n\t\t\t\t\tuniform float f${t}_scale;\n\t\t\t\t\tuniform float f${t}_intensity;\n\t\t\t\t\tuniform float f${t}_factor;\n\t\t\t\t\tuniform vec3 f${t}_color;\n\t\t\t\t\t// ******************************************************************************\n\t\t\t\t\t`,this.getProgram=function(e){let t=`f${this.id}_`;return`\n\t\t\t\t\t\t// SPE: Fresnel layer shader-code *******************************************************************************************************************\n\t\t\t\t\t\tfloat ${t}fresnel = ${t}bias + ${t}scale * pow( ${t}factor + dot( normalize( vWorldViewDir ), normalize( vWorldNormal ) ), ${t}intensity );\n\t\t\t\t\t\tfloat ${t}lalpha = clamp( ${t}fresnel, 0.0, 1.0 ) * ${t}alpha;\n\t\t\t\t\t\tfloat ${t}calpha = ${t}lalpha / clamp( ${t}lalpha + accumAlpha, 0.001, 1.0 );\n\t\t\t\t\t\taccumAlpha += ( 1.0 - accumAlpha ) * ${t}lalpha;\n\t\t\t\t\t\t${e} = spe_blend( ${e}, ${t}color, ${t}calpha, ${t}mode );\n\t\t\t\t\t\t// **************************************************************************************************************************************************\n\t\t\t\t\t`},this.fromJSON=function(e){this.uniforms[`f${this.id}_alpha`].value=e.uniforms[`f${this.id}_alpha`].value,this.uniforms[`f${this.id}_mode`].value=e.uniforms[`f${this.id}_mode`].value,this.uniforms[`f${this.id}_bias`].value=e.uniforms[`f${this.id}_bias`].value,this.uniforms[`f${this.id}_scale`].value=e.uniforms[`f${this.id}_scale`].value,this.uniforms[`f${this.id}_intensity`].value=e.uniforms[`f${this.id}_intensity`].value,this.uniforms[`f${this.id}_factor`].value=e.uniforms[`f${this.id}_factor`].value;let t=e.uniforms[`f${this.id}_color`].value;return this.uniforms[`f${this.id}_color`].value.set(t),this};break;case"gradient":let n,r;this.paramNames=["alpha","mode","gl_type","num","smooth","colors","steps","offset","morph","angle"],this.defines.USE_UV="",this.defines.GRAD_MAX="10",void 0===e.colors?(n=new Array(10).fill().map(e=>new THREE.Vector4(0,0,0,1)),n[1].set(1,1,1,1)):n=e.colors,void 0===e.steps?(r=new Array(10).fill(1),r[0]=0):r=e.steps,this.uniforms[`f${t}_gl_type`]={value:e.gl_type?e.gl_type:0},this.uniforms[`f${t}_num`]={value:e.num?e.num:2},this.uniforms[`f${t}_smooth`]={value:!!e.smooth&&e.smooth},this.uniforms[`f${t}_colors`]={value:n},this.uniforms[`f${t}_steps`]={value:r},this.uniforms[`f${t}_offset`]={value:e.offset?e.offset:new THREE.Vector2(0,0)},this.uniforms[`f${t}_morph`]={value:e.morph?e.morph:new THREE.Vector2(0,0)},this.uniforms[`f${t}_angle`]={value:e.angle?e.angle:0},this.varProgram+=`\n\t\t\t\t\t// SPE: Gradient layer uniforms ****************\n\t\t\t\t\tuniform int f${t}_gl_type;\n\t\t\t\t\tuniform int f${t}_num;\n\t\t\t\t\tuniform bool f${t}_smooth;\n\t\t\t\t\tuniform vec4 f${t}_colors[GRAD_MAX];\n\t\t\t\t\tuniform float f${t}_steps[GRAD_MAX];\n\t\t\t\t\tuniform vec2 f${t}_offset;\n\t\t\t\t\tuniform vec2 f${t}_morph;\n\t\t\t\t\tuniform float f${t}_angle;\n\t\t\t\t\t// *********************************************\n\t\t\t\t\t`,this.getProgram=function(e){let t=`f${this.id}_`;return`\n\t\t\t\t\t\t// SPE: Gradient layer shader-code **************************************************************************\n\t\t\t\t\t\tvec4 ${t}color = ${t}colors[0];\n\n\t\t\t\t\t\tvec2 ${t}m = ${t}morph / vUv.xy;\n\n\t\t\t\t\t\tvec2 ${t}rot = vec2( 0.5 + ${t}m.x, ${t}m.y );\n\n\t\t\t\t\t\tvec2 ${t}dt = vec2(\n\t\t\t\t\t\t\tcos( ${t}angle ) * ${t}rot.x - sin( ${t}angle ) * ${t}rot.y,\n\t\t\t\t\t\t\tsin( ${t}angle ) * ${t}rot.x + cos( ${t}angle ) * ${t}rot.y\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tvec2 ${t}pt = ( vUv - 0.5 + ${t}offset ) / 2.0 + ${t}dt / 2.0;\n\t\t\t\t\t\tfloat ${t}t = dot( ${t}pt, ${t}dt ) / dot( ${t}dt, ${t}dt );\n\n\t\t\t\t\t\tif ( ${t}gl_type == 1 ) {\n\n\t\t\t\t\t\t\t${t}t = distance (\n\t\t\t\t\t\t\t\t( vUv + ${t}morph ) * 3.0,\n\t\t\t\t\t\t\t\t( vUv + ${t}offset ) + 1.0\n\t\t\t\t\t\t\t) + ${t}angle;\n\n\t\t\t\t\t\t} else if ( ${t}gl_type == 2 ) {\n\n\t\t\t\t\t\t\tfloat ${t}polar = atan(\n\t\t\t\t\t\t\t\tvUv.x + ${t}morph.x - 0.5 + ${t}offset.x,\n\t\t\t\t\t\t\t\tvUv.y + ${t}morph.y - 0.5 + ${t}offset.y\n\t\t\t\t\t\t\t) * -1.0;\n\t\t\t\t\t\t\t${t}t = fract( ( ${t}angle / PI / -2.0 ) + 0.5 * ( ${t}polar / PI ) );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfloat ${t}p;\n\n\t\t\t\t\t\tfor ( int i = 1; i < GRAD_MAX; i++ ) {\n\n\t\t\t\t\t\t\tif ( i < ${t}num ) {\n\n\t\t\t\t\t\t\t\t${t}p = clamp( ( ${t}t - ${t}steps[i-1] ) / ( ${t}steps[i] - ${t}steps[i-1] ), 0.0, 1.0 );\n\n\t\t\t\t\t\t\t\t${t}color = mix( ${t}color, ${t}colors[i],\n\t\t\t\t\t\t\t\t\t( ${t}smooth ) ? smoothstep( 0.0, 1.0, ${t}p ) : ${t}p\n\t\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfloat ${t}lalpha = ${t}alpha * ${t}color.a;\n\n\t\t\t\t\t\tfloat ${t}calpha =  ${t}lalpha / clamp( ${t}lalpha + accumAlpha, 0.00001, 1.0 );\n\t\t\t\t\t\taccumAlpha += ( 1.0 - accumAlpha ) * ${t}lalpha;\n\n\t\t\t\t\t\t${e} = spe_blend( ${e}, ${t}color.xyz, ${t}calpha, ${t}mode );\n\t\t\t\t\t\t// **********************************************************************************************************\n\t\t\t\t\t`},this.fromJSON=function(e){this.uniforms[`f${this.id}_alpha`].value=e.uniforms[`f${this.id}_alpha`].value,this.uniforms[`f${this.id}_mode`].value=e.uniforms[`f${this.id}_mode`].value,e.uniforms[`f${this.id}_gl_type`]?this.uniforms[`f${this.id}_gl_type`].value=e.uniforms[`f${this.id}_gl_type`].value:this.uniforms[`f${this.id}_gl_type`].value=e.uniforms[`f${this.id}_type`].value,this.uniforms[`f${this.id}_num`].value=e.uniforms[`f${this.id}_num`].value,this.uniforms[`f${this.id}_smooth`].value=e.uniforms[`f${this.id}_smooth`].value,this.uniforms[`f${this.id}_angle`].value=e.uniforms[`f${this.id}_angle`].value;let n=e.uniforms[`f${this.id}_offset`].value;this.uniforms[`f${this.id}_offset`].value.set(n.x,n.y);let r=e.uniforms[`f${this.id}_morph`].value;this.uniforms[`f${this.id}_morph`].value.set(r.x,r.y);let i=e.uniforms[`f${t}_colors`].value,o=this.uniforms[`f${t}_colors`].value;for(let t=0;t<i.length;t++){let e=i[t];o[t].set(e.x,e.y,e.z,e.w)}let a=e.uniforms[`f${t}_steps`].value,s=this.uniforms[`f${t}_steps`].value;for(let t=0;t<a.length;t++)s[t]=a[t];return this};break;case"points":this.paramNames=["alpha","mode","pl_color","pl_useBack","pl_threshold"],this.defines.USE_LAYER_POINTS="",this.uniforms[`f${t}_pl_color`]={value:e.pl_color?e.pl_color:new THREE.Color(12237498)},this.uniforms[`f${t}_pl_useBack`]={value:!e.pl_useBack||e.pl_useBack},this.uniforms[`f${t}_pl_threshold`]={value:e.pl_threshold?e.pl_threshold:.9},this.varProgram+=`\n\t\t\t\t\t// SPE: Points layer uniforms **************\n\t\t\t\t\tuniform vec3 f${t}_pl_color;\n\t\t\t\t\tuniform bool f${t}_pl_useBack;\n\t\t\t\t\tuniform float f${t}_pl_threshold;\n\t\t\t\t\t// *****************************************\n\t\t\t\t`,this.getProgram=function(e){return`\n\t\t\t\t\t\t// SPE: Points layer shader-code *********************************************************************************\n\t\t\t\t\t\tfloat f${this.id}_dist = length( vBarycentric );\n\t\t\t\t\t\tfloat f${this.id}_edge = aastep( f${this.id}_pl_threshold, f${this.id}_dist, 0.00 );\n\t\t\t\t\t\tfloat f${this.id}_factor = gl_FrontFacing ? 1.0 : ( f${this.id}_pl_useBack ? 0.5 : 0.0 );\n\t\t\t\t\t\t${e} = spe_blend( ${e}, f${this.id}_factor * f${this.id}_pl_color, f${this.id}_alpha * f${this.id}_edge, f${this.id}_mode );\n\t\t\t\t\t\taccumAlpha += ( 1.0 - accumAlpha ) * f${this.id}_alpha * f${this.id}_edge;\n\t\t\t\t\t\t// ***************************************************************************************************************\n\t\t\t\t\t`},this.fromJSON=function(e){return this.uniforms[`f${this.id}_alpha`].value=e.uniforms[`f${this.id}_alpha`].value,this.uniforms[`f${this.id}_mode`].value=e.uniforms[`f${this.id}_mode`].value,this.uniforms[`f${this.id}_pl_color`].value.set(e.uniforms[`f${this.id}_pl_color`].value),this.uniforms[`f${this.id}_pl_useBack`].value.set(e.uniforms[`f${this.id}_pl_useBack`].value),this};break;case"lines":this.paramNames=["alpha","mode","ll_color","ll_thickeness","ll_useBack","ll_smoothOffset"],this.defines.USE_LAYER_LINES="",this.uniforms[`f${t}_ll_color`]={value:e.ll_color?e.ll_color:new THREE.Color(12237498)},this.uniforms[`f${t}_ll_thickness`]={value:e.ll_thickness?e.ll_thickness:.01},this.uniforms[`f${t}_ll_useBack`]={value:!e.ll_useBack||e.ll_useBack},this.uniforms[`f${t}_ll_smoothOffset`]={value:e.ll_smoothOffset?e.ll_smoothOffset:.03},this.varProgram+=`\n\t\t\t\t\t// SPE: Lines layer uniforms *************************\n\t\t\t\t\tuniform vec3 f${t}_ll_color;\n\t\t\t\t\tuniform float f${t}_ll_thickness;\n\t\t\t\t\tuniform bool f${t}_ll_useBack;\n\t\t\t\t\tuniform float f${t}_ll_smoothOffset;\n\t\t\t\t\t// **************************************************\n\t\t\t\t`,this.getProgram=function(e){return`\n\t\t\t\t\t\t// SPE: Lines layer shader-code **********************************************************************************************\n\t\t\t\t\t\tfloat f${this.id}_dist = min( vBarycentric.x, min( vBarycentric.y, vBarycentric.z ) );\n\t\t\t\t\t\tfloat f${this.id}_comp_thickness = f${this.id}_ll_thickness;\n\t\t\t\t\t\tfloat f${this.id}_edge = 1.0 - aastep( f${this.id}_comp_thickness, f${this.id}_dist, f${this.id}_ll_smoothOffset );\n\t\t\t\t\t\tfloat f${this.id}_factor = gl_FrontFacing ? 1.0 : ( f${this.id}_ll_useBack ? 0.5 : 0.0 );\n\t\t\t\t\t\t${e} = spe_blend( ${e}, f${this.id}_factor * f${this.id}_ll_color, f${this.id}_alpha * f${this.id}_edge, f${this.id}_mode );\n\t\t\t\t\t\taccumAlpha += ( 1.0 - accumAlpha ) * f${this.id}_alpha * f${this.id}_edge;\n\t\t\t\t\t\t// ***************************************************************************************************************************\n\t\t\t\t\t`},this.fromJSON=function(e){return this.uniforms[`f${this.id}_alpha`].value=e.uniforms[`f${this.id}_alpha`].value,this.uniforms[`f${this.id}_mode`].value=e.uniforms[`f${this.id}_mode`].value,this.uniforms[`f${this.id}_ll_color`].value.set(e.uniforms[`f${this.id}_ll_color`].value),this.uniforms[`f${this.id}_ll_thickness`].value.set(e.uniforms[`f${this.id}_ll_thickness`].value),this.uniforms[`f${this.id}_ll_useBack`].value.set(e.uniforms[`f${this.id}_ll_useBack`].value),this.uniforms[`f${this.id}_ll_smoothOffset`].value.set(e.uniforms[`f${this.id}_ll_smoothOffset`].value),this}}},getValues:function(){const e={type:this.type};for(let t=0,n=this.paramNames.length;t<n;++t){const n=this.paramNames[t],r=this.uniforms[`f${this.id}_`+n];if(e[n]={},Array.isArray(r.value)){const t=r.value.length;e[n]=new Array(t);for(let i=0,o=t;i<o;i++){const t=r.value[i];e[n][i]=void 0!==t.clone?t.clone():t}}else r.value.clone?e[n]=r.value.clone():e[n]=r.value}return e},copyUniforms:function(e){if("texture"===this.type){const t=e.uniforms[`f${e.id}_texture`].value.clone();this.uniforms[`f${this.id}_alpha`]={value:e.uniforms[`f${e.id}_alpha`].value},this.uniforms[`f${this.id}_mode`]={value:e.uniforms[`f${e.id}_mode`].value},this.uniforms[`f${this.id}_texture`]={value:t},this.uniforms[`f${this.id}_mat`]={value:t.matrix},this.uniforms[`f${this.id}_crop`]={value:e.uniforms[`f${e.id}_crop`].value}}else for(let t=0,n=e.paramNames.length;t<n;++t){const n=`f${this.id}_${e.paramNames[t]}`,r=`f${e.id}_${e.paramNames[t]}`;if(this.uniforms[n]={},void 0!==e.uniforms[r].type&&(this.uniforms[n].type=e.uniforms[r].type),Array.isArray(e.uniforms[r].value)){const t=e.uniforms[r].value.length;this.uniforms[n].value=new Array(t);let i=this.uniforms[n].value;for(let n=0,o=t;n<o;n++){const t=e.uniforms[r].value[n];i[n]=void 0!==t.clone?t.clone():t}}else e.uniforms[r].value.clone?this.uniforms[n].value=e.uniforms[r].value.clone():this.uniforms[n].value=e.uniforms[r].value}return this},copy:function(e){if(this.id=e.id,this.type=e.type,this.paramNames=e.paramNames,this.varProgram=e.varProgram,this.getProgram=e.getProgram,this.uniforms={},this.defines={...e.defines},"texture"===this.type){const t=e.uniforms[`f${e.id}_texture`].value.clone();this.uniforms[`f${this.id}_alpha`]={value:e.uniforms[`f${e.id}_alpha`].value},this.uniforms[`f${this.id}_mode`]={value:e.uniforms[`f${e.id}_mode`].value},this.uniforms[`f${this.id}_texture`]={value:t},this.uniforms[`f${this.id}_mat`]={value:t.matrix},this.uniforms[`f${this.id}_crop`]={value:e.uniforms[`f${e.id}_crop`].value}}else for(let[t,n]of Object.entries(e.uniforms))if(this.uniforms[t]={},void 0!==n.type&&(this.uniforms[t].type=n.type),Array.isArray(n.value)){const e=n.value.length;this.uniforms[t].value=new Array(e);const r=this.uniforms[t].value;for(let t=0,i=e;t<i;t++){const e=n.value[t];r[t]=e.clone?e.clone():e}}else n.value.clone?this.uniforms[t].value=n.value.clone():this.uniforms[t].value=n.value;return this},clone:function(){return(new this.constructor).copy(this)},toJSON(e){let t={};if(t.id=this.id,t.type=this.type,t.defines=JSON.parse(JSON.stringify(this.defines)),"texture"===this.type){const n=this.uniforms[`f${this.id}_texture`];t.uniforms={},t.uniforms[`f${this.id}_alpha`]={value:this.uniforms[`f${this.id}_alpha`].value},t.uniforms[`f${this.id}_mode`]={value:this.uniforms[`f${this.id}_mode`].value},t.uniforms[`f${this.id}_texture`]={value:n.value.toJSON(e).uuid},t.uniforms[`f${this.id}_mat`]={value:JSON.parse(JSON.stringify(this.uniforms[`f${this.id}_mat`].value))},t.uniforms[`f${this.id}_crop`]={value:this.uniforms[`f${this.id}_crop`].value}}else t.uniforms=JSON.parse(JSON.stringify(this.uniforms));return t.next=null==this.next?void 0:this.next.toJSON(e),t}};const CreateLayerFromJSON=function(e,t){const n=e.id,r=e.type;return new Layer(n,{type:r}).fromJSON(e,t)},LayerStack=function(e,t,n){this.id=2,this.shader=void 0,this.needsUpdate=!1,this.head=new Layer(0,{type:"color",color:e,alpha:t}),this.head.next=new Layer(1,{type:"light"}),this.uuid=void 0!==n?n:THREE.Math.generateUUID()};LayerStack.prototype={constructor:LayerStack,addLayer:function(e){let t=this.head;const n=new Layer(e.id?e.id:++this.id,e);for(;null!=t.next;)t=t.next;return t.next=n,this.uuid=THREE.Math.generateUUID(),n},addLayerBeforeAt:function(e,t){let n=this.head;const r=new Layer(e.id?e.id:++this.id,e);if(r.next=t,n===t)this.head=r;else{for(;n.next!==t;)n=n.next;n.next=r}return this.uuid=THREE.Math.generateUUID(),r},addLayerAt:function(e,t){let n,r=this.head;const i=new Layer(t.id,t);if(0==e)return i.next=this.head,this.head=i,i;n=this.head,r=this.head.next;for(let o=0;o<e-1;o++)n=r,r=r.next;return i.next=r,n.next=i,this.uuid=THREE.Math.generateUUID(),i},removeLayer:function(e){let t,n=this.head,r=0;if(n.id==e)this.head=n.next;else for(r=1,t=n,n=n.next;null!=n;){if(n.id==e){t.next=n.next;break}r++,t=n,n=n.next}return this.uuid=THREE.Math.generateUUID(),r},changeLayer:function(e,t){let n,r=this.head,i=new Layer(e,t);if(r.id==e)i.next=r.next,this.head=i,i.uniforms[`f${e}_mode`].value=r.uniforms[`f${e}_mode`].value,i.uniforms[`f${e}_alpha`].value=r.uniforms[`f${e}_alpha`].value;else for(n=r,r=r.next;null!=r;){if(r.id==e){n.next=i,i.next=r.next,i.uniforms[`f${e}_mode`].value=r.uniforms[`f${e}_mode`].value,i.uniforms[`f${e}_alpha`].value=r.uniforms[`f${e}_alpha`].value;break}n=r,r=r.next}return this.uuid=THREE.Math.generateUUID(),i},getLayer:function(e){let t=this.head;for(;null!=t&&t.id!=e;)t=t.next;return t},getLayers:function(){let e=[],t=this.head;for(;null!=t;)e.push(t),t=t.next;return e},getLayerPosition:function(e){let t=this.head,n=0;for(;void 0!==t&&t.id!=e;)n++,t=t.next;return n},getDefines:function(){let e="";const t={};let n=this.head;for(;null!=n;){for(let[e,r]of Object.entries(n.defines))t[e]=r;n=n.next}for(let[r,i]of Object.entries(t))e+=`#define ${r} ${i}\n`;return e},getBeforeProgram:function(){let e="",t=this.head;for(;"light"!=t.type;)e+=t.getProgram("bef"),t=t.next;return e},getLightingProgram:function(){let e=this.head;for(;"light"!=e.type;)e=e.next;return e.getProgram()},getAfterProgram:function(){let e="",t=this.head;for(;"light"!=t.type;)t=t.next;for(t=t.next;null!=t;)e+=t.getProgram("aft"),t=t.next;return e},getVarPrograms:function(){let e="",t=this.head;for(;null!=t;)e+=t.varProgram,t=t.next;return e},getUniforms:function(){const e={};let t=this.head;for(;null!=t;){for(let[n,r]of Object.entries(t.uniforms))e[n]=r;t=t.next}return e},moveLayer:function(e,t){let n,r,i=this.head;if(0==e)n=this.head,this.head=n.next;else{for(let t=0;t<e;t++)r=i,i=i.next;r.next=i.next,n=i}if(i=this.head,r=void 0,0==t)n.next=this.head,this.head=n;else{for(let e=0;e<t-1;e++)i=i.next;n.next=i.next,i.next=n}this.uuid=THREE.Math.generateUUID()},updateLayerUniform:function(e,t){const n=this.getLayer(e);n&&this.updateLayerUniformByLayer(n,t)},updateLayerUniformByLayer:function(e,t){this.shader.uniforms[t]?this.shader.uniforms[t].value=e.uniforms[t].value:this.shader.uniforms[t]={value:e.uniforms[t].value},this.uuid=THREE.Math.generateUUID()},copy:function(e){this.id=e.id,this.uuid=e.uuid,this.shader=e.shader,this.needsUpdate=!1,this.head=e.head.clone();let t=this.head,n=e.head;for(;null!=n.next;)t.next=n.next.clone(),t=t.next,n=n.next;return this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(e){let t={};return t.id=this.id,t.uuid=this.uuid,t.head=this.head.toJSON(e),t},fromJSON:function(e,t){this.id=e.id,this.uuid=e.uuid,this.head=new Layer(e.head.id,{type:e.head.type}).fromJSON(e.head,t);let n=e.head.next,r=this.head;for(;null!=n;)r.next=new Layer(n.id,{type:n.type}).fromJSON(n,t),n=n.next,r=r.next;return this},dispose:function(){let e=this.head;for(;void 0!==e;)!0===e.hasOwnProperty("dispose")&&e.dispose(),e=e.next}};const ShaderLib={setup:function(e,t){t.userData&&t.userData.category||ShaderLib.setCategory(t);let n=t.userData.category;return e.fragmentShader="\n\t\t\t/* SPE-Blending helper functions */\n\t\t\t#define SPE_BLENDING_NORMAL 0\n\t\t\t#define SPE_BLENDING_MULTIPLY 1\n\t\t\t#define SPE_BLENDING_SCREEN 2\n\t\t\t#define SPE_BLENDING_OVERLAY 3\n\n\t\t\tvec3 spe_normalBlend( vec3 a, vec3 b, float alpha ) {\n\t\t\t\treturn mix( a, b, alpha );\n\t\t\t}\n\t\t\tvec3 spe_multiplyBlend( vec3 a, vec3 b, float alpha ) {\n\t\t\t\treturn mix( a, a * b, alpha );\n\t\t\t}\n\t\t\tvec3 spe_screenBlend( vec3 a, vec3 b, float alpha ) {\n\t\t\t\tvec3 tmp = 1.0 - ( 1.0 - a ) * ( 1.0 - b );\n\t\t\t\treturn mix( a, tmp, alpha );\n\t\t\t}\n\t\t\tvec3 spe_overlayBlend( vec3 a, vec3 b, float alpha ) {\n\t\t\t\tvec3 tmp = mix( 1. - 2. * (1. - a) * (1. - b), 2. * a * b, step( a, vec3(.5) ) );\n\t\t\t\treturn clamp( mix( a, tmp, alpha ), 0.0, 1.0 );\n\t\t\t}\n\t\t\tvec3 spe_blend( vec3 a, vec3 b, float alpha, int mode ) {\n\t\t\t\t/**/ if ( mode == SPE_BLENDING_NORMAL ) return spe_normalBlend( a, b, alpha );\n\t\t\t\telse if ( mode == SPE_BLENDING_MULTIPLY ) return spe_multiplyBlend( a, b, alpha );\n\t\t\t\telse if ( mode == SPE_BLENDING_SCREEN ) return spe_screenBlend( a, b, alpha );\n\t\t\t\telse if ( mode == SPE_BLENDING_OVERLAY ) return spe_overlayBlend( a, b, alpha );\n\t\t\t\treturn vec3( 1.0 );\n\t\t\t}\n\t\t\t"+e.fragmentShader,e.vertexShader="\n\t\t\t#ifdef USE_LAYER_FRESNEL\n\t\t\t\tvarying vec3 vWorldViewDir;\n\t\t\t\tvarying vec3 vWorldNormal;\n\t\t\t#endif /* USE_LAYER_FRESNEL */\n\t\t\t"+e.vertexShader,e.fragmentShader="\n\t\t\t#ifdef USE_LAYER_FRESNEL\n\t\t\t\tvarying vec3 vWorldViewDir;\n\t\t\t\tvarying vec3 vWorldNormal;\n\t\t\t#endif /* USE_LAYER_FRESNEL */\n\t\t\t"+e.fragmentShader,e.vertexShader=e.vertexShader.replace("#include <project_vertex>","\n\t\t\t#include <project_vertex>\n\t\t\t#ifdef USE_LAYER_FRESNEL\n\t\t\t\tvec4 fWorldPosition = modelMatrix * vec4( position, 1.0 );\n\t\t\t\tvWorldViewDir = isPerspectiveMatrix( projectionMatrix ) ? \n\t\t\t\t\t\t\t\t\t( fWorldPosition.xyz - cameraPosition ) : vec3( -viewMatrix[0][2], -viewMatrix[1][2], -viewMatrix[2][2] );\n\t\t\t\tvWorldNormal = normalize( mat3( modelMatrix[0].xyz, modelMatrix[1].xyz, modelMatrix[2].xyz ) * normal );\n\t\t\t#endif /* USE_LAYER_FRESNEL */\n\t\t\t"),e.vertexShader="\n\t\t\t#if defined( USE_LAYER_POINTS ) || defined( USE_LAYER_LINES )\n\t\t\t\tattribute vec3 barycentric;\n\t\t\t\tvarying vec3 vBarycentric;\n\t\t\t#endif /* USE_LAYER_POINTS || USE_LAYER_LINES */\n\t\t"+e.vertexShader,e.vertexShader=e.vertexShader.replace("#include <begin_vertex>","\n\t\t\t#include <begin_vertex>\n\t\t\t#if defined( USE_LAYER_POINTS ) || defined( USE_LAYER_LINES )\n\t\t\t\tvBarycentric = barycentric;\n\t\t\t#endif /* USE_LAYER_POINTS || USE_LAYER_LINES */\n\t\t\t"),e.fragmentShader="\n\t\t\t#if defined( USE_LAYER_POINTS ) || defined( USE_LAYER_LINES )\n\t\t\t\tvarying vec3 vBarycentric;\n\n\t\t\t\tfloat aastep( float threshold, float dist, float smoothOffset ) {\n\t\t\t\t\tfloat afwidth = fwidth( dist ) * 0.5;\n\t\t\t\t\treturn smoothstep( threshold - afwidth - smoothOffset, threshold + afwidth + smoothOffset, dist );\n\t\t\t\t}\n\t\t\t#endif /* USE_LAYER_POINTS || USE_LAYER_LINES */\n\t\t"+e.fragmentShader,e.fragmentShader="\n\t\t\t#ifdef USE_LAYER_NOISE\n\n\t\t\t\tfloat random ( in vec2 _st ) {\n\t\t\t\t\treturn sin(sin(dot(_st.xy, vec2(12.834,77.212))) * 320.3456); // Ale: I am usin sin() instead of fract() to create a different noise.\n\t\t\t\t}\n\n\t\t\t\tfloat noise ( in vec2 _st ) {\n\t\t\t\t\tvec2 i = floor(_st);\n\t\t\t\t\tvec2 f = fract(_st);\n\n\t\t\t\t\t// Four corners in 2D of a tile\n\t\t\t\t\tfloat a = random(i);\n\t\t\t\t\tfloat b = random(i + vec2(1.0, 0.0)); // Ale: By incrementing disproportionally these values. You get a geometrical distortion.\n\t\t\t\t\tfloat c = random(i + vec2(0.0, 1.0));\n\t\t\t\t\tfloat d = random(i + vec2(1.0, 1.0));\n\n\t\t\t\t\tvec2 u = f * f * (3.0 - 2.0 * f);\n\n\t\t\t\t\treturn mix(a, b, u.x) + (c - a)* u.y * (1.0 - u.x) + (d - b) * u.x * u.y;\n\t\t\t\t}\n\n\t\t\t\tfloat fbm ( in vec2 _st ) {\n\t\t\t\t\tfloat v = 0.0;\n\t\t\t\t\tfloat a = 0.5;\n\t\t\t\t\tvec2 shift = vec2(100.0);\n\n\t\t\t\t\t// Rotate to reduce axial bias\n\t\t\t\t\tmat2 rot = mat2(cos(0.5), sin(0.5),\n\t\t\t\t\t\t\t\t\t-sin(0.5), cos(0.50));\n\t\t\t\t\tfor (int i = 0; i < NUM_OCTAVES; ++i) {\n\t\t\t\t\t\tv += a * noise(_st);\n\t\t\t\t\t\t_st = rot * _st * 2.0 + shift;\n\t\t\t\t\t\ta *= 0.5;\n\t\t\t\t\t}\n\t\t\t\t\treturn v;\n\t\t\t\t}\n\t\t\t#endif /* USE_LAYER_NOISE */\n\t\t\t"+e.fragmentShader,e.fragmentShader=e.fragmentShader.replace("#include <normal_fragment_begin>",""),e.fragmentShader=e.fragmentShader.replace("#include <normal_fragment_maps>",""),"Basic"==n&&(e.fragmentShader=e.fragmentShader.replace("#include <lights_phong_fragment>\n\t\t\t\t#include <lights_fragment_begin>\n\t\t\t\t#include <lights_fragment_maps>\n\t\t\t\t#include <lights_fragment_end>",""),e.fragmentShader=e.fragmentShader.replace("vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;","vec3 outgoingLight = diffuseColor.rgb;")),"Lambert"==n&&(e.vertexShader="\n\t\t\t\t#ifdef USE_LAYER_NORMAL\n\t\t\t\t\tvarying vec3 vNormal;\n\t\t\t\t#endif /* USE_LAYER_NORMAL */\n\t\t\t\t"+e.vertexShader,e.vertexShader=e.vertexShader.replace("#include <defaultnormal_vertex>","\n\t\t\t\t#include <defaultnormal_vertex>\n\t\t\t\t#ifdef USE_LAYER_NORMAL\n\t\t\t\t\tvNormal = normalize( transformedNormal );\n\t\t\t\t#endif /* USE_LAYER_NORMAL */\n\t\t\t\t"),e.fragmentShader="\n\t\t\t\t#ifdef USE_LAYER_NORMAL\n\t\t\t\t\tvarying vec3 vNormal;\n\t\t\t\t#endif /* USE_LAYER_NORMAL */\n\t\t\t\t"+e.fragmentShader,e.fragmentShader=e.fragmentShader.replace("vec4 diffuseColor = vec4( diffuse, opacity );","\n\t\t\t\t#ifdef USE_LAYER_NORMAL\n\t\t\t\t\t#include <normal_fragment_begin>\n\t\t\t\t\t#include <normal_fragment_maps>\n\t\t\t\t#endif /* USE_LAYER_NORMAL */\n\n\t\t\t\t\tfloat accumAlpha = 0.0;\n\t\t\t\t\tvec3 bef = vec3( 1.0 );\n\t\t\t\t\t#before\n\t\t\t\t\tvec4 diffuseColor = vec4( bef, 1.0 );\n\t\t\t\t")),"Basic"!=n&&"Lambert"!=n&&"Phong"!=n&&"Physical"!=n&&"Toon"!=n||(e.vertexShader=e.vertexShader.replace("#include <common>","\n\t\t\t\t#include <common>\n\n\t\t\t\t#ifdef USE_LAYER_DEPTH\n\t\t\t\t\tvarying vec4 dWorldPosition;\n\t\t\t\t#endif /* USE_LAYER_DEPTH */\n\t\t\t\t"),e.vertexShader=e.vertexShader.replace("#include <worldpos_vertex>","\n\t\t\t\t#include <worldpos_vertex>\n\t\t\t\t#ifdef USE_LAYER_DEPTH\n\t\t\t\t\tdWorldPosition = modelMatrix * vec4( transformed, 1.0 );\n\t\t\t\t#endif\n\t\t\t\t"),e.fragmentShader="\n\t\t\t\t#ifdef USE_LAYER_DEPTH\n\t\t\t\t\tvarying vec4 dWorldPosition;\n\t\t\t\t#endif /* USE_LAYER_DEPTH */\n\t\t\t\t"+e.fragmentShader,e.fragmentShader=e.fragmentShader.replace("vec4 diffuseColor = vec4( diffuse, opacity );","\n\t\t\t\t\t#include <normal_fragment_begin>\n\t\t\t\t\t#include <normal_fragment_maps>\n\t\t\t\t\tfloat accumAlpha = 0.0;\n\t\t\t\t\tvec3 bef = vec3( 1.0 );\n\t\t\t\t\t#before\n\t\t\t\t\tvec4 diffuseColor = vec4( bef, 1.0 );\n\t\t\t\t"),e.fragmentShader=e.fragmentShader.replace("gl_FragColor = vec4( outgoingLight, diffuseColor.a );","\n\t\t\t\t\t#lighting\n\t\t\t\t\tvec3 aft = outgoingLight;\n\t\t\t\t\t#after\n\t\t\t\t\tgl_FragColor = vec4( aft, accumAlpha * opacity );\n\t\t\t\t")),e},createCallback:function(material){let string="";for(let e=0;e<material.uuid.length;++e){const t=material.uuid[e];"-"!=t&&(string+=t)}return eval(`shader => {\n\t\t\tconst __hash___${string} = true;\n\t\t\tconst layers = material.userData.layers;\n\n\t\t\tShaderLib.setup( shader, material );\n\n\t\t\t// uniforms\n\t\t\tshader.uniforms = THREE.UniformsUtils.merge( [\n\t\t\t\tshader.uniforms, layers.getUniforms()\n\t\t\t] );\n\n\t\t\t// UPDATE WITH CORE FUNCTION - !IMPORTANT!\n\t\t\tfor ( let [key, uniform] of Object.entries( shader.uniforms ) ) {\n\n\t\t\t\tif ( uniform.value && uniform.value.isTexture ) {\n\t\t\t\t\tuniform.value.needsUpdate = true;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// uniform program\n\t\t\tshader.fragmentShader = layers.getVarPrograms() + shader.fragmentShader;\n\n\t\t\t// before lighting\n\t\t\tshader.fragmentShader = shader.fragmentShader.replace(\n\t\t\t\t'#before', layers.getBeforeProgram()\n\t\t\t);\n\n\t\t\t// lighting\n\t\t\tshader.fragmentShader = shader.fragmentShader.replace(\n\t\t\t\t'#lighting', layers.getLightingProgram()\n\t\t\t);\n\n\t\t\t// after lighting\n\t\t\tshader.fragmentShader = shader.fragmentShader.replace(\n\t\t\t\t'#after', layers.getAfterProgram()\n\t\t\t);\n\n\t\t\t// defines\n\t\t\tconst defs = layers.getDefines();\n\t\t\tshader.vertexShader = defs + shader.vertexShader;\n\t\t\tshader.fragmentShader = defs + shader.fragmentShader;\n\n\t\t\t// reference\n\t\t\tlayers.shader = shader;\n\t\t}`)},setCategory:function(e){let t;switch(e.type){case"MeshBasicMaterial":t="Basic";break;case"MeshLambertMaterial":t="Lambert";break;case"MeshPhongMaterial":t="Phong";break;case"MeshPhysicalMaterial":t="Physical";break;case"MeshToonMaterial":t="Toon"}e.userData=e.userData||{},e.userData.category=t}};var InteractionState=function(){function e(){this.uuid=THREE.MathUtils.generateUUID(),this.name="",this.position=new THREE.Vector3,this.rotation=new THREE.Euler,this.scale=new THREE.Vector3,this.hiddenMatrix=new THREE.Matrix4}return e.prototype.update=function(e){this.updateMatrix(e),"geometry"in e&&this.updateGeometry(e),"material"in e&&this.updateMaterial(e),"CombinedCamera"===e.objectType&&this.updateCamera(e)},e.prototype.updateCamera=function(e){this.camera={zoomPersp:e.perspCamera.zoom,zoomOrtho:e.orthoCamera.zoom}},e.prototype.updateMatrix=function(e){this.position.copy(e.position),this.rotation.copy(e.rotation),this.scale.copy(e.scale),"hiddenMatrix"in e&&this.hiddenMatrix.copy(e.hiddenMatrix)},e.prototype.updateGeometry=function(e){if("geometry"in e){var t=e.geometry.userData.parameters,n=t.width,r=t.height,i=t.depth;this.geometry={width:n,height:r,depth:i}}},e.prototype.updateMaterial=function(e){if("material"in e)if(e.material instanceof Array){this.material=[];for(var t=0,n=e.material.length;t<n;++t){for(var r=[],i=e.material[t].layersList.head;i;)r.push(i.clone()),i=i.next;this.material.push({layersList:r})}}else{for(r=[],i=e.material.layersList.head;i;)r.push(i.clone()),i=i.next;this.material={layersList:r}}},e.prototype.execute=function(e){if(e.position.copy(this.position),e.rotation.copy(this.rotation),e.scale.copy(this.scale),"hiddenMatrix"in e&&e.hiddenMatrix.copy(this.hiddenMatrix),"geometry"in e&&void 0!==this.geometry){var t=e.geometry.userData.parameters,n=this.geometry;n.width===t.width&&n.height===t.height&&n.depth===t.depth||e.updateGeometry({parameters:{width:n.width,height:n.height,depth:n.depth}})}if("material"in e){var r=e.material;if(r instanceof Array)for(var i=0,o=(u=this.material).length;i<o;++i){for(var a=r[i].layersList.head,s=u[i].layersList,c=0;a;)a.copy(s[c++]),a=a.next;r[i].dispose()}else{var u;for(i=0,a=r.layersList.head,s=(u=this.material).layersList;a;)a.copyUniforms(s[i++]),a=a.next;r.dispose()}}this.camera&&"CombinedCamera"===e.objectType&&(e.zoom="OrthographicCamera"===e.cameraType?this.camera.zoomOrtho:this.camera.zoomPersp,e.updateProjectionMatrix())},e.prototype.copy=function(e){if(this.name=e.name,this.position.copy(e.position),this.rotation.copy(e.rotation),this.scale.copy(e.scale),this.hiddenMatrix.copy(e.hiddenMatrix),void 0!==e.geometry&&(this.geometry={width:e.geometry.width,height:e.geometry.height,depth:e.geometry.depth}),void 0!==e.material)if(e.material instanceof Array){this.material=[];for(var t=0,n=e.material.length;t<n;++t)this.material.push({layersList:e.material[t].layersList.map((function(e){return e.clone()}))})}else this.material={layersList:e.material.layersList.map((function(e){return e.clone()}))};return void 0!==e.camera&&(this.camera={zoomPersp:e.camera.zoomPersp,zoomOrtho:e.camera.zoomOrtho}),this},e.prototype.clone=function(){return(new e).copy(this)},e.prototype.toJSON=function(e){var t={uuid:this.uuid,name:this.name,position:this.position.toArray(),rotation:this.rotation.toArray(),scale:this.scale.toArray(),hiddenMatrix:this.hiddenMatrix.toArray()};if(void 0!==this.geometry&&(t.geometry={width:this.geometry.width,height:this.geometry.height,depth:this.geometry.depth}),void 0!==this.material)if(this.material instanceof Array){t.material=[];for(var n=0,r=this.material.length;n<r;++n)t.material.push({layersList:this.material[n].layersList.map((function(t){return t.toJSON(e)}))})}else t.material={layersList:this.material.layersList.map((function(t){return t.toJSON(e)}))};return void 0!==this.camera&&(t.camera={zoomPersp:this.camera.zoomPersp,zoomOrtho:this.camera.zoomOrtho}),t},e.prototype.fromJSON=function(e,t){if(this.uuid=e.uuid,this.name=e.name,this.position.fromArray(e.position),this.rotation.fromArray(e.rotation),this.scale.fromArray(e.scale),this.hiddenMatrix.fromArray(e.hiddenMatrix),void 0!==e.geometry&&(this.geometry={width:e.geometry.width,height:e.geometry.height,depth:e.geometry.depth}),void 0!==e.material)if(e.material instanceof Array){this.material=[];for(var n=0,r=e.material.length;n<r;++n)this.material.push({layersList:e.material[n].layersList.map((function(e){return CreateLayerFromJSON(e,t)}))})}else this.material={layersList:e.material.layersList.map((function(e){return CreateLayerFromJSON(e,t)}))};return void 0!==e.camera&&(this.camera={zoomPersp:e.camera.zoomPersp,zoomOrtho:e.camera.zoomOrtho}),this},e}(),defaultInstanceSettings={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0,rewind:!0},defaultTweenSettings={duration:1e3,delay:0,endDelay:0,easing:"easeOutElastic(1, .5)",round:0},validTransforms=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","matrix","matrix3d"],cache={CSS:{},springs:{}};function minMax(e,t,n){return Math.min(Math.max(e,t),n)}function stringContains(e,t){return e.indexOf(t)>-1}function applyArguments(e,t){return e.apply(null,t)}var is={arr:function(e){return Array.isArray(e)},obj:function(e){return stringContains(Object.prototype.toString.call(e),"Object")},pth:function(e){return is.obj(e)&&e.hasOwnProperty("totalLength")},svg:function(e){return e instanceof SVGElement},inp:function(e){return e instanceof HTMLInputElement},dom:function(e){return e.nodeType||is.svg(e)},str:function(e){return"string"==typeof e},fnc:function(e){return"function"==typeof e},und:function(e){return void 0===e},hex:function(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)},rgb:function(e){return/^rgb/.test(e)},hsl:function(e){return/^hsl/.test(e)},col:function(e){return is.hex(e)||is.rgb(e)||is.hsl(e)},key:function(e){return!defaultInstanceSettings.hasOwnProperty(e)&&!defaultTweenSettings.hasOwnProperty(e)&&"targets"!==e&&"keyframes"!==e}};function parseEasingParameters(e){var t=/\(([^)]+)\)/.exec(e);return t?t[1].split(",").map((function(e){return parseFloat(e)})):[]}function spring(e,t){var n=parseEasingParameters(e),r=minMax(is.und(n[0])?1:n[0],.1,100),i=minMax(is.und(n[1])?100:n[1],.1,100),o=minMax(is.und(n[2])?10:n[2],.1,100),a=minMax(is.und(n[3])?0:n[3],.1,100),s=Math.sqrt(i/r),c=o/(2*Math.sqrt(i*r)),u=c<1?s*Math.sqrt(1-c*c):0,l=c<1?(c*s-a)/u:-a+s;function h(e){var n=t?t*e/1e3:e;return n=c<1?Math.exp(-n*c*s)*(1*Math.cos(u*n)+l*Math.sin(u*n)):(1+l*n)*Math.exp(-n*s),0===e||1===e?e:1-n}return t?h:function(){var t=cache.springs[e];if(t)return t;for(var n=1/6,r=0,i=0;;)if(1===h(r+=n)){if(++i>=16)break}else i=0;var o=r*n*1e3;return cache.springs[e]=o,o}}function steps(e){return void 0===e&&(e=10),function(t){return Math.ceil(minMax(t,1e-6,1)*e)*(1/e)}}var bezier=function(){var e=.1;function t(e,t){return 1-3*t+3*e}function n(e,t){return 3*t-6*e}function r(e){return 3*e}function i(e,i,o){return((t(i,o)*e+n(i,o))*e+r(i))*e}function o(e,i,o){return 3*t(i,o)*e*e+2*n(i,o)*e+r(i)}return function(t,n,r,a){if(0<=t&&t<=1&&0<=r&&r<=1){var s=new Float32Array(11);if(t!==n||r!==a)for(var c=0;c<11;++c)s[c]=i(c*e,t,r);return function(e){return t===n&&r===a||0===e||1===e?e:i(u(e),n,a)}}function u(n){for(var a=0,c=1;10!==c&&s[c]<=n;++c)a+=e;--c;var u=a+(n-s[c])/(s[c+1]-s[c])*e,l=o(u,t,r);return l>=.001?function(e,t,n,r){for(var a=0;a<4;++a){var s=o(t,n,r);if(0===s)return t;t-=(i(t,n,r)-e)/s}return t}(n,u,t,r):0===l?u:function(e,t,n,r,o){var a,s,c=0;do{(a=i(s=t+(n-t)/2,r,o)-e)>0?n=s:t=s}while(Math.abs(a)>1e-7&&++c<10);return s}(n,a,a+e,t,r)}}}(),penner=(eases={linear:function(){return function(e){return e}}},functionEasings={Sine:function(){return function(e){return 1-Math.cos(e*Math.PI/2)}},Circ:function(){return function(e){return 1-Math.sqrt(1-e*e)}},Back:function(){return function(e){return e*e*(3*e-2)}},Bounce:function(){return function(e){for(var t,n=4;e<((t=Math.pow(2,--n))-1)/11;);return 1/Math.pow(4,3-n)-7.5625*Math.pow((3*t-2)/22-e,2)}},Elastic:function(e,t){void 0===e&&(e=1),void 0===t&&(t=.5);var n=minMax(e,1,10),r=minMax(t,.1,2);return function(e){return 0===e||1===e?e:-n*Math.pow(2,10*(e-1))*Math.sin((e-1-r/(2*Math.PI)*Math.asin(1/n))*(2*Math.PI)/r)}}},["Quad","Cubic","Quart","Quint","Expo"].forEach((function(e,t){functionEasings[e]=function(){return function(e){return Math.pow(e,t+2)}}})),Object.keys(functionEasings).forEach((function(e){var t=functionEasings[e];eases["easeIn"+e]=t,eases["easeOut"+e]=function(e,n){return function(r){return 1-t(e,n)(1-r)}},eases["easeInOut"+e]=function(e,n){return function(r){return r<.5?t(e,n)(2*r)/2:1-t(e,n)(-2*r+2)/2}}})),eases),eases,functionEasings;function parseEasings(e,t){if(is.fnc(e))return e;var n=e.split("(")[0],r=penner[n],i=parseEasingParameters(e);switch(n){case"spring":return spring(e,t);case"cubicBezier":return applyArguments(bezier,i);case"steps":return applyArguments(steps,i);default:return applyArguments(r,i)}}function selectString(e){try{return document.querySelectorAll(e)}catch(e){return}}function filterArray(e,t){for(var n=e.length,r=arguments.length>=2?arguments[1]:void 0,i=[],o=0;o<n;o++)if(o in e){var a=e[o];t.call(r,a,o,e)&&i.push(a)}return i}function flattenArray(e){return e.reduce((function(e,t){return e.concat(is.arr(t)?flattenArray(t):t)}),[])}function toArray(e){return is.arr(e)?e:(is.str(e)&&(e=selectString(e)||e),e instanceof NodeList||e instanceof HTMLCollection?[].slice.call(e):[e])}function arrayContains(e,t){return e.some((function(e){return e===t}))}function cloneObject(e){var t={};for(var n in e)t[n]=e[n];return t}function replaceObjectProps(e,t){var n=cloneObject(e);for(var r in e)n[r]=t.hasOwnProperty(r)?t[r]:e[r];return n}function mergeObjects(e,t){var n=cloneObject(e);for(var r in t)n[r]=is.und(e[r])?t[r]:e[r];return n}function rgbToRgba(e){var t=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(e);return t?"rgba("+t[1]+",1)":e}function hexToRgba(e){var t=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(e,t,n,r){return t+t+n+n+r+r})),n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return"rgba("+parseInt(n[1],16)+","+parseInt(n[2],16)+","+parseInt(n[3],16)+",1)"}function hslToRgba(e){var t,n,r,i=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(e)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(e),o=parseInt(i[1],10)/360,a=parseInt(i[2],10)/100,s=parseInt(i[3],10)/100,c=i[4]||1;function u(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}if(0==a)t=n=r=s;else{var l=s<.5?s*(1+a):s+a-s*a,h=2*s-l;t=u(h,l,o+1/3),n=u(h,l,o),r=u(h,l,o-1/3)}return"rgba("+255*t+","+255*n+","+255*r+","+c+")"}function colorToRgb(e){return is.rgb(e)?rgbToRgba(e):is.hex(e)?hexToRgba(e):is.hsl(e)?hslToRgba(e):void 0}function getUnit(e){var t=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(e);if(t)return t[1]}function getTransformUnit(e){return stringContains(e,"translate")||"perspective"===e?"px":stringContains(e,"rotate")||stringContains(e,"skew")?"deg":void 0}function getFunctionValue(e,t){return is.fnc(e)?e(t.target,t.id,t.total):e}function getAttribute(e,t){return e.getAttribute(t)}function convertPxToUnit(e,t,n){if(arrayContains([n,"deg","rad","turn"],getUnit(t)))return t;var r=cache.CSS[t+n];if(!is.und(r))return r;var i=document.createElement(e.tagName),o=e.parentNode&&e.parentNode!==document?e.parentNode:document.body;o.appendChild(i),i.style.position="absolute",i.style.width=100+n;var a=100/i.offsetWidth;o.removeChild(i);var s=a*parseFloat(t);return cache.CSS[t+n]=s,s}function getCSSValue(e,t,n){if(t in e.style){var r=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),i=e.style[t]||getComputedStyle(e).getPropertyValue(r)||"0";return n?convertPxToUnit(e,i,n):i}}function getAnimationType(e,t){return is.dom(e)&&!is.inp(e)&&(getAttribute(e,t)||is.svg(e)&&e[t])?"attribute":is.dom(e)&&arrayContains(validTransforms,t)?"transform":is.dom(e)&&"transform"!==t&&getCSSValue(e,t)?"css":null!=e[t]?"object":void 0}function getElementTransforms(e){if(is.dom(e)){for(var t,n=e.style.transform||"",r=/(\w+)\(([^)]*)\)/g,i=new Map;t=r.exec(n);)i.set(t[1],t[2]);return i}}function getTransformValue(e,t,n,r){var i=stringContains(t,"scale")?1:0+getTransformUnit(t),o=getElementTransforms(e).get(t)||i;return n&&(n.transforms.list.set(t,o),n.transforms.last=t),r?convertPxToUnit(e,o,r):o}function getOriginalTargetValue(e,t,n,r){switch(getAnimationType(e,t)){case"transform":return getTransformValue(e,t,r,n);case"css":return getCSSValue(e,t,n);case"attribute":return getAttribute(e,t);default:return e[t]||0}}function getRelativeValue(e,t){var n=/^(\*=|\+=|-=)/.exec(e);if(!n)return e;var r=getUnit(e)||0,i=parseFloat(t),o=parseFloat(e.replace(n[0],""));switch(n[0][0]){case"+":return i+o+r;case"-":return i-o+r;case"*":return i*o+r}}function validateValue(e,t){if(is.col(e))return colorToRgb(e);if(/\s/g.test(e))return e;var n=getUnit(e),r=n?e.substr(0,e.length-n.length):e;return t?r+t:r}function getDistance(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function getCircleLength(e){return 2*Math.PI*getAttribute(e,"r")}function getRectLength(e){return 2*getAttribute(e,"width")+2*getAttribute(e,"height")}function getLineLength(e){return getDistance({x:getAttribute(e,"x1"),y:getAttribute(e,"y1")},{x:getAttribute(e,"x2"),y:getAttribute(e,"y2")})}function getPolylineLength(e){for(var t,n=e.points,r=0,i=0;i<n.numberOfItems;i++){var o=n.getItem(i);i>0&&(r+=getDistance(t,o)),t=o}return r}function getPolygonLength(e){var t=e.points;return getPolylineLength(e)+getDistance(t.getItem(t.numberOfItems-1),t.getItem(0))}function getTotalLength(e){if(e.getTotalLength)return e.getTotalLength();switch(e.tagName.toLowerCase()){case"circle":return getCircleLength(e);case"rect":return getRectLength(e);case"line":return getLineLength(e);case"polyline":return getPolylineLength(e);case"polygon":return getPolygonLength(e)}}function setDashoffset(e){var t=getTotalLength(e);return e.setAttribute("stroke-dasharray",t),t}function getParentSvgEl(e){for(var t=e.parentNode;is.svg(t)&&is.svg(t.parentNode);)t=t.parentNode;return t}function getParentSvg(e,t){var n=t||{},r=n.el||getParentSvgEl(e),i=r.getBoundingClientRect(),o=getAttribute(r,"viewBox"),a=i.width,s=i.height,c=n.viewBox||(o?o.split(" "):[0,0,a,s]);return{el:r,viewBox:c,x:c[0]/1,y:c[1]/1,w:a/c[2],h:s/c[3]}}function getPath(e,t){var n=is.str(e)?selectString(e)[0]:e,r=t||100;return function(e){return{property:e,el:n,svg:getParentSvg(n),totalLength:getTotalLength(n)*(r/100)}}}function getPathProgress(e,t){function n(n){void 0===n&&(n=0);var r=t+n>=1?t+n:0;return e.el.getPointAtLength(r)}var r=getParentSvg(e.el,e.svg),i=n(),o=n(-1),a=n(1);switch(e.property){case"x":return(i.x-r.x)*r.w;case"y":return(i.y-r.y)*r.h;case"angle":return 180*Math.atan2(a.y-o.y,a.x-o.x)/Math.PI}}function decomposeValue(e,t){var n=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,r=validateValue(is.pth(e)?e.totalLength:e,t)+"";return{original:r,numbers:r.match(n)?r.match(n).map(Number):[0],strings:is.str(e)||t?r.split(n):[]}}function parseTargets(e){return filterArray(e?flattenArray(is.arr(e)?e.map(toArray):toArray(e)):[],(function(e,t,n){return n.indexOf(e)===t}))}function getAnimatables(e){var t=parseTargets(e);return t.map((function(e,n){return{target:e,id:n,total:t.length,transforms:{list:getElementTransforms(e)}}}))}function normalizePropertyTweens(e,t){var n=cloneObject(t);if(/^spring/.test(n.easing)&&(n.duration=spring(n.easing)),is.arr(e)){var r=e.length;2!==r||is.obj(e[0])?is.fnc(t.duration)||(n.duration=t.duration/r):e={value:e}}var i=is.arr(e)?e:[e];return i.map((function(e,n){var r=is.obj(e)&&!is.pth(e)?e:{value:e};return is.und(r.delay)&&(r.delay=n?0:t.delay),is.und(r.endDelay)&&(r.endDelay=n===i.length-1?t.endDelay:0),r})).map((function(e){return mergeObjects(e,n)}))}function flattenKeyframes(e){for(var t=filterArray(flattenArray(e.map((function(e){return Object.keys(e)}))),(function(e){return is.key(e)})).reduce((function(e,t){return e.indexOf(t)<0&&e.push(t),e}),[]),n={},r=function(r){var i=t[r];n[i]=e.map((function(e){var t={};for(var n in e)is.key(n)?n==i&&(t.value=e[n]):t[n]=e[n];return t}))},i=0;i<t.length;i++)r(i);return n}function getProperties(e,t){var n=[],r=t.keyframes;for(var i in r&&(t=mergeObjects(flattenKeyframes(r),t)),t)is.key(i)&&n.push({name:i,tweens:normalizePropertyTweens(t[i],e)});return n}function normalizeTweenValues(e,t){var n={};for(var r in e){var i=getFunctionValue(e[r],t);is.arr(i)&&1===(i=i.map((function(e){return getFunctionValue(e,t)}))).length&&(i=i[0]),n[r]=i}return n.duration=parseFloat(n.duration),n.delay=parseFloat(n.delay),n}function normalizeTweens(e,t){var n;return e.tweens.map((function(r){var i=normalizeTweenValues(r,t),o=i.value,a=is.arr(o)?o[1]:o,s=getUnit(a),c=getOriginalTargetValue(t.target,e.name,s,t),u=n?n.to.original:c,l=is.arr(o)?o[0]:u,h=getUnit(l)||getUnit(c),f=s||h;return is.und(a)&&(a=u),i.from=decomposeValue(l,f),i.to=decomposeValue(getRelativeValue(a,l),f),i.start=n?n.end:0,i.end=i.start+i.delay+i.duration+i.endDelay,i.easing=parseEasings(i.easing,i.duration),i.isPath=is.pth(o),i.isColor=is.col(i.from.original),i.isColor&&(i.round=1),n=i,i}))}var setProgressValue={css:function(e,t,n){return e.style[t]=n},attribute:function(e,t,n){return e.setAttribute(t,n)},object:function(e,t,n){return e[t]=n},transform:function(e,t,n,r,i){if(r.list.set(t,n),t===r.last||i){var o="";r.list.forEach((function(e,t){o+=t+"("+e+") "})),e.style.transform=o}}};function setTargetsValue(e,t){getAnimatables(e).forEach((function(e){for(var n in t){var r=getFunctionValue(t[n],e),i=e.target,o=getUnit(r),a=getOriginalTargetValue(i,n,o,e),s=getRelativeValue(validateValue(r,o||getUnit(a)),a),c=getAnimationType(i,n);setProgressValue[c](i,n,s,e.transforms,!0)}}))}function createAnimation(e,t){var n=getAnimationType(e.target,t.name);if(n){var r=normalizeTweens(t,e),i=r[r.length-1];return{type:n,property:t.name,animatable:e,tweens:r,duration:i.end,delay:r[0].delay,endDelay:i.endDelay}}}function getAnimations(e,t){return filterArray(flattenArray(e.map((function(e){return t.map((function(t){return createAnimation(e,t)}))}))),(function(e){return!is.und(e)}))}function getInstanceTimings(e,t){var n=e.length,r=function(e){return e.timelineOffset?e.timelineOffset:0},i={};return i.duration=n?Math.max.apply(Math,e.map((function(e){return r(e)+e.duration}))):t.duration,i.delay=n?Math.min.apply(Math,e.map((function(e){return r(e)+e.delay}))):t.delay,i.endDelay=n?i.duration-Math.max.apply(Math,e.map((function(e){return r(e)+e.duration-e.endDelay}))):t.endDelay,i}var instanceID=0;function createNewInstance(e){var t=replaceObjectProps(defaultInstanceSettings,e),n=replaceObjectProps(defaultTweenSettings,e),r=getProperties(n,e),i=getAnimatables(e.targets),o=getAnimations(i,r),a=getInstanceTimings(o,n),s=instanceID;return instanceID++,mergeObjects(t,{id:s,children:[],animatables:i,animations:o,duration:a.duration,delay:a.delay,endDelay:a.endDelay})}var activeInstances=[],pausedInstances=[],raf,engine=function(){function e(){raf=requestAnimationFrame(t)}function t(t){var n=activeInstances.length;if(n){for(var r=0;r<n;){var i=activeInstances[r];if(i.paused){var o=activeInstances.indexOf(i);o>-1&&(activeInstances.splice(o,1),n=activeInstances.length)}else i.tick(t);r++}e()}else raf=cancelAnimationFrame(raf)}return e}();function handleVisibilityChange(){document.hidden?(activeInstances.forEach((function(e){return e.pause()})),pausedInstances=activeInstances.slice(0),anime.running=activeInstances=[]):pausedInstances.forEach((function(e){return e.play()}))}function anime(e){void 0===e&&(e={});var t,n=0,r=0,i=0,o=0,a=null;function s(e){var t=window.Promise&&new Promise((function(e){return a=e}));return e.finished=t,t}var c=createNewInstance(e);function u(){var e=c.direction;"alternate"!==e&&(c.direction="normal"!==e?"normal":"reverse"),c.reversed=!c.reversed,t.forEach((function(e){return e.reversed=c.reversed}))}function l(e){return c.reversed?c.duration-e:e}function h(){n=0,r=l(c.currentTime)*(1/anime.speed)}function f(e,t){t&&t.seek(e-t.timelineOffset)}function d(e){var t=0,n=c.animations,r=n.length;for(!0===c.reversePlayback&&!1===c.rewind&&(e=c.duration-e);t<r;){var i=n[t],o=i.animatable,a=i.tweens,s=a.length-1,u=a[s];s&&(u=filterArray(a,(function(t){return e<t.end}))[0]||u);for(var l=minMax(e-u.start-u.delay,0,u.duration)/u.duration,h=isNaN(l)?1:u.easing(l),f=u.to.strings,d=u.round,p=[],m=u.to.numbers.length,v=void 0,g=0;g<m;g++){var y=void 0;if(!0===c.reversePlayback&&!1===c.rewind)var b=u.to.numbers[g],w=u.from.numbers[g]||0;else w=u.to.numbers[g],b=u.from.numbers[g]||0;y=u.isPath?getPathProgress(u.value,h*w):b+h*(w-b),d&&(u.isColor&&g>2||(y=Math.round(y*d)/d)),p.push(y)}var E=f.length;if(E){v=f[0];for(var x=0;x<E;x++){f[x];var _=f[x+1],T=p[x];isNaN(T)||(v+=_?T+_:T+" ")}}else v=p[0];setProgressValue[i.type](o.target,i.property,v,o.transforms),i.currentValue=v,t++}}function p(e){c[e]&&!c.passThrough&&c[e](c)}function m(e){var h=c.duration,m=c.delay,v=h-c.endDelay,g=l(e);c.progress=minMax(g/h*100,0,100),c.reversePlayback=g<c.currentTime,t&&function(e){if(c.reversePlayback)for(var n=o;n--;)f(e,t[n]);else for(var r=0;r<o;r++)f(e,t[r])}(g),!c.began&&c.currentTime>0&&(c.began=!0,p("begin")),!c.loopBegan&&c.currentTime>0&&(c.loopBegan=!0,p("loopBegin")),g<=m&&0!==c.currentTime&&d(0),(g>=v&&c.currentTime!==h||!h)&&d(h),g>m&&g<v?(c.changeBegan||(c.changeBegan=!0,c.changeCompleted=!1,p("changeBegin")),p("change"),d(g)):c.changeBegan&&(c.changeCompleted=!0,c.changeBegan=!1,p("changeComplete")),c.currentTime=minMax(g,0,h),c.began&&p("update"),e>=h&&(r=0,c.remaining&&!0!==c.remaining&&c.remaining--,c.remaining?(n=i,p("loopComplete"),c.loopBegan=!1,"alternate"===c.direction&&u()):(c.paused=!0,c.completed||(c.completed=!0,p("loopComplete"),p("complete"),!c.passThrough&&"Promise"in window&&(a(),s(c)))))}return s(c),c.reset=function(){var e=c.direction;c.passThrough=!1,c.currentTime=0,c.progress=0,c.paused=!0,c.began=!1,c.loopBegan=!1,c.changeBegan=!1,c.completed=!1,c.changeCompleted=!1,c.reversePlayback=!1,c.reversed="reverse"===e,c.remaining=c.loop,t=c.children;for(var n=o=t.length;n--;)c.children[n].reset();(c.reversed&&!0!==c.loop||"alternate"===e&&1===c.loop)&&c.remaining++,d(c.reversed?c.duration:0)},c.set=function(e,t){return setTargetsValue(e,t),c},c.tick=function(e){i=e,n||(n=i),m((i+(r-n))*anime.speed)},c.seek=function(e){m(l(e))},c.pause=function(){c.paused=!0,h()},c.play=function(){c.paused&&(c.completed&&c.reset(),c.paused=!1,activeInstances.push(c),h(),raf||engine())},c.reverse=function(){u(),c.completed=!c.reversed,h()},c.restart=function(){c.reset(),c.play()},c.reset(),c.autoplay&&c.play(),c}function removeTargetsFromAnimations(e,t){for(var n=t.length;n--;)arrayContains(e,t[n].animatable.target)&&t.splice(n,1)}function removeTargets(e){for(var t=parseTargets(e),n=activeInstances.length;n--;){var r=activeInstances[n],i=r.animations,o=r.children;removeTargetsFromAnimations(t,i);for(var a=o.length;a--;){var s=o[a],c=s.animations;removeTargetsFromAnimations(t,c),c.length||s.children.length||o.splice(a,1)}i.length||o.length||r.pause()}}function stagger(e,t){void 0===t&&(t={});var n=t.direction||"normal",r=t.easing?parseEasings(t.easing):null,i=t.grid,o=t.axis,a=t.from||0,s="first"===a,c="center"===a,u="last"===a,l=is.arr(e),h=l?parseFloat(e[0]):parseFloat(e),f=l?parseFloat(e[1]):0,d=getUnit(l?e[1]:e)||0,p=t.start||0+(l?h:0),m=[],v=0;return function(e,t,g){if(s&&(a=0),c&&(a=(g-1)/2),u&&(a=g-1),!m.length){for(var y=0;y<g;y++){if(i){var b=c?(i[0]-1)/2:a%i[0],w=c?(i[1]-1)/2:Math.floor(a/i[0]),E=b-y%i[0],x=w-Math.floor(y/i[0]),_=Math.sqrt(E*E+x*x);"x"===o&&(_=-E),"y"===o&&(_=-x),m.push(_)}else m.push(Math.abs(a-y));v=Math.max.apply(Math,m)}r&&(m=m.map((function(e){return r(e/v)*v}))),"reverse"===n&&(m=m.map((function(e){return o?e<0?-1*e:-e:Math.abs(v-e)})))}return p+(l?(f-h)/v:h)*(Math.round(100*m[t])/100)+d}}function timeline(e){void 0===e&&(e={});var t=anime(e);return t.duration=0,t.add=function(n,r){var i=activeInstances.indexOf(t),o=t.children;function a(e){e.passThrough=!0}i>-1&&activeInstances.splice(i,1);for(var s=0;s<o.length;s++)a(o[s]);var c=mergeObjects(n,replaceObjectProps(defaultTweenSettings,e));c.targets=c.targets||e.targets;var u=t.duration;c.autoplay=!1,c.direction=t.direction,c.timelineOffset=is.und(r)?u:getRelativeValue(r,u),a(t),c.rewind=t.rewind,t.seek(c.timelineOffset);var l=anime(c);a(l),o.push(l);var h=getInstanceTimings(o,e);return t.delay=h.delay,t.endDelay=h.endDelay,t.duration=h.duration,t.seek(0),t.reset(),t.autoplay&&t.play(),t},t}"undefined"!=typeof document&&document.addEventListener("visibilitychange",handleVisibilityChange),anime.version="3.2.0",anime.speed=1,anime.running=activeInstances,anime.remove=removeTargets,anime.get=getOriginalTargetValue,anime.set=setTargetsValue,anime.convertPx=convertPxToUnit,anime.path=getPath,anime.setDashoffset=setDashoffset,anime.stagger=stagger,anime.timeline=timeline,anime.easing=parseEasings,anime.penner=penner,anime.random=function(e,t){return Math.floor(Math.random()*(t-e+1))+e};var InteractionStatesManager=function(){function e(e){this.i=e}return e.prototype.updateObject=function(){void 0!==this.i.selectedState&&this.i.states[this.i.selectedState].updateMatrix(this.i.object)},e.prototype.updateCamera=function(){void 0!==this.i.selectedState&&"CombinedCamera"===this.i.object.objectType&&(this.i.states[this.i.selectedState].updateMatrix(this.i.object),this.i.states[this.i.selectedState].updateCamera(this.i.object))},e.prototype.updateGeometry=function(){void 0!==this.i.selectedState&&!1!==isMeshEntity(this.i.object)&&(this.i.states[this.i.selectedState].updateMatrix(this.i.object),this.i.states[this.i.selectedState].updateGeometry(this.i.object))},e.prototype.updateSceneGraph=function(e,t){var n=new THREE.Matrix4,r=new THREE.Matrix4;e.updateWorldMatrix(!0,!1),r.getInverse(e.matrixWorld);for(var i=0,o=this.i.states.length;i<o;++i){var a=this.i.states[i];n.copy(r),null!==this.i.object.parent&&(this.i.object.parent.updateWorldMatrix(!0,!1),n.multiply(this.i.object.parent.matrixWorld)),a.hiddenMatrix.premultiply(n)}},e.prototype.updateMaterialLayer=function(e){if(void 0!==this.i.selectedState&&!1!==isMeshEntity(this.i.object)){var t=this.i.object.selectedMaterial,n=this.i.states[this.i.selectedState],r=(void 0!==t?n.material[t]:n.material).layersList.find((function(t){return t.id===e.id}));null==r||r.copy(e)}},e.prototype.pushMaterialLayer=function(e){if(0!==this.i.states.length&&!1!==isMeshEntity(this.i.object)){var t=this.i.object;if(t.material instanceof Array){var n=t.selectedMaterial;if(void 0!==n)for(var r=0,i=this.i.states.length;r<i;++r){var o=e.clone();this.i.selectedState!==r&&(o.uniforms["f"+o.id+"_alpha"].value=0),this.i.states[r].material[n].layersList.push(o)}}else for(r=0,i=this.i.states.length;r<i;++r)o=e.clone(),this.i.selectedState!==r&&(o.uniforms["f"+o.id+"_alpha"].value=0),this.i.states[r].material.layersList.push(o)}},e.prototype.popMaterialLayer=function(){if(0!==this.i.states.length&&!1!==isMeshEntity(this.i.object)){var e=this.i.object;if(e.material instanceof Array){var t=e.selectedMaterial;if(void 0!==t)for(var n=0,r=this.i.states.length;n<r;++n)this.i.states[n].material[t].layersList.pop()}else for(n=0,r=this.i.states.length;n<r;++n)this.i.states[n].material.layersList.pop()}},e.prototype.removeMaterialLayer=function(e){if(0===this.i.states.length||!1===isMeshEntity(this.i.object))return null;var t=this.i.object,n=[];if(t.material instanceof Array)for(var r=0,i=this.i.states.length;r<i;++r){var o=t.selectedMaterial;if(void 0!==o){var a=this.i.states[r].material[o];n.push({layer:a.layersList[e]}),a.layersList.splice(e,1)}}else for(r=0,i=this.i.states.length;r<i;++r)a=this.i.states[r].material,n.push({layer:a.layersList[e]}),a.layersList.splice(e,1);return{states:n,pos:e}},e.prototype.restoreMaterialLayerRemoved=function(e){if(0!==this.i.states.length&&!1!==isMeshEntity(this.i.object)){var t=this.i.object;if(t.material instanceof Array)for(var n=0,r=this.i.states.length;n<r;++n){var i=t.selectedMaterial;void 0!==i&&this.i.states[n].material[i].layersList.splice(e.pos,0,e.states[n].layer)}else for(n=0,r=this.i.states.length;n<r;++n)this.i.states[n].material.layersList.splice(e.pos,0,e.states[n].layer)}},e.prototype.changeMaterialLayer=function(e){if(0===this.i.states.length||!1===isMeshEntity(this.i.object))return null;var t=this.i.object,n=[],r=0;if(t.material instanceof Array){var i=t.selectedMaterial;if(void 0!==i){for(var o=0,a=(u=this.i.states[Number(this.i.selectedState)].material[i].layersList).length;o<a;++o)if(u[o].id===e.id){r=o;break}for(o=0,a=this.i.states.length;o<a;++o){var s=this.i.states[o].material[i].layersList[r],c=e.clone();this.i.selectedState!==o&&(c.uniforms["f"+c.id+"_alpha"].value=Number(s.uniforms["f"+s.id+"_alpha"].value)),this.i.states[o].material[i].layersList[r]=c,n.push({layer:s})}}}else{var u;for(o=0,a=(u=this.i.states[Number(this.i.selectedState)].material.layersList).length;o<a;++o)if(u[o].id===e.id){r=o;break}for(o=0,a=this.i.states.length;o<a;++o)s=this.i.states[o].material.layersList[r],c=e.clone(),this.i.selectedState!==o&&(c.uniforms["f"+c.id+"_alpha"].value=Number(s.uniforms["f"+s.id+"_alpha"].value)),this.i.states[o].material.layersList[r]=c,n.push({layer:s})}return{states:n,pos:r}},e.prototype.restoreMaterialLayerChanged=function(e){if(0!==this.i.states.length&&!1!==isMeshEntity(this.i.object)){var t=this.i.object;if(t.material instanceof Array){var n=t.selectedMaterial;if(void 0!==n)for(var r=0,i=this.i.states.length;r<i;++r)this.i.states[r].material[n].layersList[e.pos]=e.states[r].layer}else for(r=0,i=this.i.states.length;r<i;++r)this.i.states[r].material.layersList[e.pos]=e.states[r].layer}},e.prototype.moveMaterialLayer=function(e,t){if(0!==this.i.states.length&&!1!==isMeshEntity(this.i.object)){var n=this.i.object;if(n.material instanceof Array){var r=n.selectedMaterial;if(void 0!==r)for(var i=0,o=this.i.states.length;i<o;++i){var a=(s=this.i.states[i].material[r].layersList)[e];s[e]=s[t],s[t]=a}}else for(i=0,o=this.i.states.length;i<o;++i){var s;a=(s=this.i.states[i].material.layersList)[e],s[e]=s[t],s[t]=a}}},e.prototype.restoreMaterialLayerMoved=function(e,t){this.moveMaterialLayer(e,t)},e.prototype.setMaterialLayers=function(e){var t=this.i.object,n=[];if(t.material instanceof Array){var r=t.selectedMaterial;if(void 0!==r)for(var i=0,o=this.i.states.length;i<o;++i){var a=this.i.states[i].material[r];n.push({layersList:a.layersList});var s=e.head;for(a.layersList=[];void 0!==s;)a.layersList.push(s.clone()),s=s.next}}else for(i=0,o=this.i.states.length;i<o;++i)for(a=this.i.states[i].material,n.push({layersList:a.layersList}),s=e.head,a.layersList=[];void 0!==s;)a.layersList.push(s.clone()),s=s.next;return{states:n}},e.prototype.restoreMaterialLayersSet=function(e){var t=this.i.object;if(t.material instanceof Array){var n=t.selectedMaterial;if(void 0!==n)for(var r=0,i=this.i.states.length;r<i;++r)this.i.states[r].material[n].layersList=e.states[r].layersList}else for(r=0,i=this.i.states.length;r<i;++r)this.i.states[r].material.layersList=e.states[r].layersList},e}();function serialize(e,t,n){return void 0===e[t.uuid]&&(e[t.uuid]=t.toJSON(n)),t.uuid}function serializeGeometry(e,t){if(void 0===e[t.uuid])if("NonParametricGeometry"===t.userData.type){var n=t.originalGeometry;if(void 0!==n){var r=t.userData;(t=n).userData=r}e[t.uuid]=t.toJSON()}else{if("VectorGeometry"===(r=t.userData).type){var i=t.userData.shape;r=Object.assign({},r,{shape:i.toJSON()})}e[t.uuid]={uuid:t.uuid,userData:r}}return t.uuid}function extractFromCache(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}var Interaction=function(){function e(e){this.object=e,this.uuid=THREE.MathUtils.generateUUID(),this.states=[],this.events=[],this.statesManager=new InteractionStatesManager(this)}return e.prototype.computeCache=function(){return this.cache={mouseDown:this.events.find((function(e){return e.type===INTERACTION_EVENT.MOUSE_DOWN})),mouseUp:this.events.find((function(e){return e.type===INTERACTION_EVENT.MOUSE_UP})),mouseHover:this.events.find((function(e){return e.type===INTERACTION_EVENT.MOUSE_HOVER})),start:this.events.find((function(e){return e.type===INTERACTION_EVENT.START})),lookAt:this.events.find((function(e){return e.type===INTERACTION_EVENT.LOOK_AT})),follow:this.events.find((function(e){return e.type===INTERACTION_EVENT.FOLLOW})),keyDown:this.events.filter((function(e){return e.type===INTERACTION_EVENT.KEY_DOWN})),keyUp:this.events.filter((function(e){return e.type===INTERACTION_EVENT.KEY_UP}))},this.cache},e.prototype.newState=function(e){var t=new InteractionState;return t.name=e,t.update(this.object),this.selectedState=this.states.length,this.states.push(t),t},e.prototype.addState=function(e,t){this.states.splice(t,0,e)},e.prototype.removeState=function(e){this.selectedState===e&&(this.selectedState=void 0),this.states.splice(e,1)},e.prototype.selectState=function(e){void 0!==e&&this.states[e].execute(this.object),this.selectedState=e},e.prototype.hasEventType=function(e,t){return e===INTERACTION_EVENT.KEY_DOWN||e===INTERACTION_EVENT.KEY_UP?void 0!==t&&this.events.some((function(n){return n.type===e&&n.key===t})):this.events.some((function(t){return t.type===e}))},e.prototype.newEvent=function(){var e=this,t=[INTERACTION_EVENT.MOUSE_DOWN,INTERACTION_EVENT.MOUSE_UP,INTERACTION_EVENT.MOUSE_HOVER,INTERACTION_EVENT.KEY_DOWN].find((function(t){return!1===e.hasEventType(t)})),n=new InteractionEvent(t);return this.events.push(n),n},e.prototype.addEvent=function(e,t){this.events.splice(t,0,e);for(var n=this.events[t].targets,r=0,i=n.length;r<i;++r)void 0!==n[r].object&&interactionTargets.add(n[r])},e.prototype.removeEvent=function(e){for(var t=this.events[e].targets,n=0,r=t.length;n<r;++n)void 0!==t[n].object&&interactionTargets.delete(t[n]);this.events.splice(e,1)},e.prototype.copy=function(e){this.selectedState=e.selectedState;for(var t=0,n=e.states.length;t<n;++t)this.addState(e.states[t].clone(),t);for(t=0,n=e.events.length;t<n;++t){this.addEvent(e.events[t].clone(),t);for(var r=e.events[t].targets,i=0,o=r.length;i<o;++i){var a=r[i].clone();r[i].object===e.object?(a.object=this.object,a.state=this.states[e.states.indexOf(r[i].state)]):(a.object=r[i].object,a.state=r[i].state),this.events[t].addTarget(a,i)}}return this},e.prototype.clone=function(t){return new e(t).copy(this)},e.prototype.toJSON=function(e){void 0===e&&(e={geometries:{},materials:{},textures:{},images:{},interactionStates:{}});var t={uuid:this.uuid};if(void 0!==this.selectedState&&(t.selectedState=this.selectedState),this.states.length>0){t.states=[];for(var n=0,r=this.states.length;n<r;++n)t.states.push(serialize(e.interactionStates,this.states[n],e))}if(this.events.length>0)for(t.events=[],n=0,r=this.events.length;n<r;++n)t.events.push(this.events[n].toJSON());return t},e.prototype.fromJSON=function(e,t,n){if(this.uuid=e.uuid,this.selectedState=e.selectedState,this.states=[],this.events=[],void 0!==e.states)for(var r=0,i=e.states.length;r<i;++r)this.states.push(n[e.states[r]]);if(void 0!==e.events)for(r=0,i=e.events.length;r<i;++r)this.events.push((new InteractionEvent).fromJSON(e.events[r],t,n));return this},e.prototype.start=function(){void 0!==this._animation&&(this._animation.pause(),this._animation=void 0,this._removeBackLayer()),this.states.length>1?(this.states[0].execute(this.object),this._currentState=this.states[0],this._prevState=void 0):void 0!==this._state0?this._state0.execute(this.object):this.events.some((function(e){return e.type===INTERACTION_EVENT.LOOK_AT||e.type===INTERACTION_EVENT.FOLLOW}))&&(this._state0=new InteractionState,this._state0.update(this.object))},e.prototype.end=function(){var e;void 0!==this._animation&&(this._animation.pause(),this._animation=void 0,this._removeBackLayer()),this.states.length>1?this.states[null!==(e=this.selectedState)&&void 0!==e?e:0].execute(this.object):void 0!==this._state0&&(this._state0.execute(this.object),this._state0=void 0),this._currentState=void 0,this._prevState=void 0},e.prototype.lookAt=function(e){this.object.lookAt(e)},e.prototype.follow=function(e){this.object.position.copy(e),null!==this.object.parent&&this.object.position.applyMatrix4((new THREE.Matrix4).getInverse(this.object.parent.matrixWorld)),this.object.position.applyMatrix4((new THREE.Matrix4).getInverse(this.object.hiddenMatrix))},e.prototype.play=function(e){this.object.visible&&void 0!==e.state&&this.animate(e.state,e)},e.prototype.reverse=function(e){this.object.visible&&void 0!==this._prevState&&this.animate(this._prevState,e)},e.prototype._removeBackLayer=function(){if("material"in this.object){var e,t=this.object.material;if(t instanceof Array)for(var n=0,r=t.length;n<r;++n)for(var i=(e=t[n].layersList).head;i;)if(i.backLayer){delete i.backLayer;var o=i.next;e.removeLayer(i.id),i=o}else i.isBack?(delete i.isBack,i=i.next):i=i.next;else for(i=(e=t.layersList).head;i;)for(;i;)i.backLayer?(delete i.backLayer,o=i.next,e.removeLayer(i.id),i=o):i.isBack?(delete i.isBack,i=i.next):i=i.next}},e.prototype.getTimingFunction=function(e,t,n){switch(e){case INTERACTION_EASING.LINEAR:return"cubicBezier( 0, 0, 1, 1 )";case INTERACTION_EASING.EASE:return"cubicBezier( .25, .1, .25, 1 )";case INTERACTION_EASING.EASE_IN:return"cubicBezier( .42, 0, 1, 1 )";case INTERACTION_EASING.EASE_OUT:return"cubicBezier( 0, 0, .58, 1 )";case INTERACTION_EASING.EASE_IN_OUT:return"cubicBezier( .42, 0, .58, 1 )";case INTERACTION_EASING.CUBIC:return"cubicBezier( "+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+" )";case INTERACTION_EASING.SPRING:return"spring( "+n.mass+", "+n.stiffness+", "+n.damping+", "+n.velocity+" )"}},e.prototype.animate=function(e,t){var n,r,i,o,a,s,c=this;if(this._currentState===e){if(null===(n=this._animation)||void 0===n?void 0:n.reversed){var u=null!==(i=null===(r=this._animation)||void 0===r?void 0:r.currentTime)&&void 0!==i?i:0;null===(o=this._animation)||void 0===o||o.reset(),null===(a=this._animation)||void 0===a||a.seek(u),null===(s=this._animation)||void 0===s||s.play()}}else this._prevState=this._currentState,this._currentState=e,void 0!==this._animation&&this._animation.pause(),this._removeBackLayer(),!0===t.cycle&&!0===t.repeat?this._animation=anime.timeline({duration:t.duration,delay:t.delay/2,endDelay:t.delay/2,direction:"alternate",loop:!0,rewind:t.rewind,easing:this.getTimingFunction(t.easing,t.cubicControls,t.springParameters)}):!0===t.cycle&&!1===t.repeat?this._animation=anime.timeline({duration:t.duration,delay:t.delay,endDelay:t.delay/2,direction:"alternate",rewind:t.rewind,easing:this.getTimingFunction(t.easing,t.cubicControls,t.springParameters)}):!1===t.cycle&&!0===t.repeat?this._animation=anime.timeline({duration:t.duration,delay:t.delay,direction:"normal",loop:!0,easing:this.getTimingFunction(t.easing,t.cubicControls,t.springParameters)}):this._animation=anime.timeline({duration:t.duration,delay:t.delay,direction:"normal",easing:this.getTimingFunction(t.easing,t.cubicControls,t.springParameters)}),this._animation.finished.then((function(){c._removeBackLayer()}),(function(){})),this.animateMatrix(e),this.animateGeometry(e),this.animateMaterial(e),this.animateCamera(e)},e.prototype.animateMatrix=function(e){var t,n,r,i,o=this;if(!1===this.object.position.equals(e.position)){var a=this.object.position.clone(),s={t:0};null===(t=this._animation)||void 0===t||t.add({targets:s,t:1,update:function(){o.object.position.lerpVectors(a,e.position,s.t)}},0)}if(!1===this.object.scale.equals(e.scale)){var c=this.object.scale.clone(),u={t:0};null===(n=this._animation)||void 0===n||n.add({targets:u,t:1,update:function(){o.object.scale.lerpVectors(c,e.scale,u.t)}},0)}if(!1===this.object.rotation.equals(e.rotation)){var l=this.object.quaternion.clone(),h={t:0},f={x:this.object.rotation.x-e.rotation.x,y:this.object.rotation.y-e.rotation.y,z:this.object.rotation.z-e.rotation.z},d=e.rotation.clone(),p=.01*THREE.MathUtils.DEG2RAD,m=359.99*THREE.MathUtils.DEG2RAD;f.x===2*Math.PI?0===d.x?d.x=p:d.x===2*Math.PI&&(d.x=m):f.x===2*-Math.PI&&(0===d.x?d.x=-p:d.x===2*Math.PI&&(d.x=-m)),f.y===2*Math.PI?0===d.y?d.y=p:d.y===2*Math.PI&&(d.y=m):f.y===2*-Math.PI&&(0===d.y?d.y=-p:d.y===2*Math.PI&&(d.y=-m)),f.z===2*Math.PI?0===d.z?d.z=p:d.z===2*Math.PI&&(d.z=m):f.z===2*-Math.PI&&(0===d.z?d.z=-p:d.z===2*Math.PI&&(d.z=-m));var v=(new THREE.Quaternion).setFromEuler(d);null===(r=this._animation)||void 0===r||r.add({targets:h,t:1,update:function(){slerp(l,v,o.object.quaternion,h.t)}},0)}var g=new THREE.Vector3,y=new THREE.Quaternion,b=new THREE.Vector3,w=new THREE.Vector3,E=new THREE.Quaternion,x=new THREE.Vector3,_=new THREE.Vector3,T=new THREE.Quaternion,A=new THREE.Vector3;if(e.hiddenMatrix.decompose(w,E,x),"hiddenMatrix"in this.object&&(this.object.hiddenMatrix.decompose(g,y,b),!1===this.object.hiddenMatrix.equals(e.hiddenMatrix))){var S={t:0},M=this.object.hiddenMatrix;null===(i=this._animation)||void 0===i||i.add({targets:S,t:1,update:function(){THREE.Quaternion.slerp(y,E,T,S.t),_.lerpVectors(g,w,S.t),A.lerpVectors(b,x,S.t),M.compose(_,T,A)}},0)}},e.prototype.animateGeometry=function(e){var t;if("geometry"in this.object&&void 0!==e.geometry){var n=this.object.geometry.userData.parameters,r=e.geometry;if(r.width!==n.width||r.height!==n.height||r.depth!==n.depth){var i=this.object;null===(t=this._animation)||void 0===t||t.add({targets:n,width:r.width,height:r.height,depth:r.depth,update:function(){i.updateGeometry({parameters:{width:n.width,height:n.height,depth:n.depth}})}},0)}}},e.prototype.animateMaterial=function(e){var t=this;if("material"in this.object){var n=function(e,n,r,i){var o,a,s,c,u;void 0===i&&(i=n.paramNames);for(var l=e.layersList,h=function(e,u){var h,f=i[e],d="f"+n.id+"_"+f,p="f"+r.id+"_"+f,m=n.uniforms[d],v=r.uniforms[p];if("mode"===f||"boolean"==typeof m.value)return m.value!==v.value&&("boolean"==typeof m.value?m.value=v.value:m.value=Number(v.value),l.updateLayerUniformByLayer(n,d)),"continue";if("number"==typeof m.value)return m.value!==v.value&&(null===(o=t._animation)||void 0===o||o.add({targets:m,value:Number(v.value),update:function(){l.updateLayerUniformByLayer(n,d)}},0)),"continue";if("isVector2"in m.value){var g=v.value;return!1===(h=m.value).equals(g)&&(null===(a=t._animation)||void 0===a||a.add({targets:h,x:g.x,y:g.y,update:function(){l.updateLayerUniformByLayer(n,d)}},0)),"continue"}return"isVector3"in m.value?(g=v.value,!1===(h=m.value).equals(g)&&(null===(s=t._animation)||void 0===s||s.add({targets:h,x:g.x,y:g.y,z:g.z,update:function(){l.updateLayerUniformByLayer(n,d)}},0)),"continue"):"isColor"in m.value?(g=v.value,!1===(h=m.value).equals(g)&&(null===(c=t._animation)||void 0===c||c.add({targets:h,r:g.r,g:g.g,b:g.b,update:function(){l.updateLayerUniformByLayer(n,d)}},0)),"continue"):void 0},f=0,d=i.length;f<d;++f)h(f);if(n.backLayer){var p=n.backLayer.id,m="f"+p+"_alpha",v=n.backLayer.uniforms[m];null===(u=t._animation)||void 0===u||u.add({targets:v,value:0,update:function(){l.updateLayerUniform(p,m)}},0)}},r=function(e,n,r){var i,o=e.layersList;if(void 0===n.backLayer){var a=r.getValues();a.alpha=0,n.backLayer=o.addLayerBeforeAt(a,n),n.backLayer.isBack=!0,e.dispose()}var s="f"+n.id+"_alpha",c="f"+n.backLayer.id+"_alpha",u=n.uniforms[s],l=n.backLayer.uniforms[c];null===(i=t._animation)||void 0===i||i.add({targets:u,value:0,update:function(){o.updateLayerUniformByLayer(n,s)}},0).add({targets:l,value:Number(r.uniforms["f"+r.id+"_alpha"].value),update:function(){n.backLayer&&o.updateLayerUniformByLayer(n.backLayer,c)}},0)},i=function(e,r,i){var o,a=e.layersList,s="f"+r.id+"_mat",c="f"+r.id+"_texture",u=r.uniforms[c].value,l=i.uniforms["f"+i.id+"_texture"].value,h=r.uniforms["f"+r.id+"_crop"],f=i.uniforms["f"+i.id+"_crop"];h.value!==f.value&&(h.value=Number(f.value),a.updateLayerUniformByLayer(r,"f"+r.id+"_crop")),u.wrapS===l.wrapS&&u.wrapT===l.wrapT||(u.wrapS=l.wrapS,u.wrapT=l.wrapT,u.needsUpdate=!0,a.updateLayerUniformByLayer(r,c));var d=u.matrix,p=l.matrix;if(!1===d.equals(p)){var m={repeatX:u.repeat.x,repeatY:u.repeat.y,offsetX:u.offset.x,offsetY:u.offset.y};null===(o=t._animation)||void 0===o||o.add({targets:m,repeatX:l.repeat.x,repeatY:l.repeat.y,offsetX:l.offset.x,offsetY:l.offset.y,update:function(){u.repeat.set(m.repeatX,m.repeatY),u.offset.set(m.offsetX,m.offsetY),u.updateMatrix(),a.updateLayerUniformByLayer(r,s)}},0)}n(e,r,i,["alpha","mode"])},o=function(e,r,i){var o,a=e.layersList,s=r.uniforms["f"+r.id+"_num"],c=i.uniforms["f"+i.id+"_num"],u="f"+r.id+"_steps",l="f"+i.id+"_steps",h=r.uniforms[u],f=i.uniforms[l],d="f"+r.id+"_colors",p="f"+i.id+"_colors",m=r.uniforms[d],v=i.uniforms[p];if(s.value<=c.value){for(var g=m.value[s.value-1],y=Number(s.value);y<c.value;++y)h.value[y]=1,a.updateLayerUniformByLayer(r,d),m.value[y].set(g.x,g.y,g.z,g.w),a.updateLayerUniformByLayer(r,u);s.value!==c.value&&(s.value=Number(c.value),a.updateLayerUniformByLayer(r,"f"+r.id+"_num"));var b=function(e){var n=m.value[e],i=v.value[e],s=h.value[e],c=f.value[e];if(s!==c||!1===n.equals(i)){var l={value:s};null===(o=t._animation)||void 0===o||o.add({targets:[l,n],value:c,x:i.x,y:i.y,z:i.z,w:i.w,update:function(){h.value[e]=l.value,a.updateLayerUniformByLayer(r,u),a.updateLayerUniformByLayer(r,d)}},0)}};for(y=0;y<c.value;++y)b(y)}else{var w=[],E=function(e){var n=m.value[e],i=v.value[e];h.value[e]===f.value[e]&&!1!==n.equals(i)||w.push(new Promise((function(o){var s,c={value:h.value[e]};null===(s=t._animation)||void 0===s||s.add({targets:[c,n],value:f.value[e],x:i.x,y:i.y,z:i.z,w:i.w,update:function(){h.value[e]=c.value,a.updateLayerUniformByLayer(r,u),a.updateLayerUniformByLayer(r,d)},complete:function(){o(e)}},0)})))};for(y=0;y<c.value;++y)E(y);var x=v.value[c.value-1],_=function(e){var n=m.value[e];h.value[e]===f.value[e]&&!1!==n.equals(x)||w.push(new Promise((function(i){var o,s={value:h.value[e]};null===(o=t._animation)||void 0===o||o.add({targets:[s,n],value:1,x:x.x,y:x.y,z:x.z,w:x.w,update:function(){h.value[e]=s.value,a.updateLayerUniformByLayer(r,u),a.updateLayerUniformByLayer(r,d)},complete:function(){i(e)}},0)})))};for(y=Number(c.value);y<s.value;++y)_(y);Promise.all(w).then((function(){s.value=Number(c.value),a.updateLayerUniformByLayer(r,"f"+r.id+"_num")}),(function(){}))}n(e,r,i,["alpha","mode","gl_type","smooth","offset","morph","angle"])};if(this.object.material instanceof Array)for(var a=0,s=this.object.material.length;a<s;++a)c(this.object.material[a],e.material[a]);else c(this.object.material,e.material)}function c(e,t){for(var a=e.layersList.head,s=0;a;)if(!0!==a.isBack){var c=t.layersList[s++];if("texture"===a.type){var u=a.uniforms["f"+a.id+"_texture"].value,l=c.uniforms["f"+c.id+"_texture"].value;u.image===l.image?i(e,a,c):r(e,a,c)}else"gradient"===a.type?a.uniforms["f"+a.id+"_gl_type"].value===c.uniforms["f"+c.id+"_gl_type"].value?o(e,a,c):r(e,a,c):n(e,a,c);a=a.next}else a=a.next}},e.prototype.animateCamera=function(e){var t;if("CombinedCamera"===this.object.objectType&&void 0!==e.camera){var n=this.object,r="OrthographicCamera"===n.cameraType?e.camera.zoomOrtho:e.camera.zoomPersp;n.zoom!==r&&(null===(t=this._animation)||void 0===t||t.add({targets:n,zoom:r,update:function(){n.updateProjectionMatrix()}},0))}},e}(),Object3DMixin=function(e){return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.hasEntityChild=function(){return this.children.some((function(e){return isEntity(e)}))},t.prototype.attach=function(e,t){this.updateWorldMatrix(!0,!1);var n=(new THREE.Matrix4).getInverse(this.matrixWorld);return null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),n.multiply(e.parent.matrixWorld)),isEntity(e)?e.hiddenMatrix.premultiply(n):e.applyMatrix4(n),e.updateWorldMatrix(!1,!1),this.add(e),void 0!==t&&(this.children.pop(),this.children.splice(t,0,e)),this},t.prototype.toJSON=function(e){var t,n,r=void 0===e,i={object:{uuid:"",objectType:""}};void 0===e&&(e={geometries:{},materials:{},textures:{},images:{},interactionStates:{}},i.metadata={version:1.4,type:"Object",generator:"Object3D.toJSON"});var o={uuid:this.uuid,objectType:this.type};if(""!==this.name&&(o.name=this.name),o.matrix=this.matrix.toArray(),!0===this.castShadow&&(o.castShadow=!0),!0===this.receiveShadow&&(o.receiveShadow=!0),!1===this.visible&&(o.visible=!1),!1===this.frustumCulled&&(o.frustumCulled=!1),0!==this.renderOrder&&(o.renderOrder=this.renderOrder),o.layers=this.layers.mask,"{}"!==JSON.stringify(this.userData)&&(o.userData=this.userData),this.children.length>0){o.children=[];try{for(var a=__values(this.children),s=a.next();!s.done;s=a.next()){var c=s.value;(isEntity(c)||c instanceof THREE.Light)&&o.children.push(c.toJSON(e).object)}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}}if(r){var u=extractFromCache(e.geometries),l=extractFromCache(e.materials),h=extractFromCache(e.textures),f=extractFromCache(e.images),d=extractFromCache(e.interactionStates);u.length>0&&(i.geometries=u),l.length>0&&(i.materials=l),h.length>0&&(i.textures=h),f.length>0&&(i.images=f),d.length>0&&(i.interactionStates=d)}return i.object=o,i},t.prototype.fromJSON=function(e){return this.uuid=e.uuid,void 0!==e.name&&(this.name=e.name),void 0!==e.matrix?(this.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(this.matrixAutoUpdate=e.matrixAutoUpdate),this.matrixAutoUpdate&&this.matrix.decompose(this.position,this.quaternion,this.scale)):(void 0!==e.position&&this.position.fromArray(e.position),void 0!==e.rotation&&this.rotation.fromArray(e.rotation),void 0!==e.quaternion&&this.quaternion.fromArray(e.quaternion),void 0!==e.scale&&this.scale.fromArray(e.scale)),void 0!==e.castShadow&&(this.castShadow=e.castShadow),void 0!==e.receiveShadow&&(this.receiveShadow=e.receiveShadow),void 0!==e.visible&&(this.visible=e.visible),void 0!==e.frustumCulled&&(this.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(this.renderOrder=e.renderOrder),void 0!==e.layers&&(this.layers.mask=e.layers),void 0!==e.userData&&(this.userData=e.userData),this},t}(e)},isEntity$1=function(e){return"isEntity"in e},isHelperableEntity$1=function(e){return"objectHelper"in e},EntityMixin=function(e){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.objectType="",t.isEntity=!0,t.raycastLock=!1,t.scaleLock=!1,t.hiddenMatrix=new THREE.Matrix4,t.interaction=new Interaction(t),t.forceComputeSize=!1,t}return __extends(t,e),Object.defineProperty(t.prototype,"visibility",{get:function(){return this.visible},set:function(e){var t,n;this.visible=e;try{for(var r=__values(this.children),i=r.next();!i.done;i=r.next()){var o=i.value;isEntity$1(o)&&o.traverseEntity((function(t){isHelperableEntity$1(t)&&t.visible&&(t.objectHelper.visible=e)}))}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"interactionCache",{get:function(){return void 0===this.interaction.cache&&this.interaction.computeCache(),this.interaction.cache},enumerable:!1,configurable:!0}),t.prototype.traverseEntity=function(e){var t,n;e(this);try{for(var r=__values(this.children),i=r.next();!i.done;i=r.next()){var o=i.value;isEntity$1(o)&&o.traverseEntity(e)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}},t.prototype.computeSingleBoundingBox=function(){this.singleBoundingBox||(this.singleBoundingBox=new Box3),this.singleBoundingBox.setFromObjectSize(this,!1),this.singleBoundingBox.computeVertices(),this.singleBoundingBox.computeEdges(),this.singleBoundingBox.computeFaces()},t.prototype.computeComplexBoundingBox=function(e){this.complexBoundingBox||(this.complexBoundingBox=new Box3),this.complexBoundingBox.setFromObjectSize(this,e),this.complexBoundingBox.computeVertices(),this.complexBoundingBox.computeEdges(),this.complexBoundingBox.computeFaces()},t.prototype.updateMatrixWorld=function(e){var t,n;this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.multiplyMatrices(this.hiddenMatrix,this.matrix):(this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.hiddenMatrix),this.matrixWorld.multiplyMatrices(this.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);try{for(var r=__values(this.children),i=r.next();!i.done;i=r.next())i.value.updateMatrixWorld(e)}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}},t.prototype.updateWorldMatrix=function(e,t){var n,r,i=this.parent;if(e&&null!==i&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.multiplyMatrices(this.hiddenMatrix,this.matrix):(this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.hiddenMatrix),this.matrixWorld.multiplyMatrices(this.matrixWorld,this.matrix)),t)try{for(var o=__values(this.children),a=o.next();!a.done;a=o.next())a.value.updateWorldMatrix(!1,!0)}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}},t.prototype.shallowClone=function(e){return(new this.constructor).shallowCopy(this,e)},t.prototype.shallowCopy=function(t,n){var r,i;void 0===n&&(n=!0);var o=t.children;if(t.children=[],e.prototype.copy.call(this,t),t.children=o,this.raycastLock=t.raycastLock,this.scaleLock=t.scaleLock,this.hiddenMatrix.copy(t.hiddenMatrix),void 0!==t.interaction&&this.interaction.copy(t.interaction),!0===n)try{for(var a=__values(o),s=a.next();!s.done;s=a.next()){var c=s.value;isEntity$1(c)&&this.add(c.shallowClone())}}catch(e){r={error:e}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return this},t.prototype.clone=function(e){return(new this.constructor).copy(this,e)},t.prototype.copy=function(t,n){var r,i;void 0===n&&(n=!0);var o=t.children;if(t.children=[],e.prototype.copy.call(this,t),t.children=o,this.raycastLock=t.raycastLock,this.scaleLock=t.scaleLock,this.hiddenMatrix.copy(t.hiddenMatrix),void 0!==t.interaction&&this.interaction.copy(t.interaction),!0===n)try{for(var a=__values(o),s=a.next();!s.done;s=a.next()){var c=s.value;isEntity$1(c)&&this.add(c.clone())}}catch(e){r={error:e}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return this},t.prototype.keepChildrenMatrixWorld=function(){var e,t,n=new THREE.Matrix4,r=this.matrixWorld.clone();this.updateWorldMatrix(!1,!1),n.getInverse(this.matrixWorld),n.multiply(r);try{for(var i=__values(this.children),o=i.next();!o.done;o=i.next()){var a=o.value;isEntity$1(a)&&a.hiddenMatrix.premultiply(n)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}},t.prototype.toJSON=function(t){var n=e.prototype.toJSON.call(this,t),r=n.object;return!0===this.raycastLock&&(r.raycastLock=!0),!0===this.scaleLock&&(r.scaleLock=!0),r.hiddenMatrix=this.hiddenMatrix.toArray(),void 0!==this.interaction&&(r.interaction=this.interaction.toJSON(t)),n},t.prototype.fromJSON=function(t){return e.prototype.fromJSON.call(this,t),void 0!==t.raycastLock&&(this.raycastLock=t.raycastLock),void 0!==t.scaleLock&&(this.scaleLock=t.scaleLock),this.hiddenMatrix.fromArray(t.hiddenMatrix),this},t.prototype.fromObject3D=function(e){var t=e.children;return e.children=[],Object.assign(e,{raycastLock:!1,scaleLock:!1,hiddenMatrix:new THREE.Matrix4}),this.copy(e),e.children=t,this},t}(Object3DMixin(e))},Cloner=function(e){function t(t,n){void 0===n&&(n={});var r=e.call(this)||this;r.object=t,t.computeComplexBoundingBox(!0);var i=t.complexBoundingBox.getSize(new THREE.Vector3),o=.1;return r.parameters={type:void 0!==n.type?n.type:"radial",hideBase:void 0!==n.hideBase&&n.hideBase,count:void 0!==n.count?n.count:3,ra_radius:void 0!==n.ra_radius?n.ra_radius:2*Math.max(i.x,i.y),ra_startAngle:void 0!==n.ra_startAngle?n.ra_startAngle:0,ra_endAngle:void 0!==n.ra_endAngle?n.ra_endAngle:360,ra_align:void 0!==n.ra_align&&n.ra_align,ra_axis:void 0!==n.ra_axis?n.ra_axis:"y",ra_scale:void 0!==n.ra_scale?n.ra_scale.clone():new THREE.Vector3,ra_rotation:void 0!==n.ra_rotation?n.ra_rotation.clone():new THREE.Euler,ra_position:void 0!==n.ra_position?n.ra_position.clone():new THREE.Vector3,li_scale:void 0!==n.li_scale?n.li_scale.clone():new THREE.Vector3,li_rotation:void 0!==n.li_rotation?n.li_rotation.clone():new THREE.Euler,li_position:void 0!==n.li_position?n.li_position.clone():new THREE.Vector3(i.x+i.x*o,0,0).round(),gr_count:void 0!==n.gr_count?n.gr_count.clone():new THREE.Vector3(2,2,2),gr_size:void 0!==n.gr_size?n.gr_size.clone():new THREE.Vector3(i.x+i.x*o,i.y+i.y*o,i.z+i.z*o).round(),gr_fromCenter:void 0===n.gr_fromCenter||n.gr_fromCenter},r.update(),r.setHideBase(r.parameters.hideBase),r}return __extends(t,e),t.prototype.refreshMaterial=function(){var e,t;if("material"in this.object)try{for(var n=__values(this.children),r=n.next();!r.done;r=n.next())r.value.material=this.object.material}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}},t.prototype.setHideBase=function(e){var t,n,r,i,o,a,s,c,u,l,h,f;if("material"in this.object){if(Array.isArray(this.object.material)){if(this.children.length>0){try{for(var d=__values(this.object.material),p=d.next();!p.done;p=d.next())(x=p.value).visible=!0}catch(e){t={error:e}}finally{try{p&&!p.done&&(n=d.return)&&n.call(d)}finally{if(t)throw t.error}}if(e){var m=this.object.material.map((function(e){return e.clone()}));try{for(var v=__values(this.children),g=v.next();!g.done;g=v.next())g.value.material=m}catch(e){r={error:e}}finally{try{g&&!g.done&&(i=v.return)&&i.call(v)}finally{if(r)throw r.error}}}else try{for(var y=__values(this.children),b=y.next();!b.done;b=y.next())b.value.material=this.object.material}catch(e){o={error:e}}finally{try{b&&!b.done&&(a=y.return)&&a.call(y)}finally{if(o)throw o.error}}}try{for(var w=__values(this.object.material),E=w.next();!E.done;E=w.next())(x=E.value).visible=!e}catch(e){s={error:e}}finally{try{E&&!E.done&&(c=w.return)&&c.call(w)}finally{if(s)throw s.error}}}else{if(this.children.length>0)if(this.object.material.visible=!0,e){var x=this.object.material.clone();try{for(var _=__values(this.children),T=_.next();!T.done;T=_.next())T.value.material=x}catch(e){u={error:e}}finally{try{T&&!T.done&&(l=_.return)&&l.call(_)}finally{if(u)throw u.error}}}else try{for(var A=__values(this.children),S=A.next();!S.done;S=A.next())S.value.material=this.object.material}catch(e){h={error:e}}finally{try{S&&!S.done&&(f=A.return)&&f.call(A)}finally{if(h)throw h.error}}this.object.material.visible=!e}this.parameters.hideBase=e}},t.prototype.update=function(){switch(this._updateCount(),this.parameters.type){case"radial":this._updateRadial(this.parameters);break;case"linear":this._updateLinear(this.parameters);break;case"grid":this._updateGrid(this.parameters)}},t.prototype._updateCount=function(){var e="grid"===this.parameters.type?this.parameters.gr_count.x*this.parameters.gr_count.y*this.parameters.gr_count.z:this.parameters.count;if(this.children.length!==e)if(this.children.length<e)for(var t=0,n=e-this.children.length;t<n;++t){var r=this.object.shallowClone(!1);r.visible=!0,this.add(r),this.parameters.hideBase&&this.setHideBase(!0)}else for(t=0,n=this.children.length-e;t<n;++t)this.remove(this.children[0])},t.prototype._updateRadial=function(e){var t,n,r,i=e.ra_startAngle*THREE.MathUtils.DEG2RAD,o=i-e.ra_endAngle*THREE.MathUtils.DEG2RAD,a=new THREE.Euler(e.ra_rotation.x*THREE.MathUtils.DEG2RAD,e.ra_rotation.y*THREE.MathUtils.DEG2RAD,e.ra_rotation.z*THREE.MathUtils.DEG2RAD);switch(e.ra_axis){case"x":r=new THREE.Vector3(1,0,0);break;case"y":r=new THREE.Vector3(0,1,0);break;case"z":r=new THREE.Vector3(0,0,1)}try{for(var s=__values(this.children.entries()),c=s.next();!c.done;c=s.next()){var u=__read(c.value,2),l=u[0],h=u[1];h.hiddenMatrix.identity(),h.scale.x=e.ra_scale.x+1,h.scale.y=e.ra_scale.y+1,h.scale.z=e.ra_scale.z+1,h.position.setScalar(0);var f=o/e.count*l-i;switch(e.ra_axis){case"x":h.rotation.set(0,f,0);break;case"y":h.rotation.set(0,0,f);break;case"z":h.rotation.set(f,0,0)}h.translateOnAxis(r,e.ra_radius),h.position.add(e.ra_position),!0===e.ra_align?(h.rotation.x+=a.x,h.rotation.y+=a.y,h.rotation.z+=a.z):h.rotation.copy(a)}}catch(e){t={error:e}}finally{try{c&&!c.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}},t.prototype._updateLinear=function(e){var t,n;if("linear"!==e.type)throw new Error;var r=new THREE.Euler(e.li_rotation.x*THREE.MathUtils.DEG2RAD,e.li_rotation.y*THREE.MathUtils.DEG2RAD,e.li_rotation.z*THREE.MathUtils.DEG2RAD);try{for(var i=__values(this.children.entries()),o=i.next();!o.done;o=i.next()){var a=__read(o.value,2),s=a[0],c=a[1];c.hiddenMatrix.identity(),c.scale.x=e.li_scale.x*s+1,c.scale.y=e.li_scale.y*s+1,c.scale.z=e.li_scale.z*s+1,c.rotation.x=r.x*s,c.rotation.y=r.y*s,c.rotation.z=r.z*s,c.position.x=e.li_position.x*s,c.position.y=e.li_position.y*s,c.position.z=e.li_position.z*s}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}},t.prototype._updateGrid=function(e){var t=0;if(!0===e.gr_fromCenter)for(var n={x:e.gr_count.x%2==0?2:1,y:e.gr_count.y%2==0?2:1,z:e.gr_count.z%2==0?2:1},r=new THREE.Vector3(e.gr_size.x*(e.gr_count.x-n.x)*.5,e.gr_size.y*(e.gr_count.y-n.y)*.5,e.gr_size.z*(e.gr_count.z-n.z)*.5),i=0;i<e.gr_count.x;i++)for(var o=0;o<e.gr_count.y;o++)for(var a=0;a<e.gr_count.z;a++)(s=this.children[t++]).hiddenMatrix.identity(),s.scale.setScalar(1),s.rotation.set(0,0,0),s.position.x=e.gr_size.x*i-r.x,s.position.y=e.gr_size.y*o-r.y,s.position.z=e.gr_size.z*a-r.z;else for(i=0;i<e.gr_count.x;i++)for(o=0;o<e.gr_count.y;o++)for(a=0;a<e.gr_count.z;a++){var s;(s=this.children[t++]).hiddenMatrix.identity(),s.scale.setScalar(1),s.rotation.set(0,0,0),s.position.x=e.gr_size.x*i,s.position.y=-e.gr_size.y*o,s.position.z=-e.gr_size.z*a}},t.prototype.toJSON=function(){return{type:"Cloner",parameters:{type:this.parameters.type,hideBase:this.parameters.hideBase,count:this.parameters.count,ra_radius:this.parameters.ra_radius,ra_startAngle:this.parameters.ra_startAngle,ra_endAngle:this.parameters.ra_endAngle,ra_align:this.parameters.ra_align,ra_axis:this.parameters.ra_axis,ra_scale:this.parameters.ra_scale.toArray(),ra_rotation:this.parameters.ra_rotation.toArray(),ra_position:this.parameters.ra_position.toArray(),li_scale:this.parameters.li_scale.toArray(),li_rotation:this.parameters.li_rotation.toArray(),li_position:this.parameters.li_position.toArray(),gr_count:this.parameters.gr_count.toArray(),gr_size:this.parameters.gr_size.toArray(),gr_fromCenter:this.parameters.gr_fromCenter}}},t.prototype.fromJSON=function(e){var t=e.parameters;return this.parameters.type=t.type,this.parameters.hideBase=t.hideBase,this.parameters.count=t.count,this.parameters.ra_radius=t.ra_radius,this.parameters.ra_startAngle=t.ra_startAngle,this.parameters.ra_endAngle=t.ra_endAngle,this.parameters.ra_align=t.ra_align,this.parameters.ra_axis=t.ra_axis,this.parameters.ra_scale.fromArray(t.ra_scale),this.parameters.ra_rotation.fromArray(t.ra_rotation),this.parameters.ra_position.fromArray(t.ra_position),this.parameters.li_scale.fromArray(t.li_scale),this.parameters.li_rotation.fromArray(t.li_rotation),this.parameters.li_position.fromArray(t.li_position),this.parameters.gr_count.fromArray(t.gr_count),this.parameters.gr_size.fromArray(t.gr_size),this.parameters.gr_fromCenter=t.gr_fromCenter,this.update(),this.setHideBase(this.parameters.hideBase),this},t}(THREE.Object3D),AbstractMesh=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.isAbstractMesh=!0,Array.isArray(n)&&(r.selectedMaterial=0),r}return __extends(t,e),Object.defineProperty(t.prototype,"cloner",{get:function(){return this._cloner},set:function(e){this._cloner&&this.remove(this._cloner),e&&this.add(e),this._cloner=e},enumerable:!1,configurable:!0}),t.prototype.updateGeometry=function(e){var t=this.geometry,n=geometries[t.userData.type],r="NonParametric"===this.objectType?Object.assign({},t.userData,{geometry:t}):t.userData,i=n.build(n.normalizeInputs(e,r));this.geometry.dispose(),this.geometry=i,this.geometry.computeBoundingSphere()},t.prototype.resizeGeometry=function(e,t,n){resizeGeometry(this.geometry,{width:e,height:t,depth:n})},t.prototype.shallowClone=function(e){return new this.constructor(this.geometry,this.material).shallowCopy(this,e)},t.prototype.clone=function(e){var t="NonParametric"===this.objectType?Object.assign({},this.geometry.userData,{geometry:this.geometry}):this.geometry.userData,n=createGeometry(t),r=Array.isArray(this.material)?this.material.map((function(e){return e.clone()})):this.material.clone();return new this.constructor(n,r).copy(this,e)},t.prototype.copy=function(t,n){return void 0===n&&(n=!0),e.prototype.copy.call(this,t,n),t.cloner&&(this.cloner=new Cloner(t,t.cloner.parameters),this.add(this.cloner)),this},t.prototype.toJSON=function(t){var n=e.prototype.toJSON.call(this,t),r=n.object;if(void 0!==this.cloner&&(r.cloner=this.cloner.toJSON()),r.geometry=serializeGeometry(t.geometries,this.geometry),Array.isArray(this.material)){for(var i=[],o=0,a=this.material.length;o<a;o++)i.push(serialize(t.materials,this.material[o],t));r.material=i}else r.material=serialize(t.materials,this.material,t);return n},t.prototype.fromJSON=function(t){return e.prototype.fromJSON.call(this,t),void 0!==t.selectedMaterial&&(this.selectedMaterial=t.selectedMaterial),void 0!==t.cloner&&(this.cloner=new Cloner(this).fromJSON(t.cloner)),this},t}(EntityMixin(THREE.Mesh)),HelperMixin=function(e){var t;return(t=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isObjectHelper=!0,t}return __extends(t,e),t}(e)).geometryHelper=new THREE.BoxBufferGeometry(30,30,30),t},_ray$1=new THREE.Ray,_sphere$1=new THREE.Sphere,_inverseMatrix$1=new THREE.Matrix4,helperRaycast=function(e,t,n,r){var i=t,o=e.matrixWorld;if(null===i.boundingSphere&&i.computeBoundingSphere(),_sphere$1.copy(i.boundingSphere),_sphere$1.applyMatrix4(o),!1!==n.ray.intersectsSphere(_sphere$1)&&(_inverseMatrix$1.getInverse(o),_ray$1.copy(n.ray).applyMatrix4(_inverseMatrix$1),null===i.boundingBox||!1!==_ray$1.intersectsBox(i.boundingBox))){var a,s,c,u,l,h,f=i.index,d=i.attributes.position,p=i.drawRange;for(l=Math.max(0,p.start),h=Math.min(f.count,p.start+p.count);l<h;l+=3)if(s=f.getX(l),c=f.getX(l+1),u=f.getX(l+2),a=m(e,n,_ray$1,d,s,c,u))return a.faceIndex=Math.floor(l/3),void r.push(a)}function m(e,t,n,r,i,o,a){var s=new THREE.Vector3,c=new THREE.Vector3,u=new THREE.Vector3,l=new THREE.Vector3,h=new THREE.Vector3;if(s.fromBufferAttribute(r,i),c.fromBufferAttribute(r,o),u.fromBufferAttribute(r,a),null===n.intersectTriangle(s,c,u,!1,l))return null;h.copy(l),h.applyMatrix4(e.matrixWorld);var f=t.ray.origin.distanceTo(h);return f<t.near||f>t.far?null:{faceIndex:1,distance:f,point:h.clone(),object:e}}},CombinedCameraHelper=function(e){function t(t){var n=e.call(this,t)||this;n.object=t;var r=new THREE.SphereGeometry(15,4,2),i=new THREE.MeshBasicMaterial({wireframe:!0,fog:!1,toneMapped:!1}),o=new THREE.Mesh(r,i);return n.add(o),n.object=t,n.name="CombinedCameraHelper: "+t.uuid,n}return __extends(t,e),t.prototype.raycast=function(e,n){helperRaycast(this.object,t.geometryHelper,e,n)},t}(HelperMixin(THREE.CameraHelper)),DirectionalLightHelper=function(e){function t(t,n,r){void 0===n&&(n=15),void 0===r&&(r=10066329);var i=e.call(this,t,n,r)||this;return i.object=t,i.name="DirectionalLightHelper: "+t.uuid,i}return __extends(t,e),t.prototype.raycast=function(e,n){helperRaycast(this.object,t.geometryHelper,e,n)},t}(HelperMixin(THREE.DirectionalLightHelper)),EmptyObjectHelper=function(e){function t(t,n){void 0===n&&(n=15);var r=e.call(this,n)||this;return r.object=t,r.object.updateMatrixWorld(),r.name="EmptyObjectHelper: "+t.uuid,r.matrix=t.matrixWorld,r.matrixAutoUpdate=!1,r}return __extends(t,e),t.prototype.raycast=function(e,n){helperRaycast(this.object,t.geometryHelper,e,n)},t.prototype.update=function(){},t}(HelperMixin(THREE.AxesHelper)),PointLightHelper=function(e){function t(t,n,r){void 0===n&&(n=15),void 0===r&&(r=6710886);var i=e.call(this,t,n,r)||this;return i.object=t,i.name="PointLightHelper: "+t.uuid,i}return __extends(t,e),t.prototype.raycast=function(e,n){helperRaycast(this.object,t.geometryHelper,e,n)},t}(HelperMixin(THREE.PointLightHelper)),SpotLightHelper=function(e){function t(t,n){void 0===n&&(n=6710886);var r=e.call(this,t,n)||this;return r.object=t,r.name="SpotLightHelper: "+t.uuid,r}return __extends(t,e),t.prototype.raycast=function(e,n){helperRaycast(this.object,t.geometryHelper,e,n)},t.prototype.update=function(){if(void 0!==this.object){var e=t._vector,n=this.object.distance?this.object.distance:1e3,r=n*Math.tan(this.object.angle);this.cone.scale.set(r,r,n),e.setFromMatrixPosition(this.object.target.matrixWorld),this.cone.lookAt(e);var i=void 0!==this.color?this.color:this.light.color;if(this.cone.material instanceof Array)for(var o=0,a=this.cone.material.length;o<a;o++)this.cone.material[o].color.set(i);else this.cone.material.color.set(i)}},t._vector=new THREE.Vector3,t}(HelperMixin(THREE.SpotLightHelper)),_sphere$2=new THREE.Sphere,_inverseMatrix$2=new THREE.Matrix4,_ray$2=new THREE.Ray,_position=new THREE.Vector3,thresholdBase=10,VectorHelperPoints=function(e){function t(t,n,r){var i=e.call(this)||this;return i.defaultTexture=t,i.selectedTexture=n,i.count=r,i.drawCount=0,i._mouseThreshold=4,i._cameraZoom=1,i.positionAttribute=new THREE.BufferAttribute(new Float32Array(3*r),3),i.selectionAttribute=new THREE.BufferAttribute(new Uint16Array(r),1),i.geometry=new THREE.BufferGeometry,i.geometry.setAttribute("position",i.positionAttribute),i.geometry.setAttribute("aSelection",i.selectionAttribute),i.material=new THREE.PointsMaterial({map:t,size:16,sizeAttenuation:!1,transparent:!0,depthTest:!1}),i.material.onBeforeCompile=function(e){e.uniforms.uSelectedTexture={value:n},e.vertexShader="attribute float aSelection;\nvarying float vSelection;\n"+e.vertexShader,e.vertexShader=e.vertexShader.replace("#include <begin_vertex>","#include <begin_vertex>\n\n\tvSelection = aSelection;\n"),e.fragmentShader="uniform sampler2D uSelectedTexture;\nvarying float vSelection;\n"+e.fragmentShader,e.fragmentShader=e.fragmentShader.replace("#include <map_particle_fragment>","\n\t\t\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\n\t\t\t\tvec4 defaultMapTexel = texture2D( map, uv );\n\t\t\t\tvec4 selectedMapTexel = texture2D( uSelectedTexture, uv );\n\t\t\t\tdiffuseColor *= mapTexelToLinear( mix(defaultMapTexel, selectedMapTexel, vSelection) );\n\t\t\t\t")},i.mesh=new THREE.Points(i.geometry,i.material),i.add(i.mesh),i}return __extends(t,e),t.prototype.setXYZ=function(e,t,n,r){void 0===r&&(r=0),this.positionAttribute.setXYZ(e,t,n,r)},t.prototype.setPositionAt=function(e,t){this.positionAttribute.setXYZ(e,t.x,t.y,"z"in t?t.z:0)},Object.defineProperty(t.prototype,"cameraZoom",{get:function(){return this._cameraZoom},set:function(e){this._cameraZoom=e,this._mouseThreshold=thresholdBase/e},enumerable:!1,configurable:!0}),t.prototype.update=function(){this.positionAttribute.needsUpdate=!0,this.geometry.computeBoundingSphere()},t.prototype.raycast=function(e,t){var n=this.geometry,r=this.matrixWorld,i=this,o=i._mouseThreshold,a=i.scale,s=i.drawCount;if(null===n.boundingSphere&&n.computeBoundingSphere(),_sphere$2.copy(n.boundingSphere),_sphere$2.applyMatrix4(r),_sphere$2.radius+=o,!1===e.ray.intersectsSphere(_sphere$2))return t;_inverseMatrix$2.getInverse(r),_ray$2.copy(e.ray);for(var c=o/((a.x+a.y+a.z)/3),u=c*c,l=this.positionAttribute,h=0,f=s;h<f;h++)_position.fromBufferAttribute(l,h).applyMatrix4(r),this._testPoint(_position,h,u,r,e,t);return t},t.prototype._testPoint=function(e,t,n,r,i,o){var a=_ray$2.distanceSqToPoint(e);if(a<n){var s=new THREE.Vector3;_ray$2.closestPointToPoint(e,s),s.applyMatrix4(r);var c=i.ray.origin.distanceTo(s);if(c<i.near||c>i.far)return;o.push({distance:c,distanceToRay:Math.sqrt(a),point:s,index:t,face:null,object:this})}},t.prototype.setSelection=function(e,t,n){void 0===n&&(n=!1),this.selectionAttribute.setX(e,t?1:0),n&&(this.selectionAttribute.needsUpdate=!0)},t.prototype.getSelection=function(e){return 1===this.selectionAttribute.getX(e)},t.prototype.clearSelection=function(e){void 0===e&&(e=!1);for(var t=0;t<this.count;t++)this.selectionAttribute.setX(t,0);e&&(this.selectionAttribute.needsUpdate=!0)},t.prototype.updateSelection=function(){this.selectionAttribute.needsUpdate=!0},t.prototype.setDrawRange=function(e,t){t=Math.min(t,this.count),this.geometry.setDrawRange(e,t),this.drawCount=t},t}(THREE.Object3D),vertexHeader="\nattribute float aSelection;\nattribute float aVisibility;\nvarying float vSelection;\nvarying float vVisibility;\n",vertexVaryingsSet="\n\tvSelection = aSelection;\n\tvVisibility = aVisibility;\n",fragmentHeader="\nuniform sampler2D uSelectedTexture;\n\nvarying float vSelection;\nvarying float vVisibility;\n",fragmentMap="\n\tif (vVisibility < 0.5) discard;\n\t\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\n\tvec4 defaultMapTexel = texture2D( map, uv );\n\tvec4 selectedMapTexel = texture2D( uSelectedTexture, uv );\n\tdiffuseColor *= mapTexelToLinear( mix(defaultMapTexel, selectedMapTexel, vSelection) );\n",VectorHelperControls=function(e){function t(t,n,r){var i=e.call(this,t,n,r)||this;return i._visibilityAttribute=new THREE.BufferAttribute(new Uint16Array(r),1),i.geometry.setAttribute("aVisibility",i._visibilityAttribute),i.material.onBeforeCompile=function(e){e.uniforms.uSelectedTexture={value:n},e.vertexShader=vertexHeader+e.vertexShader,e.vertexShader=e.vertexShader.replace("#include <begin_vertex>","#include <begin_vertex>"+vertexVaryingsSet),e.fragmentShader=fragmentHeader+e.fragmentShader,e.fragmentShader=e.fragmentShader.replace("#include <map_particle_fragment>",fragmentMap)},i}return __extends(t,e),t.prototype.setVisibility=function(e,t){this._visibilityAttribute.setX(e,t?1:0)},t.prototype.update=function(){e.prototype.update.call(this),this._visibilityAttribute.needsUpdate=!0},t}(VectorHelperPoints),VectorHelperDefaultLine=function(e){function t(t){var n=e.call(this)||this;return n.geometry=new VectorLineGeometry(t),n.material=new THREE.LineBasicMaterial({color:11184810,depthTest:!1,linewidth:2}),n.mesh=new THREE.Line(n.geometry,n.material),n.add(n.mesh),n}return __extends(t,e),t.prototype.update=function(e,t){var n=e.extractShapePointsToBuffer(this.geometry.positions,t);this.geometry.drawCount=n,this.geometry.positions.needsUpdate=!0,this.geometry.computeBoundingSphere()},t}(THREE.Object3D),VectorHelperSelectedLine=function(e){function t(t){var n=e.call(this)||this;return n.selection=[],n.geometry=new VectorLineGeometry(t),n.material=new THREE.LineBasicMaterial({color:16777215,depthTest:!1,linewidth:2}),n.mesh=new THREE.LineSegments(n.geometry,n.material),n.add(n.mesh),n}return __extends(t,e),t.prototype.setSelection=function(e){this.selection=e},t.prototype.update=function(e,t){for(var n=[],r=0,i=e.points.length;r<i;r++)n.push(this.selection.indexOf(r)>=0);var o=e.extractFilteredShapePointsToBuffer(this.geometry.positions,n,t);this.geometry.drawCount=o,this.geometry.positions.needsUpdate=!0,this.geometry.computeBoundingSphere()},t}(THREE.Object3D),VectorHelperSegments=function(e){function t(t,n){void 0===n&&(n={});var r=e.call(this)||this;return r.drawCount=0,r._positions=new THREE.Float32BufferAttribute(new Float32Array(3*t),3),r.geometry=new THREE.BufferGeometry,r.geometry.setAttribute("position",r._positions),r.material=new THREE.LineBasicMaterial(n),r.segments=new THREE.LineSegments(r.geometry,r.material),r.add(r.segments),r.segments.frustumCulled=!1,r}return __extends(t,e),t.prototype.setPositionAt=function(e,t){this._positions.setXYZ(e,t.x,t.y,"z"in t?t.z:0)},t.prototype.setXYZ=function(e,t,n,r){void 0===r&&(r=0),this._positions.setXYZ(e,t,n,r)},t.prototype.getX=function(e){return this._positions.getX(e)},t.prototype.getY=function(e){return this._positions.getY(e)},t.prototype.getZ=function(e){return this._positions.getZ(e)},t.prototype.update=function(){this._positions.needsUpdate=!0},t.prototype.setDrawRange=function(e,t){this.geometry.setDrawRange(e,t),this.drawCount=t},t}(THREE.Object3D),MAX_POINTS=500,MAX_SUBDIVISIONS=40,textureLoader=new THREE.TextureLoader,vectorPointDefaultTexture,vectorControlDefaultTexture,vectorPointSelectedTexture,vectorControlSelectedTexture,tempV2a=new THREE.Vector2,tempV2b=new THREE.Vector2,tempV2c=new THREE.Vector2,quarterPI=.25*Math.PI,halfPI=.5*Math.PI,snapBase=4;(function(e){function t(){var t=e.call(this)||this;return t.count=0,t.raycaster=new THREE.Raycaster,t.nextPointDest=new THREE.Vector3,t.useAngleSnapping=!1,t.showAllControls=!1,t._subdivisions=20,t._snapThreshold=snapBase,t._snapEnabled=!1,t._cameraZoom=1,t._onShapeUpdate=function(){t.update()},t._onGeometryUpdate=function(){if(void 0!==t.object){var e=t.object.geometry.userData.parameters;t.subdivisions=e.subdivisions}},t.matrixAutoUpdate=!1,t.visible=!1,t.loadTextures(),t.vectorLineMesh=new VectorHelperDefaultLine(MAX_POINTS*MAX_SUBDIVISIONS),t.add(t.vectorLineMesh),t.vectorSelectedLineMesh=new VectorHelperSelectedLine(MAX_POINTS*MAX_SUBDIVISIONS),t.add(t.vectorSelectedLineMesh),t.controlLines=new VectorHelperSegments(4*MAX_POINTS,{transparent:!0,opacity:.3,depthTest:!1}),t.add(t.controlLines),t.nextLine=new VectorHelperSegments(6,{linewidth:2,depthTest:!1}),t.add(t.nextLine),t.snapLines=new VectorHelperSegments(12,{linewidth:2,depthTest:!1,color:16711680}),t.add(t.snapLines),t.points=new VectorHelperPoints(vectorPointDefaultTexture,vectorPointSelectedTexture,MAX_POINTS),t.add(t.points),t.controls=new VectorHelperControls(vectorControlDefaultTexture,vectorControlSelectedTexture,MAX_POINTS),t.add(t.controls),t.nextPoint=new VectorHelperPoints(vectorPointDefaultTexture,null,1),t.add(t.nextPoint),t.splitPoint=new VectorHelperPoints(vectorPointDefaultTexture,null,1),t.add(t.splitPoint),t.hideNextLine(),t}__extends(t,e),t.prototype.loadTextures=function(){vectorPointDefaultTexture=textureLoader.load("/_assets/_vectors/point_default_out.png"),vectorControlDefaultTexture=textureLoader.load("/_assets/_vectors/control_default.png"),vectorPointSelectedTexture=textureLoader.load("/_assets/_vectors/point_selected_out.png"),vectorControlSelectedTexture=textureLoader.load("/_assets/_vectors/control_selected.png")},t.prototype.setLineSelection=function(e){this.vectorSelectedLineMesh.setSelection(e),this.update()},t.prototype.show=function(e){var t;void 0!==this.object&&this.clear(),this.object=e,null===(t=this.object.shape.eventDispatcher)||void 0===t||t.addEventListener("update",this._onShapeUpdate),this.object.eventDispatcher.addEventListener("geometryUpdate",this._onGeometryUpdate),this._onGeometryUpdate(),this.updateHelperMatrix(),this.update(),this.visible=!0},t.prototype.hide=function(){this.visible=!1},t.prototype.setEnableSnapping=function(e){this._snapEnabled=e},Object.defineProperty(t.prototype,"cameraZoom",{get:function(){return this._cameraZoom},set:function(e){this._cameraZoom=e,this._snapThreshold=snapBase/e,this.points.cameraZoom=e,this.controls.cameraZoom=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"snapThreshold",{get:function(){return this._snapThreshold},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"subdivisions",{get:function(){return this._subdivisions},set:function(e){this._subdivisions=e,this.update()},enumerable:!1,configurable:!0}),t.prototype.showNextLine=function(){this.nextLine.visible=!!this.object&&this.object.shape.points.length>0,this.nextPoint.visible=!0},t.prototype.hideNextLine=function(){this.nextLine.visible=!1,this.nextPoint.visible=!1},t.prototype.showSplitPoint=function(){this.splitPoint.visible=!0},t.prototype.hideSplitPoint=function(){this.splitPoint.visible=!1},t.prototype.clear=function(){var e,t,n;null===(t=null===(e=this.object)||void 0===e?void 0:e.shape.eventDispatcher)||void 0===t||t.removeEventListener("update",this._onShapeUpdate),null===(n=this.object)||void 0===n||n.eventDispatcher.removeEventListener("geometryUpdate",this._onGeometryUpdate),this.object=void 0},t.prototype.getPointByInstanceId=function(e,t){var n;void 0===t&&(t=!1);var r=Math.floor(e/3),i=e%3,o=null===(n=this.object)||void 0===n?void 0:n.shape.points[r];if(o){var a=o.controlsMoved();return t||a?i>0?o.controls[i-1]:t&&!a?o.controls[0]:o:o}return null},t.prototype.setSnapLines=function(e,t,n,r){void 0===e&&(e=null),void 0===t&&(t=null),void 0===n&&(n=null),void 0===r&&(r=null),null===e&&null===t&&null!==n&&null!==r&&(e=n,t=r,n=null,r=null);var i=0;null!==e&&null!==t&&(this.snapLines.setPositionAt(0,e),this.snapLines.setPositionAt(1,t),i+=2),null!==n&&null!==r&&(this.snapLines.setPositionAt(2,n),this.snapLines.setPositionAt(3,r),i+=2),this.snapLines.setDrawRange(0,i),this.snapLines.update()},t.prototype.hideSnapLines=function(){this.setSnapLines()},t.prototype.updateHelperMatrix=function(){var e,t;if(void 0!==this.object){var n=this.object,r=n.parent;null!==r&&r.updateWorldMatrix(!0,!1),n.matrixAutoUpdate&&n.updateMatrix(),null!==r?(this.matrixWorld.multiplyMatrices(r.matrixWorld,n.hiddenMatrix),this.matrixWorld.multiplyMatrices(this.matrixWorld,n.matrix)):this.matrixWorld.multiplyMatrices(n.hiddenMatrix,n.matrix),this.matrix.copy(this.matrixWorld);try{for(var i=__values(this.children),o=i.next();!o.done;o=i.next())o.value.matrixWorld.copy(this.matrixWorld)}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}n.updateWorldMatrix(!0,!0)}},t.prototype.snap=function(e,t,n,r){var i;if(t.x=e.x,t.y=e.y,!this._snapEnabled)return t;var o=tempV2a.set(e.x,e.y),a=null===(i=this.object)||void 0===i?void 0:i.shape;if(void 0===a)return t;for(var s,c,u=!1,l=!1,h=o.x,f=o.y,d=0,p=a.points.length;d<p;d++){var m=a.points[d];if(void 0===n||m!==n){var v=m.position;Math.abs(v.x-o.x)<this._snapThreshold&&(h=v.x,s=m.position,u=!0),Math.abs(v.y-o.y)<this._snapThreshold&&(f=v.y,c=m.position,l=!0)}}if(this.useAngleSnapping&&void 0!==r){var g=tempV2b.set(r.x,r.y);o.set(h,f);var y=g.distanceTo(o),b=tempV2c.subVectors(g,o).angle()+Math.PI,w=Math.round(b/quarterPI)*quarterPI%(2*Math.PI);if(!0===u&&w!==halfPI&&w!==1.5*Math.PI){var E=h-g.x;f=g.y+Math.tan(w)*E,c=g}else if(!0===l&&0!==w&&w!==Math.PI){var x=f-g.y;h=g.x-x/Math.tan(Math.PI-w),s=g}else h=g.x+Math.cos(w)*y,f=g.y+Math.sin(w)*y,s=g,c=void 0;u=!0,l=!0}return u&&(t.x=h),l&&(t.y=f),this.setSnapLines(u?t:null,u?s:null,l?t:null,l?c:null),t},t.prototype.setNextPointDest=function(e){if(void 0!==this.object){var t;void 0!==e&&(t=this.snap(e,tempV2a,void 0,this.object.shape.getLastPoint().position));var n=null==t?void 0:t.x,r=null==t?void 0:t.y,i=this.nextLine.getX(0),o=this.nextLine.getY(0);this.nextLine.setXYZ(1,null!=n?n:i,null!=r?r:o),this.nextLine.update(),this.nextPoint.setXYZ(0,null!=n?n:i,null!=r?r:o,0),this.nextPoint.update(),this.nextPointDest.set(null!=n?n:i,null!=r?r:o,0)}},t.prototype.setSplitPointDest=function(e,t,n){void 0===n&&(n=0),this.splitPoint.position.set(e,t,n)},t.prototype.update=function(){if(void 0!==this.object&&void 0!==this.object.shape){for(var e=0,t=0,n=0,r=this.object.shape.points.length,i=0;i<r;i++){var o=0===i?r-1:i-1,a=i===r-1?0:i+1,s=this.object.shape.points[i],c=s.controls[0],u=s.controls[1],l=s.position.distanceTo(c.position),h=s.position.distanceTo(u.position),f=this.showAllControls||this.points.getSelection(i)||this.points.getSelection(o)||this.points.getSelection(a);this.points.setPositionAt(e,s.position),e++,this.controls.setPositionAt(t,c.position),this.controls.setVisibility(t,f&&l>this._snapThreshold),t++,this.controls.setPositionAt(t,u.position),this.controls.setVisibility(t,f&&h>this._snapThreshold),t++,f&&(this.controlLines.setPositionAt(n+0,s.position),this.controlLines.setPositionAt(n+1,c.position),this.controlLines.setPositionAt(n+2,s.position),this.controlLines.setPositionAt(n+3,u.position),n+=4)}var d=this.object.shape.points[r-1];d&&(this.nextLine.setPositionAt(0,d.position),this.nextLine.update()),this.controlLines.setDrawRange(0,n),this.controlLines.update(),this.vectorLineMesh.update(this.object.shape,this._subdivisions),this.vectorSelectedLineMesh.update(this.object.shape,this._subdivisions),this.points.update(),this.points.setDrawRange(0,e),this.controls.update(),this.controls.setDrawRange(0,t)}},t.prototype.clearPointSelection=function(){this.points.clearSelection()},t.prototype.setPointSelection=function(e){var t=this;this.clearPointSelection(),e.forEach((function(e){t._selectPoint(e)})),this.points.updateSelection(),this.update()},t.prototype._selectPoint=function(e){this.points.setSelection(e,!0)}})(EntityMixin(THREE.Group));var EntityHelperMixin=function(e,t){return function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.objectHelper=new t(n),n.enableHelper=!1,n}return __extends(n,e),Object.defineProperty(n.prototype,"visibility",{get:function(){return this.visible},set:function(e){this.visible=e,this.setHelperVisibility(e),this.setHelperChildrenVisibility(e)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"geometryHelper",{get:function(){return t.geometryHelper},enumerable:!1,configurable:!0}),n.prototype.setHelperVisibility=function(e){this.objectHelper.visible=e},n.prototype.setHelperChildrenVisibility=function(e){var t,n;try{for(var r=__values(this.children),i=r.next();!i.done;i=r.next()){var o=i.value;isEntity$1(o)&&o.traverseEntity((function(t){isHelperableEntity$1(t)&&t.visible&&(t.objectHelper.visible=e)}))}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}},n.prototype.raycast=function(e,t){this.objectHelper.raycast(e,t)},n.prototype.copy=function(t,n){return void 0===n&&(n=!0),e.prototype.copy.call(this,t,n),void 0!==t.enableHelper&&(this.enableHelper=t.enableHelper),void 0!==t.objectHelper&&(this.objectHelper.visible=t.objectHelper.visible),this},n.prototype.toJSON=function(t){var n=e.prototype.toJSON.call(this,t);return n.object.enableHelper=this.enableHelper,n},n.prototype.fromJSON=function(t){return e.prototype.fromJSON.call(this,t),void 0!==t.enableHelper&&(this.enableHelper=!0),this},n}(e)},CombinedCamera=function(e){function t(t,n,r,i,o){void 0===t&&(t=100),void 0===n&&(n=100),void 0===r&&(r=45),void 0===i&&(i=50),void 0===o&&(o=5e4);var a=e.call(this)||this;return a.objectType="CombinedCamera",a.width=window.innerWidth,a.height=window.innerHeight,a.orthoCamera=new THREE.OrthographicCamera(-.5*t,.5*t,.5*n,-.5*n,i,o),a.perspCamera=new THREE.PerspectiveCamera(r,t/n,i,o),a._cameraType="OrthographicCamera",a.left=a.orthoCamera.left,a.right=a.orthoCamera.right,a.top=a.orthoCamera.top,a.bottom=a.orthoCamera.bottom,a.far=a.orthoCamera.far,a.view=a.orthoCamera.view,a.aspect=a.perspCamera.aspect,a.fov=a.perspCamera.fov,a.focus=a.perspCamera.focus,a.filmGauge=a.perspCamera.filmGauge,a.filmOffset=a.perspCamera.filmOffset,a.targetOffset=1e3,a.toOrthographic(!0),a}return __extends(t,e),t.prototype.setDefault=function(){this.name="Default Camera",this.isEntity=!1,this.enableHelper=!1,this.objectHelper.visible=!1},Object.defineProperty(t.prototype,"cameraType",{get:function(){return this._cameraType},set:function(e){"PerspectiveCamera"===e?this.toPerspective():this.toOrthographic()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"near",{get:function(){return"PerspectiveCamera"===this._cameraType?this.perspCamera.near:this.orthoCamera.near},set:function(e){"PerspectiveCamera"===this._cameraType?this.perspCamera.near=e:this.orthoCamera.near=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"zoom",{get:function(){return"PerspectiveCamera"===this._cameraType?this.perspCamera.zoom:this.orthoCamera.zoom},set:function(e){e>=0&&("PerspectiveCamera"===this._cameraType?this.perspCamera.zoom=e:this.orthoCamera.zoom=e)},enumerable:!1,configurable:!0}),t.prototype.getTarget=function(e){var t=this.getWorldDirection(new THREE.Vector3).multiplyScalar(this.targetOffset);return e.copy(this.position).add(t),e},t.prototype.getViewFrontToObject=function(e){var t=e.getWorldPosition(new THREE.Vector3),n=e.getWorldDirection(new THREE.Vector3).multiplyScalar(this.targetOffset);return{position:t.clone().add(n),target:t}},t.prototype.getViewToObject=function(e){var t=e.getWorldPosition(new THREE.Vector3),n=this.getWorldDirection(new THREE.Vector3).multiplyScalar(this.targetOffset);return{position:t.clone().sub(n),target:t}},t.prototype.setViewplaneSize=function(e,t){this.left=.5*-e,this.right=.5*e,this.top=.5*t,this.bottom=.5*-t,this.aspect=e/t,this.updateProjectionMatrix()},t.prototype.toOrthographic=function(e){this.orthoCamera.left=this.left,this.orthoCamera.right=this.right,this.orthoCamera.top=this.top,this.orthoCamera.bottom=this.bottom,this.orthoCamera.view=this.view,this.orthoCamera.far=this.far,this.orthoCamera.updateProjectionMatrix(),this.projectionMatrix=this.orthoCamera.projectionMatrix,this.projectionMatrixInverse=this.orthoCamera.projectionMatrixInverse,this._cameraType="OrthographicCamera",!0!==this.enableHelper&&!0!==e||this.objectHelper.update()},t.prototype.toPerspective=function(e){this.perspCamera.aspect=this.aspect,this.perspCamera.fov=this.fov,this.perspCamera.view=this.view,this.perspCamera.far=this.far,this.perspCamera.updateProjectionMatrix(),this.projectionMatrix=this.perspCamera.projectionMatrix,this.projectionMatrixInverse=this.perspCamera.projectionMatrixInverse,this._cameraType="PerspectiveCamera",!0!==this.enableHelper&&!0!==e||this.objectHelper.update()},t.prototype.setFocalLength=function(e){this.perspCamera.setFocalLength(e),this.toPerspective()},t.prototype.getFocalLength=function(){return this.perspCamera.getFocalLength()},t.prototype.getEffectiveFOV=function(){return this.perspCamera.getEffectiveFOV()},t.prototype.getFilmWidth=function(){return this.perspCamera.getFilmWidth()},t.prototype.getFilmHeight=function(){return this.perspCamera.getFilmHeight()},t.prototype.setViewOffset=function(e,t,n,r,i,o){"PerspectiveCamera"===this._cameraType?(this.perspCamera.setViewOffset(e,t,n,r,i,o),this.toPerspective()):(this.orthoCamera.setViewOffset(e,t,n,r,i,o),this.toOrthographic())},t.prototype.clearViewOffset=function(){"PerspectiveCamera"===this._cameraType?(this.perspCamera.clearViewOffset(),this.toPerspective()):(this.orthoCamera.clearViewOffset(),this.toOrthographic())},t.prototype.updateProjectionMatrix=function(e){"PerspectiveCamera"===this._cameraType?this.toPerspective(e):"OrthographicCamera"===this._cameraType&&this.toOrthographic(e)},t.prototype.updateMatrixWorld=function(t){e.prototype.updateMatrixWorld.call(this,t),this.matrixWorldInverse.getInverse(this.matrixWorld)},t.prototype.updateWorldMatrix=function(t,n){e.prototype.updateWorldMatrix.call(this,t,n),this.matrixWorldInverse.getInverse(this.matrixWorld)},t.prototype.raycast=function(e,t){this.enableHelper&&this.objectHelper.visible&&this.objectHelper.raycast(e,t)},t.prototype.copy=function(t,n){return e.prototype.copy.call(this,t,n),this.orthoCamera.copy(t.orthoCamera),this.perspCamera.copy(t.perspCamera),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.far=t.far,this.view=null===t.view?null:Object.assign({},t.view),this._cameraType=t._cameraType,this.aspect=t.aspect,this.fov=t.fov,this.focus=t.focus,this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this.targetOffset=t.targetOffset,this.updateProjectionMatrix(),this},t.prototype.fromCameraRender=function(e){var t={near:this.orthoCamera.near,far:this.orthoCamera.far},n={near:this.perspCamera.near,far:this.perspCamera.far};return this.copy(e),this.name="",this.isEntity=!0,this.enableHelper=!0,this.objectHelper.visible=!0,this.orthoCamera.near=t.near,this.orthoCamera.far=t.far,this.perspCamera.near=n.near,this.perspCamera.far=n.far,this.updateProjectionMatrix(),this},t.prototype.toJSON=function(t){var n=e.prototype.toJSON.call(this,t),r=n.object;return r.objectType="CombinedCamera",r.cameraType=this.cameraType,r.targetOffset=this.targetOffset,r.left=this.left,r.right=this.right,r.top=this.top,r.bottom=this.bottom,null!==this.view&&(r.view=Object.assign({},this.view)),r.zoomOrtho=this.orthoCamera.zoom,r.nearOrtho=this.orthoCamera.near,r.far=this.far,r.aspect=this.aspect,r.fov=this.fov,r.focus=this.focus,r.filmGauge=this.filmGauge,r.filmOffset=this.filmOffset,r.zoomPersp=this.perspCamera.zoom,r.nearPersp=this.perspCamera.near,n},t.prototype.fromJSON=function(t){return e.prototype.fromJSON.call(this,t),this.cameraType=t.cameraType,void 0!==t.targetOffset&&(this.targetOffset=t.targetOffset),void 0!==t.left&&(this.left=t.left),void 0!==t.right&&(this.right=t.right),void 0!==t.top&&(this.top=t.top),void 0!==t.bottom&&(this.bottom=t.bottom),void 0!==t.view&&(this.view=Object.assign({},t.view)),void 0!==t.zoomOrtho&&(this.orthoCamera.zoom=t.zoomOrtho),void 0!==t.nearOrtho&&(this.orthoCamera.near=t.nearOrtho),void 0!==t.far&&(this.far=t.far),void 0!==t.aspect&&(this.aspect=t.aspect),void 0!==t.fov&&(this.fov=t.fov),void 0!==t.focus&&(this.focus=t.focus),void 0!==t.filmGauge&&(this.filmGauge=t.filmGauge),void 0!==t.filmOffset&&(this.filmOffset=t.filmOffset),void 0!==t.zoomPersp&&(this.perspCamera.zoom=t.zoomPersp),void 0!==t.nearPersp&&(this.perspCamera.near=t.nearPersp),this.updateProjectionMatrix(),this},t}(EntityHelperMixin(EntityMixin(THREE.Camera),CombinedCameraHelper)),EmptyObject=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.objectType="EmptyObject",t}return __extends(t,e),t.prototype.toJSON=function(t){var n=e.prototype.toJSON.call(this,t);return n.object.objectType="EmptyObject",n},t}(EntityHelperMixin(EntityMixin(THREE.Group),EmptyObjectHelper)),LightDirectional=function(e){function t(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=e.apply(this,__spread(t))||this;r.objectType="LightDirectional",r._gizmos={},r.shadow.mapSize.width=1024,r.shadow.mapSize.height=1024;var i=r.shadow,o=i.camera;o.top=1250,o.bottom=-1250,o.right=1250,o.left=-1250,o.near=1,o.far=2500;var a=new THREE.CameraHelper(r.shadow.camera);return a.visible=!1,r._gizmos.shadowmap=a,r.update(),r}return __extends(t,e),Object.defineProperty(t.prototype,"gizmos",{get:function(){return this._gizmos},enumerable:!1,configurable:!0}),t.prototype.showGizmos=function(){for(var e in this._gizmos){var t=this._gizmos[e];t instanceof THREE.CameraHelper&&(t.visible=!0)}},t.prototype.hideGizmos=function(){for(var e in this._gizmos){var t=this._gizmos[e];t instanceof THREE.CameraHelper&&(t.visible=!1)}},t.prototype.update=function(){for(var e in this.shadow.camera.updateProjectionMatrix(),this._gizmos){var t=this._gizmos[e];t instanceof THREE.CameraHelper&&t.update()}},t.prototype.updateMatrixWorld=function(t){e.prototype.updateMatrixWorld.call(this,t),!0===this.enableHelper&&!0===this.objectHelper.visible&&this.objectHelper.update()},t.prototype.toJSON=function(t){var n=e.prototype.toJSON.call(this,t),r=n.object;return r.objectType="LightDirectional",r.color=this.color.getHex(),r.intensity=this.intensity,r.shadow=this.shadow.toJSON(),n},t.prototype.fromJSON=function(t){e.prototype.fromJSON.call(this,t),this.color.set(t.color),this.intensity=t.intensity,this.shadow.radius=t.shadow.radius,this.shadow.mapSize.fromArray(t.shadow.mapSize);var n=this.shadow.camera,r=t.shadow.camera;return n.near=r.near,n.far=r.far,n.zoom=r.zoom,n.left=r.left,n.right=r.right,n.top=r.top,n.bottom=r.bottom,void 0!==r.view&&(n.view=Object.assign({},r.view)),this},t}(EntityHelperMixin(EntityMixin(THREE.DirectionalLight),DirectionalLightHelper)),LightPoint=function(e){function t(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=e.apply(this,__spread(t))||this;r.objectType="LightPoint",r._gizmos={},r.shadow.mapSize.width=1024,r.shadow.mapSize.height=1024;var i=r.shadow,o=i.camera;o.fov=90,o.aspect=1,o.near=100,o.far=2500;var a=new THREE.Vector3(-o.far+r.position.x,-o.far+r.position.y,-o.far+r.position.z),s=new THREE.Vector3(o.far+r.position.x,o.far+r.position.y,o.far+r.position.z),c=new THREE.Box3(a,s),u=new THREE.Box3Helper(c,new THREE.Color(16755200));return u.visible=!1,r._gizmos.shadowmap=u,r.update(),r}return __extends(t,e),Object.defineProperty(t.prototype,"gizmos",{get:function(){return this._gizmos},enumerable:!1,configurable:!0}),t.prototype.showGizmos=function(){for(var e in this._gizmos){var t=this._gizmos[e];t instanceof THREE.Box3Helper&&(t.visible=!0)}},t.prototype.hideGizmos=function(){for(var e in this._gizmos){var t=this._gizmos[e];t instanceof THREE.Box3Helper&&(t.visible=!1)}},t.prototype.update=function(){if(this.shadow&&(this.shadow.camera.updateProjectionMatrix(),this._gizmos))for(var e in this._gizmos){var t=this._gizmos[e];if(t instanceof THREE.Box3Helper){var n=this.shadow.camera,r=new THREE.Vector3(-n.far+this.position.x,-n.far+this.position.y,-n.far+this.position.z),i=new THREE.Vector3(n.far+this.position.x,n.far+this.position.y,n.far+this.position.z);t.box.set(r,i),t.updateMatrixWorld(!0)}}},t.prototype.updateMatrixWorld=function(t){e.prototype.updateWorldMatrix.call(this,t),!0===this.enableHelper&&!0===this.objectHelper.visible&&this.objectHelper.update()},t.prototype.toJSON=function(t){var n=e.prototype.toJSON.call(this,t),r=n.object;return r.objectType="LightPoint",r.color=this.color.getHex(),r.intensity=this.intensity,r.distance=this.distance,r.decay=this.decay,r.shadow=this.shadow.toJSON(),n},t.prototype.fromJSON=function(t){e.prototype.fromJSON.call(this,t),this.color.set(t.color),this.intensity=t.intensity,this.distance=t.distance,this.decay=t.decay,this.shadow.radius=t.shadow.radius,this.shadow.mapSize.fromArray(t.shadow.mapSize);var n=this.shadow.camera,r=t.shadow.camera;return n.near=r.near,n.far=r.far,n.zoom=r.zoom,n.fov=r.fov,n.focus=r.focus,n.aspect=r.aspect,n.filmGauge=r.filmGauge,n.filmOffset=r.filmOffset,void 0!==r.view&&(n.view=Object.assign({},r.view)),this},t}(EntityHelperMixin(EntityMixin(THREE.PointLight),PointLightHelper)),_v1=new THREE.Vector3,_position$1=new THREE.Vector3,_quaternion=new THREE.Quaternion,LightSpot=function(e){function t(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=e.apply(this,__spread(t))||this;r.objectType="LightSpot",r._gizmos={},r.shadow.mapSize.width=1024,r.shadow.mapSize.height=1024;var i=r.shadow,o=i.camera;o.fov=2*THREE.MathUtils.RAD2DEG*r.angle,o.aspect=1,o.near=100,o.far=2500;var a=new THREE.CameraHelper(r.shadow.camera);return a.visible=!1,r._gizmos.shadowmap=a,r.update(),r}return __extends(t,e),Object.defineProperty(t.prototype,"gizmos",{get:function(){return this._gizmos},enumerable:!1,configurable:!0}),t.prototype.showGizmos=function(){for(var e in this._gizmos){var t=this._gizmos[e];t instanceof THREE.CameraHelper&&(t.visible=!0)}},t.prototype.hideGizmos=function(){for(var e in this._gizmos){var t=this._gizmos[e];t instanceof THREE.CameraHelper&&(t.visible=!1)}},t.prototype.update=function(){for(var e in this.shadow.camera.updateProjectionMatrix(),this._gizmos){var t=this._gizmos[e];t instanceof THREE.CameraHelper&&t.update()}},t.prototype.updateMatrixWorld=function(t){e.prototype.updateWorldMatrix.call(this,t),_position$1.setFromMatrixPosition(this.matrixWorld),_quaternion.setFromRotationMatrix(this.matrixWorld),_v1.copy(this.up).applyQuaternion(_quaternion).negate().multiplyScalar(this.distance),this.target.position.copy(_position$1).add(_v1),this.target.updateMatrixWorld(),!0===this.enableHelper&&!0===this.objectHelper.visible&&this.objectHelper.update()},t.prototype.toJSON=function(t){var n=e.prototype.toJSON.call(this,t),r=n.object;return r.objectType="LightSpot",r.color=this.color.getHex(),r.intensity=this.intensity,r.distance=this.distance,r.angle=this.angle,r.decay=this.decay,r.penumbra=this.penumbra,r.shadow=this.shadow.toJSON(),n},t.prototype.fromJSON=function(t){e.prototype.fromJSON.call(this,t),this.color.set(t.color),this.intensity=t.intensity,this.distance=t.distance,this.angle=t.angle,this.decay=t.decay,this.penumbra=t.penumbra,this.shadow.radius=t.shadow.radius,this.shadow.mapSize.fromArray(t.shadow.mapSize);var n=this.shadow.camera,r=t.shadow.camera;return n.near=r.near,n.far=r.far,n.zoom=r.zoom,n.fov=r.fov,n.focus=r.focus,n.aspect=r.aspect,n.filmGauge=r.filmGauge,n.filmOffset=r.filmOffset,void 0!==r.view&&(n.view=Object.assign({},r.view)),this},t}(EntityHelperMixin(EntityMixin(THREE.SpotLight),SpotLightHelper));class BasicMaterial extends THREE.MeshPhongMaterial{constructor(e){let t;void 0===e&&(e={}),void 0===e.color&&(e.color=5855577),void 0===e.transparent&&(e.transparent=!0),void 0===e.side&&(e.side=THREE.DoubleSide),void 0!==e.map&&(t=e.map,delete e.map),super(e),this.userData.type="BasicMaterial",this.userData.category="Basic",this.userData.layers=new LayerStack(this.color,this.opacity),t&&(async()=>{for(;void 0===t.image;)await new Promise(e=>requestAnimationFrame(e));this.userData.layers.addLayerAt(1,{id:this.userData.layers.id++,type:"texture",texture:t}),this.dispose()})(),this.onBeforeCompile=ShaderLib.createCallback(this)}get layersList(){return this.userData.layers}set layersList(e){this.userData.layers=e}equals(e){return this.userData.type===e.userData.type&&this.userData.layers.uuid==e.userData.layers.uuid}copy(e){if(void 0!==e.userData.layers&&e.userData.layers instanceof LayerStack==1){const t=e.userData.layers;e.userData.layers=void 0,super.copy(e),e.userData.layers=t,this.userData.layers=t.clone()}else super.copy(e);return this}toJSON(e){const t=this.userData.layers;this.userData.layers=void 0;let n=super.toJSON(e);return n.userData=JSON.parse(JSON.stringify(this.userData)),n.userData.layers=t.toJSON(e),this.userData.layers=t,n}static fromMaterial(e){const t={};return e.color&&(t.color=e.color),e.opacity&&(t.opacity=e.opacity),e.map&&(t.map=e.map),new PhongMaterial(t)}static fromJSON(e,t){const n=new BasicMaterial;return n.copy(e),n.userData.layers=(new LayerStack).fromJSON(e.userData.layers,t),n}dispose(){super.dispose(),this.userData.layers.dispose()}}class LambertMaterial extends THREE.MeshLambertMaterial{constructor(e){void 0===e&&(e={}),void 0===e.color&&(e.color=5855577),void 0===e.transparent&&(e.transparent=!0),void 0===e.side&&(e.side=THREE.FrontSide);const t=e.map;void 0!==e.map&&delete e.map,super(e),this.userData.type="LambertMaterial",this.userData.category="Lambert",this.userData.layers=new LayerStack(this.color,this.opacity),t&&(async()=>{for(;void 0===t.image;)await new Promise(e=>requestAnimationFrame(e));this.userData.layers.addLayerAt(1,{id:this.userData.layers.id++,type:"texture",texture:t}),this.dispose()})(),this.onBeforeCompile=ShaderLib.createCallback(this)}get layersList(){return this.userData.layers}set layersList(e){this.userData.layers=e}equals(e){return this.userData.type===e.userData.type&&this.userData.layers.uuid==e.userData.layers.uuid}copy(e){if(void 0!==e.userData.layers&&e.userData.layers instanceof LayerStack==1){const t=e.userData.layers;e.userData.layers=void 0,super.copy(e),e.userData.layers=t,this.userData.layers=t.clone()}else super.copy(e);return this}toJSON(e){const t=this.userData.layers;this.userData.layers=void 0;let n=super.toJSON(e);return n.userData=JSON.parse(JSON.stringify(this.userData)),n.userData.layers=t.toJSON(e),this.userData.layers=t,n}static fromJSON(e,t){const n=new LambertMaterial;return n.copy(e),n.userData.layers=(new LayerStack).fromJSON(e.userData.layers,t),n}dispose(){super.dispose(),this.userData.layers.dispose()}}class PhongMaterial$1 extends THREE.MeshPhongMaterial{constructor(e){let t;void 0===e&&(e={}),void 0===e.color&&(e.color=5855577),void 0===e.transparent&&(e.transparent=!0),void 0===e.side&&(e.side=THREE.FrontSide),void 0!==e.map&&(t=e.map,delete e.map),super(e),this.userData.type="PhongMaterial",this.userData.category="Phong",this.userData.layers=new LayerStack(this.color,this.opacity),t&&(async()=>{for(;void 0===t.image;)await new Promise(e=>requestAnimationFrame(e));this.userData.layers.addLayerAt(1,{id:this.userData.layers.id++,type:"texture",texture:t}),this.dispose()})(),this.onBeforeCompile=ShaderLib.createCallback(this)}get layersList(){return this.userData.layers}set layersList(e){this.userData.layers=e}equals(e){return this.userData.type===e.userData.type&&this.userData.layers.uuid==e.userData.layers.uuid}copy(e){if(void 0!==e.userData.layers&&e.userData.layers instanceof LayerStack==1){const t=e.userData.layers;e.userData.layers=void 0,super.copy(e),e.userData.layers=t,this.userData.layers=t.clone()}else super.copy(e);return this}static fromMaterial(e){const t={};return e.color&&(t.color=e.color),e.opacity&&(t.opacity=e.opacity),e.map&&(t.map=e.map),new PhongMaterial$1(t)}toJSON(e){const t=this.userData.layers;this.userData.layers=void 0;let n=super.toJSON(e);return n.userData=JSON.parse(JSON.stringify(this.userData)),n.userData.layers=t.toJSON(e),this.userData.layers=t,n}static fromJSON(e,t){const n=new PhongMaterial$1;return n.copy(e),n.userData.layers=(new LayerStack).fromJSON(e.userData.layers,t),n}dispose(){super.dispose(),this.userData.layers.dispose()}}class PhysicalMaterial extends THREE.MeshPhysicalMaterial{constructor(e){void 0===e&&(e={}),void 0===e.color&&(e.color=5855577),void 0===e.transparent&&(e.transparent=!0),void 0===e.side&&(e.side=THREE.FrontSide),void 0===e.roughness&&(e.roughness=.3);const t=e.map;void 0!==e.map&&delete e.map,super(e),this.userData.type="PhysicalMaterial",this.userData.category="Physical",this.userData.layers=new LayerStack(this.color,this.opacity),t&&(async()=>{for(;void 0===t.image;)await new Promise(e=>requestAnimationFrame(e));this.userData.layers.addLayerAt(1,{id:this.userData.layers.id++,type:"texture",texture:t}),this.dispose()})(),this.onBeforeCompile=ShaderLib.createCallback(this)}get layersList(){return this.userData.layers}set layersList(e){this.userData.layers=e}equals(e){return this.userData.type===e.userData.type&&this.userData.layers.uuid==e.userData.layers.uuid}copy(e){if(void 0!==e.userData.layers&&e.userData.layers instanceof LayerStack==1){const t=e.userData.layers;e.userData.layers=void 0,super.copy(e),e.userData.layers=t,this.userData.layers=t.clone()}else super.copy(e);return this}toJSON(e){const t=this.userData.layers;this.userData.layers=void 0;let n=super.toJSON(e);return n.userData=JSON.parse(JSON.stringify(this.userData)),n.userData.layers=t.toJSON(e),this.userData.layers=t,n}static fromJSON(e,t){const n=new PhysicalMaterial;return n.copy(e),n.userData.layers=(new LayerStack).fromJSON(e.userData.layers,t),n}dispose(){super.dispose(),this.userData.layers.dispose()}}class ToonMaterial extends THREE.MeshToonMaterial{constructor(e){void 0===e&&(e={}),void 0===e.color&&(e.color=5855577),void 0===e.transparent&&(e.transparent=!0),void 0===e.side&&(e.side=THREE.FrontSide);const t=e.map;void 0!==e.map&&delete e.map,super(e),this.userData.type="ToonMaterial",this.userData.category="Toon",this.userData.layers=new LayerStack(this.color,this.opacity),t&&(async()=>{for(;void 0===t.image;)await new Promise(e=>requestAnimationFrame(e));this.userData.layers.addLayerAt(1,{id:this.userData.layers.id++,type:"texture",texture:t}),this.dispose()})(),this.onBeforeCompile=ShaderLib.createCallback(this)}get layersList(){return this.userData.layers}set layersList(e){this.userData.layers=e}equals(e){return this.userData.type===e.userData.type&&this.userData.layers.uuid==e.userData.layers.uuid}copy(e){if(void 0!==e.userData.layers&&e.userData.layers instanceof LayerStack==1){const t=e.userData.layers;e.userData.layers=void 0,super.copy(e),e.userData.layers=t,this.userData.layers=t.clone()}else super.copy(e);return this}toJSON(e){const t=this.userData.layers;this.userData.layers=void 0;let n=super.toJSON(e);return n.userData=JSON.parse(JSON.stringify(this.userData)),n.userData.layers=t.toJSON(e),this.userData.layers=t,n}static fromJSON(e,t){const n=new ToonMaterial;return n.copy(e),n.userData.layers=(new LayerStack).fromJSON(e.userData.layers,t),n}dispose(){super.dispose(),this.userData.layers.dispose()}}var isVideoElement=function(e){return"VIDEO"===e.tagName},TextureUtils=function(){function e(){}return e.resize=function(e,t,n){var r,i=e/t;if(n.image){var o=n.image;i>(r=isVideoElement(o)?o.videoWidth/o.videoHeight:o.width/o.height)&&("WEBCAM"==n.imageType?n.repeat.set(-1,1*r/i):n.repeat.set(1,1*r/i)),i<r&&("WEBCAM"==n.imageType?n.repeat.set(1*i/r*-1,1):n.repeat.set(1*i/r,1)),i==r&&("WEBCAM"==n.imageType?n.repeat.set(-1,1):n.repeat.set(1,1))}},e.resizeTextureLayer=function(e,t,n){var r,i=e/t,o=n.image.width/n.image.height;r=i>o?{x:1,y:o/i}:i<o?{x:i/o,y:1}:{x:1,y:1},n.repeat.set(r.x,r.y),n.updateMatrix()},e.resizeTextureLayers=function(t,n,r){for(var i=r.userData.layers,o=i.getLayers(),a=0;a<o.length;a++){var s=o[a];if("texture"===s.type){var c=s.id;e.resizeTextureLayer(t,n,s.uniforms["f"+c+"_texture"].value),i.updateLayerUniform(c,"f"+c+"_mat")}}},e.resizeComplex=function(e,t,n,r){var i,o=e/t,a=n.image;i=isVideoElement(a)?a.videoWidth/a.videoHeight:a.width/a.height,r.geometry.type.includes("Shape")?(o>i&&("WEBCAM"==n.imageType?n.repeat.set(1/e*-1,1/t*i/o):n.repeat.set(1/e,1/t*i/o)),o<i&&("WEBCAM"==n.imageType?n.repeat.set(1/e*o/i*-1,1/t):n.repeat.set(1/e*o/i,1/t)),o==i&&("WEBCAM"==n.imageType?n.repeat.set(1/e*-1,1/t):n.repeat.set(1/e,1/t))):(o>i&&("WEBCAM"==n.imageType?n.repeat.set(-1,1*i/o):n.repeat.set(1,1*i/o)),o<i&&("WEBCAM"==n.imageType?n.repeat.set(1*o/i*-1,1):n.repeat.set(1*o/i,1)),o==i&&("WEBCAM"==n.imageType?n.repeat.set(-1,1):n.repeat.set(1,1)))},e}(),Mesh2D=function(e){function t(t,n){void 0===n&&(n=new BasicMaterial);var r=e.call(this,t,n)||this;return r.objectType="Mesh2D",r.castShadow=!0,r.receiveShadow=!0,r}return __extends(t,e),t.prototype.updateGeometry=function(t){e.prototype.updateGeometry.call(this,t),this.material.userData.layers&&TextureUtils.resizeTextureLayers(this.geometry.userData.parameters.width,this.geometry.userData.parameters.height,this.material)},t.prototype.resizeGeometry=function(t,n){e.prototype.resizeGeometry.call(this,t,n,0),this.material.userData.layers&&TextureUtils.resizeTextureLayers(this.geometry.userData.parameters.width,this.geometry.userData.parameters.height,this.material)},t.prototype.toJSON=function(t){var n=e.prototype.toJSON.call(this,t);return n.object.objectType="Mesh2D",n},t.fromTexture=function(e){var n,r;if(e instanceof THREE.VideoTexture){var i=e.image;n=.5*i.videoWidth,r=.5*i.videoHeight}else{var o=e.image;n=.5*o.width,r=.5*o.height}var a=RectangleGeometry.create({parameters:{width:n,height:r}}),s=new BasicMaterial;return s.layersList.changeLayer(0,{type:"texture",texture:e}),s.layersList.moveLayer(0,1),s.dispose(),new t(a,s)},t}(AbstractMesh),Mesh3D=function(e){function t(t,n){void 0===n&&(n=new PhongMaterial$1);var r=e.call(this,t,n)||this;return r.objectType="Mesh3D",r.castShadow=!0,r.receiveShadow=!0,r}return __extends(t,e),t.prototype.toJSON=function(t){var n=e.prototype.toJSON.call(this,t);return n.object.objectType="Mesh3D",n},t}(AbstractMesh);(function(e){function t(t,n){void 0===n&&(n=new PhongMaterial$1);var r=e.call(this,t,n)||this;return r.objectType="NonParametric",r}__extends(t,e),t.prototype.toJSON=function(t){var n=e.prototype.toJSON.call(this,t);return n.object.objectType="NonParametric",n}})(Mesh3D);var PlayMode=function(){function e(e,t,n){var r=this;this.isEnable=!1,this._enableEvent={},this._map={},this._raycaster=new Raycaster,this._intersection=new THREE.Vector3,this._plane=new THREE.Plane,this._normal=new THREE.Vector3,this._position=new THREE.Vector3,this._onMouseDown=function(e){var t;r._raycaster.setFromCamera(r._getPointer(e),r._camera);var n=r._scene.raycastMesh(r._raycaster),i=n.length>0?n[0].object:void 0;i&&(null===(t=i.interactionCache.mouseDown)||void 0===t||t.dispatch(),i.traverseAncestors((function(e){var t;e instanceof EmptyObject&&(null===(t=e.interactionCache.mouseDown)||void 0===t||t.dispatch())})))},this._onMouseUp=function(e){var t;r._raycaster.setFromCamera(r._getPointer(e),r._camera);var n=r._scene.raycastMesh(r._raycaster),i=n.length>0?n[0].object:void 0;i&&(null===(t=i.interactionCache.mouseUp)||void 0===t||t.dispatch(),i.traverseAncestors((function(e){var t;e instanceof EmptyObject&&(null===(t=e.interactionCache.mouseUp)||void 0===t||t.dispatch())})))},this._onMouseMove=function(e){var t,n,i,o,a;if(r._raycaster.setFromCamera(r._getPointer(e),r._camera),r._camera.getWorldDirection(r._normal),r._normal.negate(),void 0!==r._enableEvent[INTERACTION_EVENT.MOUSE_HOVER]){var s=r._scene.raycastMesh(r._raycaster),c=s.length>0?s[0].object:void 0;if(r._prevObject!==c){if(void 0!==r._prevObject&&(null===(i=r._prevObject.interactionCache.mouseHover)||void 0===i||i.dispatchReverse(),r._prevSubObjects))try{for(var u=__values(r._prevSubObjects),l=u.next();!l.done;l=u.next())null===(o=l.value.interactionCache.mouseHover)||void 0===o||o.dispatchReverse()}catch(e){t={error:e}}finally{try{l&&!l.done&&(n=u.return)&&n.call(u)}finally{if(t)throw t.error}}void 0!==c&&(null===(a=c.interactionCache.mouseHover)||void 0===a||a.dispatch(),r._prevSubObjects=[],c.traverseAncestors((function(e){var t;if(e instanceof EmptyObject){var n=e.interactionCache.mouseHover;n&&(null===(t=r._prevSubObjects)||void 0===t||t.push(e),null==n||n.dispatch())}})))}r._prevObject=c}void 0!==r._enableEvent[INTERACTION_EVENT.LOOK_AT]&&r._map[INTERACTION_EVENT.LOOK_AT].forEach((function(e){var t,n=null===(t=e.interactionCache.lookAt)||void 0===t?void 0:t.distance;void 0!==n&&(r._plane.set(r._normal,-n),r._raycaster.ray.intersectPlane(r._plane,r._intersection),e.interaction.lookAt(r._intersection))})),void 0!==r._enableEvent[INTERACTION_EVENT.FOLLOW]&&r._map[INTERACTION_EVENT.FOLLOW].forEach((function(e){r._plane.setFromNormalAndCoplanarPoint(r._normal,e.getWorldPosition(r._position)),r._raycaster.ray.intersectPlane(r._plane,r._intersection),e.interaction.follow(r._intersection)}))},this._onKeyDown=function(e){r._map[INTERACTION_EVENT.KEY_DOWN].forEach((function(t){var n,r=null===(n=t.interactionCache.keyDown)||void 0===n?void 0:n.find((function(t){return t.key===e.key}));null==r||r.dispatch()}))},this._onKeyUp=function(e){r._map[INTERACTION_EVENT.KEY_UP].forEach((function(t){var n,r=null===(n=t.interactionCache.keyUp)||void 0===n?void 0:n.find((function(t){return t.key===e.key}));null==r||r.dispatch()}))},this._domElement=e,this._scene=t,this._camera=n}return e.prototype.activate=function(){var e,t,n,r=this;if(this.isEnable=!0,this._scene.traverseEntity((function(e){var t,n;if(void 0!==e.interaction){e.interaction.start();try{for(var i=__values(e.interaction.events),o=i.next();!o.done;o=i.next()){var a=o.value.type;r._enableEvent[a]=!0,a!==INTERACTION_EVENT.KEY_DOWN&&a!==INTERACTION_EVENT.KEY_UP&&a!==INTERACTION_EVENT.START&&a!==INTERACTION_EVENT.LOOK_AT&&a!==INTERACTION_EVENT.FOLLOW||(void 0===r._map[a]&&(r._map[a]=[]),r._map[a].push(e))}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}}})),void 0!==this._enableEvent[INTERACTION_EVENT.START])try{for(var i=__values(this._map[INTERACTION_EVENT.START]),o=i.next();!o.done;o=i.next())null===(n=o.value.interactionCache.start)||void 0===n||n.dispatch()}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}void 0!==this._enableEvent[INTERACTION_EVENT.MOUSE_DOWN]&&this._domElement.addEventListener("pointerdown",this._onMouseDown,!1),void 0!==this._enableEvent[INTERACTION_EVENT.MOUSE_UP]&&this._domElement.addEventListener("pointerup",this._onMouseUp,!1),void 0===this._enableEvent[INTERACTION_EVENT.MOUSE_HOVER]&&void 0===this._enableEvent[INTERACTION_EVENT.LOOK_AT]&&void 0===this._enableEvent[INTERACTION_EVENT.FOLLOW]||this._domElement.addEventListener("pointermove",this._onMouseMove,!1),void 0!==this._enableEvent[INTERACTION_EVENT.KEY_DOWN]&&document.addEventListener("keydown",this._onKeyDown,!1),void 0!==this._enableEvent[INTERACTION_EVENT.KEY_UP]&&document.addEventListener("keyup",this._onKeyUp,!1)},e.prototype.deactivate=function(){this._scene.traverseEntity((function(e){void 0!==e.interaction&&e.interaction.end(),e.interaction.cache=void 0})),void 0!==this._enableEvent[INTERACTION_EVENT.MOUSE_DOWN]&&this._domElement.removeEventListener("pointerdown",this._onMouseDown),void 0!==this._enableEvent[INTERACTION_EVENT.MOUSE_UP]&&this._domElement.removeEventListener("pointerup",this._onMouseUp),void 0===this._enableEvent[INTERACTION_EVENT.MOUSE_HOVER]&&void 0===this._enableEvent[INTERACTION_EVENT.LOOK_AT]&&void 0===this._enableEvent[INTERACTION_EVENT.FOLLOW]||this._domElement.removeEventListener("pointermove",this._onMouseMove),void 0!==this._enableEvent[INTERACTION_EVENT.KEY_DOWN]&&document.removeEventListener("keydown",this._onKeyDown),void 0!==this._enableEvent[INTERACTION_EVENT.KEY_UP]&&document.removeEventListener("keyup",this._onKeyUp),this._enableEvent={},this._map={},this.isEnable=!1},e.prototype.reset=function(){var e,t,n;if(this._scene.traverseEntity((function(e){e.interaction.start()})),void 0!==this._enableEvent[INTERACTION_EVENT.START])try{for(var r=__values(this._map[INTERACTION_EVENT.START]),i=r.next();!i.done;i=r.next())null===(n=i.value.interactionCache.start)||void 0===n||n.dispatch()}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}},e.prototype._getPointer=function(e){var t=this._domElement.getBoundingClientRect();return{x:(e.clientX-t.left)/t.width*2-1,y:-(e.clientY-t.top)/t.height*2+1}},e}(),ColorChannel={RED:0,GREEN:1,BLUE:2,ALPHA:3},shader_default2="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",shader_default3="uniform sampler2D inputBuffer;uniform sampler2D cocBuffer;uniform vec2 texelSize;uniform float scale;\n#if PASS == 1\nuniform vec4 kernel64[32];\n#else\nuniform vec4 kernel16[8];\n#endif\nvarying vec2 vUv;void main(){\n#ifdef FOREGROUND\nvec2 CoCNearFar=texture2D(cocBuffer,vUv).rg;float CoC=CoCNearFar.r*scale;\n#else\nfloat CoC=texture2D(cocBuffer,vUv).g*scale;\n#endif\nif(CoC==0.0){gl_FragColor=texture2D(inputBuffer,vUv);}else{\n#ifdef FOREGROUND\nvec2 step=texelSize*max(CoC,CoCNearFar.g*scale);\n#else\nvec2 step=texelSize*CoC;\n#endif\n#if PASS == 1\nvec4 acc=vec4(0.0);for(int i=0;i<32;++i){vec4 kernel=kernel64[i];vec2 uv=step*kernel.xy+vUv;acc+=texture2D(inputBuffer,uv);uv=step*kernel.zw+vUv;acc+=texture2D(inputBuffer,uv);}gl_FragColor=acc/64.0;\n#else\nvec4 maxValue=texture2D(inputBuffer,vUv);for(int i=0;i<8;++i){vec4 kernel=kernel16[i];vec2 uv=step*kernel.xy+vUv;maxValue=max(texture2D(inputBuffer,uv),maxValue);uv=step*kernel.zw+vUv;maxValue=max(texture2D(inputBuffer,uv),maxValue);}gl_FragColor=maxValue;\n#endif\n}}",BokehMaterial=class extends THREE.ShaderMaterial{constructor(e=!1,t=!1){super({type:"BokehMaterial",defines:{PASS:e?"2":"1"},uniforms:{kernel64:new THREE.Uniform(null),kernel16:new THREE.Uniform(null),inputBuffer:new THREE.Uniform(null),cocBuffer:new THREE.Uniform(null),texelSize:new THREE.Uniform(new THREE.Vector2),scale:new THREE.Uniform(1)},fragmentShader:shader_default3,vertexShader:shader_default2,blending:THREE.NoBlending,depthWrite:!1,depthTest:!1}),this.toneMapped=!1,t&&(this.defines.FOREGROUND="1"),this.generateKernel()}generateKernel(){const e=new Float32Array(128),t=new Float32Array(32);let n=0,r=0;for(let a=0;a<80;++a){const i=2.39996323*a,o=Math.sqrt(a)/Math.sqrt(80),s=o*Math.cos(i),c=o*Math.sin(i);a%5==0?(t[r++]=s,t[r++]=c):(e[n++]=s,e[n++]=c)}const i=[],o=[];for(let a=0;a<128;)i.push(new THREE.Vector4(e[a++],e[a++],e[a++],e[a++]));for(let a=0;a<32;)o.push(new THREE.Vector4(t[a++],t[a++],t[a++],t[a++]));this.uniforms.kernel64.value=i,this.uniforms.kernel16.value=o}setTexelSize(e,t){this.uniforms.texelSize.value.set(e,t)}},shader_default4="#include <common>\n#include <packing>\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nuniform highp sampler2D depthBuffer;\n#else\nuniform mediump sampler2D depthBuffer;\n#endif\nuniform float focusDistance;uniform float focalLength;uniform float cameraNear;uniform float cameraFar;varying vec2 vUv;float readDepth(const in vec2 uv){\n#if DEPTH_PACKING == 3201\nreturn unpackRGBAToDepth(texture2D(depthBuffer,uv));\n#else\nreturn texture2D(depthBuffer,uv).r;\n#endif\n}void main(){float depth=readDepth(vUv);\n#ifdef PERSPECTIVE_CAMERA\nfloat viewZ=perspectiveDepthToViewZ(depth,cameraNear,cameraFar);float linearDepth=viewZToOrthographicDepth(viewZ,cameraNear,cameraFar);\n#else\nfloat linearDepth=depth;\n#endif\nfloat signedDistance=linearDepth-focusDistance;float magnitude=smoothstep(0.0,focalLength,abs(signedDistance));gl_FragColor.rg=vec2(step(signedDistance,0.0)*magnitude,step(0.0,signedDistance)*magnitude);}",CircleOfConfusionMaterial=class extends THREE.ShaderMaterial{constructor(e){super({type:"CircleOfConfusionMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new THREE.Uniform(null),focusDistance:new THREE.Uniform(0),focalLength:new THREE.Uniform(0),cameraNear:new THREE.Uniform(.3),cameraFar:new THREE.Uniform(1e3)},fragmentShader:shader_default4,vertexShader:shader_default2,blending:THREE.NoBlending,depthWrite:!1,depthTest:!1}),this.toneMapped=!1,this.adoptCameraSettings(e)}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}adoptCameraSettings(e=null){null!==e&&(this.uniforms.cameraNear.value=e.near,this.uniforms.cameraFar.value=e.far,e instanceof THREE.PerspectiveCamera?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}},shader_default5="varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;\n#if EDGE_DETECTION_MODE != 0\nvarying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;\n#endif\n#if EDGE_DETECTION_MODE == 1\n#include <common>\n#endif\n#if EDGE_DETECTION_MODE == 0 || PREDICATION_MODE == 1\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nuniform highp sampler2D depthBuffer;\n#else\nuniform mediump sampler2D depthBuffer;\n#endif\nfloat readDepth(const in vec2 uv){\n#if DEPTH_PACKING == 3201\nreturn unpackRGBAToDepth(texture2D(depthBuffer,uv));\n#else\nreturn texture2D(depthBuffer,uv).r;\n#endif\n}vec3 gatherNeighbors(){float p=readDepth(vUv);float pLeft=readDepth(vUv0);float pTop=readDepth(vUv1);return vec3(p,pLeft,pTop);}\n#elif PREDICATION_MODE == 2\nuniform sampler2D predicationBuffer;vec3 gatherNeighbors(){float p=texture2D(predicationBuffer,vUv).r;float pLeft=texture2D(predicationBuffer,vUv0).r;float pTop=texture2D(predicationBuffer,vUv1).r;return vec3(p,pLeft,pTop);}\n#endif\n#if PREDICATION_MODE != 0\nvec2 calculatePredicatedThreshold(){vec3 neighbours=gatherNeighbors();vec2 delta=abs(neighbours.xx-neighbours.yz);vec2 edges=step(PREDICATION_THRESHOLD,delta);return PREDICATION_SCALE*EDGE_THRESHOLD*(1.0-PREDICATION_STRENGTH*edges);}\n#endif\n#if EDGE_DETECTION_MODE != 0\nuniform sampler2D inputBuffer;\n#endif\nvoid main(){\n#if EDGE_DETECTION_MODE == 0\nconst vec2 threshold=vec2(DEPTH_THRESHOLD);\n#elif PREDICATION_MODE != 0\nvec2 threshold=calculatePredicatedThreshold();\n#else\nconst vec2 threshold=vec2(EDGE_THRESHOLD);\n#endif\n#if EDGE_DETECTION_MODE == 0\nvec3 neighbors=gatherNeighbors();vec2 delta=abs(neighbors.xx-vec2(neighbors.y,neighbors.z));vec2 edges=step(threshold,delta);if(dot(edges,vec2(1.0))==0.0){discard;}gl_FragColor=vec4(edges,0.0,1.0);\n#elif EDGE_DETECTION_MODE == 1\nfloat l=linearToRelativeLuminance(texture2D(inputBuffer,vUv).rgb);float lLeft=linearToRelativeLuminance(texture2D(inputBuffer,vUv0).rgb);float lTop=linearToRelativeLuminance(texture2D(inputBuffer,vUv1).rgb);vec4 delta;delta.xy=abs(l-vec2(lLeft,lTop));vec2 edges=step(threshold,delta.xy);if(dot(edges,vec2(1.0))==0.0){discard;}float lRight=linearToRelativeLuminance(texture2D(inputBuffer,vUv2).rgb);float lBottom=linearToRelativeLuminance(texture2D(inputBuffer,vUv3).rgb);delta.zw=abs(l-vec2(lRight,lBottom));vec2 maxDelta=max(delta.xy,delta.zw);float lLeftLeft=linearToRelativeLuminance(texture2D(inputBuffer,vUv4).rgb);float lTopTop=linearToRelativeLuminance(texture2D(inputBuffer,vUv5).rgb);delta.zw=abs(vec2(lLeft,lTop)-vec2(lLeftLeft,lTopTop));maxDelta=max(maxDelta.xy,delta.zw);float finalDelta=max(maxDelta.x,maxDelta.y);edges.xy*=step(finalDelta,LOCAL_CONTRAST_ADAPTATION_FACTOR*delta.xy);gl_FragColor=vec4(edges,0.0,1.0);\n#elif EDGE_DETECTION_MODE == 2\nvec4 delta;vec3 c=texture2D(inputBuffer,vUv).rgb;vec3 cLeft=texture2D(inputBuffer,vUv0).rgb;vec3 t=abs(c-cLeft);delta.x=max(max(t.r,t.g),t.b);vec3 cTop=texture2D(inputBuffer,vUv1).rgb;t=abs(c-cTop);delta.y=max(max(t.r,t.g),t.b);vec2 edges=step(threshold,delta.xy);if(dot(edges,vec2(1.0))==0.0){discard;}vec3 cRight=texture2D(inputBuffer,vUv2).rgb;t=abs(c-cRight);delta.z=max(max(t.r,t.g),t.b);vec3 cBottom=texture2D(inputBuffer,vUv3).rgb;t=abs(c-cBottom);delta.w=max(max(t.r,t.g),t.b);vec2 maxDelta=max(delta.xy,delta.zw);vec3 cLeftLeft=texture2D(inputBuffer,vUv4).rgb;t=abs(c-cLeftLeft);delta.z=max(max(t.r,t.g),t.b);vec3 cTopTop=texture2D(inputBuffer,vUv5).rgb;t=abs(c-cTopTop);delta.w=max(max(t.r,t.g),t.b);maxDelta=max(maxDelta.xy,delta.zw);float finalDelta=max(maxDelta.x,maxDelta.y);edges*=step(finalDelta,LOCAL_CONTRAST_ADAPTATION_FACTOR*delta.xy);gl_FragColor=vec4(edges,0.0,1.0);\n#endif\n}",shader_default6="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;\n#if EDGE_DETECTION_MODE != 0\nvarying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;\n#endif\nvoid main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,0.0);vUv1=vUv+texelSize*vec2(0.0,-1.0);\n#if EDGE_DETECTION_MODE != 0\nvUv2=vUv+texelSize*vec2(1.0,0.0);vUv3=vUv+texelSize*vec2(0.0,1.0);vUv4=vUv+texelSize*vec2(-2.0,0.0);vUv5=vUv+texelSize*vec2(0.0,-2.0);\n#endif\ngl_Position=vec4(position.xy,1.0,1.0);}",shader_default7="#include <common>\n#include <dithering_pars_fragment>\nuniform sampler2D inputBuffer;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;\n#include <dithering_fragment>\n}",shader_default8="uniform vec2 texelSize;uniform vec2 halfTexelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize*vec2(kernel)+halfTexelSize)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}",ConvolutionMaterial=class extends THREE.ShaderMaterial{constructor(e=new THREE.Vector2){super({type:"ConvolutionMaterial",uniforms:{inputBuffer:new THREE.Uniform(null),texelSize:new THREE.Uniform(new THREE.Vector2),halfTexelSize:new THREE.Uniform(new THREE.Vector2),kernel:new THREE.Uniform(0),scale:new THREE.Uniform(1)},fragmentShader:shader_default7,vertexShader:shader_default8,blending:THREE.NoBlending,depthWrite:!1,depthTest:!1}),this.toneMapped=!1,this.setTexelSize(e.x,e.y),this.kernelSize=KernelSize.LARGE}getKernel(){return kernelPresets[this.kernelSize]}setTexelSize(e,t){this.uniforms.texelSize.value.set(e,t),this.uniforms.halfTexelSize.value.set(e,t).multiplyScalar(.5)}},kernelPresets=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],KernelSize={VERY_SMALL:0,SMALL:1,MEDIUM:2,LARGE:3,VERY_LARGE:4,HUGE:5},shader_default9="uniform sampler2D inputBuffer;uniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;\n#include <encodings_fragment>\n}",CopyMaterial=class extends THREE.ShaderMaterial{constructor(){super({type:"CopyMaterial",uniforms:{inputBuffer:new THREE.Uniform(null),opacity:new THREE.Uniform(1)},fragmentShader:shader_default9,vertexShader:shader_default2,blending:THREE.NoBlending,depthWrite:!1,depthTest:!1}),this.toneMapped=!1}},EdgeDetectionMaterial=class extends THREE.ShaderMaterial{constructor(e=new THREE.Vector2,t=EdgeDetectionMode.COLOR){super({type:"EdgeDetectionMaterial",defines:{LOCAL_CONTRAST_ADAPTATION_FACTOR:"2.0",EDGE_THRESHOLD:"0.1",DEPTH_THRESHOLD:"0.01",PREDICATION_MODE:"0",PREDICATION_THRESHOLD:"0.01",PREDICATION_SCALE:"2.0",PREDICATION_STRENGTH:"1.0",DEPTH_PACKING:"0"},uniforms:{inputBuffer:new THREE.Uniform(null),depthBuffer:new THREE.Uniform(null),predicationBuffer:new THREE.Uniform(null),texelSize:new THREE.Uniform(e)},fragmentShader:shader_default5,vertexShader:shader_default6,blending:THREE.NoBlending,depthWrite:!1,depthTest:!1}),this.toneMapped=!1,this.setEdgeDetectionMode(t)}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setEdgeDetectionMode(e){this.defines.EDGE_DETECTION_MODE=e.toFixed(0),this.needsUpdate=!0}setLocalContrastAdaptationFactor(e){this.defines.LOCAL_CONTRAST_ADAPTATION_FACTOR=e.toFixed("6"),this.needsUpdate=!0}setEdgeDetectionThreshold(e){this.defines.EDGE_THRESHOLD=e.toFixed("6"),this.defines.DEPTH_THRESHOLD=(.1*e).toFixed("6"),this.needsUpdate=!0}setPredicationMode(e){this.defines.PREDICATION_MODE=e.toFixed(0),this.needsUpdate=!0}setPredicationBuffer(e){this.uniforms.predicationBuffer.value=e}setPredicationThreshold(e){this.defines.PREDICATION_THRESHOLD=e.toFixed("6"),this.needsUpdate=!0}setPredicationScale(e){this.defines.PREDICATION_SCALE=e.toFixed("6"),this.needsUpdate=!0}setPredicationStrength(e){this.defines.PREDICATION_STRENGTH=e.toFixed("6"),this.needsUpdate=!0}},EdgeDetectionMode={DEPTH:0,LUMA:1,COLOR:2},PredicationMode={DISABLED:0,DEPTH:1,CUSTOM:2},shader_default17="#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\nuniform sampler2D inputBuffer;\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nuniform highp sampler2D depthBuffer;\n#else\nuniform mediump sampler2D depthBuffer;\n#endif\nuniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;float readDepth(const in vec2 uv){\n#if DEPTH_PACKING == 3201\nreturn unpackRGBAToDepth(texture2D(depthBuffer,uv));\n#else\nreturn texture2D(depthBuffer,uv).r;\n#endif\n}float getViewZ(const in float depth){\n#ifdef PERSPECTIVE_CAMERA\nreturn perspectiveDepthToViewZ(depth,cameraNear,cameraFar);\n#else\nreturn orthographicDepthToViewZ(depth,cameraNear,cameraFar);\n#endif\n}FRAGMENT_HEADvoid main(){FRAGMENT_MAIN_UVvec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGEgl_FragColor=color0;\n#ifdef ENCODE_OUTPUT\n#include <encodings_fragment>\n#endif\n#include <dithering_fragment>\n}",shader_default18="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEADvoid main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORTgl_Position=vec4(position.xy,1.0,1.0);}",EffectMaterial=class extends THREE.ShaderMaterial{constructor(e=null,t=null,n=null,r,i=!1){super({type:"EffectMaterial",defines:{DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new THREE.Uniform(null),depthBuffer:new THREE.Uniform(null),resolution:new THREE.Uniform(new THREE.Vector2),texelSize:new THREE.Uniform(new THREE.Vector2),cameraNear:new THREE.Uniform(.3),cameraFar:new THREE.Uniform(1e3),aspect:new THREE.Uniform(1),time:new THREE.Uniform(0)},blending:THREE.NoBlending,depthWrite:!1,depthTest:!1,dithering:i}),this.toneMapped=!1,null!==e&&this.setShaderParts(e),null!==t&&this.setDefines(t),null!==n&&this.setUniforms(n),this.adoptCameraSettings(r)}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setShaderParts(e){return this.fragmentShader=shader_default17.replace(Section.FRAGMENT_HEAD,e.get(Section.FRAGMENT_HEAD)).replace(Section.FRAGMENT_MAIN_UV,e.get(Section.FRAGMENT_MAIN_UV)).replace(Section.FRAGMENT_MAIN_IMAGE,e.get(Section.FRAGMENT_MAIN_IMAGE)),this.vertexShader=shader_default18.replace(Section.VERTEX_HEAD,e.get(Section.VERTEX_HEAD)).replace(Section.VERTEX_MAIN_SUPPORT,e.get(Section.VERTEX_MAIN_SUPPORT)),this.needsUpdate=!0,this}setDefines(e){for(const t of e.entries())this.defines[t[0]]=t[1];return this.needsUpdate=!0,this}setUniforms(e){for(const t of e.entries())this.uniforms[t[0]]=t[1];return this}adoptCameraSettings(e=null){null!==e&&(this.uniforms.cameraNear.value=e.near,this.uniforms.cameraFar.value=e.far,e instanceof THREE.PerspectiveCamera?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(e,t){const n=Math.max(e,1),r=Math.max(t,1);this.uniforms.resolution.value.set(n,r),this.uniforms.texelSize.value.set(1/n,1/r),this.uniforms.aspect.value=n/r}},Section={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},shader_default20="#include <common>\nuniform sampler2D inputBuffer;\n#ifdef RANGE\nuniform vec2 range;\n#elif defined(THRESHOLD)\nuniform float threshold;uniform float smoothing;\n#endif\nvarying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);float l=linearToRelativeLuminance(texel.rgb);\n#ifdef RANGE\nfloat low=step(range.x,l);float high=step(l,range.y);l*=low*high;\n#elif defined(THRESHOLD)\nl=smoothstep(threshold,threshold+smoothing,l);\n#endif\n#ifdef COLOR\ngl_FragColor=vec4(texel.rgb*l,l);\n#else\ngl_FragColor=vec4(l);\n#endif\n}",LuminanceMaterial=class extends THREE.ShaderMaterial{constructor(e=!1,t=null){const n=null!==t;super({type:"LuminanceMaterial",uniforms:{inputBuffer:new THREE.Uniform(null),threshold:new THREE.Uniform(0),smoothing:new THREE.Uniform(1),range:new THREE.Uniform(n?t:new THREE.Vector2)},fragmentShader:shader_default20,vertexShader:shader_default2,blending:THREE.NoBlending,depthWrite:!1,depthTest:!1}),this.toneMapped=!1,this.colorOutput=e,this.useThreshold=!0,this.useRange=n}get threshold(){return this.uniforms.threshold.value}set threshold(e){this.uniforms.threshold.value=e}get smoothing(){return this.uniforms.smoothing.value}set smoothing(e){this.uniforms.smoothing.value=e}get useThreshold(){return void 0!==this.defines.THRESHOLD}set useThreshold(e){e?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.needsUpdate=!0}get colorOutput(){return void 0!==this.defines.COLOR}set colorOutput(e){e?this.defines.COLOR="1":delete this.defines.COLOR,this.needsUpdate=!0}setColorOutputEnabled(e){this.colorOutput=e}get useRange(){return void 0!==this.defines.RANGE}set useRange(e){e?this.defines.RANGE="1":delete this.defines.RANGE,this.needsUpdate=!0}get luminanceRange(){return this.useRange}set luminanceRange(e){this.useRange=e}setLuminanceRangeEnabled(e){this.useRange=e}},shader_default21="uniform sampler2D maskTexture;uniform sampler2D inputBuffer;\n#if MASK_FUNCTION != 0\nuniform float strength;\n#endif\nvarying vec2 vUv;void main(){\n#if COLOR_CHANNEL == 0\nfloat mask=texture2D(maskTexture,vUv).r;\n#elif COLOR_CHANNEL == 1\nfloat mask=texture2D(maskTexture,vUv).g;\n#elif COLOR_CHANNEL == 2\nfloat mask=texture2D(maskTexture,vUv).b;\n#else\nfloat mask=texture2D(maskTexture,vUv).a;\n#endif\n#if MASK_FUNCTION == 0\n#ifdef INVERTED\nif(mask>0.0){discard;}\n#else\nif(mask==0.0){discard;}\n#endif\n#else\nmask=clamp(mask*strength,0.0,1.0);\n#ifdef INVERTED\nmask=(1.0-mask);\n#endif\n#if MASK_FUNCTION == 1\ngl_FragColor=mask*texture2D(inputBuffer,vUv);\n#else\ngl_FragColor=vec4(mask*texture2D(inputBuffer,vUv).rgb,mask);\n#endif\n#endif\n}",MaskMaterial=class extends THREE.ShaderMaterial{constructor(e=null){super({type:"MaskMaterial",uniforms:{maskTexture:new THREE.Uniform(e),inputBuffer:new THREE.Uniform(null),strength:new THREE.Uniform(1)},fragmentShader:shader_default21,vertexShader:shader_default2,blending:THREE.NoBlending,depthWrite:!1,depthTest:!1}),this.toneMapped=!1,this.colorChannel=ColorChannel.RED,this.maskFunction=MaskFunction.DISCARD}set maskTexture(e){this.uniforms.maskTexture.value=e}set colorChannel(e){this.defines.COLOR_CHANNEL=e.toFixed(0),this.needsUpdate=!0}set maskFunction(e){this.defines.MASK_FUNCTION=e.toFixed(0),this.needsUpdate=!0}get inverted(){return void 0!==this.defines.INVERTED}set inverted(e){this.inverted&&!e?delete this.defines.INVERTED:e&&(this.defines.INVERTED="1"),this.needsUpdate=!0}get strength(){return this.uniforms.strength.value}set strength(e){this.uniforms.strength.value=e}},MaskFunction={DISCARD:0,MULTIPLY:1,MULTIPLY_RGB_SET_ALPHA:2},shader_default24="#define sampleLevelZeroOffset(t, coord, offset) texture2D(t, coord + offset * texelSize)\n#if __VERSION__ < 300\n#define round(v) floor(v + 0.5)\n#endif\nuniform sampler2D inputBuffer;uniform sampler2D areaTexture;uniform sampler2D searchTexture;uniform vec2 texelSize;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixCoord;void movec(const in bvec2 c,inout vec2 variable,const in vec2 value){if(c.x){variable.x=value.x;}if(c.y){variable.y=value.y;}}void movec(const in bvec4 c,inout vec4 variable,const in vec4 value){movec(c.xy,variable.xy,value.xy);movec(c.zw,variable.zw,value.zw);}vec2 decodeDiagBilinearAccess(in vec2 e){e.r=e.r*abs(5.0*e.r-5.0*0.75);return round(e);}vec4 decodeDiagBilinearAccess(in vec4 e){e.rb=e.rb*abs(5.0*e.rb-5.0*0.75);return round(e);}vec2 searchDiag1(const in vec2 texCoord,const in vec2 dir,out vec2 e){vec4 coord=vec4(texCoord,-1.0,1.0);vec3 t=vec3(texelSize,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(coord.z<float(MAX_SEARCH_STEPS_DIAG_INT-1)&&coord.w>0.9)){break;}coord.xyz=t*vec3(dir,1.0)+coord.xyz;e=texture2D(inputBuffer,coord.xy).rg;coord.w=dot(e,vec2(0.5));}return coord.zw;}vec2 searchDiag2(const in vec2 texCoord,const in vec2 dir,out vec2 e){vec4 coord=vec4(texCoord,-1.0,1.0);coord.x+=0.25*texelSize.x;vec3 t=vec3(texelSize,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(coord.z<float(MAX_SEARCH_STEPS_DIAG_INT-1)&&coord.w>0.9)){break;}coord.xyz=t*vec3(dir,1.0)+coord.xyz;e=texture2D(inputBuffer,coord.xy).rg;e=decodeDiagBilinearAccess(e);coord.w=dot(e,vec2(0.5));}return coord.zw;}vec2 areaDiag(const in vec2 dist,const in vec2 e,const in float offset){vec2 texCoord=vec2(AREATEX_MAX_DISTANCE_DIAG,AREATEX_MAX_DISTANCE_DIAG)*e+dist;texCoord=AREATEX_PIXEL_SIZE*texCoord+0.5*AREATEX_PIXEL_SIZE;texCoord.x+=0.5;texCoord.y+=AREATEX_SUBTEX_SIZE*offset;return texture2D(areaTexture,texCoord).rg;}vec2 calculateDiagWeights(const in vec2 texCoord,const in vec2 e,const in vec4 subsampleIndices){vec2 weights=vec2(0.0);vec4 d;vec2 end;if(e.r>0.0){d.xz=searchDiag1(texCoord,vec2(-1.0,1.0),end);d.x+=float(end.y>0.9);}else{d.xz=vec2(0.0);}d.yw=searchDiag1(texCoord,vec2(1.0,-1.0),end);if(d.x+d.y>2.0){vec4 coords=vec4(-d.x+0.25,d.x,d.y,-d.y-0.25)*texelSize.xyxy+texCoord.xyxy;vec4 c;c.xy=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(-1,0)).rg;c.zw=sampleLevelZeroOffset(inputBuffer,coords.zw,vec2(1,0)).rg;c.yxwz=decodeDiagBilinearAccess(c.xyzw);vec2 cc=vec2(2.0)*c.xz+c.yw;movec(bvec2(step(0.9,d.zw)),cc,vec2(0.0));weights+=areaDiag(d.xy,cc,subsampleIndices.z);}d.xz=searchDiag2(texCoord,vec2(-1.0,-1.0),end);if(sampleLevelZeroOffset(inputBuffer,texCoord,vec2(1,0)).r>0.0){d.yw=searchDiag2(texCoord,vec2(1.0),end);d.y+=float(end.y>0.9);}else{d.yw=vec2(0.0);}if(d.x+d.y>2.0){vec4 coords=vec4(-d.x,-d.x,d.y,d.y)*texelSize.xyxy+texCoord.xyxy;vec4 c;c.x=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(-1,0)).g;c.y=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(0,-1)).r;c.zw=sampleLevelZeroOffset(inputBuffer,coords.zw,vec2(1,0)).gr;vec2 cc=vec2(2.0)*c.xz+c.yw;movec(bvec2(step(0.9,d.zw)),cc,vec2(0.0));weights+=areaDiag(d.xy,cc,subsampleIndices.w).gr;}return weights;}float searchLength(const in vec2 e,const in float offset){vec2 scale=SEARCHTEX_SIZE*vec2(0.5,-1.0);vec2 bias=SEARCHTEX_SIZE*vec2(offset,1.0);scale+=vec2(-1.0,1.0);bias+=vec2(0.5,-0.5);scale*=1.0/SEARCHTEX_PACKED_SIZE;bias*=1.0/SEARCHTEX_PACKED_SIZE;return texture2D(searchTexture,scale*e+bias).r;}float searchXLeft(in vec2 texCoord,const in float end){vec2 e=vec2(0.0,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.x>end&&e.g>0.8281&&e.r==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(-2.0,0.0)*texelSize+texCoord;}float offset=-(255.0/127.0)*searchLength(e,0.0)+3.25;return texelSize.x*offset+texCoord.x;}float searchXRight(vec2 texCoord,const in float end){vec2 e=vec2(0.0,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.x<end&&e.g>0.8281&&e.r==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(2.0,0.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e,0.5)+3.25;return-texelSize.x*offset+texCoord.x;}float searchYUp(vec2 texCoord,const in float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.y>end&&e.r>0.8281&&e.g==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=-vec2(0.0,2.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e.gr,0.0)+3.25;return texelSize.y*offset+texCoord.y;}float searchYDown(vec2 texCoord,const in float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;i++){if(!(texCoord.y<end&&e.r>0.8281&&e.g==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(0.0,2.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e.gr,0.5)+3.25;return-texelSize.y*offset+texCoord.y;}vec2 area(const in vec2 dist,const in float e1,const in float e2,const in float offset){vec2 texCoord=vec2(AREATEX_MAX_DISTANCE)*round(4.0*vec2(e1,e2))+dist;texCoord=AREATEX_PIXEL_SIZE*texCoord+0.5*AREATEX_PIXEL_SIZE;texCoord.y=AREATEX_SUBTEX_SIZE*offset+texCoord.y;return texture2D(areaTexture,texCoord).rg;}void detectHorizontalCornerPattern(inout vec2 weights,const in vec4 texCoord,const in vec2 d){\n#if !defined(DISABLE_CORNER_DETECTION)\nvec2 leftRight=step(d.xy,d.yx);vec2 rounding=(1.0-CORNER_ROUNDING_NORM)*leftRight;rounding/=leftRight.x+leftRight.y;vec2 factor=vec2(1.0);factor.x-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(0,1)).r;factor.x-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,1)).r;factor.y-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(0,-2)).r;factor.y-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,-2)).r;weights*=clamp(factor,0.0,1.0);\n#endif\n}void detectVerticalCornerPattern(inout vec2 weights,const in vec4 texCoord,const in vec2 d){\n#if !defined(DISABLE_CORNER_DETECTION)\nvec2 leftRight=step(d.xy,d.yx);vec2 rounding=(1.0-CORNER_ROUNDING_NORM)*leftRight;rounding/=leftRight.x+leftRight.y;vec2 factor=vec2(1.0);factor.x-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(1,0)).g;factor.x-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,1)).g;factor.y-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(-2,0)).g;factor.y-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(-2,1)).g;weights*=clamp(factor,0.0,1.0);\n#endif\n}void main(){vec4 weights=vec4(0.0);vec4 subsampleIndices=vec4(0.0);vec2 e=texture2D(inputBuffer,vUv).rg;if(e.g>0.0){\n#if !defined(DISABLE_DIAG_DETECTION)\nweights.rg=calculateDiagWeights(vUv,e,subsampleIndices);if(weights.r==-weights.g){\n#endif\nvec2 d;vec3 coords;coords.x=searchXLeft(vOffset[0].xy,vOffset[2].x);coords.y=vOffset[1].y;d.x=coords.x;float e1=texture2D(inputBuffer,coords.xy).r;coords.z=searchXRight(vOffset[0].zw,vOffset[2].y);d.y=coords.z;d=round(resolution.xx*d+-vPixCoord.xx);vec2 sqrtD=sqrt(abs(d));float e2=sampleLevelZeroOffset(inputBuffer,coords.zy,vec2(1,0)).r;weights.rg=area(sqrtD,e1,e2,subsampleIndices.y);coords.y=vUv.y;detectHorizontalCornerPattern(weights.rg,coords.xyzy,d);\n#if !defined(DISABLE_DIAG_DETECTION)\n}else{e.r=0.0;}\n#endif\n}if(e.r>0.0){vec2 d;vec3 coords;coords.y=searchYUp(vOffset[1].xy,vOffset[2].z);coords.x=vOffset[0].x;d.x=coords.y;float e1=texture2D(inputBuffer,coords.xy).g;coords.z=searchYDown(vOffset[1].zw,vOffset[2].w);d.y=coords.z;d=round(resolution.yy*d-vPixCoord.yy);vec2 sqrtD=sqrt(abs(d));float e2=sampleLevelZeroOffset(inputBuffer,coords.xz,vec2(0,1)).g;weights.ba=area(sqrtD,e1,e2,subsampleIndices.x);coords.x=vUv.x;detectVerticalCornerPattern(weights.ba,coords.xyxz,d);}gl_FragColor=weights;}",shader_default25="uniform vec2 texelSize;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixCoord;void main(){vUv=position.xy*0.5+0.5;vPixCoord=vUv*resolution;vOffset[0]=vUv.xyxy+texelSize.xyxy*vec4(-0.25,-0.125,1.25,-0.125);vOffset[1]=vUv.xyxy+texelSize.xyxy*vec4(-0.125,-0.25,-0.125,1.25);vOffset[2]=vec4(vOffset[0].xz,vOffset[1].yw)+vec4(-2.0,2.0,-2.0,2.0)*texelSize.xxyy*MAX_SEARCH_STEPS_FLOAT;gl_Position=vec4(position.xy,1.0,1.0);}",SMAAWeightsMaterial=class extends THREE.ShaderMaterial{constructor(e=new THREE.Vector2,t=new THREE.Vector2){super({type:"SMAAWeightsMaterial",defines:{MAX_SEARCH_STEPS_INT:"16",MAX_SEARCH_STEPS_FLOAT:"16.0",MAX_SEARCH_STEPS_DIAG_INT:"8",MAX_SEARCH_STEPS_DIAG_FLOAT:"8.0",CORNER_ROUNDING:"25",CORNER_ROUNDING_NORM:"0.25",AREATEX_MAX_DISTANCE:"16.0",AREATEX_MAX_DISTANCE_DIAG:"20.0",AREATEX_PIXEL_SIZE:"(1.0 / vec2(160.0, 560.0))",AREATEX_SUBTEX_SIZE:"(1.0 / 7.0)",SEARCHTEX_SIZE:"vec2(66.0, 33.0)",SEARCHTEX_PACKED_SIZE:"vec2(64.0, 16.0)"},uniforms:{inputBuffer:new THREE.Uniform(null),areaTexture:new THREE.Uniform(null),searchTexture:new THREE.Uniform(null),texelSize:new THREE.Uniform(e),resolution:new THREE.Uniform(t)},fragmentShader:shader_default24,vertexShader:shader_default25,blending:THREE.NoBlending,depthWrite:!1,depthTest:!1}),this.toneMapped=!1}setOrthogonalSearchSteps(e){const t=Math.min(Math.max(e,0),112);this.defines.MAX_SEARCH_STEPS_INT=t.toFixed("0"),this.defines.MAX_SEARCH_STEPS_FLOAT=t.toFixed("1"),this.needsUpdate=!0}setDiagonalSearchSteps(e){const t=Math.min(Math.max(e,0),20);this.defines.MAX_SEARCH_STEPS_DIAG_INT=t.toFixed("0"),this.defines.MAX_SEARCH_STEPS_DIAG_FLOAT=t.toFixed("1"),this.needsUpdate=!0}setCornerRounding(e){const t=Math.min(Math.max(e,0),100);this.defines.CORNER_ROUNDING=t.toFixed("4"),this.defines.CORNER_ROUNDING_NORM=(t/100).toFixed("4"),this.needsUpdate=!0}get diagonalDetection(){return void 0===this.defines.DISABLE_DIAG_DETECTION}set diagonalDetection(e){e?delete this.defines.DISABLE_DIAG_DETECTION:this.defines.DISABLE_DIAG_DETECTION="1",this.needsUpdate=!0}get cornerRounding(){return void 0===this.defines.DISABLE_CORNER_DETECTION}set cornerRounding(e){e?delete this.defines.DISABLE_CORNER_DETECTION:this.defines.DISABLE_CORNER_DETECTION="1",this.needsUpdate=!0}},dummyCamera=new THREE.Camera,geometry=null;function getFullscreenTriangle(){if(null===geometry){const e=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),t=new Float32Array([0,0,2,0,0,2]);void 0!==(geometry=new THREE.BufferGeometry).setAttribute?(geometry.setAttribute("position",new THREE.BufferAttribute(e,3)),geometry.setAttribute("uv",new THREE.BufferAttribute(t,2))):(geometry.addAttribute("position",new THREE.BufferAttribute(e,3)),geometry.addAttribute("uv",new THREE.BufferAttribute(t,2)))}return geometry}var Pass=class{constructor(e="Pass",t=new THREE.Scene,n=dummyCamera){this.name=e,this.scene=t,this.camera=n,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(e){if(this.rtt===e){const t=this.getFullscreenMaterial();null!==t&&(t.needsUpdate=!0),this.rtt=!e}}getFullscreenMaterial(){return null!==this.screen?this.screen.material:null}setFullscreenMaterial(e){let t=this.screen;null!==t?t.material=e:(t=new THREE.Mesh(getFullscreenTriangle(),e),t.frustumCulled=!1,null===this.scene&&(this.scene=new THREE.Scene),this.scene.add(t),this.screen=t)}getDepthTexture(){return null}setDepthTexture(e,t=0){}render(e,t,n,r,i){throw new Error("Render method not implemented!")}setSize(e,t){}initialize(e,t,n){}dispose(){const e=this.getFullscreenMaterial();null!==e&&e.dispose();for(const t of Object.keys(this)){const e=this[t];if(null!==e&&"function"==typeof e.dispose){if(e instanceof THREE.Scene)continue;this[t].dispose()}}}},AUTO_SIZE=-1,Resizer=class{constructor(e,t=AUTO_SIZE,n=AUTO_SIZE,r=1){this.resizable=e,this.base=new THREE.Vector2(1,1),this.target=new THREE.Vector2(t,n),this.s=r}get scale(){return this.s}set scale(e){this.s=e,this.target.x=AUTO_SIZE,this.target.y=AUTO_SIZE,this.resizable.setSize(this.base.x,this.base.y)}get width(){const e=this.base,t=this.target;let n;return n=t.x!==AUTO_SIZE?t.x:t.y!==AUTO_SIZE?Math.round(t.y*(e.x/e.y)):Math.round(e.x*this.s),n}set width(e){this.target.x=e,this.resizable.setSize(this.base.x,this.base.y)}get height(){const e=this.base,t=this.target;let n;return n=t.y!==AUTO_SIZE?t.y:t.x!==AUTO_SIZE?Math.round(t.x/(e.x/e.y)):Math.round(e.y*this.s),n}set height(e){this.target.y=e,this.resizable.setSize(this.base.x,this.base.y)}static get AUTO_SIZE(){return AUTO_SIZE}},BlurPass=class extends Pass{constructor({resolutionScale:e=.5,width:t=Resizer.AUTO_SIZE,height:n=Resizer.AUTO_SIZE,kernelSize:r=KernelSize.LARGE}={}){super("BlurPass"),this.renderTargetA=new THREE.WebGLRenderTarget(1,1,{minFilter:THREE.LinearFilter,magFilter:THREE.LinearFilter,stencilBuffer:!1,depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B",this.resolution=new Resizer(this,t,n,e),this.convolutionMaterial=new ConvolutionMaterial,this.ditheredConvolutionMaterial=new ConvolutionMaterial,this.ditheredConvolutionMaterial.dithering=!0,this.dithering=!1,this.kernelSize=r}get width(){return this.resolution.width}set width(e){this.resolution.width=e}get height(){return this.resolution.height}set height(e){this.resolution.height=e}get scale(){return this.convolutionMaterial.uniforms.scale.value}set scale(e){this.convolutionMaterial.uniforms.scale.value=e,this.ditheredConvolutionMaterial.uniforms.scale.value=e}get kernelSize(){return this.convolutionMaterial.kernelSize}set kernelSize(e){this.convolutionMaterial.kernelSize=e,this.ditheredConvolutionMaterial.kernelSize=e}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}render(e,t,n,r,i){const o=this.scene,a=this.camera,s=this.renderTargetA,c=this.renderTargetB;let u=this.convolutionMaterial,l=u.uniforms;const h=u.getKernel();let f,d,p,m=t;for(this.setFullscreenMaterial(u),d=0,p=h.length-1;d<p;++d)f=0==(1&d)?s:c,l.kernel.value=h[d],l.inputBuffer.value=m.texture,e.setRenderTarget(f),e.render(o,a),m=f;this.dithering&&(u=this.ditheredConvolutionMaterial,l=u.uniforms,this.setFullscreenMaterial(u)),l.kernel.value=h[d],l.inputBuffer.value=m.texture,e.setRenderTarget(this.renderToScreen?null:n),e.render(o,a)}setSize(e,t){const n=this.resolution;n.base.set(e,t);const r=n.width,i=n.height;this.renderTargetA.setSize(r,i),this.renderTargetB.setSize(r,i),this.convolutionMaterial.setTexelSize(1/r,1/i),this.ditheredConvolutionMaterial.setTexelSize(1/r,1/i)}initialize(e,t,n){t||n!==THREE.UnsignedByteType||(this.renderTargetA.texture.format=THREE.RGBFormat,this.renderTargetB.texture.format=THREE.RGBFormat),void 0!==n&&(this.renderTargetA.texture.type=n,this.renderTargetB.texture.type=n)}static get AUTO_SIZE(){return Resizer.AUTO_SIZE}},ClearMaskPass=class extends Pass{constructor(){super("ClearMaskPass",null,null),this.needsSwap=!1}render(e,t,n,r,i){const o=e.state.buffers.stencil;o.setLocked(!1),o.setTest(!1)}},color=new THREE.Color,ClearPass=class extends Pass{constructor(e=!0,t=!0,n=!1){super("ClearPass",null,null),this.needsSwap=!1,this.color=e,this.depth=t,this.stencil=n,this.overrideClearColor=null,this.overrideClearAlpha=-1}render(e,t,n,r,i){const o=this.overrideClearColor,a=this.overrideClearAlpha,s=e.getClearAlpha(),c=null!==o,u=a>=0;c?(color.copy(e.getClearColor(color)),e.setClearColor(o,u?a:s)):u&&e.setClearAlpha(a),e.setRenderTarget(this.renderToScreen?null:t),e.clear(this.color,this.depth,this.stencil),c?e.setClearColor(color,s):u&&e.setClearAlpha(s)}},workaroundEnabled=!1,OverrideMaterialManager=class{constructor(e=null){this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.setMaterial(e),this.meshCount=0,this.replaceMaterial=e=>{if(e.isMesh){let t;switch(e.material.side){case THREE.DoubleSide:t=this.materialsDoubleSide;break;case THREE.BackSide:t=this.materialsBackSide;break;default:t=this.materials}this.originalMaterials.set(e,e.material),e.isSkinnedMesh?e.material=t[2]:e.isInstancedMesh?e.material=t[1]:e.material=t[0],++this.meshCount}}}setMaterial(e){if(this.disposeMaterials(),this.material=e,null!==e){const t=this.materials=[e.clone(),e.clone(),e.clone()];for(const n of t)n.uniforms=Object.assign({},e.uniforms),n.side=THREE.FrontSide;t[2].skinning=!0,this.materialsBackSide=t.map(t=>{const n=t.clone();return n.uniforms=Object.assign({},e.uniforms),n.side=THREE.BackSide,n}),this.materialsDoubleSide=t.map(t=>{const n=t.clone();return n.uniforms=Object.assign({},e.uniforms),n.side=THREE.DoubleSide,n})}}render(e,t,n){const r=e.shadowMap.enabled;if(e.shadowMap.enabled=!1,workaroundEnabled){const r=this.originalMaterials;this.meshCount=0,t.traverse(this.replaceMaterial),e.render(t,n);for(const e of r)e[0].material=e[1];this.meshCount!==r.size&&r.clear()}else{const r=t.overrideMaterial;t.overrideMaterial=this.material,e.render(t,n),t.overrideMaterial=r}e.shadowMap.enabled=r}disposeMaterials(){if(null!==this.material){const e=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide);for(const t of e)t.dispose()}}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return workaroundEnabled}static set workaroundEnabled(e){workaroundEnabled=e}},RenderPass=class extends Pass{constructor(e,t,n=null){super("RenderPass",e,t),this.needsSwap=!1,this.clearPass=new ClearPass,this.overrideMaterialManager=null===n?null:new OverrideMaterialManager(n)}get renderToScreen(){return super.renderToScreen}set renderToScreen(e){super.renderToScreen=e,this.clearPass.renderToScreen=e}get overrideMaterial(){const e=this.overrideMaterialManager;return null!==e?e.material:null}set overrideMaterial(e){const t=this.overrideMaterialManager;null!==e?null!==t?t.setMaterial(e):this.overrideMaterialManager=new OverrideMaterialManager(e):null!==t&&(t.dispose(),this.overrideMaterialManager=null)}get clear(){return this.clearPass.enabled}set clear(e){this.clearPass.enabled=e}getClearPass(){return this.clearPass}render(e,t,n,r,i){const o=this.scene,a=this.camera,s=o.background,c=this.renderToScreen?null:t;this.clear&&(null!==this.clearPass.overrideClearColor&&(o.background=null),this.clearPass.render(e,t)),e.setRenderTarget(c),null!==this.overrideMaterialManager?this.overrideMaterialManager.render(e,o,a):e.render(o,a),o.background!==s&&(o.background=s)}},DepthPass=class extends Pass{constructor(e,t,{resolutionScale:n=1,width:r=Resizer.AUTO_SIZE,height:i=Resizer.AUTO_SIZE,renderTarget:o}={}){super("DepthPass"),this.needsSwap=!1,this.renderPass=new RenderPass(e,t,new THREE.MeshDepthMaterial({depthPacking:THREE.RGBADepthPacking}));const a=this.renderPass.getClearPass();a.overrideClearColor=new THREE.Color(16777215),a.overrideClearAlpha=1,this.renderTarget=o,void 0===this.renderTarget&&(this.renderTarget=new THREE.WebGLRenderTarget(1,1,{minFilter:THREE.NearestFilter,magFilter:THREE.NearestFilter,stencilBuffer:!1}),this.renderTarget.texture.name="DepthPass.Target"),this.resolution=new Resizer(this,r,i,n)}get texture(){return this.renderTarget.texture}getResolutionScale(){return this.resolutionScale}setResolutionScale(e){this.resolutionScale=e,this.setSize(this.resolution.base.x,this.resolution.base.y)}render(e,t,n,r,i){const o=this.renderToScreen?null:this.renderTarget;this.renderPass.render(e,o)}setSize(e,t){const n=this.resolution;n.base.set(e,t),this.renderTarget.setSize(n.width,n.height)}},BlendFunction={SKIP:0,ADD:1,ALPHA:2,AVERAGE:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,EXCLUSION:8,LIGHTEN:9,MULTIPLY:10,DIVIDE:11,NEGATION:12,NORMAL:13,OVERLAY:14,REFLECT:15,SCREEN:16,SOFT_LIGHT:17,SUBTRACT:18},shader_default28="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return min(x+y,1.0)*opacity+x*(1.0-opacity);}",shader_default29="vec3 blend(const in vec3 x,const in vec3 y,const in float opacity){return y*opacity+x*(1.0-opacity);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){float a=min(y.a,opacity);return vec4(blend(x.rgb,y.rgb,a),max(x.a,a));}",shader_default30="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(x+y)*0.5*opacity+x*(1.0-opacity);}",shader_default31="float blend(const in float x,const in float y){return(y==0.0)? y : max(1.0-(1.0-x)/y,0.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",shader_default32="float blend(const in float x,const in float y){return(y==1.0)? y : min(x/(1.0-y),1.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",shader_default33="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return min(x,y)*opacity+x*(1.0-opacity);}",shader_default34="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return abs(x-y)*opacity+x*(1.0-opacity);}",shader_default35="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(x+y-2.0*x*y)*opacity+x*(1.0-opacity);}",shader_default36="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return max(x,y)*opacity+x*(1.0-opacity);}",shader_default37="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return x*y*opacity+x*(1.0-opacity);}",shader_default38="float blend(const in float x,const in float y){return(y>0.0)? min(x/y,1.0): 1.0;}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",shader_default39="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(1.0-abs(1.0-x-y))*opacity+x*(1.0-opacity);}",shader_default40="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y*opacity+x*(1.0-opacity);}",shader_default41="float blend(const in float x,const in float y){return(x<0.5)?(2.0*x*y):(1.0-2.0*(1.0-x)*(1.0-y));}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",shader_default42="float blend(const in float x,const in float y){return(y==1.0)? y : min(x*x/(1.0-y),1.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",shader_default43="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(1.0-(1.0-x)*(1.0-y))*opacity+x*(1.0-opacity);}",shader_default44="float blend(const in float x,const in float y){return(y<0.5)?(2.0*x*y+x*x*(1.0-2.0*y)):(sqrt(x)*(2.0*y-1.0)+2.0*x*(1.0-y));}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",shader_default45="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return max(x+y-1.0,0.0)*opacity+x*(1.0-opacity);}",blendFunctions=new Map([[BlendFunction.SKIP,null],[BlendFunction.ADD,shader_default28],[BlendFunction.ALPHA,shader_default29],[BlendFunction.AVERAGE,shader_default30],[BlendFunction.COLOR_BURN,shader_default31],[BlendFunction.COLOR_DODGE,shader_default32],[BlendFunction.DARKEN,shader_default33],[BlendFunction.DIFFERENCE,shader_default34],[BlendFunction.EXCLUSION,shader_default35],[BlendFunction.LIGHTEN,shader_default36],[BlendFunction.MULTIPLY,shader_default37],[BlendFunction.DIVIDE,shader_default38],[BlendFunction.NEGATION,shader_default39],[BlendFunction.NORMAL,shader_default40],[BlendFunction.OVERLAY,shader_default41],[BlendFunction.REFLECT,shader_default42],[BlendFunction.SCREEN,shader_default43],[BlendFunction.SOFT_LIGHT,shader_default44],[BlendFunction.SUBTRACT,shader_default45]]),BlendMode=class extends THREE.EventDispatcher{constructor(e,t=1){super(),this.blendFunction=e,this.opacity=new THREE.Uniform(t)}getBlendFunction(){return this.blendFunction}setBlendFunction(e){this.blendFunction=e,this.dispatchEvent({type:"change"})}getShaderCode(){return blendFunctions.get(this.blendFunction)}},Effect=class extends THREE.EventDispatcher{constructor(e,t,{attributes:n=EffectAttribute.NONE,blendFunction:r=BlendFunction.SCREEN,defines:i=new Map,uniforms:o=new Map,extensions:a=null,vertexShader:s=null}={}){super(),this.name=e,this.attributes=n,this.fragmentShader=t,this.vertexShader=s,this.defines=i,this.uniforms=o,this.extensions=a,this.blendMode=new BlendMode(r),this.blendMode.addEventListener("change",e=>this.setChanged())}setChanged(){this.dispatchEvent({type:"change"})}getAttributes(){return this.attributes}setAttributes(e){this.attributes=e,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(e){this.fragmentShader=e,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(e){this.vertexShader=e,this.setChanged()}setDepthTexture(e,t=0){}update(e,t,n){}setSize(e,t){}initialize(e,t,n){}dispose(){for(const e of Object.keys(this)){const t=this[e];if(null!==t&&"function"==typeof t.dispose){if(t instanceof THREE.Scene)continue;this[e].dispose()}}}},EffectAttribute={NONE:0,DEPTH:1,CONVOLUTION:2};function findSubstrings(e,t){const n=[];let r;for(;null!==(r=e.exec(t));)n.push(r[1]);return n}function prefixSubstrings(e,t,n){let r,i;for(const o of t){r="$1"+e+o.charAt(0).toUpperCase()+o.slice(1),i=new RegExp("([^\\.])(\\b"+o+"\\b)","g");for(const e of n.entries())null!==e[1]&&n.set(e[0],e[1].replace(i,r))}}function integrateEffect(e,t,n,r,i,o,a){const s=/(?:\w+\s+(\w+)\([\w\s,]*\)\s*{[^}]+})/g,c=/(?:varying\s+\w+\s+(\w*))/g,u=t.blendMode,l=new Map([["fragment",t.getFragmentShader()],["vertex",t.getVertexShader()]]),h=void 0!==l.get("fragment")&&/mainImage/.test(l.get("fragment")),f=void 0!==l.get("fragment")&&/mainUv/.test(l.get("fragment"));let d=[],p=[],m=!1,v=!1;if(void 0===l.get("fragment"))console.error("Missing fragment shader",t);else if(f&&0!=(a&EffectAttribute.CONVOLUTION))console.error("Effects that transform UV coordinates are incompatible with convolution effects",t);else if(h||f){if(f&&(n.set(Section.FRAGMENT_MAIN_UV,n.get(Section.FRAGMENT_MAIN_UV)+"\t"+e+"MainUv(UV);\n"),m=!0),null!==l.get("vertex")&&/mainSupport/.test(l.get("vertex"))){let t="\t"+e+"MainSupport(";/mainSupport *\([\w\s]*?uv\s*?\)/.test(l.get("vertex"))&&(t+="vUv"),t+=");\n",n.set(Section.VERTEX_MAIN_SUPPORT,n.get(Section.VERTEX_MAIN_SUPPORT)+t),d=d.concat(findSubstrings(c,l.get("vertex"))),p=p.concat(d).concat(findSubstrings(s,l.get("vertex")))}if(p=p.concat(findSubstrings(s,l.get("fragment"))).concat(Array.from(t.defines.keys()).map(e=>e.replace(/\([\w\s,]*\)/g,""))).concat(Array.from(t.uniforms.keys())),t.uniforms.forEach((t,n)=>o.set(e+n.charAt(0).toUpperCase()+n.slice(1),t)),t.defines.forEach((t,n)=>i.set(e+n.charAt(0).toUpperCase()+n.slice(1),t)),prefixSubstrings(e,p,i),prefixSubstrings(e,p,l),r.set(u.blendFunction,u),h){const t=/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/;let r=e+"MainImage(color0, UV, ";0!=(a&EffectAttribute.DEPTH)&&t.test(l.get("fragment"))&&(r+="depth, ",v=!0),r+="color1);\n\t";const i=e+"BlendOpacity";o.set(i,u.opacity),r+="color0 = blend"+u.getBlendFunction()+"(color0, color1, "+i+");\n\n\t",n.set(Section.FRAGMENT_MAIN_IMAGE,n.get(Section.FRAGMENT_MAIN_IMAGE)+r),n.set(Section.FRAGMENT_HEAD,n.get(Section.FRAGMENT_HEAD)+"uniform float "+i+";\n\n")}n.set(Section.FRAGMENT_HEAD,n.get(Section.FRAGMENT_HEAD)+l.get("fragment")+"\n"),null!==l.get("vertex")&&n.set(Section.VERTEX_HEAD,n.get(Section.VERTEX_HEAD)+l.get("vertex")+"\n")}else console.error("The fragment shader contains neither a mainImage nor a mainUv function",t);return{varyings:d,transformedUv:m,readDepth:v}}var EffectPass=class extends Pass{constructor(e,...t){super("EffectPass"),this.setFullscreenMaterial(new EffectMaterial(null,null,null,e)),this.effects=t.sort((e,t)=>t.attributes-e.attributes),this.skipRendering=!1,this.uniforms=0,this.varyings=0,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY}get encodeOutput(){return void 0!==this.getFullscreenMaterial().defines.ENCODE_OUTPUT}set encodeOutput(e){if(this.encodeOutput!==e){const t=this.getFullscreenMaterial();t.needsUpdate=!0,e?t.defines.ENCODE_OUTPUT="1":delete t.defines.ENCODE_OUTPUT}}get dithering(){return this.getFullscreenMaterial().dithering}set dithering(e){const t=this.getFullscreenMaterial();t.dithering!==e&&(t.dithering=e,t.needsUpdate=!0)}verifyResources(e){const t=e.capabilities;let n=Math.min(t.maxFragmentUniforms,t.maxVertexUniforms);this.uniforms>n&&console.warn("The current rendering context doesn't support more than "+n+" uniforms, but "+this.uniforms+" were defined"),n=t.maxVaryings,this.varyings>n&&console.warn("The current rendering context doesn't support more than "+n+" varyings, but "+this.varyings+" were defined")}updateMaterial(){const e=/\bblend\b/g,t=new Map([[Section.FRAGMENT_HEAD,""],[Section.FRAGMENT_MAIN_UV,""],[Section.FRAGMENT_MAIN_IMAGE,""],[Section.VERTEX_HEAD,""],[Section.VERTEX_MAIN_SUPPORT,""]]),n=new Map,r=new Map,i=new Map,o=new Set;let a,s=0,c=0,u=0,l=!1,h=!1;for(const d of this.effects)if(d.blendMode.getBlendFunction()===BlendFunction.SKIP)u|=d.getAttributes()&EffectAttribute.DEPTH;else if(0!=(u&EffectAttribute.CONVOLUTION)&&0!=(d.getAttributes()&EffectAttribute.CONVOLUTION))console.error("Convolution effects cannot be merged",d);else if(u|=d.getAttributes(),a=integrateEffect("e"+s++,d,t,n,r,i,u),c+=a.varyings.length,l=l||a.transformedUv,h=h||a.readDepth,null!==d.extensions)for(const e of d.extensions)o.add(e);for(const d of n.values())t.set(Section.FRAGMENT_HEAD,t.get(Section.FRAGMENT_HEAD)+d.getShaderCode().replace(e,"blend"+d.getBlendFunction())+"\n");0!=(u&EffectAttribute.DEPTH)?(h&&t.set(Section.FRAGMENT_MAIN_IMAGE,"float depth = readDepth(UV);\n\n\t"+t.get(Section.FRAGMENT_MAIN_IMAGE)),this.needsDepthTexture=null===this.getDepthTexture()):this.needsDepthTexture=!1,l?(t.set(Section.FRAGMENT_MAIN_UV,"vec2 transformedUv = vUv;\n"+t.get(Section.FRAGMENT_MAIN_UV)),r.set("UV","transformedUv")):r.set("UV","vUv"),t.forEach((e,t,n)=>n.set(t,e.trim().replace(/^#/,"\n#"))),this.uniforms=i.size,this.varyings=c,this.skipRendering=0===s,this.needsSwap=!this.skipRendering;const f=this.getFullscreenMaterial();if(f.setShaderParts(t).setDefines(r).setUniforms(i),f.extensions={},o.size>0)for(const d of o)f.extensions[d]=!0;this.needsUpdate=!1}recompile(e){this.updateMaterial(),void 0!==e&&this.verifyResources(e)}getDepthTexture(){return this.getFullscreenMaterial().uniforms.depthBuffer.value}setDepthTexture(e,t=THREE.BasicDepthPacking){const n=this.getFullscreenMaterial();n.uniforms.depthBuffer.value=e,n.depthPacking=t,n.needsUpdate=!0;for(const r of this.effects)r.setDepthTexture(e,t)}render(e,t,n,r,i){const o=this.getFullscreenMaterial(),a=o.uniforms.time.value+r;this.needsUpdate&&this.recompile(e);for(const s of this.effects)s.update(e,t,r);this.skipRendering&&!this.renderToScreen||(o.uniforms.inputBuffer.value=t.texture,o.uniforms.time.value=a<=this.maxTime?a:this.minTime,e.setRenderTarget(this.renderToScreen?null:n),e.render(this.scene,this.camera))}setSize(e,t){this.getFullscreenMaterial().setSize(e,t);for(const n of this.effects)n.setSize(e,t)}initialize(e,t,n){this.capabilities=e.capabilities;for(const r of this.effects)r.initialize(e,t,n),r.addEventListener("change",e=>this.handleEvent(e));this.updateMaterial(),this.verifyResources(e)}dispose(){super.dispose();for(const e of this.effects)e.dispose()}handleEvent(e){switch(e.type){case"change":this.needsUpdate=!0}}},LuminancePass=class extends Pass{constructor({width:e=Resizer.AUTO_SIZE,height:t=Resizer.AUTO_SIZE,renderTarget:n,luminanceRange:r,colorOutput:i}={}){super("LuminancePass"),this.setFullscreenMaterial(new LuminanceMaterial(i,r)),this.needsSwap=!1,this.renderTarget=n,void 0===this.renderTarget&&(this.renderTarget=new THREE.WebGLRenderTarget(1,1,{minFilter:THREE.LinearFilter,magFilter:THREE.LinearFilter,format:i?THREE.RGBAFormat:THREE.LuminanceFormat,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="LuminancePass.Target",this.renderTarget.texture.generateMipmaps=!1),this.resolution=new Resizer(this,e,t)}get texture(){return this.renderTarget.texture}render(e,t,n,r,i){this.getFullscreenMaterial().uniforms.inputBuffer.value=t.texture,e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}setSize(e,t){const n=this.resolution;n.base.set(e,t),this.renderTarget.setSize(n.width,n.height)}},MaskPass=class extends Pass{constructor(e,t){super("MaskPass",e,t),this.needsSwap=!1,this.clearPass=new ClearPass(!1,!1,!0),this.inverse=!1}get clear(){return this.clearPass.enabled}set clear(e){this.clearPass.enabled=e}render(e,t,n,r,i){const o=e.getContext(),a=e.state.buffers,s=this.scene,c=this.camera,u=this.clearPass,l=this.inverse?0:1,h=1-l;a.color.setMask(!1),a.depth.setMask(!1),a.color.setLocked(!0),a.depth.setLocked(!0),a.stencil.setTest(!0),a.stencil.setOp(o.REPLACE,o.REPLACE,o.REPLACE),a.stencil.setFunc(o.ALWAYS,l,4294967295),a.stencil.setClear(h),a.stencil.setLocked(!0),this.clear&&(this.renderToScreen?u.render(e,null):(u.render(e,t),u.render(e,n))),this.renderToScreen?(e.setRenderTarget(null),e.render(s,c)):(e.setRenderTarget(t),e.render(s,c),e.setRenderTarget(n),e.render(s,c)),a.color.setLocked(!1),a.depth.setLocked(!1),a.stencil.setLocked(!1),a.stencil.setFunc(o.EQUAL,1,4294967295),a.stencil.setOp(o.KEEP,o.KEEP,o.KEEP),a.stencil.setLocked(!0)}},ShaderPass=class extends Pass{constructor(e,t="inputBuffer"){super("ShaderPass"),this.setFullscreenMaterial(e),this.uniform=null,this.setInput(t)}setInput(e){const t=this.getFullscreenMaterial();if(this.uniform=null,null!==t){const n=t.uniforms;void 0!==n&&void 0!==n[e]&&(this.uniform=n[e])}}render(e,t,n,r,i){null!==this.uniform&&null!==t&&(this.uniform.value=t.texture),e.setRenderTarget(this.renderToScreen?null:n),e.render(this.scene,this.camera)}},EffectComposer=class{constructor(e=null,{depthBuffer:t=!0,stencilBuffer:n=!1,multisampling:r=0,frameBufferType:i}={}){this.renderer=e,this.inputBuffer=null,this.outputBuffer=null,null!==this.renderer&&(this.renderer.autoClear=!1,this.inputBuffer=this.createBuffer(t,n,i,r),this.outputBuffer=this.inputBuffer.clone(),this.enableExtensions()),this.copyPass=new ShaderPass(new CopyMaterial),this.depthTexture=null,this.passes=[],this.autoRenderToScreen=!0}get multisampling(){return this.inputBuffer instanceof THREE.WebGLMultisampleRenderTarget?this.inputBuffer.samples:0}set multisampling(e){const t=this.inputBuffer,n=this.multisampling;n>0&&e>0?(this.inputBuffer.samples=e,this.outputBuffer.samples=e):n!==e&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),this.inputBuffer=this.createBuffer(t.depthBuffer,t.stencilBuffer,t.texture.type,e),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getRenderer(){return this.renderer}enableExtensions(){const e=this.inputBuffer.texture.type,t=this.renderer.capabilities,n=this.renderer.getContext();e!==THREE.UnsignedByteType&&(t.isWebGL2?n.getExtension("EXT_color_buffer_float"):n.getExtension("EXT_color_buffer_half_float"))}replaceRenderer(e,t=!0){const n=this.renderer;if(null!==n&&n!==e){const r=n.getSize(new THREE.Vector2),i=e.getSize(new THREE.Vector2),o=n.domElement.parentNode;this.renderer=e,this.renderer.autoClear=!1,r.equals(i)||this.setSize(),t&&null!==o&&(o.removeChild(n.domElement),o.appendChild(e.domElement)),this.enableExtensions()}return n}createDepthTexture(){const e=this.depthTexture=new THREE.DepthTexture;return this.inputBuffer.depthTexture=e,this.inputBuffer.dispose(),this.inputBuffer.stencilBuffer?(e.format=THREE.DepthStencilFormat,e.type=THREE.UnsignedInt248Type):e.type=THREE.UnsignedIntType,e}deleteDepthTexture(){if(null!==this.depthTexture){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(const e of this.passes)e.setDepthTexture(null)}}createBuffer(e,t,n,r){const i=this.renderer.getDrawingBufferSize(new THREE.Vector2),o={format:this.renderer.getContext().getContextAttributes().alpha||n!==THREE.UnsignedByteType?THREE.RGBAFormat:THREE.RGBFormat,minFilter:THREE.LinearFilter,magFilter:THREE.LinearFilter,stencilBuffer:t,depthBuffer:e,type:n},a=r>0?new THREE.WebGLMultisampleRenderTarget(i.width,i.height,o):new THREE.WebGLRenderTarget(i.width,i.height,o);return r>0&&(a.samples=r),a.texture.name="EffectComposer.Buffer",a.texture.generateMipmaps=!1,a}addPass(e,t){const n=this.passes,r=this.renderer,i=r.getDrawingBufferSize(new THREE.Vector2),o=r.getContext().getContextAttributes().alpha,a=this.inputBuffer.texture.type;if(e.setSize(i.width,i.height),e.initialize(r,o,a),this.autoRenderToScreen&&(n.length>0&&(n[n.length-1].renderToScreen=!1),e.renderToScreen&&(this.autoRenderToScreen=!1)),void 0!==t?n.splice(t,0,e):n.push(e),this.autoRenderToScreen&&(n[n.length-1].renderToScreen=!0),e.needsDepthTexture||null!==this.depthTexture)if(null===this.depthTexture){const t=this.createDepthTexture();for(e of n)e.setDepthTexture(t)}else e.setDepthTexture(this.depthTexture)}removePass(e){const t=this.passes,n=t.indexOf(e);if(-1!==n&&t.splice(n,1).length>0){if(null!==this.depthTexture){const n=(e,t)=>e||t.needsDepthTexture;t.reduce(n,!1)||(e.getDepthTexture()===this.depthTexture&&e.setDepthTexture(null),this.deleteDepthTexture())}this.autoRenderToScreen&&n===t.length&&(e.renderToScreen=!1,t.length>0&&(t[t.length-1].renderToScreen=!0))}}removeAllPasses(){const e=this.passes;this.deleteDepthTexture(),e.length>0&&(this.autoRenderToScreen&&(e[e.length-1].renderToScreen=!1),this.passes=[])}render(e){const t=this.renderer,n=this.copyPass;let r,i,o,a=this.inputBuffer,s=this.outputBuffer,c=!1;for(const u of this.passes)u.enabled&&(u.render(t,a,s,e,c),u.needsSwap&&(c&&(n.renderToScreen=u.renderToScreen,r=t.getContext(),i=t.state.buffers.stencil,i.setFunc(r.NOTEQUAL,1,4294967295),n.render(t,a,s,e,c),i.setFunc(r.EQUAL,1,4294967295)),o=a,a=s,s=o),u instanceof MaskPass?c=!0:u instanceof ClearMaskPass&&(c=!1))}setSize(e,t,n){const r=this.renderer;if(void 0===e||void 0===t){const n=r.getSize(new THREE.Vector2);e=n.width,t=n.height}else r.setSize(e,t,n);const i=r.getDrawingBufferSize(new THREE.Vector2);this.inputBuffer.setSize(i.width,i.height),this.outputBuffer.setSize(i.width,i.height);for(const o of this.passes)o.setSize(i.width,i.height)}reset(){this.dispose(),this.autoRenderToScreen=!0}dispose(){for(const e of this.passes)e.dispose();this.passes=[],null!==this.inputBuffer&&this.inputBuffer.dispose(),null!==this.outputBuffer&&this.outputBuffer.dispose(),this.deleteDepthTexture(),this.copyPass.dispose()}},shader_default46="uniform sampler2D texture;uniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=clamp(texture2D(texture,uv)*intensity,0.0,1.0);}",BloomEffect=class extends Effect{constructor({blendFunction:e=BlendFunction.SCREEN,luminanceThreshold:t=.9,luminanceSmoothing:n=.025,resolutionScale:r=.5,intensity:i=1,width:o=Resizer.AUTO_SIZE,height:a=Resizer.AUTO_SIZE,kernelSize:s=KernelSize.LARGE}={}){super("BloomEffect",shader_default46,{blendFunction:e,uniforms:new Map([["texture",new THREE.Uniform(null)],["intensity",new THREE.Uniform(i)]])}),this.renderTarget=new THREE.WebGLRenderTarget(1,1,{minFilter:THREE.LinearFilter,magFilter:THREE.LinearFilter,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="Bloom.Target",this.renderTarget.texture.generateMipmaps=!1,this.uniforms.get("texture").value=this.renderTarget.texture,this.blurPass=new BlurPass({resolutionScale:r,width:o,height:a,kernelSize:s}),this.blurPass.resolution.resizable=this,this.luminancePass=new LuminancePass({renderTarget:this.renderTarget,colorOutput:!0}),this.luminancePass.resolution=this.resolution,this.luminanceMaterial.threshold=t,this.luminanceMaterial.smoothing=n}get texture(){return this.renderTarget.texture}get luminanceMaterial(){return this.luminancePass.getFullscreenMaterial()}get resolution(){return this.blurPass.resolution}get width(){return this.resolution.width}set width(e){this.resolution.width=e}get height(){return this.resolution.height}set height(e){this.resolution.height=e}get dithering(){return this.blurPass.dithering}set dithering(e){this.blurPass.dithering=e}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(e){this.blurPass.kernelSize=e}get distinction(){return console.warn(this.name,"The distinction field has been removed, use luminanceMaterial.threshold and luminanceMaterial.smoothing instead."),1}set distinction(e){console.warn(this.name,"The distinction field has been removed, use luminanceMaterial.threshold and luminanceMaterial.smoothing instead.")}get intensity(){return this.uniforms.get("intensity").value}set intensity(e){this.uniforms.get("intensity").value=e}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}update(e,t,n){const r=this.renderTarget;this.luminancePass.enabled?(this.luminancePass.render(e,t,r),this.blurPass.render(e,r,r)):this.blurPass.render(e,t,r)}setSize(e,t){this.blurPass.setSize(e,t),this.renderTarget.setSize(this.resolution.width,this.resolution.height)}initialize(e,t,n){this.blurPass.initialize(e,t,n),t||n!==THREE.UnsignedByteType||(this.renderTarget.texture.format=THREE.RGBFormat),void 0!==n&&(this.renderTarget.texture.type=n)}},shader_default48="uniform float brightness;uniform float contrast;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=inputColor.rgb+vec3(brightness-0.5);if(contrast>0.0){color/=vec3(1.0-contrast);}else{color*=vec3(1.0+contrast);}outputColor=vec4(min(color+vec3(0.5),1.0),inputColor.a);}",BrightnessContrastEffect=class extends Effect{constructor({blendFunction:e=BlendFunction.NORMAL,brightness:t=0,contrast:n=0}={}){super("BrightnessContrastEffect",shader_default48,{blendFunction:e,uniforms:new Map([["brightness",new THREE.Uniform(t)],["contrast",new THREE.Uniform(n)]])})}},shader_default49="void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){float sum=inputColor.r+inputColor.g+inputColor.b;outputColor=vec4(vec3(sum/3.0),inputColor.a);}",ColorAverageEffect=class extends Effect{constructor(e=BlendFunction.NORMAL){super("ColorAverageEffect",shader_default49,{blendFunction:e})}},shader_default51="varying vec2 vUvR;varying vec2 vUvB;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 color=inputColor;\n#ifdef ALPHA\nvec2 ra=texture2D(inputBuffer,vUvR).ra;vec2 ba=texture2D(inputBuffer,vUvB).ba;color.r=ra.x;color.b=ba.x;color.a=max(max(ra.y,ba.y),inputColor.a);\n#else\ncolor.r=texture2D(inputBuffer,vUvR).r;color.b=texture2D(inputBuffer,vUvB).b;\n#endif\noutputColor=color;}",shader_default52="uniform vec2 offset;varying vec2 vUvR;varying vec2 vUvB;void mainSupport(const in vec2 uv){vUvR=uv+offset;vUvB=uv-offset;}",ChromaticAberrationEffect=class extends Effect{constructor({blendFunction:e=BlendFunction.NORMAL,offset:t=new THREE.Vector2(.001,5e-4)}={}){super("ChromaticAberrationEffect",shader_default51,{vertexShader:shader_default52,blendFunction:e,attributes:EffectAttribute.CONVOLUTION,uniforms:new Map([["offset",new THREE.Uniform(t)]])})}get offset(){return this.uniforms.get("offset").value}set offset(e){this.uniforms.get("offset").value=e}initialize(e,t,n){t?this.defines.set("ALPHA","1"):this.defines.delete("ALPHA")}},shader_default54="uniform sampler2D nearColorBuffer;uniform sampler2D farColorBuffer;uniform sampler2D nearCoCBuffer;uniform float scale;void mainImage(const in vec4 inputColor,const in vec2 uv,const in float depth,out vec4 outputColor){vec4 colorNear=texture2D(nearColorBuffer,uv);vec4 colorFar=texture2D(farColorBuffer,uv);float CoCNear=texture2D(nearCoCBuffer,uv).r;CoCNear=min(CoCNear*scale,1.0);vec4 result=inputColor*(1.0-colorFar.a)+colorFar;result=mix(result,colorNear,CoCNear);outputColor=result;}",DepthOfFieldEffect=class extends Effect{constructor(e,{blendFunction:t=BlendFunction.NORMAL,focusDistance:n=0,focalLength:r=.1,bokehScale:i=1,width:o=Resizer.AUTO_SIZE,height:a=Resizer.AUTO_SIZE}={}){super("DepthOfFieldEffect",shader_default54,{blendFunction:t,attributes:EffectAttribute.DEPTH,uniforms:new Map([["nearColorBuffer",new THREE.Uniform(null)],["farColorBuffer",new THREE.Uniform(null)],["nearCoCBuffer",new THREE.Uniform(null)],["scale",new THREE.Uniform(1)]])}),this.camera=e,this.renderTarget=new THREE.WebGLRenderTarget(1,1,{minFilter:THREE.LinearFilter,magFilter:THREE.LinearFilter,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="DoF.Intermediate",this.renderTarget.texture.generateMipmaps=!1,this.renderTargetMasked=this.renderTarget.clone(),this.renderTargetMasked.texture.name="DoF.Masked.Far",this.renderTargetNear=this.renderTarget.clone(),this.renderTargetNear.texture.name="DoF.Bokeh.Near",this.uniforms.get("nearColorBuffer").value=this.renderTargetNear.texture,this.renderTargetFar=this.renderTarget.clone(),this.renderTargetFar.texture.name="DoF.Bokeh.Far",this.uniforms.get("farColorBuffer").value=this.renderTargetFar.texture,this.renderTargetCoC=this.renderTarget.clone(),this.renderTargetCoC.texture.format=THREE.RGBFormat,this.renderTargetCoC.texture.name="DoF.CoC",this.renderTargetCoCBlurred=this.renderTargetCoC.clone(),this.renderTargetCoCBlurred.texture.name="DoF.CoC.Blurred",this.uniforms.get("nearCoCBuffer").value=this.renderTargetCoCBlurred.texture,this.cocPass=new ShaderPass(new CircleOfConfusionMaterial(e));const s=this.circleOfConfusionMaterial;s.uniforms.focusDistance.value=n,s.uniforms.focalLength.value=r,this.blurPass=new BlurPass({width:o,height:a,kernelSize:KernelSize.MEDIUM}),this.blurPass.resolution.resizable=this,this.maskPass=new ShaderPass(new MaskMaterial(this.renderTargetCoC.texture));const c=this.maskPass.getFullscreenMaterial();c.maskFunction=MaskFunction.MULTIPLY_RGB_SET_ALPHA,c.colorChannel=ColorChannel.GREEN,this.bokehNearBasePass=new ShaderPass(new BokehMaterial(!1,!0)),this.bokehNearFillPass=new ShaderPass(new BokehMaterial(!0,!0)),this.bokehFarBasePass=new ShaderPass(new BokehMaterial(!1,!1)),this.bokehFarFillPass=new ShaderPass(new BokehMaterial(!0,!1)),this.bokehScale=i,this.target=null}get circleOfConfusionMaterial(){return this.cocPass.getFullscreenMaterial()}get resolution(){return this.blurPass.resolution}get bokehScale(){return this.uniforms.get("scale").value}set bokehScale(e){[this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass].map(e=>e.getFullscreenMaterial().uniforms.scale).forEach(t=>{t.value=e}),this.maskPass.getFullscreenMaterial().uniforms.strength.value=e,this.uniforms.get("scale").value=e}calculateFocusDistance(e){const t=this.camera,n=t.far-t.near,r=t.position.distanceTo(e);return Math.min(Math.max(r/n,0),1)}setDepthTexture(e,t=THREE.BasicDepthPacking){const n=this.circleOfConfusionMaterial;n.uniforms.depthBuffer.value=e,n.depthPacking=t}update(e,t,n){const r=this.renderTarget,i=this.renderTargetCoC,o=this.renderTargetCoCBlurred,a=this.renderTargetMasked,s=this.bokehFarBasePass,c=this.bokehFarFillPass,u=s.getFullscreenMaterial().uniforms,l=c.getFullscreenMaterial().uniforms,h=this.bokehNearBasePass,f=this.bokehNearFillPass,d=h.getFullscreenMaterial().uniforms,p=f.getFullscreenMaterial().uniforms;if(null!==this.target){const e=this.calculateFocusDistance(this.target);this.circleOfConfusionMaterial.uniforms.focusDistance.value=e}this.cocPass.render(e,null,i),this.blurPass.render(e,i,o),this.maskPass.render(e,t,a),u.cocBuffer.value=l.cocBuffer.value=i.texture,s.render(e,a,r),c.render(e,r,this.renderTargetFar),d.cocBuffer.value=p.cocBuffer.value=o.texture,h.render(e,t,r),f.render(e,r,this.renderTargetNear)}setSize(e,t){const n=this.resolution;let r=[this.cocPass,this.blurPass,this.maskPass,this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass];r.push(this.renderTargetCoC,this.renderTargetMasked),r.forEach(n=>n.setSize(e,t));const i=n.width,o=n.height;r=[this.renderTarget,this.renderTargetNear,this.renderTargetFar,this.renderTargetCoCBlurred],r.forEach(e=>e.setSize(i,o)),[this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass].forEach(e=>e.getFullscreenMaterial().setTexelSize(1/i,1/o))}initialize(e,t,n){[this.cocPass,this.maskPass,this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass].forEach(r=>r.initialize(e,t,n)),this.blurPass.initialize(e,t,THREE.UnsignedByteType),t||n!==THREE.UnsignedByteType||(this.renderTargetNear.texture.type=THREE.RGBFormat),void 0!==n&&(this.renderTarget.texture.type=n,this.renderTargetNear.texture.type=n,this.renderTargetFar.texture.type=n,this.renderTargetMasked.texture.type=n)}};new THREE.Vector3,new THREE.Matrix4;var shader_default60="uniform vec3 hue;uniform float saturation;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=vec3(dot(inputColor.rgb,hue.xyz),dot(inputColor.rgb,hue.zxy),dot(inputColor.rgb,hue.yzx));float average=(color.r+color.g+color.b)/3.0;vec3 diff=average-color;if(saturation>0.0){color+=diff*(1.0-1.0/(1.001-saturation));}else{color+=diff*-saturation;}outputColor=vec4(min(color,1.0),inputColor.a);}",HueSaturationEffect=class extends Effect{constructor({blendFunction:e=BlendFunction.NORMAL,hue:t=0,saturation:n=0}={}){super("HueSaturationEffect",shader_default60,{blendFunction:e,uniforms:new Map([["hue",new THREE.Uniform(new THREE.Vector3)],["saturation",new THREE.Uniform(n)]])}),this.setHue(t)}setHue(e){const t=Math.sin(e),n=Math.cos(e);this.uniforms.get("hue").value.set(2*n,-Math.sqrt(3)*t-n,Math.sqrt(3)*t-n).addScalar(1).divideScalar(3)}};new THREE.Color;var shader_default62="void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 noise=vec3(rand(uv*time));\n#ifdef PREMULTIPLY\noutputColor=vec4(min(inputColor.rgb*noise,vec3(1.0)),inputColor.a);\n#else\noutputColor=vec4(noise,inputColor.a);\n#endif\n}",NoiseEffect=class extends Effect{constructor({blendFunction:e=BlendFunction.SCREEN,premultiply:t=!1}={}){super("NoiseEffect",shader_default62,{blendFunction:e}),this.premultiply=t}get premultiply(){return this.defines.has("PREMULTIPLY")}set premultiply(e){this.premultiply!==e&&(e?this.defines.set("PREMULTIPLY","1"):this.defines.delete("PREMULTIPLY"),this.setChanged())}},shader_default65="uniform bool active;uniform vec2 d;void mainUv(inout vec2 uv){if(active){uv=vec2(d.x*(floor(uv.x/d.x)+0.5),d.y*(floor(uv.y/d.y)+0.5));}}",PixelationEffect=class extends Effect{constructor(e=30){super("PixelationEffect",shader_default65,{uniforms:new Map([["active",new THREE.Uniform(!1)],["d",new THREE.Uniform(new THREE.Vector2)]])}),this.resolution=new THREE.Vector2,this.granularity=e}getGranularity(){return this.granularity}setGranularity(e){(e=Math.floor(e))%2>0&&(e+=1);const t=this.uniforms;t.get("active").value=e>0,t.get("d").value.set(e,e).divide(this.resolution),this.granularity=e}setSize(e,t){this.resolution.set(e,t),this.setGranularity(this.granularity)}};new THREE.Vector3,new THREE.Vector3;var searchImageDataURL_default="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAQCAYAAACm53kpAAAAeElEQVRYR+2XSwqAMAxEJ168ePEqwRSKhIIiuHjJqiU0gWE+1CQdApcVAMUAuARaMGCX1MIL/Ow13++9lW2s3mW9MWvsnWc/2fvGygwPAN4E8QzAA4CXAB6AHjG4JTHYI1ey3pcx6FHnEfhLDOIBKAmUBK6/ANUDTlROXAHd9EC1AAAAAElFTkSuQmCC",areaImageDataURL_default="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAAIwCAYAAAABNmBHAAAgAElEQVR4Xuy9CbhlV1ktOvbpq09DkiIkUBI6kxASIH0DlAQiIK1wRfSJTx+i4JX7vKIigs8HXpXvqVcvrcC9agQ7IDTSSWgqCQQliDRBJKkkhDSkqVPNqVOnP+8b//rH3P+eZ+199tlznVTlvVrft7+1T7OaueZY42/m37QALKNk2wHg1pITlB17mC+Pp11W3X/LHyT32vhg48/5SOv+PnwpsHA70JoGlueB1iKApeqzvOzn44GatTB76Xzhd7suBR7+WWADgDEAwwCG/L54b/poDLrHuvvm70Z2Avhsc+PVcxscBU8F8C8ADg5+ipIjD/PlGwfgju8B924E5seARUfLsiNmqQW0IjL8+7L2NYD/7COBzfcCm+aB8SVgdAkYIRCXKyDax4EdAanL5PuNPllNvXDlAHwFgP8AcC2AhRIoDXbsYb48dl5WkVFTE3LGDcC9m4CZCWBuFFgeAZaGAYJQQCRqDHT+McJrVb8zwATUXH02MHYfMHEIGFsAxgjApQqACYQORjtd/B7Axt/z79sC0+cMPgjjlwPwVwHcA+DfAHzTxcVgWBroqMN8+cYBeM71wH0TwKExYHYUWCIAHYRLTlkCYgcIBcAgU/n3qy8GRu4HRgnAOWBkERhddPAJhGJDBxkvw7cqimr+zFM/ZLnZF64cgL8BYD+AWwB8x/dlWuWagHiYL984AJ/0RWBy1AE4AizyM1yxYAcTigW55xMbAkxEiwEdkJ/ZCQxPAiOHgBECcKEC4TBZcKkSv+mTieNcNPNC26mLNsj45QD8LQDTAO4GcJt/7iw2bfoG4WG+vAGwm9ExiEg69zpg/wgwPQLMjgALzn4E4aIzoJjQ9g4024uygkj+pyuAoX0VAIfngOH5NgCHMhAm8Sv2y3XDZeBhNIp8OzJE8OsBzAKYBHAXgDt8/4O+MVT0j4f58o0D8Pxrgf3DwMwIMEPQEYRkNwfgsuuDZLskip0No0gWMD/9HGDoADAkAC4Aw/wsAgZAgs2Z0ABI0GU6IVmKv+f28KDnHxkA/G0A8y6G73N9kOCjXnh/Ebb6OvgwX75xAF5wLTA1VIHPADgMLDj4yIA5AAm6aCUnv4oz46eeDwxNAUMzwJAz4BABSNDFTwSfg7DDKHE23MG5PqIY8A1u/dINs9dBdy8AgnGPM2NfUBrsnw7z5RsH4IXXAAcJviFgluAbygBINnSLWOAjGxJ4pgOKDV0v/OSLKp8iGXBovhLBBOCQM2ACoTOhnYrAdItYbCij5JFzRyIAqRccAnDAQUjg6UNQ7hsMXP0cRQAexss3DsCLCECCLwCQzMcPwUi2MwAScAKbfnY/YRLFQ8DHX+IAJAMSfDkAF13kLvleIjhjQQHxUVS3jjgGpKeeNzYVQEjgUS8k+PghONdhIwAP4+XXBYCHKIJbwJyDTgaIAdCBJx3Q2M8tYAHP9m4df/ylQOsQ0JqtRLCx30K1wtLBggScQOgsKBGcWHAJeOwRC0BSM1mQIKRbhh+Bj98JQP6t4U0APEyXXxcAEnxkQAFwoVUxID9kvQg+c1C7vidRbIDkc24B//hTQGumDcCWA5DgMxASdNIFBUI5pCML8v8API5zfEQx4BudgqiczviSnJhQwCP4BMCGl+wO8+U7AJi/W4O4YS6+pmK/2ciADsAOBhTIIiAJnPB7AvNjP+0AnANaYkAHX2JBAc+tYaJXOqBZv24Vc386XW5dtkHGW+4HFAJonpOe+YYQZAShgKjv3PNvPQaxVoI8zJdfFwASfPzMUwS3Kt1v0UFIlos6oDFdAGFcliMAP/ryAEAGNwQRnDOgLbdlIEwrIs6AZ/QgkMMHQF6ZAKQcJAsSYPwIeAIk9wJgoPK1gi7+PwF4GC/fOAAvIQPSs0URTPBJ/Pp3GSEGRHfBCIQ0xowBtUbcAj7ys5X4Jfu1HIAGQrIgQRXEsAFQIORDFhiDY/rMHmrU4QUgR08AkgUjCAW6CD6CkwBsAIQC4GG6fPMA3OXiNzCg2I9gNCMksmAAoemDzoimFwL48M85AKkiuQVMAAp8CYRRDAt8GQiJ67N6GJODAXAHlsGguscA2AJg1IPGYmxOpBxFWkRN9LsATgIwXnNs/v/5z/9XCf8BO3YAtxbc/46/KDt+5+ea1Yku2VUxHz/z0v24FwMGK1gWsK2OUUxHHdCBeRUB6OxHABr4ZICIBd0QWSF+XRdMTAjgCdTrG9cBNwE4F8CpDkICyYLGsuhFt6zs+gISwUen8zEAjgMw4cfx2H6O/90yAFo84Cbg4ID3/9TfLTt+5+ebnRABkODjx0SwPi5ec/FrYpmqSAxM8Dn60CsqAFI6GfhqAMiDE/gokmvEr0C4PgDkBQm40wE8zMFEUDKEVoxIMLl/KS73mE7H9d+vcKHQQcjwW0Yu9nP8m8sAmOIBuWY6wP2/4s0ezjjg8TuvaR6ABJ70vxUApGrm7EbGE+i472BAB+WHfqHS/eoAaEwY2E9+wLSXTqhI7CXgnB6LCoOJ4BiST+hTnG0HcCwAglCx3ARoZEVFXnBPp/O/A/hXACc7CPs9/i1lAOyIB+RDX+P9/+pbQjjjAMfv/PL6AFDs1wFAgs/9fgKfgdE/ZEpuiQlbwAde6QAMBgiRmsSwA9BY0JfjovGRDBMH4TlcXGhcBOc6HkF0gjPhZgchxTLZMAci/04W/B6Ab3t09EPXcPyflgFwRTwgJ2MN9/8bf5qFM67x+B/aW4XQz42FeL0YrRyikztUFw0704mf9kXgxhOAqc3AAsPyRxxQCs/PdXOFY0W1KHy3QIUGtx+6vdnx1vsB+dsTncm2AogglFgVEAlUWrOMB2RyEmMCGQ/Y7/HvKns6tfGAnJQ+r/9b76oJZ1zD8WdyQjYBh8aBhVEHjELouQ8ukQ7VRSCJAALwkr+sALhnGzDD3JAJYJHg9uhoi4bx8ytkWUtvHT/7+Zc4dw1uZ3612fH2dkQf7yxIEEockwkJQn4IQoq8unhAhmPRKKFx0uv4K8ueTs94wD7u//VX9ghn7OP4c+4G7h8HpseB+dF2AKlFLwuAIZ8jD6NPrOhAffmfA9/ZBuzZCkyRWSeqBCWyoYGQ5yQrBpDbum/ME1HoPo0XEkSD2zlfbna8q6+EUJcTCxKEtHL5EQjP6BEPyIgYAZBvYt3xHyx7OqvGA65y/7/9wVXCGVc5/sl7qxD66dEqiYgRzAqhN1A4CBNAAlDyAFI+iZ9/N3DLJuC+jcDUBmCWyUnOrmTYCMIOkNclLg0B8/RsNLg9+UvNjnd1APLmmQpFHyEBROuWACQT8nN+H/GAvY7/VNnT6SsesMf13/CpahGnZzhjj+PPmwX2MYdDIfQexWyBAwEUOQDrRDN/98p3A7dvAO6fAA5sqHJDBEAyoUVGkwEd6HR12XU4kwzfl6fCXTZzjy57vvnR513X7Hj7AyDvggAUi9EyFgiZqNxPQF6345nOWbD1HQ/Y5fpvuLa/2+82/vNHgAPDFQDnhoF5j2C2qBWCI8bw1eRw5CL5l94L3DEOTI4DB8Y9OWmsEu/zBJ3rgsaybqBob/7A4C7jtWcooRrczr+u2fH2D0AOQgAUCxKEP7aGgLy64+m6KdjWFA9Yc/03/Osa4glrjr+AupqHz1sEs0cxG0BC9HIePLoit9eNkVf9L+DuUWByDJgaq4ybGYLPAWgiXmLedUE7dwC7saL7CqfPKXi4NYdaykCD410bAHlDEsNiwZ9wAPYbkJcfz6T2gm3N8YDZ9d/wHxUA+739fPwXPrSKYGb+BuP3jAFDElFH9HIWwbzCIGkBr/or4J4RYO8oMOW6ZVcAuvi1Cgoha04BCwT5gfMKHm7NoRde2+x41w5A3hQZkADk5+cGiAeMx3+/7AENFA8Yrv/G71cAXFM4Yzj+otOAaQLQA0gZxaIIZtMDFTigKJV8H9Iq6aZ59ZXAvSPAvpEKgBTtBODcSCWCZeRYtpzrmLyeGNCAyFl1v+Hei8qeb370Rdc2O97BAMi7EgB/2QG41nhAHU9LuWAbOB7Qr//GPRUA13r7Gv9FZwIMoVcEswEwfDoimEP0shKKtIphaZQAXv1+YM+wA3DEdcvRKkGJADQQEsQuhi1Tjt95vBsh5nx2IO59SsHDrTmUOStNjndwAAqEry0IyCMICkOyiuIBNwBvPFQQT7gBuPjc9oRYAIHyOEL4vIFEYVNaOou5vCGE/tV/A0wOVcnpzI47NOri3QFIBpSeaSDUdYLOSWvYImSGgftpJDa4MWJbAGxivGUA5MAOc0Be6eVLj7/4Mk+hzCOYPYpZDBiNkLh+G/M3yFyv/ltgL3W3YQfgcFUhgRY2PwY+Z7/EhAR1SFyXCOb57r28QfQBsJQBMn5D4y0HYLPje9Cd7RIC0PM3EiMofF4gVCBp1P840ix/gyz56r+vAMjk9Gl375iB4+CzveuZdLkkEPJ8ZEfX/6R73vOjzT5Si9hucLxHAVg4PwJgRwh9CKOXK8YA4ZEqKZXSQWh5P+5AftXfA/uGKvYjCKn72cctbFrZNECka5L5CPwIPtMH3TVz17MLB5gdLgA2Nd6jACycHwLQxFEUSR5ASvARDB0h9AQb9bXIgCGk6lUfAPYTgEPAITKgg1BObk58srTJgG58WMkWMaAbQQT1nc8rHGANAJsc71EAFs4PAagQestgC1lsBJ4BMCSOK6dDUcwqqaFiQr/0QeAAAdjy+jBiQQeeMSBZT3nCPUDIa9z+/MIB1gCwyfEeBWDh/BCAeQSzgkjFfGLBBD5nxQ4DxN0wv3hVxX5TBGDwL5obxvVA5YqYL5BeMLd66YYxJpRB0gK+96LCAdYAsMnxHgVg4fwIgMrhUPKQ2C+Bz0PmBTqBMQehAbDlIjj4F80KJguSVZ0FuXpjoCOgXawLjALhbT9eOMAuAGxqvEcBWDg/l1IE05Ed0ygZnyHdz0VwCqEPIfNyx0QQvvLDFQCp+8nfZk5und8tXwIgWcHSNX0N2CJmnAl3v6RwgNnhl17T7HiPArBwfghAS7mV/hey2JS9FvM3BLpUUi1YwDRMXvkRYJoAlAh2l0dcZ04s6JUTDIjyBcrl4yDc/dLCAdYAsMnxHgVg4fxwKVwJgGEJNmWtxpQMpX9on2eRhVA+O56AjMfnP+e3Xvf3NwG4xIPTleiY55bpGh6UbafNU0l0z0p+5Jh5HqYJ6b51nP6XP8cx12XNHQVgIQB/bFPVg2OC7Q+WgVFWng/FvtWLI06uWh5oguKEcXVS/9sEAF//VGD7t4ETDgJbF4CNi8CGZWBs2fPL/H6Vwp2KEtVk4fJ+v/EIYPN9wKa5qu+IncfPwXHVZe/aOL3EbwS7xv8A1rQvnO0j8PArTgTGZ4BxFv9mIxhOCGsv+0OPYDRghcLfkWkEuq0+G00x4OtfDGz+d2DbHmDLjL8si8AYP/7CGIAiEEMTG92zXqSbH+d9R2aA0XnvO+JjthiIrOVDHHPOkBrzUQAWAPsZp3oPDpa/Xag6EVkLBK+5rAnJC3/nYk/APD704WiEAV8OTHwX2LQH2DgFbJgFNrBhjd8r79deGoEwsllgNBOzy8CdjweG9wBj08AIAci2D6HafmyAk4/Z7SJ72hGYRwFYAMDLTwOGp4FRFgD3HhzqRGQiyeurqOdG6r0Rm8IEZjzRlkiqCWoEgK8Axm4BJu4HJhyAbFhDxmbDGnZO4j0SgLGDkpibgEq66TJw/1nA0F5gdLpq+zDqFfd5LMeWqu5HNST0uJOIllg+qgMWgI+HPv0xwLA3gWHpW2sC441gCECbmKziaGrnUdMO4aHeh6MxAP4SMHI7ML4HGD8AjHvHJGNAgpDgY/ck3stipRemvVhc+uASMPUEYGh/9dIRgGx8Y+MNbR/00uVtH0wEx94j/v0oAxaA8Ed+GBieAYZZg5kADC0QWGOFzGJlcGPzl1BxNLXD8sk4xftwNAbA/wwM3wGMUmxOOQBnHXzetIYvibonmSiuYTNjriVg7glAiwBk0fNZH6+PmX9P6kfNmCXGpftJ7TgKwBIAnln14BAAYxMYm5C6RjCyCoOyr0qkD/c+HI0B8DXA8N3AyCQwesD1VQKH7EcASm1Q+y4CkN9pUKiVF5nLvy+fBbTUd8QBaH1HvNBROiZvfsNnrF4kcvPwpdsBLBeU18Nf7AB23Dp4ecHC8oBgUlJJecLS+7+WOpE3gbE+HKw+yoevCYkMGKqPJrdEKARutaFYRs1fiEZ0wP8CDN8LDO8FRqYq3W10pgKgfYLaYCzootgA6KXaTA90y374TKB1sBozy77xHFZ536utRgAmEaw6g5kUSFZwSXnA330qsOlfgHMPDlZesLA8IOjoLypPWHj/11EnCiVwkz7kAExtsGraYUWdSDX5TmsagL8KDBGA7Bd30JsW0oWivnEOQNP7yGTSBR101AlZSUtGyfgZDkCWY1HnJdcBVe6325hTvelg2CQjZNDygG/2An0j1wKnL6y9vGBheUC8prQ8YeH9X39OVQSc7Mc6fCaKvAeHdCIVf4yMYCynTpX+nb97NJmlSQb8r8DQHm9YOFUZTKOzoXGhs6AxF0HIexcLBvWBuiHN8s2ne98R3qc6L4Vyb2oBVjfm9MIFHbjDCh6kPOBbQoG+oW8CO5bWVl6wsDwgfr20PGHh/X/1iaEIuDcCTIW/1Q4rFv8OnYiW3c+W2iKwUjKbyjQNwL1uuR6sAEgDgq1brXOmV81PxhNB6DUDBSYzQJwFtz623XcktX1Q1VWKaTF/zZhVazBVYA1tX5MazsGvobwe/jQr0Ne6BTh5uf/ygoXlAfG60vKEhff/rSe1i4DnTWDUACY1guFTDqLYdCBvf6DJYSMYATBfOx1kLfj1v1axH10nQ3Sd0GUkBnTfpemtBJgseIKQAHLQcVxa2TnuMW0Aqui5es8xBIegVdVVE8VhzHnLh65WMB9An+X18K6aAn2tO4ETl6vqbKuVFywsDwhevqg8YeH93/Rk70JE90nowxZbIJjvS3WYNSGUwGHJTpPxwwcbBuBrgRYBeKACn7VtpdUu/c0NJxO9BIxcKu4TTODzbkonPLoaL0vyUQRb2y8HsL1ckfWzMeuFi40Qezqi+yiPhyt7FOjr6/gCFwgP7Xb5vssTFt7/nQRg6MGRWmDRoeyTlpgw68GRTwgZgo1gGmXAX6/8dtaylSKY/koyID9BhzML3q1gAos2AcOrZYSoq/pJp1VtODRm9Z3LS/7WjVkvXOzEtOpKyGrlAT+4SoG+VY8vBGCvy/dVnrDw/vee65NBJiAjBIVcAJQjOm+DkCZEeiGAMw6sAwDZsJrAdhFM9rPGhd4904Co5oVuCZPV6kD40Ec6+9W8dBTBsfdc3nkpvnB82fp2RPcs79dHgb51LA9ofsDV6vut5/3PnxcAmLVBiDqgevDaJLkYrpuQxzcNwN8AWgIgRbB8loEBzXDwl4cGiDGft58SCOWGedgjvOJ+bPvgRkiuA+ZjzhnQQOiFNVbloa7l/fos0LdO5QENgEXlCfs8Qbf7HyMA3QVjYihYhLENgjX9y/qwxQmRU/asfd0ZcLU2CHVGyusJQLKfVi98CS12T5f7iECkHpsMkAhCF8+nshWH2I/jXsOYO144GV/9ApAIrS3vt4YCfetQHtAA2G+/4PW4/2PPbzMgmUMi2NoeSCRxIt2/FvuxWURIWCXg357gfTjEDNIHnTRXRCpH5ugKwGl3HpMBXQc0v6WLYVm/5limj04rG762K2uYY9jBkr9+rI03NL5ZbczS/dJ+LQyoga4o77fGAn0NlwdMAOy3vl/T938KAcj121z8Bn+Y9eWQJRz8Y6kNagDh2ey5EvxjxQD8TWdAuneCCO4An1vw5vdzQMmdktwq7pLZQR+dM34+ZumAxvY1Y04uqOAJ6FsExzeto7zfAAX6GiwPaLWR1lrfr8n7f/Rl3QGzmsis+/uO71V9OFgP2gpPhgr7TGRqRUT6dyvr4aIs/pm/2zVUNbBSv6G8e5pEv0Cvec7Po7+bTtjlBRlkvAMBkDeQyvsNWKCvofKACYBrre/X1P0/oWEAnnFD1YdjhtXxR73mX10FfCHHE9pVWcGAI/S0gKsfA2y+twrFZw6Hxf/F0Pk8Ri/kpGSnMuDx5T0iACgQHioo0NdAecBUHW6QdsV2/cL7v/Cyqr5gnc42CCOcfX1VIZ/V8We9IDmTzVXwPDJiXuKXPxtDBma8+lzP4WAgKkPxCUAPE4v5GzEuMX0PYJPLhB6FJsc7MAMmkVxaYC/K9gG+F1++8AQ7Gwbgk78I7GFpXgIwFiRXOwaJZPUbiR0yCUDRk+cHf+YpwMj9HgfI8ClGPyvsSiH0WSKRuYlitLb/zHM/JOSs5C/YIC9cMQDZr/dwxgOW9gtGYUBi0wA8l304vDQvAchilFbpIBQhZ7Ejq6ZQ0/Yhil8y4j89Axie9DAsD6FX9HOK3QtROTFkviN83kG4felIY8DCeLrSeMDSfsEovAECUFsTjHD+tcB+tkFgcXKvBRir7qtFl9owmO4Xy/1G3bAFfPrZHorFNWBFwHjQAFctIghj2kBarw06If/+MM9ZqTN6DgsDojCerjQesLRfMApvoGkAWh8Ob/tgAPSKWCp8ngNQtadjmTdltvNvn3peFYhgQQgh+iUmEaUAUoXM1yRLmWuFLaE9Z+XIAWBhPF1pPGBpv2AU3kDTALzwmqo6qtVh9kJErAudABia38TC5wJgS2xIhAwBn3yhByL4EhzXfRXxYsDTJ4IvrNN2JFMxZcBzVo4cABbG05XGA5b2C0bhDTQNQLZBYH1AVsQSAAU+imI1obHyblnjG/kJk3U8BHz8xVUQAhnQIl5CyNgKAGp5LKSSCoAySh5Jj79vTagcxUaIBeRNe79g9gq+DXig4wGzy+PONfT7RWFA4noAkGXZVAhcBckJQgNgrLiaNb3paIDo1vHHX+oA9LQBi4DxJcOUPJUnTgU2NJUyROs8irGARxQAC+PpCtsFd40H/AEf0gMQkLgeACT41PiGoLOKqyrJq3K/Ya9mNyr5FusN/uPLPIeDa8Bc+w3rtyl4VFHaMZc3i9RWBM9jjzgAFsbTFbYLRmm/YBTeQNMAtD4cBKDXBTQGdAB2MGBo8SCLmEuS1AFVAJ3A/NhPt0PoCcA8bSDG76XI7aySg6JYuGfKwJHFgH0E5B3ueMCe/Y4L+xVHAOZ+9EHcEgQgwbeiEYx6jwTdz4qfu7EhEJqxGqruf/RnHIAEnxgwBM0aC8aUAYWNBRCmoIll4HTqO122QcZbrgMWxtMVtgvuOx6wa7/jwhtoGoDWh4MBJ16WN4lfr8AqI0TVV1O1fa9BbQzovkAy4Ed+NgCQUSxZCFWvCOaOFREXyUwZOPIA2GdA3uGOB6wPaOz+QPv5S+MA3OXiN9aclghW+d3IgupBF2pPqxcxGenDPxfSRh2ASiKKiVP2PaZScvAKoA0VDc6cOlIB2GdA3uGOB1zR77iwX/F6AFB9ONSOQW0frA50sILVcckWJyIDSgwPAVcJgFbYuZ3FJvAlEHbJ3IsgJLGedeBIA+AAAXmHOx6wo99xYb/i9QKg2iAIfDJEJHqj4SExbEty0gkdhB/6P9oZbBZIGiKYVb9GKaN50lRHBLOvhDxh/5EKwDUG5B3ueMB2QGM/grb7/6wHAPNGMAY+GSGUjC52VX2f2CD4+HO0gqkZfegXKgBaHkcWtS0AWii9xG1ImrLlN5XR8L8fmQD05BVrmEENmpYSP9QX+KHiqj2/82+HqqDWwnbBRfGATdzAegGwru2DpRq7Mzq2fpAf0Nq0Rl2wBXzglZ4yUAPAmDSVWDBPHQjLcgTqOZ6zUvdKHh4ruDCerox/Dnu7YqwXAC1NI/QcEQuK6WK/kdgCTGC0PYAP/KIDMBgglq+hIkrOfsaCviLSofcJgJ5AdM7kkSaCj/HqQKVIGvD4swF8bcBjmzjsaQ2H5D/6acBd9wALB4DFWWB5AVherMp4GKIYEOp7+26UF0aSfT/xYuDG7wDjrIpAERytXf2vajj7ueryQXSFl10K/ON3gIWDwCLvjfGB8Z54O+Ee4ve6513uB2R1yzsqC+twbC8HcNVhfAeaBuDP/TvwtS3A/ePAIfYFVlPq2HHTuyulZCTlhbjhETF5yxTQGgPGhoHhIWC4VSXGD3n0tLkMHXHxu+YyB+MlPwDuZs5K6FlsbCzdVO9DuKfkHM8AEkP7B8fOkwDcD+B7np42+JkGOvKdAL4E4K8P0zvQdET0b14D3DgB3D0B7B8HZka9WzrD88N6sFm+YcUjrn7E1ZDvMtF9DBgeAYaHgSGB0PNHCD4BLwLRsByAyX/ij0/dDUxuqlIG5hix7eFhvLcOVUAtyPSydAFmOQNe6EYGV/9ZESiKgIEgtbaD/gHALQC4ovY5r5KwtjOU/XfTAHzzLuCmIeDuMWDvKHBwpMoN0WQzNtAaYSs0K4ZlOSAjGG9kPjCBRwZ0ABKEBJexYAZEAU3A7Oi1BeDym4EDnjQ1TwCGWMW8MXcKks0YOyZNlQOQjcgYIUHllEzYQ0ktm+r6oz8G4F4AXwXwRd8/kO9A0wB8y65KmPxgGJgcqYJTKYpTv2CCzyddQJRDOjKivn+Deh8BF8BnwBtaCUA+YYEyAU8h+c6Az9gNHHRmrgOgmDA3jHQ+iWupCeUAvNSrA9HNwqx+muk9nJVNg/CTfrmbAPwbgK8D+PcHkIibjob5o13A3XypWsAkG1cPA9PDFQDZM1id0i1KxsWfOrKnAFXlifCFFMMRcASigOcs2MGAIfE9iWXplS6On7UbmPaUUTXQrgsVMzcRj5Folg2V5ayUA5BWYKwOxKUafnosWjcJwk+7W5F2EKvlE3xcXaNYfiCYsGkA/smuqug6hcleAnAImPbO6YwRpMgjCAVAm/yQmKTv5hNsAf/i7SyNBSl2a8Qv/4/M1yF+BZSYlNQCnnVrpbC+mToAACAASURBVJcaI7sOSEY2NpaDXLqpR+vE/OVksDgImgGgghHoYJbTWc7oJtFWc65/cg2AYvh2ALsB3AzgVv95nS/f4QdsIkT9T3cBrGtITWZfC5hqtQHInsEGQn3UDDvEDEY/ICf7SxMOrAg8T+c00JGkvHGd2DABUYZIAONzCUDppCFhSukCBsLQrFtZe/IixYQpSyEoJoqnuPWrVRAubQh83HNlZB23z7j1ywmj6CIIqUPxw2Xeu9bx2jx10wz4Z7sqTYZaDD8EIDuoE3hMVEphWg66JIp90k0sBxBcy+iPIIaT1RtEsHS/yIAqw+VSNPWQfe5tlVEk8auXgVa5BUsEJuT5uoliAbE5AGotmIAjCPnR9xDG3TQernYAUupTdBGEFMf83OkApHG+XlvTAPwfuyrgSZOhas3u6cwTsUBVn2gTwyFMi8wjHZAA1M9fYGHDULJD1m8Cpa8fRxDad+l+Ykf/3XNvd11U+qiL39SxXevSsshdDFvgbI1O2AwAtRZMZzTBRuDFjxe1Xg8QEIB8yyj5yYIUxfQIkfkIRnmHCM712JoG4FsdgHHp3ACoMH2G6jM4lWzoQarSvwQ6MSB/vporVaFkh+mCLlpVR8Z+dqDZLoDOpHSiQeAFDkBjPrlgCHgCUaFifg67H/9uYjn4Ai1vpTERTAASBaoQJBAKeNqHlL6mwPDZYAOROag/EYRkPX34MwHIvzW9rQcA+TLpI22G7EcQKlJGsYIJhC6ClUMiXfBTbFUQAej6nPS/OuAl9pOOqIc2BLzg++3VmWgIEUz82cRuCAtLIHQQm0gO52uOAb22sC3JEWgRfPpZf2sQBQIgLydPEIFGwPEj8MlF2bSbsulghLftqsCXq9HGgHysznrGgi5qzTUTFH8FLhAUn3hIJwCN0HLncw37qaF2zoYvuKNivmQIuUNc7GvWt6sHNs26twA6vhyq8NEMAHlyntFrDCcQehyaPTl+FwAbXDcmAKMRThakEk8Q8kPg8SPL0qzLBl+A9QCgR6uZGs3vfHz8TtBZvkgGQrEPBVAUg2Sij50QAOjiVKI3saADJRm7dSLYWfSFDkCem/dhZeMy9pPY5QvSDYQyUJoDIK8qMezh3wY6fSL49PcGgCAA8pScJLIgAUYQEmz8RPA17StvGoBv39W24eREiBoNQSgWNI1HBkdgxJSw1AI+dFIbgOYmkjimQ1r6XXC3rAbCHycAgytohf8vsB/r2KRaRq7zpZ+D37HMX0s3DDcCUGLYaw53MJ4YUODzusqlGCQAOQCejuxA8UULUkxIwAmMAp8Wa3qkN/R9W+sBwOhIEPjk5SLr8HeKFbTQfb77csPIMHGl/4MPbReslPhNe4+MiTpi9AFGV4nI7MfvagNQLh/pfrYnDAS8aJQ42A2w4em2cAyWQUuJVQTGWLs1uL7DG9J1RjhA+jvYk4t3KXeMqijpzrud4At9z3XtP16yGfjKZmCGooYh1tZzvv8xXPFl4PoJYC97k9FlwZWD+Azi/deMZWeP13eQCGEyoERudChIjbb3mJYwH7V0QIKuCwj/gfMj0asn2I0FXRSHXfL/iRkNgLyeVj8ccMY//J1fyxzTAXT2+xoQViKYD/1hDqLxPiYxTgSvQrphphG97tz4Slqafnj7uk1kIQDZrvWTw8B3jwEW+RLxPgSiCERdPwPR7+wCPg/gulFgfruDkOMQkFc5x84e708JAMmCuRNBXi4TIg5CGRzGiBGE/D4E/C2r2vcAYJoify62i0aJSMhB+2IHoNwu0fkcjQ85pu3ack5nIBREqneYFyWLkAXIJHESe00Cyx5QyeL6F/tyEcDcrOW2n7fX8df0mME+/vQ/PQjhoy3gzo3AISYf80MQaQx1peH9wb7v2mrtmCBkIMMejp3jIJD1MsaxaMZ8v5N/67INAsB3BAYU4JL4DSo1J15AFPAEwuQHZJzkKfUAtOHLJSOQRWndBYQvCQA01cfnNopfsaCJaD2baBn79QjSTiOEP1EcawIpkq2kegBTNgHWEpOKF8Uwq2NRFPM4AqCf46/rA2U9/uVDvurB01zvAJpiiwOl3fEeciCGF+Ij11f+QkbSfMPfIzqw57mEFZ9Dl3Ps5HXWAYByHJAJKV7N+s0cCQQhwSlfm4lGZ0KB8C/rABgZUS6ZHITBSEhCowUYAAksF7cStWREyxRwtuPpOlgw+5s9sq6OaIJIIlUgEhA1edoTgHxa9HVw5jibZNF+j/9yGQA/7pbujZ4bwv2+cWB6tFo0NzYnkxFA+cvEAo43VBoEo2e+48EMXEOmD9F6xhCE8RwZEJ80VblKvDlmzwicfqy93/o+8K8TwB2jVSgW138FrJQTXBNlnJgmrjZwanow9CBP/rL9wF0jwAGWDtFyoN9PHutnIHT05mPXz93dMGQAPniJsjiBXiTbxDZFMF9NLUPQxKR5qezz1Y6/YZDH0D6GkdAkYJIvRalAdHAMmPZoYhb6NhDWvEyf/ma737CXN7R1ZC7hUbPgcFgqt/ZZjADnM1xqEVhYBpb4CUk5UsL7jQvj///5buDrLeCOEeD+YQchYwG9VIfyg1NaZszFiCH6DkRGLze5/dgk8IMWcMCjdCiCzR8od1B8OTwvJM8JEShFut1fzMhi+eRJr6LI7hYP2M/xVLwKNoZjUTwRMAQQmYyhWGQxsSADOflZ4kukj7PhZ75bETjBpkAGahMkcrGgwhsXeCyBHBj1wmOBQwvAwqKzoFeRV8ZaerjKYAuirmPY/o9X7q5Cyr7fAvYMAftCPGAEoYlBiVtFwLjtp2U4irj7yOANbi+crHyrfCbTquJV44O0F1FrwQGIMZFqdQDyP/gGSZ8TC0ZRRsOlVzzgasd/u+zpMByLehAfCgMQCDyGZJHFCCgLZ2f8mgI5qauEcVx9e5vACTgCTwEMWr5TdIpWKJb5MvrnoocDswvAPAG4VLGg6UKeqmi4iuDz4er30oX0FP7u5moMvIf7W8B+jwlUNAzFnlZCIhvGFRCeWzrgXSSIBreXTFZSgVLHAp4UHOFuociEEsn2PJwl/XEk0dzfSojeerFg1IOo5BKAveIBex1P67lgUzgWQaJwLAKRH04i14ItgDKEtGsRnWx49b2Vkk9wUefTGrKCF7R0JxZMqxN8cmPAxWcAcxGABKEAKPA5u9lEaAbCmKMI+sDN1X3z+ro24wEZFc0VEE64ABgT180PF9ZdBcDb6JpqcPtPk+1ACbmKjJnllwyuILunEAWjZHkBsrsRUnfD0qEiC5IJfyisgMhzWhcP2O14Ro4WbASgAMQJ48SJwchmBCDFa8qpyBbSP7OvU4PQ0p2W7+LSnSJUFOrI4V7w5IoBTQQTfJ6oTSYk2mQcpGRyH2syGjIF6EM3V/fM++C1CfwUExhCsmzCaQT43lZC3e1hBpEHh36XEqrB7Scmq5dV0XZxmV8WuDFzAF9iwhow9seAGoBcGtKjqAc+1l9rLb/1igesO55ysmCrC8ei6IxRMAKTWNBi6Xw98xNTFUi0jEcmpYgRAPhddpVi9OIEPP5cYD4CcLkCooHPwaW9kV+iwWrQHT8uA1fd3F7DFvgUHUP2k8jTiogAqLoxFpDgbMj9jXSuN7i9dLIdaxzBp5XVBMIMgFEnFAPKT9qPd6A9BIGI7MfPmf4U+40HzI8nWgq2PBxL4FEkjKJixGRRFyQQPzzd1iAUzCAQas1YOmAEoFjwkecDC/PAwhKw6CxIkCXwOdVJLxTobMjBdyIgfvimNvNJ7Evf4jWtdnRYD1YNGVuG93VWuWs4Jf+mlZCCZxwP/cnJ6mXVKk2+tK8lQQVHRTGc64SDAZB3Ey3JcxyACkToJx4wHl+YwqloGDICmYmTFgMQFBET8yyYzyAG/AfWX8mCGQg0BTRoHwt9KVaPE/HQ890AIfgWK+CRAaMRYnVdxHbhdY8Wslw1V93UDsmPIj9GxgiAioRRMIJNvoti+SW/Ikd0gwAU8+XxJcbGITJPDvI6XdCFREFSknTB83xka40H1PGF9dnycCxFwygkK0bASJQSVAbAYeD98xUAe5U3jKIwBosSgNsuABYogl3/IwgFPrOIg1Xc4ZrpAsSrvruykl2ucykapkMMh4CExD5DwJfWAYAxwk4MKPAJgOIjGSEGwuCakRhemw6Yv0UUwRf7L00L9pnsNx6Qx4feY4O8pDEcixOjsoTKKpMYjSFYYjOC8Eq3Wnnr0YYS+0Tmi2HysrPGLqwASNYzBnT2Mz2QD91laxLB0gs12GAh81cf/o/OcHyJ+qj0S/zxnhUZbSyYWaL8+Rq2S29wowiWkJPan4MvgrDDGAlRe7KIywDIgR3meEDWg9HbJgApNTkXo8o0i7oVgxnEgFr8F7jEdnU5GvqfJQKQKyEOPlsNIQvyvupAGHS/Okv4qv9oh+PHxMLk8ggBCRxvAmEN+AiEzz2iQfQBeNmkh4K52hJBKOaNe/FSLobLRXCz43rQnu2yi9oMSMDxs2jo8303ERz1wsCGZECF4kd3DwEYYwJjhoNlQrgIjlYodbBPrwMAZfEmyzcIv27gs6XDzC/IR1DOgA9a6DRz4wZAsZ+LYXvQYsHoD4ziOFklna6YD3+nnU6dZ7bGDAcBUImIAmEUw/zbJ1i/scGNDJiLXmle3RhQ+l/aq57gUQCWzwwBKPeLsZ/LFrGg/ShRXAe64Ajkv30kALAjF8R11Dy3K7KRwJcsUTaqWScARou3w/INVnCH+A36n8RvM3nB5XP4oD6DATBYwGb5ajlOLOh6X8JaBKRG77+7ygGYp1bn+V25/01AzBnwQ1ypanD7KWfA1QDYC3zJIj7KgOUzc9nFbetX/r+O5biwNhyX5uSEDr5o0xsJwLp8/m4A7GaJUv/j3/5+HQFYJ3oFPPkho/hNeqBcMkcB2BAA6XrxmMBkfFAci/m0JpwzXw0TXvXtzrz+PKc/Ml/ugzM9MDqCAbz/keVjjGcQA/YLvjoguo1mRslRI6RwfsiA5nqhL5D6nscF8gfTdfxpS+/hLzvWfzMQCoB1Fq/8b3VWaPIDZqsRV64DALsZHVHs1gEvsqFAeBSApQC8pHK90Oql4UEAyvCwNeGcBXNLOPMLftgZsI75ouUr9ousp2TEyIJ/sU4AzC1e+WIFshyAHPZREVwItrrD3wGAhibTYBhxVpe/xePyrNBuWaoNp3DgFwC81O+RAepK/a5Lfe51jxr7JwA83nPXYgq1asl0yX5N48+f4VEGLATlK1vAo5YB1gBSRmsM+NFE57lcfPD5pPFWCJImtyvGgGfOAacBYO59zFglgHgPefZsXV6/gPXBYeC0RVgyJNOGYuJjPka9eHWgjL9bWzhWk0/n/wPn+k8bgFNmgYcsVflZnBRmIShtJM/m7JGibGBoOIIez9wKPP4AcNpylfbNlGfdI+9NjBjz8JVzppckZuJ+dBw4aQ44drk6j1LIY9JkPD7P4s2lwVEGLHwJnncscNIh4Nh5YMsSsHm5ndOu1BGFThJ8/K6JrZtoslST2+XHA6ftB05ZAE5crgAups5TfaL6EF+UyIif3gAcOwtsXep82eIYY9JkXpMgMp/AeZQBC2b8OduBYw8C2+aALQvARgJwGZhY7swEzbNa88IRvAVO1qkF91J36DNOBE7eD2yfB45fqphLnevzdGeBKBfL8UX5/CZgyyyweRHYsFwxYHzRNK6oetSBMDLjUQAWTPqPngpsnQK2zgKbCMAlYMMSME4ALrcnR6JYQIwsoUnjpDRstOLy7cBJB4CHUGwuAtuW2nUDVH1EFUhycSwWjGD64mZg0xywcaECoI0z5P3X5P6nWlHdgHgUgAUAfOYOYMtBYNMssHEe2LgITBCADkIzSJZXpCOnIg25uPrhgnupO/TyhwLHHwSOmwW2LVSik2pCrDsQskzNIBGIpBdGI+VfNgMb5oENCxX4yPRjPj4xaJ0+WGeEHRXBDUz2Mx4FbDoIbJypADixUAFwzAFI8KUJChMV2SUaAGc1cE/xFJef3FYRti64nkqWDrqqEhbrsm5zvZCdPCd8nHzJOLZuABRz9hTHZwPL7LnLnoNMIY2VyaKcjtZLHOAbNgNPngKe4BacfGF1pnydD+hphQ/8XV5UiEueLGnDN1tWXj/3/4cTwAUzwGPcRcFJiDpPt3FLmf5vjwE2HAQ2zPrEzDv7OQg5OSM+ScYQy5Xbo8465u/ZfLTJ7fKHAdumKxVh8wKwealSE6inEoSy2MWCdbUHIghv3AqMzwHji9VLZuDzD8cXxxWZs5c7apmW0fMBnIHKn5X7d6I5npvRz94O7LgXuGIReJSb+Xl1tzqflybwRwqf9i97BQRWomWJQ7oZVFtJoqDX/b/oGODsvcBTATB9gsfGqmzdjtVz+G+PAyamgYmZCoDjFE2anCVg1CeJwOMnTRB/DmUINVkkgia3y08BtkwDW+YqAFJFMD1VAAw6XG61R31O9/fdrcDYPDDmY0zjc1UjivBuAMx1QdMB+WAYXU8dhEU16dOSkppbcHFSrng8MHwnsGMPcN5ypURHp2xMIa7zDz2z8Gn/kVe0YomO0wEwBYKujL7v/zHA6C3AxfOVh58g5AsZxx4fZM7sf3h6BcDxWWeGBZ+cMEFiwGEHHRnDzun7ONHs/djkRgBunql0VDOSHIDU3cxSD4aEajhFXS4H4S1bgVGN0V8we7E0Fh9jVDG6Obr1LJMRwn+kOCaTEYT0dsfqZHXl/p7PrLi9wIY7gO0H2yAgCAWCWCowKrYE8nMLn/a7PQn9X7zIJPPkCcK+758y7x7guNsB6l98gZjLLYet3Ay5n0sv4R+fCYxPA2MOwLEAQLIDPyP8uBg2cRYmzFweAYilKkn+OC8/Fdh0CNhEA4nGA40kd6FES13WLO8v1qHKAfh9B+DoYjU2Ak/js/8NAIwg7OUb7LCC+WAfB4CpBJoIiTRNRmS1l13kqWh3Adv2A8cdqqp1MB+aIOSxWv6pq5D2kkIAvt8rF7BLJksN/jMqfa7v+7/Ak4B3A6ceqpasKMq5akAmlLWY37t8ZW97PDB2qALg2BxgAFwANEGcnI5JcrDZRPlkaXL4u1KJUAfAjbTQ59x6dSvdLPXAgGYshZWR6JIRaXB/NwFI8C1WwLMXzMeSwLfcXuKrA2G+wrLCDcN/IIg4ERRn0qvyySAQX6mG1XuA4fuAbTOVwktRRr2MLCoQyvEZ/UY/WwjAj3jtFJZkU79g1ghkgEBf98+0Umb/3A2M3lkBl/fOcdMok2EjkZyv8773LAfgHDDKjwNwxEUw9yailpwdxBAEYhBbAuGzG3aKkQEJwAkCkOCjlb7Y6SYyf2UwlAS+vKYnAXjfNmDEX7DEfA5CjUcsnzvbu1nDtUMmCDkRZEEyGdlAk6G6lQTSa6m0MP6HuY73AxNTlcJLZ6WOJYC5/CNxLpHMgdKIKNl69Qvu6/75AjHOiTU87gKOOViJb748BKCWrnK/maTA+58AjM0Ao7PA6Lx/xBAupoYDC9okBRAmPdBZ47lNA/DhwMRsxX7mPgl+SrmK5EaRNRslXFQ9CKB9DkADn79cZtkHFkysJ103eBbqlh97DpmTQTYgk9VNxu+xYbXKU3lhFoJPOgdFGY+lPkgQxokkgF9Xgj4AvfoFs84eX4Ke9x9fIC+tRfDxvvniif358sSir2LCj5wNjBKAc8CIi2AxxLCzIAGY9L7AhGIKgpATw4l8wToB0JjPrfTkp+SLQbHrOqm5jNyajS6VCMIpApDAWwQ4LrGgXqzIfnq5cv0vN0ZXHTInME5GBNLb1DGdOYQsI7AfGKFjlgqve8wJwG4T+fuFAFytXzCLb+VgWnH/fIGYfc46Hs7iHC8ZkPcdXx4VfVXJw8+cA4wIgM6AHSLKWZCTESfLfg7WsIyRF3ckiRQ+HACXkwHptyP4KHrpJvKVGnOhRF9eBF9wE0mUEogz2wC+WGI/vVxiQQIxAs9+rmHA6E1YFYB8DJwQMZl0OrLZ++i7sfT8zroYHLS9df4RACWKxSZvLXzG/fQLZqk2gqn2/vUCUQ9UZaM9wDaPeSPrC4A5C1KV+NITKwCS/SiCR/jRBDlLmP7nHynsxno1IPwJSyRpbiMADXzuPDYfZfBTEoAmcuVQdiaW0zwXwQsCYDYmMaDA1wG8TBSvaoR0G77EcGSET6hjOvVApfRPAUN0zjr45JzVcSqiTxD+VeGzXku/4Nr7JwDJOkxFIwt6j6+RqUrlkO4bXzp1gCAAv04AzgLDDsBhKugLFUvQUhTwCEKbnKCw14HwJ9cDgGQ9WegRgDI8XEcVEDvAl7lVlglAgi+I4CR+Zf1mLGgMmDFhBGFfDCicRJFERviSABjLS7FC0MFKMU+07wOPE0kGvaoQgGvtF9z1/iODkwn3VWoEXxres5ib9xx1wZufBAwLgAQexbAD0JiQwJOuJBA68/H3Zhk6+3CifqqwWNMKN8wjKgbk6gWJgC+FMaBb5vJVmsUbV2vCqo3cRWZcCIACoax53+ulkqNd7iqOcU1WcC9cxEm5kQBUdZ+sTnSL/jEtTWngi21jhJNJBivZBukXvOL+yYBkcOqxKjJ4AGgxzMrBVwdAMmHrZOAYF2l6y/mwV6xD17zmWo6MbRyeWtOHwxJ91IIhr6rqZS70DPPLXDVUrfBwzHKr1EUp6/h0T/6L/GcCqslt4IhoTcwdAqDSs7I60WQH6R329pHuFyuXDJmEjuOSbdB+wSvuP5bGUjmsA5XoUvcvBXKKAQnApUdXwah0b8jXR2YzJTsC0ZHB33FL+2yiX3h/1YeD1fFZGT81g/H6yqkVa9YEpqMhTADle8erHA6t7Mh6j4ZBXdBGjFyO4CSIm9wGBiBvgqxwIAJQlXIyEJLyI/i0SkAG/FbhaEr6BXfcv+5dLKhCg4z1C1HEBJ8+BODQGZXfk/quAZC6ketAZEQCTWAU8PIJt0fgwHzZvVWNaKqi7JLOmtDWFy42g1FxH/XfqGkII0C+a0tnDkfsGxQjn3VPsk7tXmuy+Xp0JhtoJosAaFcUAJUYKiYJxcqHqKAH9rPlG2cMrmCUbMX9guMLpGTcCMKDlZGhMK8IPnPIn1X5PA2AwegwEEYmDGBMjOI5whGQP3NPBT7VJlRNaKvF4t2IWHbDErtDlSk1p4lJ7/zd246tglGZryIfrFhQ7pU8WCAX0ZENG+57U14Z4YrCeLrSxXdev6TfLwrbxT7znMrfKQXfHLQCnyvmRIv0Q3430ezMmL98P393G3wqz6am1NYzzoGn+svqRmTAU2citctqAX/2EI8F9ACEmLHXLZGoFxtSl2xyK2bAYwrj6Xr12+1noL/jUTCD9vvFrn6u0v1/nvGkaoVBAQi0eummMAuXQHMWJAA7gCixG8U0gFfcXdlBKk4Z6zELgAJfZEKrxpC1xOIl/+Sk7jkcdYlSco90y9+gK6vJrRiADD0piad7RuFo3udNCgft94vCdrGXn+tujgV3QAcHLcFnroelivHkchEL8ue0uQ74S3eubAITS3IQhKkMRjBMokgWG3L//2z3VSnP4VDgQWxUEEUxAZFHL0eR3HDfm3IRbDHkBfF0zy4EIKNhSvr9goGEBdvTz/MIYQLQdVsTwRTFDj5jQmdArRDYJQNDSs961R3tPhx5NXoVgoxleHnarjohgLec3D2HI492yQNvIwvqO9fJm9zKGbAwnu6FhaP5pFuMg/b7tTbpBdvTz68cz/zI8azVj8iAHTqgmFHXDUB89R2dtaC7tUGw4kDOgFb0R2wYRDGZ8g9O8aU4XwPOczhiwGlMjqqLWiFYGu570wADFsbTvaxg8nkow7E8nM/atfKzln6/1mS4YHv6BQ4+Z0BbqHcd0NwwYbVD3+1yWhXJxPBrbq8AqE/XApSqAxiBV2MZ/54DMOZwKE00rnDUWcR5KiV/brjtSAMALIyn+/mCyeehjIYp6fdrvVELth8RAClyHXxmhPi6r1m8FM0ucgk8+y4RHC1kAK/5XgW+2hZYofafWcPq1B5AqDqEYsQ3nepR2gqhV2yiol1COkD0C+aOaoGx4aL7DQCwMJ7uVwomn4fm7VrX2u/XAlELth+5sHPtN+l/Ap6sX2dCsZ/phZkIJgv9l++1wbcq+2WFv2NXIjNKAPzuw7MUAV8DTuynFIEsQy83RgTAhiv+NgBABaQOGE/3mwWTLwAqHnaQfr9GnwUbARgDNBUlkpzQboyYCyYDYdILdf0l4NduW9kGoa4geNdazLElKoA3Prx7DofiETtC6XvE7hGEzJlpcis3Qgrj6d5UOJoYDcMglrX2+y0NPtl5UZUjkfx/Hqbecoe0OZzdF1gHQrln9Bhee4s3f3Zxm4MvAk9VSFdUIw0i+Q2PaBtISiBSSFgCYMjMW00MP7pwvvLDmwFgQTzdHxcOSGvBg/b7ZRZByWYAlOERluKM3Ra9CKWc0q73dTBhMFT4ZwIw9l5Lrpes+HjeBiGCUOKXeuBvPcKTiEIOR0f+RhDBMYi0Lhea4GTaa5NbOQAVDzhgPB1La5RssV3rIP1+7yy5OAADoAchEHBkFbKfGRpiweAPtMs5IFNokyOGk/7rAYC9OhBFwNXVY1at5tftCBHaWVS2AJdEcEinrDNC+Lumiyc1B8AB4+muLARAXTDCWvr93lR4/Z0Xt6ODFQkj8WtumEwHTKDLQejAfN3uds/dfjoQdatGLxb8jQBAYz6/boxiFgAVudzNIc2/s3xLk1szAORoB4yn+2DhaATAGJCtbpkCYq9+v4V+aBgAQ4i66XtaC85YkDog/zdZvzUgfN1N7a633Xqv6fe9msDIHfNaB6Ay2JRE1AHAEDIfI5nzZCLeN4Nbm9yaA+CA8XSsul6yqV0rJ2WQfr+splCyCYBR/HJyKX4phs0PKBZ0lqOYTpvniAiUAmAd+HKjo1cvDjHgr+3wPJQsVCymUZrPMuRsRBDG4AQCsunyJtFGHwAAIABJREFUcc0BUJlxQoH62q8ST8cggpKNAFRGwCD9fkuvbwAkyGgJE3C+Nz1P1q9/T3F1EZBxvZh50s6AEYC5yyUHXt5/Q8zI5/KrAmAIkkipkyGPYwXz1aRT8v5ZO6jJrRyAvKOvNXlLazsXs9bo/ztc29Pohgotp5J49Rcj/pzfIwGS//3OM4CNd1dpntQpFUmjEH4LYIgnyn/OLjL8FeDGhwJbNgFjI8DIEDA8BAy1PFK7FSKf43cNKrvHx+8C/vmxwMgmYHgEaA35J0StpvvzL/nP8RbLAfhyT207TChgDRiu/ZL9DsfWNABvYzbhCDBKoBAk/pEobGWTqp819hzQ1/0k0PoaMDEJbJjxVZFgDad0SaUO5LksWVj+XScDmw5UEUDJ6U4d0nVbC91S3ovfVHp5al64cgC+k7mZAP768KCA0WD3A/ieLz090CDceVmlAuhBljLgrfcAw6PAyDAwPFwBkCAbItM4a/FiNtERjBl76W9ffD2AbwJDdwFj+6syImRXrd5Y2FjIYcnzWPLEqnsfC0zsr6qBMQmfIDR/pyJ6xMhKyMrSDiKD2xja6TADTt0/AGAs1KcAUCFrOLF6tbtiRVFavT/wuMCa7MfVTlH098YBeBcwNAIMEYAUlS4uBULOmK3LCnwOPANlEIOSoF9+C4DvVoWXhvdWZVOYqWgi3vOXDUQhgieB0EElViMYJ08HxqeqnG8D4IIDkAzo51DKQQJvBKUmKACzbM4+5hUivwrgiwC4LzvjmgCh6nBcgiMTcv9Abo0D8E6g5eCjfpUA6AxoQIzgi8ALmWwC4z//DxcPPwBak8DQFDB8yJPpPZHeGCyC0KN5DFCByfh9/+OAsekKgEzCTwD047X0SCPM1IYQjCv2E/MJoGVwUUQoPboq0MdqkWVn7RtDDMahB4g+P6qhXFpjVtkDtRGA2nKjos7IyOyHFUbIrXe0FXsTuzIYfNb4O2M3ATGIYQOmPn6hG6gi3eUkQQAeAIYOAUOzALMVh2pAlESqGFBAXAYOMQVjxll03iO/yYKRAT0FQXkwZkjp1pz51LO2XAT3KtD3AIAwj4Wg05kfiuUHYlsXAJLVnP0INLM0OYFx78AzcRySeTsw2AJueI+Dj2Fne4EWKz5MA0MzDkCCkAByUWqsJzarEanzj2zXwjEGFHuGY+pYsMojzZL1G9EBexXou339IRBrC3lJGmNDuSHX+w7WC4Cm6wWxm8DngLTImgC8pBcGBuTXf/1fXnyTugnFwxTQOgi0CECyIFlsvvJfEnh0mhsYI/s5uxFYi1xZof7oOqSAawwYjRGBzYGXbtWXaCIrlvHUagX6SP/ruMVYCEbEqECXAMjfree2HgA0ESur1/0vtnNwGSsG0RsZME20/+/XWH6Mugk/yngPAGy5GDYALjiIHIgRUIrsZjM7Ax+BSx1S4pfffQVIep8dL7dMDsTGjJB+CvQxTHmdtrw4l0CovFruC2NOe975egDQsCXRK/eK634JhBK90q2C7I1i+Gt0jxF40k1cPJAB7UP2m3MGJAAFQrGei9iUTH9yBUDTHfU3B5+BOIKQ43BWtNtPcWIOzEZE8FoK9K0DCGNxLi3FqaKA9gTgeoFwPQAoI0OulWT11oEwiFz7cwbErzNxWtEYBB+VY76Vh4DWrH8IOoGQ7Ocg1CqMRLPltmxvs1/SHaP4dcAJePYyyUCRIzrTB8tE8FoL9DUMwl61kQQ87Rmy2PS2rgB0a1ci18RudEJH57OsY02y/+83/sZdBKr4FXQTApBvprGgQCg9UEAM+h9F6ugJDkC3gJPBEvRGrYoYCBX9IxEcS5K4i6cZAHIw8oXQ4mLBb35YH5d7OekadtTV1UZSjaEIPH4nQzYNwgjAHNwDuWGYpZc7lzPfX1cQur5oBorfzDf+zi0yVTuSkuxBI2Q+PhQDIUEnMLo1TBCZLufGw/ixbQa0KB8CTODjPohdY78IQmfDjmW7Yo/doAX6GqIiAtDHaYswSmeMubV81kp11L6hy2PdAcgblfslOKC1IiKRmyRxZgV/8++DS8BFrxXi5Hd/U6MeSKdqEsEKhpBRsgRMbAtuG4KU/+9ry5brzP/lPVMv1EPOQegharrVcgZUhVHFxNPcp9VFtlOWkL437C0WABWypFRGsV0sb5Hn2zYBwvUGoKl10v1knDgo0y7XA8Pfv0UACnjaK33Co9gJQAOe64FkNvtZAHQdjz9v2Nz2GSa3jYej2W3KGuZ9ixGdIVSoKT13B2s5AHkGheST6qn0erHv5AIgAAU+LVfw/wq3CEAV7clBKDDGZG9/5oVXx/oyYARczcqH5GyH8eFplTawFvAtrtXLGpNrQDGbejupB3omlIHQGc/ErzOcGSRs8zrhAbbuL1Tco/JfbLlNwHOmi2kIcs3owbdwNpYtynDQhsFcgvuG9/YapGFvYX22zZcAU0/GwA2LJ/4AmGF9mwEbBu98Y3cMF+uAGQCj2HVp3BbPuo3IlqxAy5wHAq4OfARmEBXGfNIBa0BIsG0ecwC67merHgRpZLwocrWaovuTxew/V0txJQ2DWeae3WAGbdhb2DB4+wRw7w5g8Qpv88liyGtoWHzMi4C9fAEHbBi8kwUKu2xNAdBxaGBLbJdZux1LwAGECYAEm6wyfpelJrEgFnRDxESwgyUxIUsVMwjVy5AYO0bG89Auu1/5BF38KqjBHlUAYXsteNCGwTeWNuwtk4JMkrlzGNizA1hm69g1Nix+zDOBW0aBeRZZGqBh8M4emfWNADDT+zqMjQyESdQFHfDbZECCLRgdHeCTe8CBaKJY1rDnBRCIAuGW4TYAZeFG8ZuMkGiQ1IEwGCJtHZBmy1obBsvVMnDD3jIAerti3LEBOMjGcOpa3WfD4ic9t6oveDtLfw7QMHjnH6wPAybW6yaG4+8D4HIQfvtDIVtLejpBFsVvUI7NIBHw3DUjRzL3rDVtsYPOkAScuX3coNDynT2VYJCkn+PjqvUD8hVbS8NgjphGxcANe8sAGNoVY/824BCBtIaGxRe8pLKZdpMkTvXiJ2toGHzSNHDPScAyq3er4qPyGaNc7JCRXWLT2TjwGmCOeQashq6+qSpZmp8vojQpheF58ncdZVjLnjWPHr4VWKTKxrHGUqq97qXu3jp0wPy+eEC/DYNZsZAO6IEb9pY9lNCuGPcNV830ZmkM9dmw+OKfbdcXvJMPdY0Ng0/7GnDXKcDMccBS7MwdKz8KCAKQIgY0MWGCtr4TOHAasMwOkTqf6unyuLykfd254nkb7qsw/iVg7jhgmSX31Vpd9yRHeLx+zRhjEGRbB6wDYT8NdymyubzDzCCGfpMJWfSRYfr9HP/aMgBm7YoxNQHMbQHm+ID6aFh8yS93tAvGQb7da2gYfPoXgbtPAqaPA+a3AEubgGU1RM6B060fgkRoCzj+TcD+04CFE4BldZdRc4/YxlxgjJMewSiwN1zWfsOngdljq3EmY08vm5i/7j5yIMqpvupKyGoNg9lngYosl9wY/0dZdrMzYl8Ne8sAWNOu2MA3zw/F2CoNiy99XbvftrcLriz6PhsGn3U9cM9xMODObQYWCMANwPJ49UliuW6SaqqBn/gGYP8pwPyJwNIxwDK76ahDeN6uXYCuYyABkEza4LbpY5WEWdSLxjF26/dQB0SJ6r4ByAN6NQxmkWcqrnQ00x1DEDJFjR8CcNWGvWVPp6ZdMQ6OVOCb3wAscPJ6NCy+7PerkP5Q3tBY1PrT9tEw+JwbgPu2AlNbgVkCcCOwtAFYcgAuiwWlM/XqDjMEbP9t4MB2YO54YJFMo/5gHIcALV1TRZ17FXOhPtvgtvkqf9H4kvHDlyKK4l6VzvVSBF22uwjOb7pbw+CfcwBSkyeFEHAUx/yw9JTyEbo27C17Ol3aFWNuAlgIn9QxO2tYfNlbK6MvaxeMRYquvL9rTcPgJ30TuH8LcHAzMOugX3QALo21WXBZLEHwRF1OgHS2eOgbgIPHA7PHAezNu7QFWFZ7JnXJ5rnqxHEulvlzwyVNN3+wern5Yovl7SXLGwvn4riLWO4fgMRJXcPd/+pmOymELEhRzBxJAo9gVL4kwVnbsLccgHEpWi3epocCAMeBRU5eTcPiy/6qtl0wpvhA+2gYfO7NwOQm4OBGYGaDs+5ExYDGgqP+ccAkINaVpB8GTv4d4OBxwNw2YGFrxYCmV0YxLNYheCXau7EhV3ga3Lb8g4+R45uoGLADgHWqhsBXA8K1AZADyRvuvtkBSArh+i9DsQhCOtf0UUgW/7aiYW/Z0+nRrhizoxXwFhyAi5y4rGHxU66qAFhT3rDSIVdpGHzencDejcDBDcDsBDBP1uX1CMJRwFiQIBzxieL3KIY1YW5MPOxNwLRb8gs0aghAss1GZ1O+SFHsdRPt0i/PLHu++dFb/x4mXfhcbWxhfCtYMFr/uWvKxfDaAcg7ipPCvFOVpuo3HrCjYW/ZA+rRrti6TS6MVQ+L4NPH2nx698GnXF0BsKa8Iab4dFZpGHz+JLBvApieqAA4J8CPOQuOBBAOV0CUYbIskRkAecrvAdNbXc/aDCxSpyT4CEIyTgRgneiLIp3nP6fs+a4A4N8B8/48CUC+ZGJA29fpuLmxJW+5h5kNFg2jiWHSi0r0Uv4pCoZsxw8DUfnhd4Vk0XGdGvaWPaBV2hVjdjgA0BlpkQ/K9bmn/HOVqtClvKEBqlfD4AtmgP3jDsBxB6DA7tdbcvYzJvQJkii2n4NOeMpbgJktbYPGACiF3wFoEx1ZMNe/4jnPLXu+KwD4t/5SO/iMBcXuesHylyACMBPDgzGg7opM8mEHIGdwrfGA1rC37AH10a64Yr4APvvOSdwEPOVbKxu+K2pdKRTmdI3dqkPPVgbSTBGAY8AsATjWniBdx0QxJylOFCcr6HBiw1P/CDgU3EgEIMW52M8YkLolQRddIN1AyKWiBretf9MJQN6HsaCPxe4rvgDdHOcOxDIAcmDFDXvLnk4f7Yqt63gEIB/Yoj+4p9xaAbBHeUPM8qF2aRh84QQwNQYcGgdmx4C50WqCFngNsgSvQ+Dxu4MuiawhwIAXVk1O+e/A7CZgThY1dcno1nHL2oDIyZULpBsAFTBZ9pjT0QQgn2V6ufRicS8QRgbs5ZYpEsENDejBfpoLrwAOjgIzZMBRZ0AHoUC+SOA56xJwNlEyTFw5FxBPeWvlzpnbANCdQ1eSGTRybMuydgMggVBsKmtYoC6Mt8znZxsZMLzAxoAOvsh+ydDqtXx4FIDl8L/omQ7A0QqA82S/ERdTI22mNfaTuBIIxR4BhKe+y61punQC+MytI/Zz/c9EuvyBeetLAfGZ5WOMZ9j2/gqABB1fMLsHAVBqhfTcyH5d9MByEdzs+B50Z7voGZX+NzNSsd8cwUcG5ASRKYbdHRNYwhhDIHRgGmO0gFP+HJh15jOXjnyKblVT5Cbfoq+yJOszF8P8+VnNPlICkMAzds/YLxlYznrJwIpO6egTPMqA5ZNDAB6iCCYAyYBcBqTRQ0e4630SxZyQJQIvMJ8mSeLrYe+p/GzGfnTpEIBy6US/out+K1wg+brs88rHmDOgAVCMnrEfxxMte1Mt6j7u9zzKgIXzczEBOJIB0BnCJoqgIfDEhM58SWzJEPGJe9hfVH42un/Mfxl9bgSiBySIBWnAJBDGEDAB8QWFA8wO3/a+wH4+rg4RLPYLul8tCI8CsJmJMQAOuwFC9qMI9g9Z0CxhZz65K0wfFBPqu7PEyVdWAOTHVlTcpxhXHZLz1w0ZA6EDLhkCskRf0sw4dRYC0PQ/vVSRAYPo7QCdj7GqVOSMeBSAzUzMxZcDMwLgcKX/zbv45SQlHXDIgagJc+bjZBqAWhUoH/Y+B2D0J7rFa6LYDRmzomsAaOeKqxEvbWacHQB08JkRIteSXiSBLYJOLB+X4xrzAzY7vgfd2S4RAKkDDgPzNEAIxMASSWF38WsgkuXLyXTRSRCe/DduSZMBMwe6ObTd8JBj24Aot07uDObPP9XsIzUGFPs5+JJ/M6oT4buxHv9X7BeY8KgOWDg/Z58GTC9Xq5FxTXOw9c3Cm6k5fPcjgbHbgAlvVG2tH1T3Oavoq6BlniZ+12n5u/2sDbOvasqoFg8x2Lnbcd1GdhSAhXN+7qMrAC4sA8sORJ6yHwD28z+Ft4fdv8UyqUDrDmCEBcpZ39kLS6aq9l4D2rLb/KYsFTPWdfbvh86vQu2s1K/K+zIjTsXIVQ9a59Egs4Y6sZfIA/EcSp/jEXv8BWcAhxaA+SVgSQAkGAMICcwVlNLlqTc9Gbv/HAA7MrL4+f1VlXwrUq7SvCoyGcrrWpGhuur2fNGYwM8YT67hT3s1LaZvqn5MLM0bzmHMmIFSgdFNj/mIBct63NhFZwEzDsBFgpDPeanNgATfCtGsX9TIKwNrg9tuVkhlng7TI/YArX1VkXKrEe1l2SynN1RCsFJsqnQv3UIMxhwIRjU5AGN9QUteVz3BUAvahuNgjC3HxLAND7nBp/cgONXF5wCz8xUDGgCjKPbvevlzcKUHH2ag6cnYzepYBB9Zi2FxDJdjoXJv1WDFiLJ6MKqKZUzoQFTfj2HmwTKcTpVWvcxHKm6kKgoORAEvVclPD6NdzLXpMT8IYNPcLV7yJGB2AVhYrAC4SNA5AxKM9ryDPE5fs6eeVKWGZ2M3S3MQfEyJUKV8L1ZpJXpVJ9pLilmlAxWkVJHKwIhjjD9TtVXVm1HdOy/pJiaMFRWM+bo0rWl4yM1N7oPhTJecC8wRgAttBjQWdBBGESwgSiV0Pb9DRgu0TY19N+M1mRKh8niqFx3rRDsLqjgl9yaGXT80vcL1wnE252PAZCzAHQCoiqoW3yYWFIt664fUpKaREr1NPakH6XkuOQ+YDwy4FMSwgU8GSRSz0UJx3Vx/5vFNbrs/EiLRY+v4ACITww6iJEodQKwBIyBRv9vwhKzUW6z66TUGEwhDS3ezqusAyNxnJn8xa1KRPSFts9YfFB/QDZcAm78CnDBT5U8rCqjfc3yh8Gn/hGd/MsKf1+QzYJ4891Jye13iy1cAE9cDJ+6FpYrEkidxDN3OtXR+FwBGMezoMmxJLOumAuD4J4rxJrfdH/XCoLGFVKiUbw+LAPQqWWaMMLrd6/+JycSIm85w9lOpt1j1MwAwFTiqAWEUxeYH5ENn/jInUVHeMXQ/f/jRePvCa4DhTwLHfBc4frGqqaNJzLPw6iZxV+HTplFGvZrXZT45N39+HW3TujlZv8D6fp8HRq8Dts9XIOR5YtakgBgdrrrt5Qsq8Ssd0BhQ4HMwmVitAWHAY/LbLDQNQDaTVJ8Q6W4qVB51OOqDZDPVB3TLOBepW5jmqaLbec3jGgBGMSxvvemDYkQ9GoKF1ShUCSKCqBeQrvmfVZPC1keBjXcCmw911tTJ8q5XgOLaQgA+x/OdWA2EGZ98gbjleTHdQHQN+2iwls3nK3/Zhj3VeQhovYzdxmArSwQgDRA3QiSCJUrTnjfl4KozRCSCCeYmt90EoJJbVCk/1+FiCwFZxLk4dRfLFia6x8LbYkD9v9cXtLG6+O4AYQRfrgPygVIcqyhTXcWFOJH8fh3rz7EKwnUArq8mcGwK2MCC1i7WY7Zenh56feHT/jE3yliE4TZncd636gPFCKWavGhcRx2J+cvs9MlSw0Ty3cCm+c7n0G0MExdW4BMIbTXE9UCynvyCCX+Ovm4gbByA/xisVgJPpXrzLj4EoRJjJIZrWHArS9iprK+KcefgiyB0XVKGjOmCmW9xhRVMUSyRFnNeFGEdI2q+/HFXclkp9WsAbgTG9wGj08CI64WxRk/OTDcUAvBHXSLQxcVCDMQSWbzv+1e7WVbz+k5w2tJtsbcCYV6WJY7hmAsDA7r1Sz3OgOgoM+KTOJbcjSI5yGIaNE1uuwlAAU/MF+tF5/0sIghVLdVdM2S0bSzHx2Mi+FTxXf8X925NC4BycK8QwfmgVX1LlcFiykEMcL2BndJJ7aQfijKfxLGDwAhByM7aC5U4qwPzNwufNnNuOH4VZaCPlPo2AahqFqoPVFc14ga2m+WEEL0cAz9kdPrOmMu8r1o/rTsXz7f9oswFs+jO6LAqkvC3Ggg5Fg6mwW03CUI6X12h8lyfcz3QHqr3DIl64DbqaQKc9mI87QXACD6vpJqY0EVxz2CEyCI5eMSGX2e7VtI5J4yTRyZhscrvt1nQuivOAaNLlYESwcySgiVbr37Bfd0/u31yEgg2FVaiPCeVOguqAfGov0iR0R9JABJ0bnwk9nMxw+fOh55EbgRhzozrBUA1polN9CLwok5HEEUQBjFMQB7D+j656PW+IrJ8O/bBCo4sGFdGejqiyYCx3mKe9/JtTiBvmI5OFiTisg9LtJFF7gZGDrUbHKs79+hyu5hSaUvh1foFr3r/6vZJCiXgCDwVVFJ7MVmRLsrGltuFCc68yFdACMDAflwR4QM3HPoKgIExt4gz42SuaQb8hBOE2oZmlu+KFlKR3QSssMJxDPWbbjpfLoJrxG8CYT8MKGZSVTCxYFTIb84nkCxCIPLDiby30gXFghaF4c2ReR466Uu2fvoFr3r/fKAEFxvpqMcd9yonIrkuK5LLV7MVCM+/uDJCyIC2J8a0z1iwqyESgMl15Sa33QKgmtPEBnp11mwuXgO70Ud4DHWzfgDYC3zBEOk7HlA6XKyHQzb8HgGoCSQLqsxorIy1Bxie7Wx0rFaf+wr9Xv32C+56/7HbJ5VHtRYT+GJrsehHcya57PyKAQk6+vBkBZPpjPEExlwU59awg3C24W6KBsC6tqHR+MidyVG3i3rdAnAsH2T093XT+zLr197MTA80h3SfsZP2UqpCrPQ46oF317VrpeiKXTJ9MhMLkgGdCacKG/mupV9w1/vnwyGgCDCKWzJe3lqsyzLWZWe6/kc/oKzgKH4jC7oolhdC4jiuzM0WPo+cPQ2AsX1obFCTO5Jzn566PwbReiwnfTWjI4KvDoh1juh+aT+WKSYD3i8Aql2rJk+VsVQly5kkddv2FvHT61icqO7Fr71/IkLNXOi0FQjV0046oBy6wZ922Q95ICqDEaL4XWw3COcf9Mw73DFB9AqE6wZAAS8XuzGQIDKf+oVkqxt00ttAc+YT0PJ9qRFSB8xoye5Xu1ZVeCSgCLbYLVNswoncHxoeLwCzBGjBNki/4BX3z9lXgUCyIIGmhova83cRgO5Te9yLgP3MfmsBS8xs8/U67ePQOqy9umBUruDchqo8sHSd3PMfT5ifo+ack8eFHI6QEcnT5GvdOnVdXof+ptJ+BVPWceiaRHA8Us/nkACo8mzqlqmWrbFDppT5A5UIZm7CPA2Vgm3QfsEd909kKIqB1qJAKCBG8ZstZz3xHOAAiwmpDIdng1maZQAkZzsHZ537YfQrwNyxoQ+HakrnS0h1mUA1C96TdJTmORyhC3oeqdwROi+GDhkFI6bYNrcNDEDeAkXwQizPRpmnIs3OdqZPSaRFUcbchHlgie6agq2kX7Dd/+d8lUJVXuUzk8ERmS+2vfd4uvN2VOV5rSwb0y3JhgIh9wJeN3YMQCIgR78Q+nDEVYBYZUrUpbXFnM7COSdf7N4IPvtDnT2BY/h8Chh10MXQeYGS+7GGjaQiABpuNIFiECnzdWJMIUHcazLptC7YivsF8/7FgLFMqpiQL5TuNbKfA/DC46rqqAbAwIKWK+timRUBEiNGsOQsyQm+Gpjd4n046hbT84KPuYjOmHHyp92gcgDS2OoIuVIeh/xyUkaVwyEWdLrewHE3uBUDcKIwnq40HpDXL+n3CzbaKdguel5VnFJl2awaghLQBTzteZ0cjLq2A2n0M6EPh2pC57Wg41poLzZsAZNso0Hw6eVR/J8bF9YjWGmVCpGKwQLBRCcrbiSxNLgVAxCF8XSl8YDHHFPW7xeFBRwv/rGqOKUBkODzqgdWPYAM53vTASMQu4Bx9J+69OHIF+N71F1O1gUB+AsBfFqKC+4Wi4BWX+CYgOTAU36wdMVNVKka3MoBWBhPxyiuko3xkSX9fvGMkqsDlzzHC1N6SQ4DoINOe7KelWWTheziObeKCdARApD1AdVnRH048gKUAmAEYi6Oh4DJV4VoGDWqjq4XLbO5o1jBoimEPhPJmwu9FvnTLgdgYTwd2wyXbMyRKen3i2eXXB245FlVYUpVxUpGiLtmGBlrTEhVUwV8dEkVKAq3MHJ1uzRbRx+OOgDWFX6MsXJU/36lJoEoA2AKvw8+uwTEDIBbStdOs8ddDsDCeDom7ZdszBIs6fcL9ror2C75US9IxJJsEsHdGFBil4yYuUwknofJgF4XcEUfjrz+X7fKo4EJJ//PkMORO6FrVjQMeL5kJhZMMXzLwNZCt1nzDFgYT8cQwpLt4hDON0i/X7ys5OrAJVe0S/ISgFY7j9ZvnQ7I3+lyqpYaL98CWp/N+nDkZdhi6bW8An1kP3fRTLKVWlwF6RZCH2L4zDDR0k1IqeTNb2OQSYNbOQMWxtMxeqtkY6I+ny9VEz6btfb7xc+XXB249AoXv85+tIBVgJJ6n4lf6oV+mfjdDJNMH0wAVFX90GMk1f5TxlS3Fggh92DyN0IORy5665KIfCktsl+K3VsGtpVOWOMiuDCerlSnjQ2rB+n3C+pIBdulz8wqonrNPLKgwKaC5B3s53qhXVq6oDNg6sOhqvqhEr3V2VNLBjmnSSNdrOLJ1zkAu6VPRjFcFz4fXDJ8i45hG94Gt3IGjOFYA8TTlQZ/qGH1oP1+8ZtlT1MAtHK8mQg25zOZUSCLIliWcbw8wfW5Ln04ssqnHX04euiCk6/3de66MPpuAQVZAEFkw2MKFw6a1wEL4+lSBvmAOMhD8vkOkFX77feLNw14YT/ssmc4A6oOdHBEkwXlgjH2k4Nal6wB4fIuX9LzZjAmorNeHMo5Tc0OewHwDTUh9HXxfGJsYkAbAAAgAElEQVS/uvCpoAcew6zBBrdyBlQwwoDxdLZWXLDFkHyF8xGE/fb7xR8XXByAAVC1oB18HQYIT+8uGfP75SCUs1o64he8v4j6cIQ+IqkPhxrBCHjdjBH6AblQkAeY1ondukSiELmsUPpjbyp7XuvDgAXxdNZVvWCLIfmKg6Bbhrjup98v3lVwcQLw8gqA5v9zC9jErutltg8gMxDWWMBaMVkmANWFyEV6R0uH2I1IzW7ypbkQOTP5f2ch9KsFkwp0kQlDAOmxzHpscGuGAQvi6VD4RgmAg/b7xZVlT5MATNXwqQc6KGwf2U2uGV2uzg3D4ua7fDnPwZcKgIdq9GaIBPZb0YdD7hgyIFWMXiH0eQ5vXS5HcMkc++9lz2t9GLAgns7KxxZsCkgdtN8vWD+vYDMAUpcja7lOR9eLVcIP4tcuob/3AOHCdW02VTX62ApB4Mv1v24gnPy9HiH03fJ366KYHYTHsgBBg1s5AxbG0+HLZaOp65i+ln6/YM5EwdYBwGj1cmUkE7+8THLNdAHhwrUOXtcrO/pwhF4cct2oN68BMDCfmsJM/n6PEPoYPp8bH3kCkbtjji2tJJA962YAWBBPZ0WBCrbYsFoOf9pDAiENk179fkuvf9nTXewKcBSjsn7ldonWbgQpx+26otaLIwAlfi2QQSJY3Yjy5i9dmsFM/oEDMM/Z7Uf0RiYUA7J+ToNbOQC3e0WBBm9qLad6HICG1ZK1XB5PoxnuOOIcxSXe/Of8xHV/P+FpwN47gKUpYHmuSve0pKZgCKSq5wqniWE1WZz/xouBm74KTMwBI17lVBXwtWSs+8/vL45Ff3vhpcAnvwos8d48DZX3M2hx9XIAnu0IIO0chu35AOgLL0yuG/jOmwbg028G/mNz1YWdETbm4I5BrFlov+EtD2wIo7l+Atg8D2xY7iw3V5diEqO54mnj6XdMAYcU+6gon7A3NSO2qFjlyZYDkAX6uD5Iam44YaUfVNDNxaJcLIPXcGGpfi6PnZdVD1wPspQBX/wl4OaNwN6Jqg+xwrxslcVFuYJblehkcYYZGPS3L20BxueBcS8nwg5H5kZkx6TQSbXFZcCQKadx5Cz5mPurAFxrRaa17pAR2PFC+ElSHKQ/0QjQcgCyGyM9v3SnsDBRJgL6msWCf6IfWeUJac8UFlpY8500DcCfvgb43hiwZwyYVhd2D/VSrKGAmIDnBkiafEcN9cprHgKMzgNjS1V7rRjRlceyrqif6KAkMgXIM+6tAnDl+zSL36O9+U8p9jGHQo285/2XA/AnXeNnKAorDXH/AILwbSvLEz6Ql2+cAf/3XcCdw8DkKHBwpOpFbE2wadzIdyh3jjNQirYWEwYq+/zJwMh8pf+xKNSwM6DZMmzNRRbM2K+2Ii6TlFrAWfd5V3i/F7IgT2LBF5LbIdkqxLPWvtzlAGQ3RpU3Y7AiixMxLOUB2t7pKQ8M0qCTnp8HkojJgNqaMEJesQv4AR3Iw8DB4QqAs+6SWRiqgJgY0HVDAdBA4Ba4xN7ndlSFAAjAYX4IPO5dBDMAdS2i+Jx7XTf1eEdTDfgAQnR34p/wQkRmjNAoByDT/ugFphXAmjAEn8qaPQAgZCs0lSckCNmVigEbFMsPBBE3DcBX7gLuawH7hoAD7EM8DMw48AhATrjtQwiXoqkTEwWd7LOneXNCbz6Tiq/TInb2M8ZzIFrTQbGiy92oGz7pXl/7jvdAJnb2470IbB3T77Sai+hyAP5voTqW6sKwFAc/TAdc5+3dvcsTrvPVYSK4SQb8xV3+6IaAqSHg0FDVh3iOIFTIFxtit9orL5Z/LD1Q4s+B8OnHVuXwhhdd5DoLGsgCCJ04q66X/Ju/vSaeAxDPvbdtmdtKDV90gVEPIl/xySkviOhmAEjrlzSkwj40SlQZYZ39I+8JBMx8mZryhOsKwqYB+KpdVSDFvhYwPVR9BD7uyX4SwRS59nNI+bRck/DzJ05v12M0nY8fAk8iWL5BB5qASPGRCi8EVjzv3mqpkC9ACrrwhKukB67GhpqRRowQMqCiYbj8oOoHeUWpdYIBAUj8c8WjrjyhNIJ1unzjDPjqXdUjJAAP8TMEzLYq9uOHICQALe/EwWe+QgddAqCzzD8+vgIgg0qp+5nYjaDzCgjmnCYone0klqP4JSgvvK+6LoFPoFMlkPGh+0rPWta4RHTNJJQz4M8EAGoNTPVU8opS64CC9zoAWTFChcq7lCdch6s3L4J/2QFIEBKA1P9mHIBmhPh3Ai354RyAAmWsR/PRs6vOR8Z8FMPS97yxtIlYgVB/I7jC0rIKSfLXF1EEB+BFFjQ3jCLA49OWsRTTEPzvzQEwry7VrZ5KwzAQAPssT9jw1dcHgCrORQCS/bgn+1HsCYQSveaHkzvGv1scgU/6R55Y1YIxhvOm1EZekQWl8wVDxJgwc88QiJc6AKX/meHDawX9z16M/Em7bO8Q08GBP/jEkAEVjMBoAFWXUjRA3KtNwOBXW3EkAZhrALktpC6lKtTV4OU7RHB+3kHWgv/zrnYZl2kCkF4uF8MGQGc+MqEYUCA0n1tkwxbw4ScHAHr71Q7W4++c8czwcBAmHVB/c7Bcek9b3FuwbdD/kjGWgzJjQ3thGmVA3jhfOyU+RxB6FamOFp8NrhsTgLy8Cpzm5QlVptAU+6CiNgXCaIQ0BcDYV8b0P4pi30vfIxD5+w72C9aliegW8MHzqrmh/meuFhYi0pKbs6D9fsh/n1XFMrYMbPgUByCZz6J+uEknDA9AornWFRb01WZEsACoHhOqyC7wdetT0QAK2KqOb5MCUvPyhLE0oQxzqaYNXL5xBvyVXe12vByLADjXAvgxBvSPGFGMIjCmJbEW8HfntxtQmxT0cmxp9UPAdKAZ1upA6EB7qgDo6oCUxXRtPVSpAwJpnUhuxAqWCCYK1MBExZljY5S8SYr+pxAFAuBayhNG26jw8usCQLX0SAAkwwcAEngyQizaXoziIli+Oe7/9kJvNk1LmBMe9ECO3XRB7aPeF0EYHNVPdT8gj016YBcWtBfBVYJuz7mF7VgGY/pO8f5WdQ1/7U67nIKNS7j0wIbDPFZsyNHHY7od/xdlEHj8CcC3TgCWHgGAPSxiSdt4312u/8SPAl8/Dlh4pDeZW2PD4J1c9+uyDaIDkgEJQKnTfG/N8nUAmu5HUnMW5ARbPfEuIHy/ACjRK7FL5pOR4RaxgTHofKl8r/S1ZWBnAGDKefbn3AFIPRPXB7sFiVQimKVgGdl5ooNwLQ1/1U+DQGSXQ9r5Evy1q9rZbP1lGQDZsPpzI8APHgXgod7qUx11YtBbFzC+/C+BL7SAWwhgdoLkONSLqy5oLogYft3ZI1F7EAC+phsAnekokhP4HIzml/PvthQWmPB9LJ7jxkcSr14jWj4/0wFlgJD5eoDw6fe4DzAYPHokWhHJZ3TFSkn4h7YOSOBwEtiMTv1aY0uktFYTmI2/43EMQmCuAJmUE0gmVD8EFdPpdnxhVhqzDr8F4NMtYM9Jfg98EVTeNu9Q2OFZBX7vr9vtgm/lcezczZ61ZNN8DCvilYCdPXqNDQpAlfGTKm0M6AA0PTAyoMSx64cRfPQHXsniOTI+fEWDFGp+Qb9BeySRBV2kpl0QxxGAlHDmkI56X6z+EP7UDYSdRgh/IouwIZ36lHabBE0GJ0r10Rgb/xA/tt/j/6aMAf+7R4CxzuBXWRGULwBfIrY6UNfpvLae7n0I+LO/reoLMqiVMbW38oUhkNkQIzZO7tIweGePcmWlAFTjAYHPVGwXxWoLYblEDkLuTT8MDPhXLJ4jALpaJB+ggU6xfgJknT7IKXIQXh4Y0FZCog+wxiUTwSkXUbSMV1rB/A31OXWuFpPUda/mRHKi1e6U+hA7Zq7l+A+UAfDtHg/LrptkQpZ727cRWOL9542Pa3rOvuOqagUltgtmJM08j4/PILbIDKz6w5PAHsbraTnMGdZWIwIzxIfeK0rn578J3LAVuH8CODRahV/FFQ/1IumIvXP1QudNfyNT8oVqcHviPcBd48A0g2RDuoDqHdb2SalZAdG9dnfDkAE0gXnH5ijWCDbKCq5/MRiV0QD8HgHQ63jG0hdsLGxA3x9Bw1Asli7hO3BwApgng/Gjvq01IHrXJ7q3Cz7E++YziF2rs1ZLZ+8H9jJsSoECWXj6igmR87aLgfbGq4GvbgLu2gjsHwdmCEIPSI1h+SkCRjpfUC3iNWcpoRrcnrYbuGsUOMBo7QBCxSTG/igxVcBIVGPWM1h1JYQPnyKNExGZMDIJ9b66eEBGxPDY1Y5nv+GCjfGAxD+DDpiawphABWZPjwNzNLAEIH4XCH0M7/5c93bBfI8Yk2cgVAdvdT10ifDkBWC/r9lGH51NhIsnsWHOfPmEUKT94WeAG8eAO8aAfWPAwVEHISNQlKQUglJjJExqC+H6Nq93kOpUg9szbwLuHa66QzFWkaFieXxi6hgVHOMCYGRuJ+5V4jYJIDKI9KlsAvFDq8QDrnb8NWVPh9EwdFkQ79TlSMIsN0Mi5s9MoOGno4U6f3YAvefL7Y7rvdoFLxOANSA8f7xSgWmd0kCQbmZ6mTLEnJ0UqWLhUkxlrBn6n3wWuGkYuGukCsufGq2iojnRFpafsU7MDxErJuZhYCsJosHtWTcBe1oeq+hxigJgXBrMmTBPnJKLrr+VED54ibHYvZos8sO+DNcrHrDX8YVVyglAKud0LtMjFPtNMz6QLDY7VomLJd671AEH4Xu+3g7nWq28ISvX58/hguOBg8vtFQvV/hEzxfqOevuTfpjri8vAWz8L3NYCfjBc6ZYHmBcitnFd06pxyb8W4gPlgonBqffTtdTg9pybqiVNBssyUsdUD7eGO9amnf3sXtxQipl7Wg/sD4A8AwHIyZMYky50Tp/xgN2OL8y051qw2hXzwRCEdT2nmck1RxHG+w5jeO9NFQBpR6ldMIMXlFWgVndqF2dVFsJzuOgRwMElB6DcI6rznemD0RnbwQiSRS3g7Z+tVIl7PC9kahiYZm6IizuLigliT/VoUog+p8P9l3wJ7qGEanB77k3VczroUToWLCsABud4ypaLCUoxf9i/9w9ADiICULrQRWuIB6w7nuZrwaZwLBGwClSqSyz3AhHbaRGEFGOmC44D72UVgjW2C2Z4lIF4ArjodODQcqUGqAxfcpG4mJVuVqcL5tbs2z/veV0tYK/nhTAqesYNHdO5PCJZos+WuzxHJIViuXFyJxupNLg976ZK2lizUKodilGUgzyGhokF8yw5Mf+qRkjdjfuDtwkkm7DTkNaBaQ2ox1q3eMD8+B6O3H6em8Kx1Ccx9ptWl9iYIUAAWrI3I3nHgPdOtsO5eOuxXXBdj0V1vOL/so3Cxef60tlSpYwveKf0pAu6ohfdJ8k4CUqgvr5jV6VGTBKALeCAh+VbZLTnh5gu6D44A6H8cVlkNK95O1WkBrfn31R5HSy+JCwPplAxRegE/2T+AloGncNmbQyogUQx/KwB4gHj8YWNTwRAOW0FIIIndoqNkTAxz/bd09XDGLBdMM6/pLKi5whAX60gCK2ujxzEAqGL2pQ1Jis5AJEAFHvTujYAKjRf+SEugm1d2COQLU/DAwQ44caEw8AtZzSIPgAvuKkdrWMM6M7xCMBoiBn4YpCE2NCfxWAA5MEuwvCCEICwlnhAHV+YORfDsWJGgPpMKwg1b9QpFnzHbD2BK2JGul9s8KkYW17vLALQRTCBpzXZpS4gtCXXMAkduuAy8E7PijPWprXJ5CR38ygw1fJDohh2BlRAgq2OeN7uTWc1D0AFNtmL54ESBsCaJcLkDajxj5ZXRiCIGA0waDwgjy8sk5+HY+X9ppUbJSCp6TnFCMXwny1WAFQ8rUAc2wUrRL6mXTAefWnFfnz3FpbagQKLAqAzoZjAKkkpXkNO5GCEvOMLFXOnnC4xIKOjnQGNdWSM+GqHQGd7JSsxUf+JzQLwhTdV4je1nQvr1MkPGtlf9yP2Dy+gAqZ6rQytfvdHSDxgLwBF8AmAYjHWluEDiKGMiqOVvtejXTBOuRSYJwDJAARgZAGWL9Nk+IM3SzgTydE4eec1nZHbtDaNAf1Dpd/SMx2END6kD0oXtFhBXmcY+OY6AFChnKnzl7NfdMR3qCAae2B+VVMYXASvDs3/X/zHJZcB84vuiqABEo0QPnhnwqQLyRURmZBPytnwHde0M1vN2lR6picoKULaxHDIEdHkW2iWg4/7b5zb7DSQAVd0/griV2JYojfpwRGEYsGBrOBmx/OgP5sAKANkcbFzNWTRnX/GSGImMYH/LYlk+gGvdT+bW+SWH+Ig1GqL5QeTtR2EYj5LVHfjw/ZDwL8yJ6TB7UU3VVoTjTYxYDK+Ivv7dzNAZIxpZSiU8jjKgIWTcykZkBawDBBnQdMr5QeTKI5iWCB09AmEb7+ucnOQ/aTPWn6wuzyS4u+R0Ob6CUGqJpIDA97AdqINbgRgBJ69CG4Jp6q/ckjXqB/RKla4WpkO2ODgHoynigA0JiLwaNiEt95YQKJ4FRC+7brKzRH9jZbN6iJYuSHm9I5iOAOhHNJfZkh+gxsBKPbLu3+JgaWDdojhMO5kkDWSlNTg4B6MpyIAjf3IggJgMD4MCARjFMU9QCgAykhSKnUCYHB9JB0wy5aTRUxmup4h+Q1uAmDs+hpXgFLnB6ULONOn5xACNJqxghsc3IPxVBGAiQG9aLeilWUJW1FvVXEN0TKp1C6At19TMSCBpz1dHtT/JH7N9yaxp6QkF73KBxYIr10nAMproB44qQGTj6sjUrtOFPtLeFQHLES9AdDFrq1E6M13MaxVCTNAXNFThIylLcor40zxtgDAPKuVwDMrOKw+SBTbtR2MND7sZwC7Qvm4wqHa4T/uIrhb+7n0EgbQdTijoyg+agWXT8llDsAFWr/B8qP1K7bT0pvtVwHhW6+t2C/m8svvZlawi2CKe37nhFtapkDnILRqBQA+v04AjMyn79EIkXO/DnzyCBwVweX4wxs9B4rRZgyPVFqykgDd+5JSpBU5r0vHyHz+jsc3ub0KABsZMCyQgeExKyFPVIz3lmcM6OfPAGCADYPE67Jfs6h7G0o+xvi7oyK4cLZfOgpsXwC2Lq9MwuuVERonKn4nSJrcXnQKcM7dwMMXgYcsVxkSebJgzOWPqdB1ad2f3gpsnwK2LXWeR9m3danUIV1lBSCPArBwtp+7DThuBti6UDWDmWA/DvXk8LRptfPtNUlihYZTOPCi04GH3wFsnwGOW6iAs5n3GeJJ+KLoE+9VDClQ8R6vOQHYegDYwuY3S6H/iJ8jb11ck0q9Qhoc9QMWgPBZJwFbpoFN88DGRWBiqQIgWyJY3lPozaGJ1KTEPh36zpTkJrcXPRE44S7g+Cng2DlgyyKwaclfFoIwvCwx9Zn3Q1DmIPx/2/sSaMuusszvjfXq1ZRUElJkKsBEGQyYhJCBSkUqAW1tsBdpuxEVaBzowXZqe1g90G2LotjQdmMjKqtBxQERdAWUAkUlZNBGkQRNyIAEMAkxpFKpqjfUG3t9//m/c/+737njPq9uVeqcte66b7jnnn32/s6///3v//++Tz0dmD0KzC4DM6vAFpd/0L3Gh6yTDgnvLwKzAWDGiH/ThcC2OWDrErB1pRgQisIQhAa+AED+HEEY6uNLyrRnZLSl6tSbrgLOeBQ44yiw8ziwfaV4UGbdegmA5QMTLFlqsfn7XecDW+eAmePAltXiXnkuZSBkRcm4UGXtU2uo3xsAZgz6y54JzMwDWzkgBOAqMMVBCSAUObh8QuN/CiTgcWAuyWhL1amvvBbY+VgxbW477paa7gIBqCnUrbUBiQuhAKDUot13IbBlDtiyBEyvtO5VDxvvVfxW/JkWNFrCeK8NAGsY7BsvKQC4hQCkJNaKy2LRIsg6SJ3IQSe1onKKC2CsOYMeN+0Dtj0ObDsGbFsEZmWp5S74g2Ir2uA22BScAJGA+dJFwPQ8ML0ETAUAkgDTPq9zdK/+sMWpPF19NxYwA4g3PtsHxAE4SQC6FdSgmGWRRIJLZJll8EGKjHiX1jwaN10HzD4BbD0GzC4WrsKMW2pNobZoCu6CLCDfCTqzgg6sr+wFphaAKQfgZHKvpRSYg7HN5XCL2AbAZwPrZGaj6ippXhgn0kqmU1woxnHedg5AATuWHig2FE1uVRwoxoX+Wcbg89S3AqCKPONcCi8oPtVP+9++G3j+oSK2xRBFDElUxbTS+3nvc4FpDsjxllXQoJg8FgdCQoGJJTTicLcQ6vPL6wbg9cDM4cJv27oAzFA5ky9/UOSvmg8oP86n0dICBn25JwjARWDSAUgBHN6vfdbv10AbARh8X91vDM2ss+NvAECKPVLCsHoyUgRqrlbnRwB933OBc+4DXrIC0IEmiLnE75di8HsyAcjzWUVGUi6uICMpVwwJVMXdeOk3XAxc+Hng+vV2esAYw+sWoP31r3eLcLwQBeQUrEHh4Jo2h4vDmJPuAyMLGAeEn7uqbgB+I7DlSWBGCwe31Gb9aL20kGDb/EGRxY6WTz8f2wtM8l4pgL1SgM8esHCvsuylME4nn9cfQLtldg6TZ0kUKorAfij23vAPCmqp3fcCl60XFINid1PlZrf41/dnApB6wSQjutUfIDJR8CGIQOwWEH7DywpKrWc8CFzqRLHkVYrB2jS2FQH5vkuBycXCAlIUUAAkCM2iRBA6+ARCe7DjYmQduLYTleiQ/XTTS4DpI+6nLhZW2nzVCEBaMLd+soIGqjD1ampdugiYWCpeBKA9bBJC9ActAk8LES26SqsftInLZ44dQif4Igdhym5WLrPDyuYH/7HTCNwDnPko8LXrBccjQaioe6BiKad3+QY/MGTH6rS3OBvCnQDuAIyqhiDkQ9RX+29yE3on8IwjxQPI8zkTiApGU3oVkD/4fGDieAuAdMw5MFQjEgg1DYsUku+a3uI0TGBfV7PotwHwaOEmbHEATvuDIutni6UAQoFRIFRYhfe/dhEw7tbe9Of0Si1g8HkrwRcevDajz07gIJ7n05rYyWIpb4ya/7vv8PRdFpj/LXDmkQLAnA4jCCOlTBRN/rFMAJKgkkVHpGUjySSBSFeg7/azqk8EgbSEq8UDRACLKDXSyaQ7Br//DcA4LSCtwnKhTEkQcmAIQhtM+Uaajl0uS9NatITXWzpzfcdNB4DpY+6nBgDaCtanYLN6fCj4u1ay0QIqtML/EYC61wSA9tAJeP6eWsAoDysFpg1eB0HIQRCIIkVeCqQf/05P3WCB+UPA+CPAzvmCaFWDKEuYcl1yMN+Y2dckqGTeHPEvvWDSNhOAfbefX0A6rS8CUw8X9066bFIfdqMHJID++DJgLACQumyc3gyAEYRRKFCLD1eu5ODLF6QvXedx0w3A1BwwxdAJLTXjd8seQnGrZ9bPFxLyA7WIKON63tYtCQBN/sv9QPm6BkLp0vl9t/m6ietR6fbyBA4gnXtORwRRpNnTtPpW6gWLH83lKqcOFTEnDiKtoHwy8RNFhrefyeztbnrBfbWfgttsP+kIyO32ELD1cHHvInrlvWs6TsnB7qAUlg/suFtAWkE55zYQ0QpqcALoNCXTEt7A3KoaDwGQfqoAOEUBa7fUbKctltwCajVbxvSiyvoasM0BaBKwwdKb9fN7NfcqBWGiSWykWXER0umeacUEonQgCKRfIgDFjya5yq8Wfsfs8dYgiuMxgpAg/vnMzu6mF0z6Zj5APdvPQec0TEosnvQosGOhaLuIYvnwEYSithE52F1XFAA0p5yigD4otCqygFKnpHUpLYP0OcKURYv6Mj4MNR433QhM0gL6QongawOg+6rl9CswKoSkEIxPyTsuAPigCYBmAXVfYcVf+n0SRYw6dP1YwNgHsgSajiJP429RrpWOM6cxDiJB6NINM4w7LbUGMQUwB/M9mZ3dSy+YVG0EoBiDBST5ddZ+PkCsAiIlQZDa3LVatJ0WXG2PbL98AB+4omB3oP/HgTUhmGgBfRqWf2TTrUSjExDSP/qWzQDgfAFAWyzR8rkFtDAKX75jo6nUguZxZ8NByHbvvqBQ36T1swcsBaBAGGRg40Ir+rt9WUDhQ5ZAU7Es2e9LLzglqHRxNkbeuW+oQRRls5jaMjnK0a9ecNf2R4LAwO829kQB3LTtEYQPUwzQAWgW0AGo8AQH0ljp/V17pm0KRcEifGuNOnocO1rACQbKPXhs8TtNwVr5uh+n6Zf3wDgu29g2FdMtOc8B6PdpFj08ZFrplw+ZA5FTvAQQ0/BT36FPDkRqBT9Jag7xYlQItY0f88j78sZzCcKPZlrAQfSCK9uvB4h577SCotUiEJ8opq8IQFl/PUBPEoBLxbRE62LSqG4dFB8r5bHcOtiOQSqT5T7RKzYDgJx+BUCCTxZQCwhaQc9oKcEnEBKknj5FsJ1LAPo9xoWWPWDy+6IIoqbeaO0VA+zHB0zxIQDKkn1GgtXiRxMIAx0Vn0Db+lkuFjLRCt5WEwD71Qvu2H5OfekD5FaciQay/GIbFgBXriwAyGmJADR1ck3DwTE3TQ4B0LetzBJErTYAr2BBSI3HTS8tLKBZPo/fWQDZp197Z3scjGb5BDp/L3+njMweB6B83Gj9wj3atOsPWin9WgXCFlVO/3ctf4iD8XkBkH5USlAZlNPZAQqARr5vxu1yjmH0givbX0UQKI63o0Wun/xHuR8E4VnPK5JQLd4VNttTBvK2uoiKOUf/f+GjwMNBh0NMV6J0c0NpcRv7mrYv3kh8/uHxYp+bVpwLp3R7sts2YzouSq3KGa+q7+x7Co4nazAerRKsVlV1QitF59dyyFZaYY0HMu9mWL3gtvZXMbymBIFMZ1ov2h0B+LTLisxgW+Eq5uU92iZ72ud9vvR+4JFp4NjkRh2ONi0OB1/UBCkvEYRhfuNs4OmhhiPKnFQlx6aAjMnSXJUAACAASURBVPjmz1w41nnwO4cCIBvBwZgTAOUHRq3gyDExD4zRGVYEnpm5LqmQc0M5esFt7acFl0SlHiBxuTkYxxdaihUC4QVXFu5FCUD5QtJl85sjGA0ziQxqeu/fem+hw0F2fLLQGxFlYMRvo7v1WmIVtpt1DFkXvOR7LwJ2HSkyoZmEypoVVe8p7b6qEMnidGG/Vl/L2aPOIwuA1pAIQE3DAmFa4j9f7CPaFpCHKujr5xzZesGdHqAqKz5X+FLRAl58le+jui+kTBALMcgZ73CDBkpN2/7+bfcWOhwUyCEAjQTcAVhKdjkPc2RajewKyu/n1//qJcA2uhBMRGXQOcn9U6JIOjXHQqSYOsVoQp1HNgAvz8yny80H5PVz9H6RqVd849WtXQ/zA0Ow2ayGLJ474L0G79vvbulwkJi8BGCg4S01SKqofoNvSIC+5zkhFUupV8rUTpJN06KpaBkFQm5M1HlkA3AyM5/u9Zl38zrk6f0iU6/4hmscgK5ISUtCTowyDqb7UxwsqFJW3fo/vbuIBJEZ1YRgyHwQKNi0KEl1OKTCZJdxtPDn//v8ooaDaVgqFyiTD2IKfcjZS4Fo+7g+HXOPv84jG4DIzKfLzQf8KVfI/FNKrQ6h94tfz+vOA9cGAAbrpylY2SDlVTTt+uCnV3/V3a7DQQAysJAwobZJgUXi78Qayhd812WeiOAZzEyUiAkHMeu5BF5FwZQAWLPwknkLQy9CrPMy8+lIHZFzvN3T+YbV+8X7c64OHHix74V6zIxB+RJ0wQ+UU992tYoFy3fcXcTDxQkoPsCUhFIczKVCegSg5B8A/PILN9ZwxBSxtiKiUAOi7JW0dLTustF8AGbm0/1o3vjjnSGdj+lYlGwdRO8XN+c1wABIoHk6k61yuSCJITq3jDY9Vx0BqK++uwAfX6JkI/hME0SC1EGguiQ+isqcQRLrF6/0jO2w+6FMnZhyZYsQ1W50qOHgPX1NXndtODsfgMwHzMin+0+ZN0S9YOllMzWfLwKQSS396P3iY3kNOLDPM1y065H4gOW3p4uTDkB8zWdb7FgbdDhEgJkCUDRvogTmd/vPv3BVAUBuvylNzAAYi4hisVQnEHoIqWblrxqm4Mx8ujfljT+YjsWBYgIOc0oJPsq1slCpH71fKybJOEoAuuVTRSCnYlmU6P/Z4iSJEcbLv+Yu9/1EAh7JKEXDKxq4ChUiKymRbwjgHdcUWTARgLYXHSr2LOU+BV7MVwzxwOfkOWybYAGZD5iRT0edjpxD6VhcOQ6j94tP51wdOHBdMeXa9OqWRcmWXA1XLUIUH6zyCwlAs3z+YBkfs1u+VIejJEF3ckrjI9T0y/aMA2+/tgAg08VURKT8vbKMUgAMIGzzAcOi5HknHQAz8+l+MW/829KxhtH7tTz+jIMAJPCYMULAWd6fvi+EY9ouoZBM/Kx/4LUBgFLgNC5o16FrE8JJVJgkiFhaQQBv3+dVbMrWVsC8UxFRkjjaVsW2DtRdOJ/vAyohVYK7A+bTvTdj8HlqTMcaRu/XxHkzjgNkIOWuDr8jnYYDKDutgpUhra0uAlAyCCUAK8BXcjBXgLCk/h0D/hcByDxFAdAzoFUqUBYRJTUcMWdPP7ONL6i5bLQeALJRQ+bT/W7G4AuAOXq/lsGdcRgAY+glLkYclJVTsa6ptCX3uQjAKINQstFrAZKIwWxQIhIJuovB/Nx+r2LzFCwlj8Y0evl/MYk0kieVtcvrwGUnHQCVjjVkPl3mItQsIPuElx9G79dOzDgMgGkAWlNyBJn8xKprBRC+zgEo4LWRgcdVcOCjjlNvmx84DrzNAahaFZWLygKWxUNibIhTcPD9BMLLa65bzreAMSGVoXvJ/Cgh1WUfO+XTZS5CDYDs9GH1fnOrIDcAkABTTDCCLYK0Cwi/586WcKJUiEpC8CCBYDsiiSplqUIUmOjf+o2tIiKVUJbgU5uSWl4DWwX4+PcXnrQATBNS+8yny1yEopdcay+930y5YhgAg+9n2OoUeI5TdQer+32fdhmGoOBZanBo+g1yEKU4dYgFSvqB//vZBIBt9RshkTbW8ZZZ2hUgvDL3iU3uux4LSBM0ZD7dPRnTH08VAIfV+2XAOucQAMuVcKfFSD/+IAABsEoGwYAoHZIKEEYxRIHwLS8pUuhjFVs6/ZZhIVWyxVKBBIRXnbQATBNS+8ynI4tBzkEACv+chlUVIKE/5cRGsWmlKfIzudc3APLQSlg3E2OCyVRc1kpU3DgBmKoQsWtlBcswjPu+nfTYtBL+GQdgOf16GCZW6pXlBCqWSgqJypoOAFfXXDifbwFJLvi5HAjlnUsiIe6AjOp4iQNQHRlT2PlgJCUbbc2s+v/hFwFb/q7gm6HlYpBbmTV2sscQyy/qFBj2v0/cAdz/HGD7NDA1AUyOOU+1CwWOewNjKj6/O03F1/WuugW4/XJgfBoYmwDGdH7IxB5kLPIB+I8AfNwZgga5ck2fJbEm8V9zNWPfrasbgMuPAcuseJ8Exsb9FdBhA+7gaQNKB6TfcgCYug+YJT+g89aoBDMmIMScP12uTKj13uDv8zsKig/uJ1uQOsnojm3qB5P5ACRBH3OhPuzzRN9DV88HqQLEWPJnvTy5nm/t/1s4BcuSpRZtGAu4fi+wtBVYEyccrYwn6hF8/FkJp9bKxAKVFsn/d8urgbHPA9NPOEOWl4+2cfoFHhfVrJTZPKHSj5daOtup6JyCpPx8rHWRVQ7WOlrYCMx8AHIzlxkALPD9c0VB+x/A3E/+E2fUYHXdF7KTGwdvTd0AHP9r4PgWYG0KWBdfsBdsMPfPrKKsoL9XAVLAvO2fFylCE4cKliyrDVZNcGS1CqEYhWFiAZV+XntaURdTLmpCEbpchTYLqi6NrkMCzLzt5Xc4HwyJmmkJ+Z73jQOh4NWeDUZiK1K08f0EXt7CMHVawIk7gaVpYJUA9LI1Ao8bzKX1cytoFtFfpdCIWz7rgzHgth8u0oPGDwETc8CEMySUzFaikgtlpW1Ta8JqNba7lVljSRgW+Q6ZP/57WQvj6fydBjXfAjKbgEvMLwWCvhNoipgNpnQshlS4IGFWzIk6ylWwAz93ETLxGWB5ClidLABoIOS7pmGfG+33YAG5mND0G8F4678vkiPJczNOAC4UyQm2N8w94kirFlfIAl7i402d6dbPWWAtrsjOFiuCvAJZOQE0pHTFsckHYDeCvhNgipQNxoAz8/8IPr5nbvH2jd+6AThJAE4AqwTdZKEBLDoDgU4+YVkPHIBoPwareOt/BkDexsMFAFnbzNJYm0IDnVwbt4uyur1kwL7Tp+iZM/08WT9Rc7DHUmuYTr/x+6o4ovvu9fjBbgR9JyA+omwwxvZI5ULg6ZW7y9FPf9QNwKm/CgCcKABovh8ByVy/UCtJq2f+X1yYJPGU27lIZLbuEWDsWBHesZeDz4iURLUWa1TE47LqK12fZmd3OXidFctqm92KatVs1jAEsNv6sdymaa2g8+xUL4I+Pn2beCgbLGWHI/h8G3oTr45iK86POlbBU9yKI/AcfLR+ouQwH9BfmmbLlTHboOnZ/T9+5vaf8FUaAThXsFOQ45mUcgZCWTAxe0UQ+urYMO1/37GtxQmoLCBtRSp30LrDp2SFdzYMgk/R+VNwvwR9mwQDsaspGSfJgYDYNTbp8psCQFJxEIBkQjDrxt8dXCUIY+COH5MVFPi8SOn2n/QYLZ9Gp0cxANIP5IvAkzVzxivRydnKNzBa8fddM84b6AFyAriMF2pajk9kYIeoClXmA3AQgr5NQEHMBqMVFMNaIOayNRL/vhlH3RZwmhbQQUcAasrVVGz4EtjCu/3dfb/ID3PbT7uKAZ/MhcIC0vqRTo4W0IBIEAmEtFwCYqjW03bcmdwBYeoWgetUbrR8snrloiR2drpACf+rD4D9EvTVjIJu7HBV+781X752Czj9lwUZkTEgcPoNPp5Nv4oBRhCG6dd+1DkMz1JIhR1BAHJ7zwqO3fIRRM5tmDK5CoQKsSgOeBYBKFZULTqcB9r6Ni5KYmd3WKDUA0BlhNLM8EbT1QBXBU72aI5ZjUcVOxz7WLkQ8d37vsart/uA6RcPsxNSAtAXHDYNC1AEpf9s01kKwuBwGU7HgVt/1jtD1e60fgQigSe/j5bQp+KYpGB+H62jT7P8/ZypBIC8Dhcx8eY9wF015abhmnoAyJ5WSrKeNgKO9SHxnT/LSasJBim5lRjWBEIVeROInKL1qunybRawLgASdEy74qjaNNzJCgqEEYzBGvK0297mAFSHEIB6ebKDgc8J1ksmV8t29f1en6L5v6cxIK5iK6Xne/5jCTiFcTqVn/r/tWDPWwXnEPTVgIKUHU7ljASawKefIwDpMdRxRB+wFgD+RREDJABpwSzz2c0LfxczVjkVKwaYgtBBezu3SvX08d39P5uO3QKahXMQciourZRAGKZWar/YZ1xXRPe8wQr2AUK7TvbOVTZBXx4MBECRnConUBSFEXT6mf/TK+/qmzAF/0UBOPqBZYF52HrTFCw2LH5G8UCzJEko5nZqmRnPh/uCXmpnVpDTsIPPwKApOaSA2QLDLSHf97iPx0tpISLfz7bl4iFfsUsnj+HZWEeOYDCDnDmCvZkEgedcCjxGseIhBYt3vx049HwMLRh8gA9gh2MoH9ABqKJzxf0McO7XlSAU4HzhYYFq+5D7hwBu/98OQLlIBCKnW39SlXNY+nqeiq2dkQg+gnGPb9/ZpT0lq6MV5D96gLCwgDmCwbdnCvZmCgY/dxy47xxg5SWuUjigYPHFbwA+fyGwfr2rXrMvPB+vp3L3GHCgi9JOHQCkRVPppeUBigXLFymyejYTB4YsgfA20ofRAlYB0FfAlvQqP0/TsX5PLOB5DNu471cmIwiBaRww/F01J+mz2pqChxUMZvpJlmBv3iTocsW4dzewfhkGFix+2febXDAeJO/YEILBB7pU1g8LQFo98QASVGYNQ6DZfEG3fnEqrgLhbf/HV15anbkFNCvohWSl9XPQ2XTM/2s3I4DwPIZwBEDfgitH0Ek6N6x+u/iD7T4g/YdBBYPpWHEaHlqwNw+AQa4Yj54JrJO+aQDB4pt+oCAyYvOPEIQDCgYfeF/9U3AbAMX7ItAlVtAspKZdz5SOlvA2pstxjES3wJ+92NgAGK2gwi78QoVfEhBeQACqNNP1RdoA18kKdgDhxkUI/zKIYDCnqyzB3jwAJnLFOEIW7QEEi1/1Y21ywVglCAcQDD5/Efj7M4CVrZ5AKlkhxeQUaxBI4nvFzxf8IfCVC4HV7cC6ZEX5nen3VX1vAGLZq8ysrvHY+QBwbGfI2E6JpLvdX+ksthpUvQrmX/sVDGZVUJZgb17vJHLFeGQcmCdVb5+Cxd/5xjZ6QzzMLOQBBIOfTV2Ps4HFHQ7CLQUQmUrV0rgKJMsCjsxGAqTn/hzw0EXA4tnAyg5gbTYBorKkUyLnkB9YVhTxu+kT13iccwtwdBewPAus+b2ar9xJAafqfgMQO4dh+J9+BHe5gqZZZzYok1JJUcpaR6bp93P+W/N6p0KuGIemgEWKgPQhWPxdP7NBLhiHKYHUp2DwpZ8rLOD8tmJQVplOLxAqmbRKC6EDYC7/CeCRPcCx3cDSrsISrs04CPm9ArZk55UvKAspYLqPaPdR4/H0g8DRHcDyVr/X6VabLHk2PhjpPVZY7d5xwF6CwS9y/4LbbVyQsEKIufGiKe0p2JvXOx3kinF0GjhOQY+oNRtljji9TQPf/fOV9IZY4Gq4D8Hgy/4W+Oo2YG5bUUy04vUcLCqSJVRWszJbNgxSmMau+q/Ao2cBR88EjtOqbgNWWaTkIFz3YiWrF4nAjtN0nBZrJnU+/8PA3CxwfMYB6LUra3oglL0tps6wlVha5rLiqd9AdDfB4Je6U0s/0BXTDYh80Sr2FOzNA2AXuWIszABL1JaKWq1R+nwGeM17OsoFY5XTVw/B4Cv+Djg0C8xvLYqJCECzgsxmZlq9T8e0XGUyaUizavPtxoFr/zvw2BnA0Z3A8e2FVV3x6c4sqwObckeyhiXAowUSADhD1XhceDMwx37lvU4XxVN2n3rJIocygkr/Vbs7fe+EdBLcfaXXQ3IPWIrpBB6XlnwpR76jYG9e7/SQKzarxM7qJFj8mg8UarMV9IZ4gvNDD8HgKx8HDs8A8zMFAFnPYQPDl0Co2g4fpDZLqKCxT0/7fhJ4fCdwbFvhRiwRgJruCOwUgCpeCvUjZmEFxhfk9W969kW/B8xvKQqnVgg+B6CB0MsI7P70AHgmd2n1NQ0rv7FvALIlVYK73MnQCDLThSGZoDpuP7uCeuX5n8zroB5yxThGnQ0CgyBMxY63Aq/5aBHG6EBviDlOLV0Eg1+0AByZLgbl+HRxnZXJoqqttA4ODovlJZVuSjTQFtq+NwNPbHMAzramdVpVs6wEoPtdNg37wJfvsYiJP9NFqvHY+7vAwjSwxAeNxVO8T6aNVRRRlT6hHrJ0Ovaw0WDJCKng7g86APvNB9wg2JvXO33IFWOBgn8EIf2nRLD4tbe1+AU7yAWbZeskGHwVdd2mgAUCcNKnJgLQrZ/V9/Jnn5JUYmnAE3hCmv3+t8AWQfSzyPK/POOgJgDdsgqA5nfJAvLdLV+bz0kK4RqPZ3wQWJxyAPqDVhZQyQr7gyaXI9axWCFVAGLvRUhV46PgLnUWBs0HbBPszeudPuWKsTRZAJDTo8l8ui/42juL5veQC7ZpsEow+OrZQlqVVuH4FLA8WVyDAOTAmHUQCAWQkOlsQAwDt/9/AE8SgPQpNa07+AhAA6HLXbb5Xr4IaAMfv/eGvP5NzyYA7UGjBWTWjh40v9fSyscHLtaxhJWxFVsNNAXH1khw983+DYPmA5aCvXkdNIBccemfceooAfhAAcA+6A2xLuAGucxrzgKOMexDfV9OwbS2BB/BEoqLSrBoYGgJ3E8qLcIEsP/ngCPuUy7S13L3wb6PU56/m/Xj4Ps0TKCXQA6AXuNeZY3HMz5QANAeND1kwcKXlj6wOZQ+b7R+Pi0PD0DeFAfk590CKg8qncfoFzIRVWVqfFfBhgn25vXOAHLFWCDbvPstBsJZ4LUPt+jdesgFg+qVptWq11bg2gtgfuLiRAAgQeg+oEmsOujsXb5SsAoCIN/3vx04OlNM6Yv0tdx1MKvK7/TFjVmeCD4HQQQhf159eV7/pmc/kwCcKABoeYvR0oept7SEoZQ0Tr1lPuPQFlAtO0nyAcWhpzw/FSjFzGjLx+RGvxzoSeC1hwsA9klvaFN5FAy+9mJgnhaQ0qqagglADo4c9AhCDpJPl5ZommQ8738HcGw6AJBW1VecZv0cePwOY0/wl1lAD/WUCx0mMlDLr8bjmb+Dwp3x4nkDYbD0thIO5aNtfmDi/xGEeRawxhs7Vb/q2huABQJwAlhyy2cC0xoggjAAUCWWAkksOiIY978TmOOqeqqwqAx3WGhHK06n7TDwOcAV/iipPAKjwgrZm2o8nkUA0gKmAHTrp+o9MTrEYvq44o9pZIOtgmu8mafCV72YAKT/RwAy5OPOuVlAAk9Oule6xQRTWUKlWtkU/IvAHAHti5oIwDK841ZPFtCmdr0U8PaC9hVultd4CIC8P2Ztt/m5/qC11TJXlJDGGpfGAmYODgFoCxACkLpuWh3KCgqE8gNVZK4KtxgjJAB/2X1Krao1rfN7CWZf3LSBT4uAEIyWBVpipL7GgwA0AW25GbGENBTRx3rm1M2w39mmrFVwjTd1Kn+VAZALEE5LtIDyMWUBvbLNLGHgd5H/V07BDp7r3uU+Jadgn3ptxekA5MBri0/Wp4wzBjDbCnkMWMqVpE8GJwLQqvfc0pqbkVj5aNk7gbCxgJno30cAjntowtXNaZ1suvSKNhsYTcVKmw9F5xGE+94dfEoP+JYhD/8OC8eIPUsUHokVVKB78XszbzAF4Pvd//PCKVGIpOAr78mn4DZOm8YC1jco+w6EFTDDPJqeCEBZBa5GffVbhmQ8DtZW5TYOvPhXip0GTuu22lTMLSw+aAVl9QhEWjurI/aQiLJkTMLsX9R3r/ymZ73fp1+37OU9hunXSkdl7T3QrhKCtlCM59k2i5CMMSIAGdqxEIwrmptzTsCEut5yilKoJLAcxCq3fe8tLCDBFwO+tKjyuxSCMdYEXoeDrHcHvu0tTwLzmwHA4N/Gh6zNCqqeOSxC2lb8tQSiMwbuqXIqAcjFh2JjBKGJyShQG6ygVbfJegULWBYcMR3rvb6oCRaQwFPgl1M5rR7/JtBZOIZWx/0+s4QeY5z/1/X2tFnAxPpFELaVkdLN8MWGVr4pCBsfMHN8bmTKfCjZ0Ncp456/x58zLzfw6Qf3ABd8pUgEYmqk5bGyek06IQl1bkXScnlN/u8L24Gdx1qVq91KQvrpgwaAAw9p+wnXPw1YjyWMGtDo2ASOFGMU7SIEUzdYD34vMPmXwLbHgdkFYAtlGiim6DpxJtvq9LtlVr/aWKEB8pUXAOOPAFPzwBTZ9r04vdQ9Ts4pAZ3cd+yHxgfMAOH+vcA69/9Uxijmz/AerYpdar1lNSMYzV+vWY/34I8DY58Gph8Bpo8A04vAFEFIknIHohGVR62QhFRSYjQE6qFri2z3iaPAhHNNlxKwArI0Q1IAxwfReacbC5gBPp66/5ICgLKCtqnsrKKlrFZUFPKOr7osMTtdsxzqQRZ93Q1MPARMPllohUxRqkEK6gShOP0S+dY2hlRv99y+ovRi7IiTnTvLqmg6xDPYpqAUgRgsoR7MxgJmgHD/c4E1FXu7FRRbvEgd7evXWlbPpp9EgUjiJpwe6zwOMlvpAWCMVusJYPIYMOlSDZRpoGiNxKzbdIQlXONMWJbGtw4svdgz3El47nzTRvPrrKptAJT6ZrzfintvAJgx4vsvdQvIXK5VYF3sUZxmJUvgA1FOvwF8spKyBtM1y6EepI4LqVMedbEaTp0EIKdPKh5FqYYqSxgo2jgFr13j6XXHnOiSZOeBVSvyC8qC2r05FVvVw9cAMAOA178AWPMp2LJaaekiCPXExwHw660n1oB/niGQazwOkkSepbJ/72I1x4CJ+cJ6lYI1riccrVicUuVSmIW82pkwnHHVOKbFsOozQGkFkwewnBES37ABYMaAX39ZAUCCb82nIlo+40p2gNnvsoKunxH1xGwA/LOzdQOQJPIuHzV2GBg7Cow7AI0l33XfjOsv6oVodes6ISbBsAZMX+kJxU56KY7pkmFVhOciuvTzSt05v0+ryuT/9gDrZNe4wPMsI7VJP3GcP7gUOOdvgL1rRYJ0ZI5IV3hV4/wrGYPPU3/AiRhYusy2K7mU999P+z90ObD7LuBZK0Xdkeq9NSX2+o4HLwfWlopFCC0fgciBMtAFC8CGrYXVoVjnU2G7rTXrzh4kfRzLY1kyGwBoeiGcPiXb5eAzdXWnazPCSScb4j3xfmav8Cx2p50lAMW0VXINitCogl2r9H2dcctWwQxQsn6ZTBbMNtcgdKIbiZj51VcBk38CXPxoQcfCUg8pjcYgZScw/momACnXyr4leBhs5QaBTHpf7X8dMPYJYO8XgAv9e8QJlAZZq8D4xSuANYKPJQn0AR2AHKy1MACKe9nfFI6IEqduEWoHIJ9wlsVKLekoMCa9EAegSTYQeM4TXco2SEMkAHEbBZoj4bbYtdyCVrFqGXgTSxgXYTZeHLi9AMjEQRCVUXP/n4KUaaT8vVTi+Rtg7GPAuYcAWlMCgUVkQfJ2Q12yBvPXMwHImhDWwf81imsTiLSEvHZkr+jY/p9CQRD4p8DOBwteItai05qn31FFdfLlFxYWgCDUIkRkj/TxbCEi/89jfPZ3X2VqYSJQbmUNQY3HQT7hbv2sLoerVwKQHNEEoCsm8R4MhPRjXUGzVEIKIoY7yaEYuY4dgGb5RXruoSgtSCLLarkICQ9f6QNykGjFdjsIBaI4kGlt8W+Rg5g0HJ8qAp47nihAzFpuWtPIMBZJlASILvR6fQ0DCVbJCkJOJCqnk4pGpb99tZ8MopyiKDX7WWDiwYKXiEQOehCrgKh+eJQ+EQHo1Lby/zRlyf8TIbf9XS5ftIb8I92YugH4ay2pLusorl7dAoonWtMwQSTdOFuQSLTGHyIC8kxSIQuA4hwU2WUAoO4/grBcDbsfWElSzg+JCoYDoEGM1ixSkHzgF/wG7y8sIa3J7JPAGWuFJSQIaU01iJHUiYP4e33BrPOHmG/JMaOfTZVYRhwGav87vWKPJ9/rSH4IOGO5sITqg/ggxXs4TOaBAECbeoOsgfl+DrQShFqcEIhyyt0MbMusEkx76iAZXKM8BvXiZAGlF+KaIbaadYpem4aDgpJZQz6YJABV5VcHAJZ0v4FxX6KG5UpYs0KnqjhRuagEVgPglYAl9ciHf8mdUrJh0Qx9vkDBzBywfbkYQIGwahA/kglATsHsDzKA0BATiPyZ4NEDwIeoa/uFYKKXL2f24nQoIgd9R3yQCMTFqwIAfdBWI7+yB5ZLECYLETd85YJl+2YAUNosLIel/xYlu4Jsl6bhNhD6it4WJCvA2Zc4Gxo73RcgJeOqFmGR6rcChLYACyGojmEYdj59KnZ+tIQRhH9IvWA2hiREjDeRI9Cly7fMF3EtWRFawhQIf5IJwE56wdTIYdt7tp9ys1K8JnoJvod9Wn682PNkP4hUy1ndWgstAtBDMLYN5/6PAc5DGNoF4SrZfN+4+IhT8jqwg2Cp8ThIJ5vfSWBXAVCrWN9SMxDK+skaOvhoAc8me654pmUB3f0wyt+E8FyRAGmPlOEoiSD2qgvmAKoOm52fAuiTDHSyIRxx+lI0QxxADubfF5vffMmSajrWlP7nmZ3dSy+4r/ZzAUEHnQ8R70HsXlK+PgJsW68G4XYGZj0EY2EYATCAT6tAhmE0DXcC4faapcwMgAIfLb0kuzT9Qmw5uwAAIABJREFUSi+EfeALkSrpBovbrQDnkm8wAo8/E3i+CCsZ98NCpAp8cUekZyBavI4ET/TnaAk/RQCyAXy6uNSPA0i+wMeB6ePA5HFgZq2wpNGK3FUDAHmv3fSCe7afX8CB4UNEEOolVi/3obastNwJ9cO5BOBKEQMsAcifHWzRAigWWAlCn5K2bQYAOe1KMjTIR2kRUhKVS7IrLia0v+3xwHMZMCbYNP0KfG79zAqK5DxOvyEuWu6VD5KSHy2YAEQAfpaRdl5UkuUctIpBnCIIl4psD03FtIIP1ADAlBuJM47EqqUX3LX9kSBQcuuyftK78xUkHyQ+RLqHZ3Fv1KcgLj5kAQ1s0Qo6IA1nHhNLQzA8ZxvBXuNx8DcS5UYpNnoYxsCnUIqvZo0F3wPTMa7Hv53HOJVbS/l+5bumX7d+5WLE44hxIRJB2NMCqj9ixwuE90svWCaIA6bAp959EKeWChAyA0PTOV2unGMQveCO7bfqHbcS4rJR7Ewqnw5AWhLuImg2uFQAXAVs8RGmntW4+g2hB3P79L/EJ9zGvqrxOPibiVihAOgrWQOf/EBfBcsPNBBqW9Hv6zzGqFzmoXz3B9AePgXiq6bgiv4YOB9QHS8AfpkAFMMjrWAcQA0iO9XJiQyAnos2vV7ESHOOQfWCO7Zf7F40mZFQScRKAYBaSU6vAVcTgN7xXHiUFpDTMK2dFh56912BTiDcvpkATIXzCL4g3WXTZ4jpGfjoF/oihL+fx+0yWUABLwIwtYKKIabgCzHQvi2ggBKn0McEQDaKT5cGkIOo6SuyYzEfjQB0EM5nZgAPoxe8of3sgSqCQM3jkdFLvpRvR13+7UVRuhUFSavNO6otwp88ZZ3+t4M6HLtch6OT9AG/q9cmtf//gV1JDYcnQ2zY6/YakfSrU+Pg1M45NqPt3IEtoM7WFHokyrWKkooglCMWLYjiUXMtK3g8Uzd1WL3gDe3vRRCoUEYCwGtYFxxqgA2E/jI20F5hhmQod98BHNnlxOTig1aGiDanO21yV4DygWuB8YeB6fnC9WEtiKVVKeE0ZGiXWczeJoWMIig5a9V5DA1ANoKDeDylZ9NSXxyAsiKawrQqmCv2HVf5e8aRoxfc1n7xs+khItAUvojvyWryxVcWJZksVSyZoQRA3dcAoHzax4Gj2wtu6FVKM7gMgti02jbV476oUJJs1j/AbA1mQ3Pm8eTRsoZDtR+xZKCiEKmMXTIeXHPGdhYArX8FwG4DGMEnAHIK4yvT58nWC2b73cexaZgWWaEKgU1gjNbPP7PvOYGsUSBkv3hBtmRWNzxjTk9RWktvxp6POj0vARjY9sWkFel8RWxegjIF4RjwAOnZWMPBTGjqvHmszxJOBUD3xyznL2bqROvoP3N3q84jG4C7M/PpcvMBef0cvV9k6hXv+2Yno5QfGArRbaCC0mWv2YtF3ecerNDhkNZIIsXQRv5dlTtGADJSz2gEE1EJQM//026HdIEZLC8B6A0tk0g1Ja8DuzJdphS82QBEZj5dbj7gxZN5er/IZI+67pscgE7QaDOUMyC0Wb8+gXjuR4F5J6YsaXnFhBoAGEVvUhb60jISgCQnoh/OLBgvIrL8v7DdFkEYM5dtNg97tvz5zJqzdfIBmJlPl5sP+DJP5xtW7xffnzeh7H+Z+3+RpkyWT1YxuURJYVtx6T0fCTocouQV85VkHRIGegEuEv/YKpkA/JceVmL8kv6t5/9pu62tfiPWcFQVEa0DZ9WcLJEPwMx8uvfnjT9IgZyj94t/ldeA/S9tMaGa9SNdmsIxbvVscVJ1GScoMt4UPwhAsmMZ0aXzQBsvdGRBjQz0FUpEJRAJQOq4KAnBdz+sfiPJ3bOYn8fsykyVWMfiN3BOzckS+QDMzKe7OW/88aqQzsfE5kH1fvGjeQ0wADodmVGwOeiMsUqHrGOnS4UFy9P/wAEojkEnI+IqOIJQNLgpCXhcmLAtD/D+kgQE235L93tj+YBqgTX9BiCeW/NedT4AmQ+YkU/3sbzxBymQuZhm8g1T+QbV+wWFdjKO/Te2mEFNlCb6gPF708VJ1TXHgKd91GnZpDfi1k/gM2vqU3DUnCuBmNQe3P9vw6pe229KOvB0K1k+ZS+rnrfM2AlA3JMZtah/EZKZT3drxuDz1O/yxAwu9JgJxr3lQfR+8aa8Buy/wdWQZAVl+ZzCrG3q9c/YrkmHy3IRYryAAqAkEBIlopJxNNUbER+fA/H+/+AAdP9PmS9dazicJybm7mlB8nR2dI1HvgVkOlZGPt2nM29GCamcGZjAwlQ+vvrV+8X/zGsAAUiLVPp/wd+zaTMFWw+/kAA0GQQnpCw5mDsAMIrcRB5mC/+MAffTwgfwKY2KfmCZ6ZIkUShrxXxBX4yYaV8Hzmcn13jUA8CMfDqWYeQcSkhVOl8U6uxH7xekrsg49h8oiCENgC5TUG5vKxxT8f2aRtOtcAKQ1s8soPuOVUIwpchNlEEIOyNSIrrvv3hwnckWIZPZsnbcDyzTpvg3lU8mpZQqozyfK74aj3wAKh1LgrsD5tMxiz/nkGD1sHq/YNFOxkEAcuW7oqmXlisuQOT7VV2jwi/kTgj1RkoZhBje8Z83SCAEEJZW0C3gff8tADCt4VASaWIBK0HI9q8BF5yUAMzIp8tNx5Jg9bB6v/jdDPSRns0BWIZeUitIo9IhHmhXTvzCPQddccnZ76U1V/IvC4SBCFyg26DFNg7c++Mhhb6qiCikT7WVUmr6lYn2nRKyrdZ51GMBlZIc07GUBdMjny6XCiUmpA6j94vMZbgBMFo552pu27PXAqXTyAUQcitOQjAm9xX0N9pIwIPmSCmH5QuPqER0L4kDYgp9zOUL6fYxkbZcFceyAreAF3GlV+NRDwAz8uksnT3jiILVSmpWNlhMze+k94vMZfgGAPJeHDjpCrgM01Tdry9OzvmYAzAqLVWIwEShwzbRwwSEn+MqP6bQK5tZlWyhjCCCsC19Xv7gOnBRbgp7cu/5AOyVjqVMmA75dJZ9nHF0yohWNlhMxKnS+0XmMtwAmFq4imnYbrEqNJPc+9kfd62RKh0On8qV9hXZ9askEPgAfI56ziocUgVbzGT28lEtRMoKtg7lBHtznfZNA+CQ+XQWM8k4uglWK/NLYKzS+8U9GReXD0g/Tyvh4Ne17Yb4Zbr6g6y7/aNWcoPpjKRTsJIags5IJwkEAv6en05S6GUBfRWsUExZyVZVQCQwrgN7Wfdd41GPBczIp8ODeXfTSbBa6YYxlY8/p3q/udc3C+jTbtvqt2oadnB2m4oNgMn0W0p+hYWHWbwg9yU/0Kb9EIy+5y2hiCit4UgKyTeAkN8Valk4Le/ldlONRz4AWWBRM6fdIPfHstw/G+SE5rMnVQ/kA5AkLHS0ak7V7reXfhgACaBqDtD3e/nmc5k9kA/A80JReq+U38zGVp3ObJo/BvAOD3dtwiWar9zEHsgHIGlFubqSx7+Jja36anLLcDvvgwA+NDpDfILv+qlzuXwAXuSjrkKemlO2e3U1uWUYnL8dwB/5e2apca9LNv+vsQfyAUheX4VguB+mzIsaG9ntqxhF4Xbe3QD+n7/uHLAW9wQ1tblMRQ/UA0CaHC7plXEh+q4T0OWcfhleYTSHBK0EH/mi+fcRuKQn4I6fWpeoB4AevCz3HOOm9yb3F5mBlZBNclYCj1aRfyfrbgPCTR6AzK+vD4CyglX7jpmN7HY66d1E0ctdIrEEE4wEIMlam+Pk7YF6AMj7EwAVbU82vTerCwhAXopJN9zVI+AYrOeULLZgErY2x8nZA/kAJGWr0naUWdFpy2cT+oCWjpdjLFxE5UzYIBBpEUX5nLnlvAktb76SPVAfAOUHpiAMm96bsVtCAMaKALICMyxDq6cXfycA+b/mOLl6oF4AiqBRIEzBp7/X2Af0+fi1XIioMIlAI+AIPIGPmeROWV3j1Zuvyu2B+gHoFfZiDS2lC0LiY52WUADkQoTTMH1BFSYRdHoRfKSu5v9qrizMHYPT+vx6ARhSuDcAzzmDo5ZGHT1PAKYMwQxME2jiSo/gEwBrrq+u41ZOy++oD4BaCcsXTPiSI3ey8s4KGoG8QwCMFM+0ggQhLR0BF19SXuD/ayakz7uR0/TsMcxg3SjfqWNA0hsrga/ojaq/8WPcC+YIk4Ke4CMSuB2XVht1Oj8zIfXlU8BtU8DhmYRXWdfrdF1fgr3+S8At48CD04DVjXQSDO70PTUnaJ5uOCwsIIFHSSFy1pKPWCDsZxCpw8UVgKSPxLXM937OzxxAljzcPAbcswU4Qh4V3UN8mKoeKm/bu78IfKJQa8VD48CylHQiL3O3/qg5Rf30BKACMtJXjXKQcfBSK8Dfqc3KVCwuN2VFGRnm/yKZtq4Re5ifyQQgM2A+BeB3GHaZBo5MAIue0l7Kt3cC4xhw+5eL7TuCkJk1jBtyerbUfYG5ExjZ/pqrxE5fAOrOq5SmowVIrRp1IyT2R6+fg0bgVYG4CsyZe2UsaiOGKXr4Sfp9k8CxCYAFSKyvXeY1o1BxQux91yMtfsHPutgnnyUuUvhc0ZsgUXib+nVkq6+ZKaABIHsgVZnuwD9sVo66rrR4ImdhLGSQ8zPL/JgBQxeU1ouWkO9PTgDzbgmXxrzMkatl3keivfG5x4r4IRcz5BfkO5vEZ0kgpIfBZ8yKjlL17syy0tMNcOn9dl4Fy6dLFabj1Mpvow9Ify+I4Nlo9Xt+ZqU9VdJpqZh4QDDyxUyYOYJwHDg+DhgI/WUVZl7aSEt93+GO9Ia2iuZKOfA7lhp9JpvAVy61w2mOwO5hmCgMHC1H9O24gu6UD9jP+ZmbtLRaSsei9SL4XDPbAEh/kGQ/pSUcc0lbApFWb67lQUhpVnLBsoKqqZclFMmUtrxPcwxl3X7vOCAtYLSCcugFQmqhdssH7HU+RznjiOlYXA8wqkOfkItTAom+oKygca4ES8jY+N3z7fSG4hfUtp3ihUHruVSsFy1iRvNP+1N7A5BdJACmVpAgZPhGOyCigEjlPLudn7kvFtOxuB4g6OjD8UWLRkCZFRwrLCEXJQQhp2K+37lQeBCRX1A7KPQto1prFEmSYn2mB9EAsO+kYfk8KQhZF8yjVz5gp/MztyOUjiW9bCUhEBhKRCCgSis45uQ/PhX/xfFWMgOnWu2gxB0TF/o0kEZ/kCDM1Ts+3RHYnwVUL6XhDFrAswfIB6w6P1MrTulY0sum1VICglKwCEACqvQFCUK3gHcsFQCM/ILayqP1k9JshVqrncMalOYYvgcGAyCvIwuod8YBJQmZpmGJeyRwkGw4n8jJOJQNw3idLFhMRNB0SgASTJyKoy/4ieXCeFfJBUeV2SoAclFyR0bbm1OHTUiN0/DTAwD7zQeM52dqj8VsGEkVE2jKetG7AEhQ0frJAv6RC0trC1skl+IWlNinGLbSaZg7Mc0xfA8MbgF1LQV1z08A2G8+oM7PVF9Ms2GUE0gQyp+Lwu2yagLgR9ZaYpkSypQ6a6Q2DCqzpkvietXIFdoZfuieGmcOD0DeP0HEbBhNwYPmA/L8zJQsATAKnguEqS+XTqkE4YfWWwCUFZTksYAYwZfIBeN9Tw0cjOwu8gDIZqsoSSvhEeQDiiGYFoyWiSDRypWgi69UP5sc5fIcquSCNeXqe2X9ZAHfM7Khe2pcOB+AT41+aO5iRD3QAHBEHd9ctuiBBoANEkbaAw0AR9r9zcUbADYYGGkPNAAcafc3F28A2GBgpD3QAHCk3d9cvAFgg4GR9kADwJF2f3PxBoANBkbaAw0AR9r9zcUbADYYGGkPNAAcafc3F28A2GBgpD3QAHCk3d9cfOxqYJ2au9RdPtdp/khoEOlglDYT39V1PzQFXLsMXAlgt9PCxJKPbufyf8/KHIPfBPAZABf79Xc5XQ0ZQ1Q7360NbxoHrlsDvs5ZRsgo0une06by6X1mZvtP99PNAp4F4LsBXA5gjw8EGTeqaGF4QhzQF80CX7cAvGIdeDYAfhdZ2sTKUcVrpE7nd31N5gj8e2dIo2osk7NZpMdK0Z19tv+bJ4F9K8D1ACj8yfNSikHeg+5Z969m57Y/8/ZP+dPLKZhP/rcA+AYAF7g1oRUhEMUzFMt6eSJfX78b2DkPfM0i8GIAX+uWlAMppreUUErn8p2gzTl+2flg/sDbTkvIOik+CP20//mzwAXzwDcCuNTPJeFXpEpM6QEjIHm/zTF8D7T5gATYNQCe69aAloRTGulfBESBSYNyxR5g/Bhw7hKwZwl4vk9LnM5JmsBzUyDGAX3B8G23Mz/g9BuUa/0IiutfMkj7zwKmngAuXSvOpUvAWYBtF4BTnspIj/O8zPaf7qdvWITw6eZA0JLQEhKEGgxZhUj/dz3NzSKwbR44exnYvVKcy+mM5Km0JhxInUtrGkmzCPicg3W5LMGkQiZZTm9xS9Z3+4m2o8C5c4X15pTKW2Lb+fCx7WLtjYxzqiql29Icw/dA5SqYf6RTTilg+lYCIXmICKQ4IK9wxfSJY8AZK8CuFWDnanEua9ZTAMsaCog3Dt92O/MvnRGBtGwkqKRmMEkqCaa+2k+0LQDTh4rP88UHj74kF1WaATo9QHQ7mmP4HugYhtEKj4PB6ZQ+FS0hQahpldPya1kXTOqNY8DscgG+HavAttUCvBxInitrkgL4lcO33c7spBdM3kAuSnq2nx9gQfAh4JyVwvrxwel2z3p4aMlzH6DM2z/lT+8aB+Q/OT4EEqckWQSBkGD6EQKQnDCLwBSnYgcf32fXioGUFawC4esyu7CXXnDP9tOCsyD4KLB1rmgvX7zfbu2WG/Jtme0/3U/vKxBNAMoi0KcjkATCN3HOEr3UAjDrwOP71rXixYEkeKMFlSX8ocwR6KUXTJ7AaNE2tF8WfA4Ye7Kw1mwvX/yZn+eKnvcrfzC6IK/ObP/pfnpfAGQnySoISBqUXyAASS1AK0JfagWYcRDOrAF66TxZQU7jBOEbM0egH71gcgXSFZAV54NQtj9YcNIpbONCyh8Ygi8CVospApDuB63g92W2/3Q/vW8AsqM4gLIKBBIH8bcJwMCNMX68BTqBb8s6sGWtsIA6jwDk662ZI9CvXjA5A6NVa2t/IAicnC/aGV+8T74IQPm/AmGuBc+8/VP+9IEAyLslAKMV/LgAyIUInfnjwPQqMOOgI/DstQ5Mr7UAqMF8V2YXDqoXXNl+EQQ6N9v29aKdesUpWJZbAPyPme0/3U8fGIDssDid/pUASCvCaXgJmFguAEfgEXT27gDkuwaUg/nbmSMwjF7whvbLhSDL5TwwvdRqo9oqHzACkCB8U2b7T/fThwIgO01T1IMCoAZxGRhbKoAXQUcQTjkI+a4B5e5FzjGsXvCG9gdqrLGFYrpVG/UuHzBOw2/LaXxzbh43DKeoJwlAHqLndSs4udoCoIBHQE45EPk3DuitmYOQoxdctp8+rFwIWsGFYiFFoLGNchcEQC6e+OJC5J2Z7T/dTx/aApYdJ37AyJK/DIwvFxYvWr0IwEn/H1Opco5sveDUhSAAF4HJpQJkWixp6k2n4IYfMGf0amDHev2I8+l4/UbvNw8Eozw72wJePOJ8und7EkKj9ztKGA1/7WwATo44n45pWI3e7/AAGPWZ2QBkYHCU+XTMfGGQmYIxjd7vqOE0+PXzATjifDrKtTZ6v4MP/MlyRj4AR5xPF+VaqZLJF1UzKdPV6P2eLDDr3I58AI44n07ZMARbo/d78gMubWE+AEecT8e9YOn2Uheu0fs9tUCYD8AR59MpG6bR+z21gKfW1gNAz4geRT5dTEZo9H5PPRDmAzBmRM8BJzqfLiYjSKKr0fs9dYBYDwBHmE9XtRfMsIz04aQZ1+j9npygrA+Akqs8wfl0BCCTWRq935MTYL1aVQ8Ao1zlAnAi8+kEQGZTNXq/vYb75Pt/fQAcUT5dBGCj93vyAaxXi+oDoFLyT3A+3Rcavd9eY3xS/z8fgCQX/LPR3SOzkon55jg1eyAfgD8M4NcAPD6aDmBtB1e4NMDNcer1QD4AbwbwxwDe4UvRE9wHZG1gNSXDLlwLNcep1QP5APxzzwj9IIAPnXhT5ORc5EYCA9HNcWr1QD4AmRH6FQBMTSZZH98ZmD5Bh5g1FopiNns1x6nTA/kAvAfAEwDudnI+EvQxPfkEzYfaCXRSBluQMB7YHKdGD+QDsBNBH/9+AkAobqTADGK7Inw1x8nfA/kA7EXQt8kgrGAGMfBxZ5Cv5ji5eyAfgL0I+r68uR0QmUFoBQU8vfNvzXHy9kA9AORoMw7CdGQCjoUZDwL4kv/+8OZ1gJhBIjGDgMh3vTavBc035/RAPgD7JegjODfhiMwgoqeJwNPPTaB6Ezq/hq+sB4AcXeXEP+ZhGVo9vRimIQD5v5oPAZCupgDI9wg8/qz/1Xz55usyeyAfgMMQ9GU2Op4eAchpOIJQQEz/VuPlm6/K7IH6AMjgGzdl6QtyX5jWjpQFevF3lq3xf6yhrOlIAUgQCojR8gmE+l9Nl2++JrMH6gEgR5UA5KYsc+AZmCbQCDi+IvgEQMob1XBEAHIajgBMLV+0kCdws6aGu3zqfkV9AGTwjftg3JRVVRAtHQEXX/wbAcoXP5d5CID8GoJKvqDAloKOoIz/y7x8c3pmD4zhaqwjRzCYyQg5gr2ZgsFTLweWr8XQgsXjbwLWrnNtMlKgNoLBmZAa7PTCAuYIBlMvlWQswwr2UlUw45jdDSx8HbD+Ctd+HVCwePKbgJV9aASDM8Yg59TWFDysYPBtmYK91IbNOHaPA/M7gUXKXA4hWDz79cA8+W0aweCMURj+1HYfcBjBYO54MMY3tGDv8I3nmWSHOzYOLJ0LLPGXAQWLz3oB8MQUsEa16kYwOG8whjh74yJkUMFgbsNlCfYO0epwissVY34bsHw2sEIRkAEEi/dcU0SP5qhF1ggG5w3GEGdXr4L5134Fg4kAjuDQgr1DtDqcUmZETwArZwAru4BVqsv0KVh8/o3F4v0QXZBGMDhvMIY4u3MYhv95Zh+Cu1xBcxuOU/HfeDIq5cv7FuwdotXhlCBXjOXZAnyrO4BV6in0IVh8wStLuWCsUAyvEQzOG5ABz+4eB+R/ewnu/kOP/3G/l4kJTERlljQtIot2e53/IwO2OPl4FLtcnCqAp9cahT56CBZf+LpSLhhz1N5qBIPzBmTAs/sLRHcTDKbiNHdBGGymOC/3hglEvgjAnoK9A7Y4+XgiV4zVWYDAs/etxaubYPFFP1QkLtCIP8neaASD8wZkwLP7AyC/tJNg8L/xLNBu+YBdBXsHbHEFAINcMVamgdWZAoRrfPdXm8KitLdmgYveWAq+2y7iMqfuRjA4b1AGOLt/APJLqwSD3+y5T1yI0AoSbAxMMzGV1o8/My2ro2DvAK2t+GgiV4zj4+3AIwDXtwBrVJeuECze+9aW4Dut4PxkIhYsdetGMDhvoDqcPRgA+SWp4O4veQ5Uv/mAGwR78+6rQq4Yq9PAOi2fA4/vBkKudKVU7VZw77uKvWFuZbtcMNb5v0YwOG9g+jx7cADyi6Pg7gccgIxlcA5TKhaD01yYKBmVFpBZMfx/m2Bvny3t8LGqoqTliZbVI+gMgHwnMAnCIFi897cLAAZ6QyzFzzSCwXkD1OPs4QDIL5XgLmk5JHk/SD5gKdibd38VcsVYGmuBTaAzEHLHgyCcaokB7/1IkUET5IKxwF5pBIPzBqbPs4cHIC/AaeqvPL9pmHxAE+zts6VdLCD/lcgVY3UyWD0Bj1ZwqgCggXA7sPfWAoAJvaEtZBrB4Lyx6efsPADyCtmCvf00s/NnOsgVY3m8BTRZPZuGBUACdArY+5lWDqGmYbIrLHEx0ggG5w1OH2fnA7CPizQfaXqgUw80AGywMdIeaAA40u5vLt4AsMHASHugAeBIu7+5eAPABgMj7YEGgCPt/ubiDQAbDIy0BxoAjrT7m4s3AGwwMNIeaAA40u5vLt4AsMHASHugAeBIu7+5eAPABgMj7YEGgCPt/ubiDQAbDIy0B8ZYNMbkX+ZekpuIiOQrPar+xs889HJg6jZg5jAwvVZ8B+ll9PlO5/Fc/o+ECjnHfi8zYfkvM5ulmp4qJXVqx5deD4zfAkw/CGxdAZgoHfuh131QkaI5hu8Bs4Ds8B0AWLnIRGCBsFfn87JffDMwdjOw5R5g8giwZa34jnQQUwDo99wBfJ4TM7COiNdlaj2rA/jeV/vfDeATAP4UGH8I2Lrc6gc+SHqY4oMZ74VSKM0xfA+UUzB/oBUUCKMl6zSQ/PsXqZD5KQC/A0w/DEwcAcYXgYnVwppwADuBkefnCim90FmBWXwnK87Uen53BI8sbuwqaz9p5UgnQhBS+ZN1zE8Ak0utviCwq8DI8/nx5hi+Bzb4gJzKZE1SEFZZgS9/2pWR/gTAJ4HJQ8DEMWB8ARhfBsaWCwDquwQKvvNgHXvOcYVbPFJPkw+dDxC/W1Y4tWDpw/Rlgo4lo1T4/KxTihDNpJwj3/UiMLXemprjffC7eWpzDN8DlYsQDiKtVxzEqoHkyX9HRizW+nIgaQnvAiaeBCbmC0s4tgSMu2rMePAR9X252jXklaTFU108K0MHav/nvJ6ZxVVk9OI7GR2IZoGQNc/HgbHgIwqILIVujuF7oOMqWFawCoRxkfEIB5CWgkREBCNf9wMTc8A4QciBWyoGz16rwNgaML5eWKpctYZL3N+TWLX0gvtuP0HHk2n16JDyxXmVhfU0qywbJbr5GSuXKxA/sV5Y9UYWdnjwyS3qKKgarWA69Wg6fjQOIK0HadnIjPVFB+AiME4AuiUkCFnESyCSkmAuU7Cjm15wX+2X2ifBRn9A8mKcW2UFjULVQcgVDl80u40SYh763FfvquhLCxitoBYUsoJfjXKttByMq9CKcHn4sPuCbgXNJwyWkECcz5Q376UX3LNncZyQAAADEklEQVT9fFgIJs6lBBwtn3Tt6FpIz4RWnuQxPh2XIGzm4CwQ9hWIFgBTK0gQHiIAJddKq0ELQh+KL1qUR4MvSEsoENIKrgALHNiMox+94K7tl9qnnMio8MSf6SNwGpYVjCDk/Ju7isq496fCqX0BkDeqlWwKwic1gAQSpzGREnFgREz01eALLvvq2Kfi45m6cf3qBXdsfxRbJMho8dimqOhEK8cXQRr9QVpvPoDNMXQP9A3ACELFxPh+jACkP0fLIKFCCRRqKuPUdqjlC9o07JZwKVNHeBC94DQcZO0XAAkmgotAk9QYrR9f/BvByYfMSATDVMzwTXMM3QMDAVAgVHCZ7/MaQK4QZUHiNCbBQlqUw74YCb7gcmYkelC9YFlwvVv7RRAorTuBkECU9asCID9/x9B935zYzyKkqpfiNHxcA0gLQgvBAaPVkCqm3h2AtC5m/RyEqzw/4xhGL3hD++MmslgqCbgUfLKAcRrmTlBzDN0DA1tAXUlWcDm1IOIIJAjlT/Fd05lbFQFwjdtgGcewesFt7Rc/Gx8iWjUCjGCT1YvWT1MwgUqrf3NG45tTbcu0aximWx9xENcEQHGbcYAEwtSXSqY0gnCdgeuMI0cvuGx/FUGgFhwEYrR80QckWN+X0fjm1DwAWv8RgJFilJZBznz0pQg+AZAAlVWh1GvGka0XzB0cCQi30aSGVa9AF62fLOB7MhrfnJoPwPER59Px+o3e76mL5Kwp2G57xPl0kxc3er+nLvyKtLmhfUC78RHn081ONnq/pzcAR5xPR9mRRu/31IVgvgUccT4dNaobvd/TGYAjzqejumqj93s6A3DE+XRUg2VSCjdaGr3fUw+I+VPwiPPpqJjO8J1Nw43e7ymHwHoAKMFd7QErAeEE5NNJMb3R+z3lsGcNzgfgiPPpomJ6o/d76oGwPgCOKJ8uKqY3er+nKwBHmE+noqRG7/fUA199U/AI8+kEwEbv93QHoEhZTnA+nYqSGr3fBoAtaiqBUImdm5hPJwA2er+nKwBHnE+X1gUzSbnR+z11wPj/AeCpPDD3t7rvAAAAAElFTkSuQmCC",shader_default71="uniform sampler2D weightMap;varying vec2 vOffset0;varying vec2 vOffset1;void movec(const in bvec2 c,inout vec2 variable,const in vec2 value){if(c.x){variable.x=value.x;}if(c.y){variable.y=value.y;}}void movec(const in bvec4 c,inout vec4 variable,const in vec4 value){movec(c.xy,variable.xy,value.xy);movec(c.zw,variable.zw,value.zw);}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 a;a.x=texture2D(weightMap,vOffset0).a;a.y=texture2D(weightMap,vOffset1).g;a.wz=texture2D(weightMap,uv).rb;vec4 color=inputColor;if(dot(a,vec4(1.0))>=1e-5){bool h=max(a.x,a.z)>max(a.y,a.w);vec4 blendingOffset=vec4(0.0,a.y,0.0,a.w);vec2 blendingWeight=a.yw;movec(bvec4(h),blendingOffset,vec4(a.x,0.0,a.z,0.0));movec(bvec2(h),blendingWeight,a.xz);blendingWeight/=dot(blendingWeight,vec2(1.0));vec4 blendingCoord=blendingOffset*vec4(texelSize,-texelSize)+uv.xyxy;color=blendingWeight.x*texture2D(inputBuffer,blendingCoord.xy);color+=blendingWeight.y*texture2D(inputBuffer,blendingCoord.zw);}outputColor=color;}",shader_default72="varying vec2 vOffset0;varying vec2 vOffset1;void mainSupport(const in vec2 uv){vOffset0=uv+texelSize*vec2(1.0,0.0);vOffset1=uv+texelSize*vec2(0.0,1.0);}",SMAAEffect=class extends Effect{constructor(e,t,n=SMAAPreset.HIGH,r=EdgeDetectionMode.COLOR){super("SMAAEffect",shader_default71,{vertexShader:shader_default72,blendFunction:BlendFunction.NORMAL,attributes:EffectAttribute.CONVOLUTION|EffectAttribute.DEPTH,uniforms:new Map([["weightMap",new THREE.Uniform(null)]])}),this.renderTargetEdges=new THREE.WebGLRenderTarget(1,1,{minFilter:THREE.LinearFilter,stencilBuffer:!1,depthBuffer:!1,format:THREE.RGBFormat}),this.renderTargetEdges.texture.name="SMAA.Edges",this.renderTargetWeights=this.renderTargetEdges.clone(),this.renderTargetWeights.texture.name="SMAA.Weights",this.renderTargetWeights.texture.format=THREE.RGBAFormat,this.uniforms.get("weightMap").value=this.renderTargetWeights.texture,this.clearPass=new ClearPass(!0,!1,!1),this.clearPass.overrideClearColor=new THREE.Color(0),this.clearPass.overrideClearAlpha=1,this.edgeDetectionPass=new ShaderPass(new EdgeDetectionMaterial(new THREE.Vector2,r)),this.weightsPass=new ShaderPass(new SMAAWeightsMaterial);const i=new THREE.Texture(e);i.name="SMAA.Search",i.magFilter=THREE.NearestFilter,i.minFilter=THREE.NearestFilter,i.format=THREE.RGBAFormat,i.generateMipmaps=!1,i.needsUpdate=!0,i.flipY=!0;const o=new THREE.Texture(t);o.name="SMAA.Area",o.minFilter=THREE.LinearFilter,o.format=THREE.RGBAFormat,o.generateMipmaps=!1,o.needsUpdate=!0,o.flipY=!1;const a=this.weightsPass.getFullscreenMaterial();a.uniforms.searchTexture.value=i,a.uniforms.areaTexture.value=o,this.applyPreset(n)}get edgeDetectionMaterial(){return this.edgeDetectionPass.getFullscreenMaterial()}get colorEdgesMaterial(){return this.edgeDetectionMaterial}get weightsMaterial(){return this.weightsPass.getFullscreenMaterial()}setEdgeDetectionThreshold(e){this.edgeDetectionPass.getFullscreenMaterial().setEdgeDetectionThreshold(e)}setOrthogonalSearchSteps(e){this.weightsPass.getFullscreenMaterial().setOrthogonalSearchSteps(e)}applyPreset(e){const t=this.edgeDetectionMaterial,n=this.weightsMaterial;switch(e){case SMAAPreset.LOW:t.setEdgeDetectionThreshold(.15),n.setOrthogonalSearchSteps(4),n.diagonalDetection=!1,n.cornerRounding=!1;break;case SMAAPreset.MEDIUM:t.setEdgeDetectionThreshold(.1),n.setOrthogonalSearchSteps(8),n.diagonalDetection=!1,n.cornerRounding=!1;break;case SMAAPreset.HIGH:t.setEdgeDetectionThreshold(.1),n.setOrthogonalSearchSteps(16),n.setDiagonalSearchSteps(8),n.setCornerRounding(25),n.diagonalDetection=!0,n.cornerRounding=!0;break;case SMAAPreset.ULTRA:t.setEdgeDetectionThreshold(.05),n.setOrthogonalSearchSteps(32),n.setDiagonalSearchSteps(16),n.setCornerRounding(25),n.diagonalDetection=!0,n.cornerRounding=!0}}setDepthTexture(e,t=THREE.BasicDepthPacking){const n=this.edgeDetectionMaterial;n.uniforms.depthBuffer.value=e,n.depthPacking=t}update(e,t,n){this.clearPass.render(e,this.renderTargetEdges),this.edgeDetectionPass.render(e,t,this.renderTargetEdges),this.weightsPass.render(e,this.renderTargetEdges,this.renderTargetWeights)}setSize(e,t){const n=this.edgeDetectionPass.getFullscreenMaterial(),r=this.weightsPass.getFullscreenMaterial();this.renderTargetEdges.setSize(e,t),this.renderTargetWeights.setSize(e,t),r.uniforms.resolution.value.set(e,t),r.uniforms.texelSize.value.set(1/e,1/t),n.uniforms.texelSize.value.copy(r.uniforms.texelSize.value)}dispose(){const e=this.weightsPass.getFullscreenMaterial().uniforms;e.searchTexture.value.dispose(),e.areaTexture.value.dispose(),super.dispose()}static get searchImageDataURL(){return searchImageDataURL_default}static get areaImageDataURL(){return areaImageDataURL_default}},SMAAPreset={LOW:0,MEDIUM:1,HIGH:2,ULTRA:3},shader_default77="uniform float offset;uniform float darkness;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){const vec2 center=vec2(0.5);vec3 color=inputColor.rgb;\n#ifdef ESKIL\nvec2 coord=(uv-center)*vec2(offset);color=mix(color,vec3(1.0-darkness),dot(coord,coord));\n#else\nfloat d=distance(uv,center);color*=smoothstep(0.8,offset*0.799,d*(darkness+offset));\n#endif\noutputColor=vec4(color,inputColor.a);}",VignetteEffect=class extends Effect{constructor(e={}){const t=Object.assign({blendFunction:BlendFunction.NORMAL,eskil:!1,offset:.5,darkness:.5},e);super("VignetteEffect",shader_default77,{blendFunction:t.blendFunction,uniforms:new Map([["offset",new THREE.Uniform(t.offset)],["darkness",new THREE.Uniform(t.darkness)]])}),this.eskil=t.eskil}get eskil(){return this.defines.has("ESKIL")}set eskil(e){this.eskil!==e&&(e?this.defines.set("ESKIL","1"):this.defines.delete("ESKIL"),this.setChanged())}},SMAAImageLoader=class extends THREE.Loader{load(e=(()=>{}),t=null){4===arguments.length?(e=arguments[1],t=arguments[3]):3!==arguments.length&&"function"==typeof arguments[0]||(e=arguments[1],t=null);const n=this.manager,r=new THREE.LoadingManager;return new Promise((i,o)=>{const a=new Image,s=new Image;r.onError=e=>{n.itemError(e),null!==t?(t("Failed to load "+e),i()):o("Failed to load "+e)},r.onLoad=()=>{const t=[a,s];e(t),i(t)},a.addEventListener("error",e=>{r.itemError("smaa-search")}),s.addEventListener("error",e=>{r.itemError("smaa-area")}),a.addEventListener("load",()=>{n.itemEnd("smaa-search"),r.itemEnd("smaa-search")}),s.addEventListener("load",()=>{n.itemEnd("smaa-area"),r.itemEnd("smaa-area")}),n.itemStart("smaa-search"),n.itemStart("smaa-area"),r.itemStart("smaa-search"),r.itemStart("smaa-area"),a.src=searchImageDataURL_default,s.src=areaImageDataURL_default})}},TinyState=function(){function e(){this.subscriptions=[]}return e.prototype.subscribe=function(e){var t=this;return this.subscriptions.push(e),function(){return t.unsubscribe(e)}},e.prototype.unsubscribe=function(e){this.subscriptions=this.subscriptions.filter((function(t){return t!==e}))},e.prototype.onChange=function(){var e=this;this.subscriptions.forEach((function(t){"function"==typeof t&&t(e)}))},e.prototype.setState=function(e){var t=this;Object.keys(e).forEach((function(n){t[n]=e[n]})),this.onChange()},e}(),Effect$1=function(e){function t(t,n){var r=e.call(this)||this;return r.enabled=!1,r.effect=new t(n),Object.defineProperty(r,"opacity",{enumerable:!0,set:function(e){this.effect.blendMode.opacity.value=e},get:function(){return this.effect.blendMode.opacity.value}}),Object.defineProperty(r,"blendFunction",{enumerable:!0,set:function(e){this.effect.blendMode.setBlendFunction(Number(e))},get:function(){return this.effect.blendMode.blendFunction}}),r.blendFunction=BlendFunction.NORMAL,r}return __extends(t,e),t.prototype.toJSON=function(){var e,t,n=__assign({},this),r=Object.getPrototypeOf(this),i=Object.getOwnPropertyNames(r);try{for(var o=__values(i),a=o.next();!a.done;a=o.next()){var s=a.value,c=Object.getOwnPropertyDescriptor(r,s);c&&"function"==typeof c.get&&(n[s]=this[s])}}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return["constructor","effect","subscriptions"].forEach((function(e){return delete n[e]})),n},t.prototype.fromJSON=function(e){this.setState(e)},t}(TinyState),Bloom=function(e){function t(){var t=e.call(this,BloomEffect)||this;return t.blendFunction=BlendFunction.SCREEN,t}return __extends(t,e),Object.defineProperty(t.prototype,"intensity",{get:function(){return this.effect.intensity},set:function(e){this.effect.intensity=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"luminanceThreshold",{get:function(){return this.effect.luminanceMaterial.threshold},set:function(e){this.effect.luminanceMaterial.threshold=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"luminanceSmoothing",{get:function(){return this.effect.luminanceMaterial.smoothing},set:function(e){this.effect.luminanceMaterial.smoothing=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blurScale",{get:function(){return this.effect.blurPass.scale},set:function(e){this.effect.blurPass.scale=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"kernelSize",{get:function(){return this.effect.blurPass.kernelSize},set:function(e){this.effect.blurPass.kernelSize=e},enumerable:!1,configurable:!0}),t}(Effect$1),BrightnessContrast=function(e){function t(){return e.call(this,BrightnessContrastEffect)||this}return __extends(t,e),Object.defineProperty(t.prototype,"contrast",{get:function(){return this.effect.uniforms.get("contrast").value},set:function(e){this.effect.uniforms.get("contrast").value=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"brightness",{get:function(){return this.effect.uniforms.get("brightness").value},set:function(e){this.effect.uniforms.get("brightness").value=e},enumerable:!1,configurable:!0}),t}(Effect$1),ChromaticAberration=function(e){function t(){var t=e.call(this,ChromaticAberrationEffect)||this;return t.effect.offset=new THREE.Vector2(.01,.01),t}return __extends(t,e),Object.defineProperty(t.prototype,"offset",{get:function(){return[1e3*this.effect.offset.x,1e3*this.effect.offset.y]},set:function(e){this.effect.offset.set(e[0]/1e3,e[1]/1e3)},enumerable:!1,configurable:!0}),t}(Effect$1),ColorAverage=function(e){function t(){return e.call(this,ColorAverageEffect)||this}return __extends(t,e),t}(Effect$1),HueSaturation=function(e){function t(){var t=e.call(this,HueSaturationEffect)||this;return t._hue=0,t}return __extends(t,e),Object.defineProperty(t.prototype,"hue",{get:function(){return this._hue},set:function(e){this._hue=e,this.effect.setHue(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"saturation",{get:function(){return this.effect.uniforms.get("saturation").value},set:function(e){this.effect.uniforms.get("saturation").value=e},enumerable:!1,configurable:!0}),t}(Effect$1),Noise=function(e){function t(){var t=e.call(this,NoiseEffect)||this;return t.blendFunction=BlendFunction.OVERLAY,t}return __extends(t,e),t}(Effect$1),Vignette=function(e){function t(){return e.call(this,VignetteEffect)||this}return __extends(t,e),Object.defineProperty(t.prototype,"eskil",{get:function(){return this.effect.eskil},set:function(e){this.effect.eskil=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"darkness",{get:function(){return this.effect.uniforms.get("darkness").value},set:function(e){this.effect.uniforms.get("darkness").value=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"offset",{get:function(){return this.effect.uniforms.get("offset").value},set:function(e){this.effect.uniforms.get("offset").value=e},enumerable:!1,configurable:!0}),t}(Effect$1),Bloom$1=function(e){function t(t){return e.call(this,DepthOfFieldEffect,t)||this}return __extends(t,e),Object.defineProperty(t.prototype,"focalLength",{get:function(){return this.effect.circleOfConfusionMaterial.uniforms.focalLength.value},set:function(e){this.effect.circleOfConfusionMaterial.uniforms.focalLength.value=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"focusDistance",{get:function(){return this.effect.circleOfConfusionMaterial.uniforms.focusDistance.value},set:function(e){this.effect.circleOfConfusionMaterial.uniforms.focusDistance.value=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bokehScale",{get:function(){return this.effect.bokehScale},set:function(e){this.effect.bokehScale=e},enumerable:!1,configurable:!0}),t}(Effect$1),Vignette$1=function(e){function t(){return e.call(this,PixelationEffect)||this}return __extends(t,e),Object.defineProperty(t.prototype,"granularity",{get:function(){return this.effect.getGranularity()},set:function(e){this.effect.setGranularity(e)},enumerable:!1,configurable:!0}),t}(Effect$1);function removeDisabledLayers(e,t){return t&&t.enabled&&e.push(t.effect),e}var Post=function(e){function t(){var t=e.call(this)||this;return t.effects=new Map,t.loadingManager=new THREE.LoadingManager,t.smaaImageLoader=new SMAAImageLoader(t.loadingManager),t.renderPass=new RenderPass,t.depthPass=new DepthPass,t.clock=new THREE.Clock,t.enabled=!1,t.debug=!1,t.effects.set("bloom",new Bloom),t.effects.set("chromaticAberration",new ChromaticAberration),t.effects.set("vignette",new Vignette),t.effects.set("noise",new Noise),t.effects.set("colorAverage",new ColorAverage),t.effects.set("hueSaturation",new HueSaturation),t.effects.set("brightnessContrast",new BrightnessContrast),t.effects.set("depthOfField",new Bloom$1),t.effects.set("pixelation",new Vignette$1),t}return __extends(t,e),t.prototype.reinit=function(){if(this.effectComposer=new EffectComposer(this.renderer),this.renderPass=new RenderPass(this.scene,this.camera),this.enabled){var e=new SMAAEffect(this.search,this.area,SMAAPreset.ULTRA,EdgeDetectionMode.COLOR);e.edgeDetectionMaterial.setPredicationMode(PredicationMode.DEPTH),e.edgeDetectionMaterial.setEdgeDetectionThreshold(.05),e.edgeDetectionMaterial.setPredicationThreshold(.002),e.edgeDetectionMaterial.setPredicationScale(1),this.depthPass=new DepthPass(this.scene,this.camera),this.effectComposer.addPass(this.renderPass),this.effectComposer.addPass(this.depthPass),this.effectComposer.addPass(new EffectPass(this.camera,e));var t=[this.effects.get("chromaticAberration"),this.effects.get("bloom"),this.effects.get("colorAverage"),this.effects.get("hueSaturation"),this.effects.get("brightnessContrast"),this.effects.get("vignette"),this.effects.get("noise")].reduce(removeDisabledLayers,[]),n=[this.effects.get("pixelation")].reduce(removeDisabledLayers,[]);n.length>0&&this.effectComposer.addPass(new(EffectPass.bind.apply(EffectPass,__spread([void 0,this.camera],n)))),this.effectComposer.addPass(new(EffectPass.bind.apply(EffectPass,__spread([void 0,this.camera],t))))}else this.effectComposer.addPass(this.renderPass)},t.prototype.init=function(e){var t=this,n=e.renderer,r=e.camera,i=e.scene;this.renderer=n,this.scene=i,this.camera=r,this.smaaImageLoader.load((function(e){var n=__read(e,2),r=n[0],i=n[1];t.search=r,t.area=i,t.reinit()}))},t.prototype.fromJSON=function(e){var t=this;e&&(Object.keys(e).forEach((function(n){var r;null===(r=t.effects.get(n))||void 0===r||r.fromJSON(e[n])})),this.setState({enabled:e.enabled}))},t.prototype.toJSON=function(){var e={};return this.effects.forEach((function(t,n){e[n]=t.toJSON()}),e),__assign({enabled:this.enabled},e)},t.prototype.enable=function(){this.setState({enabled:!0})},t.prototype.disable=function(){this.setState({enabled:!1})},t.prototype.toggle=function(){this.enabled?this.disable():this.enable(),this.reinit()},t.prototype.render=function(){var e;null===(e=this.effectComposer)||void 0===e||e.render(this.clock.getDelta())},t}(TinyState),Scene=function(e){function t(){var t=e.call(this)||this;return t.objectType="Scene",t.alpha=1,t.backupFog=new THREE.Fog(16777215,100,1e3),t.fogUseBGColor=!1,t.directionalLightState=!0,t.ambientLightState=!0,t.shadowsState=!0,t.wireframeState=!1,t.canvas={mode:1,fullScreen:!0,size:{width:512,height:512}},t._color=new THREE.Color(1644825),t._enableFog=!1,t.name="Untitled",t}return __extends(t,e),Object.defineProperty(t.prototype,"color",{get:function(){return this._color},set:function(e){!0===this.fogUseBGColor&&this.backupFog.color.copy(e),this._color.copy(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"enableFog",{get:function(){return null!==this.fog},set:function(e){this.fog=!0===e?this.backupFog:null,this._enableFog=e},enumerable:!1,configurable:!0}),t.prototype.init=function(e,t){this.camera=new CombinedCamera(e,t),this.camera.setDefault(),this.camera.orthoCamera.near=-5e4,this.camera.perspCamera.near=50,this.camera.orthoCamera.far=1e5,this.camera.perspCamera.far=1e5,this.camera.updateProjectionMatrix(),this.camera.position.set(0,0,this.camera.targetOffset),this.camera.lookAt(new THREE.Vector3(0,0,-1)),this.add(this.camera),this.ambientLight=new THREE.HemisphereLight(13882323,8553090,.75),this.ambientLight.name="Default Ambient Light",this.add(this.ambientLight),this.directionalLight=new THREE.DirectionalLight(16777215,.75),this.directionalLight.name="Default Directional Light",this.directionalLight.position.set(85e4,13e5,1e6),this.activeCamera=this.camera,this.activeCamera.add(this.directionalLight),this.postprocessing=new Post},t.prototype.initFromObjectLoader=function(e){var t=this;return this.traverse((function(n){n.uuid===e.ambientLight?t.ambientLight=n:n.uuid===e.directionalLight?t.directionalLight=n:(n.uuid===e.activeCamera&&(t.activeCamera=n),n.uuid===e.camera&&(t.camera=n,t.camera.setDefault()))})),this},t.prototype.addDefaultChild=function(){var e=new Mesh2D(RectangleGeometry.create({parameters:{width:320,height:320}}),new BasicMaterial({color:16777215}));return e.position.z=-1,this.add(e),e},t.prototype.raycast=function(e){var t=[],n=function(r){var i,o;try{for(var a=__values(r.children),s=a.next();!s.done;s=a.next()){var c=s.value;isEntity$1(c)&&!c.raycastLock&&c.visible&&((isMeshEntity(c)||isHelperableEntity(c)&&c.enableHelper)&&e.intersectObject(c,!1,t),n(c))}}catch(e){i={error:e}}finally{try{s&&!s.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}};return n(this),t},t.prototype.raycastMesh=function(e){var t=[],n=function(r){var i,o;try{for(var a=__values(r.children),s=a.next();!s.done;s=a.next()){var c=s.value;isEntity$1(c)&&!c.raycastLock&&c.visible&&(isMeshEntity(c)&&e.intersectObject(c,!1,t),n(c))}}catch(e){i={error:e}}finally{try{s&&!s.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}};return n(this),t},t.prototype.traverseEntity=function(e){var t,n;try{for(var r=__values(this.children),i=r.next();!i.done;i=r.next()){var o=i.value;isEntity$1(o)&&this.camera!==o&&o.traverseEntity(e)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}},t.prototype.toJSON=function(t){var n,r,i,o,a,s=e.prototype.toJSON.call(this,t),c=s.object;return c.objectType="Scene",c.activeCamera=null===(n=this.activeCamera)||void 0===n?void 0:n.uuid,c.camera=null===(r=this.camera)||void 0===r?void 0:r.uuid,c.directionalLight=null===(i=this.directionalLight)||void 0===i?void 0:i.uuid,c.ambientLight=null===(o=this.ambientLight)||void 0===o?void 0:o.uuid,c.color=this.color.toArray(),c.alpha=this.alpha,null!==this.background&&"toJSON"in this.background&&(c.background=this.background.toJSON(t)),null!==this.environment&&(c.environment=this.environment.toJSON(t)),null!==this.fog&&(c.fog=this.fog.toJSON()),!0===this.enableFog&&(c.enableFog=!0),!0===this.fogUseBGColor&&(c.fogUseBGColor=!0),!0===this.directionalLightState&&(c.directionalLightState=!0),!0===this.ambientLightState&&(c.ambientLightState=!0),!0===this.wireframeState&&(c.wireframeState=!0),c.canvas={mode:this.canvas.mode,size:{width:this.canvas.size.width,height:this.canvas.size.height}},!0===this.canvas.fullScreen&&(c.canvas.fullScreen=!0),c.postprocessing=null===(a=this.postprocessing)||void 0===a?void 0:a.toJSON(),s},t.prototype.fromJSON=function(t){var n,r,i,o,a,s;return e.prototype.fromJSON.call(this,t),this.postprocessing=new Post,this.color.fromArray(t.color),this.alpha=t.alpha,void 0!==t.background&&Number.isInteger(t.background)&&(t.background=new THREE.Color(t.background)),this.postprocessing.fromJSON(t.postprocessing),void 0!==t.fog&&("Fog"===t.fog.type?this.backupFog=new THREE.Fog(t.fog.color,t.fog.near,t.fog.far):"FogExp2"===t.fog.type&&(this.backupFog=new THREE.FogExp2(t.fog.color,t.fog.density))),this.enableFog=null!==(n=t.enableFog)&&void 0!==n&&n,this.fogUseBGColor=null!==(r=t.fogUseBGColor)&&void 0!==r&&r,this.directionalLightState=null!==(i=t.directionalLightState)&&void 0!==i&&i,this.ambientLightState=null!==(o=t.ambientLightState)&&void 0!==o&&o,this.wireframeState=null!==(a=t.wireframeState)&&void 0!==a&&a,this.canvas.mode=t.canvas.mode,this.canvas.fullScreen=null!==(s=t.canvas.fullScreen)&&void 0!==s&&s,this.canvas.size={width:t.canvas.size.width,height:t.canvas.size.height},this},t}(Object3DMixin(THREE.Scene)),normal=new THREE.Vector3(0,0,1),worldNormal=new THREE.Vector3,coplanarPoint=new THREE.Vector3,normalMatrix=new THREE.Matrix3,VectorObject=function(e){function t(t,n){var r;void 0===t&&(t=VectorGeometry.create({})),void 0===n&&(n=new BasicMaterial({side:THREE.DoubleSide}));var i=e.call(this,t,n)||this;return i.recursiveSelection=!1,i.objectType="VectorObject",i.eventDispatcher=new THREE.EventDispatcher,i._onShapeUpdate=function(){if(i.computeSingleBoundingBox(),i.geometry.computeBoundingSphere(),i.geometry.computeBoundingBox(),i.geometry instanceof VectorSurfaceGeometry){if(i.geometry.updateFromShape()){var e=i.geometry.drawCount,t=i.geometry.userData;i.updateGeometry(Object.assign(i.geometry.userData,{parameters:Object.assign(t.parameters,{surfaceMaxCount:e+1e3})}))}}else i.updateGeometry({})},i.castShadow=!0,i.receiveShadow=!0,i.forceComputeSize=!0,i.shape=t.userData.shape,null===(r=i.shape.eventDispatcher)||void 0===r||r.addEventListener("update",i._onShapeUpdate),i}return __extends(t,e),t.prototype.toJSON=function(t){var n=e.prototype.toJSON.call(this,t);return n.object.objectType="VectorObject",n},t.prototype.setHelperVisibility=function(){},t.prototype.updateGeometry=function(t){if(e.prototype.updateGeometry.call(this,t),"userData"in this.geometry){var n=this.geometry.userData.parameters;this.eventDispatcher.dispatchEvent({type:"geometryUpdate",parameters:n})}},t.prototype.updateWorldMatrix=function(t,n){e.prototype.updateWorldMatrix.call(this,t,n),normalMatrix.getNormalMatrix(this.matrixWorld),worldNormal.copy(normal).applyMatrix3(normalMatrix).normalize(),this.getWorldPosition(coplanarPoint),this.shape.plane.setFromNormalAndCoplanarPoint(worldNormal,coplanarPoint)},t.prototype.clone=function(e){var n=this.shape.clone(),r=this.material.clone(),i=this.geometry.userData,o=new t(VectorGeometry.create(Object.assign({},i,{shape:n})),r).copy(this,e);return n.update(),o},t.prototype.raycast=function(e,t){AbstractMesh.prototype.raycast.call(this,e,t)},t}(AbstractMesh),Char3D=function(e){function t(n,r){var i=n.char,o=n.originalChar,a=n.fontFamily,s=n.letterSpacing,c=n.fontSize,u=n.LOD,l=void 0===u?16:u;void 0===r&&(r=new THREE.MeshBasicMaterial({color:0,opacity:1,visible:!0,transparent:!0,side:THREE.DoubleSide}));var h=this,f=t.loadChar(i,a,l);return(h=e.call(this,f.geometry,r)||this).char=i,h.originalChar=null!=o?o:i,h.fontFamily=a,h.letterSpacing=s,h.fontSize=c,h.LOD=l,h.resolution=f.resolution,h.glyphsHa=f.glyphsHa,h.localPosition=new THREE.Vector2,h.charSize=0,h.geometry.userData={type:"CharacterGeometry",parameters:{char:h.char,fontFamily:h.fontFamily,letterSpacing:h.letterSpacing,fontSize:h.fontSize,lod:h.LOD,resolution:h.resolution,charSize:h.charSize,localPosition:h.localPosition}},h.updateFontSize(h.fontSize),h}return __extends(t,e),Object.defineProperty(t,"FONTS_PATH",{get:function(){return"_assets/_fonts/"},enumerable:!1,configurable:!0}),t.prototype.updatePosition=function(e,t){this.localPosition.copy(e);var n=new THREE.Vector3(this.localPosition.x,-this.localPosition.y,0);this.position.copy(n).add(t)},t.prototype.updateFontSize=function(e){var t=e/this.resolution;this.fontSize=e,this.scale.set(this.fontSize,this.fontSize,1),this.charSize=this.glyphsHa*t*this.letterSpacing},t.prototype.updateFontFamily=function(e){if(this.fontFamily!==e){this.fontFamily=e;var n=t.loadChar(this.char,e,this.LOD);this.geometry=n.geometry,this.resolution=n.resolution,this.glyphsHa=n.glyphsHa,this.geometry.userData={type:"CharacterGeometry",parameters:{char:this.char,fontFamily:this.fontFamily,letterSpacing:this.letterSpacing,fontSize:this.fontSize,lod:this.LOD,resolution:this.resolution,charSize:this.charSize,localPosition:this.localPosition}},this.updateFontSize(this.fontSize)}},t.prototype.updateChar=function(e){if(this.char!==e){this.char=e;var n=t.loadChar(e,this.fontFamily,this.LOD);this.geometry=n.geometry,this.resolution=n.resolution,this.glyphsHa=n.glyphsHa,this.geometry.userData={type:"CharacterGeometry",parameters:{char:this.char,fontFamily:this.fontFamily,letterSpacing:this.letterSpacing,fontSize:this.fontSize,lod:this.LOD,resolution:this.resolution,charSize:this.charSize,localPosition:this.localPosition}},this.updateFontSize(this.fontSize)}},t.prototype.updateLetterSpacing=function(e){this.letterSpacing!==e&&(this.letterSpacing=e,this.updateFontSize(this.fontSize))},t.prototype.updateLOD=function(e){if(this.LOD!==e){this.LOD=e;var n=t.loadChar(this.char,this.fontFamily,this.LOD);this.geometry=n.geometry,this.resolution=n.resolution,this.glyphsHa=n.glyphsHa,this.geometry.userData={type:"CharacterGeometry",parameters:{char:this.char,fontFamily:this.fontFamily,letterSpacing:this.letterSpacing,fontSize:this.fontSize,lod:this.LOD,resolution:this.resolution,charSize:this.charSize,localPosition:this.localPosition}},this.updateFontSize(this.fontSize)}},t.prototype.clone=function(){return new t({char:this.char,originalChar:this.originalChar,fontFamily:this.fontFamily,letterSpacing:this.letterSpacing,fontSize:this.fontSize,LOD:this.LOD}).copy(this)},t.loadFont=function(e){return new Promise((function(n,r){t.fontCache[e]?n(t.fontCache[e]):(new THREE.FontLoader).load(t.FONTS_PATH+e+".json",(function(r){t.fontCache[e]=r,n(r)}),void 0,r)}))},t.loadChar=function(e,n,r){if(t.charCache[e]){if(t.charCache[e][r]&&t.charCache[e][r].fontFamily===n)return t.charCache[e][r]}else t.charCache[e]={};var i=t.fontCache[n],o=i.generateShapes(e,1);return t.charCache[e][r]={geometry:new THREE.ShapeBufferGeometry(o,r),fontFamily:n,resolution:i.data.resolution,glyphsHa:i.data.glyphs[e].ha},t.charCache[e][r]},t.charCache={},t.fontCache={},t}(THREE.Mesh),DIACRITICS,TEXT_TRANSFORM,VERTICAL_ALIGN,HORIZONTAL_ALIGN,TRAVEL_DIRECTION;!function(e){e.ACUTE="Â´",e.GRAVE="`",e.CIRCUMFLEX="^",e.DIAERESIS="Â¨",e.TILDE="~"}(DIACRITICS||(DIACRITICS={})),Object.values(DIACRITICS),function(e){e[e.STANDARD=1]="STANDARD",e[e.UPPERCASE=2]="UPPERCASE",e[e.LOWERCASE=3]="LOWERCASE"}(TEXT_TRANSFORM||(TEXT_TRANSFORM={})),function(e){e[e.TOP=1]="TOP",e[e.MIDDLE=2]="MIDDLE",e[e.BOTTOM=3]="BOTTOM"}(VERTICAL_ALIGN||(VERTICAL_ALIGN={})),function(e){e[e.LEFT=1]="LEFT",e[e.RIGHT=2]="RIGHT",e[e.CENTER=3]="CENTER",e[e.JUSTIFY=4]="JUSTIFY"}(HORIZONTAL_ALIGN||(HORIZONTAL_ALIGN={})),function(e){e[e.TO_RIGHT=1]="TO_RIGHT",e[e.TO_LEFT=-1]="TO_LEFT"}(TRAVEL_DIRECTION||(TRAVEL_DIRECTION={}));var TEMPV2=new THREE.Vector2,TextLine=function(){function e(e,t,n){this.message=[],this.endLine=!0,this.yLinePos=e,this.lineHeight=t,this.maxCharSize=n,this.nextChar3DPos=new THREE.Vector2(0,this.yLinePos+this.maxCharSize*this.lineHeight),this.align=HORIZONTAL_ALIGN.LEFT}return e.prototype.addChar3D=function(e,t,n){void 0===n&&(n=this.message.length),this.message.splice(n,0,e),e.fontSize>this.maxCharSize?(this.maxCharSize=e.fontSize,this.nextChar3DPos.y=this.yLinePos+this.maxCharSize*this.lineHeight,this.fullUpdate(t)):(e.updatePosition(this.nextChar3DPos,t),this.nextChar3DPos.x+=e.charSize)},e.prototype.deleteChar3D=function(e){void 0===e&&(e=this.message.length-1);var t=this.message[e];return t?(this.message.splice(e,1),this.nextChar3DPos.x-=t.charSize,t):void 0},e.prototype.isEndLine=function(e){this.endLine=e},e.prototype.fullUpdate=function(e,t){void 0===t&&(t=0),this.nextChar3DPos.x=0;for(var n=t,r=this.message.length;n<r;n+=1)this.message[n].updatePosition(this.nextChar3DPos,e),this.nextChar3DPos.x+=this.message[n].charSize},e.prototype.checkOverFlow=function(e){var t,n=this.message.length-1;if(n<=0)return!1;for(;n>=0;){if(" "!==this.message[n].char){t=this.message[n];break}n-=1}return!!(n>=0&&t&&t.localPosition.x+t.charSize>e)},e.prototype.containSpaceOverFlow=function(e){void 0===e&&(e=this.message.length-1);for(var t=e;t>=0;t-=1)if(" "===this.message[t].char)return!0;return!1},e.prototype.containSpace=function(e){if(void 0===e&&(e=this.message.length-1),this.endLine)return!0;for(var t=e;t>=0;t-=1)if(" "===this.message[t].char)return!0;return!1},e.prototype.popWord=function(e){void 0===e&&(e=this.message.length-1);var t,n=[],r=!0;for(t=e;t>=0;t-=1){if(" "===this.message[t].char){r=!1,0===n.length&&(t-=1,n.splice(0,0,this.message[t]));break}n.splice(0,0,this.message[t])}return r?n=[]:this.message.splice(t+1,n.length),n},e.prototype.getWord=function(e,t){void 0===e&&(e=0),void 0===t&&(t=1);var n=[],r=e;for(r=e;;r+=t){if(!this.message[r]||" "===this.message[r].char){0===n.length&&this.message[r]&&(n.push(this.message[r]),this.message.splice(r,1));break}t>0?(n.push(this.message[r]),this.message.splice(r,1),r-=t):(n.splice(0,0,this.message[r]),this.message.splice(r,1))}return n},e.prototype.getWordAtIndex=function(e){for(var t=[],n=e;n<this.message.length&&" "!==this.message[n].char;n++)t.push(this.message[n]);for(n=e-1;n>=0&&" "!==this.message[n].char;n--)t.splice(0,0,this.message[n]);return t},e.prototype.wordSize=function(e,t){void 0===e&&(e=0),void 0===t&&(t=-1);for(var n=0,r=e;r>=0&&r<this.message.length;){if(" "===this.message[r].char){0===n&&(n=this.message[r].charSize);break}n+=this.message[r].charSize,r+=t}return(r<0||r>=this.message.length)&&!this.endLine?this.message[e]?this.message[e].charSize:999999999:0===n?999999999:n},e.prototype.spaceLeft=function(e){return e-this.nextChar3DPos.x},e.prototype.popChar=function(e){return void 0===e&&(e=this.message.length-1),this.nextChar3DPos.x-=this.message[e].charSize,this.message.splice(e,1)},e.prototype.isEmpty=function(){return!this.message.length},e.prototype.updateNextCharPosY=function(){this.nextChar3DPos.y=this.yLinePos+this.maxCharSize*this.lineHeight},e.prototype.updateYLinePos=function(e){this.yLinePos=e,this.updateNextCharPosY()},e.prototype.updatelineHeight=function(e){this.lineHeight=e,this.updateNextCharPosY()},e.prototype.updateFontSize=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=this.message.length-1);for(var r=t;r<=n;r+=1)this.message[r].updateFontSize(e);this.maxCharSize=e,this.nextChar3DPos.y=this.yLinePos+this.maxCharSize*this.lineHeight},e.prototype.countSpaces=function(){for(var e=0,t=0;t<this.message.length;t++)" "===this.message[t].char&&(e+=1);return e},e.prototype.alignText=function(e,t,n,r,i){switch(n){case HORIZONTAL_ALIGN.LEFT:this.leftAlign(e,i);break;case HORIZONTAL_ALIGN.CENTER:this.centerAlign(this.spaceLeft(t),e,i);break;case HORIZONTAL_ALIGN.RIGHT:this.rightAlign(this.spaceLeft(t),e,i);break;case HORIZONTAL_ALIGN.JUSTIFY:this.justifyAlign(this.spaceLeft(t),e,i)}},e.prototype.offsetCharacters=function(e,t,n){TEMPV2.set(t,n);for(var r=this.message.length,i=0;i<r;i++)this.message[i].updatePosition(this.message[i].localPosition.add(TEMPV2),e)},e.prototype.leftAlign=function(e,t){this.align=HORIZONTAL_ALIGN.LEFT,this.offsetCharacters(e,0,t)},e.prototype.centerAlign=function(e,t,n){this.align=HORIZONTAL_ALIGN.CENTER,this.offsetCharacters(t,e/2,n)},e.prototype.rightAlign=function(e,t,n){this.align=HORIZONTAL_ALIGN.RIGHT,this.offsetCharacters(t,e,n)},e.prototype.justifyAlign=function(e,t,n){if(this.align=HORIZONTAL_ALIGN.JUSTIFY,this.endLine)this.offsetCharacters(t,0,n);else{var r=this.countSpaces();if(0!==r)for(var i=e/r,o=0,a=0;a<this.message.length;a++)" "===this.message[a].char&&(o+=i),TEMPV2.set(o,n),this.message[a].updatePosition(this.message[a].localPosition.add(TEMPV2),t);else this.offsetCharacters(t,0,n)}},e.prototype.clone=function(){var t=new e(this.yLinePos,this.lineHeight,this.maxCharSize);t.nextChar3DPos=this.nextChar3DPos.clone(),t.align=this.align,t.endLine=this.endLine;for(var n=0;n<this.message.length;n++)t.message.push(this.message[n].clone());return t},e}(),TextFrame=function(e){function t(t,n){void 0===n&&(n=new BasicMaterial({color:16777215,transparent:!0,opacity:1,visible:!1,side:THREE.DoubleSide}));var r=e.call(this,t,n)||this;return r.objectType="TextFrame",r._geometryUserData=t.userData,r.userData.textFrame={hexColor:6974058,opacity:1,visible:!0,fontSize:16,lineHeight:1.5,letterSpacing:1,fontFamily:"roboto_regular",textTransform:TEXT_TRANSFORM.STANDARD,horizontalAlignment:1,verticalAlignment:VERTICAL_ALIGN.TOP,LOD:16,maxLineSize:r._geometryUserData.parameters.width,textOrigin:new THREE.Vector3(-.5*r._geometryUserData.parameters.width,.5*r._geometryUserData.parameters.height,0),textLines:[]},r.createTextLine(),r}return __extends(t,e),t.prototype.raycast=function(t,n){var r=[];if(e.prototype.raycast.call(this,t,r),r.length>0)n.push(r[0]);else for(var i=[],o=0,a=this.children.length;o<a;++o)if(this.children[o]instanceof Char3D&&(t.intersectObject(this.children[o],!1,i),i.length>0))return i[0].object=this,void n.push(i[0])},t.prototype.updateGeometry=function(t){var n,r,i=this.userData,o=this.geometry.userData,a=o.parameters.width,s=null===(n=t.parameters)||void 0===n?void 0:n.width,c=null===(r=t.parameters)||void 0===r?void 0:r.height,u=o.parameters.height,l=i.textFrame;e.prototype.updateGeometry.call(this,t),l.maxLineSize=o.parameters.width,l.textOrigin.set(-.5*o.parameters.width,.5*o.parameters.height,0),void 0!==c&&u!==c?(this.checkOverFlow(),this.checkCapacity()):void 0!==s&&(a<s?this.checkCapacity():a>s&&this.checkOverFlow())},t.prototype.checkOverFlow=function(e){void 0===e&&(e=0);for(var t=this.userData,n=t.textFrame.textOrigin,r=t.textFrame.textLines,i=e;i<r.length;i++){r[i].updateYLinePos(this.getNewLinePosition(i)),r[i].fullUpdate(n);for(var o=[];r[i].checkOverFlow(t.textFrame.maxLineSize);)r[i].containSpaceOverFlow()?o.splice(0,0,r[i].getWord(r[i].message.length-1,TRAVEL_DIRECTION.TO_LEFT)):o.splice(0,0,r[i].popChar());if(o.length>0){void 0===r[i+1]&&(r[i].isEndLine(!1),this.createTextLine());for(var a=0,s=0;s<o.length;s+=1)for(var c=0;c<o[s].length;c+=1)r[i+1].addChar3D(o[s][c],n,a),a+=1;r[i+1].fullUpdate(n)}r[i].fullUpdate(n)}this.textFullUpdate(e)},t.prototype.checkCapacity=function(e){void 0===e&&(e=0);for(var t=this.userData,n=t.textFrame.textOrigin,r=t.textFrame.maxLineSize,i=t.textFrame.textLines,o=e;o<i.length;o+=1)if(i[o].updateYLinePos(this.getNewLinePosition(o)),i[o].fullUpdate(n),i[o-1])for(;!i[o-1].endLine;){var a=void 0,s=i[o-1].spaceLeft(r);if(!(i[o].wordSize(0,TRAVEL_DIRECTION.TO_RIGHT)<=s)){i[o].isEmpty()?(i[o].endLine&&i[o-1].isEndLine(!0),i.splice(o,1),o-=1):(i[o].updateYLinePos(this.getNewLinePosition(o)),i[o].fullUpdate(n));break}a=i[o].containSpace()?i[o].getWord(0,TRAVEL_DIRECTION.TO_RIGHT):i[o].popChar(0);for(var c=0;c<a.length;c+=1)a[c]&&i[o-1].addChar3D(a[c],n)}this.textFullUpdate(e)},t.prototype.createTextLine=function(e){void 0===e&&(e=this.userData.textFrame.textLines.length);var t=this.userData.textFrame;t.textLines.splice(e,0,new TextLine(this.getNewLinePosition(e),t.lineHeight,t.fontSize))},t.prototype.textFullUpdate=function(e){void 0===e&&(e=0);for(var t=this.userData.textFrame,n=t.textLines,r=this.getVerticalAlignmentOffSet(),i=e;i<n.length;i++)n[i].updateYLinePos(this.getNewLinePosition(i)),n[i].fullUpdate(t.textOrigin),n[i].alignText(t.textOrigin,t.maxLineSize,t.horizontalAlignment,t.verticalAlignment,r)},t.prototype.getVerticalAlignmentOffSet=function(){switch(this.userData.textFrame.verticalAlignment){case VERTICAL_ALIGN.TOP:return 0;case VERTICAL_ALIGN.MIDDLE:return this.getRemainingVerticalSpace()/2;case VERTICAL_ALIGN.BOTTOM:return this.getRemainingVerticalSpace();default:return 0}},t.prototype.getRemainingVerticalSpace=function(){var e=this.userData.textFrame.textLines;return this.geometry.userData.parameters.height-this.getNewLinePosition(e.length)},t.prototype.getNewLinePosition=function(e){for(var t=this.userData.textFrame.textLines,n=0,r=0;r<e;r+=1)n+=t[r].maxCharSize*t[r].lineHeight;return n},t.prototype.updateColor=function(e){var t=this.userData;t.textFrame.hexColor=e;for(var n=t.textFrame.textLines,r=0;r<n.length;r++)for(var i=n[r].message,o=0;o<i.length;o++)i[o].material.color.setHex(e)},t.prototype.updateOpacity=function(e){var t=this.userData;t.textFrame.opacity=e;for(var n=t.textFrame.textLines,r=0;r<n.length;r++)for(var i=n[r].message,o=0;o<i.length;o++)i[o].material.opacity=e},t.prototype.updateVisible=function(e){var t=this.userData;t.textFrame.visible=e;for(var n=t.textFrame.textLines,r=0;r<n.length;r++)for(var i=n[r].message,o=0;o<i.length;o++)i[o].material.visible=e},t.prototype.updateFontFamily=function(e){return __awaiter(this,void 0,void 0,(function(){var t,n,r,i,o,a;return __generator(this,(function(s){switch(s.label){case 0:return[4,Char3D.loadFont(e)];case 1:for(s.sent(),t=this.userData,n=t.textFrame,r=n.textLines,n.fontFamily=e,i=0;i<r.length;i++)for(o=r[i].message,a=0;a<o.length;a++)o[a].updateFontFamily(e);return this.textFullUpdate(),this.checkOverFlow(),this.checkCapacity(),[2]}}))}))},t.prototype.updateFontSize=function(e){var t=this.userData.textFrame,n=t.textLines,r=t.fontSize;t.fontSize=e;for(var i=0;i<n.length;i++)n[i].updateFontSize(e);this.textFullUpdate(),e>r?this.checkOverFlow():e<r&&this.checkCapacity()},t.prototype.updateTextTransform=function(e){return __awaiter(this,void 0,void 0,(function(){var t,n,r,i,o,a;return __generator(this,(function(s){switch(s.label){case 0:return t=this.userData,n=t.textFrame,[4,Char3D.loadFont(n.fontFamily)];case 1:switch(s.sent(),r=n.textLines,n.textTransform=e,e){case TEXT_TRANSFORM.UPPERCASE:for(i=0;i<r.length;i++)for(o=r[i].message,a=0;a<o.length;a++)r[i].message[a].updateChar(o[a].char.toUpperCase());break;case TEXT_TRANSFORM.LOWERCASE:for(i=0;i<r.length;i++)for(o=r[i].message,a=0;a<o.length;a++)r[i].message[a].updateChar(o[a].char.toLowerCase());break;default:for(i=0;i<r.length;i++)for(o=r[i].message,a=0;a<o.length;a++)r[i].message[a].updateChar(o[a].originalChar)}return this.textFullUpdate(),this.checkOverFlow(),this.checkCapacity(),[2]}}))}))},t.prototype.updateLetterSpacing=function(e){var t=this.userData,n=t.textFrame.textLines;t.textFrame.letterSpacing=e;for(var r=0;r<n.length;r++)for(var i=n[r].message,o=0;o<i.length;o++)i[o].updateLetterSpacing(e);this.textFullUpdate(),this.checkOverFlow(),this.checkCapacity()},t.prototype.updateLOD=function(e){var t=this.userData;t.textFrame.LOD=e;for(var n=t.textFrame.textLines,r=0;r<n.length;r++);this.textFullUpdate(),this.checkOverFlow(),this.checkCapacity()},t.prototype.updateLineHeight=function(e){var t=this.userData,n=t.textFrame.textLines;t.textFrame.lineHeight=e;for(var r=0;r<n.length;r++)n[r].updatelineHeight(e);this.textFullUpdate()},t.prototype.updateVerticalAlignment=function(e){this.userData.textFrame.verticalAlignment=e,this.textFullUpdate()},t.prototype.updateHorizontalAlignment=function(e){this.userData.textFrame.horizontalAlignment=e,this.textFullUpdate()},t.prototype.copy=function(t,n){e.prototype.copy.call(this,t,n);var r=this.userData,i=t.userData,o=this.geometry.userData;r.textFrame.textOrigin=new THREE.Vector3(-.5*o.parameters.width,.5*o.parameters.height,0);var a=i.textFrame.textLines;r.textFrame.textLines=[];for(var s=0;s<a.length;s++){var c=a[s].clone(),u=c.message;r.textFrame.textLines.push(c);for(var l=0;l<u.length;l++)this.add(u[l])}return this.textFullUpdate(),this},t.prototype.toJSON=function(t){var n=e.prototype.toJSON.call(this,t),r=n.object;r.objectType="TextFrame";var i=this.userData.textFrame.textLines.map((function(e){var t=e.message.map((function(e){return{char:e.char,originalChar:e.originalChar,fontFamily:e.fontFamily,letterSpacing:e.letterSpacing,fontSize:e.fontSize,LOD:e.LOD}}));return{align:e.align,endLine:e.endLine,lineHeight:e.lineHeight,maxCharSize:e.maxCharSize,yLinePos:e.yLinePos,message:t}}));return r.userData.textFrame.textLinesData=i,n},t.prototype.fromJSONasync=function(t){return __awaiter(this,void 0,void 0,(function(){var n,r,i=this;return __generator(this,(function(o){switch(o.label){case 0:return e.prototype.fromJSON.call(this,t),void 0===t.userData?[3,2]:(n=t.userData.textFrame,[4,Char3D.loadFont(n.fontFamily)]);case 1:o.sent(),n.textOrigin=new THREE.Vector3(n.textOrigin.x,n.textOrigin.y,n.textOrigin.z),r=new THREE.MeshBasicMaterial({color:n.hexColor,opacity:n.opacity,visible:n.visible,transparent:!0,side:THREE.DoubleSide}),n.textLinesData&&(n.textLines=n.textLinesData.map((function(e,t){var o=new TextLine(Number(e.yLinePos),Number(e.lineHeight),Number(e.maxCharSize)),a=e.message.map((function(e,a){if(void 0===e.char){var s=n.textLines[t].message[a];if("geometries"in s){var c=s.geometries[0].userData.parameters;Object.assign(e,{LOD:c.lod,char:c.char,fontFamily:c.fontFamily,fontSize:c.fontSize,letterSpacing:c.letterSpacing,originalChar:c.char})}}var u={char:e.char,fontFamily:e.fontFamily,letterSpacing:Number(e.letterSpacing),fontSize:Number(e.fontSize),LOD:e.LOD},l=new Char3D(u,r.clone());return o.addChar3D(l,n.textOrigin),i.add(l),l}));return o.message=a,o})),this.userData.textFrame=n),this.textFullUpdate(),o.label=2;case 2:return[2,this]}}))}))},t.VERTICAL_ALIGN=VERTICAL_ALIGN,t.HORIZONTAL_ALIGN=HORIZONTAL_ALIGN,t.TEXT_TRANSFORM=TEXT_TRANSFORM,t.TRAVEL_DIRECTION=TRAVEL_DIRECTION,t}(AbstractMesh),IDENTITY_MATRIX=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],ATTRIBUTE_NAME_MAPPING={TEXCOORD_0:"UV"},DEFAULT_SAMPLER={magFilter:GLTF_TEXTURE_MAG_FILTER.NEAREST,minFilter:GLTF_TEXTURE_MIN_FILTER.NEAREST,wrapS:GLTF_TEXTURE_WRAP_MODE.CLAMP_TO_EDGE,wrapT:GLTF_TEXTURE_WRAP_MODE.CLAMP_TO_EDGE},DEFAULT_IMAGE=new Image,DEFAULT_TEXTURE=new THREE.Texture,DEFAULT_ARRAY_COLORS=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],DEFAULT_STEPS=[0,1,1,1,1,1,1,1,1,1],DEFAULT_SHADOWMAP_SIZE=[2048,2048],GLTFImporter=function(){function e(){this._scene=null,this._camera=null,this._exportOptions=null,this._sceneOptions=null,this._gltfFile=null,this._nodes=[],this._cameras=[],this._lights=[],this._meshes=[],this._accessors=[],this._materials=[],this._textures=[],this._texturesMap={},this._objects={},this._interactionStates={}}return e.prototype.decode=function(e){var t,n;if(this._scene=null,this._camera=null,this._exportOptions={},this._sceneOptions={},this._nodes=[],this._objects={},this._cameras=[],this._lights=[],this._meshes=[],this._accessors=[],this._materials=[],this._gltfFile=e,!this._gltfFile)return console.error("::decode >>> no gltf file was given"),[null,null,null,null];if(this._decodeTextureData(this._gltfFile),this._decodeInteractionStates(this._gltfFile),this._decodeVertexData(this._gltfFile),this._decodeExportOptions(this._gltfFile),this._decodeSceneOptions(this._gltfFile),this._decodeCameras(this._gltfFile),this._decodeLights(this._gltfFile),this._decodeMeshes(this._gltfFile),this._decodeMaterials(this._gltfFile),this._decodeNodes(this._gltfFile),this._decodeInteractions(this._gltfFile),this._decodeSceneGraph(this._gltfFile),this._gltfFile.scenes.length<1)return console.error("GLTFImporter::decode >>> there are no scenes in this\n                           gltf file, so we can't return a valid scene to the application"),[null,null,null,null];this._gltfFile.scenes.length>1&&console.warn("GLTFImporter::decode >>> there are more than one default\n                          scene in the gltf file. Taking only the first one as default");var r=this._gltfFile.scenes[0];r.nodes.length>1&&console.warn("GLTFImporter::decode >>> there are more root nodes in\n                          the default scene being decoded. Using first root instead");var i=r.nodes[0];this._scene=this._nodes[i];var o=null!==(n=null===(t=this._gltfFile.extensions.SPE_scene_options.camera)||void 0===t?void 0:t.mainCameraIndex)&&void 0!==n?n:-1;return o<this._nodes.length&&o>=0&&(this._camera=this._nodes[o]),[this._scene,this._camera,this._exportOptions,this._sceneOptions]},e.prototype._decodeTextureData=function(e){var t,n,r,i,o,a,s,c,u,l,h,f,d,p,m,v;function g(e){switch(e){case GLTF_TEXTURE_WRAP_MODE.CLAMP_TO_EDGE:return THREE.ClampToEdgeWrapping;case GLTF_TEXTURE_WRAP_MODE.MIRRORED_REPEAT:return THREE.MirroredRepeatWrapping;case GLTF_TEXTURE_WRAP_MODE.REPEAT:return THREE.RepeatWrapping}}function y(e){switch(e){case GLTF_TEXTURE_MAG_FILTER.LINEAR:return THREE.LinearFilter;case GLTF_TEXTURE_MAG_FILTER.NEAREST:return THREE.NearestFilter}}function b(e){switch(e){case GLTF_TEXTURE_MIN_FILTER.LINEAR:return THREE.LinearFilter;case GLTF_TEXTURE_MIN_FILTER.LINEAR_MIPMAP_LINEAR:return THREE.LinearMipmapLinearFilter;case GLTF_TEXTURE_MIN_FILTER.LINEAR_MIPMAP_NEAREST:return THREE.LinearMipmapNearestFilter;case GLTF_TEXTURE_MIN_FILTER.NEAREST:return THREE.NearestFilter;case GLTF_TEXTURE_MIN_FILTER.NEAREST_MIPMAP_LINEAR:return THREE.NearestMipmapLinearFilter;case GLTF_TEXTURE_MIN_FILTER.NEAREST_MIPMAP_NEAREST:return THREE.NearestMipmapNearestFilter}}for(var w=null!==(t=e.images)&&void 0!==t?t:[],E=[],x=0;x<w.length;x++)(O=new Image).src=null!==(n=w[x].uri)&&void 0!==n?n:"",E.push(O);var _=null!==(r=e.samplers)&&void 0!==r?r:[],T=null!==(i=e.textures)&&void 0!==i?i:[];for(x=0;x<T.length;x++){var A=T[x],S=null!==(o=A.source)&&void 0!==o?o:-1,M=null!==(a=A.sampler)&&void 0!==a?a:-1,O=null!==(s=E[S])&&void 0!==s?s:DEFAULT_IMAGE,R=null!==(c=_[M])&&void 0!==c?c:DEFAULT_SAMPLER,C=null!==(l=null===(u=R.extensions)||void 0===u?void 0:u.repeat)&&void 0!==l?l:[1,1],I=null!==(f=null===(h=R.extensions)||void 0===h?void 0:h.offset)&&void 0!==f?f:[0,0],L=null!==(p=null===(d=R.extensions)||void 0===d?void 0:d.center)&&void 0!==p?p:[0,0],D=null!==(v=null===(m=R.extensions)||void 0===m?void 0:m.rotation)&&void 0!==v?v:0,P=new THREE.Texture(O,THREE.Texture.DEFAULT_MAPPING,g(R.wrapS),g(R.wrapT),y(R.magFilter),b(R.minFilter));P.repeat.fromArray(C),P.offset.fromArray(I),P.center.fromArray(L),P.rotation=D,P.updateMatrix(),this._textures.push(P)}var N=e.extensions.SPE_textures_uuid_map;for(var B in N){var k=N[Number(B)];this._texturesMap[k]=this._textures[Number(B)]}},e.prototype._decodeInteractionStates=function(e){var t=e.extensions.SPE_interaction_states.states;for(var n in t){var r=t[n];this._interactionStates[n]=(new InteractionState).fromJSON(r,this._texturesMap)}},e.prototype._decodeVertexData=function(e){for(var t,n,r,i=null!==(t=e.buffers)&&void 0!==t?t:[],o=[],a=0;a<i.length;a++)o.push(this._decodeBuffer(i[a]));var s=null!==(n=e.bufferViews)&&void 0!==n?n:[],c=[];for(a=0;a<s.length;a++)c.push(this._decodeBufferView(s[a],o));var u=null!==(r=e.accessors)&&void 0!==r?r:[];for(a=0;a<u.length;a++)this._accessors.push(this._decodeAccessor(u[a],c))},e.prototype._decodeBuffer=function(e){var t=e.byteLength,n=e.uri;if(n.indexOf("base64")){for(var r=n.slice(n.indexOf("base64")+7),i=atob(r),o=new Uint8Array(i.length),a=0;a<i.length;a++)o[a]=i.charCodeAt(a);return{data:o,length:t}}return n.indexOf(".bin")?(console.error("GLTFImporter::_decodeBuffer >>> decoding from external binary file is not supported yet"),{data:new Uint8Array(0),length:0}):(console.error("GLTFImporter::_decodeBuffer >>> invalid gltf-buffer description"),{data:new Uint8Array(0),length:0})},e.prototype._decodeBufferView=function(e,t){var n=e.byteLength,r=e.byteOffset,i=e.buffer,o=e.target;return i<0||i>=t.length?(console.error("GLTFImporter::_decodeBufferView >>> id of buffer out of range"),{data:new Uint8Array(0),length:0,target:GLTF_BUFFER_TARGET.ARRAY_BUFFER}):{data:t[i].data.slice(r,r+n),length:n,target:o}},e.prototype._decodeAccessor=function(e,t){var n=e.bufferView,r=e.byteOffset,i=e.componentType,o=e.count,a=e.type;if(n<0||n>=t.length)return console.error("GLTFImporter::_decodeAccessor >>> id of buffer-view out of range"),{bufferData:new THREE.BufferAttribute([0],0),itemSize:0,componentSize:0};var s,c=t[n],u=GetAccessorItemSize(a),l=GetAccessorComponentSize(i),h=o*u*l,f=c.data.slice(r,r+h);switch(i){case GLTF_COMPONENT_TYPE.UNSIGNED_BYTE:s=new THREE.Uint8BufferAttribute(new Uint8Array(f.buffer),u);break;case GLTF_COMPONENT_TYPE.UNSIGNED_SHORT:s=new THREE.Uint16BufferAttribute(new Uint16Array(f.buffer),u);break;case GLTF_COMPONENT_TYPE.UNSIGNED_INT:s=new THREE.Uint32BufferAttribute(new Uint32Array(f.buffer),u);break;case GLTF_COMPONENT_TYPE.FLOAT:for(var d=f.length/Float32Array.BYTES_PER_ELEMENT,p=new Float32Array(d),m=new DataView(new ArrayBuffer(Float32Array.BYTES_PER_ELEMENT)),v=0;v<p.length;v++)m.setUint8(0,f[4*v+0]),m.setUint8(1,f[4*v+1]),m.setUint8(2,f[4*v+2]),m.setUint8(3,f[4*v+3]),p[v]=m.getFloat32(0,!0);s=new THREE.Float32BufferAttribute(p,u);break;default:console.error("GLTFImporter::_decodeAccessor >>> invalid component-type ("+i+")"),s=new THREE.Uint8BufferAttribute(new Uint8Array(0),0)}return{bufferData:s,itemSize:u,componentSize:l}},e.prototype._decodeExportOptions=function(e){var t,n,r,i,o,a,s,c,u,l,h,f,d,p;if(this._exportOptions){var m=e.extensions.SPE_export_options;this._exportOptions.generatorFormat=null!==(t=m.generatorFormat)&&void 0!==t?t:GLTF_GENERATOR_FORMAT.FORMAT_GLTF_SPLINE_EXT,this._exportOptions.useOrbitControls=null===(n=m.useOrbitControls)||void 0===n||n,this._exportOptions.bgColor=(new THREE.Color).fromArray(null!==(r=m.bgColor)&&void 0!==r?r:[.1,.1,.1]),this._exportOptions.bgAlpha=null!==(i=m.bgAlpha)&&void 0!==i?i:0,this._exportOptions.orbitDamped=null!==(o=m.orbitDamped)&&void 0!==o&&o,this._exportOptions.orbitTarget=(new THREE.Vector3).fromArray(null!==(a=m.orbitTarget)&&void 0!==a?a:[0,0,0]),this._exportOptions.cameraType=null!==(s=m.cameraType)&&void 0!==s?s:"OrthographicCamera",this._exportOptions.cameraRotate=null===(c=m.cameraRotate)||void 0===c||c,this._exportOptions.cameraPan=null===(u=m.cameraPan)||void 0===u||u,this._exportOptions.cameraZoom=null===(l=m.cameraZoom)||void 0===l||l,this._exportOptions.viewMode=null!==(h=m.viewMode)&&void 0!==h?h:RUNTIME_VIEWMODE.FULLSCREEN,this._exportOptions.viewWidth=null!==(f=m.viewWidth)&&void 0!==f?f:window.innerWidth,this._exportOptions.viewHeight=null!==(d=m.viewHeight)&&void 0!==d?d:window.innerHeight,this._exportOptions.quality=null!==(p=m.quality)&&void 0!==p?p:RUNTIME_QUALITY.DEFAULT}},e.prototype._decodeSceneOptions=function(e){var t,n,r,i,o,a,s,c,u;if(this._sceneOptions){var l=e.extensions.SPE_scene_options;this._sceneOptions.camera={mainCameraIndex:null!==(n=null===(t=l.camera)||void 0===t?void 0:t.mainCameraIndex)&&void 0!==n?n:-1},l.fog&&(this._sceneOptions.fog={color:(new THREE.Color).fromArray(null!==(r=l.fog.color)&&void 0!==r?r:[.1,.1,.1]),near:null!==(i=l.fog.near)&&void 0!==i?i:1,far:null!==(o=l.fog.far)&&void 0!==o?o:1e3}),l.fogExp2&&(this._sceneOptions.fogExp2={color:(new THREE.Color).fromArray(null!==(a=l.fogExp2.color)&&void 0!==a?a:[.1,.1,.1]),density:null!==(s=l.fogExp2.density)&&void 0!==s?s:25e-5}),l.postProcessing&&(this._sceneOptions.postProcessing={enabled:null!==(c=l.postProcessing.enabled)&&void 0!==c&&c,data:null!==(u=l.postProcessing.data)&&void 0!==u?u:{}})}},e.prototype._decodeCameras=function(e){var t=e.cameras;if(t)for(var n=0;n<t.length;n++){var r=t[n],i=this._decodeCamera(r);this._cameras.push(i)}else console.warn("GLTFImporter::_decodeCameras >>> there are no cameras in the given gltf file")},e.prototype._decodeCamera=function(e){var t,n,r,i,o,a,s,c,u,l,h,f,d,p,m,v,g,y,b,w,E=null,x=100,_=100,T=45,A=.1,S=5e4,M=1;switch(e.type){case CAMERA_TYPE.ORTHOGRAPHIC:x=null!==(n=null===(t=e.orthographic)||void 0===t?void 0:t.xmag)&&void 0!==n?n:100,_=null!==(i=null===(r=e.orthographic)||void 0===r?void 0:r.ymag)&&void 0!==i?i:100,A=null!==(a=null===(o=e.orthographic)||void 0===o?void 0:o.znear)&&void 0!==a?a:.1,S=null!==(c=null===(s=e.orthographic)||void 0===s?void 0:s.zfar)&&void 0!==c?c:5e4,M=null!==(h=null===(l=null===(u=e.extensions)||void 0===u?void 0:u.SPE_camera_options)||void 0===l?void 0:l.zoom)&&void 0!==h?h:1,(E=new CombinedCamera(x,_,T,A,S)).toOrthographic(),E.zoom=M;break;case CAMERA_TYPE.PERSPECTIVE:T=(null!==(d=null===(f=e.perspective)||void 0===f?void 0:f.yfov)&&void 0!==d?d:Math.PI/4)*THREE.MathUtils.RAD2DEG,A=null!==(m=null===(p=e.perspective)||void 0===p?void 0:p.znear)&&void 0!==m?m:.1,S=null!==(g=null===(v=e.perspective)||void 0===v?void 0:v.zfar)&&void 0!==g?g:5e4,M=null!==(w=null===(b=null===(y=e.extensions)||void 0===y?void 0:y.SPE_camera_options)||void 0===b?void 0:b.zoom)&&void 0!==w?w:1,(E=new CombinedCamera(x,_,T,A,S)).toPerspective(),E.zoom=M;break;default:console.error("GLTFImporter::_decodeCamera >>> unsupported camera type ("+e.type+")"),(E=new CombinedCamera(x,_,T,A,S)).toOrthographic(),E.zoom=M}return E},e.prototype._decodeLights=function(e){var t=e.extensions.KHR_lights_punctual.lights;if(t)for(var n=0;n<t.length;n++){var r=t[n],i=this._decodeLight(r);this._lights.push(i)}else console.warn("GLTFImporter::_decodeLights >>> there are no lights in the given gltf file")},e.prototype._decodeLight=function(e){var t,n,r,i,o,a,s,c,u,l,h,f,d,p,m,v,g,y,b,w,E,x,_,T,A,S,M,O,R,C,I,L,D,P,N,B,k,F,U,H,j,G,V,z,W,q,Y,X,Q,K,J,Z,$,ee,te,ne,re,ie,oe,ae,se,ce,ue,le,he,fe,de,pe,me,ve,ge,ye,be,we,Ee,xe,_e,Te,Ae,Se,Me,Oe,Re,Ce,Ie,Le,De,Pe,Ne,Be,ke,Fe,Ue,He,je,Ge,Ve,ze,We,qe,Ye,Xe,Qe,Ke,Je=null;switch(e.type){case LIGHT_TYPE.HEMISPHERIC:var Ze=(new THREE.Color).fromArray(null!==(t=e.color)&&void 0!==t?t:[1,1,1]),$e=(new THREE.Color).setHex(8553090),et=null!==(n=e.intensity)&&void 0!==n?n:.75;Je=new THREE.HemisphereLight(Ze,$e,et);break;case LIGHT_TYPE.DIRECTIONAL:Ze=(new THREE.Color).fromArray(null!==(r=e.color)&&void 0!==r?r:[1,1,1]),et=null!==(i=e.intensity)&&void 0!==i?i:1,(Je=new LightDirectional(Ze,et)).castShadow=null!==(c=null===(s=null===(a=null===(o=e.extensions)||void 0===o?void 0:o.SPE_light_parameters)||void 0===a?void 0:a.shadows)||void 0===s?void 0:s.castShadow)&&void 0!==c&&c,Je.shadow.mapSize=(new THREE.Vector2).fromArray(null!==(f=null===(h=null===(l=null===(u=e.extensions)||void 0===u?void 0:u.SPE_light_parameters)||void 0===l?void 0:l.shadows)||void 0===h?void 0:h.shadowmapSize)&&void 0!==f?f:DEFAULT_SHADOWMAP_SIZE),Je.shadow.bias=null!==(v=null===(m=null===(p=null===(d=e.extensions)||void 0===d?void 0:d.SPE_light_parameters)||void 0===p?void 0:p.shadows)||void 0===m?void 0:m.shadowmapBias)&&void 0!==v?v:0,Je.shadow.camera.right=null!==(w=null===(b=null===(y=null===(g=e.extensions)||void 0===g?void 0:g.SPE_light_parameters)||void 0===y?void 0:y.shadows)||void 0===b?void 0:b.shadowmapViewRight)&&void 0!==w?w:1250,Je.shadow.camera.left=null!==(T=null===(_=null===(x=null===(E=e.extensions)||void 0===E?void 0:E.SPE_light_parameters)||void 0===x?void 0:x.shadows)||void 0===_?void 0:_.shadowmapViewLeft)&&void 0!==T?T:-1250,Je.shadow.camera.top=null!==(O=null===(M=null===(S=null===(A=e.extensions)||void 0===A?void 0:A.SPE_light_parameters)||void 0===S?void 0:S.shadows)||void 0===M?void 0:M.shadowmapViewTop)&&void 0!==O?O:1250,Je.shadow.camera.bottom=null!==(L=null===(I=null===(C=null===(R=e.extensions)||void 0===R?void 0:R.SPE_light_parameters)||void 0===C?void 0:C.shadows)||void 0===I?void 0:I.shadowmapViewBottom)&&void 0!==L?L:-1250,Je.shadow.camera.near=null!==(B=null===(N=null===(P=null===(D=e.extensions)||void 0===D?void 0:D.SPE_light_parameters)||void 0===P?void 0:P.shadows)||void 0===N?void 0:N.shadowmapViewNear)&&void 0!==B?B:1,Je.shadow.camera.far=null!==(H=null===(U=null===(F=null===(k=e.extensions)||void 0===k?void 0:k.SPE_light_parameters)||void 0===F?void 0:F.shadows)||void 0===U?void 0:U.shadowmapViewFar)&&void 0!==H?H:2500;break;case LIGHT_TYPE.POINT:Ze=(new THREE.Color).fromArray(null!==(j=e.color)&&void 0!==j?j:[1,1,1]),et=null!==(G=e.intensity)&&void 0!==G?G:1;var tt=null!==(V=e.range)&&void 0!==V?V:0,nt=null!==(Y=null===(q=null===(W=null===(z=e.extensions)||void 0===z?void 0:z.SPE_light_parameters)||void 0===W?void 0:W.custom)||void 0===q?void 0:q.decay)&&void 0!==Y?Y:1;(Je=new LightPoint(Ze,et,tt,nt)).castShadow=null!==(J=null===(K=null===(Q=null===(X=e.extensions)||void 0===X?void 0:X.SPE_light_parameters)||void 0===Q?void 0:Q.shadows)||void 0===K?void 0:K.castShadow)&&void 0!==J&&J,Je.shadow.mapSize=(new THREE.Vector2).fromArray(null!==(te=null===(ee=null===($=null===(Z=e.extensions)||void 0===Z?void 0:Z.SPE_light_parameters)||void 0===$?void 0:$.shadows)||void 0===ee?void 0:ee.shadowmapSize)&&void 0!==te?te:DEFAULT_SHADOWMAP_SIZE),Je.shadow.bias=null!==(oe=null===(ie=null===(re=null===(ne=e.extensions)||void 0===ne?void 0:ne.SPE_light_parameters)||void 0===re?void 0:re.shadows)||void 0===ie?void 0:ie.shadowmapBias)&&void 0!==oe?oe:0,Je.shadow.camera.near=null!==(ue=null===(ce=null===(se=null===(ae=e.extensions)||void 0===ae?void 0:ae.SPE_light_parameters)||void 0===se?void 0:se.shadows)||void 0===ce?void 0:ce.shadowmapViewNear)&&void 0!==ue?ue:1,Je.shadow.camera.far=null!==(de=null===(fe=null===(he=null===(le=e.extensions)||void 0===le?void 0:le.SPE_light_parameters)||void 0===he?void 0:he.shadows)||void 0===fe?void 0:fe.shadowmapViewFar)&&void 0!==de?de:2500;break;case LIGHT_TYPE.SPOT:Ze=(new THREE.Color).fromArray(null!==(pe=e.color)&&void 0!==pe?pe:[1,1,1]),et=null!==(me=e.intensity)&&void 0!==me?me:1,tt=null!==(ve=e.range)&&void 0!==ve?ve:0;var rt=null!==(ye=null===(ge=e.spot)||void 0===ge?void 0:ge.innerConeAngle)&&void 0!==ye?ye:Math.PI/3,it=(nt=null!==(xe=null===(Ee=null===(we=null===(be=e.extensions)||void 0===be?void 0:be.SPE_light_parameters)||void 0===we?void 0:we.custom)||void 0===Ee?void 0:Ee.decay)&&void 0!==xe?xe:1,null!==(Se=null===(Ae=null===(Te=null===(_e=e.extensions)||void 0===_e?void 0:_e.SPE_light_parameters)||void 0===Te?void 0:Te.custom)||void 0===Ae?void 0:Ae.penumbra)&&void 0!==Se?Se:0);(Je=new LightSpot(Ze,et,tt,rt,it,nt)).castShadow=null!==(Ce=null===(Re=null===(Oe=null===(Me=e.extensions)||void 0===Me?void 0:Me.SPE_light_parameters)||void 0===Oe?void 0:Oe.shadows)||void 0===Re?void 0:Re.castShadow)&&void 0!==Ce&&Ce,Je.shadow.mapSize=(new THREE.Vector2).fromArray(null!==(Pe=null===(De=null===(Le=null===(Ie=e.extensions)||void 0===Ie?void 0:Ie.SPE_light_parameters)||void 0===Le?void 0:Le.shadows)||void 0===De?void 0:De.shadowmapSize)&&void 0!==Pe?Pe:DEFAULT_SHADOWMAP_SIZE),Je.shadow.bias=null!==(Fe=null===(ke=null===(Be=null===(Ne=e.extensions)||void 0===Ne?void 0:Ne.SPE_light_parameters)||void 0===Be?void 0:Be.shadows)||void 0===ke?void 0:ke.shadowmapBias)&&void 0!==Fe?Fe:0,Je.shadow.camera.fov=null!==(Ge=null===(je=null===(He=null===(Ue=e.extensions)||void 0===Ue?void 0:Ue.SPE_light_parameters)||void 0===He?void 0:He.shadows)||void 0===je?void 0:je.shadowmapViewFov)&&void 0!==Ge?Ge:2*THREE.MathUtils.RAD2DEG*rt,Je.shadow.camera.near=null!==(qe=null===(We=null===(ze=null===(Ve=e.extensions)||void 0===Ve?void 0:Ve.SPE_light_parameters)||void 0===ze?void 0:ze.shadows)||void 0===We?void 0:We.shadowmapViewNear)&&void 0!==qe?qe:1,Je.shadow.camera.far=null!==(Ke=null===(Qe=null===(Xe=null===(Ye=e.extensions)||void 0===Ye?void 0:Ye.SPE_light_parameters)||void 0===Xe?void 0:Xe.shadows)||void 0===Qe?void 0:Qe.shadowmapViewFar)&&void 0!==Ke?Ke:2500;break;default:console.error("GLTFImporter::_decodeLight >>> unsupported light type ("+e.type+")")}return Je},e.prototype._decodeMeshes=function(e){var t=e.meshes;if(t)for(var n=0;n<t.length;n++){var r=t[n],i=this._decodeMesh(r);this._meshes.push(i)}else console.error("GLTFImporter::_decodeMeshes >>> there are no meshes in this gltf-file")},e.prototype._decodeMesh=function(e){return e.primitives.length>0?this._decodeNonParametricGeometry(e):this._decodeParametriGeometry(e)},e.prototype._decodeParametriGeometry=function(e){var t,n=null===(t=e.extensions)||void 0===t?void 0:t.SPE_primitive;return createGeometry(null!=n?n:{type:"SphereGeometry",parameters:{width:100,height:100,depth:100}})},e.prototype._decodeNonParametricGeometry=function(e){var t,n,r,i,o,a=e.primitives[0],s=null!==(t=a.indices)&&void 0!==t?t:-1,c=a.attributes,u=null!==(n=this._accessors[s])&&void 0!==n?n:null,l={};for(var h in c){var f=c[h];l[h]=this._accessors[f]}var d=new THREE.BufferGeometry;for(var p in u&&d.setIndex(u.bufferData),l)h=p in ATTRIBUTE_NAME_MAPPING?ATTRIBUTE_NAME_MAPPING[p]:p,d.setAttribute(h.toLowerCase(),l[p].bufferData);if(!e.extensions)return console.error("GLTFImporter::_decodeNonParametricGeometry >>> must have SPE_primitive extension"),d;var m=new THREE.Vector3;d.computeBoundingBox(),d.boundingBox.getSize(m);var v=e.extensions.SPE_primitive,g=null!==(r=v.parameters.width)&&void 0!==r?r:m.x,y=null!==(i=v.parameters.height)&&void 0!==i?i:m.y,b=null!==(o=v.parameters.depth)&&void 0!==o?o:m.z;return d.scale(Math.abs(m.x)<1e-5?1:g/m.x,Math.abs(m.y)<1e-5?1:y/m.y,Math.abs(m.z)<1e-5?1:b/m.z),d.userData={type:"NonParametricGeometry",parameters:{width:g,height:y,depth:b}},d},e.prototype._decodeMaterials=function(e){var t=e.materials;if(t)for(var n=0;n<t.length;n++){var r=t[n],i=this._decodeMaterial(r);this._materials.push(i)}else console.error("GLTFImporter::_decodeMaterials >>> there are no materials in this gltf-file")},e.prototype._decodeMaterial=function(e){var t,n,r,i,o,a,s,c,u,l,h,f,d,p,m,v,g,y=null!==(t=e.name)&&void 0!==t?t:"DefaultMaterial",b=(null!==(n=e.alphaMode)&&void 0!==n?n:GLTF_MATERIAL_ALPHA_MODE.OPAQUE)===GLTF_MATERIAL_ALPHA_MODE.BLEND,w=null!==(r=e.alphaCutoff)&&void 0!==r?r:1;if(!e.extensions)return console.error("GLTFImporter::_decodeMaterial >>> there must be extensions for materials in Spline"),null;if(!e.extensions.KHR_materials_common)return console.error("GLTFImporter::_decodeMaterial >>> there must be the KHR_materials_common extension for spline usage"),null;if(!e.extensions.SPE_materials_layers)return console.error("GLTFImporter::_decodeMaterial >>> there must be the SPE_materials_layers extension for spline usage"),null;if(!e.extensions.SPE_materials_options)return console.error("GLTFImporter::_decodeMaterial >>> there must be the SPE_materials_options extension for spline usage"),null;var E=e.extensions.KHR_materials_common,x=e.extensions.SPE_materials_layers,_=e.extensions.SPE_materials_options;function T(e){switch(e){case GLTF_MATERIAL_SIDE.FRONT_SIDE:return THREE.FrontSide;case GLTF_MATERIAL_SIDE.BACK_SIDE:return THREE.BackSide;case GLTF_MATERIAL_SIDE.DOUBLE_SIDE:return THREE.DoubleSide}}var A=null;switch(E.technique){case GLTF_LIGHTING_TECHNIQUE.CONSTANT:var S=(new THREE.Color).fromArray(null!==(i=E.ambient)&&void 0!==i?i:[.5,.5,.5]),M=_.visible,O=_.wireframe,R=_.shadingMode===GLTF_MATERIAL_SHADING_MODE.FLAT_SHADING,C=T(_.side);A=new BasicMaterial({name:y,color:S,visible:M,wireframe:O,flatShading:R,side:C,transparent:b,opacity:w});break;case GLTF_LIGHTING_TECHNIQUE.LAMBERT:S=(new THREE.Color).fromArray(null!==(o=E.diffuse)&&void 0!==o?o:[.5,.5,.5]);var I=(new THREE.Color).fromArray(null!==(a=E.emission)&&void 0!==a?a:[0,0,0]);M=_.visible,O=_.wireframe,R=_.shadingMode===GLTF_MATERIAL_SHADING_MODE.FLAT_SHADING,C=T(_.side),A=new LambertMaterial({name:y,color:S,emissive:I,visible:M,wireframe:O,flatShading:R,side:C,transparent:b,opacity:w});break;case GLTF_LIGHTING_TECHNIQUE.BLINN:S=(new THREE.Color).fromArray(null!==(s=E.diffuse)&&void 0!==s?s:[.5,.5,.5]);var L=(new THREE.Color).fromArray(null!==(c=E.specular)&&void 0!==c?c:[.5,.5,.5]),D=null!==(u=E.shininess)&&void 0!==u?u:32;I=(new THREE.Color).fromArray(null!==(l=E.emission)&&void 0!==l?l:[0,0,0]),M=_.visible,O=_.wireframe,R=_.shadingMode===GLTF_MATERIAL_SHADING_MODE.FLAT_SHADING,C=T(_.side),A=new PhongMaterial$1({name:y,color:S,specular:L,shininess:D,emissive:I,visible:M,wireframe:O,flatShading:R,side:C,transparent:b,opacity:w});break;case GLTF_LIGHTING_TECHNIQUE.TOON:S=(new THREE.Color).fromArray(null!==(h=E.ambient)&&void 0!==h?h:[.5,.5,.5]),I=(new THREE.Color).fromArray(null!==(f=E.emission)&&void 0!==f?f:[0,0,0]),M=_.visible,O=_.wireframe,R=_.shadingMode===GLTF_MATERIAL_SHADING_MODE.FLAT_SHADING,C=T(_.side),A=new ToonMaterial({name:y,color:S,emissive:I,visible:M,wireframe:O,flatShading:R,side:C,transparent:b,opacity:w});break;case GLTF_LIGHTING_TECHNIQUE.PHYSICAL:S=(new THREE.Color).fromArray(null!==(d=E.diffuse)&&void 0!==d?d:[.5,.5,.5]);var P=null!==(p=E.roughness)&&void 0!==p?p:.3,N=null!==(m=E.metalness)&&void 0!==m?m:0,B=null!==(v=E.reflectivity)&&void 0!==v?v:.5;I=(new THREE.Color).fromArray(null!==(g=E.emission)&&void 0!==g?g:[0,0,0]),M=_.visible,O=_.wireframe,R=_.shadingMode===GLTF_MATERIAL_SHADING_MODE.FLAT_SHADING,C=T(_.side),A=new PhysicalMaterial({name:y,color:S,roughness:P,metalness:N,reflectivity:B,emissive:I,visible:M,wireframe:O,flatShading:R,side:C,transparent:b,opacity:w});break;default:S=new THREE.Color(9079434),L=new THREE.Color(9079434),A=new PhongMaterial$1({name:y,color:S,specular:L,shininess:D=32,transparent:b,opacity:w})}return this._setupLayersInMaterial(A,x.layers),A.onBeforeCompile=ShaderLib.createCallback(A),A},e.prototype._setupLayersInMaterial=function(e,t){var n,r,i,o,a,s,c,u,l,h,f,d,p,m,v,g,y,b,w,E,x,_,T,A,S,M,O,R,C,I,L,D,P,N,B,k,F,U,H,j,G,V,z,W,q,Y,X,Q,K,J,Z,$,ee,te,ne,re,ie,oe,ae,se,ce,ue,le,he,fe,de,pe,me,ve=this;function ge(e){var t;return null!==(t=ve._textures[e])&&void 0!==t?t:DEFAULT_TEXTURE}function ye(e){for(var t=Math.floor(e.length/4),n=[],r=0;r<t;r++){var i=e[4*r+0],o=e[4*r+1],a=e[4*r+2],s=e[4*r+3];n.push(new THREE.Vector4(i,o,a,s))}return n}var be=e.userData.layers,we=null;be.dispose();for(var Ee=0;Ee<t.length;Ee++){var xe=t[Ee],_e=xe.id,Te=xe.uniforms,Ae={type:xe.type,alpha:null!==(r=null===(n=Te.alpha)||void 0===n?void 0:n.value)&&void 0!==r?r:1,mode:null!==(o=null===(i=Te.mode)||void 0===i?void 0:i.value)&&void 0!==o?o:0,color:(new THREE.Color).fromArray(null!==(s=null===(a=Te.color)||void 0===a?void 0:a.value)&&void 0!==s?s:[.1,.1,.1]),texture:ge(null!==(u=null===(c=Te.texture)||void 0===c?void 0:c.value)&&void 0!==u?u:-1),crop:null!==(h=null===(l=Te.crop)||void 0===l?void 0:l.value)&&void 0!==h?h:0,cnormal:(new THREE.Vector3).fromArray(null!==(d=null===(f=Te.cnormal)||void 0===f?void 0:f.value)&&void 0!==d?d:[0,0,1]),near:null!==(m=null===(p=Te.near)||void 0===p?void 0:p.value)&&void 0!==m?m:700,far:null!==(g=null===(v=Te.far)||void 0===v?void 0:v.value)&&void 0!==g?g:1e3,origin:(new THREE.Vector3).fromArray(null!==(b=null===(y=Te.origin)||void 0===y?void 0:y.value)&&void 0!==b?b:[0,0,0]),isVector:null!==(E=null===(w=Te.isVector)||void 0===w?void 0:w.value)&&void 0!==E?E:0,colorA:(new THREE.Color).fromArray(null!==(_=null===(x=Te.colorA)||void 0===x?void 0:x.value)&&void 0!==_?_:[.1,.1,.1]),colorB:(new THREE.Color).fromArray(null!==(A=null===(T=Te.colorB)||void 0===T?void 0:T.value)&&void 0!==A?A:[.1,.1,.1]),colorC:(new THREE.Color).fromArray(null!==(M=null===(S=Te.colorC)||void 0===S?void 0:S.value)&&void 0!==M?M:[.1,.1,.1]),colorD:(new THREE.Color).fromArray(null!==(R=null===(O=Te.colorD)||void 0===O?void 0:O.value)&&void 0!==R?R:[.1,.1,.1]),scale:null!==(I=null===(C=Te.scale)||void 0===C?void 0:C.value)&&void 0!==I?I:2,move:null!==(D=null===(L=Te.move)||void 0===L?void 0:L.value)&&void 0!==D?D:1,distortion:(new THREE.Vector2).fromArray(null!==(N=null===(P=Te.distortion)||void 0===P?void 0:P.value)&&void 0!==N?N:[1,1]),fA:(new THREE.Vector2).fromArray(null!==(k=null===(B=Te.fA)||void 0===B?void 0:B.value)&&void 0!==k?k:[1.7,9.2]),fB:(new THREE.Vector2).fromArray(null!==(U=null===(F=Te.fB)||void 0===F?void 0:F.value)&&void 0!==U?U:[8.3,2.8]),intA:null!==(j=null===(H=Te.intA)||void 0===H?void 0:H.value)&&void 0!==j?j:10,intB:null!==(V=null===(G=Te.intB)||void 0===G?void 0:G.value)&&void 0!==V?V:10,intC:null!==(W=null===(z=Te.intC)||void 0===z?void 0:z.value)&&void 0!==W?W:10,intD:null!==(Y=null===(q=Te.intD)||void 0===q?void 0:q.value)&&void 0!==Y?Y:10,bias:null!==(Q=null===(X=Te.bias)||void 0===X?void 0:X.value)&&void 0!==Q?Q:.1,intensity:null!==(J=null===(K=Te.intensity)||void 0===K?void 0:K.value)&&void 0!==J?J:2,factor:null!==($=null===(Z=Te.factor)||void 0===Z?void 0:Z.value)&&void 0!==$?$:1,colors:ye(null!==(te=null===(ee=Te.colors)||void 0===ee?void 0:ee.value)&&void 0!==te?te:DEFAULT_ARRAY_COLORS),steps:null!==(re=null===(ne=Te.steps)||void 0===ne?void 0:ne.value)&&void 0!==re?re:DEFAULT_STEPS,gl_type:null!==(oe=null===(ie=Te.gl_type)||void 0===ie?void 0:ie.value)&&void 0!==oe?oe:0,num:null!==(se=null===(ae=Te.num)||void 0===ae?void 0:ae.value)&&void 0!==se?se:2,smooth:null!==(ue=null===(ce=Te.smooth)||void 0===ce?void 0:ce.value)&&void 0!==ue&&ue,offset:(new THREE.Vector2).fromArray(null!==(he=null===(le=Te.offset)||void 0===le?void 0:le.value)&&void 0!==he?he:[0,0]),morph:(new THREE.Vector2).fromArray(null!==(de=null===(fe=Te.morph)||void 0===fe?void 0:fe.value)&&void 0!==de?de:[0,0]),angle:null!==(me=null===(pe=Te.angle)||void 0===pe?void 0:pe.value)&&void 0!==me?me:0};if(0==Ee)we=be.head=new Layer(_e,Ae);else{var Se=new Layer(_e,Ae);we.next=Se,we=Se}}},e.prototype._decodeNodes=function(e){var t=e.nodes;if(t)for(var n=0;n<t.length;n++){var r=t[n],i=this._decodeNode(r);this._nodes.push(i),this._objects[i.uuid]=i}else console.error("GLTFImporter::_decodeMaterials >>> there are no materials in this gltf-file")},e.prototype._decodeInteractions=function(e){for(var t,n,r,i,o=null!==(t=e.extensions.SPE_interactions.interactions)&&void 0!==t?t:[],a=e.nodes,s=0;s<a.length;s++){var c=null!==(i=null===(r=null===(n=a[s].extensions)||void 0===n?void 0:n.SPE_node_3d)||void 0===r?void 0:r.interaction)&&void 0!==i?i:-1;if(c>=0&&c<o.length){var u=o[c],l=this._interactionStates,h=this._objects;this._nodes[s].interaction.fromJSON(u,h,l)}}},e.prototype._decodeNode=function(e){var t,n,r,i,o,a,s,c,u,l,h,f,d,p,m,v,g,y,b,w,E,x,_,T,A,S,M,O,R,C,I,L,D,P,N,B,k,F,U,H;if(!(null===(t=e.extensions)||void 0===t?void 0:t.SPE_node_3d))return console.error("GLTFImporter::_decodeNode >>> tried decoding a non-spline object"),new THREE.Object3D;var j=e.extensions.SPE_node_3d,G=j.type;switch(G){case OBJECT_TYPE.SCENE:var V=null!==(n=e.name)&&void 0!==n?n:"Default Scene",z=null!==(r=j.uuid)&&void 0!==r?r:THREE.MathUtils.generateUUID(),W=new Scene;return W.name=V,W.uuid=z,W;case OBJECT_TYPE.CAMERA:var q=null!==(i=e.camera)&&void 0!==i?i:-1;if(q<0||q>=this._cameras.length)return console.error("GLTFImporter::_decodeNode >>> camera index out of range"),new EmptyObject;var Y=this._cameras[q],X=(new THREE.Vector3).fromArray(null!==(o=e.translation)&&void 0!==o?o:[0,0,0]),Q=(new THREE.Quaternion).fromArray(null!==(a=e.rotation)&&void 0!==a?a:[0,0,0,1]),K=(new THREE.Matrix4).fromArray(null!==(s=j.hiddenMatrix)&&void 0!==s?s:IDENTITY_MATRIX),J=null===(c=j.visible)||void 0===c||c,Z=null!==(u=j.uuid)&&void 0!==u?u:THREE.MathUtils.generateUUID(),$=null!==(l=e.name)&&void 0!==l?l:"Camera_"+THREE.MathUtils.generateUUID();return Y.position.copy(X),Y.quaternion.copy(Q),Y.hiddenMatrix.copy(K),Y.visible=J,Y.uuid=Z,Y.name=$,Y.updateMatrix(),Y;case OBJECT_TYPE.LIGHT:var ee=null!==(f=null===(h=e.extensions.KHR_lights_punctual)||void 0===h?void 0:h.light)&&void 0!==f?f:-1;if(ee<0||ee>=this._lights.length)return console.error("GLTFImporter::_decodeNode >>> light index out of range"),new EmptyObject;var te=this._lights[ee],ne=(new THREE.Vector3).fromArray(null!==(d=e.translation)&&void 0!==d?d:[0,0,0]),re=(new THREE.Quaternion).fromArray(null!==(p=e.rotation)&&void 0!==p?p:[0,0,0,1]),ie=(new THREE.Matrix4).fromArray(null!==(m=j.hiddenMatrix)&&void 0!==m?m:IDENTITY_MATRIX),oe=null===(v=j.visible)||void 0===v||v,ae=null!==(g=j.uuid)&&void 0!==g?g:THREE.MathUtils.generateUUID(),se=null!==(y=e.name)&&void 0!==y?y:"Light_"+THREE.MathUtils.generateUUID();if("HemisphereLight"!==te.type&&te.position.copy(ne),te.visible=oe,te.uuid=ae,te.name=se,"HemisphereLight"!==te.type&&te.hiddenMatrix.copy(ie),"SpotLight"===te.type||"DirectionalLight"===te.type){var ce=(new THREE.Matrix4).makeRotationFromQuaternion(re),ue=new THREE.Vector3(ce.elements[8],ce.elements[9],ce.elements[10]);te.target.position.copy(te.position.clone().add(ue))}return"HemisphereLight"!==te.type&&te.updateMatrix(),te;case OBJECT_TYPE.MESH_3D:case OBJECT_TYPE.MESH_2D:case OBJECT_TYPE.TEXTFRAME:case OBJECT_TYPE.VECTOR_OBJECT:var le=null!==(b=e.mesh)&&void 0!==b?b:-1;(le<0||le>=this._meshes.length)&&console.error("GLTFImporter::_decodeNode >>> geometry index out of range");var he=null!==(w=this._meshes[le])&&void 0!==w?w:new THREE.SphereBufferGeometry(100),fe=(null!==(E=this._gltfFile.meshes)&&void 0!==E?E:[])[le],de=-1;if(fe.primitives.length>0)de=null!==(x=fe.primitives[0].material)&&void 0!==x?x:-1;else{var pe=null===(_=fe.extensions)||void 0===_?void 0:_.SPE_material;de=pe&&null!==(T=pe[0])&&void 0!==T?T:-1}(de<0||de>=this._materials.length)&&console.error("GLTFImporter::_decodeNode >>> material index out of range");var me=null!==(A=this._materials[de])&&void 0!==A?A:new PhongMaterial$1({color:10592673}),ve=null;switch(G){case OBJECT_TYPE.MESH_3D:ve=new Mesh3D(he,me);break;case OBJECT_TYPE.MESH_2D:ve=new Mesh2D(he,me);break;case OBJECT_TYPE.TEXTFRAME:ve=new TextFrame(he,me);var ge=e.extensions.SPE_node_3d.textData.object;ve.fromJSONasync(ge).then((function(){})).catch((function(e){console.error(e)}));break;case OBJECT_TYPE.VECTOR_OBJECT:ve=new VectorObject(he,me)}var ye=(new THREE.Vector3).fromArray(null!==(S=e.translation)&&void 0!==S?S:[0,0,0]),be=(new THREE.Quaternion).fromArray(null!==(M=e.rotation)&&void 0!==M?M:[0,0,0,1]),we=(new THREE.Vector3).fromArray(null!==(O=e.scale)&&void 0!==O?O:[1,1,1]),Ee=(new THREE.Matrix4).fromArray(null!==(R=j.hiddenMatrix)&&void 0!==R?R:IDENTITY_MATRIX),xe=null===(C=j.visible)||void 0===C||C,_e=null!==(I=j.uuid)&&void 0!==I?I:THREE.MathUtils.generateUUID(),Te=null===(L=j.castShadow)||void 0===L||L,Ae=null===(D=j.receiveShadow)||void 0===D||D;return ve.position.copy(ye),ve.quaternion.copy(be),ve.scale.copy(we),ve.hiddenMatrix.copy(Ee),ve.visible=xe,ve.uuid=_e,ve.castShadow=Te,ve.receiveShadow=Ae,ve.updateMatrix(),null!==(P=e.extensions.SPE_node_3d.isCloner)&&void 0!==P&&P&&(ve.cloner=new Cloner(ve).fromJSON(e.extensions.SPE_node_3d.cloner),ve.add(ve.cloner)),ve;case OBJECT_TYPE.EMPTY_OBJECT:var Se=new EmptyObject,Me=(new THREE.Vector3).fromArray(null!==(N=e.translation)&&void 0!==N?N:[0,0,0]),Oe=(new THREE.Quaternion).fromArray(null!==(B=e.rotation)&&void 0!==B?B:[0,0,0,1]),Re=(new THREE.Vector3).fromArray(null!==(k=e.scale)&&void 0!==k?k:[1,1,1]),Ce=(new THREE.Matrix4).fromArray(null!==(F=j.hiddenMatrix)&&void 0!==F?F:IDENTITY_MATRIX),Ie=null===(U=j.visible)||void 0===U||U,Le=null!==(H=j.uuid)&&void 0!==H?H:THREE.MathUtils.generateUUID();return Se.position.copy(Me),Se.quaternion.copy(Oe),Se.scale.copy(Re),Se.hiddenMatrix.copy(Ce),Se.visible=Ie,Se.uuid=Le,Se.updateMatrix(),Se}return console.error("GLTFImporter::_decodeNode >>> unsupported object type ("+G+")"),new THREE.Object3D},e.prototype._decodeSceneGraph=function(e){for(var t,n=[{nodeIndex:0,parentNode:null}];0!=n.length;){var r=n.pop(),i=r.nodeIndex,o=r.parentNode;if(i<this._nodes.length&&i>=0){var a=this._nodes[i];if(!a)continue;o&&o.add(a);for(var s=null!==(t=e.nodes[i].children)&&void 0!==t?t:[],c=0;c<s.length;c++)n.push({nodeIndex:s[c],parentNode:a})}}},e}(),OrbitControls=function(e,t){var n,r,i,o,a;void 0===t&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),t===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=e,this.domElement=t,this.enabled=!0,this.target=new THREE.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!1,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={LEFT:THREE.MOUSE.ROTATE,MIDDLE:THREE.MOUSE.DOLLY,RIGHT:THREE.MOUSE.PAN},this.touches={ONE:THREE.TOUCH.ROTATE,TWO:THREE.TOUCH.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return p.phi},this.getAzimuthalAngle=function(){return p.theta},this.saveState=function(){s.target0.copy(s.target),s.position0.copy(s.object.position),s.zoom0=s.object.zoom},this.reset=function(){s.target.copy(s.target0),s.object.position.copy(s.position0),s.object.zoom=s.zoom0,s.object.updateProjectionMatrix(),s.dispatchEvent(c),s.update(),f=h.NONE},this.update=(n=new THREE.Vector3,r=(new THREE.Quaternion).setFromUnitVectors(e.up,new THREE.Vector3(0,1,0)),i=r.clone().inverse(),o=new THREE.Vector3,a=new THREE.Quaternion,function(){var e=s.object.position;return n.copy(e).sub(s.target),n.applyQuaternion(r),p.setFromVector3(n),s.autoRotate&&f===h.NONE&&R(2*Math.PI/60/60*s.autoRotateSpeed),s.enableDamping?(p.theta+=m.theta*s.dampingFactor,p.phi+=m.phi*s.dampingFactor):(p.theta+=m.theta,p.phi+=m.phi),p.theta=Math.max(s.minAzimuthAngle,Math.min(s.maxAzimuthAngle,p.theta)),p.phi=Math.max(s.minPolarAngle,Math.min(s.maxPolarAngle,p.phi)),p.makeSafe(),p.radius*=v,p.radius=Math.max(s.minDistance,Math.min(s.maxDistance,p.radius)),!0===s.enableDamping?s.target.addScaledVector(g,s.dampingFactor):s.target.add(g),n.setFromSpherical(p),n.applyQuaternion(i),e.copy(s.target).add(n),s.object.lookAt(s.target),!0===s.enableDamping?(m.theta*=1-s.dampingFactor,m.phi*=1-s.dampingFactor,g.multiplyScalar(1-s.dampingFactor)):(m.set(0,0,0),g.set(0,0,0)),v=1,!!(y||o.distanceToSquared(s.object.position)>d||8*(1-a.dot(s.object.quaternion))>d)&&(s.dispatchEvent(c),o.copy(s.object.position),a.copy(s.object.quaternion),y=!1,!0)}),this.dispose=function(){s.domElement.removeEventListener("contextmenu",Z,!1),s.domElement.removeEventListener("mousedown",z,!1),s.domElement.removeEventListener("wheel",Y,!1),s.domElement.removeEventListener("touchstart",Q,!1),s.domElement.removeEventListener("touchend",J,!1),s.domElement.removeEventListener("touchmove",K,!1),document.removeEventListener("mousemove",W,!1),document.removeEventListener("mouseup",q,!1),s.domElement.removeEventListener("keydown",X,!1)};var s=this,c={type:"change"},u={type:"start"},l={type:"end"},h={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},f=h.NONE,d=1e-6,p=new THREE.Spherical,m=new THREE.Spherical,v=1,g=new THREE.Vector3,y=!1,b=new THREE.Vector2,w=new THREE.Vector2,E=new THREE.Vector2,x=new THREE.Vector2,_=new THREE.Vector2,T=new THREE.Vector2,A=new THREE.Vector2,S=new THREE.Vector2,M=new THREE.Vector2;function O(){return Math.pow(.95,s.zoomSpeed)}function R(e){m.theta-=e}function C(e){m.phi-=e}var I=function(){var e=new THREE.Vector3;return function(t,n){e.setFromMatrixColumn(n,0),e.multiplyScalar(-t),g.add(e)}}(),L=function(){var e=new THREE.Vector3;return function(t,n){!0===s.screenSpacePanning?e.setFromMatrixColumn(n,1):(e.setFromMatrixColumn(n,0),e.crossVectors(s.object.up,e)),e.multiplyScalar(t),g.add(e)}}(),D=function(){var e=new THREE.Vector3;return function(t,n){var r=s.domElement;if("PerspectiveCamera"===s.object.cameraType){var i=s.object.position;e.copy(i).sub(s.target);var o=e.length();o*=Math.tan(s.object.fov/2*Math.PI/180),I(2*t*o/r.clientHeight,s.object.matrix),L(2*n*o/r.clientHeight,s.object.matrix)}else"OrthographicCamera"===s.object.cameraType?(I(t*(s.object.right-s.object.left)/s.object.zoom/r.clientWidth,s.object.matrix),L(n*(s.object.top-s.object.bottom)/s.object.zoom/r.clientHeight,s.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),s.enablePan=!1)}}();function P(e){"PerspectiveCamera"===s.object.cameraType?v/=e:"OrthographicCamera"===s.object.cameraType?(s.object.zoom=Math.max(s.minZoom,Math.min(s.maxZoom,s.object.zoom*e)),s.object.updateProjectionMatrix(),y=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),s.enableZoom=!1)}function N(e){"PerspectiveCamera"===s.object.cameraType?v*=e:"OrthographicCamera"===s.object.cameraType?(s.object.zoom=Math.max(s.minZoom,Math.min(s.maxZoom,s.object.zoom/e)),s.object.updateProjectionMatrix(),y=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),s.enableZoom=!1)}function B(e){b.set(e.clientX,e.clientY)}function k(e){x.set(e.clientX,e.clientY)}function F(e){if(1==e.touches.length)b.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),n=.5*(e.touches[0].pageY+e.touches[1].pageY);b.set(t,n)}}function U(e){if(1==e.touches.length)x.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),n=.5*(e.touches[0].pageY+e.touches[1].pageY);x.set(t,n)}}function H(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,r=Math.sqrt(t*t+n*n);A.set(0,r)}function j(e){if(1==e.touches.length)w.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),n=.5*(e.touches[0].pageY+e.touches[1].pageY);w.set(t,n)}E.subVectors(w,b).multiplyScalar(s.rotateSpeed);var r=s.domElement;R(2*Math.PI*E.x/r.clientHeight),C(2*Math.PI*E.y/r.clientHeight),b.copy(w)}function G(e){if(1==e.touches.length)_.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),n=.5*(e.touches[0].pageY+e.touches[1].pageY);_.set(t,n)}T.subVectors(_,x).multiplyScalar(s.panSpeed),D(T.x,T.y),x.copy(_)}function V(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,r=Math.sqrt(t*t+n*n);S.set(0,r),M.set(0,Math.pow(S.y/A.y,s.zoomSpeed)),P(M.y),A.copy(S)}function z(e){if(!1!==s.enabled){var t;switch(e.preventDefault(),s.domElement.focus?s.domElement.focus():window.focus(),e.button){case 0:t=s.mouseButtons.LEFT;break;case 1:t=s.mouseButtons.MIDDLE;break;case 2:t=s.mouseButtons.RIGHT;break;default:t=-1}switch(t){case THREE.MOUSE.DOLLY:if(!1===s.enableZoom)return;!function(e){A.set(e.clientX,e.clientY)}(e),f=h.DOLLY;break;case THREE.MOUSE.ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===s.enablePan)return;k(e),f=h.PAN}else{if(!1===s.enableRotate)return;B(e),f=h.ROTATE}break;case THREE.MOUSE.PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===s.enableRotate)return;B(e),f=h.ROTATE}else{if(!1===s.enablePan)return;k(e),f=h.PAN}break;default:f=h.NONE}f!==h.NONE&&(document.addEventListener("mousemove",W,!1),document.addEventListener("mouseup",q,!1),s.dispatchEvent(u))}}function W(e){if(!1!==s.enabled)switch(e.preventDefault(),f){case h.ROTATE:if(!1===s.enableRotate)return;!function(e){w.set(e.clientX,e.clientY),E.subVectors(w,b).multiplyScalar(s.rotateSpeed);var t=s.domElement;R(2*Math.PI*E.x/t.clientHeight),C(2*Math.PI*E.y/t.clientHeight),b.copy(w),s.update()}(e);break;case h.DOLLY:if(!1===s.enableZoom)return;!function(e){S.set(e.clientX,e.clientY),M.subVectors(S,A),M.y>0?P(O()):M.y<0&&N(O()),A.copy(S),s.update()}(e);break;case h.PAN:if(!1===s.enablePan)return;!function(e){_.set(e.clientX,e.clientY),T.subVectors(_,x).multiplyScalar(s.panSpeed),D(T.x,T.y),x.copy(_),s.update()}(e)}}function q(e){!1!==s.enabled&&(document.removeEventListener("mousemove",W,!1),document.removeEventListener("mouseup",q,!1),s.dispatchEvent(l),f=h.NONE)}function Y(e){!1===s.enabled||!1===s.enableZoom||f!==h.NONE&&f!==h.ROTATE||(e.preventDefault(),e.stopPropagation(),s.dispatchEvent(u),function(e){e.deltaY<0?N(O()):e.deltaY>0&&P(O()),s.update()}(e),s.dispatchEvent(l))}function X(e){!1!==s.enabled&&!1!==s.enableKeys&&!1!==s.enablePan&&function(e){var t=!1;switch(e.keyCode){case s.keys.UP:D(0,s.keyPanSpeed),t=!0;break;case s.keys.BOTTOM:D(0,-s.keyPanSpeed),t=!0;break;case s.keys.LEFT:D(s.keyPanSpeed,0),t=!0;break;case s.keys.RIGHT:D(-s.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),s.update())}(e)}function Q(e){if(!1!==s.enabled){switch(e.preventDefault(),e.touches.length){case 1:switch(s.touches.ONE){case THREE.TOUCH.ROTATE:if(!1===s.enableRotate)return;F(e),f=h.TOUCH_ROTATE;break;case THREE.TOUCH.PAN:if(!1===s.enablePan)return;U(e),f=h.TOUCH_PAN;break;default:f=h.NONE}break;case 2:switch(s.touches.TWO){case THREE.TOUCH.DOLLY_PAN:if(!1===s.enableZoom&&!1===s.enablePan)return;!function(e){s.enableZoom&&H(e),s.enablePan&&U(e)}(e),f=h.TOUCH_DOLLY_PAN;break;case THREE.TOUCH.DOLLY_ROTATE:if(!1===s.enableZoom&&!1===s.enableRotate)return;!function(e){s.enableZoom&&H(e),s.enableRotate&&F(e)}(e),f=h.TOUCH_DOLLY_ROTATE;break;default:f=h.NONE}break;default:f=h.NONE}f!==h.NONE&&s.dispatchEvent(u)}}function K(e){if(!1!==s.enabled)switch(e.preventDefault(),e.stopPropagation(),f){case h.TOUCH_ROTATE:if(!1===s.enableRotate)return;j(e),s.update();break;case h.TOUCH_PAN:if(!1===s.enablePan)return;G(e),s.update();break;case h.TOUCH_DOLLY_PAN:if(!1===s.enableZoom&&!1===s.enablePan)return;!function(e){s.enableZoom&&V(e),s.enablePan&&G(e)}(e),s.update();break;case h.TOUCH_DOLLY_ROTATE:if(!1===s.enableZoom&&!1===s.enableRotate)return;!function(e){s.enableZoom&&V(e),s.enableRotate&&j(e)}(e),s.update();break;default:f=h.NONE}}function J(e){!1!==s.enabled&&(s.dispatchEvent(l),f=h.NONE)}function Z(e){!1!==s.enabled&&e.preventDefault()}s.domElement.addEventListener("contextmenu",Z,!1),s.domElement.addEventListener("mousedown",z,!1),s.domElement.addEventListener("wheel",Y,!1),s.domElement.addEventListener("touchstart",Q,!1),s.domElement.addEventListener("touchend",J,!1),s.domElement.addEventListener("touchmove",K,!1),s.domElement.addEventListener("keydown",X,!1),-1===s.domElement.tabIndex&&(s.domElement.tabIndex=0),this.update()};OrbitControls.prototype=Object.create(THREE.EventDispatcher.prototype),OrbitControls.prototype.constructor=OrbitControls;var MapControls=function(e,t){OrbitControls.call(this,e,t),this.mouseButtons.LEFT=THREE.MOUSE.PAN,this.mouseButtons.RIGHT=THREE.MOUSE.ROTATE,this.touches.ONE=THREE.TOUCH.PAN,this.touches.TWO=THREE.TOUCH.DOLLY_ROTATE};MapControls.prototype=Object.create(THREE.EventDispatcher.prototype),MapControls.prototype.constructor=MapControls;var Application=function(){function e(){this._viewportMode=RUNTIME_VIEWMODE.FULLSCREEN,this._viewportWidth=window.innerWidth,this._viewportHeight=window.innerHeight,this._running=!1,this._renderer=null,this._scene=null,this._camera=null,this._controls=null,this._playmode=null,this._postProcessing=null,this._decoder=new GLTFImporter,window.addEventListener("resize",this.resize.bind(this))}return e.prototype.start=function(e,t){var n=this;const r=new Promise(t=>t(e));r.then((function(e){var r;r=__read(n._decoder.decode(CreateFromJson(e)),4),n._scene=r[0],n._camera=r[1],n._exportOptions=r[2],n._sceneOptions=r[3],n.init(t),n._running=!0,n.run(),n.resize()})).catch((function(e){console.error(e)}))},e.prototype.run=function(){requestAnimationFrame(this.run.bind(this)),this.render()},e.prototype.render=function(){this._running&&(this._renderer?(this._controls&&this._controls.update(),this._playmode&&!this._playmode.isEnable&&this._playmode.activate(),this._scene&&this._camera&&(this._postProcessing?(this._renderer.autoClear=!0,this._postProcessing.render()):(this._renderer.autoClear=!0,this._renderer.render(this._scene,this._camera)))):console.error("Application::render >>> tried to renderer without a renderer"))},e.prototype.resize=function(){this._running&&this._renderer&&(this._viewportMode===RUNTIME_VIEWMODE.FULLSCREEN&&(this._viewportWidth=window.innerWidth,this._viewportHeight=window.innerHeight),this._camera&&("PerspectiveCamera"===this._camera.cameraType?this._camera.aspect=this._viewportWidth/this._viewportHeight:"OrthographicCamera"===this._camera.cameraType&&(this._camera.left=-this._viewportWidth/2,this._camera.right=this._viewportWidth/2,this._camera.top=this._viewportHeight/2,this._camera.bottom=-this._viewportHeight/2),this._camera.updateProjectionMatrix()),this._renderer&&this._renderer.setSize(this._viewportWidth,this._viewportHeight))},e.prototype.init=function(e){e=e||document.getElementById("canvas3d");var t,n,r,i,o,a,s,c,u,l,h,f,d,p,m,v,g,y,b,w,E,x,_,T,A,S,M,O,R,C=e;null!==(r=null===(n=null===(t=this._sceneOptions)||void 0===t?void 0:t.postProcessing)||void 0===n?void 0:n.enabled)&&void 0!==r&&r?this._renderer=new THREE.WebGLRenderer({canvas:C,antialias:!1,stencil:!1,depth:!1,powerPreference:"high-performance"}):this._renderer=new THREE.WebGLRenderer({canvas:C,antialias:!0,alpha:!0,stencil:!0,depth:!0});var I=null!==(o=null===(i=this._exportOptions)||void 0===i?void 0:i.viewWidth)&&void 0!==o?o:window.innerWidth,L=null!==(s=null===(a=this._exportOptions)||void 0===a?void 0:a.viewHeight)&&void 0!==s?s:window.innerHeight,D=null!==(u=null===(c=this._exportOptions)||void 0===c?void 0:c.bgColor)&&void 0!==u?u:new THREE.Color(1644825),P=null!==(h=null===(l=this._exportOptions)||void 0===l?void 0:l.bgAlpha)&&void 0!==h?h:0;if(this._viewportWidth=I,this._viewportHeight=L,this._renderer.setPixelRatio(window.devicePixelRatio),this._renderer.setSize(this._viewportWidth,this._viewportHeight),this._renderer.shadowMap.enabled=!0,this._renderer.shadowMap.type=THREE.PCFSoftShadowMap,this._renderer.setClearColor(D,P),this._viewportMode=null!==(d=null===(f=this._exportOptions)||void 0===f?void 0:f.viewMode)&&void 0!==d?d:RUNTIME_VIEWMODE.FULLSCREEN,(null===(m=null===(p=this._exportOptions)||void 0===p?void 0:p.useOrbitControls)||void 0===m||m)&&(this._controls=new OrbitControls(this._camera,this._renderer.domElement),this._controls.target.copy(null!==(g=null===(v=this._exportOptions)||void 0===v?void 0:v.orbitTarget)&&void 0!==g?g:new THREE.Vector3),this._controls.enableRotate=null!==(b=null===(y=this._exportOptions)||void 0===y?void 0:y.cameraRotate)&&void 0!==b&&b,this._controls.enablePan=null!==(E=null===(w=this._exportOptions)||void 0===w?void 0:w.cameraPan)&&void 0!==E&&E,this._controls.enableZoom=null!==(_=null===(x=this._exportOptions)||void 0===x?void 0:x.cameraZoom)&&void 0!==_&&_,this._controls.enableDamping=null!==(A=null===(T=this._exportOptions)||void 0===T?void 0:T.orbitDamped)&&void 0!==A&&A,null===(S=this._exportOptions)||void 0===S||S.orbitDamped,this._controls.rotateSpeed=1,this._controls.panSpeed=1),this._playmode=new PlayMode(this._renderer.domElement,this._scene,this._camera),null===(M=this._sceneOptions)||void 0===M?void 0:M.fog){var N=this._sceneOptions.fog,B=new THREE.Fog(N.color.getHex(),N.near,N.far);this._scene.fog=B}(null===(O=this._sceneOptions)||void 0===O?void 0:O.fogExp2)&&(N=this._sceneOptions.fogExp2,B=new THREE.FogExp2(N.color.getHex(),N.density),this._scene.fog=B),(null===(R=this._sceneOptions)||void 0===R?void 0:R.postProcessing)&&this._sceneOptions.postProcessing.enabled&&(this._postProcessing=new Post,this._postProcessing.fromJSON(this._sceneOptions.postProcessing.data),this._postProcessing.init({renderer:this._renderer,camera:this._camera,scene:this._scene}))},e}(),_canvas;return THREE.ImageUtils.getDataURL=function(e){if(/^data:/i.test(e.src))return e.src;if("undefined"==typeof HTMLCanvasElement)return e.src;var t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===_canvas&&(_canvas=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),_canvas.width=e.width,_canvas.height=e.height;var n=_canvas.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=_canvas}return t.toDataURL("image/png")},exports.Application=Application,Object.defineProperty(exports,"__esModule",{value:!0}),exports},SpeRuntime=speRuntimeFactory({},window.THREE);var Spline={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{style:e.containerStyle,attrs:{className:e.className}},[n("canvas",{ref:"spline",style:e.canvasStyle,attrs:{id:e.id}})])},staticRenderFns:[],props:{id:{type:String},scene:{type:Object},className:{type:String},canvasStyle:{type:Object,default:()=>({height:"100%",width:"100%",outline:"none"})},containerStyle:{type:Object,default:()=>({width:"100%",height:"100%",overflow:"hidden",position:"relative"})}},mounted(){(new SpeRuntime.Application).start(this.scene,this.$refs.spline)}};__webpack_exports__["a"]=Spline},"485a":function(e,t,n){var r=n("da84"),i=n("c65b"),o=n("1626"),a=n("861d"),s=r.TypeError;e.exports=function(e,t){var n,r;if("string"===t&&o(n=e.toString)&&!a(r=i(n,e)))return r;if(o(n=e.valueOf)&&!a(r=i(n,e)))return r;if("string"!==t&&o(n=e.toString)&&!a(r=i(n,e)))return r;throw s("Can't convert object to primitive value")}},4930:function(e,t,n){var r=n("2d00"),i=n("d039");e.exports=!!Object.getOwnPropertySymbols&&!i((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&r&&r<41}))},"4c53":function(e,t,n){"use strict";var r=n("23e7"),i=n("857a"),o=n("af03");r({target:"String",proto:!0,forced:o("sub")},{sub:function(){return i(this,"sub","","")}})},"4d64":function(e,t,n){var r=n("fc6a"),i=n("23cb"),o=n("07fa"),a=function(e){return function(t,n,a){var s,c=r(t),u=o(c),l=i(a,u);if(e&&n!=n){while(u>l)if(s=c[l++],s!=s)return!0}else for(;u>l;l++)if((e||l in c)&&c[l]===n)return e||l||0;return!e&&-1}};e.exports={includes:a(!0),indexOf:a(!1)}},"4de4":function(e,t,n){"use strict";var r=n("23e7"),i=n("b727").filter,o=n("1dde"),a=o("filter");r({target:"Array",proto:!0,forced:!a},{filter:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},5087:function(e,t,n){var r=n("da84"),i=n("68ee"),o=n("0d51"),a=r.TypeError;e.exports=function(e){if(i(e))return e;throw a(o(e)+" is not a constructor")}},"50c4":function(e,t,n){var r=n("5926"),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},5692:function(e,t,n){var r=n("c430"),i=n("c6cd");(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.20.1",mode:r?"pure":"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})},"56ef":function(e,t,n){var r=n("d066"),i=n("e330"),o=n("241c"),a=n("7418"),s=n("825a"),c=i([].concat);e.exports=r("Reflect","ownKeys")||function(e){var t=o.f(s(e)),n=a.f;return n?c(t,n(e)):t}},"577e":function(e,t,n){var r=n("da84"),i=n("f5df"),o=r.String;e.exports=function(e){if("Symbol"===i(e))throw TypeError("Cannot convert a Symbol value to a string");return o(e)}},"588e":function(e,t,n){"use strict";var r=n("cc84"),i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},i(e,t)};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var a=function(){return a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},a.apply(this,arguments)};function s(e,t,n,r){function i(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function a(e){try{c(r.next(e))}catch(t){o(t)}}function s(e){try{c(r["throw"](e))}catch(t){o(t)}}function c(e){e.done?n(e.value):i(e.value).then(a,s)}c((r=r.apply(e,t||[])).next())}))}function c(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(e){return function(t){return c([e,t])}}function c(o){if(n)throw new TypeError("Generator is already executing.");while(a)try{if(n=1,r&&(i=2&o[0]?r["return"]:o[0]?r["throw"]||((i=r["return"])&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!(i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}}Object.create;function u(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}Object.create;var l=n("a8e9"),h=n("ffa6"),f="firebasestorage.googleapis.com",d="storageBucket",p=12e4,m=6e5,v=function(e){function t(n,r){var i=e.call(this,g(n),"Firebase Storage: "+r+" ("+g(n)+")")||this;return i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(i,t.prototype),i}return o(t,e),t.prototype._codeEquals=function(e){return g(e)===this.code},Object.defineProperty(t.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=this._baseMessage+"\n"+this.customData.serverResponse:this.message=this._baseMessage},enumerable:!1,configurable:!0}),t}(l["c"]);function g(e){return"storage/"+e}function y(){var e="An unknown error occurred, please check the error payload for server response.";return new v("unknown",e)}function b(e){return new v("object-not-found","Object '"+e+"' does not exist.")}function w(e){return new v("quota-exceeded","Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function E(){var e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new v("unauthenticated",e)}function x(){return new v("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}function _(e){return new v("unauthorized","User does not have permission to access '"+e+"'.")}function T(){return new v("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function A(){return new v("canceled","User canceled the upload/download.")}function S(e){return new v("invalid-url","Invalid URL '"+e+"'.")}function M(e){return new v("invalid-default-bucket","Invalid default bucket '"+e+"'.")}function O(){return new v("no-default-bucket","No default bucket found. Did you set the '"+d+"' property when initializing the app?")}function R(){return new v("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function C(){return new v("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}function I(){return new v("no-download-url","The given file does not have any download URLs.")}function L(e){return new v("invalid-argument",e)}function D(){return new v("app-deleted","The Firebase app was deleted.")}function P(e){return new v("invalid-root-operation","The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function N(e,t){return new v("invalid-format","String does not match format '"+e+"': "+t)}function B(e){throw new v("internal-error","Internal error: "+e)}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k(e){return atob(e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var F={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},U=function(){function e(e,t){this.data=e,this.contentType=t||null}return e}();function H(e,t){switch(e){case F.RAW:return new U(j(t));case F.BASE64:case F.BASE64URL:return new U(V(e,t));case F.DATA_URL:return new U(W(t),q(t))}throw y()}function j(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r)){var i=n<e.length-1&&56320===(64512&e.charCodeAt(n+1));if(i){var o=r,a=e.charCodeAt(++n);r=65536|(1023&o)<<10|1023&a,t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else t.push(239,191,189)}else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function G(e){var t;try{t=decodeURIComponent(e)}catch(n){throw N(F.DATA_URL,"Malformed data URL.")}return j(t)}function V(e,t){switch(e){case F.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r){var i=n?"-":"_";throw N(e,"Invalid character '"+i+"' found: is it base64url encoded?")}break;case F.BASE64URL:var o=-1!==t.indexOf("+"),a=-1!==t.indexOf("/");if(o||a){i=o?"+":"/";throw N(e,"Invalid character '"+i+"' found: is it base64 encoded?")}t=t.replace(/-/g,"+").replace(/_/g,"/");break}var s;try{s=k(t)}catch(l){throw N(e,"Invalid character found")}for(var c=new Uint8Array(s.length),u=0;u<s.length;u++)c[u]=s.charCodeAt(u);return c}var z=function(){function e(e){this.base64=!1,this.contentType=null;var t=e.match(/^data:([^,]+)?,/);if(null===t)throw N(F.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n=t[1]||null;null!=n&&(this.base64=Y(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-";base64".length):n),this.rest=e.substring(e.indexOf(",")+1)}return e}();function W(e){var t=new z(e);return t.base64?V(F.BASE64,t.rest):G(t.rest)}function q(e){var t=new z(e);return t.contentType}function Y(e,t){var n=e.length>=t.length;return!!n&&e.substring(e.length-t.length)===t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var X,Q={STATE_CHANGED:"state_changed"},K={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function J(e){switch(e){case"running":case"pausing":case"canceling":return K.RUNNING;case"paused":return K.PAUSED;case"success":return K.SUCCESS;case"canceled":return K.CANCELED;case"error":return K.ERROR;default:return K.ERROR}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(e){e[e["NO_ERROR"]=0]="NO_ERROR",e[e["NETWORK_ERROR"]=1]="NETWORK_ERROR",e[e["ABORT"]=2]="ABORT"})(X||(X={}));
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Z=function(){function e(){var e=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=X.NO_ERROR,this.sendPromise_=new Promise((function(t){e.xhr_.addEventListener("abort",(function(){e.errorCode_=X.ABORT,t()})),e.xhr_.addEventListener("error",(function(){e.errorCode_=X.NETWORK_ERROR,t()})),e.xhr_.addEventListener("load",(function(){t()}))}))}return e.prototype.send=function(e,t,n,r){if(this.sent_)throw B("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},e.prototype.getErrorCode=function(){if(!this.sent_)throw B("cannot .getErrorCode() before sending");return this.errorCode_},e.prototype.getStatus=function(){if(!this.sent_)throw B("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}},e.prototype.getResponseText=function(){if(!this.sent_)throw B("cannot .getResponseText() before sending");return this.xhr_.responseText},e.prototype.abort=function(){this.xhr_.abort()},e.prototype.getResponseHeader=function(e){return this.xhr_.getResponseHeader(e)},e.prototype.addUploadProgressListener=function(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)},e.prototype.removeUploadProgressListener=function(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)},e}();function $(){return new Z}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ee=function(){function e(){}return e.prototype.createConnection=function(){return $()},e}(),te=function(){function e(e,t){this.bucket=e,this.path_=t}return Object.defineProperty(e.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),e.prototype.fullServerUrl=function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)},e.prototype.bucketOnlyServerUrl=function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o"},e.makeFromBucketSpec=function(t,n){var r;try{r=e.makeFromUrl(t,n)}catch(i){return new e(t,"")}if(""===r.path)return r;throw M(t)},e.makeFromUrl=function(t,n){var r=null,i="([A-Za-z0-9.\\-_]+)";function o(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}var a="(/(.*))?$",s=new RegExp("^gs://"+i+a,"i"),c={bucket:1,path:3};function u(e){e.path_=decodeURIComponent(e.path)}for(var l="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),d="(/([^?#]*).*)?$",p=new RegExp("^https?://"+h+"/"+l+"/b/"+i+"/o"+d,"i"),m={bucket:1,path:3},v=n===f?"(?:storage.googleapis.com|storage.cloud.google.com)":n,g="([^?#]*)",y=new RegExp("^https?://"+v+"/"+i+"/"+g,"i"),b={bucket:1,path:2},w=[{regex:s,indices:c,postModify:o},{regex:p,indices:m,postModify:u},{regex:y,indices:b,postModify:u}],E=0;E<w.length;E++){var x=w[E],_=x.regex.exec(t);if(_){var T=_[x.indices.bucket],A=_[x.indices.path];A||(A=""),r=new e(T,A),x.postModify(r);break}}if(null==r)throw S(t);return r},e}(),ne=function(){function e(e){this.promise_=Promise.reject(e)}return e.prototype.getPromise=function(){return this.promise_},e.prototype.cancel=function(e){},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function re(e,t,n){var r=1,i=null,o=!1,a=0;function s(){return 2===a}var c=!1;function l(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];c||(c=!0,t.apply(null,e))}function h(t){i=setTimeout((function(){i=null,e(f,s())}),t)}function f(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(!c)if(e)l.call.apply(l,u([null,e],t));else{var i,f=s()||o;if(f)l.call.apply(l,u([null,e],t));else r<64&&(r*=2),1===a?(a=2,i=0):i=1e3*(r+Math.random()),h(i)}}var d=!1;function p(e){d||(d=!0,c||(null!==i?(e||(a=2),clearTimeout(i),h(0)):e||(a=1)))}return h(0),setTimeout((function(){o=!0,p(!0)}),n),p}function ie(e){e(!1)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oe(e){return void 0!==e}function ae(e){return"function"===typeof e}function se(e){return"object"===typeof e&&!Array.isArray(e)}function ce(e){return"string"===typeof e||e instanceof String}function ue(e){return le()&&e instanceof Blob}function le(){return"undefined"!==typeof Blob}function he(e,t,n,r){if(r<t)throw L("Invalid value for '"+e+"'. Expected "+t+" or greater.");if(r>n)throw L("Invalid value for '"+e+"'. Expected "+n+" or less.")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fe(e,t){var n=t.match(/^(\w+):\/\/.+/),r=null===n||void 0===n?void 0:n[1],i=t;return null==r&&(i="https://"+t),i+"/v0"+e}function de(e){var t=encodeURIComponent,n="?";for(var r in e)if(e.hasOwnProperty(r)){var i=t(r)+"="+t(e[r]);n=n+i+"&"}return n=n.slice(0,-1),n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pe=function(){function e(e,t,n,r,i,o,a,s,c,u,l){var h=this;this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=a,this.errorCallback_=s,this.progressCallback_=u,this.timeout_=c,this.pool_=l,this.promise_=new Promise((function(e,t){h.resolve_=e,h.reject_=t,h.start_()}))}return e.prototype.start_=function(){var e=this;function t(t,n){if(n)t(!1,new me(!1,null,!0));else{var r=e.pool_.createConnection();e.pendingConnection_=r,null!==e.progressCallback_&&r.addUploadProgressListener(i),r.send(e.url_,e.method_,e.body_,e.headers_).then((function(){null!==e.progressCallback_&&r.removeUploadProgressListener(i),e.pendingConnection_=null;var n=r.getErrorCode()===X.NO_ERROR,o=r.getStatus();if(n&&!e.isRetryStatusCode_(o)){var a=-1!==e.successCodes_.indexOf(o);t(!0,new me(a,r))}else{var s=r.getErrorCode()===X.ABORT;t(!1,new me(!1,null,s))}}))}function i(t){var n=t.loaded,r=t.lengthComputable?t.total:-1;null!==e.progressCallback_&&e.progressCallback_(n,r)}}function n(t,n){var r=e.resolve_,i=e.reject_,o=n.connection;if(n.wasSuccessCode)try{var a=e.callback_(o,o.getResponseText());oe(a)?r(a):r()}catch(c){i(c)}else if(null!==o){var s=y();s.serverResponse=o.getResponseText(),e.errorCallback_?i(e.errorCallback_(o,s)):i(s)}else if(n.canceled){s=e.appDelete_?D():A();i(s)}else{s=T();i(s)}}this.canceled_?n(!1,new me(!1,null,!0)):this.backoffId_=re(t,n,this.timeout_)},e.prototype.getPromise=function(){return this.promise_},e.prototype.cancel=function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&ie(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()},e.prototype.isRetryStatusCode_=function(e){var t=e>=500&&e<600,n=[408,429],r=-1!==n.indexOf(e),i=-1!==this.additionalRetryCodes_.indexOf(e);return t||r||i},e}(),me=function(){function e(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}return e}();function ve(e,t){null!==t&&t.length>0&&(e["Authorization"]="Firebase "+t)}function ge(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}function ye(e,t){t&&(e["X-Firebase-GMPID"]=t)}function be(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}function we(e,t,n,r,i,o){var a=de(e.urlParams),s=e.url+a,c=Object.assign({},e.headers);return ye(c,t),ve(c,n),ge(c,o),be(c,r),new pe(s,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ee(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function xe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Ee();if(void 0!==n){for(var r=new n,i=0;i<e.length;i++)r.append(e[i]);return r.getBlob()}if(le())return new Blob(e);throw new v("unsupported-environment","This browser doesn't seem to support creating Blobs")}function _e(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Te=function(){function e(e,t){var n=0,r="";ue(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}return e.prototype.size=function(){return this.size_},e.prototype.type=function(){return this.type_},e.prototype.slice=function(t,n){if(ue(this.data_)){var r=this.data_,i=_e(r,t,n);return null===i?null:new e(i)}var o=new Uint8Array(this.data_.buffer,t,n-t);return new e(o,!0)},e.getBlob=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(le()){var r=t.map((function(t){return t instanceof e?t.data_:t}));return new e(xe.apply(null,r))}var i=t.map((function(e){return ce(e)?H(F.RAW,e).data:e.data_})),o=0;i.forEach((function(e){o+=e.byteLength}));var a=new Uint8Array(o),s=0;return i.forEach((function(e){for(var t=0;t<e.length;t++)a[s++]=e[t]})),new e(a,!0)},e.prototype.uploadData=function(){return this.data_},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ae(e){var t;try{t=JSON.parse(e)}catch(n){return null}return se(t)?t:null}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Se(e){if(0===e.length)return null;var t=e.lastIndexOf("/");if(-1===t)return"";var n=e.slice(0,t);return n}function Me(e,t){var n=t.split("/").filter((function(e){return e.length>0})).join("/");return 0===e.length?n:e+"/"+n}function Oe(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Re(e,t){return t}var Ce=function(){function e(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||Re}return e}(),Ie=null;function Le(e){return!ce(e)||e.length<2?e:Oe(e)}function De(){if(Ie)return Ie;var e=[];function t(e,t){return Le(t)}e.push(new Ce("bucket")),e.push(new Ce("generation")),e.push(new Ce("metageneration")),e.push(new Ce("name","fullPath",!0));var n=new Ce("name");function r(e,t){return void 0!==t?Number(t):t}n.xform=t,e.push(n);var i=new Ce("size");return i.xform=r,e.push(i),e.push(new Ce("timeCreated")),e.push(new Ce("updated")),e.push(new Ce("md5Hash",null,!0)),e.push(new Ce("cacheControl",null,!0)),e.push(new Ce("contentDisposition",null,!0)),e.push(new Ce("contentEncoding",null,!0)),e.push(new Ce("contentLanguage",null,!0)),e.push(new Ce("contentType",null,!0)),e.push(new Ce("metadata","customMetadata",!0)),Ie=e,Ie}function Pe(e,t){function n(){var n=e["bucket"],r=e["fullPath"],i=new te(n,r);return t._makeStorageReference(i)}Object.defineProperty(e,"ref",{get:n})}function Ne(e,t,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var a=n[o];r[a.local]=a.xform(r,t[a.server])}return Pe(r,e),r}function Be(e,t,n){var r=Ae(t);if(null===r)return null;var i=r;return Ne(e,i,n)}function ke(e,t,n){var r=Ae(t);if(null===r)return null;if(!ce(r["downloadTokens"]))return null;var i=r["downloadTokens"];if(0===i.length)return null;var o=encodeURIComponent,a=i.split(","),s=a.map((function(t){var r=e["bucket"],i=e["fullPath"],a="/b/"+o(r)+"/o/"+o(i),s=fe(a,n),c=de({alt:"media",token:t});return s+c}));return s[0]}function Fe(e,t){for(var n={},r=t.length,i=0;i<r;i++){var o=t[i];o.writable&&(n[o.server]=e[o.local])}return JSON.stringify(n)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ue="prefixes",He="items";function je(e,t,n){var r={prefixes:[],items:[],nextPageToken:n["nextPageToken"]};if(n[Ue])for(var i=0,o=n[Ue];i<o.length;i++){var a=o[i],s=a.replace(/\/$/,""),c=e._makeStorageReference(new te(t,s));r.prefixes.push(c)}if(n[He])for(var u=0,l=n[He];u<l.length;u++){var h=l[u];c=e._makeStorageReference(new te(t,h["name"]));r.items.push(c)}return r}function Ge(e,t,n){var r=Ae(n);if(null===r)return null;var i=r;return je(e,t,i)}var Ve=function(){function e(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}return e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ze(e){if(!e)throw y()}function We(e,t){function n(n,r){var i=Be(e,r,t);return ze(null!==i),i}return n}function qe(e,t){function n(n,r){var i=Ge(e,t,r);return ze(null!==i),i}return n}function Ye(e,t){function n(n,r){var i=Be(e,r,t);return ze(null!==i),ke(i,r,e.host)}return n}function Xe(e){function t(t,n){var r;return r=401===t.getStatus()?t.getResponseText().includes("Firebase App Check token is invalid")?x():E():402===t.getStatus()?w(e.bucket):403===t.getStatus()?_(e.path):n,r.serverResponse=n.serverResponse,r}return t}function Qe(e){var t=Xe(e);function n(n,r){var i=t(n,r);return 404===n.getStatus()&&(i=b(e.path)),i.serverResponse=r.serverResponse,i}return n}function Ke(e,t,n){var r=t.fullServerUrl(),i=fe(r,e.host),o="GET",a=e.maxOperationRetryTime,s=new Ve(i,o,We(e,n),a);return s.errorHandler=Qe(t),s}function Je(e,t,n,r,i){var o={};t.isRoot?o["prefix"]="":o["prefix"]=t.path+"/",n&&n.length>0&&(o["delimiter"]=n),r&&(o["pageToken"]=r),i&&(o["maxResults"]=i);var a=t.bucketOnlyServerUrl(),s=fe(a,e.host),c="GET",u=e.maxOperationRetryTime,l=new Ve(s,c,qe(e,t.bucket),u);return l.urlParams=o,l.errorHandler=Xe(t),l}function Ze(e,t,n){var r=t.fullServerUrl(),i=fe(r,e.host),o="GET",a=e.maxOperationRetryTime,s=new Ve(i,o,Ye(e,n),a);return s.errorHandler=Qe(t),s}function $e(e,t,n,r){var i=t.fullServerUrl(),o=fe(i,e.host),a="PATCH",s=Fe(n,r),c={"Content-Type":"application/json; charset=utf-8"},u=e.maxOperationRetryTime,l=new Ve(o,a,We(e,r),u);return l.headers=c,l.body=s,l.errorHandler=Qe(t),l}function et(e,t){var n=t.fullServerUrl(),r=fe(n,e.host),i="DELETE",o=e.maxOperationRetryTime;function a(e,t){}var s=new Ve(r,i,a,o);return s.successCodes=[200,204],s.errorHandler=Qe(t),s}function tt(e,t){return e&&e["contentType"]||t&&t.type()||"application/octet-stream"}function nt(e,t,n){var r=Object.assign({},n);return r["fullPath"]=e.path,r["size"]=t.size(),r["contentType"]||(r["contentType"]=tt(null,t)),r}function rt(e,t,n,r,i){var o=t.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function s(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}var c=s();a["Content-Type"]="multipart/related; boundary="+c;var u=nt(t,r,i),l=Fe(u,n),h="--"+c+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+l+"\r\n--"+c+"\r\nContent-Type: "+u["contentType"]+"\r\n\r\n",f="\r\n--"+c+"--",d=Te.getBlob(h,r,f);if(null===d)throw R();var p={name:u["fullPath"]},m=fe(o,e.host),v="POST",g=e.maxUploadRetryTime,y=new Ve(m,v,We(e,n),g);return y.urlParams=p,y.headers=a,y.body=d.uploadData(),y.errorHandler=Xe(t),y}var it=function(){function e(e,t,n,r){this.current=e,this.total=t,this.finalized=!!n,this.metadata=r||null}return e}();function ot(e,t){var n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(i){ze(!1)}var r=t||["active"];return ze(!!n&&-1!==r.indexOf(n)),n}function at(e,t,n,r,i){var o=t.bucketOnlyServerUrl(),a=nt(t,r,i),s={name:a["fullPath"]},c=fe(o,e.host),u="POST",l={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":""+r.size(),"X-Goog-Upload-Header-Content-Type":a["contentType"],"Content-Type":"application/json; charset=utf-8"},h=Fe(a,n),f=e.maxUploadRetryTime;function d(e){var t;ot(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(n){ze(!1)}return ze(ce(t)),t}var p=new Ve(c,u,d,f);return p.urlParams=s,p.headers=l,p.body=h,p.errorHandler=Xe(t),p}function st(e,t,n,r){var i={"X-Goog-Upload-Command":"query"};function o(e){var t=ot(e,["active","final"]),n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(o){ze(!1)}n||ze(!1);var i=Number(n);return ze(!isNaN(i)),new it(i,r.size(),"final"===t)}var a="POST",s=e.maxUploadRetryTime,c=new Ve(n,a,o,s);return c.headers=i,c.errorHandler=Xe(t),c}var ct=262144;function ut(e,t,n,r,i,o,a,s){var c=new it(0,0);if(a?(c.current=a.current,c.total=a.total):(c.current=0,c.total=r.size()),r.size()!==c.total)throw C();var u=c.total-c.current,l=u;i>0&&(l=Math.min(l,i));var h=c.current,f=h+l,d=l===u?"upload, finalize":"upload",p={"X-Goog-Upload-Command":d,"X-Goog-Upload-Offset":""+c.current},m=r.slice(h,f);if(null===m)throw R();function v(e,n){var i,a=ot(e,["active","final"]),s=c.current+l,u=r.size();return i="final"===a?We(t,o)(e,n):null,new it(s,u,"final"===a,i)}var g="POST",y=t.maxUploadRetryTime,b=new Ve(n,g,v,y);return b.headers=p,b.body=m.uploadData(),b.progressCallback=s||null,b.errorHandler=Xe(e),b}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lt=function(){function e(e,t,n){var r=ae(e)||null!=t||null!=n;if(r)this.next=e,this.error=t,this.complete=n;else{var i=e;this.next=i.next,this.error=i.error,this.complete=i.complete}}return e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ht(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];Promise.resolve().then((function(){return e.apply(void 0,t)}))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ft=function(){function e(e,t,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=n,this._mappings=De(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(e){r._request=void 0,r._chunkMultiplier=1,e._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=e,r._transition("error"))},this._metadataErrorHandler=function(e){r._request=void 0,e._codeEquals("canceled")?r.completeTransitions_():(r._error=e,r._transition("error"))},this._promise=new Promise((function(e,t){r._resolve=e,r._reject=t,r._start()})),this._promise.then(null,(function(){}))}return e.prototype._makeProgressCallback=function(){var e=this,t=this._transferred;return function(n){return e._updateProgress(t+n)}},e.prototype._shouldDoResumable=function(e){return e.size()>262144},e.prototype._start=function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},e.prototype._resolveToken=function(e){var t=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((function(n){var r=n[0],i=n[1];switch(t._state){case"running":e(r,i);break;case"canceling":t._transition("canceled");break;case"pausing":t._transition("paused");break}}))},e.prototype._createResumable=function(){var e=this;this._resolveToken((function(t,n){var r=at(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._uploadUrl=t,e._needToFetchStatus=!1,e.completeTransitions_()}),e._errorHandler)}))},e.prototype._fetchStatus=function(){var e=this,t=this._uploadUrl;this._resolveToken((function(n,r){var i=st(e._ref.storage,e._ref._location,t,e._blob),o=e._ref.storage._makeRequest(i,n,r);e._request=o,o.getPromise().then((function(t){t=t,e._request=void 0,e._updateProgress(t.current),e._needToFetchStatus=!1,t.finalized&&(e._needToFetchMetadata=!0),e.completeTransitions_()}),e._errorHandler)}))},e.prototype._continueUpload=function(){var e=this,t=ct*this._chunkMultiplier,n=new it(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i,o){var a;try{a=ut(e._ref._location,e._ref.storage,r,e._blob,t,e._mappings,n,e._makeProgressCallback())}catch(c){return e._error=c,void e._transition("error")}var s=e._ref.storage._makeRequest(a,i,o);e._request=s,s.getPromise().then((function(t){e._increaseMultiplier(),e._request=void 0,e._updateProgress(t.current),t.finalized?(e._metadata=t.metadata,e._transition("success")):e.completeTransitions_()}),e._errorHandler)}))},e.prototype._increaseMultiplier=function(){var e=ct*this._chunkMultiplier;e<33554432&&(this._chunkMultiplier*=2)},e.prototype._fetchMetadata=function(){var e=this;this._resolveToken((function(t,n){var r=Ke(e._ref.storage,e._ref._location,e._mappings),i=e._ref.storage._makeRequest(r,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._transition("success")}),e._metadataErrorHandler)}))},e.prototype._oneShotUpload=function(){var e=this;this._resolveToken((function(t,n){var r=rt(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._updateProgress(e._blob.size()),e._transition("success")}),e._errorHandler)}))},e.prototype._updateProgress=function(e){var t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()},e.prototype._transition=function(e){if(this._state!==e)switch(e){case"canceling":this._state=e,void 0!==this._request&&this._request.cancel();break;case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":var t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=A(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}},e.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}},Object.defineProperty(e.prototype,"snapshot",{get:function(){var e=J(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),e.prototype.on=function(e,t,n,r){var i=this,o=new lt(t,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},e.prototype.then=function(e,t){return this._promise.then(e,t)},e.prototype.catch=function(e){return this.then(null,e)},e.prototype._addObserver=function(e){this._observers.push(e),this._notifyObserver(e)},e.prototype._removeObserver=function(e){var t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)},e.prototype._notifyObservers=function(){var e=this;this._finishPromise();var t=this._observers.slice();t.forEach((function(t){e._notifyObserver(t)}))},e.prototype._finishPromise=function(){if(void 0!==this._resolve){var e=!0;switch(J(this._state)){case K.SUCCESS:ht(this._resolve.bind(null,this.snapshot))();break;case K.CANCELED:case K.ERROR:var t=this._reject;ht(t.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}},e.prototype._notifyObserver=function(e){var t=J(this._state);switch(t){case K.RUNNING:case K.PAUSED:e.next&&ht(e.next.bind(e,this.snapshot))();break;case K.SUCCESS:e.complete&&ht(e.complete.bind(e))();break;case K.CANCELED:case K.ERROR:e.error&&ht(e.error.bind(e,this._error))();break;default:e.error&&ht(e.error.bind(e,this._error))()}},e.prototype.resume=function(){var e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e},e.prototype.pause=function(){var e="running"===this._state;return e&&this._transition("pausing"),e},e.prototype.cancel=function(){var e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e},e}(),dt=function(){function e(e,t){this._service=e,this._location=t instanceof te?t:te.makeFromUrl(t,e.host)}return e.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},e.prototype._newRef=function(t,n){return new e(t,n)},Object.defineProperty(e.prototype,"root",{get:function(){var e=new te(this._location.bucket,"");return this._newRef(this._service,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return Oe(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=Se(this._location.path);if(null===t)return null;var n=new te(this._location.bucket,t);return new e(this._service,n)},enumerable:!1,configurable:!0}),e.prototype._throwIfRoot=function(e){if(""===this._location.path)throw P(e)},e}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pt(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new ft(e,new Te(t),n)}function mt(e){var t={prefixes:[],items:[]};return vt(e,t).then((function(){return t}))}function vt(e,t,n){return s(this,void 0,void 0,(function(){var r,i,o,a;return c(this,(function(s){switch(s.label){case 0:return r={pageToken:n},[4,gt(e,r)];case 1:return i=s.sent(),(o=t.prefixes).push.apply(o,i.prefixes),(a=t.items).push.apply(a,i.items),null==i.nextPageToken?[3,3]:[4,vt(e,t,i.nextPageToken)];case 2:s.sent(),s.label=3;case 3:return[2]}}))}))}function gt(e,t){return s(this,void 0,void 0,(function(){var n,r;return c(this,(function(i){switch(i.label){case 0:return null!=t&&"number"===typeof t.maxResults&&he("options.maxResults",1,1e3,t.maxResults),n=t||{},r=Je(e.storage,e._location,"/",n.pageToken,n.maxResults),[4,e.storage.makeRequestWithTokens(r)];case 1:return[2,i.sent().getPromise()]}}))}))}function yt(e){return s(this,void 0,void 0,(function(){var t;return c(this,(function(n){switch(n.label){case 0:return e._throwIfRoot("getMetadata"),t=Ke(e.storage,e._location,De()),[4,e.storage.makeRequestWithTokens(t)];case 1:return[2,n.sent().getPromise()]}}))}))}function bt(e,t){return s(this,void 0,void 0,(function(){var n;return c(this,(function(r){switch(r.label){case 0:return e._throwIfRoot("updateMetadata"),n=$e(e.storage,e._location,t,De()),[4,e.storage.makeRequestWithTokens(n)];case 1:return[2,r.sent().getPromise()]}}))}))}function wt(e){return s(this,void 0,void 0,(function(){var t;return c(this,(function(n){switch(n.label){case 0:return e._throwIfRoot("getDownloadURL"),t=Ze(e.storage,e._location,De()),[4,e.storage.makeRequestWithTokens(t)];case 1:return[2,n.sent().getPromise().then((function(e){if(null===e)throw I();return e}))]}}))}))}function Et(e){return s(this,void 0,void 0,(function(){var t;return c(this,(function(n){switch(n.label){case 0:return e._throwIfRoot("deleteObject"),t=et(e.storage,e._location),[4,e.storage.makeRequestWithTokens(t)];case 1:return[2,n.sent().getPromise()]}}))}))}function xt(e,t){var n=Me(e._location.path,t),r=new te(e._location.bucket,n);return new dt(e.storage,r)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _t(e){return/^[A-Za-z]+:\/\//.test(e)}function Tt(e,t){return new dt(e,t)}function At(e,t){if(e instanceof Rt){var n=e;if(null==n._bucket)throw O();var r=new dt(n,n._bucket);return null!=t?At(r,t):r}return void 0!==t?xt(e,t):e}function St(e,t){if(t&&_t(t)){if(e instanceof Rt)return Tt(e,t);throw L("To use ref(service, url), the first argument must be a Storage instance.")}return At(e,t)}function Mt(e,t){var n=null===t||void 0===t?void 0:t[d];return null==n?null:te.makeFromBucketSpec(n,e)}function Ot(e,t,n,r){void 0===r&&(r={}),e.host="http://"+t+":"+n;var i=r.mockUserToken;i&&(e._overrideAuthToken="string"===typeof i?i:Object(l["e"])(i,e.app.options.projectId))}var Rt=function(){function e(e,t,n,r,i,o){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._pool=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=f,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=p,this._maxUploadRetryTime=m,this._requests=new Set,this._bucket=null!=i?te.makeFromBucketSpec(i,this._host):Mt(this._host,this.app.options)}return Object.defineProperty(e.prototype,"host",{get:function(){return this._host},set:function(e){this._host=e,null!=this._url?this._bucket=te.makeFromBucketSpec(this._url,e):this._bucket=Mt(e,this.app.options)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(e){he("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(e){he("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e},enumerable:!1,configurable:!0}),e.prototype._getAuthToken=function(){return s(this,void 0,void 0,(function(){var e,t;return c(this,(function(n){switch(n.label){case 0:return this._overrideAuthToken?[2,this._overrideAuthToken]:(e=this._authProvider.getImmediate({optional:!0}),e?[4,e.getToken()]:[3,2]);case 1:if(t=n.sent(),null!==t)return[2,t.accessToken];n.label=2;case 2:return[2,null]}}))}))},e.prototype._getAppCheckToken=function(){return s(this,void 0,void 0,(function(){var e,t;return c(this,(function(n){switch(n.label){case 0:return e=this._appCheckProvider.getImmediate({optional:!0}),e?[4,e.getToken()]:[3,2];case 1:return t=n.sent(),[2,t.token];case 2:return[2,null]}}))}))},e.prototype._delete=function(){return this._deleted||(this._deleted=!0,this._requests.forEach((function(e){return e.cancel()})),this._requests.clear()),Promise.resolve()},e.prototype._makeStorageReference=function(e){return new dt(this,e)},e.prototype._makeRequest=function(e,t,n){var r=this;if(this._deleted)return new ne(D());var i=we(e,this._appId,t,n,this._pool,this._firebaseVersion);return this._requests.add(i),i.getPromise().then((function(){return r._requests.delete(i)}),(function(){return r._requests.delete(i)})),i},e.prototype.makeRequestWithTokens=function(e){return s(this,void 0,void 0,(function(){var t,n,r;return c(this,(function(i){switch(i.label){case 0:return[4,Promise.all([this._getAuthToken(),this._getAppCheckToken()])];case 1:return t=i.sent(),n=t[0],r=t[1],[2,this._makeRequest(e,n,r)]}}))}))},e}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ct(e,t,n){return e=Object(l["i"])(e),pt(e,t,n)}function It(e){return e=Object(l["i"])(e),yt(e)}function Lt(e,t){return e=Object(l["i"])(e),bt(e,t)}function Dt(e,t){return e=Object(l["i"])(e),gt(e,t)}function Pt(e){return e=Object(l["i"])(e),mt(e)}function Nt(e){return e=Object(l["i"])(e),wt(e)}function Bt(e){return e=Object(l["i"])(e),Et(e)}function kt(e,t){return e=Object(l["i"])(e),St(e,t)}function Ft(e,t){return xt(e,t)}function Ut(e,t,n,r){void 0===r&&(r={}),Ot(e,t,n,r)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ht=function(){function e(e,t,n){this._delegate=e,this.task=t,this.ref=n}return Object.defineProperty(e.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),e}(),jt=function(){function e(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Object.defineProperty(e.prototype,"snapshot",{get:function(){return new Ht(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),e.prototype.then=function(e,t){var n=this;return this._delegate.then((function(t){if(e)return e(new Ht(t,n,n._ref))}),t)},e.prototype.on=function(e,t,n,r){var i=this,o=void 0;return t&&(o="function"===typeof t?function(e){return t(new Ht(e,i,i._ref))}:{next:t.next?function(e){return t.next(new Ht(e,i,i._ref))}:void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,o,n||void 0,r||void 0)},e}(),Gt=function(){function e(e,t){this._delegate=e,this._service=t}return Object.defineProperty(e.prototype,"prefixes",{get:function(){var e=this;return this._delegate.prefixes.map((function(t){return new Vt(t,e._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"items",{get:function(){var e=this;return this._delegate.items.map((function(t){return new Vt(t,e._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),e}(),Vt=function(){function e(e,t){this._delegate=e,this.storage=t}return Object.defineProperty(e.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),e.prototype.toString=function(){return this._delegate.toString()},e.prototype.child=function(t){var n=Ft(this._delegate,t);return new e(n,this.storage)},Object.defineProperty(e.prototype,"root",{get:function(){return new e(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return null==t?null:new e(t,this.storage)},enumerable:!1,configurable:!0}),e.prototype.put=function(e,t){return this._throwIfRoot("put"),new jt(Ct(this._delegate,e,t),this)},e.prototype.putString=function(e,t,n){void 0===t&&(t=F.RAW),this._throwIfRoot("putString");var r=H(t,e),i=a({},n);return null==i["contentType"]&&null!=r.contentType&&(i["contentType"]=r.contentType),new jt(new ft(this._delegate,new Te(r.data,!0),i),this)},e.prototype.listAll=function(){var e=this;return Pt(this._delegate).then((function(t){return new Gt(t,e.storage)}))},e.prototype.list=function(e){var t=this;return Dt(this._delegate,e||void 0).then((function(e){return new Gt(e,t.storage)}))},e.prototype.getMetadata=function(){return It(this._delegate)},e.prototype.updateMetadata=function(e){return Lt(this._delegate,e)},e.prototype.getDownloadURL=function(){return Nt(this._delegate)},e.prototype.delete=function(){return this._throwIfRoot("delete"),Bt(this._delegate)},e.prototype._throwIfRoot=function(e){if(""===this._delegate._location.path)throw P(e)},e}(),zt=function(){function e(e,t){this.app=e,this._delegate=t}return Object.defineProperty(e.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),e.prototype.ref=function(e){if(_t(e))throw L("ref() expected a child path but got a URL, use refFromURL instead.");return new Vt(kt(this._delegate,e),this)},e.prototype.refFromURL=function(e){if(!_t(e))throw L("refFromURL() expected a full URL but got a child path, use ref() instead.");try{te.makeFromUrl(e,this._delegate.host)}catch(t){throw L("refFromUrl() expected a valid full URL but got an invalid one.")}return new Vt(kt(this._delegate,e),this)},e.prototype.setMaxUploadRetryTime=function(e){this._delegate.maxUploadRetryTime=e},e.prototype.setMaxOperationRetryTime=function(e){this._delegate.maxOperationRetryTime=e},e.prototype.useEmulator=function(e,t,n){void 0===n&&(n={}),Ut(this._delegate,e,t,n)},e}(),Wt="@firebase/storage",qt="0.7.0",Yt="storage";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xt(e,t){var n=t.instanceIdentifier,i=e.getProvider("app").getImmediate(),o=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal"),s=new zt(i,new Rt(i,o,a,new ee,n,r["a"].SDK_VERSION));return s}function Qt(e){var t={TaskState:K,TaskEvent:Q,StringFormat:F,Storage:Rt,Reference:Vt};e.INTERNAL.registerComponent(new h["a"](Yt,Xt,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion(Wt,qt)}Qt(r["a"])},5926:function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){var t=+e;return t!==t||0===t?0:(t>0?r:n)(t)}},"59ed":function(e,t,n){var r=n("da84"),i=n("1626"),o=n("0d51"),a=r.TypeError;e.exports=function(e){if(i(e))return e;throw a(o(e)+" is not a function")}},"5c6c":function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},"5e77":function(e,t,n){var r=n("83ab"),i=n("1a2d"),o=Function.prototype,a=r&&Object.getOwnPropertyDescriptor,s=i(o,"name"),c=s&&"something"===function(){}.name,u=s&&(!r||r&&a(o,"name").configurable);e.exports={EXISTS:s,PROPER:c,CONFIGURABLE:u}},"605d":function(e,t,n){var r=n("c6b6"),i=n("da84");e.exports="process"==r(i.process)},6069:function(e,t){e.exports="object"==typeof window},"60da":function(e,t,n){"use strict";var r=n("83ab"),i=n("e330"),o=n("c65b"),a=n("d039"),s=n("df75"),c=n("7418"),u=n("d1e7"),l=n("7b0b"),h=n("44ad"),f=Object.assign,d=Object.defineProperty,p=i([].concat);e.exports=!f||a((function(){if(r&&1!==f({b:1},f(d({},"a",{enumerable:!0,get:function(){d(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol(),i="abcdefghijklmnopqrst";return e[n]=7,i.split("").forEach((function(e){t[e]=e})),7!=f({},e)[n]||s(f({},t)).join("")!=i}))?function(e,t){var n=l(e),i=arguments.length,a=1,f=c.f,d=u.f;while(i>a){var m,v=h(arguments[a++]),g=f?p(s(v),f(v)):s(v),y=g.length,b=0;while(y>b)m=g[b++],r&&!o(d,v,m)||(n[m]=v[m])}return n}:f},"65f0":function(e,t,n){var r=n("0b42");e.exports=function(e,t){return new(r(e))(0===t?0:t)}},"68ee":function(e,t,n){var r=n("e330"),i=n("d039"),o=n("1626"),a=n("f5df"),s=n("d066"),c=n("8925"),u=function(){},l=[],h=s("Reflect","construct"),f=/^\s*(?:class|function)\b/,d=r(f.exec),p=!f.exec(u),m=function(e){if(!o(e))return!1;try{return h(u,l,e),!0}catch(t){return!1}},v=function(e){if(!o(e))return!1;switch(a(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return p||!!d(f,c(e))}catch(t){return!0}};v.sham=!0,e.exports=!h||i((function(){var e;return m(m.call)||!m(Object)||!m((function(){e=!0}))||e}))?v:m},"69f3":function(e,t,n){var r,i,o,a=n("7f9a"),s=n("da84"),c=n("e330"),u=n("861d"),l=n("9112"),h=n("1a2d"),f=n("c6cd"),d=n("f772"),p=n("d012"),m="Object already initialized",v=s.TypeError,g=s.WeakMap,y=function(e){return o(e)?i(e):r(e,{})},b=function(e){return function(t){var n;if(!u(t)||(n=i(t)).type!==e)throw v("Incompatible receiver, "+e+" required");return n}};if(a||f.state){var w=f.state||(f.state=new g),E=c(w.get),x=c(w.has),_=c(w.set);r=function(e,t){if(x(w,e))throw new v(m);return t.facade=e,_(w,e,t),t},i=function(e){return E(w,e)||{}},o=function(e){return x(w,e)}}else{var T=d("state");p[T]=!0,r=function(e,t){if(h(e,T))throw new v(m);return t.facade=e,l(e,T,t),t},i=function(e){return h(e,T)?e[T]:{}},o=function(e){return h(e,T)}}e.exports={set:r,get:i,has:o,enforce:y,getterFor:b}},"6b0d":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=(e,t)=>{const n=e.__vccOpts||e;for(const[r,i]of t)n[r]=i;return n}},"6c02":function(e,t,n){"use strict";n.d(t,"a",(function(){return $e})),n.d(t,"b",(function(){return z}));var r=n("7a23");n("abc5");
/*!
  * vue-router v4.0.12
  * (c) 2021 Eduardo San Martin Morote
  * @license MIT
  */
const i="function"===typeof Symbol&&"symbol"===typeof Symbol.toStringTag,o=e=>i?Symbol(e):"_vr_"+e,a=o("rvlm"),s=o("rvd"),c=o("r"),u=o("rl"),l=o("rvl"),h="undefined"!==typeof window;function f(e){return e.__esModule||i&&"Module"===e[Symbol.toStringTag]}const d=Object.assign;function p(e,t){const n={};for(const r in t){const i=t[r];n[r]=Array.isArray(i)?i.map(e):e(i)}return n}const m=()=>{};const v=/\/$/,g=e=>e.replace(v,"");function y(e,t,n="/"){let r,i={},o="",a="";const s=t.indexOf("?"),c=t.indexOf("#",s>-1?s:0);return s>-1&&(r=t.slice(0,s),o=t.slice(s+1,c>-1?c:t.length),i=e(o)),c>-1&&(r=r||t.slice(0,c),a=t.slice(c,t.length)),r=S(null!=r?r:t,n),{fullPath:r+(o&&"?")+o+a,path:r,query:i,hash:a}}function b(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function w(e,t){return t&&e.toLowerCase().startsWith(t.toLowerCase())?e.slice(t.length)||"/":e}function E(e,t,n){const r=t.matched.length-1,i=n.matched.length-1;return r>-1&&r===i&&x(t.matched[r],n.matched[i])&&_(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function x(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function _(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!T(e[n],t[n]))return!1;return!0}function T(e,t){return Array.isArray(e)?A(e,t):Array.isArray(t)?A(t,e):e===t}function A(e,t){return Array.isArray(t)?e.length===t.length&&e.every((e,n)=>e===t[n]):1===e.length&&e[0]===t}function S(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),r=e.split("/");let i,o,a=n.length-1;for(i=0;i<r.length;i++)if(o=r[i],1!==a&&"."!==o){if(".."!==o)break;a--}return n.slice(0,a).join("/")+"/"+r.slice(i-(i===r.length?1:0)).join("/")}var M,O;(function(e){e["pop"]="pop",e["push"]="push"})(M||(M={})),function(e){e["back"]="back",e["forward"]="forward",e["unknown"]=""}(O||(O={}));function R(e){if(!e)if(h){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return"/"!==e[0]&&"#"!==e[0]&&(e="/"+e),g(e)}const C=/^[^#]+#/;function I(e,t){return e.replace(C,"#")+t}function L(e,t){const n=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect();return{behavior:t.behavior,left:r.left-n.left-(t.left||0),top:r.top-n.top-(t.top||0)}}const D=()=>({left:window.pageXOffset,top:window.pageYOffset});function P(e){let t;if("el"in e){const n=e.el,r="string"===typeof n&&n.startsWith("#");0;const i="string"===typeof n?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;t=L(i,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(null!=t.left?t.left:window.pageXOffset,null!=t.top?t.top:window.pageYOffset)}function N(e,t){const n=history.state?history.state.position-t:-1;return n+e}const B=new Map;function k(e,t){B.set(e,t)}function F(e){const t=B.get(e);return B.delete(e),t}let U=()=>location.protocol+"//"+location.host;function H(e,t){const{pathname:n,search:r,hash:i}=t,o=e.indexOf("#");if(o>-1){let t=i.includes(e.slice(o))?e.slice(o).length:1,n=i.slice(t);return"/"!==n[0]&&(n="/"+n),w(n,"")}const a=w(n,e);return a+r+i}function j(e,t,n,r){let i=[],o=[],a=null;const s=({state:o})=>{const s=H(e,location),c=n.value,u=t.value;let l=0;if(o){if(n.value=s,t.value=o,a&&a===c)return void(a=null);l=u?o.position-u.position:0}else r(s);i.forEach(e=>{e(n.value,c,{delta:l,type:M.pop,direction:l?l>0?O.forward:O.back:O.unknown})})};function c(){a=n.value}function u(e){i.push(e);const t=()=>{const t=i.indexOf(e);t>-1&&i.splice(t,1)};return o.push(t),t}function l(){const{history:e}=window;e.state&&e.replaceState(d({},e.state,{scroll:D()}),"")}function h(){for(const e of o)e();o=[],window.removeEventListener("popstate",s),window.removeEventListener("beforeunload",l)}return window.addEventListener("popstate",s),window.addEventListener("beforeunload",l),{pauseListeners:c,listen:u,destroy:h}}function G(e,t,n,r=!1,i=!1){return{back:e,current:t,forward:n,replaced:r,position:window.history.length,scroll:i?D():null}}function V(e){const{history:t,location:n}=window,r={value:H(e,n)},i={value:t.state};function o(r,o,a){const s=e.indexOf("#"),c=s>-1?(n.host&&document.querySelector("base")?e:e.slice(s))+r:U()+e+r;try{t[a?"replaceState":"pushState"](o,"",c),i.value=o}catch(u){console.error(u),n[a?"replace":"assign"](c)}}function a(e,n){const a=d({},t.state,G(i.value.back,e,i.value.forward,!0),n,{position:i.value.position});o(e,a,!0),r.value=e}function s(e,n){const a=d({},i.value,t.state,{forward:e,scroll:D()});o(a.current,a,!0);const s=d({},G(r.value,e,null),{position:a.position+1},n);o(e,s,!1),r.value=e}return i.value||o(r.value,{back:null,current:r.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0),{location:r,state:i,push:s,replace:a}}function z(e){e=R(e);const t=V(e),n=j(e,t.state,t.location,t.replace);function r(e,t=!0){t||n.pauseListeners(),history.go(e)}const i=d({location:"",base:e,go:r,createHref:I.bind(null,e)},t,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>t.state.value}),i}function W(e){return"string"===typeof e||e&&"object"===typeof e}function q(e){return"string"===typeof e||"symbol"===typeof e}const Y={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},X=o("nf");var Q;(function(e){e[e["aborted"]=4]="aborted",e[e["cancelled"]=8]="cancelled",e[e["duplicated"]=16]="duplicated"})(Q||(Q={}));function K(e,t){return d(new Error,{type:e,[X]:!0},t)}function J(e,t){return e instanceof Error&&X in e&&(null==t||!!(e.type&t))}const Z="[^/]+?",$={sensitive:!1,strict:!1,start:!0,end:!0},ee=/[.+*?^${}()[\]/\\]/g;function te(e,t){const n=d({},$,t),r=[];let i=n.start?"^":"";const o=[];for(const l of e){const e=l.length?[]:[90];n.strict&&!l.length&&(i+="/");for(let t=0;t<l.length;t++){const r=l[t];let a=40+(n.sensitive?.25:0);if(0===r.type)t||(i+="/"),i+=r.value.replace(ee,"\\$&"),a+=40;else if(1===r.type){const{value:e,repeatable:n,optional:s,regexp:c}=r;o.push({name:e,repeatable:n,optional:s});const h=c||Z;if(h!==Z){a+=10;try{new RegExp(`(${h})`)}catch(u){throw new Error(`Invalid custom RegExp for param "${e}" (${h}): `+u.message)}}let f=n?`((?:${h})(?:/(?:${h}))*)`:`(${h})`;t||(f=s&&l.length<2?`(?:/${f})`:"/"+f),s&&(f+="?"),i+=f,a+=20,s&&(a+=-8),n&&(a+=-20),".*"===h&&(a+=-50)}e.push(a)}r.push(e)}if(n.strict&&n.end){const e=r.length-1;r[e][r[e].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&(i+="(?:/|$)");const a=new RegExp(i,n.sensitive?"":"i");function s(e){const t=e.match(a),n={};if(!t)return null;for(let r=1;r<t.length;r++){const e=t[r]||"",i=o[r-1];n[i.name]=e&&i.repeatable?e.split("/"):e}return n}function c(t){let n="",r=!1;for(const i of e){r&&n.endsWith("/")||(n+="/"),r=!1;for(const e of i)if(0===e.type)n+=e.value;else if(1===e.type){const{value:o,repeatable:a,optional:s}=e,c=o in t?t[o]:"";if(Array.isArray(c)&&!a)throw new Error(`Provided param "${o}" is an array but it is not repeatable (* or + modifiers)`);const u=Array.isArray(c)?c.join("/"):c;if(!u){if(!s)throw new Error(`Missing required param "${o}"`);i.length<2&&(n.endsWith("/")?n=n.slice(0,-1):r=!0)}n+=u}}return n}return{re:a,score:r,keys:o,parse:s,stringify:c}}function ne(e,t){let n=0;while(n<e.length&&n<t.length){const r=t[n]-e[n];if(r)return r;n++}return e.length<t.length?1===e.length&&80===e[0]?-1:1:e.length>t.length?1===t.length&&80===t[0]?1:-1:0}function re(e,t){let n=0;const r=e.score,i=t.score;while(n<r.length&&n<i.length){const e=ne(r[n],i[n]);if(e)return e;n++}return i.length-r.length}const ie={type:0,value:""},oe=/[a-zA-Z0-9_]/;function ae(e){if(!e)return[[]];if("/"===e)return[[ie]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(e){throw new Error(`ERR (${n})/"${u}": ${e}`)}let n=0,r=n;const i=[];let o;function a(){o&&i.push(o),o=[]}let s,c=0,u="",l="";function h(){u&&(0===n?o.push({type:0,value:u}):1===n||2===n||3===n?(o.length>1&&("*"===s||"+"===s)&&t(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),o.push({type:1,value:u,regexp:l,repeatable:"*"===s||"+"===s,optional:"*"===s||"?"===s})):t("Invalid state to consume buffer"),u="")}function f(){u+=s}while(c<e.length)if(s=e[c++],"\\"!==s||2===n)switch(n){case 0:"/"===s?(u&&h(),a()):":"===s?(h(),n=1):f();break;case 4:f(),n=r;break;case 1:"("===s?n=2:oe.test(s)?f():(h(),n=0,"*"!==s&&"?"!==s&&"+"!==s&&c--);break;case 2:")"===s?"\\"==l[l.length-1]?l=l.slice(0,-1)+s:n=3:l+=s;break;case 3:h(),n=0,"*"!==s&&"?"!==s&&"+"!==s&&c--,l="";break;default:t("Unknown state");break}else r=n,n=4;return 2===n&&t(`Unfinished custom RegExp for param "${u}"`),h(),a(),i}function se(e,t,n){const r=te(ae(e.path),n);const i=d(r,{record:e,parent:t,children:[],alias:[]});return t&&!i.record.aliasOf===!t.record.aliasOf&&t.children.push(i),i}function ce(e,t){const n=[],r=new Map;function i(e){return r.get(e)}function o(e,n,r){const i=!r,s=le(e);s.aliasOf=r&&r.record;const u=pe(t,e),l=[s];if("alias"in e){const t="string"===typeof e.alias?[e.alias]:e.alias;for(const e of t)l.push(d({},s,{components:r?r.record.components:s.components,path:e,aliasOf:r?r.record:s}))}let h,f;for(const t of l){const{path:l}=t;if(n&&"/"!==l[0]){const e=n.record.path,r="/"===e[e.length-1]?"":"/";t.path=n.record.path+(l&&r+l)}if(h=se(t,n,u),r?r.alias.push(h):(f=f||h,f!==h&&f.alias.push(h),i&&e.name&&!fe(h)&&a(e.name)),"children"in s){const e=s.children;for(let t=0;t<e.length;t++)o(e[t],h,r&&r.children[t])}r=r||h,c(h)}return f?()=>{a(f)}:m}function a(e){if(q(e)){const t=r.get(e);t&&(r.delete(e),n.splice(n.indexOf(t),1),t.children.forEach(a),t.alias.forEach(a))}else{const t=n.indexOf(e);t>-1&&(n.splice(t,1),e.record.name&&r.delete(e.record.name),e.children.forEach(a),e.alias.forEach(a))}}function s(){return n}function c(e){let t=0;while(t<n.length&&re(e,n[t])>=0)t++;n.splice(t,0,e),e.record.name&&!fe(e)&&r.set(e.record.name,e)}function u(e,t){let i,o,a,s={};if("name"in e&&e.name){if(i=r.get(e.name),!i)throw K(1,{location:e});a=i.record.name,s=d(ue(t.params,i.keys.filter(e=>!e.optional).map(e=>e.name)),e.params),o=i.stringify(s)}else if("path"in e)o=e.path,i=n.find(e=>e.re.test(o)),i&&(s=i.parse(o),a=i.record.name);else{if(i=t.name?r.get(t.name):n.find(e=>e.re.test(t.path)),!i)throw K(1,{location:e,currentLocation:t});a=i.record.name,s=d({},t.params,e.params),o=i.stringify(s)}const c=[];let u=i;while(u)c.unshift(u.record),u=u.parent;return{name:a,path:o,params:s,matched:c,meta:de(c)}}return t=pe({strict:!1,end:!0,sensitive:!1},t),e.forEach(e=>o(e)),{addRoute:o,resolve:u,removeRoute:a,getRoutes:s,getRecordMatcher:i}}function ue(e,t){const n={};for(const r of t)r in e&&(n[r]=e[r]);return n}function le(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:he(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||{}:{default:e.component}}}function he(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const r in e.components)t[r]="boolean"===typeof n?n:n[r];return t}function fe(e){while(e){if(e.record.aliasOf)return!0;e=e.parent}return!1}function de(e){return e.reduce((e,t)=>d(e,t.meta),{})}function pe(e,t){const n={};for(const r in e)n[r]=r in t?t[r]:e[r];return n}const me=/#/g,ve=/&/g,ge=/\//g,ye=/=/g,be=/\?/g,we=/\+/g,Ee=/%5B/g,xe=/%5D/g,_e=/%5E/g,Te=/%60/g,Ae=/%7B/g,Se=/%7C/g,Me=/%7D/g,Oe=/%20/g;function Re(e){return encodeURI(""+e).replace(Se,"|").replace(Ee,"[").replace(xe,"]")}function Ce(e){return Re(e).replace(Ae,"{").replace(Me,"}").replace(_e,"^")}function Ie(e){return Re(e).replace(we,"%2B").replace(Oe,"+").replace(me,"%23").replace(ve,"%26").replace(Te,"`").replace(Ae,"{").replace(Me,"}").replace(_e,"^")}function Le(e){return Ie(e).replace(ye,"%3D")}function De(e){return Re(e).replace(me,"%23").replace(be,"%3F")}function Pe(e){return null==e?"":De(e).replace(ge,"%2F")}function Ne(e){try{return decodeURIComponent(""+e)}catch(t){}return""+e}function Be(e){const t={};if(""===e||"?"===e)return t;const n="?"===e[0],r=(n?e.slice(1):e).split("&");for(let i=0;i<r.length;++i){const e=r[i].replace(we," "),n=e.indexOf("="),o=Ne(n<0?e:e.slice(0,n)),a=n<0?null:Ne(e.slice(n+1));if(o in t){let e=t[o];Array.isArray(e)||(e=t[o]=[e]),e.push(a)}else t[o]=a}return t}function ke(e){let t="";for(let n in e){const r=e[n];if(n=Le(n),null==r){void 0!==r&&(t+=(t.length?"&":"")+n);continue}const i=Array.isArray(r)?r.map(e=>e&&Ie(e)):[r&&Ie(r)];i.forEach(e=>{void 0!==e&&(t+=(t.length?"&":"")+n,null!=e&&(t+="="+e))})}return t}function Fe(e){const t={};for(const n in e){const r=e[n];void 0!==r&&(t[n]=Array.isArray(r)?r.map(e=>null==e?null:""+e):null==r?r:""+r)}return t}function Ue(){let e=[];function t(t){return e.push(t),()=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)}}function n(){e=[]}return{add:t,list:()=>e,reset:n}}function He(e,t,n,r,i){const o=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise((a,s)=>{const c=e=>{!1===e?s(K(4,{from:n,to:t})):e instanceof Error?s(e):W(e)?s(K(2,{from:t,to:e})):(o&&r.enterCallbacks[i]===o&&"function"===typeof e&&o.push(e),a())},u=e.call(r&&r.instances[i],t,n,c);let l=Promise.resolve(u);e.length<3&&(l=l.then(c)),l.catch(e=>s(e))})}function je(e,t,n,r){const i=[];for(const o of e)for(const e in o.components){let a=o.components[e];if("beforeRouteEnter"===t||o.instances[e])if(Ge(a)){const s=a.__vccOpts||a,c=s[t];c&&i.push(He(c,n,r,o,e))}else{let s=a();0,i.push(()=>s.then(i=>{if(!i)return Promise.reject(new Error(`Couldn't resolve component "${e}" at "${o.path}"`));const a=f(i)?i.default:i;o.components[e]=a;const s=a.__vccOpts||a,c=s[t];return c&&He(c,n,r,o,e)()}))}}return i}function Ge(e){return"object"===typeof e||"displayName"in e||"props"in e||"__vccOpts"in e}function Ve(e){const t=Object(r["o"])(c),n=Object(r["o"])(u),i=Object(r["c"])(()=>t.resolve(Object(r["F"])(e.to))),o=Object(r["c"])(()=>{const{matched:e}=i.value,{length:t}=e,r=e[t-1],o=n.matched;if(!r||!o.length)return-1;const a=o.findIndex(x.bind(null,r));if(a>-1)return a;const s=Xe(e[t-2]);return t>1&&Xe(r)===s&&o[o.length-1].path!==s?o.findIndex(x.bind(null,e[t-2])):a}),a=Object(r["c"])(()=>o.value>-1&&Ye(n.params,i.value.params)),s=Object(r["c"])(()=>o.value>-1&&o.value===n.matched.length-1&&_(n.params,i.value.params));function l(n={}){return qe(n)?t[Object(r["F"])(e.replace)?"replace":"push"](Object(r["F"])(e.to)).catch(m):Promise.resolve()}return{route:i,href:Object(r["c"])(()=>i.value.href),isActive:a,isExactActive:s,navigate:l}}const ze=Object(r["l"])({name:"RouterLink",props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Ve,setup(e,{slots:t}){const n=Object(r["z"])(Ve(e)),{options:i}=Object(r["o"])(c),o=Object(r["c"])(()=>({[Qe(e.activeClass,i.linkActiveClass,"router-link-active")]:n.isActive,[Qe(e.exactActiveClass,i.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=t.default&&t.default(n);return e.custom?i:Object(r["n"])("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:o.value},i)}}}),We=ze;function qe(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&(void 0===e.button||0===e.button)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function Ye(e,t){for(const n in t){const r=t[n],i=e[n];if("string"===typeof r){if(r!==i)return!1}else if(!Array.isArray(i)||i.length!==r.length||r.some((e,t)=>e!==i[t]))return!1}return!0}function Xe(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const Qe=(e,t,n)=>null!=e?e:null!=t?t:n,Ke=Object(r["l"])({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},setup(e,{attrs:t,slots:n}){const i=Object(r["o"])(l),o=Object(r["c"])(()=>e.route||i.value),c=Object(r["o"])(s,0),u=Object(r["c"])(()=>o.value.matched[c]);Object(r["x"])(s,c+1),Object(r["x"])(a,u),Object(r["x"])(l,o);const h=Object(r["A"])();return Object(r["H"])(()=>[h.value,u.value,e.name],([e,t,n],[r,i,o])=>{t&&(t.instances[n]=e,i&&i!==t&&e&&e===r&&(t.leaveGuards.size||(t.leaveGuards=i.leaveGuards),t.updateGuards.size||(t.updateGuards=i.updateGuards))),!e||!t||i&&x(t,i)&&r||(t.enterCallbacks[n]||[]).forEach(t=>t(e))},{flush:"post"}),()=>{const i=o.value,a=u.value,s=a&&a.components[e.name],c=e.name;if(!s)return Je(n.default,{Component:s,route:i});const l=a.props[e.name],f=l?!0===l?i.params:"function"===typeof l?l(i):l:null,p=e=>{e.component.isUnmounted&&(a.instances[c]=null)},m=Object(r["n"])(s,d({},f,t,{onVnodeUnmounted:p,ref:h}));return Je(n.default,{Component:m,route:i})||m}}});function Je(e,t){if(!e)return null;const n=e(t);return 1===n.length?n[0]:n}const Ze=Ke;function $e(e){const t=ce(e.routes,e),n=e.parseQuery||Be,i=e.stringifyQuery||ke,o=e.history;const a=Ue(),s=Ue(),f=Ue(),v=Object(r["D"])(Y);let g=Y;h&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const w=p.bind(null,e=>""+e),x=p.bind(null,Pe),_=p.bind(null,Ne);function T(e,n){let r,i;return q(e)?(r=t.getRecordMatcher(e),i=n):i=e,t.addRoute(i,r)}function A(e){const n=t.getRecordMatcher(e);n&&t.removeRoute(n)}function S(){return t.getRoutes().map(e=>e.record)}function O(e){return!!t.getRecordMatcher(e)}function R(e,r){if(r=d({},r||v.value),"string"===typeof e){const i=y(n,e,r.path),a=t.resolve({path:i.path},r),s=o.createHref(i.fullPath);return d(i,a,{params:_(a.params),hash:Ne(i.hash),redirectedFrom:void 0,href:s})}let a;if("path"in e)a=d({},e,{path:y(n,e.path,r.path).path});else{const t=d({},e.params);for(const e in t)null==t[e]&&delete t[e];a=d({},e,{params:x(e.params)}),r.params=x(r.params)}const s=t.resolve(a,r),c=e.hash||"";s.params=w(_(s.params));const u=b(i,d({},e,{hash:Ce(c),path:s.path})),l=o.createHref(u);return d({fullPath:u,hash:c,query:i===ke?Fe(e.query):e.query||{}},s,{redirectedFrom:void 0,href:l})}function C(e){return"string"===typeof e?y(n,e,v.value.path):d({},e)}function I(e,t){if(g!==e)return K(8,{from:t,to:e})}function L(e){return H(e)}function B(e){return L(d(C(e),{replace:!0}))}function U(e){const t=e.matched[e.matched.length-1];if(t&&t.redirect){const{redirect:n}=t;let r="function"===typeof n?n(e):n;return"string"===typeof r&&(r=r.includes("?")||r.includes("#")?r=C(r):{path:r},r.params={}),d({query:e.query,hash:e.hash,params:e.params},r)}}function H(e,t){const n=g=R(e),r=v.value,o=e.state,a=e.force,s=!0===e.replace,c=U(n);if(c)return H(d(C(c),{state:o,force:a,replace:s}),t||n);const u=n;let l;return u.redirectedFrom=t,!a&&E(i,r,n)&&(l=K(16,{to:u,from:r}),re(r,r,!0,!1)),(l?Promise.resolve(l):G(u,r)).catch(e=>J(e)?e:ee(e,u,r)).then(e=>{if(e){if(J(e,2))return H(d(C(e.to),{state:o,force:a,replace:s}),t||u)}else e=z(u,r,!0,s,o);return V(u,r,e),e})}function j(e,t){const n=I(e,t);return n?Promise.reject(n):Promise.resolve()}function G(e,t){let n;const[r,i,o]=tt(e,t);n=je(r.reverse(),"beforeRouteLeave",e,t);for(const a of r)a.leaveGuards.forEach(r=>{n.push(He(r,e,t))});const c=j.bind(null,e,t);return n.push(c),et(n).then(()=>{n=[];for(const r of a.list())n.push(He(r,e,t));return n.push(c),et(n)}).then(()=>{n=je(i,"beforeRouteUpdate",e,t);for(const r of i)r.updateGuards.forEach(r=>{n.push(He(r,e,t))});return n.push(c),et(n)}).then(()=>{n=[];for(const r of e.matched)if(r.beforeEnter&&!t.matched.includes(r))if(Array.isArray(r.beforeEnter))for(const i of r.beforeEnter)n.push(He(i,e,t));else n.push(He(r.beforeEnter,e,t));return n.push(c),et(n)}).then(()=>(e.matched.forEach(e=>e.enterCallbacks={}),n=je(o,"beforeRouteEnter",e,t),n.push(c),et(n))).then(()=>{n=[];for(const r of s.list())n.push(He(r,e,t));return n.push(c),et(n)}).catch(e=>J(e,8)?e:Promise.reject(e))}function V(e,t,n){for(const r of f.list())r(e,t,n)}function z(e,t,n,r,i){const a=I(e,t);if(a)return a;const s=t===Y,c=h?history.state:{};n&&(r||s?o.replace(e.fullPath,d({scroll:s&&c&&c.scroll},i)):o.push(e.fullPath,i)),v.value=e,re(e,t,n,s),ne()}let W;function X(){W=o.listen((e,t,n)=>{const r=R(e),i=U(r);if(i)return void H(d(i,{replace:!0}),r).catch(m);g=r;const a=v.value;h&&k(N(a.fullPath,n.delta),D()),G(r,a).catch(e=>J(e,12)?e:J(e,2)?(H(e.to,r).then(e=>{J(e,20)&&!n.delta&&n.type===M.pop&&o.go(-1,!1)}).catch(m),Promise.reject()):(n.delta&&o.go(-n.delta,!1),ee(e,r,a))).then(e=>{e=e||z(r,a,!1),e&&(n.delta?o.go(-n.delta,!1):n.type===M.pop&&J(e,20)&&o.go(-1,!1)),V(r,a,e)}).catch(m)})}let Q,Z=Ue(),$=Ue();function ee(e,t,n){ne(e);const r=$.list();return r.length?r.forEach(r=>r(e,t,n)):console.error(e),Promise.reject(e)}function te(){return Q&&v.value!==Y?Promise.resolve():new Promise((e,t)=>{Z.add([e,t])})}function ne(e){Q||(Q=!0,X(),Z.list().forEach(([t,n])=>e?n(e):t()),Z.reset())}function re(t,n,i,o){const{scrollBehavior:a}=e;if(!h||!a)return Promise.resolve();const s=!i&&F(N(t.fullPath,0))||(o||!i)&&history.state&&history.state.scroll||null;return Object(r["p"])().then(()=>a(t,n,s)).then(e=>e&&P(e)).catch(e=>ee(e,t,n))}const ie=e=>o.go(e);let oe;const ae=new Set,se={currentRoute:v,addRoute:T,removeRoute:A,hasRoute:O,getRoutes:S,resolve:R,options:e,push:L,replace:B,go:ie,back:()=>ie(-1),forward:()=>ie(1),beforeEach:a.add,beforeResolve:s.add,afterEach:f.add,onError:$.add,isReady:te,install(e){const t=this;e.component("RouterLink",We),e.component("RouterView",Ze),e.config.globalProperties.$router=t,Object.defineProperty(e.config.globalProperties,"$route",{enumerable:!0,get:()=>Object(r["F"])(v)}),h&&!oe&&v.value===Y&&(oe=!0,L(o.location).catch(e=>{0}));const n={};for(const o in Y)n[o]=Object(r["c"])(()=>v.value[o]);e.provide(c,t),e.provide(u,Object(r["z"])(n)),e.provide(l,v);const i=e.unmount;ae.add(e),e.unmount=function(){ae.delete(e),ae.size<1&&(g=Y,W&&W(),v.value=Y,oe=!1,Q=!1),i()}}};return se}function et(e){return e.reduce((e,t)=>e.then(()=>t()),Promise.resolve())}function tt(e,t){const n=[],r=[],i=[],o=Math.max(t.matched.length,e.matched.length);for(let a=0;a<o;a++){const o=t.matched[a];o&&(e.matched.find(e=>x(e,o))?r.push(o):n.push(o));const s=e.matched[a];s&&(t.matched.find(e=>x(e,s))||i.push(s))}return[n,r,i]}},"6eeb":function(e,t,n){var r=n("da84"),i=n("1626"),o=n("1a2d"),a=n("9112"),s=n("ce4e"),c=n("8925"),u=n("69f3"),l=n("5e77").CONFIGURABLE,h=u.get,f=u.enforce,d=String(String).split("String");(e.exports=function(e,t,n,c){var u,h=!!c&&!!c.unsafe,p=!!c&&!!c.enumerable,m=!!c&&!!c.noTargetGet,v=c&&void 0!==c.name?c.name:t;i(n)&&("Symbol("===String(v).slice(0,7)&&(v="["+String(v).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!o(n,"name")||l&&n.name!==v)&&a(n,"name",v),u=f(n),u.source||(u.source=d.join("string"==typeof v?v:""))),e!==r?(h?!m&&e[t]&&(p=!0):delete e[t],p?e[t]=n:a(e,t,n)):p?e[t]=n:s(t,n)})(Function.prototype,"toString",(function(){return i(this)&&h(this).source||c(this)}))},7418:function(e,t){t.f=Object.getOwnPropertySymbols},7839:function(e,t){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"785a":function(e,t,n){var r=n("cc12"),i=r("span").classList,o=i&&i.constructor&&i.constructor.prototype;e.exports=o===Object.prototype?void 0:o},"7a23":function(e,t,n){"use strict";n.d(t,"c",(function(){return We})),n.d(t,"z",(function(){return _e})),n.d(t,"A",(function(){return ke})),n.d(t,"D",(function(){return Fe})),n.d(t,"F",(function(){return je})),n.d(t,"q",(function(){return r["I"]})),n.d(t,"r",(function(){return r["J"]})),n.d(t,"E",(function(){return r["L"]})),n.d(t,"a",(function(){return Un})),n.d(t,"e",(function(){return Jn})),n.d(t,"f",(function(){return lr})),n.d(t,"g",(function(){return Kn})),n.d(t,"h",(function(){return rr})),n.d(t,"i",(function(){return ur})),n.d(t,"j",(function(){return cr})),n.d(t,"k",(function(){return ir})),n.d(t,"l",(function(){return Et})),n.d(t,"m",(function(){return Tr})),n.d(t,"n",(function(){return Ei})),n.d(t,"o",(function(){return lt})),n.d(t,"p",(function(){return ri})),n.d(t,"s",(function(){return At})),n.d(t,"t",(function(){return St})),n.d(t,"u",(function(){return Ft})),n.d(t,"v",(function(){return Wn})),n.d(t,"w",(function(){return $e})),n.d(t,"x",(function(){return ut})),n.d(t,"y",(function(){return Ze})),n.d(t,"B",(function(){return vr})),n.d(t,"C",(function(){return Nn})),n.d(t,"H",(function(){return vi})),n.d(t,"I",(function(){return et})),n.d(t,"J",(function(){return wn})),n.d(t,"b",(function(){return to})),n.d(t,"d",(function(){return _o})),n.d(t,"G",(function(){return yo}));var r=n("9ff4");let i;const o=[];class a{constructor(e=!1){this.active=!0,this.effects=[],this.cleanups=[],!e&&i&&(this.parent=i,this.index=(i.scopes||(i.scopes=[])).push(this)-1)}run(e){if(this.active)try{return this.on(),e()}finally{this.off()}else 0}on(){this.active&&(o.push(this),i=this)}off(){this.active&&(o.pop(),i=o[o.length-1])}stop(e){if(this.active){if(this.effects.forEach(e=>e.stop()),this.cleanups.forEach(e=>e()),this.scopes&&this.scopes.forEach(e=>e.stop(!0)),this.parent&&!e){const e=this.parent.scopes.pop();e&&e!==this&&(this.parent.scopes[this.index]=e,e.index=this.index)}this.active=!1}}}function s(e,t){t=t||i,t&&t.active&&t.effects.push(e)}const c=e=>{const t=new Set(e);return t.w=0,t.n=0,t},u=e=>(e.w&m)>0,l=e=>(e.n&m)>0,h=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=m},f=e=>{const{deps:t}=e;if(t.length){let n=0;for(let r=0;r<t.length;r++){const i=t[r];u(i)&&!l(i)?i.delete(e):t[n++]=i,i.w&=~m,i.n&=~m}t.length=n}},d=new WeakMap;let p=0,m=1;const v=30,g=[];let y;const b=Symbol(""),w=Symbol("");class E{constructor(e,t=null,n){this.fn=e,this.scheduler=t,this.active=!0,this.deps=[],s(this,n)}run(){if(!this.active)return this.fn();if(!g.includes(this))try{return g.push(y=this),S(),m=1<<++p,p<=v?h(this):x(this),this.fn()}finally{p<=v&&f(this),m=1<<--p,M(),g.pop();const e=g.length;y=e>0?g[e-1]:void 0}}stop(){this.active&&(x(this),this.onStop&&this.onStop(),this.active=!1)}}function x(e){const{deps:t}=e;if(t.length){for(let n=0;n<t.length;n++)t[n].delete(e);t.length=0}}let _=!0;const T=[];function A(){T.push(_),_=!1}function S(){T.push(_),_=!0}function M(){const e=T.pop();_=void 0===e||e}function O(e,t,n){if(!R())return;let r=d.get(e);r||d.set(e,r=new Map);let i=r.get(n);i||r.set(n,i=c());const o=void 0;C(i,o)}function R(){return _&&void 0!==y}function C(e,t){let n=!1;p<=v?l(e)||(e.n|=m,n=!u(e)):n=!e.has(y),n&&(e.add(y),y.deps.push(e))}function I(e,t,n,i,o,a){const s=d.get(e);if(!s)return;let u=[];if("clear"===t)u=[...s.values()];else if("length"===n&&Object(r["o"])(e))s.forEach((e,t)=>{("length"===t||t>=i)&&u.push(e)});else switch(void 0!==n&&u.push(s.get(n)),t){case"add":Object(r["o"])(e)?Object(r["s"])(n)&&u.push(s.get("length")):(u.push(s.get(b)),Object(r["t"])(e)&&u.push(s.get(w)));break;case"delete":Object(r["o"])(e)||(u.push(s.get(b)),Object(r["t"])(e)&&u.push(s.get(w)));break;case"set":Object(r["t"])(e)&&u.push(s.get(b));break}if(1===u.length)u[0]&&L(u[0]);else{const e=[];for(const t of u)t&&e.push(...t);L(c(e))}}function L(e,t){for(const n of Object(r["o"])(e)?e:[...e])(n!==y||n.allowRecurse)&&(n.scheduler?n.scheduler():n.run())}const D=Object(r["H"])("__proto__,__v_isRef,__isVue"),P=new Set(Object.getOwnPropertyNames(Symbol).map(e=>Symbol[e]).filter(r["E"])),N=H(),B=H(!1,!0),k=H(!0),F=U();function U(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...e){const n=Ce(this);for(let t=0,i=this.length;t<i;t++)O(n,"get",t+"");const r=n[t](...e);return-1===r||!1===r?n[t](...e.map(Ce)):r}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...e){A();const n=Ce(this)[t].apply(this,e);return M(),n}}),e}function H(e=!1,t=!1){return function(n,i,o){if("__v_isReactive"===i)return!e;if("__v_isReadonly"===i)return e;if("__v_raw"===i&&o===(e?t?we:be:t?ye:ge).get(n))return n;const a=Object(r["o"])(n);if(!e&&a&&Object(r["k"])(F,i))return Reflect.get(F,i,o);const s=Reflect.get(n,i,o);if(Object(r["E"])(i)?P.has(i):D(i))return s;if(e||O(n,"get",i),t)return s;if(Be(s)){const e=!a||!Object(r["s"])(i);return e?s.value:s}return Object(r["v"])(s)?e?Ae(s):_e(s):s}}const j=V(),G=V(!0);function V(e=!1){return function(t,n,i,o){let a=t[n];if(!e&&!Oe(i)&&(i=Ce(i),a=Ce(a),!Object(r["o"])(t)&&Be(a)&&!Be(i)))return a.value=i,!0;const s=Object(r["o"])(t)&&Object(r["s"])(n)?Number(n)<t.length:Object(r["k"])(t,n),c=Reflect.set(t,n,i,o);return t===Ce(o)&&(s?Object(r["j"])(i,a)&&I(t,"set",n,i,a):I(t,"add",n,i)),c}}function z(e,t){const n=Object(r["k"])(e,t),i=e[t],o=Reflect.deleteProperty(e,t);return o&&n&&I(e,"delete",t,void 0,i),o}function W(e,t){const n=Reflect.has(e,t);return Object(r["E"])(t)&&P.has(t)||O(e,"has",t),n}function q(e){return O(e,"iterate",Object(r["o"])(e)?"length":b),Reflect.ownKeys(e)}const Y={get:N,set:j,deleteProperty:z,has:W,ownKeys:q},X={get:k,set(e,t){return!0},deleteProperty(e,t){return!0}},Q=Object(r["h"])({},Y,{get:B,set:G}),K=e=>e,J=e=>Reflect.getPrototypeOf(e);function Z(e,t,n=!1,r=!1){e=e["__v_raw"];const i=Ce(e),o=Ce(t);t!==o&&!n&&O(i,"get",t),!n&&O(i,"get",o);const{has:a}=J(i),s=r?K:n?De:Le;return a.call(i,t)?s(e.get(t)):a.call(i,o)?s(e.get(o)):void(e!==i&&e.get(t))}function $(e,t=!1){const n=this["__v_raw"],r=Ce(n),i=Ce(e);return e!==i&&!t&&O(r,"has",e),!t&&O(r,"has",i),e===i?n.has(e):n.has(e)||n.has(i)}function ee(e,t=!1){return e=e["__v_raw"],!t&&O(Ce(e),"iterate",b),Reflect.get(e,"size",e)}function te(e){e=Ce(e);const t=Ce(this),n=J(t),r=n.has.call(t,e);return r||(t.add(e),I(t,"add",e,e)),this}function ne(e,t){t=Ce(t);const n=Ce(this),{has:i,get:o}=J(n);let a=i.call(n,e);a||(e=Ce(e),a=i.call(n,e));const s=o.call(n,e);return n.set(e,t),a?Object(r["j"])(t,s)&&I(n,"set",e,t,s):I(n,"add",e,t),this}function re(e){const t=Ce(this),{has:n,get:r}=J(t);let i=n.call(t,e);i||(e=Ce(e),i=n.call(t,e));const o=r?r.call(t,e):void 0,a=t.delete(e);return i&&I(t,"delete",e,void 0,o),a}function ie(){const e=Ce(this),t=0!==e.size,n=void 0,r=e.clear();return t&&I(e,"clear",void 0,void 0,n),r}function oe(e,t){return function(n,r){const i=this,o=i["__v_raw"],a=Ce(o),s=t?K:e?De:Le;return!e&&O(a,"iterate",b),o.forEach((e,t)=>n.call(r,s(e),s(t),i))}}function ae(e,t,n){return function(...i){const o=this["__v_raw"],a=Ce(o),s=Object(r["t"])(a),c="entries"===e||e===Symbol.iterator&&s,u="keys"===e&&s,l=o[e](...i),h=n?K:t?De:Le;return!t&&O(a,"iterate",u?w:b),{next(){const{value:e,done:t}=l.next();return t?{value:e,done:t}:{value:c?[h(e[0]),h(e[1])]:h(e),done:t}},[Symbol.iterator](){return this}}}}function se(e){return function(...t){return"delete"!==e&&this}}function ce(){const e={get(e){return Z(this,e)},get size(){return ee(this)},has:$,add:te,set:ne,delete:re,clear:ie,forEach:oe(!1,!1)},t={get(e){return Z(this,e,!1,!0)},get size(){return ee(this)},has:$,add:te,set:ne,delete:re,clear:ie,forEach:oe(!1,!0)},n={get(e){return Z(this,e,!0)},get size(){return ee(this,!0)},has(e){return $.call(this,e,!0)},add:se("add"),set:se("set"),delete:se("delete"),clear:se("clear"),forEach:oe(!0,!1)},r={get(e){return Z(this,e,!0,!0)},get size(){return ee(this,!0)},has(e){return $.call(this,e,!0)},add:se("add"),set:se("set"),delete:se("delete"),clear:se("clear"),forEach:oe(!0,!0)},i=["keys","values","entries",Symbol.iterator];return i.forEach(i=>{e[i]=ae(i,!1,!1),n[i]=ae(i,!0,!1),t[i]=ae(i,!1,!0),r[i]=ae(i,!0,!0)}),[e,n,t,r]}const[ue,le,he,fe]=ce();function de(e,t){const n=t?e?fe:he:e?le:ue;return(t,i,o)=>"__v_isReactive"===i?!e:"__v_isReadonly"===i?e:"__v_raw"===i?t:Reflect.get(Object(r["k"])(n,i)&&i in t?n:t,i,o)}const pe={get:de(!1,!1)},me={get:de(!1,!0)},ve={get:de(!0,!1)};const ge=new WeakMap,ye=new WeakMap,be=new WeakMap,we=new WeakMap;function Ee(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function xe(e){return e["__v_skip"]||!Object.isExtensible(e)?0:Ee(Object(r["O"])(e))}function _e(e){return e&&e["__v_isReadonly"]?e:Se(e,!1,Y,pe,ge)}function Te(e){return Se(e,!1,Q,me,ye)}function Ae(e){return Se(e,!0,X,ve,be)}function Se(e,t,n,i,o){if(!Object(r["v"])(e))return e;if(e["__v_raw"]&&(!t||!e["__v_isReactive"]))return e;const a=o.get(e);if(a)return a;const s=xe(e);if(0===s)return e;const c=new Proxy(e,2===s?i:n);return o.set(e,c),c}function Me(e){return Oe(e)?Me(e["__v_raw"]):!(!e||!e["__v_isReactive"])}function Oe(e){return!(!e||!e["__v_isReadonly"])}function Re(e){return Me(e)||Oe(e)}function Ce(e){const t=e&&e["__v_raw"];return t?Ce(t):e}function Ie(e){return Object(r["g"])(e,"__v_skip",!0),e}const Le=e=>Object(r["v"])(e)?_e(e):e,De=e=>Object(r["v"])(e)?Ae(e):e;function Pe(e){R()&&(e=Ce(e),e.dep||(e.dep=c()),C(e.dep))}function Ne(e,t){e=Ce(e),e.dep&&L(e.dep)}function Be(e){return Boolean(e&&!0===e.__v_isRef)}function ke(e){return Ue(e,!1)}function Fe(e){return Ue(e,!0)}function Ue(e,t){return Be(e)?e:new He(e,t)}class He{constructor(e,t){this._shallow=t,this.dep=void 0,this.__v_isRef=!0,this._rawValue=t?e:Ce(e),this._value=t?e:Le(e)}get value(){return Pe(this),this._value}set value(e){e=this._shallow?e:Ce(e),Object(r["j"])(e,this._rawValue)&&(this._rawValue=e,this._value=this._shallow?e:Le(e),Ne(this,e))}}function je(e){return Be(e)?e.value:e}const Ge={get:(e,t,n)=>je(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const i=e[t];return Be(i)&&!Be(n)?(i.value=n,!0):Reflect.set(e,t,n,r)}};function Ve(e){return Me(e)?e:new Proxy(e,Ge)}class ze{constructor(e,t,n){this._setter=t,this.dep=void 0,this._dirty=!0,this.__v_isRef=!0,this.effect=new E(e,()=>{this._dirty||(this._dirty=!0,Ne(this))}),this["__v_isReadonly"]=n}get value(){const e=Ce(this);return Pe(e),e._dirty&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}function We(e,t){let n,i;const o=Object(r["p"])(e);o?(n=e,i=r["d"]):(n=e.get,i=e.set);const a=new ze(n,i,o||!i);return a}Promise.resolve();new Set;new Map;function qe(e,t,...n){const i=e.vnode.props||r["b"];let o=n;const a=t.startsWith("update:"),s=a&&t.slice(7);if(s&&s in i){const e=("modelValue"===s?"model":s)+"Modifiers",{number:t,trim:a}=i[e]||r["b"];a?o=n.map(e=>e.trim()):t&&(o=n.map(r["N"]))}let c;let u=i[c=Object(r["M"])(t)]||i[c=Object(r["M"])(Object(r["e"])(t))];!u&&a&&(u=i[c=Object(r["M"])(Object(r["l"])(t))]),u&&jr(u,e,6,o);const l=i[c+"Once"];if(l){if(e.emitted){if(e.emitted[c])return}else e.emitted={};e.emitted[c]=!0,jr(l,e,6,o)}}function Ye(e,t,n=!1){const i=t.emitsCache,o=i.get(e);if(void 0!==o)return o;const a=e.emits;let s={},c=!1;if(!Object(r["p"])(e)){const i=e=>{const n=Ye(e,t,!0);n&&(c=!0,Object(r["h"])(s,n))};!n&&t.mixins.length&&t.mixins.forEach(i),e.extends&&i(e.extends),e.mixins&&e.mixins.forEach(i)}return a||c?(Object(r["o"])(a)?a.forEach(e=>s[e]=null):Object(r["h"])(s,a),i.set(e,s),s):(i.set(e,null),null)}function Xe(e,t){return!(!e||!Object(r["w"])(t))&&(t=t.slice(2).replace(/Once$/,""),Object(r["k"])(e,t[0].toLowerCase()+t.slice(1))||Object(r["k"])(e,Object(r["l"])(t))||Object(r["k"])(e,t))}let Qe=null,Ke=null;function Je(e){const t=Qe;return Qe=e,Ke=e&&e.type.__scopeId||null,t}function Ze(e){Ke=e}function $e(){Ke=null}function et(e,t=Qe,n){if(!t)return e;if(e._n)return e;const r=(...n)=>{r._d&&Xn(-1);const i=Je(t),o=e(...n);return Je(i),r._d&&Xn(1),o};return r._n=!0,r._c=!0,r._d=!0,r}function tt(e){const{type:t,vnode:n,proxy:i,withProxy:o,props:a,propsOptions:[s],slots:c,attrs:u,emit:l,render:h,renderCache:f,data:d,setupState:p,ctx:m,inheritAttrs:v}=e;let g,y;const b=Je(e);try{if(4&n.shapeFlag){const e=o||i;g=hr(h.call(e,e,f,a,p,d,m)),y=u}else{const e=t;0,g=hr(e.length>1?e(a,{attrs:u,slots:c,emit:l}):e(a,null)),y=t.props?u:nt(u)}}catch(E){Vn.length=0,Gr(E,e,1),g=ir(jn)}let w=g;if(y&&!1!==v){const e=Object.keys(y),{shapeFlag:t}=w;e.length&&7&t&&(s&&e.some(r["u"])&&(y=rt(y,s)),w=sr(w,y))}return n.dirs&&(w.dirs=w.dirs?w.dirs.concat(n.dirs):n.dirs),n.transition&&(w.transition=n.transition),g=w,Je(b),g}const nt=e=>{let t;for(const n in e)("class"===n||"style"===n||Object(r["w"])(n))&&((t||(t={}))[n]=e[n]);return t},rt=(e,t)=>{const n={};for(const i in e)Object(r["u"])(i)&&i.slice(9)in t||(n[i]=e[i]);return n};function it(e,t,n){const{props:r,children:i,component:o}=e,{props:a,children:s,patchFlag:c}=t,u=o.emitsOptions;if(t.dirs||t.transition)return!0;if(!(n&&c>=0))return!(!i&&!s||s&&s.$stable)||r!==a&&(r?!a||ot(r,a,u):!!a);if(1024&c)return!0;if(16&c)return r?ot(r,a,u):!!a;if(8&c){const e=t.dynamicProps;for(let t=0;t<e.length;t++){const n=e[t];if(a[n]!==r[n]&&!Xe(u,n))return!0}}return!1}function ot(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let i=0;i<r.length;i++){const o=r[i];if(t[o]!==e[o]&&!Xe(n,o))return!0}return!1}function at({vnode:e,parent:t},n){while(t&&t.subTree===e)(e=t.vnode).el=n,t=t.parent}const st=e=>e.__isSuspense;function ct(e,t){t&&t.pendingBranch?Object(r["o"])(e)?t.effects.push(...e):t.effects.push(e):li(e)}function ut(e,t){if(_r){let n=_r.provides;const r=_r.parent&&_r.parent.provides;r===n&&(n=_r.provides=Object.create(r)),n[e]=t}else 0}function lt(e,t,n=!1){const i=_r||Qe;if(i){const o=null==i.parent?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides;if(o&&e in o)return o[e];if(arguments.length>1)return n&&Object(r["p"])(t)?t.call(i.proxy):t}else 0}function ht(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Pt(()=>{e.isMounted=!0}),kt(()=>{e.isUnmounting=!0}),e}const ft=[Function,Array],dt={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:ft,onEnter:ft,onAfterEnter:ft,onEnterCancelled:ft,onBeforeLeave:ft,onLeave:ft,onAfterLeave:ft,onLeaveCancelled:ft,onBeforeAppear:ft,onAppear:ft,onAfterAppear:ft,onAppearCancelled:ft},setup(e,{slots:t}){const n=Tr(),r=ht();let i;return()=>{const o=t.default&&wt(t.default(),!0);if(!o||!o.length)return;const a=Ce(e),{mode:s}=a;const c=o[0];if(r.isLeaving)return gt(c);const u=yt(c);if(!u)return gt(c);const l=vt(u,a,r,n);bt(u,l);const h=n.subTree,f=h&&yt(h);let d=!1;const{getTransitionKey:p}=u.type;if(p){const e=p();void 0===i?i=e:e!==i&&(i=e,d=!0)}if(f&&f.type!==jn&&(!$n(u,f)||d)){const e=vt(f,a,r,n);if(bt(f,e),"out-in"===s)return r.isLeaving=!0,e.afterLeave=()=>{r.isLeaving=!1,n.update()},gt(c);"in-out"===s&&u.type!==jn&&(e.delayLeave=(e,t,n)=>{const i=mt(r,f);i[String(f.key)]=f,e._leaveCb=()=>{t(),e._leaveCb=void 0,delete l.delayedLeave},l.delayedLeave=n})}return c}}},pt=dt;function mt(e,t){const{leavingVNodes:n}=e;let r=n.get(t.type);return r||(r=Object.create(null),n.set(t.type,r)),r}function vt(e,t,n,r){const{appear:i,mode:o,persisted:a=!1,onBeforeEnter:s,onEnter:c,onAfterEnter:u,onEnterCancelled:l,onBeforeLeave:h,onLeave:f,onAfterLeave:d,onLeaveCancelled:p,onBeforeAppear:m,onAppear:v,onAfterAppear:g,onAppearCancelled:y}=t,b=String(e.key),w=mt(n,e),E=(e,t)=>{e&&jr(e,r,9,t)},x={mode:o,persisted:a,beforeEnter(t){let r=s;if(!n.isMounted){if(!i)return;r=m||s}t._leaveCb&&t._leaveCb(!0);const o=w[b];o&&$n(e,o)&&o.el._leaveCb&&o.el._leaveCb(),E(r,[t])},enter(e){let t=c,r=u,o=l;if(!n.isMounted){if(!i)return;t=v||c,r=g||u,o=y||l}let a=!1;const s=e._enterCb=t=>{a||(a=!0,E(t?o:r,[e]),x.delayedLeave&&x.delayedLeave(),e._enterCb=void 0)};t?(t(e,s),t.length<=1&&s()):s()},leave(t,r){const i=String(e.key);if(t._enterCb&&t._enterCb(!0),n.isUnmounting)return r();E(h,[t]);let o=!1;const a=t._leaveCb=n=>{o||(o=!0,r(),E(n?p:d,[t]),t._leaveCb=void 0,w[i]===e&&delete w[i])};w[i]=e,f?(f(t,a),f.length<=1&&a()):a()},clone(e){return vt(e,t,n,r)}};return x}function gt(e){if(_t(e))return e=sr(e),e.children=null,e}function yt(e){return _t(e)?e.children?e.children[0]:void 0:e}function bt(e,t){6&e.shapeFlag&&e.component?bt(e.component.subTree,t):128&e.shapeFlag?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function wt(e,t=!1){let n=[],r=0;for(let i=0;i<e.length;i++){const o=e[i];o.type===Un?(128&o.patchFlag&&r++,n=n.concat(wt(o.children,t))):(t||o.type!==jn)&&n.push(o)}if(r>1)for(let i=0;i<n.length;i++)n[i].patchFlag=-2;return n}function Et(e){return Object(r["p"])(e)?{setup:e,name:e.name}:e}const xt=e=>!!e.type.__asyncLoader;const _t=e=>e.type.__isKeepAlive;RegExp,RegExp;function Tt(e,t){return Object(r["o"])(e)?e.some(e=>Tt(e,t)):Object(r["D"])(e)?e.split(",").indexOf(t)>-1:!!e.test&&e.test(t)}function At(e,t){Mt(e,"a",t)}function St(e,t){Mt(e,"da",t)}function Mt(e,t,n=_r){const r=e.__wdc||(e.__wdc=()=>{let t=n;while(t){if(t.isDeactivated)return;t=t.parent}return e()});if(It(t,r,n),n){let e=n.parent;while(e&&e.parent)_t(e.parent.vnode)&&Ot(r,t,n,e),e=e.parent}}function Ot(e,t,n,i){const o=It(t,e,i,!0);Ft(()=>{Object(r["K"])(i[t],o)},n)}function Rt(e){let t=e.shapeFlag;256&t&&(t-=256),512&t&&(t-=512),e.shapeFlag=t}function Ct(e){return 128&e.shapeFlag?e.ssContent:e}function It(e,t,n=_r,r=!1){if(n){const i=n[e]||(n[e]=[]),o=t.__weh||(t.__weh=(...r)=>{if(n.isUnmounted)return;A(),Ar(n);const i=jr(t,n,e,r);return Sr(),M(),i});return r?i.unshift(o):i.push(o),o}}const Lt=e=>(t,n=_r)=>(!Cr||"sp"===e)&&It(e,t,n),Dt=Lt("bm"),Pt=Lt("m"),Nt=Lt("bu"),Bt=Lt("u"),kt=Lt("bum"),Ft=Lt("um"),Ut=Lt("sp"),Ht=Lt("rtg"),jt=Lt("rtc");function Gt(e,t=_r){It("ec",e,t)}let Vt=!0;function zt(e){const t=Xt(e),n=e.proxy,i=e.ctx;Vt=!1,t.beforeCreate&&qt(t.beforeCreate,e,"bc");const{data:o,computed:a,methods:s,watch:c,provide:u,inject:l,created:h,beforeMount:f,mounted:d,beforeUpdate:p,updated:m,activated:v,deactivated:g,beforeDestroy:y,beforeUnmount:b,destroyed:w,unmounted:E,render:x,renderTracked:_,renderTriggered:T,errorCaptured:A,serverPrefetch:S,expose:M,inheritAttrs:O,components:R,directives:C,filters:I}=t,L=null;if(l&&Wt(l,i,L,e.appContext.config.unwrapInjectedRef),s)for(const P in s){const e=s[P];Object(r["p"])(e)&&(i[P]=e.bind(n))}if(o){0;const t=o.call(n,n);0,Object(r["v"])(t)&&(e.data=_e(t))}if(Vt=!0,a)for(const P in a){const e=a[P],t=Object(r["p"])(e)?e.bind(n,n):Object(r["p"])(e.get)?e.get.bind(n,n):r["d"];0;const o=!Object(r["p"])(e)&&Object(r["p"])(e.set)?e.set.bind(n):r["d"],s=We({get:t,set:o});Object.defineProperty(i,P,{enumerable:!0,configurable:!0,get:()=>s.value,set:e=>s.value=e})}if(c)for(const r in c)Yt(c[r],i,n,r);if(u){const e=Object(r["p"])(u)?u.call(n):u;Reflect.ownKeys(e).forEach(t=>{ut(t,e[t])})}function D(e,t){Object(r["o"])(t)?t.forEach(t=>e(t.bind(n))):t&&e(t.bind(n))}if(h&&qt(h,e,"c"),D(Dt,f),D(Pt,d),D(Nt,p),D(Bt,m),D(At,v),D(St,g),D(Gt,A),D(jt,_),D(Ht,T),D(kt,b),D(Ft,E),D(Ut,S),Object(r["o"])(M))if(M.length){const t=e.exposed||(e.exposed={});M.forEach(e=>{Object.defineProperty(t,e,{get:()=>n[e],set:t=>n[e]=t})})}else e.exposed||(e.exposed={});x&&e.render===r["d"]&&(e.render=x),null!=O&&(e.inheritAttrs=O),R&&(e.components=R),C&&(e.directives=C)}function Wt(e,t,n=r["d"],i=!1){Object(r["o"])(e)&&(e=$t(e));for(const o in e){const n=e[o];let a;a=Object(r["v"])(n)?"default"in n?lt(n.from||o,n.default,!0):lt(n.from||o):lt(n),Be(a)&&i?Object.defineProperty(t,o,{enumerable:!0,configurable:!0,get:()=>a.value,set:e=>a.value=e}):t[o]=a}}function qt(e,t,n){jr(Object(r["o"])(e)?e.map(e=>e.bind(t.proxy)):e.bind(t.proxy),t,n)}function Yt(e,t,n,i){const o=i.includes(".")?bi(n,i):()=>n[i];if(Object(r["D"])(e)){const n=t[e];Object(r["p"])(n)&&vi(o,n)}else if(Object(r["p"])(e))vi(o,e.bind(n));else if(Object(r["v"])(e))if(Object(r["o"])(e))e.forEach(e=>Yt(e,t,n,i));else{const i=Object(r["p"])(e.handler)?e.handler.bind(n):t[e.handler];Object(r["p"])(i)&&vi(o,i,e)}else 0}function Xt(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:i,optionsCache:o,config:{optionMergeStrategies:a}}=e.appContext,s=o.get(t);let c;return s?c=s:i.length||n||r?(c={},i.length&&i.forEach(e=>Qt(c,e,a,!0)),Qt(c,t,a)):c=t,o.set(t,c),c}function Qt(e,t,n,r=!1){const{mixins:i,extends:o}=t;o&&Qt(e,o,n,!0),i&&i.forEach(t=>Qt(e,t,n,!0));for(const a in t)if(r&&"expose"===a);else{const r=Kt[a]||n&&n[a];e[a]=r?r(e[a],t[a]):t[a]}return e}const Kt={data:Jt,props:tn,emits:tn,methods:tn,computed:tn,beforeCreate:en,created:en,beforeMount:en,mounted:en,beforeUpdate:en,updated:en,beforeDestroy:en,beforeUnmount:en,destroyed:en,unmounted:en,activated:en,deactivated:en,errorCaptured:en,serverPrefetch:en,components:tn,directives:tn,watch:nn,provide:Jt,inject:Zt};function Jt(e,t){return t?e?function(){return Object(r["h"])(Object(r["p"])(e)?e.call(this,this):e,Object(r["p"])(t)?t.call(this,this):t)}:t:e}function Zt(e,t){return tn($t(e),$t(t))}function $t(e){if(Object(r["o"])(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function en(e,t){return e?[...new Set([].concat(e,t))]:t}function tn(e,t){return e?Object(r["h"])(Object(r["h"])(Object.create(null),e),t):t}function nn(e,t){if(!e)return t;if(!t)return e;const n=Object(r["h"])(Object.create(null),e);for(const r in t)n[r]=en(e[r],t[r]);return n}function rn(e,t,n,i=!1){const o={},a={};Object(r["g"])(a,er,1),e.propsDefaults=Object.create(null),an(e,t,o,a);for(const r in e.propsOptions[0])r in o||(o[r]=void 0);n?e.props=i?o:Te(o):e.type.props?e.props=o:e.props=a,e.attrs=a}function on(e,t,n,i){const{props:o,attrs:a,vnode:{patchFlag:s}}=e,c=Ce(o),[u]=e.propsOptions;let l=!1;if(!(i||s>0)||16&s){let i;an(e,t,o,a)&&(l=!0);for(const a in c)t&&(Object(r["k"])(t,a)||(i=Object(r["l"])(a))!==a&&Object(r["k"])(t,i))||(u?!n||void 0===n[a]&&void 0===n[i]||(o[a]=sn(u,c,a,void 0,e,!0)):delete o[a]);if(a!==c)for(const e in a)t&&Object(r["k"])(t,e)||(delete a[e],l=!0)}else if(8&s){const n=e.vnode.dynamicProps;for(let i=0;i<n.length;i++){let s=n[i];const h=t[s];if(u)if(Object(r["k"])(a,s))h!==a[s]&&(a[s]=h,l=!0);else{const t=Object(r["e"])(s);o[t]=sn(u,c,t,h,e,!1)}else h!==a[s]&&(a[s]=h,l=!0)}}l&&I(e,"set","$attrs")}function an(e,t,n,i){const[o,a]=e.propsOptions;let s,c=!1;if(t)for(let u in t){if(Object(r["z"])(u))continue;const l=t[u];let h;o&&Object(r["k"])(o,h=Object(r["e"])(u))?a&&a.includes(h)?(s||(s={}))[h]=l:n[h]=l:Xe(e.emitsOptions,u)||u in i&&l===i[u]||(i[u]=l,c=!0)}if(a){const t=Ce(n),i=s||r["b"];for(let s=0;s<a.length;s++){const c=a[s];n[c]=sn(o,t,c,i[c],e,!Object(r["k"])(i,c))}}return c}function sn(e,t,n,i,o,a){const s=e[n];if(null!=s){const e=Object(r["k"])(s,"default");if(e&&void 0===i){const e=s.default;if(s.type!==Function&&Object(r["p"])(e)){const{propsDefaults:r}=o;n in r?i=r[n]:(Ar(o),i=r[n]=e.call(null,t),Sr())}else i=e}s[0]&&(a&&!e?i=!1:!s[1]||""!==i&&i!==Object(r["l"])(n)||(i=!0))}return i}function cn(e,t,n=!1){const i=t.propsCache,o=i.get(e);if(o)return o;const a=e.props,s={},c=[];let u=!1;if(!Object(r["p"])(e)){const i=e=>{u=!0;const[n,i]=cn(e,t,!0);Object(r["h"])(s,n),i&&c.push(...i)};!n&&t.mixins.length&&t.mixins.forEach(i),e.extends&&i(e.extends),e.mixins&&e.mixins.forEach(i)}if(!a&&!u)return i.set(e,r["a"]),r["a"];if(Object(r["o"])(a))for(let h=0;h<a.length;h++){0;const e=Object(r["e"])(a[h]);un(e)&&(s[e]=r["b"])}else if(a){0;for(const e in a){const t=Object(r["e"])(e);if(un(t)){const n=a[e],i=s[t]=Object(r["o"])(n)||Object(r["p"])(n)?{type:n}:n;if(i){const e=fn(Boolean,i.type),n=fn(String,i.type);i[0]=e>-1,i[1]=n<0||e<n,(e>-1||Object(r["k"])(i,"default"))&&c.push(t)}}}}const l=[s,c];return i.set(e,l),l}function un(e){return"$"!==e[0]}function ln(e){const t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:null===e?"null":""}function hn(e,t){return ln(e)===ln(t)}function fn(e,t){return Object(r["o"])(t)?t.findIndex(t=>hn(t,e)):Object(r["p"])(t)&&hn(t,e)?0:-1}const dn=e=>"_"===e[0]||"$stable"===e,pn=e=>Object(r["o"])(e)?e.map(hr):[hr(e)],mn=(e,t,n)=>{const r=et((...e)=>pn(t(...e)),n);return r._c=!1,r},vn=(e,t,n)=>{const i=e._ctx;for(const o in e){if(dn(o))continue;const n=e[o];if(Object(r["p"])(n))t[o]=mn(o,n,i);else if(null!=n){0;const e=pn(n);t[o]=()=>e}}},gn=(e,t)=>{const n=pn(t);e.slots.default=()=>n},yn=(e,t)=>{if(32&e.vnode.shapeFlag){const n=t._;n?(e.slots=Ce(t),Object(r["g"])(t,"_",n)):vn(t,e.slots={})}else e.slots={},t&&gn(e,t);Object(r["g"])(e.slots,er,1)},bn=(e,t,n)=>{const{vnode:i,slots:o}=e;let a=!0,s=r["b"];if(32&i.shapeFlag){const e=t._;e?n&&1===e?a=!1:(Object(r["h"])(o,t),n||1!==e||delete o._):(a=!t.$stable,vn(t,o)),s=t}else t&&(gn(e,t),s={default:1});if(a)for(const r in o)dn(r)||r in s||delete o[r]};function wn(e,t){const n=Qe;if(null===n)return e;const i=n.proxy,o=e.dirs||(e.dirs=[]);for(let a=0;a<t.length;a++){let[e,n,s,c=r["b"]]=t[a];Object(r["p"])(e)&&(e={mounted:e,updated:e}),e.deep&&wi(n),o.push({dir:e,instance:i,value:n,oldValue:void 0,arg:s,modifiers:c})}return e}function En(e,t,n,r){const i=e.dirs,o=t&&t.dirs;for(let a=0;a<i.length;a++){const s=i[a];o&&(s.oldValue=o[a].value);let c=s.dir[r];c&&(A(),jr(c,n,8,[e.el,s,e,t]),M())}}function xn(){return{app:null,config:{isNativeTag:r["c"],performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let _n=0;function Tn(e,t){return function(n,i=null){null==i||Object(r["v"])(i)||(i=null);const o=xn(),a=new Set;let s=!1;const c=o.app={_uid:_n++,_component:n,_props:i,_container:null,_context:o,_instance:null,version:xi,get config(){return o.config},set config(e){0},use(e,...t){return a.has(e)||(e&&Object(r["p"])(e.install)?(a.add(e),e.install(c,...t)):Object(r["p"])(e)&&(a.add(e),e(c,...t))),c},mixin(e){return o.mixins.includes(e)||o.mixins.push(e),c},component(e,t){return t?(o.components[e]=t,c):o.components[e]},directive(e,t){return t?(o.directives[e]=t,c):o.directives[e]},mount(r,a,u){if(!s){const l=ir(n,i);return l.appContext=o,a&&t?t(l,r):e(l,r,u),s=!0,c._container=r,r.__vue_app__=c,kr(l.component)||l.component.proxy}},unmount(){s&&(e(null,c._container),delete c._container.__vue_app__)},provide(e,t){return o.provides[e]=t,c}};return c}}function An(e,t,n,i,o=!1){if(Object(r["o"])(e))return void e.forEach((e,a)=>An(e,t&&(Object(r["o"])(t)?t[a]:t),n,i,o));if(xt(i)&&!o)return;const a=4&i.shapeFlag?kr(i.component)||i.component.proxy:i.el,s=o?null:a,{i:c,r:u}=e;const l=t&&t.r,h=c.refs===r["b"]?c.refs={}:c.refs,f=c.setupState;if(null!=l&&l!==u&&(Object(r["D"])(l)?(h[l]=null,Object(r["k"])(f,l)&&(f[l]=null)):Be(l)&&(l.value=null)),Object(r["p"])(u))Hr(u,c,12,[s,h]);else{const t=Object(r["D"])(u),i=Be(u);if(t||i){const i=()=>{if(e.f){const n=t?h[u]:u.value;o?Object(r["o"])(n)&&Object(r["K"])(n,a):Object(r["o"])(n)?n.includes(a)||n.push(a):t?h[u]=[a]:(u.value=[a],e.k&&(h[e.k]=u.value))}else t?(h[u]=s,Object(r["k"])(f,u)&&(f[u]=s)):Be(u)&&(u.value=s,e.k&&(h[e.k]=s))};s?(i.id=-1,Mn(i,n)):i()}else 0}}function Sn(){}const Mn=ct;function On(e){return Rn(e)}function Rn(e,t){Sn();const n=Object(r["i"])();n.__VUE__=!0;const{insert:i,remove:o,patchProp:a,createElement:s,createText:c,createComment:u,setText:l,setElementText:h,parentNode:f,nextSibling:d,setScopeId:p=r["d"],cloneNode:m,insertStaticContent:v}=e,g=(e,t,n,r=null,i=null,o=null,a=!1,s=null,c=!!t.dynamicChildren)=>{if(e===t)return;e&&!$n(e,t)&&(r=X(e),V(e,i,o,!0),e=null),-2===t.patchFlag&&(c=!1,t.dynamicChildren=null);const{type:u,ref:l,shapeFlag:h}=t;switch(u){case Hn:y(e,t,n,r);break;case jn:b(e,t,n,r);break;case Gn:null==e&&w(t,n,r,a);break;case Un:D(e,t,n,r,i,o,a,s,c);break;default:1&h?T(e,t,n,r,i,o,a,s,c):6&h?P(e,t,n,r,i,o,a,s,c):(64&h||128&h)&&u.process(e,t,n,r,i,o,a,s,c,K)}null!=l&&i&&An(l,e&&e.ref,o,t||e,!t)},y=(e,t,n,r)=>{if(null==e)i(t.el=c(t.children),n,r);else{const n=t.el=e.el;t.children!==e.children&&l(n,t.children)}},b=(e,t,n,r)=>{null==e?i(t.el=u(t.children||""),n,r):t.el=e.el},w=(e,t,n,r)=>{[e.el,e.anchor]=v(e.children,t,n,r)},x=({el:e,anchor:t},n,r)=>{let o;while(e&&e!==t)o=d(e),i(e,n,r),e=o;i(t,n,r)},_=({el:e,anchor:t})=>{let n;while(e&&e!==t)n=d(e),o(e),e=n;o(t)},T=(e,t,n,r,i,o,a,s,c)=>{a=a||"svg"===t.type,null==e?S(t,n,r,i,o,a,s,c):C(e,t,i,o,a,s,c)},S=(e,t,n,o,c,u,l,f)=>{let d,p;const{type:v,props:g,shapeFlag:y,transition:b,patchFlag:w,dirs:E}=e;if(e.el&&void 0!==m&&-1===w)d=e.el=m(e.el);else{if(d=e.el=s(e.type,u,g&&g.is,g),8&y?h(d,e.children):16&y&&R(e.children,d,null,o,c,u&&"foreignObject"!==v,l,f),E&&En(e,null,o,"created"),g){for(const t in g)"value"===t||Object(r["z"])(t)||a(d,t,null,g[t],u,e.children,o,c,Y);"value"in g&&a(d,"value",null,g.value),(p=g.onVnodeBeforeMount)&&mr(p,o,e)}O(d,e,e.scopeId,l,o)}E&&En(e,null,o,"beforeMount");const x=(!c||c&&!c.pendingBranch)&&b&&!b.persisted;x&&b.beforeEnter(d),i(d,t,n),((p=g&&g.onVnodeMounted)||x||E)&&Mn(()=>{p&&mr(p,o,e),x&&b.enter(d),E&&En(e,null,o,"mounted")},c)},O=(e,t,n,r,i)=>{if(n&&p(e,n),r)for(let o=0;o<r.length;o++)p(e,r[o]);if(i){let n=i.subTree;if(t===n){const t=i.vnode;O(e,t,t.scopeId,t.slotScopeIds,i.parent)}}},R=(e,t,n,r,i,o,a,s,c=0)=>{for(let u=c;u<e.length;u++){const c=e[u]=s?fr(e[u]):hr(e[u]);g(null,c,t,n,r,i,o,a,s)}},C=(e,t,n,i,o,s,c)=>{const u=t.el=e.el;let{patchFlag:l,dynamicChildren:f,dirs:d}=t;l|=16&e.patchFlag;const p=e.props||r["b"],m=t.props||r["b"];let v;n&&Cn(n,!1),(v=m.onVnodeBeforeUpdate)&&mr(v,n,t,e),d&&En(t,e,n,"beforeUpdate"),n&&Cn(n,!0);const g=o&&"foreignObject"!==t.type;if(f?I(e.dynamicChildren,f,u,n,i,g,s):c||U(e,t,u,null,n,i,g,s,!1),l>0){if(16&l)L(u,t,p,m,n,i,o);else if(2&l&&p.class!==m.class&&a(u,"class",null,m.class,o),4&l&&a(u,"style",p.style,m.style,o),8&l){const r=t.dynamicProps;for(let t=0;t<r.length;t++){const s=r[t],c=p[s],l=m[s];l===c&&"value"!==s||a(u,s,c,l,o,e.children,n,i,Y)}}1&l&&e.children!==t.children&&h(u,t.children)}else c||null!=f||L(u,t,p,m,n,i,o);((v=m.onVnodeUpdated)||d)&&Mn(()=>{v&&mr(v,n,t,e),d&&En(t,e,n,"updated")},i)},I=(e,t,n,r,i,o,a)=>{for(let s=0;s<t.length;s++){const c=e[s],u=t[s],l=c.el&&(c.type===Un||!$n(c,u)||70&c.shapeFlag)?f(c.el):n;g(c,u,l,null,r,i,o,a,!0)}},L=(e,t,n,i,o,s,c)=>{if(n!==i){for(const u in i){if(Object(r["z"])(u))continue;const l=i[u],h=n[u];l!==h&&"value"!==u&&a(e,u,h,l,c,t.children,o,s,Y)}if(n!==r["b"])for(const u in n)Object(r["z"])(u)||u in i||a(e,u,n[u],null,c,t.children,o,s,Y);"value"in i&&a(e,"value",n.value,i.value)}},D=(e,t,n,r,o,a,s,u,l)=>{const h=t.el=e?e.el:c(""),f=t.anchor=e?e.anchor:c("");let{patchFlag:d,dynamicChildren:p,slotScopeIds:m}=t;m&&(u=u?u.concat(m):m),null==e?(i(h,n,r),i(f,n,r),R(t.children,n,f,o,a,s,u,l)):d>0&&64&d&&p&&e.dynamicChildren?(I(e.dynamicChildren,p,n,o,a,s,u),(null!=t.key||o&&t===o.subTree)&&In(e,t,!0)):U(e,t,n,f,o,a,s,u,l)},P=(e,t,n,r,i,o,a,s,c)=>{t.slotScopeIds=s,null==e?512&t.shapeFlag?i.ctx.activate(t,n,r,a,c):N(t,n,r,i,o,a,c):B(e,t,c)},N=(e,t,n,r,i,o,a)=>{const s=e.component=xr(e,r,i);if(_t(e)&&(s.ctx.renderer=K),Ir(s),s.asyncDep){if(i&&i.registerDep(s,k),!e.el){const e=s.subTree=ir(jn);b(null,e,t,n)}}else k(s,e,t,n,i,o,a)},B=(e,t,n)=>{const r=t.component=e.component;if(it(e,t,n)){if(r.asyncDep&&!r.asyncResolved)return void F(r,t,n);r.next=t,si(r.update),r.update()}else t.component=e.component,t.el=e.el,r.vnode=t},k=(e,t,n,i,o,a,s)=>{const c=()=>{if(e.isMounted){let t,{next:n,bu:i,u:c,parent:u,vnode:l}=e,h=n;0,Cn(e,!1),n?(n.el=l.el,F(e,n,s)):n=l,i&&Object(r["n"])(i),(t=n.props&&n.props.onVnodeBeforeUpdate)&&mr(t,u,n,l),Cn(e,!0);const d=tt(e);0;const p=e.subTree;e.subTree=d,g(p,d,f(p.el),X(p),e,o,a),n.el=d.el,null===h&&at(e,d.el),c&&Mn(c,o),(t=n.props&&n.props.onVnodeUpdated)&&Mn(()=>mr(t,u,n,l),o)}else{let s;const{el:c,props:u}=t,{bm:l,m:h,parent:f}=e,d=xt(t);if(Cn(e,!1),l&&Object(r["n"])(l),!d&&(s=u&&u.onVnodeBeforeMount)&&mr(s,f,t),Cn(e,!0),c&&Z){const n=()=>{e.subTree=tt(e),Z(c,e.subTree,e,o,null)};d?t.type.__asyncLoader().then(()=>!e.isUnmounted&&n()):n()}else{0;const r=e.subTree=tt(e);0,g(null,r,n,i,e,o,a),t.el=r.el}if(h&&Mn(h,o),!d&&(s=u&&u.onVnodeMounted)){const e=t;Mn(()=>mr(s,f,e),o)}256&t.shapeFlag&&e.a&&Mn(e.a,o),e.isMounted=!0,t=n=i=null}},u=e.effect=new E(c,()=>oi(e.update),e.scope),l=e.update=u.run.bind(u);l.id=e.uid,Cn(e,!0),l()},F=(e,t,n)=>{t.component=e;const r=e.vnode.props;e.vnode=t,e.next=null,on(e,t.props,r,n),bn(e,t.children,n),A(),hi(void 0,e.update),M()},U=(e,t,n,r,i,o,a,s,c=!1)=>{const u=e&&e.children,l=e?e.shapeFlag:0,f=t.children,{patchFlag:d,shapeFlag:p}=t;if(d>0){if(128&d)return void j(u,f,n,r,i,o,a,s,c);if(256&d)return void H(u,f,n,r,i,o,a,s,c)}8&p?(16&l&&Y(u,i,o),f!==u&&h(n,f)):16&l?16&p?j(u,f,n,r,i,o,a,s,c):Y(u,i,o,!0):(8&l&&h(n,""),16&p&&R(f,n,r,i,o,a,s,c))},H=(e,t,n,i,o,a,s,c,u)=>{e=e||r["a"],t=t||r["a"];const l=e.length,h=t.length,f=Math.min(l,h);let d;for(d=0;d<f;d++){const r=t[d]=u?fr(t[d]):hr(t[d]);g(e[d],r,n,null,o,a,s,c,u)}l>h?Y(e,o,a,!0,!1,f):R(t,n,i,o,a,s,c,u,f)},j=(e,t,n,i,o,a,s,c,u)=>{let l=0;const h=t.length;let f=e.length-1,d=h-1;while(l<=f&&l<=d){const r=e[l],i=t[l]=u?fr(t[l]):hr(t[l]);if(!$n(r,i))break;g(r,i,n,null,o,a,s,c,u),l++}while(l<=f&&l<=d){const r=e[f],i=t[d]=u?fr(t[d]):hr(t[d]);if(!$n(r,i))break;g(r,i,n,null,o,a,s,c,u),f--,d--}if(l>f){if(l<=d){const e=d+1,r=e<h?t[e].el:i;while(l<=d)g(null,t[l]=u?fr(t[l]):hr(t[l]),n,r,o,a,s,c,u),l++}}else if(l>d)while(l<=f)V(e[l],o,a,!0),l++;else{const p=l,m=l,v=new Map;for(l=m;l<=d;l++){const e=t[l]=u?fr(t[l]):hr(t[l]);null!=e.key&&v.set(e.key,l)}let y,b=0;const w=d-m+1;let E=!1,x=0;const _=new Array(w);for(l=0;l<w;l++)_[l]=0;for(l=p;l<=f;l++){const r=e[l];if(b>=w){V(r,o,a,!0);continue}let i;if(null!=r.key)i=v.get(r.key);else for(y=m;y<=d;y++)if(0===_[y-m]&&$n(r,t[y])){i=y;break}void 0===i?V(r,o,a,!0):(_[i-m]=l+1,i>=x?x=i:E=!0,g(r,t[i],n,null,o,a,s,c,u),b++)}const T=E?Ln(_):r["a"];for(y=T.length-1,l=w-1;l>=0;l--){const e=m+l,r=t[e],f=e+1<h?t[e+1].el:i;0===_[l]?g(null,r,n,f,o,a,s,c,u):E&&(y<0||l!==T[y]?G(r,n,f,2):y--)}}},G=(e,t,n,r,o=null)=>{const{el:a,type:s,transition:c,children:u,shapeFlag:l}=e;if(6&l)return void G(e.component.subTree,t,n,r);if(128&l)return void e.suspense.move(t,n,r);if(64&l)return void s.move(e,t,n,K);if(s===Un){i(a,t,n);for(let e=0;e<u.length;e++)G(u[e],t,n,r);return void i(e.anchor,t,n)}if(s===Gn)return void x(e,t,n);const h=2!==r&&1&l&&c;if(h)if(0===r)c.beforeEnter(a),i(a,t,n),Mn(()=>c.enter(a),o);else{const{leave:e,delayLeave:r,afterLeave:o}=c,s=()=>i(a,t,n),u=()=>{e(a,()=>{s(),o&&o()})};r?r(a,s,u):u()}else i(a,t,n)},V=(e,t,n,r=!1,i=!1)=>{const{type:o,props:a,ref:s,children:c,dynamicChildren:u,shapeFlag:l,patchFlag:h,dirs:f}=e;if(null!=s&&An(s,null,n,e,!0),256&l)return void t.ctx.deactivate(e);const d=1&l&&f,p=!xt(e);let m;if(p&&(m=a&&a.onVnodeBeforeUnmount)&&mr(m,t,e),6&l)q(e.component,n,r);else{if(128&l)return void e.suspense.unmount(n,r);d&&En(e,null,t,"beforeUnmount"),64&l?e.type.remove(e,t,n,i,K,r):u&&(o!==Un||h>0&&64&h)?Y(u,t,n,!1,!0):(o===Un&&384&h||!i&&16&l)&&Y(c,t,n),r&&z(e)}(p&&(m=a&&a.onVnodeUnmounted)||d)&&Mn(()=>{m&&mr(m,t,e),d&&En(e,null,t,"unmounted")},n)},z=e=>{const{type:t,el:n,anchor:r,transition:i}=e;if(t===Un)return void W(n,r);if(t===Gn)return void _(e);const a=()=>{o(n),i&&!i.persisted&&i.afterLeave&&i.afterLeave()};if(1&e.shapeFlag&&i&&!i.persisted){const{leave:t,delayLeave:r}=i,o=()=>t(n,a);r?r(e.el,a,o):o()}else a()},W=(e,t)=>{let n;while(e!==t)n=d(e),o(e),e=n;o(t)},q=(e,t,n)=>{const{bum:i,scope:o,update:a,subTree:s,um:c}=e;i&&Object(r["n"])(i),o.stop(),a&&(a.active=!1,V(s,e,t,n)),c&&Mn(c,t),Mn(()=>{e.isUnmounted=!0},t),t&&t.pendingBranch&&!t.isUnmounted&&e.asyncDep&&!e.asyncResolved&&e.suspenseId===t.pendingId&&(t.deps--,0===t.deps&&t.resolve())},Y=(e,t,n,r=!1,i=!1,o=0)=>{for(let a=o;a<e.length;a++)V(e[a],t,n,r,i)},X=e=>6&e.shapeFlag?X(e.component.subTree):128&e.shapeFlag?e.suspense.next():d(e.anchor||e.el),Q=(e,t,n)=>{null==e?t._vnode&&V(t._vnode,null,null,!0):g(t._vnode||null,e,t,null,null,null,n),fi(),t._vnode=e},K={p:g,um:V,m:G,r:z,mt:N,mc:R,pc:U,pbc:I,n:X,o:e};let J,Z;return t&&([J,Z]=t(K)),{render:Q,hydrate:J,createApp:Tn(Q,J)}}function Cn({effect:e,update:t},n){e.allowRecurse=t.allowRecurse=n}function In(e,t,n=!1){const i=e.children,o=t.children;if(Object(r["o"])(i)&&Object(r["o"])(o))for(let r=0;r<i.length;r++){const e=i[r];let t=o[r];1&t.shapeFlag&&!t.dynamicChildren&&((t.patchFlag<=0||32===t.patchFlag)&&(t=o[r]=fr(o[r]),t.el=e.el),n||In(e,t))}}function Ln(e){const t=e.slice(),n=[0];let r,i,o,a,s;const c=e.length;for(r=0;r<c;r++){const c=e[r];if(0!==c){if(i=n[n.length-1],e[i]<c){t[r]=i,n.push(r);continue}o=0,a=n.length-1;while(o<a)s=o+a>>1,e[n[s]]<c?o=s+1:a=s;c<e[n[o]]&&(o>0&&(t[r]=n[o-1]),n[o]=r)}}o=n.length,a=n[o-1];while(o-- >0)n[o]=a,a=t[a];return n}const Dn=e=>e.__isTeleport;const Pn="components";function Nn(e,t){return kn(Pn,e,!0,t)||e}const Bn=Symbol();function kn(e,t,n=!0,i=!1){const o=Qe||_r;if(o){const n=o.type;if(e===Pn){const e=Fr(n);if(e&&(e===t||e===Object(r["e"])(t)||e===Object(r["f"])(Object(r["e"])(t))))return n}const a=Fn(o[e]||n[e],t)||Fn(o.appContext[e],t);return!a&&i?n:a}}function Fn(e,t){return e&&(e[t]||e[Object(r["e"])(t)]||e[Object(r["f"])(Object(r["e"])(t))])}const Un=Symbol(void 0),Hn=Symbol(void 0),jn=Symbol(void 0),Gn=Symbol(void 0),Vn=[];let zn=null;function Wn(e=!1){Vn.push(zn=e?null:[])}function qn(){Vn.pop(),zn=Vn[Vn.length-1]||null}let Yn=1;function Xn(e){Yn+=e}function Qn(e){return e.dynamicChildren=Yn>0?zn||r["a"]:null,qn(),Yn>0&&zn&&zn.push(e),e}function Kn(e,t,n,r,i,o){return Qn(rr(e,t,n,r,i,o,!0))}function Jn(e,t,n,r,i){return Qn(ir(e,t,n,r,i,!0))}function Zn(e){return!!e&&!0===e.__v_isVNode}function $n(e,t){return e.type===t.type&&e.key===t.key}const er="__vInternal",tr=({key:e})=>null!=e?e:null,nr=({ref:e,ref_key:t,ref_for:n})=>null!=e?Object(r["D"])(e)||Be(e)||Object(r["p"])(e)?{i:Qe,r:e,k:t,f:!!n}:e:null;function rr(e,t=null,n=null,i=0,o=null,a=(e===Un?0:1),s=!1,c=!1){const u={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&tr(t),ref:t&&nr(t),scopeId:Ke,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:i,dynamicProps:o,dynamicChildren:null,appContext:null};return c?(dr(u,n),128&a&&e.normalize(u)):n&&(u.shapeFlag|=Object(r["D"])(n)?8:16),Yn>0&&!s&&zn&&(u.patchFlag>0||6&a)&&32!==u.patchFlag&&zn.push(u),u}const ir=or;function or(e,t=null,n=null,i=0,o=null,a=!1){if(e&&e!==Bn||(e=jn),Zn(e)){const r=sr(e,t,!0);return n&&dr(r,n),r}if(Ur(e)&&(e=e.__vccOpts),t){t=ar(t);let{class:e,style:n}=t;e&&!Object(r["D"])(e)&&(t.class=Object(r["I"])(e)),Object(r["v"])(n)&&(Re(n)&&!Object(r["o"])(n)&&(n=Object(r["h"])({},n)),t.style=Object(r["J"])(n))}const s=Object(r["D"])(e)?1:st(e)?128:Dn(e)?64:Object(r["v"])(e)?4:Object(r["p"])(e)?2:0;return rr(e,t,n,i,o,s,a,!0)}function ar(e){return e?Re(e)||er in e?Object(r["h"])({},e):e:null}function sr(e,t,n=!1){const{props:i,ref:o,patchFlag:a,children:s}=e,c=t?pr(i||{},t):i,u={__v_isVNode:!0,__v_skip:!0,type:e.type,props:c,key:c&&tr(c),ref:t&&t.ref?n&&o?Object(r["o"])(o)?o.concat(nr(t)):[o,nr(t)]:nr(t):o,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:s,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Un?-1===a?16:16|a:a,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&sr(e.ssContent),ssFallback:e.ssFallback&&sr(e.ssFallback),el:e.el,anchor:e.anchor};return u}function cr(e=" ",t=0){return ir(Hn,null,e,t)}function ur(e,t){const n=ir(Gn,null,e);return n.staticCount=t,n}function lr(e="",t=!1){return t?(Wn(),Jn(jn,null,e)):ir(jn,null,e)}function hr(e){return null==e||"boolean"===typeof e?ir(jn):Object(r["o"])(e)?ir(Un,null,e.slice()):"object"===typeof e?fr(e):ir(Hn,null,String(e))}function fr(e){return null===e.el||e.memo?e:sr(e)}function dr(e,t){let n=0;const{shapeFlag:i}=e;if(null==t)t=null;else if(Object(r["o"])(t))n=16;else if("object"===typeof t){if(65&i){const n=t.default;return void(n&&(n._c&&(n._d=!1),dr(e,n()),n._c&&(n._d=!0)))}{n=32;const r=t._;r||er in t?3===r&&Qe&&(1===Qe.slots._?t._=1:(t._=2,e.patchFlag|=1024)):t._ctx=Qe}}else Object(r["p"])(t)?(t={default:t,_ctx:Qe},n=32):(t=String(t),64&i?(n=16,t=[cr(t)]):n=8);e.children=t,e.shapeFlag|=n}function pr(...e){const t={};for(let n=0;n<e.length;n++){const i=e[n];for(const e in i)if("class"===e)t.class!==i.class&&(t.class=Object(r["I"])([t.class,i.class]));else if("style"===e)t.style=Object(r["J"])([t.style,i.style]);else if(Object(r["w"])(e)){const n=t[e],o=i[e];n===o||Object(r["o"])(n)&&n.includes(o)||(t[e]=n?[].concat(n,o):o)}else""!==e&&(t[e]=i[e])}return t}function mr(e,t,n,r=null){jr(e,t,7,[n,r])}function vr(e,t,n,i){let o;const a=n&&n[i];if(Object(r["o"])(e)||Object(r["D"])(e)){o=new Array(e.length);for(let n=0,r=e.length;n<r;n++)o[n]=t(e[n],n,void 0,a&&a[n])}else if("number"===typeof e){0,o=new Array(e);for(let n=0;n<e;n++)o[n]=t(n+1,n,void 0,a&&a[n])}else if(Object(r["v"])(e))if(e[Symbol.iterator])o=Array.from(e,(e,n)=>t(e,n,void 0,a&&a[n]));else{const n=Object.keys(e);o=new Array(n.length);for(let r=0,i=n.length;r<i;r++){const i=n[r];o[r]=t(e[i],i,r,a&&a[r])}}else o=[];return n&&(n[i]=o),o}const gr=e=>e?Mr(e)?kr(e)||e.proxy:gr(e.parent):null,yr=Object(r["h"])(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>gr(e.parent),$root:e=>gr(e.root),$emit:e=>e.emit,$options:e=>Xt(e),$forceUpdate:e=>()=>oi(e.update),$nextTick:e=>ri.bind(e.proxy),$watch:e=>yi.bind(e)}),br={get({_:e},t){const{ctx:n,setupState:i,data:o,props:a,accessCache:s,type:c,appContext:u}=e;let l;if("$"!==t[0]){const c=s[t];if(void 0!==c)switch(c){case 1:return i[t];case 2:return o[t];case 4:return n[t];case 3:return a[t]}else{if(i!==r["b"]&&Object(r["k"])(i,t))return s[t]=1,i[t];if(o!==r["b"]&&Object(r["k"])(o,t))return s[t]=2,o[t];if((l=e.propsOptions[0])&&Object(r["k"])(l,t))return s[t]=3,a[t];if(n!==r["b"]&&Object(r["k"])(n,t))return s[t]=4,n[t];Vt&&(s[t]=0)}}const h=yr[t];let f,d;return h?("$attrs"===t&&O(e,"get",t),h(e)):(f=c.__cssModules)&&(f=f[t])?f:n!==r["b"]&&Object(r["k"])(n,t)?(s[t]=4,n[t]):(d=u.config.globalProperties,Object(r["k"])(d,t)?d[t]:void 0)},set({_:e},t,n){const{data:i,setupState:o,ctx:a}=e;if(o!==r["b"]&&Object(r["k"])(o,t))o[t]=n;else if(i!==r["b"]&&Object(r["k"])(i,t))i[t]=n;else if(Object(r["k"])(e.props,t))return!1;return("$"!==t[0]||!(t.slice(1)in e))&&(a[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:i,appContext:o,propsOptions:a}},s){let c;return!!n[s]||e!==r["b"]&&Object(r["k"])(e,s)||t!==r["b"]&&Object(r["k"])(t,s)||(c=a[0])&&Object(r["k"])(c,s)||Object(r["k"])(i,s)||Object(r["k"])(yr,s)||Object(r["k"])(o.config.globalProperties,s)}};const wr=xn();let Er=0;function xr(e,t,n){const i=e.type,o=(t?t.appContext:e.appContext)||wr,s={uid:Er++,vnode:e,type:i,parent:t,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,scope:new a(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(o.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:cn(i,o),emitsOptions:Ye(i,o),emit:null,emitted:null,propsDefaults:r["b"],inheritAttrs:i.inheritAttrs,ctx:r["b"],data:r["b"],props:r["b"],attrs:r["b"],slots:r["b"],refs:r["b"],setupState:r["b"],setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=t?t.root:s,s.emit=qe.bind(null,s),e.ce&&e.ce(s),s}let _r=null;const Tr=()=>_r||Qe,Ar=e=>{_r=e,e.scope.on()},Sr=()=>{_r&&_r.scope.off(),_r=null};function Mr(e){return 4&e.vnode.shapeFlag}let Or,Rr,Cr=!1;function Ir(e,t=!1){Cr=t;const{props:n,children:r}=e.vnode,i=Mr(e);rn(e,n,i,t),yn(e,r);const o=i?Lr(e,t):void 0;return Cr=!1,o}function Lr(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=Ie(new Proxy(e.ctx,br));const{setup:i}=n;if(i){const n=e.setupContext=i.length>1?Br(e):null;Ar(e),A();const o=Hr(i,e,0,[e.props,n]);if(M(),Sr(),Object(r["y"])(o)){if(o.then(Sr,Sr),t)return o.then(n=>{Dr(e,n,t)}).catch(t=>{Gr(t,e,0)});e.asyncDep=o}else Dr(e,o,t)}else Pr(e,t)}function Dr(e,t,n){Object(r["p"])(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Object(r["v"])(t)&&(e.setupState=Ve(t)),Pr(e,n)}function Pr(e,t,n){const i=e.type;if(!e.render){if(!t&&Or&&!i.render){const t=i.template;if(t){0;const{isCustomElement:n,compilerOptions:o}=e.appContext.config,{delimiters:a,compilerOptions:s}=i,c=Object(r["h"])(Object(r["h"])({isCustomElement:n,delimiters:a},o),s);i.render=Or(t,c)}}e.render=i.render||r["d"],Rr&&Rr(e)}Ar(e),A(),zt(e),M(),Sr()}function Nr(e){return new Proxy(e.attrs,{get(t,n){return O(e,"get","$attrs"),t[n]}})}function Br(e){const t=t=>{e.exposed=t||{}};let n;return{get attrs(){return n||(n=Nr(e))},slots:e.slots,emit:e.emit,expose:t}}function kr(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(Ve(Ie(e.exposed)),{get(t,n){return n in t?t[n]:n in yr?yr[n](e):void 0}}))}function Fr(e){return Object(r["p"])(e)&&e.displayName||e.name}function Ur(e){return Object(r["p"])(e)&&"__vccOpts"in e}function Hr(e,t,n,r){let i;try{i=r?e(...r):e()}catch(o){Gr(o,t,n)}return i}function jr(e,t,n,i){if(Object(r["p"])(e)){const o=Hr(e,t,n,i);return o&&Object(r["y"])(o)&&o.catch(e=>{Gr(e,t,n)}),o}const o=[];for(let r=0;r<e.length;r++)o.push(jr(e[r],t,n,i));return o}function Gr(e,t,n,r=!0){const i=t?t.vnode:null;if(t){let r=t.parent;const i=t.proxy,o=n;while(r){const t=r.ec;if(t)for(let n=0;n<t.length;n++)if(!1===t[n](e,i,o))return;r=r.parent}const a=t.appContext.config.errorHandler;if(a)return void Hr(a,null,10,[e,i,o])}Vr(e,n,i,r)}function Vr(e,t,n,r=!0){console.error(e)}let zr=!1,Wr=!1;const qr=[];let Yr=0;const Xr=[];let Qr=null,Kr=0;const Jr=[];let Zr=null,$r=0;const ei=Promise.resolve();let ti=null,ni=null;function ri(e){const t=ti||ei;return e?t.then(this?e.bind(this):e):t}function ii(e){let t=Yr+1,n=qr.length;while(t<n){const r=t+n>>>1,i=di(qr[r]);i<e?t=r+1:n=r}return t}function oi(e){qr.length&&qr.includes(e,zr&&e.allowRecurse?Yr+1:Yr)||e===ni||(null==e.id?qr.push(e):qr.splice(ii(e.id),0,e),ai())}function ai(){zr||Wr||(Wr=!0,ti=ei.then(pi))}function si(e){const t=qr.indexOf(e);t>Yr&&qr.splice(t,1)}function ci(e,t,n,i){Object(r["o"])(e)?n.push(...e):t&&t.includes(e,e.allowRecurse?i+1:i)||n.push(e),ai()}function ui(e){ci(e,Qr,Xr,Kr)}function li(e){ci(e,Zr,Jr,$r)}function hi(e,t=null){if(Xr.length){for(ni=t,Qr=[...new Set(Xr)],Xr.length=0,Kr=0;Kr<Qr.length;Kr++)Qr[Kr]();Qr=null,Kr=0,ni=null,hi(e,t)}}function fi(e){if(Jr.length){const e=[...new Set(Jr)];if(Jr.length=0,Zr)return void Zr.push(...e);for(Zr=e,Zr.sort((e,t)=>di(e)-di(t)),$r=0;$r<Zr.length;$r++)Zr[$r]();Zr=null,$r=0}}const di=e=>null==e.id?1/0:e.id;function pi(e){Wr=!1,zr=!0,hi(e),qr.sort((e,t)=>di(e)-di(t));r["d"];try{for(Yr=0;Yr<qr.length;Yr++){const e=qr[Yr];e&&!1!==e.active&&Hr(e,null,14)}}finally{Yr=0,qr.length=0,fi(e),zr=!1,ti=null,(qr.length||Xr.length||Jr.length)&&pi(e)}}const mi={};function vi(e,t,n){return gi(e,t,n)}function gi(e,t,{immediate:n,deep:i,flush:o,onTrack:a,onTrigger:s}=r["b"]){const c=_r;let u,l,h=!1,f=!1;if(Be(e)?(u=()=>e.value,h=!!e._shallow):Me(e)?(u=()=>e,i=!0):Object(r["o"])(e)?(f=!0,h=e.some(Me),u=()=>e.map(e=>Be(e)?e.value:Me(e)?wi(e):Object(r["p"])(e)?Hr(e,c,2):void 0)):u=Object(r["p"])(e)?t?()=>Hr(e,c,2):()=>{if(!c||!c.isUnmounted)return l&&l(),jr(e,c,3,[d])}:r["d"],t&&i){const e=u;u=()=>wi(e())}let d=e=>{l=g.onStop=()=>{Hr(e,c,4)}};if(Cr)return d=r["d"],t?n&&jr(t,c,3,[u(),f?[]:void 0,d]):u(),r["d"];let p=f?[]:mi;const m=()=>{if(g.active)if(t){const e=g.run();(i||h||(f?e.some((e,t)=>Object(r["j"])(e,p[t])):Object(r["j"])(e,p)))&&(l&&l(),jr(t,c,3,[e,p===mi?void 0:p,d]),p=e)}else g.run()};let v;m.allowRecurse=!!t,v="sync"===o?m:"post"===o?()=>Mn(m,c&&c.suspense):()=>{!c||c.isMounted?ui(m):m()};const g=new E(u,v);return t?n?m():p=g.run():"post"===o?Mn(g.run.bind(g),c&&c.suspense):g.run(),()=>{g.stop(),c&&c.scope&&Object(r["K"])(c.scope.effects,g)}}function yi(e,t,n){const i=this.proxy,o=Object(r["D"])(e)?e.includes(".")?bi(i,e):()=>i[e]:e.bind(i,i);let a;Object(r["p"])(t)?a=t:(a=t.handler,n=t);const s=_r;Ar(this);const c=gi(o,a.bind(i),n);return s?Ar(s):Sr(),c}function bi(e,t){const n=t.split(".");return()=>{let t=e;for(let e=0;e<n.length&&t;e++)t=t[n[e]];return t}}function wi(e,t){if(!Object(r["v"])(e)||e["__v_skip"])return e;if(t=t||new Set,t.has(e))return e;if(t.add(e),Be(e))wi(e.value,t);else if(Object(r["o"])(e))for(let n=0;n<e.length;n++)wi(e[n],t);else if(Object(r["B"])(e)||Object(r["t"])(e))e.forEach(e=>{wi(e,t)});else if(Object(r["x"])(e))for(const n in e)wi(e[n],t);return e}function Ei(e,t,n){const i=arguments.length;return 2===i?Object(r["v"])(t)&&!Object(r["o"])(t)?Zn(t)?ir(e,null,[t]):ir(e,t):ir(e,null,t):(i>3?n=Array.prototype.slice.call(arguments,2):3===i&&Zn(n)&&(n=[n]),ir(e,t,n))}Symbol("");const xi="3.2.26",_i="http://www.w3.org/2000/svg",Ti="undefined"!==typeof document?document:null,Ai=new Map,Si={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const i=t?Ti.createElementNS(_i,e):Ti.createElement(e,n?{is:n}:void 0);return"select"===e&&r&&null!=r.multiple&&i.setAttribute("multiple",r.multiple),i},createText:e=>Ti.createTextNode(e),createComment:e=>Ti.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Ti.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},cloneNode(e){const t=e.cloneNode(!0);return"_value"in e&&(t._value=e._value),t},insertStaticContent(e,t,n,r){const i=n?n.previousSibling:t.lastChild;let o=Ai.get(e);if(!o){const t=Ti.createElement("template");if(t.innerHTML=r?`<svg>${e}</svg>`:e,o=t.content,r){const e=o.firstChild;while(e.firstChild)o.appendChild(e.firstChild);o.removeChild(e)}Ai.set(e,o)}return t.insertBefore(o.cloneNode(!0),n),[i?i.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}};function Mi(e,t,n){const r=e._vtc;r&&(t=(t?[t,...r]:[...r]).join(" ")),null==t?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}function Oi(e,t,n){const i=e.style,o=Object(r["D"])(n);if(n&&!o){for(const e in n)Ci(i,e,n[e]);if(t&&!Object(r["D"])(t))for(const e in t)null==n[e]&&Ci(i,e,"")}else{const r=i.display;o?t!==n&&(i.cssText=n):t&&e.removeAttribute("style"),"_vod"in e&&(i.display=r)}}const Ri=/\s*!important$/;function Ci(e,t,n){if(Object(r["o"])(n))n.forEach(n=>Ci(e,t,n));else if(t.startsWith("--"))e.setProperty(t,n);else{const i=Di(e,t);Ri.test(n)?e.setProperty(Object(r["l"])(i),n.replace(Ri,""),"important"):e[i]=n}}const Ii=["Webkit","Moz","ms"],Li={};function Di(e,t){const n=Li[t];if(n)return n;let i=Object(r["e"])(t);if("filter"!==i&&i in e)return Li[t]=i;i=Object(r["f"])(i);for(let r=0;r<Ii.length;r++){const n=Ii[r]+i;if(n in e)return Li[t]=n}return t}const Pi="http://www.w3.org/1999/xlink";function Ni(e,t,n,i,o){if(i&&t.startsWith("xlink:"))null==n?e.removeAttributeNS(Pi,t.slice(6,t.length)):e.setAttributeNS(Pi,t,n);else{const i=Object(r["C"])(t);null==n||i&&!Object(r["m"])(n)?e.removeAttribute(t):e.setAttribute(t,i?"":n)}}function Bi(e,t,n,i,o,a,s){if("innerHTML"===t||"textContent"===t)return i&&s(i,o,a),void(e[t]=null==n?"":n);if("value"===t&&"PROGRESS"!==e.tagName&&!e.tagName.includes("-")){e._value=n;const r=null==n?"":n;return e.value===r&&"OPTION"!==e.tagName||(e.value=r),void(null==n&&e.removeAttribute(t))}if(""===n||null==n){const i=typeof e[t];if("boolean"===i)return void(e[t]=Object(r["m"])(n));if(null==n&&"string"===i)return e[t]="",void e.removeAttribute(t);if("number"===i){try{e[t]=0}catch(c){}return void e.removeAttribute(t)}}try{e[t]=n}catch(u){0}}let ki=Date.now,Fi=!1;if("undefined"!==typeof window){ki()>document.createEvent("Event").timeStamp&&(ki=()=>performance.now());const e=navigator.userAgent.match(/firefox\/(\d+)/i);Fi=!!(e&&Number(e[1])<=53)}let Ui=0;const Hi=Promise.resolve(),ji=()=>{Ui=0},Gi=()=>Ui||(Hi.then(ji),Ui=ki());function Vi(e,t,n,r){e.addEventListener(t,n,r)}function zi(e,t,n,r){e.removeEventListener(t,n,r)}function Wi(e,t,n,r,i=null){const o=e._vei||(e._vei={}),a=o[t];if(r&&a)a.value=r;else{const[n,s]=Yi(t);if(r){const a=o[t]=Xi(r,i);Vi(e,n,a,s)}else a&&(zi(e,n,a,s),o[t]=void 0)}}const qi=/(?:Once|Passive|Capture)$/;function Yi(e){let t;if(qi.test(e)){let n;t={};while(n=e.match(qi))e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[Object(r["l"])(e.slice(2)),t]}function Xi(e,t){const n=e=>{const r=e.timeStamp||ki();(Fi||r>=n.attached-1)&&jr(Qi(e,n.value),t,5,[e])};return n.value=e,n.attached=Gi(),n}function Qi(e,t){if(Object(r["o"])(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(e=>t=>!t._stopped&&e(t))}return t}const Ki=/^on[a-z]/,Ji=(e,t,n,i,o=!1,a,s,c,u)=>{"class"===t?Mi(e,i,o):"style"===t?Oi(e,n,i):Object(r["w"])(t)?Object(r["u"])(t)||Wi(e,t,n,i,s):("."===t[0]?(t=t.slice(1),1):"^"===t[0]?(t=t.slice(1),0):Zi(e,t,i,o))?Bi(e,t,i,a,s,c,u):("true-value"===t?e._trueValue=i:"false-value"===t&&(e._falseValue=i),Ni(e,t,i,o))};function Zi(e,t,n,i){return i?"innerHTML"===t||"textContent"===t||!!(t in e&&Ki.test(t)&&Object(r["p"])(n)):"spellcheck"!==t&&"draggable"!==t&&("form"!==t&&(("list"!==t||"INPUT"!==e.tagName)&&(("type"!==t||"TEXTAREA"!==e.tagName)&&((!Ki.test(t)||!Object(r["D"])(n))&&t in e))))}"undefined"!==typeof HTMLElement&&HTMLElement;const $i="transition",eo="animation",to=(e,{slots:t})=>Ei(pt,oo(e),t);to.displayName="Transition";const no={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},ro=(to.props=Object(r["h"])({},pt.props,no),(e,t=[])=>{Object(r["o"])(e)?e.forEach(e=>e(...t)):e&&e(...t)}),io=e=>!!e&&(Object(r["o"])(e)?e.some(e=>e.length>1):e.length>1);function oo(e){const t={};for(const r in e)r in no||(t[r]=e[r]);if(!1===e.css)return t;const{name:n="v",type:i,duration:o,enterFromClass:a=n+"-enter-from",enterActiveClass:s=n+"-enter-active",enterToClass:c=n+"-enter-to",appearFromClass:u=a,appearActiveClass:l=s,appearToClass:h=c,leaveFromClass:f=n+"-leave-from",leaveActiveClass:d=n+"-leave-active",leaveToClass:p=n+"-leave-to"}=e,m=ao(o),v=m&&m[0],g=m&&m[1],{onBeforeEnter:y,onEnter:b,onEnterCancelled:w,onLeave:E,onLeaveCancelled:x,onBeforeAppear:_=y,onAppear:T=b,onAppearCancelled:A=w}=t,S=(e,t,n)=>{uo(e,t?h:c),uo(e,t?l:s),n&&n()},M=(e,t)=>{uo(e,p),uo(e,d),t&&t()},O=e=>(t,n)=>{const r=e?T:b,o=()=>S(t,e,n);ro(r,[t,o]),lo(()=>{uo(t,e?u:a),co(t,e?h:c),io(r)||fo(t,i,v,o)})};return Object(r["h"])(t,{onBeforeEnter(e){ro(y,[e]),co(e,a),co(e,s)},onBeforeAppear(e){ro(_,[e]),co(e,u),co(e,l)},onEnter:O(!1),onAppear:O(!0),onLeave(e,t){const n=()=>M(e,t);co(e,f),go(),co(e,d),lo(()=>{uo(e,f),co(e,p),io(E)||fo(e,i,g,n)}),ro(E,[e,n])},onEnterCancelled(e){S(e,!1),ro(w,[e])},onAppearCancelled(e){S(e,!0),ro(A,[e])},onLeaveCancelled(e){M(e),ro(x,[e])}})}function ao(e){if(null==e)return null;if(Object(r["v"])(e))return[so(e.enter),so(e.leave)];{const t=so(e);return[t,t]}}function so(e){const t=Object(r["N"])(e);return t}function co(e,t){t.split(/\s+/).forEach(t=>t&&e.classList.add(t)),(e._vtc||(e._vtc=new Set)).add(t)}function uo(e,t){t.split(/\s+/).forEach(t=>t&&e.classList.remove(t));const{_vtc:n}=e;n&&(n.delete(t),n.size||(e._vtc=void 0))}function lo(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let ho=0;function fo(e,t,n,r){const i=e._endId=++ho,o=()=>{i===e._endId&&r()};if(n)return setTimeout(o,n);const{type:a,timeout:s,propCount:c}=po(e,t);if(!a)return r();const u=a+"end";let l=0;const h=()=>{e.removeEventListener(u,f),o()},f=t=>{t.target===e&&++l>=c&&h()};setTimeout(()=>{l<c&&h()},s+1),e.addEventListener(u,f)}function po(e,t){const n=window.getComputedStyle(e),r=e=>(n[e]||"").split(", "),i=r($i+"Delay"),o=r($i+"Duration"),a=mo(i,o),s=r(eo+"Delay"),c=r(eo+"Duration"),u=mo(s,c);let l=null,h=0,f=0;t===$i?a>0&&(l=$i,h=a,f=o.length):t===eo?u>0&&(l=eo,h=u,f=c.length):(h=Math.max(a,u),l=h>0?a>u?$i:eo:null,f=l?l===$i?o.length:c.length:0);const d=l===$i&&/\b(transform|all)(,|$)/.test(n[$i+"Property"]);return{type:l,timeout:h,propCount:f,hasTransform:d}}function mo(e,t){while(e.length<t.length)e=e.concat(e);return Math.max(...t.map((t,n)=>vo(t)+vo(e[n])))}function vo(e){return 1e3*Number(e.slice(0,-1).replace(",","."))}function go(){return document.body.offsetHeight}new WeakMap,new WeakMap;const yo={beforeMount(e,{value:t},{transition:n}){e._vod="none"===e.style.display?"":e.style.display,n&&t?n.beforeEnter(e):bo(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:r}){!t!==!n&&(r?t?(r.beforeEnter(e),bo(e,!0),r.enter(e)):r.leave(e,()=>{bo(e,!1)}):bo(e,t))},beforeUnmount(e,{value:t}){bo(e,t)}};function bo(e,t){e.style.display=t?e._vod:"none"}const wo=Object(r["h"])({patchProp:Ji},Si);let Eo;function xo(){return Eo||(Eo=On(wo))}const _o=(...e)=>{const t=xo().createApp(...e);const{mount:n}=t;return t.mount=e=>{const i=To(e);if(!i)return;const o=t._component;Object(r["p"])(o)||o.render||o.template||(o.template=i.innerHTML),i.innerHTML="";const a=n(i,!1,i instanceof SVGElement);return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),a},t};function To(e){if(Object(r["D"])(e)){const t=document.querySelector(e);return t}return e}},"7b0b":function(e,t,n){var r=n("da84"),i=n("1d80"),o=r.Object;e.exports=function(e){return o(i(e))}},"7c73":function(e,t,n){var r,i=n("825a"),o=n("37e8"),a=n("7839"),s=n("d012"),c=n("1be4"),u=n("cc12"),l=n("f772"),h=">",f="<",d="prototype",p="script",m=l("IE_PROTO"),v=function(){},g=function(e){return f+p+h+e+f+"/"+p+h},y=function(e){e.write(g("")),e.close();var t=e.parentWindow.Object;return e=null,t},b=function(){var e,t=u("iframe"),n="java"+p+":";return t.style.display="none",c.appendChild(t),t.src=String(n),e=t.contentWindow.document,e.open(),e.write(g("document.F=Object")),e.close(),e.F},w=function(){try{r=new ActiveXObject("htmlfile")}catch(t){}w="undefined"!=typeof document?document.domain&&r?y(r):b():y(r);var e=a.length;while(e--)delete w[d][a[e]];return w()};s[m]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(v[d]=i(e),n=new v,v[d]=null,n[m]=e):n=w(),void 0===t?n:o(n,t)}},"7dd0":function(e,t,n){"use strict";var r=n("23e7"),i=n("c65b"),o=n("c430"),a=n("5e77"),s=n("1626"),c=n("9ed3"),u=n("e163"),l=n("d2bb"),h=n("d44e"),f=n("9112"),d=n("6eeb"),p=n("b622"),m=n("3f8c"),v=n("ae93"),g=a.PROPER,y=a.CONFIGURABLE,b=v.IteratorPrototype,w=v.BUGGY_SAFARI_ITERATORS,E=p("iterator"),x="keys",_="values",T="entries",A=function(){return this};e.exports=function(e,t,n,a,p,v,S){c(n,t,a);var M,O,R,C=function(e){if(e===p&&N)return N;if(!w&&e in D)return D[e];switch(e){case x:return function(){return new n(this,e)};case _:return function(){return new n(this,e)};case T:return function(){return new n(this,e)}}return function(){return new n(this)}},I=t+" Iterator",L=!1,D=e.prototype,P=D[E]||D["@@iterator"]||p&&D[p],N=!w&&P||C(p),B="Array"==t&&D.entries||P;if(B&&(M=u(B.call(new e)),M!==Object.prototype&&M.next&&(o||u(M)===b||(l?l(M,b):s(M[E])||d(M,E,A)),h(M,I,!0,!0),o&&(m[I]=A))),g&&p==_&&P&&P.name!==_&&(!o&&y?f(D,"name",_):(L=!0,N=function(){return i(P,this)})),p)if(O={values:C(_),keys:v?N:C(x),entries:C(T)},S)for(R in O)(w||L||!(R in D))&&d(D,R,O[R]);else r({target:t,proto:!0,forced:w||L},O);return o&&!S||D[E]===N||d(D,E,N,{name:p}),m[t]=N,O}},"7f9a":function(e,t,n){var r=n("da84"),i=n("1626"),o=n("8925"),a=r.WeakMap;e.exports=i(a)&&/native code/.test(o(a))},"825a":function(e,t,n){var r=n("da84"),i=n("861d"),o=r.String,a=r.TypeError;e.exports=function(e){if(i(e))return e;throw a(o(e)+" is not an object")}},"83ab":function(e,t,n){var r=n("d039");e.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},8418:function(e,t,n){"use strict";var r=n("a04b"),i=n("9bf2"),o=n("5c6c");e.exports=function(e,t,n){var a=r(t);a in e?i.f(e,a,o(0,n)):e[a]=n}},"857a":function(e,t,n){var r=n("e330"),i=n("1d80"),o=n("577e"),a=/"/g,s=r("".replace);e.exports=function(e,t,n,r){var c=o(i(e)),u="<"+t;return""!==n&&(u+=" "+n+'="'+s(o(r),a,"&quot;")+'"'),u+">"+c+"</"+t+">"}},"861d":function(e,t,n){var r=n("1626");e.exports=function(e){return"object"==typeof e?null!==e:r(e)}},8925:function(e,t,n){var r=n("e330"),i=n("1626"),o=n("c6cd"),a=r(Function.toString);i(o.inspectSource)||(o.inspectSource=function(e){return a(e)}),e.exports=o.inspectSource},"90e3":function(e,t,n){var r=n("e330"),i=0,o=Math.random(),a=r(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+a(++i+o,36)}},9112:function(e,t,n){var r=n("83ab"),i=n("9bf2"),o=n("5c6c");e.exports=r?function(e,t,n){return i.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},"94ca":function(e,t,n){var r=n("d039"),i=n("1626"),o=/#|\.prototype\./,a=function(e,t){var n=c[s(e)];return n==l||n!=u&&(i(t)?r(t):!!t)},s=a.normalize=function(e){return String(e).replace(o,".").toLowerCase()},c=a.data={},u=a.NATIVE="N",l=a.POLYFILL="P";e.exports=a},"96cf":function(e,t,n){var r=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(L){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var i=t&&t.prototype instanceof v?t:v,o=Object.create(i.prototype),a=new R(r||[]);return o._invoke=A(e,n,a),o}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(L){return{type:"throw",arg:L}}}e.wrap=u;var h="suspendedStart",f="suspendedYield",d="executing",p="completed",m={};function v(){}function g(){}function y(){}var b={};c(b,o,(function(){return this}));var w=Object.getPrototypeOf,E=w&&w(w(C([])));E&&E!==n&&r.call(E,o)&&(b=E);var x=y.prototype=v.prototype=Object.create(b);function _(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function n(i,o,a,s){var c=l(e[i],e,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"===typeof h&&r.call(h,"__await")?t.resolve(h.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(h).then((function(e){u.value=e,a(u)}),(function(e){return n("throw",e,a,s)}))}s(c.arg)}var i;function o(e,r){function o(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(o,o):o()}this._invoke=o}function A(e,t,n){var r=h;return function(i,o){if(r===d)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw o;return I()}n.method=i,n.arg=o;while(1){var a=n.delegate;if(a){var s=S(a,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===h)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var c=l(e,t,n);if("normal"===c.type){if(r=n.done?p:f,c.arg===m)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=p,n.method="throw",n.arg=c.arg)}}}function S(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator["return"]&&(n.method="return",n.arg=t,S(e,n),"throw"===n.method))return m;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var i=l(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,m;var o=i.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,m):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function M(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function R(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(M,this),this.reset(!0)}function C(e){if(e){var n=e[o];if(n)return n.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var i=-1,a=function n(){while(++i<e.length)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}return{next:I}}function I(){return{value:t,done:!0}}return g.prototype=y,c(x,"constructor",y),c(y,"constructor",g),g.displayName=c(y,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,c(e,s,"GeneratorFunction")),e.prototype=Object.create(x),e},e.awrap=function(e){return{__await:e}},_(T.prototype),c(T.prototype,a,(function(){return this})),e.AsyncIterator=T,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new T(u(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},_(x),c(x,s,"Generator"),c(x,o,(function(){return this})),c(x,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){while(t.length){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=C,R.prototype={constructor:R,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;O(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:C(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),m}},e}(e.exports);try{regeneratorRuntime=r}catch(i){"object"===typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}},9911:function(e,t,n){"use strict";var r=n("23e7"),i=n("857a"),o=n("af03");r({target:"String",proto:!0,forced:o("link")},{link:function(e){return i(this,"a","href",e)}})},"9a1f":function(e,t,n){var r=n("da84"),i=n("c65b"),o=n("59ed"),a=n("825a"),s=n("0d51"),c=n("35a1"),u=r.TypeError;e.exports=function(e,t){var n=arguments.length<2?c(e):t;if(o(n))return a(i(n,e));throw u(s(e)+" is not iterable")}},"9bf2":function(e,t,n){var r=n("da84"),i=n("83ab"),o=n("0cfb"),a=n("825a"),s=n("a04b"),c=r.TypeError,u=Object.defineProperty;t.f=i?u:function(e,t,n){if(a(e),t=s(t),a(n),o)try{return u(e,t,n)}catch(r){}if("get"in n||"set"in n)throw c("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},"9ed3":function(e,t,n){"use strict";var r=n("ae93").IteratorPrototype,i=n("7c73"),o=n("5c6c"),a=n("d44e"),s=n("3f8c"),c=function(){return this};e.exports=function(e,t,n,u){var l=t+" Iterator";return e.prototype=i(r,{next:o(+!u,n)}),a(e,l,!1,!0),s[l]=c,e}},"9ff4":function(e,t,n){"use strict";(function(e){function r(e,t){const n=Object.create(null),r=e.split(",");for(let i=0;i<r.length;i++)n[r[i]]=!0;return t?e=>!!n[e.toLowerCase()]:e=>!!n[e]}n.d(t,"a",(function(){return T})),n.d(t,"b",(function(){return _})),n.d(t,"c",(function(){return S})),n.d(t,"d",(function(){return A})),n.d(t,"e",(function(){return J})),n.d(t,"f",(function(){return ee})),n.d(t,"g",(function(){return ie})),n.d(t,"h",(function(){return C})),n.d(t,"i",(function(){return se})),n.d(t,"j",(function(){return ne})),n.d(t,"k",(function(){return D})),n.d(t,"l",(function(){return $})),n.d(t,"m",(function(){return c})),n.d(t,"n",(function(){return re})),n.d(t,"o",(function(){return P})),n.d(t,"p",(function(){return F})),n.d(t,"q",(function(){return o})),n.d(t,"r",(function(){return v})),n.d(t,"s",(function(){return Y})),n.d(t,"t",(function(){return N})),n.d(t,"u",(function(){return R})),n.d(t,"v",(function(){return j})),n.d(t,"w",(function(){return O})),n.d(t,"x",(function(){return q})),n.d(t,"y",(function(){return G})),n.d(t,"z",(function(){return X})),n.d(t,"A",(function(){return g})),n.d(t,"B",(function(){return B})),n.d(t,"C",(function(){return s})),n.d(t,"D",(function(){return U})),n.d(t,"E",(function(){return H})),n.d(t,"F",(function(){return b})),n.d(t,"G",(function(){return w})),n.d(t,"H",(function(){return r})),n.d(t,"I",(function(){return d})),n.d(t,"J",(function(){return u})),n.d(t,"K",(function(){return I})),n.d(t,"L",(function(){return E})),n.d(t,"M",(function(){return te})),n.d(t,"N",(function(){return oe})),n.d(t,"O",(function(){return W}));const i="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt",o=r(i);const a="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",s=r(a);function c(e){return!!e||""===e}function u(e){if(P(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],i=U(r)?f(r):u(r);if(i)for(const e in i)t[e]=i[e]}return t}return U(e)||j(e)?e:void 0}const l=/;(?![^(]*\))/g,h=/:(.+)/;function f(e){const t={};return e.split(l).forEach(e=>{if(e){const n=e.split(h);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function d(e){let t="";if(U(e))t=e;else if(P(e))for(let n=0;n<e.length;n++){const r=d(e[n]);r&&(t+=r+" ")}else if(j(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const p="html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,summary,template,blockquote,iframe,tfoot",m="svg,animate,animateMotion,animateTransform,circle,clipPath,color-profile,defs,desc,discard,ellipse,feBlend,feColorMatrix,feComponentTransfer,feComposite,feConvolveMatrix,feDiffuseLighting,feDisplacementMap,feDistanceLight,feDropShadow,feFlood,feFuncA,feFuncB,feFuncG,feFuncR,feGaussianBlur,feImage,feMerge,feMergeNode,feMorphology,feOffset,fePointLight,feSpecularLighting,feSpotLight,feTile,feTurbulence,filter,foreignObject,g,hatch,hatchpath,image,line,linearGradient,marker,mask,mesh,meshgradient,meshpatch,meshrow,metadata,mpath,path,pattern,polygon,polyline,radialGradient,rect,set,solidcolor,stop,switch,symbol,text,textPath,title,tspan,unknown,use,view",v=r(p),g=r(m);function y(e,t){if(e.length!==t.length)return!1;let n=!0;for(let r=0;n&&r<e.length;r++)n=b(e[r],t[r]);return n}function b(e,t){if(e===t)return!0;let n=k(e),r=k(t);if(n||r)return!(!n||!r)&&e.getTime()===t.getTime();if(n=P(e),r=P(t),n||r)return!(!n||!r)&&y(e,t);if(n=j(e),r=j(t),n||r){if(!n||!r)return!1;const i=Object.keys(e).length,o=Object.keys(t).length;if(i!==o)return!1;for(const n in e){const r=e.hasOwnProperty(n),i=t.hasOwnProperty(n);if(r&&!i||!r&&i||!b(e[n],t[n]))return!1}}return String(e)===String(t)}function w(e,t){return e.findIndex(e=>b(e,t))}const E=e=>null==e?"":P(e)||j(e)&&(e.toString===V||!F(e.toString))?JSON.stringify(e,x,2):String(e),x=(e,t)=>t&&t.__v_isRef?x(e,t.value):N(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((e,[t,n])=>(e[t+" =>"]=n,e),{})}:B(t)?{[`Set(${t.size})`]:[...t.values()]}:!j(t)||P(t)||q(t)?t:String(t),_={},T=[],A=()=>{},S=()=>!1,M=/^on[^a-z]/,O=e=>M.test(e),R=e=>e.startsWith("onUpdate:"),C=Object.assign,I=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},L=Object.prototype.hasOwnProperty,D=(e,t)=>L.call(e,t),P=Array.isArray,N=e=>"[object Map]"===z(e),B=e=>"[object Set]"===z(e),k=e=>e instanceof Date,F=e=>"function"===typeof e,U=e=>"string"===typeof e,H=e=>"symbol"===typeof e,j=e=>null!==e&&"object"===typeof e,G=e=>j(e)&&F(e.then)&&F(e.catch),V=Object.prototype.toString,z=e=>V.call(e),W=e=>z(e).slice(8,-1),q=e=>"[object Object]"===z(e),Y=e=>U(e)&&"NaN"!==e&&"-"!==e[0]&&""+parseInt(e,10)===e,X=r(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Q=e=>{const t=Object.create(null);return n=>{const r=t[n];return r||(t[n]=e(n))}},K=/-(\w)/g,J=Q(e=>e.replace(K,(e,t)=>t?t.toUpperCase():"")),Z=/\B([A-Z])/g,$=Q(e=>e.replace(Z,"-$1").toLowerCase()),ee=Q(e=>e.charAt(0).toUpperCase()+e.slice(1)),te=Q(e=>e?"on"+ee(e):""),ne=(e,t)=>!Object.is(e,t),re=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},ie=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},oe=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let ae;const se=()=>ae||(ae="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof e?e:{})}).call(this,n("c8ba"))},a04b:function(e,t,n){var r=n("c04e"),i=n("d9b5");e.exports=function(e){var t=r(e,"string");return i(t)?t:t+""}},a2cd:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return s}));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)};function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function o(e,t,n,r){function i(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function a(e){try{c(r.next(e))}catch(t){o(t)}}function s(e){try{c(r["throw"](e))}catch(t){o(t)}}function c(e){e.done?n(e.value):i(e.value).then(a,s)}c((r=r.apply(e,t||[])).next())}))}function a(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(e){return function(t){return c([e,t])}}function c(o){if(n)throw new TypeError("Generator is already executing.");while(a)try{if(n=1,r&&(i=2&o[0]?r["return"]:o[0]?r["throw"]||((i=r["return"])&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!(i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}}Object.create;function s(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}Object.create},a434:function(e,t,n){"use strict";var r=n("23e7"),i=n("da84"),o=n("23cb"),a=n("5926"),s=n("07fa"),c=n("7b0b"),u=n("65f0"),l=n("8418"),h=n("1dde"),f=h("splice"),d=i.TypeError,p=Math.max,m=Math.min,v=9007199254740991,g="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!f},{splice:function(e,t){var n,r,i,h,f,y,b=c(this),w=s(b),E=o(e,w),x=arguments.length;if(0===x?n=r=0:1===x?(n=0,r=w-E):(n=x-2,r=m(p(a(t),0),w-E)),w+n-r>v)throw d(g);for(i=u(b,r),h=0;h<r;h++)f=E+h,f in b&&l(i,h,b[f]);if(i.length=r,n<r){for(h=E;h<w-r;h++)f=h+r,y=h+n,f in b?b[y]=b[f]:delete b[y];for(h=w;h>w-r+n;h--)delete b[h-1]}else if(n>r)for(h=w-r;h>E;h--)f=h+r-1,y=h+n-1,f in b?b[y]=b[f]:delete b[y];for(h=0;h<n;h++)b[h+E]=arguments[h+2];return b.length=w-r+n,i}})},a4b4:function(e,t,n){var r=n("342f");e.exports=/web0s(?!.*chrome)/i.test(r)},a640:function(e,t,n){"use strict";var r=n("d039");e.exports=function(e,t){var n=[][e];return!!n&&r((function(){n.call(null,t||function(){throw 1},1)}))}},a6a6:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return qs})),n.d(t,"b",(function(){return ks})),n.d(t,"c",(function(){return T})),n.d(t,"d",(function(){return ru})),n.d(t,"e",(function(){return Fs})),n.d(t,"f",(function(){return tu})),n.d(t,"g",(function(){return ou})),n.d(t,"h",(function(){return hu})),n.d(t,"i",(function(){return fu})),n.d(t,"j",(function(){return $c})),n.d(t,"k",(function(){return iu})),n.d(t,"l",(function(){return mu})),n.d(t,"m",(function(){return bu})),n.d(t,"n",(function(){return eu})),n.d(t,"o",(function(){return yu})),n.d(t,"p",(function(){return vu})),n.d(t,"q",(function(){return du})),n.d(t,"r",(function(){return su}));var r=n("a2cd"),i=n("a8e9"),o=n("abfd"),a=n("c7b2"),s=function(){function e(e,t){var n=this;this.previousValue=e,t&&(t.sequenceNumberHandler=function(e){return n.t(e)},this.i=function(e){return t.writeSequenceNumber(e)})}return e.prototype.t=function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue},e.prototype.next=function(){var e=++this.previousValue;return this.i&&this.i(e),e},e}();s.o=-1;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var c={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},u=function(e){function t(t,n){var r=this;return(r=e.call(this,n)||this).code=t,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Object(r["b"])(t,e),t}(Error),l=new o["b"]("@firebase/firestore");function h(){return l.logLevel}function f(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(l.logLevel<=o["a"].DEBUG){var i=t.map(m);l.debug.apply(l,Object(r["d"])(["Firestore (8.10.0): "+e],i))}}function d(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(l.logLevel<=o["a"].ERROR){var i=t.map(m);l.error.apply(l,Object(r["d"])(["Firestore (8.10.0): "+e],i))}}function p(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(l.logLevel<=o["a"].WARN){var i=t.map(m);l.warn.apply(l,Object(r["d"])(["Firestore (8.10.0): "+e],i))}}function m(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v(e){void 0===e&&(e="Unexpected state");var t="FIRESTORE (8.10.0) INTERNAL ASSERTION FAILED: "+e;throw d(t),new Error(t)}function g(e,t){e||v()}function y(e,t){return e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var w=function(){function e(){}return e.u=function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=b(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n},e}();function E(e,t){return e<t?-1:e>t?1:0}function x(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function _(e){return e+"\0"}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var T=function(){function e(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new u(c.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new u(c.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new u(c.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new u(c.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}return e.now=function(){return e.fromMillis(Date.now())},e.fromDate=function(t){return e.fromMillis(t.getTime())},e.fromMillis=function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))},e.prototype.toDate=function(){return new Date(this.toMillis())},e.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},e.prototype._compareTo=function(e){return this.seconds===e.seconds?E(this.nanoseconds,e.nanoseconds):E(this.seconds,e.seconds)},e.prototype.isEqual=function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds},e.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},e.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},e.prototype.valueOf=function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},e}(),A=function(){function e(e){this.timestamp=e}return e.fromTimestamp=function(t){return new e(t)},e.min=function(){return new e(new T(0,0))},e.prototype.compareTo=function(e){return this.timestamp._compareTo(e.timestamp)},e.prototype.isEqual=function(e){return this.timestamp.isEqual(e.timestamp)},e.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},e.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},e.prototype.toTimestamp=function(){return this.timestamp},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function M(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function O(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var R=function(){function e(e,t,n){void 0===t?t=0:t>e.length&&v(),void 0===n?n=e.length-t:n>e.length-t&&v(),this.segments=e,this.offset=t,this.len=n}return Object.defineProperty(e.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return 0===e.comparator(this,t)},e.prototype.child=function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)},e.prototype.limit=function(){return this.offset+this.length},e.prototype.popFirst=function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)},e.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},e.prototype.firstSegment=function(){return this.segments[this.offset]},e.prototype.lastSegment=function(){return this.get(this.length-1)},e.prototype.get=function(e){return this.segments[this.offset+e]},e.prototype.isEmpty=function(){return 0===this.length},e.prototype.isPrefixOf=function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},e.prototype.isImmediateParentOf=function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},e.prototype.forEach=function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])},e.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},e.comparator=function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),o=t.get(r);if(i<o)return-1;if(i>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0},e}(),C=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r["b"])(t,e),t.prototype.construct=function(e,n,r){return new t(e,n,r)},t.prototype.canonicalString=function(){return this.toArray().join("/")},t.prototype.toString=function(){return this.canonicalString()},t.fromString=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];for(var r=[],i=0,o=e;i<o.length;i++){var a=o[i];if(a.indexOf("//")>=0)throw new u(c.INVALID_ARGUMENT,"Invalid segment ("+a+"). Paths must not contain // in them.");r.push.apply(r,a.split("/").filter((function(e){return e.length>0})))}return new t(r)},t.emptyPath=function(){return new t([])},t}(R),I=/^[_a-zA-Z][_a-zA-Z0-9]*$/,L=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r["b"])(t,e),t.prototype.construct=function(e,n,r){return new t(e,n,r)},t.isValidIdentifier=function(e){return I.test(e)},t.prototype.canonicalString=function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")},t.prototype.toString=function(){return this.canonicalString()},t.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},t.keyField=function(){return new t(["__name__"])},t.fromServerFormat=function(e){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new u(c.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},a=!1;i<e.length;){var s=e[i];if("\\"===s){if(i+1===e.length)throw new u(c.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var l=e[i+1];if("\\"!==l&&"."!==l&&"`"!==l)throw new u(c.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else"`"===s?(a=!a,i++):"."!==s||a?(r+=s,i++):(o(),i++)}if(o(),a)throw new u(c.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)},t.emptyPath=function(){return new t([])},t}(R),D=function(){function e(e){this.fields=e,e.sort(L.comparator)}return e.prototype.covers=function(e){for(var t=0,n=this.fields;t<n.length;t++)if(n[t].isPrefixOf(e))return!0;return!1},e.prototype.isEqual=function(e){return x(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))},e}(),P=function(){function e(e){this.binaryString=e}return e.fromBase64String=function(t){return new e(atob(t))},e.fromUint8Array=function(t){return new e(function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(t))},e.prototype.toBase64=function(){return e=this.binaryString,btoa(e);var e},e.prototype.toUint8Array=function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)},e.prototype.approximateByteSize=function(){return 2*this.binaryString.length},e.prototype.compareTo=function(e){return E(this.binaryString,e.binaryString)},e.prototype.isEqual=function(e){return this.binaryString===e.binaryString},e}();P.EMPTY_BYTE_STRING=new P("");var N=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function B(e){if(g(!!e),"string"==typeof e){var t=0,n=N.exec(e);if(g(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:k(e.seconds),nanos:k(e.nanos)}}function k(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function F(e){return"string"==typeof e?P.fromBase64String(e):P.fromUint8Array(e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function H(e){var t=e.mapValue.fields.__previous_value__;return U(t)?H(t):t}function j(e){var t=B(e.mapValue.fields.__local_write_time__.timestampValue);return new T(t.seconds,t.nanos)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G(e){return null==e}function V(e){return 0===e&&1/e==-1/0}function z(e){return"number"==typeof e&&Number.isInteger(e)&&!V(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var W=function(){function e(e){this.path=e}return e.fromPath=function(t){return new e(C.fromString(t))},e.fromName=function(t){return new e(C.fromString(t).popFirst(5))},e.prototype.hasCollectionId=function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e},e.prototype.isEqual=function(e){return null!==e&&0===C.comparator(this.path,e.path)},e.prototype.toString=function(){return this.path.toString()},e.comparator=function(e,t){return C.comparator(e.path,t.path)},e.isDocumentKey=function(e){return e.length%2==0},e.fromSegments=function(t){return new e(new C(t.slice()))},e}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?U(e)?4:10:v()}function Y(e,t){var n=q(e);if(n!==q(t))return!1;switch(n){case 0:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return j(e).isEqual(j(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=B(e.timestampValue),r=B(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return F(e.bytesValue).isEqual(F(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return k(e.geoPointValue.latitude)===k(t.geoPointValue.latitude)&&k(e.geoPointValue.longitude)===k(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return k(e.integerValue)===k(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=k(e.doubleValue),r=k(t.doubleValue);return n===r?V(n)===V(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return x(e.arrayValue.values||[],t.arrayValue.values||[],Y);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(S(n)!==S(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Y(n[i],r[i])))return!1;return!0}(e,t);default:return v()}}function X(e,t){return void 0!==(e.values||[]).find((function(e){return Y(e,t)}))}function Q(e,t){var n=q(e),r=q(t);if(n!==r)return E(n,r);switch(n){case 0:return 0;case 1:return E(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=k(e.integerValue||e.doubleValue),r=k(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return K(e.timestampValue,t.timestampValue);case 4:return K(j(e),j(t));case 5:return E(e.stringValue,t.stringValue);case 6:return function(e,t){var n=F(e),r=F(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var o=E(n[i],r[i]);if(0!==o)return o}return E(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=E(k(e.latitude),k(t.latitude));return 0!==n?n:E(k(e.longitude),k(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var o=Q(n[i],r[i]);if(o)return o}return E(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n=e.fields||{},r=Object.keys(n),i=t.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var a=0;a<r.length&&a<o.length;++a){var s=E(r[a],o[a]);if(0!==s)return s;var c=Q(n[r[a]],i[o[a]]);if(0!==c)return c}return E(r.length,o.length)}(e.mapValue,t.mapValue);default:throw v()}}function K(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return E(e,t);var n=B(e),r=B(t),i=E(n.seconds,r.seconds);return 0!==i?i:E(n.nanos,r.nanos)}function J(e){return Z(e)}function Z(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=B(e);return"time("+t.seconds+","+t.nanos+")"}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?F(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,W.fromName(n).toString()):"geoPointValue"in e?"geo("+(t=e.geoPointValue).latitude+","+t.longitude+")":"arrayValue"in e?function(e){for(var t="[",n=!0,r=0,i=e.values||[];r<i.length;r++)n?n=!1:t+=",",t+=Z(i[r]);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){for(var t="{",n=!0,r=0,i=Object.keys(e.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:t+=",",t+=o+":"+Z(e.fields[o])}return t+"}"}(e.mapValue):v();var t,n}function $(e,t){return{referenceValue:"projects/"+e.projectId+"/databases/"+e.database+"/documents/"+t.path.canonicalString()}}function ee(e){return!!e&&"integerValue"in e}function te(e){return!!e&&"arrayValue"in e}function ne(e){return!!e&&"nullValue"in e}function re(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function ie(e){return!!e&&"mapValue"in e}function oe(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return M(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=oe(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=oe(e.arrayValue.values[r]);return n}return Object.assign({},e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ae=function(){function e(e){this.value=e}return e.empty=function(){return new e({mapValue:{}})},e.prototype.field=function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!ie(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null},e.prototype.set=function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=oe(t)},e.prototype.setAll=function(e){var t=this,n=L.emptyPath(),r={},i=[];e.forEach((function(e,o){if(!n.isImmediateParentOf(o)){var a=t.getFieldsMap(n);t.applyChanges(a,r,i),r={},i=[],n=o.popLast()}e?r[o.lastSegment()]=oe(e):i.push(o.lastSegment())}));var o=this.getFieldsMap(n);this.applyChanges(o,r,i)},e.prototype.delete=function(e){var t=this.field(e.popLast());ie(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]},e.prototype.isEqual=function(e){return Y(this.value,e.value)},e.prototype.getFieldsMap=function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];ie(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields},e.prototype.applyChanges=function(e,t,n){M(t,(function(t,n){return e[t]=n}));for(var r=0,i=n;r<i.length;r++){var o=i[r];delete e[o]}},e.prototype.clone=function(){return new e(oe(this.value))},e}();function se(e){var t=[];return M(e.fields,(function(e,n){var r=new L([e]);if(ie(n)){var i=se(n.mapValue).fields;if(0===i.length)t.push(r);else for(var o=0,a=i;o<a.length;o++){var s=a[o];t.push(r.child(s))}}else t.push(r)})),new D(t)
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var ce=function(){function e(e,t,n,r,i){this.key=e,this.documentType=t,this.version=n,this.data=r,this.documentState=i}return e.newInvalidDocument=function(t){return new e(t,0,A.min(),ae.empty(),0)},e.newFoundDocument=function(t,n,r){return new e(t,1,n,r,0)},e.newNoDocument=function(t,n){return new e(t,2,n,ae.empty(),0)},e.newUnknownDocument=function(t,n){return new e(t,3,n,ae.empty(),2)},e.prototype.convertToFoundDocument=function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this},e.prototype.convertToNoDocument=function(e){return this.version=e,this.documentType=2,this.data=ae.empty(),this.documentState=0,this},e.prototype.convertToUnknownDocument=function(e){return this.version=e,this.documentType=3,this.data=ae.empty(),this.documentState=2,this},e.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},e.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(e.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isValidDocument=function(){return 0!==this.documentType},e.prototype.isFoundDocument=function(){return 1===this.documentType},e.prototype.isNoDocument=function(){return 2===this.documentType},e.prototype.isUnknownDocument=function(){return 3===this.documentType},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)},e.prototype.clone=function(){return new e(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},e}(),ue=function(e,t,n,r,i,o,a){void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.h=null};
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function le(e,t,n,r,i,o,a){return void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),new ue(e,t,n,r,i,o,a)}function he(e){var t=y(e);if(null===t.h){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return function(e){return e.field.canonicalString()+e.op.toString()+J(e.value)}(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),G(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=Te(t.startAt)),t.endAt&&(n+="|ub:",n+=Te(t.endAt)),t.h=n}return t.h}function fe(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!Se(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],o=t.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!Y(i.value,o.value))return!1;var i,o;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Oe(e.startAt,t.startAt)&&Oe(e.endAt,t.endAt)}function de(e){return W.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}var pe=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).field=t,i.op=n,i.value=r,i}return Object(r["b"])(t,e),t.create=function(e,n,r){return e.isKeyField()?"in"===n||"not-in"===n?this.l(e,n,r):new me(e,n,r):"array-contains"===n?new be(e,r):"in"===n?new we(e,r):"not-in"===n?new Ee(e,r):"array-contains-any"===n?new xe(e,r):new t(e,n,r)},t.l=function(e,t,n){return"in"===t?new ve(e,n):new ge(e,n)},t.prototype.matches=function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.m(Q(t,this.value)):null!==t&&q(this.value)===q(t)&&this.m(Q(t,this.value))},t.prototype.m=function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return v()}},t.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},t}((function(){})),me=function(e){function t(t,n,r){var i=this;return(i=e.call(this,t,n,r)||this).key=W.fromName(r.referenceValue),i}return Object(r["b"])(t,e),t.prototype.matches=function(e){var t=W.comparator(e.key,this.key);return this.m(t)},t}(pe),ve=function(e){function t(t,n){var r=this;return(r=e.call(this,t,"in",n)||this).keys=ye("in",n),r}return Object(r["b"])(t,e),t.prototype.matches=function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))},t}(pe),ge=function(e){function t(t,n){var r=this;return(r=e.call(this,t,"not-in",n)||this).keys=ye("not-in",n),r}return Object(r["b"])(t,e),t.prototype.matches=function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))},t}(pe);function ye(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return W.fromName(e.referenceValue)}))}var be=function(e){function t(t,n){return e.call(this,t,"array-contains",n)||this}return Object(r["b"])(t,e),t.prototype.matches=function(e){var t=e.data.field(this.field);return te(t)&&X(t.arrayValue,this.value)},t}(pe),we=function(e){function t(t,n){return e.call(this,t,"in",n)||this}return Object(r["b"])(t,e),t.prototype.matches=function(e){var t=e.data.field(this.field);return null!==t&&X(this.value.arrayValue,t)},t}(pe),Ee=function(e){function t(t,n){return e.call(this,t,"not-in",n)||this}return Object(r["b"])(t,e),t.prototype.matches=function(e){if(X(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!X(this.value.arrayValue,t)},t}(pe),xe=function(e){function t(t,n){return e.call(this,t,"array-contains-any",n)||this}return Object(r["b"])(t,e),t.prototype.matches=function(e){var t=this,n=e.data.field(this.field);return!(!te(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return X(t.value.arrayValue,e)}))},t}(pe),_e=function(e,t){this.position=e,this.before=t};function Te(e){return(e.before?"b":"a")+":"+e.position.map((function(e){return J(e)})).join(",")}var Ae=function(e,t){void 0===t&&(t="asc"),this.field=e,this.dir=t};function Se(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function Me(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var o=t[i],a=e.position[i];if(r=o.field.isKeyField()?W.comparator(W.fromName(a.referenceValue),n.key):Q(a,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return e.before?r<=0:r<0}function Oe(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.before!==t.before||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!Y(e.position[n],t.position[n]))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Re=function(e,t,n,r,i,o,a,s){void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===a&&(a=null),void 0===s&&(s=null),this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=s,this.p=null,this.T=null,this.startAt,this.endAt};function Ce(e,t,n,r,i,o,a,s){return new Re(e,t,n,r,i,o,a,s)}function Ie(e){return new Re(e)}function Le(e){return!G(e.limit)&&"F"===e.limitType}function De(e){return!G(e.limit)&&"L"===e.limitType}function Pe(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Ne(e){for(var t=0,n=e.filters;t<n.length;t++){var r=n[t];if(r.g())return r.field}return null}function Be(e){return null!==e.collectionGroup}function ke(e){var t=y(e);if(null===t.p){t.p=[];var n=Ne(t),r=Pe(t);if(null!==n&&null===r)n.isKeyField()||t.p.push(new Ae(n)),t.p.push(new Ae(L.keyField(),"asc"));else{for(var i=!1,o=0,a=t.explicitOrderBy;o<a.length;o++){var s=a[o];t.p.push(s),s.field.isKeyField()&&(i=!0)}if(!i){var c=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.p.push(new Ae(L.keyField(),c))}}}return t.p}function Fe(e){var t=y(e);if(!t.T)if("F"===t.limitType)t.T=le(t.path,t.collectionGroup,ke(t),t.filters,t.limit,t.startAt,t.endAt);else{for(var n=[],r=0,i=ke(t);r<i.length;r++){var o=i[r],a="desc"===o.dir?"asc":"desc";n.push(new Ae(o.field,a))}var s=t.endAt?new _e(t.endAt.position,!t.endAt.before):null,c=t.startAt?new _e(t.startAt.position,!t.startAt.before):null;t.T=le(t.path,t.collectionGroup,n,t.filters,t.limit,s,c)}return t.T}function Ue(e,t,n){return new Re(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function He(e,t){return fe(Fe(e),Fe(t))&&e.limitType===t.limitType}function je(e){return he(Fe(e))+"|lt:"+e.limitType}function Ge(e){return"Query(target="+function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: ["+e.filters.map((function(e){return(t=e).field.canonicalString()+" "+t.op+" "+J(t.value);var t})).join(", ")+"]"),G(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: ["+e.orderBy.map((function(e){return function(e){return e.field.canonicalString()+" ("+e.dir+")"}(e)})).join(", ")+"]"),e.startAt&&(t+=", startAt: "+Te(e.startAt)),e.endAt&&(t+=", endAt: "+Te(e.endAt)),"Target("+t+")"}(Fe(e))+"; limitType="+e.limitType+")"}function Ve(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):W.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(var n=0,r=e.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}return!0}(e,t)&&function(e,t){for(var n=0,r=e.filters;n<r.length;n++)if(!r[n].matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!Me(e.startAt,ke(e),t))&&(!e.endAt||!Me(e.endAt,ke(e),t))}(e,t)}function ze(e){return function(t,n){for(var r=!1,i=0,o=ke(e);i<o.length;i++){var a=o[i],s=We(a,t,n);if(0!==s)return s;r=r||a.field.isKeyField()}return 0}}function We(e,t,n){var r=e.field.isKeyField()?W.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Q(r,i):v()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return v()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qe(e,t){if(e.I){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:V(t)?"-0":t}}function Ye(e){return{integerValue:""+e}}function Xe(e,t){return z(t)?Ye(t):qe(e,t)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qe=function(){this._=void 0};function Ke(e,t,n){return e instanceof $e?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof et?tt(e,t):e instanceof nt?rt(e,t):function(e,t){var n=Ze(e,t),r=ot(n)+ot(e.A);return ee(n)&&ee(e.A)?Ye(r):qe(e.R,r)}(e,t)}function Je(e,t,n){return e instanceof et?tt(e,t):e instanceof nt?rt(e,t):n}function Ze(e,t){return e instanceof it?ee(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var $e=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r["b"])(t,e),t}(Qe),et=function(e){function t(t){var n=this;return(n=e.call(this)||this).elements=t,n}return Object(r["b"])(t,e),t}(Qe);function tt(e,t){for(var n=at(t),r=function(e){n.some((function(t){return Y(t,e)}))||n.push(e)},i=0,o=e.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var nt=function(e){function t(t){var n=this;return(n=e.call(this)||this).elements=t,n}return Object(r["b"])(t,e),t}(Qe);function rt(e,t){for(var n=at(t),r=function(e){n=n.filter((function(t){return!Y(t,e)}))},i=0,o=e.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var it=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).R=t,r.A=n,r}return Object(r["b"])(t,e),t}(Qe);function ot(e){return k(e.integerValue||e.doubleValue)}function at(e){return te(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var st=function(e,t){this.field=e,this.transform=t},ct=function(e,t){this.version=e,this.transformResults=t},ut=function(){function e(e,t){this.updateTime=e,this.exists=t}return e.none=function(){return new e},e.exists=function(t){return new e(void 0,t)},e.updateTime=function(t){return new e(t)},Object.defineProperty(e.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)},e}();function lt(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var ht=function(){};function ft(e,t,n){e instanceof gt?function(e,t,n){var r=e.value.clone(),i=wt(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof yt?function(e,t,n){if(lt(e.precondition,t)){var r=wt(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(bt(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function dt(e,t,n){e instanceof gt?function(e,t,n){if(lt(e.precondition,t)){var r=e.value.clone(),i=Et(e.fieldTransforms,n,t);r.setAll(i),t.convertToFoundDocument(vt(t),r).setHasLocalMutations()}}(e,t,n):e instanceof yt?function(e,t,n){if(lt(e.precondition,t)){var r=Et(e.fieldTransforms,n,t),i=t.data;i.setAll(bt(e)),i.setAll(r),t.convertToFoundDocument(vt(t),i).setHasLocalMutations()}}(e,t,n):function(e,t){lt(e.precondition,t)&&t.convertToNoDocument(A.min())}(e,t)}function pt(e,t){for(var n=null,r=0,i=e.fieldTransforms;r<i.length;r++){var o=i[r],a=t.data.field(o.field),s=Ze(o.transform,a||null);null!=s&&(null==n&&(n=ae.empty()),n.set(o.field,s))}return n||null}function mt(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&x(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof et&&t instanceof et||e instanceof nt&&t instanceof nt?x(e.elements,t.elements,Y):e instanceof it&&t instanceof it?Y(e.A,t.A):e instanceof $e&&t instanceof $e}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function vt(e){return e.isFoundDocument()?e.version:A.min()}var gt=function(e){function t(t,n,r,i){void 0===i&&(i=[]);var o=this;return(o=e.call(this)||this).key=t,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return Object(r["b"])(t,e),t}(ht),yt=function(e){function t(t,n,r,i,o){void 0===o&&(o=[]);var a=this;return(a=e.call(this)||this).key=t,a.data=n,a.fieldMask=r,a.precondition=i,a.fieldTransforms=o,a.type=1,a}return Object(r["b"])(t,e),t}(ht);function bt(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function wt(e,t,n){var r=new Map;g(e.length===n.length);for(var i=0;i<n.length;i++){var o=e[i],a=o.transform,s=t.data.field(o.field);r.set(o.field,Je(a,s,n[i]))}return r}function Et(e,t,n){for(var r=new Map,i=0,o=e;i<o.length;i++){var a=o[i],s=a.transform,c=n.data.field(a.field);r.set(a.field,Ke(s,c,t))}return r}var xt,_t,Tt=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).key=t,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return Object(r["b"])(t,e),t}(ht),At=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).key=t,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return Object(r["b"])(t,e),t}(ht),St=function(e){this.count=e};function Mt(e){switch(e){case c.OK:return v();case c.CANCELLED:case c.UNKNOWN:case c.DEADLINE_EXCEEDED:case c.RESOURCE_EXHAUSTED:case c.INTERNAL:case c.UNAVAILABLE:case c.UNAUTHENTICATED:return!1;case c.INVALID_ARGUMENT:case c.NOT_FOUND:case c.ALREADY_EXISTS:case c.PERMISSION_DENIED:case c.FAILED_PRECONDITION:case c.ABORTED:case c.OUT_OF_RANGE:case c.UNIMPLEMENTED:case c.DATA_LOSS:return!0;default:return v()}}function Ot(e){if(void 0===e)return d("GRPC error has no .code"),c.UNKNOWN;switch(e){case xt.OK:return c.OK;case xt.CANCELLED:return c.CANCELLED;case xt.UNKNOWN:return c.UNKNOWN;case xt.DEADLINE_EXCEEDED:return c.DEADLINE_EXCEEDED;case xt.RESOURCE_EXHAUSTED:return c.RESOURCE_EXHAUSTED;case xt.INTERNAL:return c.INTERNAL;case xt.UNAVAILABLE:return c.UNAVAILABLE;case xt.UNAUTHENTICATED:return c.UNAUTHENTICATED;case xt.INVALID_ARGUMENT:return c.INVALID_ARGUMENT;case xt.NOT_FOUND:return c.NOT_FOUND;case xt.ALREADY_EXISTS:return c.ALREADY_EXISTS;case xt.PERMISSION_DENIED:return c.PERMISSION_DENIED;case xt.FAILED_PRECONDITION:return c.FAILED_PRECONDITION;case xt.ABORTED:return c.ABORTED;case xt.OUT_OF_RANGE:return c.OUT_OF_RANGE;case xt.UNIMPLEMENTED:return c.UNIMPLEMENTED;case xt.DATA_LOSS:return c.DATA_LOSS;default:return v()}}(_t=xt||(xt={}))[_t.OK=0]="OK",_t[_t.CANCELLED=1]="CANCELLED",_t[_t.UNKNOWN=2]="UNKNOWN",_t[_t.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",_t[_t.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",_t[_t.NOT_FOUND=5]="NOT_FOUND",_t[_t.ALREADY_EXISTS=6]="ALREADY_EXISTS",_t[_t.PERMISSION_DENIED=7]="PERMISSION_DENIED",_t[_t.UNAUTHENTICATED=16]="UNAUTHENTICATED",_t[_t.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",_t[_t.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",_t[_t.ABORTED=10]="ABORTED",_t[_t.OUT_OF_RANGE=11]="OUT_OF_RANGE",_t[_t.UNIMPLEMENTED=12]="UNIMPLEMENTED",_t[_t.INTERNAL=13]="INTERNAL",_t[_t.UNAVAILABLE=14]="UNAVAILABLE",_t[_t.DATA_LOSS=15]="DATA_LOSS";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Rt=function(){function e(e,t){this.comparator=e,this.root=t||It.EMPTY}return e.prototype.insert=function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,It.BLACK,null,null))},e.prototype.remove=function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,It.BLACK,null,null))},e.prototype.get=function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null},e.prototype.indexOf=function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1},e.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(e.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),e.prototype.minKey=function(){return this.root.minKey()},e.prototype.maxKey=function(){return this.root.maxKey()},e.prototype.inorderTraversal=function(e){return this.root.inorderTraversal(e)},e.prototype.forEach=function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))},e.prototype.toString=function(){var e=[];return this.inorderTraversal((function(t,n){return e.push(t+":"+n),!1})),"{"+e.join(", ")+"}"},e.prototype.reverseTraversal=function(e){return this.root.reverseTraversal(e)},e.prototype.getIterator=function(){return new Ct(this.root,null,this.comparator,!1)},e.prototype.getIteratorFrom=function(e){return new Ct(this.root,e,this.comparator,!1)},e.prototype.getReverseIterator=function(){return new Ct(this.root,null,this.comparator,!0)},e.prototype.getReverseIteratorFrom=function(e){return new Ct(this.root,e,this.comparator,!0)},e}(),Ct=function(){function e(e,t,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!e.isEmpty();)if(i=t?n(e.key,t):1,r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}return e.prototype.getNext=function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t},e.prototype.hasNext=function(){return this.nodeStack.length>0},e.prototype.peek=function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}},e}(),It=function(){function e(t,n,r,i,o){this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=o?o:e.EMPTY,this.size=this.left.size+1+this.right.size}return e.prototype.copy=function(t,n,r,i,o){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},e.prototype.isEmpty=function(){return!1},e.prototype.inorderTraversal=function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)},e.prototype.reverseTraversal=function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)},e.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},e.prototype.minKey=function(){return this.min().key},e.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},e.prototype.insert=function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()},e.prototype.removeMin=function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()},e.prototype.remove=function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()},e.prototype.isRed=function(){return this.color},e.prototype.fixUp=function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e},e.prototype.moveRedLeft=function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e},e.prototype.moveRedRight=function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e},e.prototype.rotateLeft=function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},e.prototype.rotateRight=function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},e.prototype.colorFlip=function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)},e.prototype.checkMaxDepth=function(){var e=this.check();return Math.pow(2,e)<=this.size+1},e.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw v();if(this.right.isRed())throw v();var e=this.left.check();if(e!==this.right.check())throw v();return e+(this.isRed()?0:1)},e}();It.EMPTY=null,It.RED=!0,It.BLACK=!1,It.EMPTY=new(function(){function e(){this.size=0}return Object.defineProperty(e.prototype,"key",{get:function(){throw v()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){throw v()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){throw v()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){throw v()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){throw v()},enumerable:!1,configurable:!0}),e.prototype.copy=function(e,t,n,r,i){return this},e.prototype.insert=function(e,t,n){return new It(e,t)},e.prototype.remove=function(e,t){return this},e.prototype.isEmpty=function(){return!0},e.prototype.inorderTraversal=function(e){return!1},e.prototype.reverseTraversal=function(e){return!1},e.prototype.minKey=function(){return null},e.prototype.maxKey=function(){return null},e.prototype.isRed=function(){return!1},e.prototype.checkMaxDepth=function(){return!0},e.prototype.check=function(){return 0},e}());
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Lt=function(){function e(e){this.comparator=e,this.data=new Rt(this.comparator)}return e.prototype.has=function(e){return null!==this.data.get(e)},e.prototype.first=function(){return this.data.minKey()},e.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(e.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),e.prototype.indexOf=function(e){return this.data.indexOf(e)},e.prototype.forEach=function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))},e.prototype.forEachInRange=function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}},e.prototype.forEachWhile=function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return},e.prototype.firstAfterOrEqual=function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null},e.prototype.getIterator=function(){return new Dt(this.data.getIterator())},e.prototype.getIteratorFrom=function(e){return new Dt(this.data.getIteratorFrom(e))},e.prototype.add=function(e){return this.copy(this.data.remove(e).insert(e,!0))},e.prototype.delete=function(e){return this.has(e)?this.copy(this.data.remove(e)):this},e.prototype.isEmpty=function(){return this.data.isEmpty()},e.prototype.unionWith=function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t},e.prototype.isEqual=function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},e.prototype.toArray=function(){var e=[];return this.forEach((function(t){e.push(t)})),e},e.prototype.toString=function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"},e.prototype.copy=function(t){var n=new e(this.comparator);return n.data=t,n},e}(),Dt=function(){function e(e){this.iter=e}return e.prototype.getNext=function(){return this.iter.getNext().key},e.prototype.hasNext=function(){return this.iter.hasNext()},e}(),Pt=new Rt(W.comparator);function Nt(){return Pt}var Bt=new Rt(W.comparator);function kt(){return Bt}var Ft=new Rt(W.comparator);function Ut(){return Ft}var Ht=new Lt(W.comparator);function jt(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=Ht,r=0,i=e;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Gt=new Lt(E);function Vt(){return Gt}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zt=function(){function e(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return e.createSynthesizedRemoteEventForCurrentChange=function(t,n){var r=new Map;return r.set(t,Wt.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(A.min(),r,Vt(),Nt(),jt())},e}(),Wt=function(){function e(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return e.createSynthesizedTargetChangeForCurrentChange=function(t,n){return new e(P.EMPTY_BYTE_STRING,n,jt(),jt(),jt())},e}(),qt=function(e,t,n,r){this.v=e,this.removedTargetIds=t,this.key=n,this.P=r},Yt=function(e,t){this.targetId=e,this.V=t},Xt=function(e,t,n,r){void 0===n&&(n=P.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r},Qt=function(){function e(){this.S=0,this.D=Zt(),this.C=P.EMPTY_BYTE_STRING,this.N=!1,this.k=!0}return Object.defineProperty(e.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"F",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"$",{get:function(){return this.k},enumerable:!1,configurable:!0}),e.prototype.O=function(e){e.approximateByteSize()>0&&(this.k=!0,this.C=e)},e.prototype.M=function(){var e=jt(),t=jt(),n=jt();return this.D.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:v()}})),new Wt(this.C,this.N,e,t,n)},e.prototype.L=function(){this.k=!1,this.D=Zt()},e.prototype.B=function(e,t){this.k=!0,this.D=this.D.insert(e,t)},e.prototype.q=function(e){this.k=!0,this.D=this.D.remove(e)},e.prototype.U=function(){this.S+=1},e.prototype.K=function(){this.S-=1},e.prototype.j=function(){this.k=!0,this.N=!0},e}(),Kt=function(){function e(e){this.W=e,this.G=new Map,this.H=Nt(),this.J=Jt(),this.Y=new Lt(E)}return e.prototype.X=function(e){for(var t=0,n=e.v;t<n.length;t++){var r=n[t];e.P&&e.P.isFoundDocument()?this.Z(r,e.P):this.tt(r,e.key,e.P)}for(var i=0,o=e.removedTargetIds;i<o.length;i++)r=o[i],this.tt(r,e.key,e.P)},e.prototype.et=function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.nt(n);switch(e.state){case 0:t.st(n)&&r.O(e.resumeToken);break;case 1:r.K(),r.F||r.L(),r.O(e.resumeToken);break;case 2:r.K(),r.F||t.removeTarget(n);break;case 3:t.st(n)&&(r.j(),r.O(e.resumeToken));break;case 4:t.st(n)&&(t.it(n),r.O(e.resumeToken));break;default:v()}}))},e.prototype.forEachTarget=function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.G.forEach((function(e,r){n.st(r)&&t(r)}))},e.prototype.rt=function(e){var t=e.targetId,n=e.V.count,r=this.ot(t);if(r){var i=r.target;if(de(i))if(0===n){var o=new W(i.path);this.tt(t,o,ce.newNoDocument(o,A.min()))}else g(1===n);else this.ct(t)!==n&&(this.it(t),this.Y=this.Y.add(t))}},e.prototype.ut=function(e){var t=this,n=new Map;this.G.forEach((function(r,i){var o=t.ot(i);if(o){if(r.current&&de(o.target)){var a=new W(o.target.path);null!==t.H.get(a)||t.at(i,a)||t.tt(i,a,ce.newNoDocument(a,e))}r.$&&(n.set(i,r.M()),r.L())}}));var r=jt();this.J.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.ot(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))}));var i=new zt(e,n,this.Y,this.H,r);return this.H=Nt(),this.J=Jt(),this.Y=new Lt(E),i},e.prototype.Z=function(e,t){if(this.st(e)){var n=this.at(e,t.key)?2:0;this.nt(e).B(t.key,n),this.H=this.H.insert(t.key,t),this.J=this.J.insert(t.key,this.ht(t.key).add(e))}},e.prototype.tt=function(e,t,n){if(this.st(e)){var r=this.nt(e);this.at(e,t)?r.B(t,1):r.q(t),this.J=this.J.insert(t,this.ht(t).delete(e)),n&&(this.H=this.H.insert(t,n))}},e.prototype.removeTarget=function(e){this.G.delete(e)},e.prototype.ct=function(e){var t=this.nt(e).M();return this.W.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size},e.prototype.U=function(e){this.nt(e).U()},e.prototype.nt=function(e){var t=this.G.get(e);return t||(t=new Qt,this.G.set(e,t)),t},e.prototype.ht=function(e){var t=this.J.get(e);return t||(t=new Lt(E),this.J=this.J.insert(e,t)),t},e.prototype.st=function(e){var t=null!==this.ot(e);return t||f("WatchChangeAggregator","Detected inactive target",e),t},e.prototype.ot=function(e){var t=this.G.get(e);return t&&t.F?null:this.W.lt(e)},e.prototype.it=function(e){var t=this;this.G.set(e,new Qt),this.W.getRemoteKeysForTarget(e).forEach((function(n){t.tt(e,n,null)}))},e.prototype.at=function(e,t){return this.W.getRemoteKeysForTarget(e).has(t)},e}();function Jt(){return new Rt(W.comparator)}function Zt(){return new Rt(W.comparator)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $t={asc:"ASCENDING",desc:"DESCENDING"},en={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},tn=function(e,t){this.databaseId=e,this.I=t};function nn(e,t){return e.I?new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+t.nanoseconds).slice(-9)+"Z":{seconds:""+t.seconds,nanos:t.nanoseconds}}function rn(e,t){return e.I?t.toBase64():t.toUint8Array()}function on(e,t){return nn(e,t.toTimestamp())}function an(e){return g(!!e),A.fromTimestamp(function(e){var t=B(e);return new T(t.seconds,t.nanos)}(e))}function sn(e,t){return function(e){return new C(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function cn(e){var t=C.fromString(e);return g(Ln(t)),t}function un(e,t){return sn(e.databaseId,t.path)}function ln(e,t){var n=cn(t);if(n.get(1)!==e.databaseId.projectId)throw new u(c.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new u(c.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new W(pn(n))}function hn(e,t){return sn(e.databaseId,t)}function fn(e){var t=cn(e);return 4===t.length?C.emptyPath():pn(t)}function dn(e){return new C(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function pn(e){return g(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function mn(e,t,n){return{name:un(e,t),fields:n.value.mapValue.fields}}function vn(e,t,n){var r=ln(e,t.name),i=an(t.updateTime),o=new ae({mapValue:{fields:t.fields}}),a=ce.newFoundDocument(r,i,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function gn(e,t){var n;if(t instanceof gt)n={update:mn(e,t.key,t.value)};else if(t instanceof Tt)n={delete:un(e,t.key)};else if(t instanceof yt)n={update:mn(e,t.key,t.data),updateMask:In(t.fieldMask)};else{if(!(t instanceof At))return v();n={verify:un(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof $e)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof et)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof nt)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof it)return{fieldPath:t.field.canonicalString(),increment:n.A};throw v()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:on(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:v()}(e,t.precondition)),n}function yn(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?ut.updateTime(an(e.updateTime)):void 0!==e.exists?ut.exists(e.exists):ut.none()}(t.currentDocument):ut.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)g("REQUEST_TIME"===t.setToServerValue),n=new $e;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new et(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new nt(i)}else"increment"in t?n=new it(e,t.increment):v();var o=L.fromServerFormat(t.fieldPath);return new st(o,n)}(e,t)})):[];if(t.update){t.update.name;var i=ln(e,t.update.name),o=new ae({mapValue:{fields:t.update.fields}});if(t.updateMask){var a=function(e){var t=e.fieldPaths||[];return new D(t.map((function(e){return L.fromServerFormat(e)})))}(t.updateMask);return new yt(i,o,a,n,r)}return new gt(i,o,n,r)}if(t.delete){var s=ln(e,t.delete);return new Tt(s,n)}if(t.verify){var c=ln(e,t.verify);return new At(c,n)}return v()}function bn(e,t){return{documents:[hn(e,t.path)]}}function wn(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=hn(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=hn(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(re(e.value))return{unaryFilter:{field:Mn(e.field),op:"IS_NAN"}};if(ne(e.value))return{unaryFilter:{field:Mn(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(re(e.value))return{unaryFilter:{field:Mn(e.field),op:"IS_NOT_NAN"}};if(ne(e.value))return{unaryFilter:{field:Mn(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Mn(e.field),op:Sn(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var o=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:Mn(e.field),direction:An(e.dir)}}(e)}))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);var a=function(e,t){return e.I||G(t)?t:{value:t}}(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=_n(t.startAt)),t.endAt&&(n.structuredQuery.endAt=_n(t.endAt)),n}function En(e){var t=fn(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){g(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:t=t.child(o.collectionId)}var a=[];n.where&&(a=xn(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(e){return function(e){return new Ae(On(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var c=null;n.limit&&(c=function(e){var t;return G(t="object"==typeof e?e.value:e)?null:t}(n.limit));var u=null;n.startAt&&(u=Tn(n.startAt));var l=null;return n.endAt&&(l=Tn(n.endAt)),Ce(t,i,s,a,c,"F",u,l)}function xn(e){return e?void 0!==e.unaryFilter?[Cn(e)]:void 0!==e.fieldFilter?[Rn(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return xn(e)})).reduce((function(e,t){return e.concat(t)})):v():[]}function _n(e){return{before:e.before,values:e.position}}function Tn(e){var t=!!e.before,n=e.values||[];return new _e(n,t)}function An(e){return $t[e]}function Sn(e){return en[e]}function Mn(e){return{fieldPath:e.canonicalString()}}function On(e){return L.fromServerFormat(e.fieldPath)}function Rn(e){return pe.create(On(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return v()}}(e.fieldFilter.op),e.fieldFilter.value)}function Cn(e){switch(e.unaryFilter.op){case"IS_NAN":var t=On(e.unaryFilter.field);return pe.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=On(e.unaryFilter.field);return pe.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=On(e.unaryFilter.field);return pe.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=On(e.unaryFilter.field);return pe.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return v()}}function In(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function Ln(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dn(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=Nn(t)),t=Pn(e.get(n),t);return Nn(t)}function Pn(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var o=e.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function Nn(e){return e+""}function Bn(e){var t=e.length;if(g(t>=2),2===t)return g(""===e.charAt(0)&&""===e.charAt(1)),C.emptyPath();for(var n=t-2,r=[],i="",o=0;o<t;){var a=e.indexOf("",o);switch((a<0||a>n)&&v(),e.charAt(a+1)){case"":var s=e.substring(o,a),c=void 0;0===i.length?c=s:(c=i+=s,i=""),r.push(c);break;case"":i+=e.substring(o,a),i+="\0";break;case"":i+=e.substring(o,a+1);break;default:v()}o=a+2}return new C(r)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kn=function(e,t){this.seconds=e,this.nanoseconds=t},Fn=function(e,t,n){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=n};Fn.store="owner",Fn.key="owner";var Un=function(e,t,n){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=n};Un.store="mutationQueues",Un.keyPath="userId";var Hn=function(e,t,n,r,i){this.userId=e,this.batchId=t,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};Hn.store="mutations",Hn.keyPath="batchId",Hn.userMutationsIndex="userMutationsIndex",Hn.userMutationsKeyPath=["userId","batchId"];var jn=function(){function e(){}return e.prefixForUser=function(e){return[e]},e.prefixForPath=function(e,t){return[e,Dn(t)]},e.key=function(e,t,n){return[e,Dn(t),n]},e}();jn.store="documentMutations",jn.PLACEHOLDER=new jn;var Gn=function(e,t){this.path=e,this.readTime=t},Vn=function(e,t){this.path=e,this.version=t},zn=function(e,t,n,r,i,o){this.unknownDocument=e,this.noDocument=t,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};zn.store="remoteDocuments",zn.readTimeIndex="readTimeIndex",zn.readTimeIndexPath="readTime",zn.collectionReadTimeIndex="collectionReadTimeIndex",zn.collectionReadTimeIndexPath=["parentPath","readTime"];var Wn=function(e){this.byteSize=e};Wn.store="remoteDocumentGlobal",Wn.key="remoteDocumentGlobalKey";var qn=function(e,t,n,r,i,o,a){this.targetId=e,this.canonicalId=t,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=a};qn.store="targets",qn.keyPath="targetId",qn.queryTargetsIndexName="queryTargetsIndex",qn.queryTargetsKeyPath=["canonicalId","targetId"];var Yn=function(e,t,n){this.targetId=e,this.path=t,this.sequenceNumber=n};Yn.store="targetDocuments",Yn.keyPath=["targetId","path"],Yn.documentTargetsIndex="documentTargetsIndex",Yn.documentTargetsKeyPath=["path","targetId"];var Xn=function(e,t,n,r){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=n,this.targetCount=r};Xn.key="targetGlobalKey",Xn.store="targetGlobal";var Qn=function(e,t){this.collectionId=e,this.parent=t};Qn.store="collectionParents",Qn.keyPath=["collectionId","parent"];var Kn=function(e,t,n,r){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=n,this.inForeground=r};Kn.store="clientMetadata",Kn.keyPath="clientId";var Jn=function(e,t,n){this.bundleId=e,this.createTime=t,this.version=n};Jn.store="bundles",Jn.keyPath="bundleId";var Zn=function(e,t,n){this.name=e,this.readTime=t,this.bundledQuery=n};Zn.store="namedQueries",Zn.keyPath="name";var $n=Object(r["d"])(Object(r["d"])([],Object(r["d"])(Object(r["d"])([],Object(r["d"])(Object(r["d"])([],Object(r["d"])(Object(r["d"])([],[Un.store,Hn.store,jn.store,zn.store,qn.store,Fn.store,Xn.store,Yn.store]),[Kn.store])),[Wn.store])),[Qn.store])),[Jn.store,Zn.store]),er="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",tr=function(){function e(){this.onCommittedListeners=[]}return e.prototype.addOnCommittedListener=function(e){this.onCommittedListeners.push(e)},e.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach((function(e){return e()}))},e}(),nr=function(){var e=this;this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))},rr=function(){function e(e){var t=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((function(e){t.isDone=!0,t.result=e,t.nextCallback&&t.nextCallback(e)}),(function(e){t.isDone=!0,t.error=e,t.catchCallback&&t.catchCallback(e)}))}return e.prototype.catch=function(e){return this.next(void 0,e)},e.prototype.next=function(t,n){var r=this;return this.callbackAttached&&v(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))},e.prototype.toPromise=function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))},e.prototype.wrapUserFunction=function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}},e.prototype.wrapSuccess=function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)},e.prototype.wrapFailure=function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)},e.resolve=function(t){return new e((function(e,n){e(t)}))},e.reject=function(t){return new e((function(e,n){n(t)}))},e.waitFor=function(t){return new e((function(e,n){var r=0,i=0,o=!1;t.forEach((function(t){++r,t.next((function(){++i,o&&i===r&&e()}),(function(e){return n(e)}))})),o=!0,i===r&&e()}))},e.or=function(t){for(var n=e.resolve(!1),r=function(t){n=n.next((function(n){return n?e.resolve(n):t()}))},i=0,o=t;i<o.length;i++)r(o[i]);return n},e.forEach=function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)},e}(),ir=function(){function e(e,t){var n=this;this.action=e,this.transaction=t,this.aborted=!1,this.ft=new nr,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){t.error?n.ft.reject(new sr(e,t.error)):n.ft.resolve()},this.transaction.onerror=function(t){var r=fr(t.target.error);n.ft.reject(new sr(e,r))}}return e.open=function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new sr(n,t)}},Object.defineProperty(e.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),e.prototype.abort=function(e){e&&this.ft.reject(e),this.aborted||(f("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},e.prototype.store=function(e){var t=this.transaction.objectStore(e);return new ur(t)},e}(),or=function(){function t(e,n,r){this.name=e,this.version=n,this.wt=r,12.2===t._t(Object(i["j"])())&&d("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(e){return f("SimpleDb","Removing database:",e),lr(window.indexedDB.deleteDatabase(e)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=Object(i["j"])(),n=t._t(e),r=0<n&&n<10,o=t.Et(e),a=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)},t.gt=function(){var t;return"undefined"!=typeof e&&"YES"===(null===(t=Object({NODE_ENV:"production",VUE_APP_FIREBASE_API_KEY:"AIzaSyBDa7a-5ykkS5B1Qxxu-L0cCPyoq8uCG64",VUE_APP_AUTH_DOMAIN:"arissa-portfolio.firebaseapp.com",VUE_APP_DB_URL:"https://arissa-portfolio-default-rtdb.asia-southeast1.firebasedatabase.app",VUE_APP_PROJECT_ID:"arissa-portfolio",VUE_APP_STORAGE_BUCKET:"arissa-portfolio.appspot.com",VUE_APP_MESSAGING_SENDER_ID:"38118348426",VUE_APP_APP_ID:"1:38118348426:web:0b988eb2cb861b4d02ff73",VUE_APP_MEASUREMENT_ID:"G-D90PD7LB68",BASE_URL:"/"}))||void 0===t?void 0:t.Tt)},t.It=function(e,t){return e.store(t)},t._t=function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Et=function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.At=function(e){return Object(r["a"])(this,void 0,void 0,(function(){var t,n=this;return Object(r["c"])(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(f("SimpleDb","Opening database:",this.name),t=this,[4,new Promise((function(t,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(e){var n=e.target.result;t(n)},i.onblocked=function(){r(new sr(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(t){var n=t.target.error;"VersionError"===n.name?r(new u(c.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new sr(e,n))},i.onupgradeneeded=function(e){f("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.wt.Rt(t,i.transaction,e.oldVersion,n.version).next((function(){f("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:t.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(e){return n.bt(e)}),this.db)]}}))}))},t.prototype.vt=function(e){this.bt=e,this.db&&(this.db.onversionchange=function(t){return e(t)})},t.prototype.runTransaction=function(e,t,n,i){return Object(r["a"])(this,void 0,void 0,(function(){var o,a,s,c,u;return Object(r["c"])(this,(function(l){switch(l.label){case 0:o="readonly"===t,a=0,s=function(){var t,s,u,l,h;return Object(r["c"])(this,(function(r){switch(r.label){case 0:++a,r.label=1;case 1:return r.trys.push([1,4,,5]),[4,c.At(e)];case 2:return c.db=r.sent(),t=ir.open(c.db,e,o?"readonly":"readwrite",n),s=i(t).catch((function(e){return t.abort(e),rr.reject(e)})).toPromise(),u={},s.catch((function(){})),[4,t.dt];case 3:return[2,(u.value=(r.sent(),s),u)];case 4:return l=r.sent(),h="FirebaseError"!==l.name&&a<3,f("SimpleDb","Transaction failed with error:",l.message,"Retrying:",h),c.close(),h?[3,5]:[2,{value:Promise.reject(l)}];case 5:return[2]}}))},c=this,l.label=1;case 1:return[5,s()];case 2:if("object"==typeof(u=l.sent()))return[2,u.value];l.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),ar=function(){function e(e){this.Pt=e,this.Vt=!1,this.St=null}return Object.defineProperty(e.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cursor",{set:function(e){this.Pt=e},enumerable:!1,configurable:!0}),e.prototype.done=function(){this.Vt=!0},e.prototype.Ct=function(e){this.St=e},e.prototype.delete=function(){return lr(this.Pt.delete())},e}(),sr=function(e){function t(t,n){var r=this;return(r=e.call(this,c.UNAVAILABLE,"IndexedDB transaction '"+t+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return Object(r["b"])(t,e),t}(u);function cr(e){return"IndexedDbTransactionError"===e.name}var ur=function(){function e(e){this.store=e}return e.prototype.put=function(e,t){var n;return void 0!==t?(f("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(f("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),lr(n)},e.prototype.add=function(e){return f("SimpleDb","ADD",this.store.name,e,e),lr(this.store.add(e))},e.prototype.get=function(e){var t=this;return lr(this.store.get(e)).next((function(n){return void 0===n&&(n=null),f("SimpleDb","GET",t.store.name,e,n),n}))},e.prototype.delete=function(e){return f("SimpleDb","DELETE",this.store.name,e),lr(this.store.delete(e))},e.prototype.count=function(){return f("SimpleDb","COUNT",this.store.name),lr(this.store.count())},e.prototype.Nt=function(e,t){var n=this.cursor(this.options(e,t)),r=[];return this.xt(n,(function(e,t){r.push(t)})).next((function(){return r}))},e.prototype.kt=function(e,t){f("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.Ft=!1;var r=this.cursor(n);return this.xt(r,(function(e,t,n){return n.delete()}))},e.prototype.$t=function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.xt(r,t)},e.prototype.Ot=function(e){var t=this.cursor({});return new rr((function(n,r){t.onerror=function(e){var t=fr(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))},e.prototype.xt=function(e,t){var n=[];return new rr((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var o=new ar(i),a=t(i.primaryKey,i.value,o);if(a instanceof rr){var s=a.catch((function(e){return o.done(),rr.reject(e)}));n.push(s)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}})).next((function(){return rr.waitFor(n)}))},e.prototype.options=function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}},e.prototype.cursor=function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.Ft?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)},e}();function lr(e){return new rr((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=fr(e.target.error);n(t)}}))}var hr=!1;function fr(e){var t=or._t(Object(i["j"])());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new u("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return hr||(hr=!0,setTimeout((function(){throw r}),0)),r}}return e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dr=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).Mt=t,r.currentSequenceNumber=n,r}return Object(r["b"])(t,e),t}(tr);function pr(e,t){var n=y(e);return or.It(n.Mt,t)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mr=function(){function e(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}return e.prototype.applyToRemoteDocument=function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&ft(i,e,n[r])}},e.prototype.applyToLocalView=function(e){for(var t=0,n=this.baseMutations;t<n.length;t++)(o=n[t]).key.isEqual(e.key)&&dt(o,e,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(e.key)&&dt(o,e,this.localWriteTime)}},e.prototype.applyToLocalDocumentSet=function(e){var t=this;this.mutations.forEach((function(n){var r=e.get(n.key),i=r;t.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(A.min())}))},e.prototype.keys=function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),jt())},e.prototype.isEqual=function(e){return this.batchId===e.batchId&&x(this.mutations,e.mutations,(function(e,t){return mt(e,t)}))&&x(this.baseMutations,e.baseMutations,(function(e,t){return mt(e,t)}))},e}(),vr=function(){function e(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}return e.from=function(t,n,r){g(t.mutations.length===r.length);for(var i=Ut(),o=t.mutations,a=0;a<o.length;a++)i=i.insert(o[a].key,r[a].version);return new e(t,n,r,i)},e}(),gr=function(){function e(e,t,n,r,i,o,a){void 0===i&&(i=A.min()),void 0===o&&(o=A.min()),void 0===a&&(a=P.EMPTY_BYTE_STRING),this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}return e.prototype.withSequenceNumber=function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},e.prototype.withResumeToken=function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)},e.prototype.withLastLimboFreeSnapshotVersion=function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)},e}(),yr=function(e){this.Lt=e};function br(e,t){if(t.document)return vn(e.Lt,t.document,!!t.hasCommittedMutations);if(t.noDocument){var n=W.fromSegments(t.noDocument.path),r=Tr(t.noDocument.readTime),i=ce.newNoDocument(n,r);return t.hasCommittedMutations?i.setHasCommittedMutations():i}if(t.unknownDocument){var o=W.fromSegments(t.unknownDocument.path);return r=Tr(t.unknownDocument.version),ce.newUnknownDocument(o,r)}return v()}function wr(e,t,n){var r=Er(n),i=t.key.path.popLast().toArray();if(t.isFoundDocument()){var o=function(e,t){return{name:un(e,t.key),fields:t.data.value.mapValue.fields,updateTime:nn(e,t.version.toTimestamp())}}(e.Lt,t),a=t.hasCommittedMutations;return new zn(null,null,o,a,r,i)}if(t.isNoDocument()){var s=t.key.path.toArray(),c=_r(t.version);return a=t.hasCommittedMutations,new zn(null,new Gn(s,c),null,a,r,i)}if(t.isUnknownDocument()){var u=t.key.path.toArray(),l=_r(t.version);return new zn(new Vn(u,l),null,null,!0,r,i)}return v()}function Er(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function xr(e){var t=new T(e[0],e[1]);return A.fromTimestamp(t)}function _r(e){var t=e.toTimestamp();return new kn(t.seconds,t.nanoseconds)}function Tr(e){var t=new T(e.seconds,e.nanoseconds);return A.fromTimestamp(t)}function Ar(e,t){for(var n=(t.baseMutations||[]).map((function(t){return yn(e.Lt,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var o=t.mutations[r+1];i.updateTransforms=o.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var a=t.mutations.map((function(t){return yn(e.Lt,t)})),s=T.fromMillis(t.localWriteTimeMs);return new mr(t.batchId,s,n,a)}function Sr(e){var t,n,r=Tr(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?Tr(e.lastLimboFreeSnapshotVersion):A.min();return void 0!==e.query.documents?(g(1===(n=e.query).documents.length),t=Fe(Ie(fn(n.documents[0])))):t=function(e){return Fe(En(e))}(e.query),new gr(t,e.targetId,0,e.lastListenSequenceNumber,r,i,P.fromBase64String(e.resumeToken))}function Mr(e,t){var n,r=_r(t.snapshotVersion),i=_r(t.lastLimboFreeSnapshotVersion);n=de(t.target)?bn(e.Lt,t.target):wn(e.Lt,t.target);var o=t.resumeToken.toBase64();return new qn(t.targetId,he(t.target),r,o,t.sequenceNumber,i,n)}function Or(e){var t=En({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Ue(t,t.limit,"L"):t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Rr=function(){function e(){}return e.prototype.getBundleMetadata=function(e,t){return Cr(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:Tr(t.createTime),version:t.version};var t}))},e.prototype.saveBundleMetadata=function(e,t){return Cr(e).put({bundleId:(n=t).id,createTime:_r(an(n.createTime)),version:n.version});var n},e.prototype.getNamedQuery=function(e,t){return Ir(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:Or(t.bundledQuery),readTime:Tr(t.readTime)};var t}))},e.prototype.saveNamedQuery=function(e,t){return Ir(e).put(function(e){return{name:e.name,readTime:_r(an(e.readTime)),bundledQuery:e.bundledQuery}}(t))},e}();function Cr(e){return pr(e,Jn.store)}function Ir(e){return pr(e,Zn.store)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Lr=function(){function e(){this.Bt=new Dr}return e.prototype.addToCollectionParentIndex=function(e,t){return this.Bt.add(t),rr.resolve()},e.prototype.getCollectionParents=function(e,t){return rr.resolve(this.Bt.getEntries(t))},e}(),Dr=function(){function e(){this.index={}}return e.prototype.add=function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Lt(C.comparator),i=!r.has(n);return this.index[t]=r.add(n),i},e.prototype.has=function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)},e.prototype.getEntries=function(e){return(this.index[e]||new Lt(C.comparator)).toArray()},e}(),Pr=function(){function e(){this.qt=new Dr}return e.prototype.addToCollectionParentIndex=function(e,t){var n=this;if(!this.qt.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.qt.add(t)}));var o={collectionId:r,parent:Dn(i)};return Nr(e).put(o)}return rr.resolve()},e.prototype.getCollectionParents=function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[_(t),""],!1,!0);return Nr(e).Nt(r).next((function(e){for(var r=0,i=e;r<i.length;r++){var o=i[r];if(o.collectionId!==t)break;n.push(Bn(o.parent))}return n}))},e}();function Nr(e){return pr(e,Qn.store)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Br={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},kr=function(){function e(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}return e.withCacheSize=function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},e}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fr(e,t,n){var r=e.store(Hn.store),i=e.store(jn.store),o=[],a=IDBKeyRange.only(n.batchId),s=0,c=r.$t({range:a},(function(e,t,n){return s++,n.delete()}));o.push(c.next((function(){g(1===s)})));for(var u=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],d=jn.key(t,f.key.path,n.batchId);o.push(i.delete(d)),u.push(f.key)}return rr.waitFor(o).next((function(){return u}))}function Ur(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw v();t=e.noDocument}return JSON.stringify(t).length}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */kr.DEFAULT_COLLECTION_PERCENTILE=10,kr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,kr.DEFAULT=new kr(41943040,kr.DEFAULT_COLLECTION_PERCENTILE,kr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),kr.DISABLED=new kr(-1,0,0);var Hr=function(){function e(e,t,n,r){this.userId=e,this.R=t,this.Ut=n,this.referenceDelegate=r,this.Kt={}}return e.Qt=function(t,n,r,i){return g(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)},e.prototype.checkEmpty=function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Gr(e).$t({index:Hn.userMutationsIndex,range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))},e.prototype.addMutationBatch=function(e,t,n,r){var i=this,o=Vr(e),a=Gr(e);return a.add({}).next((function(s){g("number"==typeof s);for(var c=new mr(s,t,n,r),u=function(e,t,n){var r=n.baseMutations.map((function(t){return gn(e.Lt,t)})),i=n.mutations.map((function(t){return gn(e.Lt,t)}));return new Hn(t,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,c),l=[],h=new Lt((function(e,t){return E(e.canonicalString(),t.canonicalString())})),f=0,d=r;f<d.length;f++){var p=d[f],m=jn.key(i.userId,p.key.path,s);h=h.add(p.key.path.popLast()),l.push(a.put(u)),l.push(o.put(m,jn.PLACEHOLDER))}return h.forEach((function(t){l.push(i.Ut.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.Kt[s]=c.keys()})),rr.waitFor(l).next((function(){return c}))}))},e.prototype.lookupMutationBatch=function(e,t){var n=this;return Gr(e).get(t).next((function(e){return e?(g(e.userId===n.userId),Ar(n.R,e)):null}))},e.prototype.jt=function(e,t){var n=this;return this.Kt[t]?rr.resolve(this.Kt[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.Kt[t]=r,r}return null}))},e.prototype.getNextMutationBatchAfterBatchId=function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Gr(e).$t({index:Hn.userMutationsIndex,range:i},(function(e,t,i){t.userId===n.userId&&(g(t.batchId>=r),o=Ar(n.R,t)),i.done()})).next((function(){return o}))},e.prototype.getHighestUnacknowledgedBatchId=function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Gr(e).$t({index:Hn.userMutationsIndex,range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))},e.prototype.getAllMutationBatches=function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Gr(e).Nt(Hn.userMutationsIndex,n).next((function(e){return e.map((function(e){return Ar(t.R,e)}))}))},e.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,t){var n=this,r=jn.prefixForPath(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return Vr(e).$t({range:i},(function(r,i,a){var s=r[0],c=r[1],u=r[2],l=Bn(c);if(s===n.userId&&t.path.isEqual(l))return Gr(e).get(u).next((function(e){if(!e)throw v();g(e.userId===n.userId),o.push(Ar(n.R,e))}));a.done()})).next((function(){return o}))},e.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var n=this,r=new Lt(E),i=[];return t.forEach((function(t){var o=jn.prefixForPath(n.userId,t.path),a=IDBKeyRange.lowerBound(o),s=Vr(e).$t({range:a},(function(e,i,o){var a=e[0],s=e[1],c=e[2],u=Bn(s);a===n.userId&&t.path.isEqual(u)?r=r.add(c):o.done()}));i.push(s)})),rr.waitFor(i).next((function(){return n.Wt(e,r)}))},e.prototype.getAllMutationBatchesAffectingQuery=function(e,t){var n=this,r=t.path,i=r.length+1,o=jn.prefixForPath(this.userId,r),a=IDBKeyRange.lowerBound(o),s=new Lt(E);return Vr(e).$t({range:a},(function(e,t,o){var a=e[0],c=e[1],u=e[2],l=Bn(c);a===n.userId&&r.isPrefixOf(l)?l.length===i&&(s=s.add(u)):o.done()})).next((function(){return n.Wt(e,s)}))},e.prototype.Wt=function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(Gr(e).get(t).next((function(e){if(null===e)throw v();g(e.userId===n.userId),r.push(Ar(n.R,e))})))})),rr.waitFor(i).next((function(){return r}))},e.prototype.removeMutationBatch=function(e,t){var n=this;return Fr(e.Mt,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.Gt(t.batchId)})),rr.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))},e.prototype.Gt=function(e){delete this.Kt[e]},e.prototype.performConsistencyCheck=function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return rr.resolve();var r=IDBKeyRange.lowerBound(jn.prefixForUser(t.userId)),i=[];return Vr(e).$t({range:r},(function(e,n,r){if(e[0]===t.userId){var o=Bn(e[1]);i.push(o)}else r.done()})).next((function(){g(0===i.length)}))}))},e.prototype.containsKey=function(e,t){return jr(e,this.userId,t)},e.prototype.zt=function(e){var t=this;return zr(e).get(this.userId).next((function(e){return e||new Un(t.userId,-1,"")}))},e}();function jr(e,t,n){var r=jn.prefixForPath(t,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),a=!1;return Vr(e).$t({range:o,Ft:!0},(function(e,n,r){var o=e[0],s=e[1];e[2],o===t&&s===i&&(a=!0),r.done()})).next((function(){return a}))}function Gr(e){return pr(e,Hn.store)}function Vr(e){return pr(e,jn.store)}function zr(e){return pr(e,Un.store)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wr=function(){function e(e){this.Ht=e}return e.prototype.next=function(){return this.Ht+=2,this.Ht},e.Jt=function(){return new e(0)},e.Yt=function(){return new e(-1)},e}(),qr=function(){function e(e,t){this.referenceDelegate=e,this.R=t}return e.prototype.allocateTargetId=function(e){var t=this;return this.Xt(e).next((function(n){var r=new Wr(n.highestTargetId);return n.highestTargetId=r.next(),t.Zt(e,n).next((function(){return n.highestTargetId}))}))},e.prototype.getLastRemoteSnapshotVersion=function(e){return this.Xt(e).next((function(e){return A.fromTimestamp(new T(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))},e.prototype.getHighestSequenceNumber=function(e){return this.Xt(e).next((function(e){return e.highestListenSequenceNumber}))},e.prototype.setTargetsMetadata=function(e,t,n){var r=this;return this.Xt(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.Zt(e,i)}))},e.prototype.addTargetData=function(e,t){var n=this;return this.te(e,t).next((function(){return n.Xt(e).next((function(r){return r.targetCount+=1,n.ee(t,r),n.Zt(e,r)}))}))},e.prototype.updateTargetData=function(e,t){return this.te(e,t)},e.prototype.removeTargetData=function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return Yr(e).delete(t.targetId)})).next((function(){return n.Xt(e)})).next((function(t){return g(t.targetCount>0),t.targetCount-=1,n.Zt(e,t)}))},e.prototype.removeTargets=function(e,t,n){var r=this,i=0,o=[];return Yr(e).$t((function(a,s){var c=Sr(s);c.sequenceNumber<=t&&null===n.get(c.targetId)&&(i++,o.push(r.removeTargetData(e,c)))})).next((function(){return rr.waitFor(o)})).next((function(){return i}))},e.prototype.forEachTarget=function(e,t){return Yr(e).$t((function(e,n){var r=Sr(n);t(r)}))},e.prototype.Xt=function(e){return Xr(e).get(Xn.key).next((function(e){return g(null!==e),e}))},e.prototype.Zt=function(e,t){return Xr(e).put(Xn.key,t)},e.prototype.te=function(e,t){return Yr(e).put(Mr(this.R,t))},e.prototype.ee=function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n},e.prototype.getTargetCount=function(e){return this.Xt(e).next((function(e){return e.targetCount}))},e.prototype.getTargetData=function(e,t){var n=he(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Yr(e).$t({range:r,index:qn.queryTargetsIndexName},(function(e,n,r){var o=Sr(n);fe(t,o.target)&&(i=o,r.done())})).next((function(){return i}))},e.prototype.addMatchingKeys=function(e,t,n){var r=this,i=[],o=Qr(e);return t.forEach((function(t){var a=Dn(t.path);i.push(o.put(new Yn(n,a))),i.push(r.referenceDelegate.addReference(e,n,t))})),rr.waitFor(i)},e.prototype.removeMatchingKeys=function(e,t,n){var r=this,i=Qr(e);return rr.forEach(t,(function(t){var o=Dn(t.path);return rr.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(e,n,t)])}))},e.prototype.removeMatchingKeysForTargetId=function(e,t){var n=Qr(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)},e.prototype.getMatchingKeysForTargetId=function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Qr(e),i=jt();return r.$t({range:n,Ft:!0},(function(e,t,n){var r=Bn(e[1]),o=new W(r);i=i.add(o)})).next((function(){return i}))},e.prototype.containsKey=function(e,t){var n=Dn(t.path),r=IDBKeyRange.bound([n],[_(n)],!1,!0),i=0;return Qr(e).$t({index:Yn.documentTargetsIndex,Ft:!0,range:r},(function(e,t,n){var r=e[0];e[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},e.prototype.lt=function(e,t){return Yr(e).get(t).next((function(e){return e?Sr(e):null}))},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yr(e){return pr(e,qn.store)}function Xr(e){return pr(e,Xn.store)}function Qr(e){return pr(e,Yn.store)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kr(e){return Object(r["a"])(this,void 0,void 0,(function(){return Object(r["c"])(this,(function(t){if(e.code!==c.FAILED_PRECONDITION||e.message!==er)throw e;return f("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jr(e,t){var n=e[0],r=e[1],i=t[0],o=t[1],a=E(n,i);return 0===a?E(r,o):a}var Zr=function(){function e(e){this.ne=e,this.buffer=new Lt(Jr),this.se=0}return e.prototype.ie=function(){return++this.se},e.prototype.re=function(e){var t=[e,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();Jr(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}},Object.defineProperty(e.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),e}(),$r=function(){function e(e,t){this.garbageCollector=e,this.asyncQueue=t,this.oe=!1,this.ce=null}return e.prototype.start=function(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(e)},e.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(e.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),e.prototype.ue=function(e){var t=this,n=this.oe?3e5:6e4;f("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,(function(){return Object(r["a"])(t,void 0,void 0,(function(){var t;return Object(r["c"])(this,(function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,e.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return cr(t=n.sent())?(f("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t),[3,6]):[3,4];case 4:return[4,Kr(t)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(e)];case 8:return n.sent(),[2]}}))}))}))},e}(),ei=function(){function e(e,t){this.ae=e,this.params=t}return e.prototype.calculateTargetCount=function(e,t){return this.ae.he(e).next((function(e){return Math.floor(t/100*e)}))},e.prototype.nthSequenceNumber=function(e,t){var n=this;if(0===t)return rr.resolve(s.o);var r=new Zr(t);return this.ae.forEachTarget(e,(function(e){return r.re(e.sequenceNumber)})).next((function(){return n.ae.le(e,(function(e){return r.re(e)}))})).next((function(){return r.maxValue}))},e.prototype.removeTargets=function(e,t,n){return this.ae.removeTargets(e,t,n)},e.prototype.removeOrphanedDocuments=function(e,t){return this.ae.removeOrphanedDocuments(e,t)},e.prototype.collect=function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(f("LruGarbageCollector","Garbage collection skipped; disabled"),rr.resolve(Br)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(f("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),Br):n.fe(e,t)}))},e.prototype.getCacheSize=function(e){return this.ae.getCacheSize(e)},e.prototype.fe=function(e,t){var n,r,i,a,s,c,u,l=this,d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>l.params.maximumSequenceNumbersToCollect?(f("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+l.params.maximumSequenceNumbersToCollect+" from "+t),r=l.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),l.nthSequenceNumber(e,r)})).next((function(r){return n=r,s=Date.now(),l.removeTargets(e,n,t)})).next((function(t){return i=t,c=Date.now(),l.removeOrphanedDocuments(e,n)})).next((function(e){return u=Date.now(),h()<=o["a"].DEBUG&&f("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(a-d)+"ms\n\tDetermined least recently used "+r+" in "+(s-a)+"ms\n\tRemoved "+i+" targets in "+(c-s)+"ms\n\tRemoved "+e+" documents in "+(u-c)+"ms\nTotal Duration: "+(u-d)+"ms"),rr.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))},e}(),ti=function(){function e(e,t){this.db=e,this.garbageCollector=function(e,t){return new ei(e,t)}(this,t)}return e.prototype.he=function(e){var t=this.de(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))},e.prototype.de=function(e){var t=0;return this.le(e,(function(e){t++})).next((function(){return t}))},e.prototype.forEachTarget=function(e,t){return this.db.getTargetCache().forEachTarget(e,t)},e.prototype.le=function(e,t){return this.we(e,(function(e,n){return t(n)}))},e.prototype.addReference=function(e,t,n){return ni(e,n)},e.prototype.removeReference=function(e,t,n){return ni(e,n)},e.prototype.removeTargets=function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)},e.prototype.markPotentiallyOrphaned=function(e,t){return ni(e,t)},e.prototype._e=function(e,t){return function(e,t){var n=!1;return zr(e).Ot((function(r){return jr(e,r,t).next((function(e){return e&&(n=!0),rr.resolve(!e)}))})).next((function(){return n}))}(e,t)},e.prototype.removeOrphanedDocuments=function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(e,(function(a,s){if(s<=t){var c=n._e(e,a).next((function(t){if(!t)return o++,r.getEntry(e,a).next((function(){return r.removeEntry(a),Qr(e).delete([0,Dn(a.path)])}))}));i.push(c)}})).next((function(){return rr.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return o}))},e.prototype.removeTarget=function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)},e.prototype.updateLimboDocument=function(e,t){return ni(e,t)},e.prototype.we=function(e,t){var n,r=Qr(e),i=s.o;return r.$t({index:Yn.documentTargetsIndex},(function(e,r){var o=e[0];e[1];var a=r.path,c=r.sequenceNumber;0===o?(i!==s.o&&t(new W(Bn(n)),i),i=c,n=a):i=s.o})).next((function(){i!==s.o&&t(new W(Bn(n)),i)}))},e.prototype.getCacheSize=function(e){return this.db.getRemoteDocumentCache().getSize(e)},e}();function ni(e,t){return Qr(e).put(function(e,t){return new Yn(0,Dn(e.path),t)}(t,e.currentSequenceNumber))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ri=function(){function e(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={}}return e.prototype.get=function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];if(this.equalsFn(a,e))return s}},e.prototype.has=function(e){return void 0!==this.get(e)},e.prototype.set=function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t])}else this.inner[n]=[[e,t]]},e.prototype.delete=function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),!0;return!1},e.prototype.forEach=function(e){M(this.inner,(function(t,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];e(a,s)}}))},e.prototype.isEmpty=function(){return O(this.inner)},e}(),ii=function(){function e(){this.changes=new ri((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return e.prototype.getReadTime=function(e){var t=this.changes.get(e);return t?t.readTime:A.min()},e.prototype.addEntry=function(e,t){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:t})},e.prototype.removeEntry=function(e,t){void 0===t&&(t=null),this.assertNotApplied(),this.changes.set(e,{document:ce.newInvalidDocument(e),readTime:t})},e.prototype.getEntry=function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?rr.resolve(n.document):this.getFromCache(e,t)},e.prototype.getEntries=function(e,t){return this.getAllFromCache(e,t)},e.prototype.apply=function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)},e.prototype.assertNotApplied=function(){},e}(),oi=function(){function e(e,t){this.R=e,this.Ut=t}return e.prototype.addEntry=function(e,t,n){return ci(e).put(ui(t),n)},e.prototype.removeEntry=function(e,t){var n=ci(e),r=ui(t);return n.delete(r)},e.prototype.updateMetadata=function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.me(e,r)}))},e.prototype.getEntry=function(e,t){var n=this;return ci(e).get(ui(t)).next((function(e){return n.ye(t,e)}))},e.prototype.ge=function(e,t){var n=this;return ci(e).get(ui(t)).next((function(e){return{document:n.ye(t,e),size:Ur(e)}}))},e.prototype.getEntries=function(e,t){var n=this,r=Nt();return this.pe(e,t,(function(e,t){var i=n.ye(e,t);r=r.insert(e,i)})).next((function(){return r}))},e.prototype.Ee=function(e,t){var n=this,r=Nt(),i=new Rt(W.comparator);return this.pe(e,t,(function(e,t){var o=n.ye(e,t);r=r.insert(e,o),i=i.insert(e,Ur(t))})).next((function(){return{documents:r,Te:i}}))},e.prototype.pe=function(e,t,n){if(t.isEmpty())return rr.resolve();var r=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),i=t.getIterator(),o=i.getNext();return ci(e).$t({range:r},(function(e,t,r){for(var a=W.fromSegments(e);o&&W.comparator(o,a)<0;)n(o,null),o=i.getNext();o&&o.isEqual(a)&&(n(o,t),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()})).next((function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null}))},e.prototype.getDocumentsMatchingQuery=function(e,t,n){var r=this,i=Nt(),o=t.path.length+1,a={};if(n.isEqual(A.min())){var s=t.path.toArray();a.range=IDBKeyRange.lowerBound(s)}else{var c=t.path.toArray(),u=Er(n);a.range=IDBKeyRange.lowerBound([c,u],!0),a.index=zn.collectionReadTimeIndex}return ci(e).$t(a,(function(e,n,a){if(e.length===o){var s=br(r.R,n);t.path.isPrefixOf(s.key.path)?Ve(t,s)&&(i=i.insert(s.key,s)):a.done()}})).next((function(){return i}))},e.prototype.newChangeBuffer=function(e){return new ai(this,!!e&&e.trackRemovals)},e.prototype.getSize=function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))},e.prototype.getMetadata=function(e){return si(e).get(Wn.key).next((function(e){return g(!!e),e}))},e.prototype.me=function(e,t){return si(e).put(Wn.key,t)},e.prototype.ye=function(e,t){if(t){var n=br(this.R,t);if(!n.isNoDocument()||!n.version.isEqual(A.min()))return n}return ce.newInvalidDocument(e)},e}(),ai=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).Ie=t,r.trackRemovals=n,r.Ae=new ri((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),r}return Object(r["b"])(t,e),t.prototype.applyChanges=function(e){var t=this,n=[],r=0,i=new Lt((function(e,t){return E(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(o,a){var s=t.Ae.get(o);if(a.document.isValidDocument()){var c=wr(t.Ie.R,a.document,t.getReadTime(o));i=i.add(o.path.popLast());var u=Ur(c);r+=u-s,n.push(t.Ie.addEntry(e,o,c))}else if(r-=s,t.trackRemovals){var l=wr(t.Ie.R,ce.newNoDocument(o,A.min()),t.getReadTime(o));n.push(t.Ie.addEntry(e,o,l))}else n.push(t.Ie.removeEntry(e,o))})),i.forEach((function(r){n.push(t.Ie.Ut.addToCollectionParentIndex(e,r))})),n.push(this.Ie.updateMetadata(e,r)),rr.waitFor(n)},t.prototype.getFromCache=function(e,t){var n=this;return this.Ie.ge(e,t).next((function(e){return n.Ae.set(t,e.size),e.document}))},t.prototype.getAllFromCache=function(e,t){var n=this;return this.Ie.Ee(e,t).next((function(e){var t=e.documents;return e.Te.forEach((function(e,t){n.Ae.set(e,t)})),t}))},t}(ii);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function si(e){return pr(e,Wn.store)}function ci(e){return pr(e,zn.store)}function ui(e){return e.path.toArray()}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var li=function(){function e(e){this.R=e}return e.prototype.Rt=function(e,t,n,r){var i=this;g(n<r&&n>=0&&r<=11);var o=new ir("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore(Fn.store)}(e),function(e){e.createObjectStore(Un.store,{keyPath:Un.keyPath}),e.createObjectStore(Hn.store,{keyPath:Hn.keyPath,autoIncrement:!0}).createIndex(Hn.userMutationsIndex,Hn.userMutationsKeyPath,{unique:!0}),e.createObjectStore(jn.store)}(e),hi(e),function(e){e.createObjectStore(zn.store)}(e));var a=rr.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore(Yn.store),e.deleteObjectStore(qn.store),e.deleteObjectStore(Xn.store)}(e),hi(e)),a=a.next((function(){return function(e){var t=e.store(Xn.store),n=new Xn(0,0,A.min().toTimestamp(),0);return t.put(Xn.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(a=a.next((function(){return function(e,t){return t.store(Hn.store).Nt().next((function(n){e.deleteObjectStore(Hn.store),e.createObjectStore(Hn.store,{keyPath:Hn.keyPath,autoIncrement:!0}).createIndex(Hn.userMutationsIndex,Hn.userMutationsKeyPath,{unique:!0});var r=t.store(Hn.store),i=n.map((function(e){return r.put(e)}));return rr.waitFor(i)}))}(e,o)}))),a=a.next((function(){!function(e){e.createObjectStore(Kn.store,{keyPath:Kn.keyPath})}(e)}))),n<5&&r>=5&&(a=a.next((function(){return i.Re(o)}))),n<6&&r>=6&&(a=a.next((function(){return function(e){e.createObjectStore(Wn.store)}(e),i.be(o)}))),n<7&&r>=7&&(a=a.next((function(){return i.ve(o)}))),n<8&&r>=8&&(a=a.next((function(){return i.Pe(e,o)}))),n<9&&r>=9&&(a=a.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e),function(e){var t=e.objectStore(zn.store);t.createIndex(zn.readTimeIndex,zn.readTimeIndexPath,{unique:!1}),t.createIndex(zn.collectionReadTimeIndex,zn.collectionReadTimeIndexPath,{unique:!1})}(t)}))),n<10&&r>=10&&(a=a.next((function(){return i.Ve(o)}))),n<11&&r>=11&&(a=a.next((function(){!function(e){e.createObjectStore(Jn.store,{keyPath:Jn.keyPath})}(e),function(e){e.createObjectStore(Zn.store,{keyPath:Zn.keyPath})}(e)}))),a},e.prototype.be=function(e){var t=0;return e.store(zn.store).$t((function(e,n){t+=Ur(n)})).next((function(){var n=new Wn(t);return e.store(Wn.store).put(Wn.key,n)}))},e.prototype.Re=function(e){var t=this,n=e.store(Un.store),r=e.store(Hn.store);return n.Nt().next((function(n){return rr.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(Hn.userMutationsIndex,i).next((function(r){return rr.forEach(r,(function(r){g(r.userId===n.userId);var i=Ar(t.R,r);return Fr(e,n.userId,i).next((function(){}))}))}))}))}))},e.prototype.ve=function(e){var t=e.store(Yn.store),n=e.store(zn.store);return e.store(Xn.store).get(Xn.key).next((function(e){var r=[];return n.$t((function(n,i){var o=new C(n),a=function(e){return[0,Dn(e)]}(o);r.push(t.get(a).next((function(n){return n?rr.resolve():function(n){return t.put(new Yn(0,Dn(n),e.highestListenSequenceNumber))}(o)})))})).next((function(){return rr.waitFor(r)}))}))},e.prototype.Pe=function(e,t){e.createObjectStore(Qn.store,{keyPath:Qn.keyPath});var n=t.store(Qn.store),r=new Dr,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:Dn(i)})}};return t.store(zn.store).$t({Ft:!0},(function(e,t){var n=new C(e);return i(n.popLast())})).next((function(){return t.store(jn.store).$t({Ft:!0},(function(e,t){e[0];var n=e[1];e[2];var r=Bn(n);return i(r.popLast())}))}))},e.prototype.Ve=function(e){var t=this,n=e.store(qn.store);return n.$t((function(e,r){var i=Sr(r),o=Mr(t.R,i);return n.put(o)}))},e}();function hi(e){e.createObjectStore(Yn.store,{keyPath:Yn.keyPath}).createIndex(Yn.documentTargetsIndex,Yn.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(qn.store,{keyPath:qn.keyPath}).createIndex(qn.queryTargetsIndexName,qn.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(Xn.store)}var fi="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",di=function(){function e(t,n,r,i,o,a,s,l,h,f){if(this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=a,this.document=s,this.De=h,this.Ce=f,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ke=null,this.inForeground=!1,this.Fe=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(e){return Promise.resolve()},!e.yt())throw new u(c.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new ti(this,i),this.Le=n+"main",this.R=new yr(l),this.Be=new or(this.Le,11,new li(this.R)),this.qe=new qr(this.referenceDelegate,this.R),this.Ut=new Pr,this.Ue=function(e,t){return new oi(e,t)}(this.R,this.Ut),this.Ke=new Rr,this.window&&this.window.localStorage?this.Qe=this.window.localStorage:(this.Qe=null,!1===f&&d("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return e.prototype.start=function(){var e=this;return this.je().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new u(c.FAILED_PRECONDITION,fi);return e.We(),e.Ge(),e.ze(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.qe.getHighestSequenceNumber(t)}))})).then((function(t){e.Ne=new s(t,e.De)})).then((function(){e.xe=!0})).catch((function(t){return e.Be&&e.Be.close(),Promise.reject(t)}))},e.prototype.He=function(e){var t=this;return this.Me=function(n){return Object(r["a"])(t,void 0,void 0,(function(){return Object(r["c"])(this,(function(t){return this.started?[2,e(n)]:[2]}))}))},e(this.isPrimary)},e.prototype.setDatabaseDeletedListener=function(e){var t=this;this.Be.vt((function(n){return Object(r["a"])(t,void 0,void 0,(function(){return Object(r["c"])(this,(function(t){switch(t.label){case 0:return null===n.newVersion?[4,e()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))},e.prototype.setNetworkEnabled=function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Se.enqueueAndForget((function(){return Object(r["a"])(t,void 0,void 0,(function(){return Object(r["c"])(this,(function(e){switch(e.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))})))},e.prototype.je=function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return mi(t).put(new Kn(e.clientId,Date.now(),e.networkEnabled,e.inForeground)).next((function(){if(e.isPrimary)return e.Je(t).next((function(t){t||(e.isPrimary=!1,e.Se.enqueueRetryable((function(){return e.Me(!1)})))}))})).next((function(){return e.Ye(t)})).next((function(n){return e.isPrimary&&!n?e.Xe(t).next((function(){return!1})):!!n&&e.Ze(t).next((function(){return!0}))}))})).catch((function(t){if(cr(t))return f("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return f("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.Se.enqueueRetryable((function(){return e.Me(t)})),e.isPrimary=t}))},e.prototype.Je=function(e){var t=this;return pi(e).get(Fn.key).next((function(e){return rr.resolve(t.tn(e))}))},e.prototype.en=function(e){return mi(e).delete(this.clientId)},e.prototype.nn=function(){return Object(r["a"])(this,void 0,void 0,(function(){var e,t,n,i,o=this;return Object(r["c"])(this,(function(r){switch(r.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=pr(e,Kn.store);return t.Nt().next((function(e){var n=o.rn(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return rr.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(e=r.sent(),this.Qe)for(t=0,n=e;t<n.length;t++)i=n[t],this.Qe.removeItem(this.on(i.clientId));r.label=2;case 2:return[2]}}))}))},e.prototype.ze=function(){var e=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.je().then((function(){return e.nn()})).then((function(){return e.ze()}))}))},e.prototype.tn=function(e){return!!e&&e.ownerId===this.clientId},e.prototype.Ye=function(e){var t=this;return this.Ce?rr.resolve(!0):pi(e).get(Fn.key).next((function(n){if(null!==n&&t.sn(n.leaseTimestampMs,5e3)&&!t.cn(n.ownerId)){if(t.tn(n)&&t.networkEnabled)return!0;if(!t.tn(n)){if(!n.allowTabSynchronization)throw new u(c.FAILED_PRECONDITION,fi);return!1}}return!(!t.networkEnabled||!t.inForeground)||mi(e).Nt().next((function(e){return void 0===t.rn(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&f("IndexedDbPersistence","Client "+(e?"is":"is not")+" eligible for a primary lease."),e}))},e.prototype.shutdown=function(){return Object(r["a"])(this,void 0,void 0,(function(){var e=this;return Object(r["c"])(this,(function(t){switch(t.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[Fn.store,Kn.store],(function(t){var n=new dr(t,s.o);return e.Xe(n).next((function(){return e.en(n)}))}))];case 1:return t.sent(),this.Be.close(),this.ln(),[2]}}))}))},e.prototype.rn=function(e,t){var n=this;return e.filter((function(e){return n.sn(e.updateTimeMs,t)&&!n.cn(e.clientId)}))},e.prototype.fn=function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return mi(t).Nt().next((function(t){return e.rn(t,18e5).map((function(e){return e.clientId}))}))}))},Object.defineProperty(e.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),e.prototype.getMutationQueue=function(e){return Hr.Qt(e,this.R,this.Ut,this.referenceDelegate)},e.prototype.getTargetCache=function(){return this.qe},e.prototype.getRemoteDocumentCache=function(){return this.Ue},e.prototype.getIndexManager=function(){return this.Ut},e.prototype.getBundleCache=function(){return this.Ke},e.prototype.runTransaction=function(e,t,n){var r=this;f("IndexedDbPersistence","Starting transaction:",e);var i,o="readonly"===t?"readonly":"readwrite";return this.Be.runTransaction(e,o,$n,(function(o){return i=new dr(o,r.Ne?r.Ne.next():s.o),"readwrite-primary"===t?r.Je(i).next((function(e){return!!e||r.Ye(i)})).next((function(t){if(!t)throw d("Failed to obtain primary lease for action '"+e+"'."),r.isPrimary=!1,r.Se.enqueueRetryable((function(){return r.Me(!1)})),new u(c.FAILED_PRECONDITION,er);return n(i)})).next((function(e){return r.Ze(i).next((function(){return e}))})):r.dn(i).next((function(){return n(i)}))})).then((function(e){return i.raiseOnCommittedEvent(),e}))},e.prototype.dn=function(e){var t=this;return pi(e).get(Fn.key).next((function(e){if(null!==e&&t.sn(e.leaseTimestampMs,5e3)&&!t.cn(e.ownerId)&&!t.tn(e)&&!(t.Ce||t.allowTabSynchronization&&e.allowTabSynchronization))throw new u(c.FAILED_PRECONDITION,fi)}))},e.prototype.Ze=function(e){var t=new Fn(this.clientId,this.allowTabSynchronization,Date.now());return pi(e).put(Fn.key,t)},e.yt=function(){return or.yt()},e.prototype.Xe=function(e){var t=this,n=pi(e);return n.get(Fn.key).next((function(e){return t.tn(e)?(f("IndexedDbPersistence","Releasing primary lease."),n.delete(Fn.key)):rr.resolve()}))},e.prototype.sn=function(e,t){var n=Date.now();return!(e<n-t||e>n&&(d("Detected an update time that is in the future: "+e+" > "+n),1))},e.prototype.We=function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Fe=function(){e.Se.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.je()}))},this.document.addEventListener("visibilitychange",this.Fe),this.inForeground="visible"===this.document.visibilityState)},e.prototype.an=function(){this.Fe&&(this.document.removeEventListener("visibilitychange",this.Fe),this.Fe=null)},e.prototype.Ge=function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ke=function(){t.un(),Object(i["r"])()&&navigator.appVersion.match("Version/14")&&t.Se.enterRestrictedMode(!0),t.Se.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.ke))},e.prototype.hn=function(){this.ke&&(this.window.removeEventListener("pagehide",this.ke),this.ke=null)},e.prototype.cn=function(e){var t;try{var n=null!==(null===(t=this.Qe)||void 0===t?void 0:t.getItem(this.on(e)));return f("IndexedDbPersistence","Client '"+e+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(e){return d("IndexedDbPersistence","Failed to get zombied client id.",e),!1}},e.prototype.un=function(){if(this.Qe)try{this.Qe.setItem(this.on(this.clientId),String(Date.now()))}catch(e){d("Failed to set zombie client id.",e)}},e.prototype.ln=function(){if(this.Qe)try{this.Qe.removeItem(this.on(this.clientId))}catch(e){}},e.prototype.on=function(e){return"firestore_zombie_"+this.persistenceKey+"_"+e},e}();function pi(e){return pr(e,Fn.store)}function mi(e){return pr(e,Kn.store)}function vi(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var gi=function(e,t){this.progress=e,this.wn=t},yi=function(){function e(e,t,n){this.Ue=e,this._n=t,this.Ut=n}return e.prototype.mn=function(e,t){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(e,t).next((function(r){return n.yn(e,t,r)}))},e.prototype.yn=function(e,t,n){return this.Ue.getEntry(e,t).next((function(e){for(var t=0,r=n;t<r.length;t++)r[t].applyToLocalView(e);return e}))},e.prototype.gn=function(e,t){e.forEach((function(e,n){for(var r=0,i=t;r<i.length;r++)i[r].applyToLocalView(n)}))},e.prototype.pn=function(e,t){var n=this;return this.Ue.getEntries(e,t).next((function(t){return n.En(e,t).next((function(){return t}))}))},e.prototype.En=function(e,t){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){return n.gn(t,e)}))},e.prototype.getDocumentsMatchingQuery=function(e,t,n){return function(e){return W.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.Tn(e,t.path):Be(t)?this.In(e,t,n):this.An(e,t,n)},e.prototype.Tn=function(e,t){return this.mn(e,new W(t)).next((function(e){var t=kt();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))},e.prototype.In=function(e,t,n){var r=this,i=t.collectionGroup,o=kt();return this.Ut.getCollectionParents(e,i).next((function(a){return rr.forEach(a,(function(a){var s=function(e,t){return new Re(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,a.child(i));return r.An(e,s,n).next((function(e){e.forEach((function(e,t){o=o.insert(e,t)}))}))})).next((function(){return o}))}))},e.prototype.An=function(e,t,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(e,t,n).next((function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(e,t)})).next((function(t){return i=t,o.Rn(e,i,r).next((function(e){r=e;for(var t=0,n=i;t<n.length;t++)for(var o=n[t],a=0,s=o.mutations;a<s.length;a++){var c=s[a],u=c.key,l=r.get(u);null==l&&(l=ce.newInvalidDocument(u),r=r.insert(u,l)),dt(c,l,o.localWriteTime),l.isFoundDocument()||(r=r.remove(u))}}))})).next((function(){return r.forEach((function(e,n){Ve(t,n)||(r=r.remove(e))})),r}))},e.prototype.Rn=function(e,t,n){for(var r=jt(),i=0,o=t;i<o.length;i++)for(var a=0,s=o[i].mutations;a<s.length;a++){var c=s[a];c instanceof yt&&null===n.get(c.key)&&(r=r.add(c.key))}var u=n;return this.Ue.getEntries(e,r).next((function(e){return e.forEach((function(e,t){t.isFoundDocument()&&(u=u.insert(e,t))})),u}))},e}(),bi=function(){function e(e,t,n,r){this.targetId=e,this.fromCache=t,this.bn=n,this.vn=r}return e.Pn=function(t,n){for(var r=jt(),i=jt(),o=0,a=n.docChanges;o<a.length;o++){var s=a[o];switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}}return new e(t,n.fromCache,r,i)},e}(),wi=function(){function e(){}return e.prototype.Vn=function(e){this.Sn=e},e.prototype.getDocumentsMatchingQuery=function(e,t,n,r){var i=this;return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||n.isEqual(A.min())?this.Dn(e,t):this.Sn.pn(e,r).next((function(a){var s=i.Cn(t,a);return(Le(t)||De(t))&&i.Nn(t.limitType,s,r,n)?i.Dn(e,t):(h()<=o["a"].DEBUG&&f("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Ge(t)),i.Sn.getDocumentsMatchingQuery(e,t,n).next((function(e){return s.forEach((function(t){e=e.insert(t.key,t)})),e})))}))},e.prototype.Cn=function(e,t){var n=new Lt(ze(e));return t.forEach((function(t,r){Ve(e,r)&&(n=n.add(r))})),n},e.prototype.Nn=function(e,t,n,r){if(n.size!==t.size)return!0;var i="F"===e?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},e.prototype.Dn=function(e,t){return h()<=o["a"].DEBUG&&f("QueryEngine","Using full collection scan to execute query:",Ge(t)),this.Sn.getDocumentsMatchingQuery(e,t,A.min())},e}(),Ei=function(){function e(e,t,n,r){this.persistence=e,this.xn=t,this.R=r,this.kn=new Rt(E),this.Fn=new ri((function(e){return he(e)}),fe),this.$n=A.min(),this._n=e.getMutationQueue(n),this.On=e.getRemoteDocumentCache(),this.qe=e.getTargetCache(),this.Mn=new yi(this.On,this._n,this.persistence.getIndexManager()),this.Ke=e.getBundleCache(),this.xn.Vn(this.Mn)}return e.prototype.collectGarbage=function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.kn)}))},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xi(e,t,n,r){return new Ei(e,t,n,r)}function _i(e,t){return Object(r["a"])(this,void 0,void 0,(function(){var n,i,o,a;return Object(r["c"])(this,(function(r){switch(r.label){case 0:return n=y(e),i=n._n,o=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",(function(e){var r;return n._n.getAllMutationBatches(e).next((function(a){return r=a,i=n.persistence.getMutationQueue(t),o=new yi(n.On,i,n.persistence.getIndexManager()),i.getAllMutationBatches(e)})).next((function(t){for(var n=[],i=[],a=jt(),s=0,c=r;s<c.length;s++){var u=c[s];n.push(u.batchId);for(var l=0,h=u.mutations;l<h.length;l++){var f=h[l];a=a.add(f.key)}}for(var d=0,p=t;d<p.length;d++){var m=p[d];i.push(m.batchId);for(var v=0,g=m.mutations;v<g.length;v++){var y=g[v];a=a.add(y.key)}}return o.pn(e,a).next((function(e){return{Ln:e,removedBatchIds:n,addedBatchIds:i}}))}))}))];case 1:return a=r.sent(),[2,(n._n=i,n.Mn=o,n.xn.Vn(n.Mn),a)]}}))}))}function Ti(e,t){var n=y(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.On.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,o=i.keys(),a=rr.resolve();return o.forEach((function(e){a=a.next((function(){return r.getEntry(t,e)})).next((function(t){var o=n.docVersions.get(e);g(null!==o),t.version.compareTo(o)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&r.addEntry(t,n.commitVersion))}))})),a.next((function(){return e._n.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n._n.performConsistencyCheck(e)})).next((function(){return n.Mn.pn(e,r)}))}))}function Ai(e){var t=y(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.qe.getLastRemoteSnapshotVersion(e)}))}function Si(e,t){var n=y(e),r=t.snapshotVersion,i=n.kn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var o=n.On.newChangeBuffer({trackRemovals:!0});i=n.kn;var a=[];t.targetChanges.forEach((function(t,o){var s=i.get(o);if(s){a.push(n.qe.removeMatchingKeys(e,t.removedDocuments,o).next((function(){return n.qe.addMatchingKeys(e,t.addedDocuments,o)})));var c=t.resumeToken;if(c.approximateByteSize()>0){var u=s.withResumeToken(c,r).withSequenceNumber(e.currentSequenceNumber);i=i.insert(o,u),function(e,t,n){return g(t.resumeToken.approximateByteSize()>0),0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(s,u,t)&&a.push(n.qe.updateTargetData(e,u))}}}));var s=Nt();if(t.documentUpdates.forEach((function(r,i){t.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),a.push(Mi(e,o,t.documentUpdates,r,void 0).next((function(e){s=e}))),!r.isEqual(A.min())){var c=n.qe.getLastRemoteSnapshotVersion(e).next((function(t){return n.qe.setTargetsMetadata(e,e.currentSequenceNumber,r)}));a.push(c)}return rr.waitFor(a).next((function(){return o.apply(e)})).next((function(){return n.Mn.En(e,s)})).next((function(){return s}))})).then((function(e){return n.kn=i,e}))}function Mi(e,t,n,r,i){var o=jt();return n.forEach((function(e){return o=o.add(e)})),t.getEntries(e,o).next((function(e){var o=Nt();return n.forEach((function(n,a){var s=e.get(n),c=(null==i?void 0:i.get(n))||r;a.isNoDocument()&&a.version.isEqual(A.min())?(t.removeEntry(n,c),o=o.insert(n,a)):!s.isValidDocument()||a.version.compareTo(s.version)>0||0===a.version.compareTo(s.version)&&s.hasPendingWrites?(t.addEntry(a,c),o=o.insert(n,a)):f("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",a.version)})),o}))}function Oi(e,t){var n=y(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n._n.getNextMutationBatchAfterBatchId(e,t)}))}function Ri(e,t){var n=y(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.qe.getTargetData(e,t).next((function(i){return i?(r=i,rr.resolve(r)):n.qe.allocateTargetId(e).next((function(i){return r=new gr(t,i,0,e.currentSequenceNumber),n.qe.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.kn.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.kn=n.kn.insert(e.targetId,e),n.Fn.set(t,e.targetId)),e}))}function Ci(e,t,n){return Object(r["a"])(this,void 0,void 0,(function(){var i,o,a,s;return Object(r["c"])(this,(function(r){switch(r.label){case 0:i=y(e),o=i.kn.get(t),a=n?"readwrite":"readwrite-primary",r.label=1;case 1:return r.trys.push([1,4,,5]),n?[3,3]:[4,i.persistence.runTransaction("Release target",a,(function(e){return i.persistence.referenceDelegate.removeTarget(e,o)}))];case 2:r.sent(),r.label=3;case 3:return[3,5];case 4:if(!cr(s=r.sent()))throw s;return f("LocalStore","Failed to update sequence numbers for target "+t+": "+s),[3,5];case 5:return i.kn=i.kn.remove(t),i.Fn.delete(o.target),[2]}}))}))}function Ii(e,t,n){var r=y(e),i=A.min(),o=jt();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=y(e),i=r.Fn.get(n);return void 0!==i?rr.resolve(r.kn.get(i)):r.qe.getTargetData(t,n)}(r,e,Fe(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(e,t.targetId).next((function(e){o=e}))})).next((function(){return r.xn.getDocumentsMatchingQuery(e,t,n?i:A.min(),n?o:jt())})).next((function(e){return{documents:e,Bn:o}}))}))}function Li(e,t){var n=y(e),r=y(n.qe),i=n.kn.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.lt(e,t).next((function(e){return e?e.target:null}))}))}function Di(e){var t=y(e);return t.persistence.runTransaction("Get new document changes","readonly",(function(e){return function(e,t,n){var r=y(e),i=Nt(),o=Er(n),a=ci(t),s=IDBKeyRange.lowerBound(o,!0);return a.$t({index:zn.readTimeIndex,range:s},(function(e,t){var n=br(r.R,t);i=i.insert(n.key,n),o=t.readTime})).next((function(){return{wn:i,readTime:xr(o)}}))}(t.On,e,t.$n)})).then((function(e){var n=e.wn,r=e.readTime;return t.$n=r,n}))}function Pi(e){return Object(r["a"])(this,void 0,void 0,(function(){var t;return Object(r["c"])(this,(function(n){return[2,(t=y(e)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(e){return function(e){var t=ci(e),n=A.min();return t.$t({index:zn.readTimeIndex,reverse:!0},(function(e,t,r){t.readTime&&(n=xr(t.readTime)),r.done()})).next((function(){return n}))}(e)})).then((function(e){t.$n=e}))]}))}))}function Ni(e,t,n,i){return Object(r["a"])(this,void 0,void 0,(function(){var o,a,s,c,u,l,h,f,d,p;return Object(r["c"])(this,(function(r){switch(r.label){case 0:for(o=y(e),a=jt(),s=Nt(),c=Ut(),u=0,l=n;u<l.length;u++)h=l[u],f=t.qn(h.metadata.name),h.document&&(a=a.add(f)),s=s.insert(f,t.Un(h)),c=c.insert(f,t.Kn(h.metadata.readTime));return d=o.On.newChangeBuffer({trackRemovals:!0}),[4,Ri(o,function(e){return Fe(Ie(C.fromString("__bundle__/docs/"+e)))}(i))];case 1:return p=r.sent(),[2,o.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return Mi(e,d,s,A.min(),c).next((function(t){return d.apply(e),t})).next((function(t){return o.qe.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return o.qe.addMatchingKeys(e,a,p.targetId)})).next((function(){return o.Mn.En(e,t)})).next((function(){return t}))}))}))]}}))}))}function Bi(e,t,n){return void 0===n&&(n=jt()),Object(r["a"])(this,void 0,void 0,(function(){var i,o;return Object(r["c"])(this,(function(r){switch(r.label){case 0:return[4,Ri(e,Fe(Or(t.bundledQuery)))];case 1:return i=r.sent(),[2,(o=y(e)).persistence.runTransaction("Save named query","readwrite",(function(e){var r=an(t.readTime);if(i.snapshotVersion.compareTo(r)>=0)return o.Ke.saveNamedQuery(e,t);var a=i.withResumeToken(P.EMPTY_BYTE_STRING,r);return o.kn=o.kn.insert(a.targetId,a),o.qe.updateTargetData(e,a).next((function(){return o.qe.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return o.qe.addMatchingKeys(e,n,i.targetId)})).next((function(){return o.Ke.saveNamedQuery(e,t)}))}))]}}))}))
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var ki=function(){function e(e){this.R=e,this.Qn=new Map,this.jn=new Map}return e.prototype.getBundleMetadata=function(e,t){return rr.resolve(this.Qn.get(t))},e.prototype.saveBundleMetadata=function(e,t){var n;return this.Qn.set(t.id,{id:(n=t).id,version:n.version,createTime:an(n.createTime)}),rr.resolve()},e.prototype.getNamedQuery=function(e,t){return rr.resolve(this.jn.get(t))},e.prototype.saveNamedQuery=function(e,t){return this.jn.set(t.name,function(e){return{name:e.name,query:Or(e.bundledQuery),readTime:an(e.readTime)}}(t)),rr.resolve()},e}(),Fi=function(){function e(){this.Wn=new Lt(Ui.Gn),this.zn=new Lt(Ui.Hn)}return e.prototype.isEmpty=function(){return this.Wn.isEmpty()},e.prototype.addReference=function(e,t){var n=new Ui(e,t);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},e.prototype.Jn=function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))},e.prototype.removeReference=function(e,t){this.Yn(new Ui(e,t))},e.prototype.Xn=function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))},e.prototype.Zn=function(e){var t=this,n=new W(new C([])),r=new Ui(n,e),i=new Ui(n,e+1),o=[];return this.zn.forEachInRange([r,i],(function(e){t.Yn(e),o.push(e.key)})),o},e.prototype.ts=function(){var e=this;this.Wn.forEach((function(t){return e.Yn(t)}))},e.prototype.Yn=function(e){this.Wn=this.Wn.delete(e),this.zn=this.zn.delete(e)},e.prototype.es=function(e){var t=new W(new C([])),n=new Ui(t,e),r=new Ui(t,e+1),i=jt();return this.zn.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i},e.prototype.containsKey=function(e){var t=new Ui(e,0),n=this.Wn.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)},e}(),Ui=function(){function e(e,t){this.key=e,this.ns=t}return e.Gn=function(e,t){return W.comparator(e.key,t.key)||E(e.ns,t.ns)},e.Hn=function(e,t){return E(e.ns,t.ns)||W.comparator(e.key,t.key)},e}(),Hi=function(){function e(e,t){this.Ut=e,this.referenceDelegate=t,this._n=[],this.ss=1,this.rs=new Lt(Ui.Gn)}return e.prototype.checkEmpty=function(e){return rr.resolve(0===this._n.length)},e.prototype.addMutationBatch=function(e,t,n,r){var i=this.ss;this.ss++,this._n.length>0&&this._n[this._n.length-1];var o=new mr(i,t,n,r);this._n.push(o);for(var a=0,s=r;a<s.length;a++){var c=s[a];this.rs=this.rs.add(new Ui(c.key,i)),this.Ut.addToCollectionParentIndex(e,c.key.path.popLast())}return rr.resolve(o)},e.prototype.lookupMutationBatch=function(e,t){return rr.resolve(this.os(t))},e.prototype.getNextMutationBatchAfterBatchId=function(e,t){var n=t+1,r=this.cs(n),i=r<0?0:r;return rr.resolve(this._n.length>i?this._n[i]:null)},e.prototype.getHighestUnacknowledgedBatchId=function(){return rr.resolve(0===this._n.length?-1:this.ss-1)},e.prototype.getAllMutationBatches=function(e){return rr.resolve(this._n.slice())},e.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,t){var n=this,r=new Ui(t,0),i=new Ui(t,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],(function(e){var t=n.os(e.ns);o.push(t)})),rr.resolve(o)},e.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var n=this,r=new Lt(E);return t.forEach((function(e){var t=new Ui(e,0),i=new Ui(e,Number.POSITIVE_INFINITY);n.rs.forEachInRange([t,i],(function(e){r=r.add(e.ns)}))})),rr.resolve(this.us(r))},e.prototype.getAllMutationBatchesAffectingQuery=function(e,t){var n=t.path,r=n.length+1,i=n;W.isDocumentKey(i)||(i=i.child(""));var o=new Ui(new W(i),0),a=new Lt(E);return this.rs.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.ns)),!0)}),o),rr.resolve(this.us(a))},e.prototype.us=function(e){var t=this,n=[];return e.forEach((function(e){var r=t.os(e);null!==r&&n.push(r)})),n},e.prototype.removeMutationBatch=function(e,t){var n=this;g(0===this.hs(t.batchId,"removed")),this._n.shift();var r=this.rs;return rr.forEach(t.mutations,(function(i){var o=new Ui(i.key,t.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.rs=r}))},e.prototype.Gt=function(e){},e.prototype.containsKey=function(e,t){var n=new Ui(t,0),r=this.rs.firstAfterOrEqual(n);return rr.resolve(t.isEqual(r&&r.key))},e.prototype.performConsistencyCheck=function(e){return this._n.length,rr.resolve()},e.prototype.hs=function(e,t){return this.cs(e)},e.prototype.cs=function(e){return 0===this._n.length?0:e-this._n[0].batchId},e.prototype.os=function(e){var t=this.cs(e);return t<0||t>=this._n.length?null:this._n[t]},e}(),ji=function(){function e(e,t){this.Ut=e,this.ls=t,this.docs=new Rt(W.comparator),this.size=0}return e.prototype.addEntry=function(e,t,n){var r=t.key,i=this.docs.get(r),o=i?i.size:0,a=this.ls(t);return this.docs=this.docs.insert(r,{document:t.clone(),size:a,readTime:n}),this.size+=a-o,this.Ut.addToCollectionParentIndex(e,r.path.popLast())},e.prototype.removeEntry=function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)},e.prototype.getEntry=function(e,t){var n=this.docs.get(t);return rr.resolve(n?n.document.clone():ce.newInvalidDocument(t))},e.prototype.getEntries=function(e,t){var n=this,r=Nt();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.clone():ce.newInvalidDocument(e))})),rr.resolve(r)},e.prototype.getDocumentsMatchingQuery=function(e,t,n){for(var r=Nt(),i=new W(t.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var a=o.getNext(),s=a.key,c=a.value,u=c.document,l=c.readTime;if(!t.path.isPrefixOf(s.path))break;l.compareTo(n)<=0||Ve(t,u)&&(r=r.insert(u.key,u.clone()))}return rr.resolve(r)},e.prototype.fs=function(e,t){return rr.forEach(this.docs,(function(e){return t(e)}))},e.prototype.newChangeBuffer=function(e){return new Gi(this)},e.prototype.getSize=function(e){return rr.resolve(this.size)},e}(),Gi=function(e){function t(t){var n=this;return(n=e.call(this)||this).Ie=t,n}return Object(r["b"])(t,e),t.prototype.applyChanges=function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.document.isValidDocument()?n.push(t.Ie.addEntry(e,i.document,t.getReadTime(r))):t.Ie.removeEntry(r)})),rr.waitFor(n)},t.prototype.getFromCache=function(e,t){return this.Ie.getEntry(e,t)},t.prototype.getAllFromCache=function(e,t){return this.Ie.getEntries(e,t)},t}(ii),Vi=function(){function e(e){this.persistence=e,this.ds=new ri((function(e){return he(e)}),fe),this.lastRemoteSnapshotVersion=A.min(),this.highestTargetId=0,this.ws=0,this._s=new Fi,this.targetCount=0,this.ys=Wr.Jt()}return e.prototype.forEachTarget=function(e,t){return this.ds.forEach((function(e,n){return t(n)})),rr.resolve()},e.prototype.getLastRemoteSnapshotVersion=function(e){return rr.resolve(this.lastRemoteSnapshotVersion)},e.prototype.getHighestSequenceNumber=function(e){return rr.resolve(this.ws)},e.prototype.allocateTargetId=function(e){return this.highestTargetId=this.ys.next(),rr.resolve(this.highestTargetId)},e.prototype.setTargetsMetadata=function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.ws&&(this.ws=t),rr.resolve()},e.prototype.te=function(e){this.ds.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.ys=new Wr(t),this.highestTargetId=t),e.sequenceNumber>this.ws&&(this.ws=e.sequenceNumber)},e.prototype.addTargetData=function(e,t){return this.te(t),this.targetCount+=1,rr.resolve()},e.prototype.updateTargetData=function(e,t){return this.te(t),rr.resolve()},e.prototype.removeTargetData=function(e,t){return this.ds.delete(t.target),this._s.Zn(t.targetId),this.targetCount-=1,rr.resolve()},e.prototype.removeTargets=function(e,t,n){var r=this,i=0,o=[];return this.ds.forEach((function(a,s){s.sequenceNumber<=t&&null===n.get(s.targetId)&&(r.ds.delete(a),o.push(r.removeMatchingKeysForTargetId(e,s.targetId)),i++)})),rr.waitFor(o).next((function(){return i}))},e.prototype.getTargetCount=function(e){return rr.resolve(this.targetCount)},e.prototype.getTargetData=function(e,t){var n=this.ds.get(t)||null;return rr.resolve(n)},e.prototype.addMatchingKeys=function(e,t,n){return this._s.Jn(t,n),rr.resolve()},e.prototype.removeMatchingKeys=function(e,t,n){this._s.Xn(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),rr.waitFor(i)},e.prototype.removeMatchingKeysForTargetId=function(e,t){return this._s.Zn(t),rr.resolve()},e.prototype.getMatchingKeysForTargetId=function(e,t){var n=this._s.es(t);return rr.resolve(n)},e.prototype.containsKey=function(e,t){return rr.resolve(this._s.containsKey(t))},e}(),zi=function(){function e(e,t){var n=this;this.gs={},this.Ne=new s(0),this.xe=!1,this.xe=!0,this.referenceDelegate=e(this),this.qe=new Vi(this),this.Ut=new Lr,this.Ue=function(e,t){return new ji(e,(function(e){return n.referenceDelegate.ps(e)}))}(this.Ut),this.R=new yr(t),this.Ke=new ki(this.R)}return e.prototype.start=function(){return Promise.resolve()},e.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(e.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),e.prototype.setDatabaseDeletedListener=function(){},e.prototype.setNetworkEnabled=function(){},e.prototype.getIndexManager=function(){return this.Ut},e.prototype.getMutationQueue=function(e){var t=this.gs[e.toKey()];return t||(t=new Hi(this.Ut,this.referenceDelegate),this.gs[e.toKey()]=t),t},e.prototype.getTargetCache=function(){return this.qe},e.prototype.getRemoteDocumentCache=function(){return this.Ue},e.prototype.getBundleCache=function(){return this.Ke},e.prototype.runTransaction=function(e,t,n){var r=this;f("MemoryPersistence","Starting transaction:",e);var i=new Wi(this.Ne.next());return this.referenceDelegate.Es(),n(i).next((function(e){return r.referenceDelegate.Ts(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))},e.prototype.Is=function(e,t){return rr.or(Object.values(this.gs).map((function(n){return function(){return n.containsKey(e,t)}})))},e}(),Wi=function(e){function t(t){var n=this;return(n=e.call(this)||this).currentSequenceNumber=t,n}return Object(r["b"])(t,e),t}(tr),qi=function(){function e(e){this.persistence=e,this.As=new Fi,this.Rs=null}return e.bs=function(t){return new e(t)},Object.defineProperty(e.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw v()},enumerable:!1,configurable:!0}),e.prototype.addReference=function(e,t,n){return this.As.addReference(n,t),this.vs.delete(n.toString()),rr.resolve()},e.prototype.removeReference=function(e,t,n){return this.As.removeReference(n,t),this.vs.add(n.toString()),rr.resolve()},e.prototype.markPotentiallyOrphaned=function(e,t){return this.vs.add(t.toString()),rr.resolve()},e.prototype.removeTarget=function(e,t){var n=this;this.As.Zn(t.targetId).forEach((function(e){return n.vs.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.vs.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))},e.prototype.Es=function(){this.Rs=new Set},e.prototype.Ts=function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return rr.forEach(this.vs,(function(r){var i=W.fromPath(r);return t.Ps(e,i).next((function(e){e||n.removeEntry(i)}))})).next((function(){return t.Rs=null,n.apply(e)}))},e.prototype.updateLimboDocument=function(e,t){var n=this;return this.Ps(e,t).next((function(e){e?n.vs.delete(t.toString()):n.vs.add(t.toString())}))},e.prototype.ps=function(e){return 0},e.prototype.Ps=function(e,t){var n=this;return rr.or([function(){return rr.resolve(n.As.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Is(e,t)}])},e}(),Yi=function(){function e(e){this.uid=e}return e.prototype.isAuthenticated=function(){return null!=this.uid},e.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},e.prototype.isEqual=function(e){return e.uid===this.uid},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xi(e,t){return"firestore_clients_"+e+"_"+t}function Qi(e,t,n){var r="firestore_mutations_"+e+"_"+n;return t.isAuthenticated()&&(r+="_"+t.uid),r}function Ki(e,t){return"firestore_targets_"+e+"_"+t}Yi.UNAUTHENTICATED=new Yi(null),Yi.GOOGLE_CREDENTIALS=new Yi("google-credentials-uid"),Yi.FIRST_PARTY=new Yi("first-party-uid"),Yi.MOCK_USER=new Yi("mock-user");var Ji=function(){function e(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}return e.Vs=function(t,n,r){var i,o=JSON.parse(r),a="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return a&&o.error&&(a="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new u(o.error.code,o.error.message)),a?new e(t,n,o.state,i):(d("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},e.prototype.Ss=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},e}(),Zi=function(){function e(e,t,n){this.targetId=e,this.state=t,this.error=n}return e.Vs=function(t,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new u(i.error.code,i.error.message)),o?new e(t,i.state,r):(d("SharedClientState","Failed to parse target state for ID '"+t+"': "+n),null)},e.prototype.Ss=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},e}(),$i=function(){function e(e,t){this.clientId=e,this.activeTargetIds=t}return e.Vs=function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=Vt(),a=0;i&&a<r.activeTargetIds.length;++a)i=z(r.activeTargetIds[a]),o=o.add(r.activeTargetIds[a]);return i?new e(t,o):(d("SharedClientState","Failed to parse client data for instance '"+t+"': "+n),null)},e}(),eo=function(){function e(e,t){this.clientId=e,this.onlineState=t}return e.Vs=function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(d("SharedClientState","Failed to parse online state: "+t),null)},e}(),to=function(){function e(){this.activeTargetIds=Vt()}return e.prototype.Ds=function(e){this.activeTargetIds=this.activeTargetIds.add(e)},e.prototype.Cs=function(e){this.activeTargetIds=this.activeTargetIds.delete(e)},e.prototype.Ss=function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)},e}(),no=function(){function e(e,t,n,r,i){this.window=e,this.Se=t,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.ks.bind(this),this.Fs=new Rt(E),this.started=!1,this.$s=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Os=Xi(this.persistenceKey,this.Ns),this.Ms=function(e){return"firestore_sequence_number_"+e}(this.persistenceKey),this.Fs=this.Fs.insert(this.Ns,new to),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(e){return"firestore_online_state_"+e}(this.persistenceKey),this.Ks=function(e){return"firestore_bundle_loaded_"+e}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return e.yt=function(e){return!(!e||!e.localStorage)},e.prototype.start=function(){return Object(r["a"])(this,void 0,void 0,(function(){var e,t,n,i,o,a,s,c,u,l,h,f=this;return Object(r["c"])(this,(function(r){switch(r.label){case 0:return[4,this.syncEngine.fn()];case 1:for(e=r.sent(),t=0,n=e;t<n.length;t++)(i=n[t])!==this.Ns&&(o=this.getItem(Xi(this.persistenceKey,i)))&&(a=$i.Vs(i,o))&&(this.Fs=this.Fs.insert(a.clientId,a));for(this.Qs(),(s=this.storage.getItem(this.Us))&&(c=this.js(s))&&this.Ws(c),u=0,l=this.$s;u<l.length;u++)h=l[u],this.ks(h);return this.$s=[],this.window.addEventListener("pagehide",(function(){return f.shutdown()})),this.started=!0,[2]}}))}))},e.prototype.writeSequenceNumber=function(e){this.setItem(this.Ms,JSON.stringify(e))},e.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.Fs)},e.prototype.isActiveQueryTarget=function(e){var t=!1;return this.Fs.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t},e.prototype.addPendingMutation=function(e){this.zs(e,"pending")},e.prototype.updateMutationState=function(e,t,n){this.zs(e,t,n),this.Hs(e)},e.prototype.addLocalQueryTarget=function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(Ki(this.persistenceKey,e));if(n){var r=Zi.Vs(e,n);r&&(t=r.state)}}return this.Js.Ds(e),this.Qs(),t},e.prototype.removeLocalQueryTarget=function(e){this.Js.Cs(e),this.Qs()},e.prototype.isLocalQueryTarget=function(e){return this.Js.activeTargetIds.has(e)},e.prototype.clearQueryState=function(e){this.removeItem(Ki(this.persistenceKey,e))},e.prototype.updateQueryState=function(e,t,n){this.Ys(e,t,n)},e.prototype.handleUserChange=function(e,t,n){var r=this;t.forEach((function(e){r.Hs(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))},e.prototype.setOnlineState=function(e){this.Xs(e)},e.prototype.notifyBundleLoaded=function(){this.Zs()},e.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},e.prototype.getItem=function(e){var t=this.storage.getItem(e);return f("SharedClientState","READ",e,t),t},e.prototype.setItem=function(e,t){f("SharedClientState","SET",e,t),this.storage.setItem(e,t)},e.prototype.removeItem=function(e){f("SharedClientState","REMOVE",e),this.storage.removeItem(e)},e.prototype.ks=function(e){var t=this,n=e;if(n.storageArea===this.storage){if(f("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Os)return void d("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable((function(){return Object(r["a"])(t,void 0,void 0,(function(){var e,t,i,o,a,c;return Object(r["c"])(this,(function(r){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return e=this.ti(n.key),[2,this.ei(e,null)];if(t=this.ni(n.key,n.newValue))return[2,this.ei(t.clientId,t)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(i=this.si(n.key,n.newValue)))return[2,this.ii(i)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(o=this.ri(n.key,n.newValue)))return[2,this.oi(o)]}else if(n.key===this.Us){if(null!==n.newValue&&(a=this.js(n.newValue)))return[2,this.Ws(a)]}else if(n.key===this.Ms)(c=function(e){var t=s.o;if(null!=e)try{var n=JSON.parse(e);g("number"==typeof n),t=n}catch(e){d("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue))!==s.o&&this.sequenceNumberHandler(c);else if(n.key===this.Ks)return[2,this.syncEngine.ci()]}else this.$s.push(n);return[2]}))}))}))}},Object.defineProperty(e.prototype,"Js",{get:function(){return this.Fs.get(this.Ns)},enumerable:!1,configurable:!0}),e.prototype.Qs=function(){this.setItem(this.Os,this.Js.Ss())},e.prototype.zs=function(e,t,n){var r=new Ji(this.currentUser,e,t,n),i=Qi(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Ss())},e.prototype.Hs=function(e){var t=Qi(this.persistenceKey,this.currentUser,e);this.removeItem(t)},e.prototype.Xs=function(e){var t={clientId:this.Ns,onlineState:e};this.storage.setItem(this.Us,JSON.stringify(t))},e.prototype.Ys=function(e,t,n){var r=Ki(this.persistenceKey,e),i=new Zi(e,t,n);this.setItem(r,i.Ss())},e.prototype.Zs=function(){this.setItem(this.Ks,"value-not-used")},e.prototype.ti=function(e){var t=this.Ls.exec(e);return t?t[1]:null},e.prototype.ni=function(e,t){var n=this.ti(e);return $i.Vs(n,t)},e.prototype.si=function(e,t){var n=this.Bs.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Ji.Vs(new Yi(i),r,t)},e.prototype.ri=function(e,t){var n=this.qs.exec(e),r=Number(n[1]);return Zi.Vs(r,t)},e.prototype.js=function(e){return eo.Vs(e)},e.prototype.ii=function(e){return Object(r["a"])(this,void 0,void 0,(function(){return Object(r["c"])(this,(function(t){return e.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(e.batchId,e.state,e.error)]:(f("SharedClientState","Ignoring mutation for non-active user "+e.user.uid),[2])}))}))},e.prototype.oi=function(e){return this.syncEngine.ai(e.targetId,e.state,e.error)},e.prototype.ei=function(e,t){var n=this,r=t?this.Fs.insert(e,t):this.Fs.remove(e),i=this.Gs(this.Fs),o=this.Gs(r),a=[],s=[];return o.forEach((function(e){i.has(e)||a.push(e)})),i.forEach((function(e){o.has(e)||s.push(e)})),this.syncEngine.hi(a,s).then((function(){n.Fs=r}))},e.prototype.Ws=function(e){this.Fs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)},e.prototype.Gs=function(e){var t=Vt();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t},e}(),ro=function(){function e(){this.li=new to,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return e.prototype.addPendingMutation=function(e){},e.prototype.updateMutationState=function(e,t,n){},e.prototype.addLocalQueryTarget=function(e){return this.li.Ds(e),this.fi[e]||"not-current"},e.prototype.updateQueryState=function(e,t,n){this.fi[e]=t},e.prototype.removeLocalQueryTarget=function(e){this.li.Cs(e)},e.prototype.isLocalQueryTarget=function(e){return this.li.activeTargetIds.has(e)},e.prototype.clearQueryState=function(e){delete this.fi[e]},e.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},e.prototype.isActiveQueryTarget=function(e){return this.li.activeTargetIds.has(e)},e.prototype.start=function(){return this.li=new to,Promise.resolve()},e.prototype.handleUserChange=function(e,t,n){},e.prototype.setOnlineState=function(e){},e.prototype.shutdown=function(){},e.prototype.writeSequenceNumber=function(e){},e.prototype.notifyBundleLoaded=function(){},e}(),io=function(){function e(){}return e.prototype.di=function(e){},e.prototype.shutdown=function(){},e}(),oo=function(){function e(){var e=this;this.wi=function(){return e._i()},this.mi=function(){return e.yi()},this.gi=[],this.pi()}return e.prototype.di=function(e){this.gi.push(e)},e.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},e.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},e.prototype._i=function(){f("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var e=0,t=this.gi;e<t.length;e++)(0,t[e])(0)},e.prototype.yi=function(){f("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var e=0,t=this.gi;e<t.length;e++)(0,t[e])(1)},e.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},e}(),ao={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},so=function(){function e(e){this.Ei=e.Ei,this.Ti=e.Ti}return e.prototype.Ii=function(e){this.Ai=e},e.prototype.Ri=function(e){this.bi=e},e.prototype.onMessage=function(e){this.vi=e},e.prototype.close=function(){this.Ti()},e.prototype.send=function(e){this.Ei(e)},e.prototype.Pi=function(){this.Ai()},e.prototype.Vi=function(e){this.bi(e)},e.prototype.Si=function(e){this.vi(e)},e}(),co=function(e){function t(t){var n=this;return(n=e.call(this,t)||this).forceLongPolling=t.forceLongPolling,n.autoDetectLongPolling=t.autoDetectLongPolling,n.useFetchStreams=t.useFetchStreams,n}return Object(r["b"])(t,e),t.prototype.Fi=function(e,t,n,r){return new Promise((function(i,o){var s=new a["g"];s.listenOnce(a["c"].COMPLETE,(function(){try{switch(s.getLastErrorCode()){case a["a"].NO_ERROR:var t=s.getResponseJson();f("Connection","XHR received:",JSON.stringify(t)),i(t);break;case a["a"].TIMEOUT:f("Connection",'RPC "'+e+'" timed out'),o(new u(c.DEADLINE_EXCEEDED,"Request time out"));break;case a["a"].HTTP_ERROR:var n=s.getStatus();if(f("Connection",'RPC "'+e+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var l=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(c).indexOf(t)>=0?t:c.UNKNOWN}(r.status);o(new u(l,r.message))}else o(new u(c.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new u(c.UNAVAILABLE,"Connection failed."));break;default:v()}}finally{f("Connection",'RPC "'+e+'" completed.')}}));var l=JSON.stringify(r);s.send(t,"POST",l,n,15)}))},t.prototype.Oi=function(e,t){var n=[this.Di,"/","google.firestore.v1.Firestore","/",e,"/channel"],r=Object(a["h"])(),o=Object(a["i"])(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(s.xmlHttpFactory=new a["d"]({})),this.ki(s.initMessageHeaders,t),Object(i["o"])()||Object(i["q"])()||Object(i["m"])()||Object(i["n"])()||Object(i["s"])()||Object(i["l"])()||(s.httpHeadersOverwriteParam="$httpHeaders");var l=n.join("");f("Connection","Creating WebChannel: "+l,s);var h=r.createWebChannel(l,s),d=!1,m=!1,v=new so({Ei:function(e){m?f("Connection","Not sending because WebChannel is closed:",e):(d||(f("Connection","Opening WebChannel transport."),h.open(),d=!0),f("Connection","WebChannel sending:",e),h.send(e))},Ti:function(){return h.close()}}),y=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return y(h,a["f"].EventType.OPEN,(function(){m||f("Connection","WebChannel transport opened.")})),y(h,a["f"].EventType.CLOSE,(function(){m||(m=!0,f("Connection","WebChannel transport closed"),v.Vi())})),y(h,a["f"].EventType.ERROR,(function(e){m||(m=!0,p("Connection","WebChannel transport errored:",e),v.Vi(new u(c.UNAVAILABLE,"The operation could not be completed")))})),y(h,a["f"].EventType.MESSAGE,(function(e){var t;if(!m){var n=e.data[0];g(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){f("Connection","WebChannel received error:",i);var o=i.status,a=function(e){var t=xt[e];if(void 0!==t)return Ot(t)}(o),s=i.message;void 0===a&&(a=c.INTERNAL,s="Unknown error status: "+o+" with message "+i.message),m=!0,v.Vi(new u(a,s)),h.close()}else f("Connection","WebChannel received:",n),v.Si(n)}})),y(o,a["b"].STAT_EVENT,(function(e){e.stat===a["e"].PROXY?f("Connection","Detected buffering proxy"):e.stat===a["e"].NOPROXY&&f("Connection","Detected no buffering proxy")})),setTimeout((function(){v.Pi()}),0),v},t}(function(){function e(e){this.databaseInfo=e,this.databaseId=e.databaseId;var t=e.ssl?"https":"http";this.Di=t+"://"+e.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return e.prototype.Ni=function(e,t,n,r){var i=this.xi(e,t);f("RestConnection","Sending: ",i,n);var o={};return this.ki(o,r),this.Fi(e,i,o,n).then((function(e){return f("RestConnection","Received: ",e),e}),(function(t){throw p("RestConnection",e+" failed with error: ",t,"url: ",i,"request:",n),t}))},e.prototype.$i=function(e,t,n,r){return this.Ni(e,t,n,r)},e.prototype.ki=function(e,t){if(e["X-Goog-Api-Client"]="gl-js/ fire/8.10.0",e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t)for(var n in t.authHeaders)t.authHeaders.hasOwnProperty(n)&&(e[n]=t.authHeaders[n])},e.prototype.xi=function(e,t){var n=ao[e];return this.Di+"/v1/"+t+":"+n},e}());
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uo(){return"undefined"!=typeof window?window:null}function lo(){return"undefined"!=typeof document?document:null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ho(e){return new tn(e,!0)}var fo=function(){function e(e,t,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=e,this.timerId=t,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Ki=Date.now(),this.reset()}return e.prototype.reset=function(){this.qi=0},e.prototype.Qi=function(){this.qi=this.Bi},e.prototype.ji=function(e){var t=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Ki),i=Math.max(0,n-r);i>0&&f("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,(function(){return t.Ki=Date.now(),e()})),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},e.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},e.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},e.prototype.Wi=function(){return(Math.random()-.5)*this.qi},e}(),po=function(){function e(e,t,n,r,i,o){this.Se=e,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new fo(e,t)}return e.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},e.prototype.er=function(){return 2===this.state},e.prototype.start=function(){3!==this.state?this.auth():this.nr()},e.prototype.stop=function(){return Object(r["a"])(this,void 0,void 0,(function(){return Object(r["c"])(this,(function(e){switch(e.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},e.prototype.sr=function(){this.state=0,this.Zi.reset()},e.prototype.ir=function(){var e=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,(function(){return e.rr()})))},e.prototype.cr=function(e){this.ur(),this.stream.send(e)},e.prototype.rr=function(){return Object(r["a"])(this,void 0,void 0,(function(){return Object(r["c"])(this,(function(e){return this.er()?[2,this.close(0)]:[2]}))}))},e.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},e.prototype.close=function(e,t){return Object(r["a"])(this,void 0,void 0,(function(){return Object(r["c"])(this,(function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==e?this.Zi.reset():t&&t.code===c.RESOURCE_EXHAUSTED?(d(t.toString()),d("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):t&&t.code===c.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=e,[4,this.listener.Ri(t)];case 1:return n.sent(),[2]}}))}))},e.prototype.ar=function(){},e.prototype.auth=function(){var e=this;this.state=1;var t=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then((function(t){e.Yi===n&&e.lr(t)}),(function(n){t((function(){var t=new u(c.UNKNOWN,"Fetching auth token failed: "+n.message);return e.dr(t)}))}))},e.prototype.lr=function(e){var t=this,n=this.hr(this.Yi);this.stream=this.wr(e),this.stream.Ii((function(){n((function(){return t.state=2,t.listener.Ii()}))})),this.stream.Ri((function(e){n((function(){return t.dr(e)}))})),this.stream.onMessage((function(e){n((function(){return t.onMessage(e)}))}))},e.prototype.nr=function(){var e=this;this.state=4,this.Zi.ji((function(){return Object(r["a"])(e,void 0,void 0,(function(){return Object(r["c"])(this,(function(e){return this.state=0,this.start(),[2]}))}))}))},e.prototype.dr=function(e){return f("PersistentStream","close with error: "+e),this.stream=null,this.close(3,e)},e.prototype.hr=function(e){var t=this;return function(n){t.Se.enqueueAndForget((function(){return t.Yi===e?n():(f("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},e}(),mo=function(e){function t(t,n,r,i,o){var a=this;return(a=e.call(this,t,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,a}return Object(r["b"])(t,e),t.prototype.wr=function(e){return this.Hi.Oi("Listen",e)},t.prototype.onMessage=function(e){this.Zi.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:v()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],o=function(e,t){return e.I?(g(void 0===t||"string"==typeof t),P.fromBase64String(t||"")):(g(void 0===t||t instanceof Uint8Array),P.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=(s=t.targetChange.cause)&&function(e){var t=void 0===e.code?c.UNKNOWN:Ot(e.code);return new u(t,e.message||"")}(s);n=new Xt(r,i,o,a||null)}else if("documentChange"in t){t.documentChange,(r=t.documentChange).document,r.document.name,r.document.updateTime,i=ln(e,r.document.name),o=an(r.document.updateTime);var s=new ae({mapValue:{fields:r.document.fields}}),l=(a=ce.newFoundDocument(i,o,s),r.targetIds||[]),h=r.removedTargetIds||[];n=new qt(l,h,a.key,a)}else if("documentDelete"in t)t.documentDelete,(r=t.documentDelete).document,i=ln(e,r.document),o=r.readTime?an(r.readTime):A.min(),s=ce.newNoDocument(i,o),a=r.removedTargetIds||[],n=new qt([],a,s.key,s);else if("documentRemove"in t)t.documentRemove,(r=t.documentRemove).document,i=ln(e,r.document),o=r.removedTargetIds||[],n=new qt([],o,i,null);else{if(!("filter"in t))return v();t.filter;var f=t.filter;f.targetId,r=f.count||0,i=new St(r),o=f.targetId,n=new Yt(o,i)}return n}(this.R,e),n=function(e){if(!("targetChange"in e))return A.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?A.min():t.readTime?an(t.readTime):A.min()}(e);return this.listener._r(t,n)},t.prototype.mr=function(e){var t={};t.database=dn(this.R),t.addTarget=function(e,t){var n,r=t.target;return(n=de(r)?{documents:bn(e,r)}:{query:wn(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=rn(e,t.resumeToken):t.snapshotVersion.compareTo(A.min())>0&&(n.readTime=nn(e,t.snapshotVersion.toTimestamp())),n}(this.R,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return v()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.R,e);n&&(t.labels=n),this.cr(t)},t.prototype.yr=function(e){var t={};t.database=dn(this.R),t.removeTarget=e,this.cr(t)},t}(po),vo=function(e){function t(t,n,r,i,o){var a=this;return(a=e.call(this,t,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,a.gr=!1,a}return Object(r["b"])(t,e),Object.defineProperty(t.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),t.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,e.prototype.start.call(this)},t.prototype.ar=function(){this.gr&&this.Er([])},t.prototype.wr=function(e){return this.Hi.Oi("Write",e)},t.prototype.onMessage=function(e){if(g(!!e.streamToken),this.lastStreamToken=e.streamToken,this.gr){this.Zi.reset();var t=function(e,t){return e&&e.length>0?(g(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?an(e.updateTime):an(t);return n.isEqual(A.min())&&(n=an(t)),new ct(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=an(e.commitTime);return this.listener.Tr(n,t)}return g(!e.writeResults||0===e.writeResults.length),this.gr=!0,this.listener.Ir()},t.prototype.Ar=function(){var e={};e.database=dn(this.R),this.cr(e)},t.prototype.Er=function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return gn(t.R,e)}))};this.cr(n)},t}(po),go=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).credentials=t,i.Hi=n,i.R=r,i.Rr=!1,i}return Object(r["b"])(t,e),t.prototype.br=function(){if(this.Rr)throw new u(c.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.Ni=function(e,t,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.Ni(e,t,n,i)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===c.UNAUTHENTICATED&&r.credentials.invalidateToken(),e):new u(c.UNKNOWN,e.toString())}))},t.prototype.$i=function(e,t,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.$i(e,t,n,i)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===c.UNAUTHENTICATED&&r.credentials.invalidateToken(),e):new u(c.UNKNOWN,e.toString())}))},t.prototype.terminate=function(){this.Rr=!0},t}((function(){})),yo=function(){function e(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return e.prototype.Sr=function(){var e=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.Pr=null,e.Cr("Backend didn't respond within 10 seconds."),e.Dr("Offline"),Promise.resolve()})))},e.prototype.Nr=function(e){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.kr(),this.Cr("Connection failed 1 times. Most recent error: "+e.toString()),this.Dr("Offline")))},e.prototype.set=function(e){this.kr(),this.vr=0,"Online"===e&&(this.Vr=!1),this.Dr(e)},e.prototype.Dr=function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))},e.prototype.Cr=function(e){var t="Could not reach Cloud Firestore backend. "+e+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(d(t),this.Vr=!1):f("OnlineStateTracker",t)},e.prototype.kr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},e}(),bo=function(e,t,n,i,o){var a=this;this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Fr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=o,this.Lr.di((function(e){n.enqueueAndForget((function(){return Object(r["a"])(a,void 0,void 0,(function(){return Object(r["c"])(this,(function(e){switch(e.label){case 0:return Oo(this)?(f("RemoteStore","Restarting streams for network reachability change."),[4,function(e){return Object(r["a"])(this,void 0,void 0,(function(){var t;return Object(r["c"])(this,(function(n){switch(n.label){case 0:return(t=y(e)).Or.add(4),[4,Eo(t)];case 1:return n.sent(),t.Br.set("Unknown"),t.Or.delete(4),[4,wo(t)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))})),this.Br=new yo(n,i)};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wo(e){return Object(r["a"])(this,void 0,void 0,(function(){var t,n;return Object(r["c"])(this,(function(r){switch(r.label){case 0:if(!Oo(e))return[3,4];t=0,n=e.Mr,r.label=1;case 1:return t<n.length?[4,(0,n[t])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return t++,[3,1];case 4:return[2]}}))}))}function Eo(e){return Object(r["a"])(this,void 0,void 0,(function(){var t,n;return Object(r["c"])(this,(function(r){switch(r.label){case 0:t=0,n=e.Mr,r.label=1;case 1:return t<n.length?[4,(0,n[t])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return t++,[3,1];case 4:return[2]}}))}))}function xo(e,t){var n=y(e);n.$r.has(t.targetId)||(n.$r.set(t.targetId,t),Mo(n)?So(n):Vo(n).er()&&To(n,t))}function _o(e,t){var n=y(e),r=Vo(n);n.$r.delete(t),r.er()&&Ao(n,t),0===n.$r.size&&(r.er()?r.ir():Oo(n)&&n.Br.set("Unknown"))}function To(e,t){e.qr.U(t.targetId),Vo(e).mr(t)}function Ao(e,t){e.qr.U(t),Vo(e).yr(t)}function So(e){e.qr=new Kt({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},lt:function(t){return e.$r.get(t)||null}}),Vo(e).start(),e.Br.Sr()}function Mo(e){return Oo(e)&&!Vo(e).tr()&&e.$r.size>0}function Oo(e){return 0===y(e).Or.size}function Ro(e){e.qr=void 0}function Co(e){return Object(r["a"])(this,void 0,void 0,(function(){return Object(r["c"])(this,(function(t){return e.$r.forEach((function(t,n){To(e,t)})),[2]}))}))}function Io(e,t){return Object(r["a"])(this,void 0,void 0,(function(){return Object(r["c"])(this,(function(n){return Ro(e),Mo(e)?(e.Br.Nr(t),So(e)):e.Br.set("Unknown"),[2]}))}))}function Lo(e,t,n){return Object(r["a"])(this,void 0,void 0,(function(){var i,o,a;return Object(r["c"])(this,(function(s){switch(s.label){case 0:if(e.Br.set("Online"),!(t instanceof Xt&&2===t.state&&t.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(e,t){return Object(r["a"])(this,void 0,void 0,(function(){var n,i,o,a;return Object(r["c"])(this,(function(r){switch(r.label){case 0:n=t.cause,i=0,o=t.targetIds,r.label=1;case 1:return i<o.length?(a=o[i],e.$r.has(a)?[4,e.remoteSyncer.rejectListen(a,n)]:[3,3]):[3,5];case 2:r.sent(),e.$r.delete(a),e.qr.removeTarget(a),r.label=3;case 3:r.label=4;case 4:return i++,[3,1];case 5:return[2]}}))}))}(e,t)];case 2:return s.sent(),[3,5];case 3:return i=s.sent(),f("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),i),[4,Do(e,i)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(t instanceof qt?e.qr.X(t):t instanceof Yt?e.qr.rt(t):e.qr.et(t),n.isEqual(A.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,Ai(e.localStore)];case 8:return o=s.sent(),n.compareTo(o)>=0?[4,function(e,t){var n=e.qr.ut(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.$r.get(r);i&&e.$r.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.$r.get(t);if(n){e.$r.set(t,n.withResumeToken(P.EMPTY_BYTE_STRING,n.snapshotVersion)),Ao(e,t);var r=new gr(n.target,t,1,n.sequenceNumber);To(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return f("RemoteStore","Failed to raise snapshot:",a=s.sent()),[4,Do(e,a)];case 12:return s.sent(),[3,13];case 13:return[2]}}))}))}function Do(e,t,n){return Object(r["a"])(this,void 0,void 0,(function(){var i=this;return Object(r["c"])(this,(function(o){switch(o.label){case 0:if(!cr(t))throw t;return e.Or.add(1),[4,Eo(e)];case 1:return o.sent(),e.Br.set("Offline"),n||(n=function(){return Ai(e.localStore)}),e.asyncQueue.enqueueRetryable((function(){return Object(r["a"])(i,void 0,void 0,(function(){return Object(r["c"])(this,(function(t){switch(t.label){case 0:return f("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return t.sent(),e.Or.delete(1),[4,wo(e)];case 2:return t.sent(),[2]}}))}))})),[2]}}))}))}function Po(e,t){return t().catch((function(n){return Do(e,n,t)}))}function No(e){return Object(r["a"])(this,void 0,void 0,(function(){var t,n,i,o,a;return Object(r["c"])(this,(function(r){switch(r.label){case 0:t=y(e),n=zo(t),i=t.Fr.length>0?t.Fr[t.Fr.length-1].batchId:-1,r.label=1;case 1:if(!function(e){return Oo(e)&&e.Fr.length<10}(t))return[3,7];r.label=2;case 2:return r.trys.push([2,4,,6]),[4,Oi(t.localStore,i)];case 3:return null===(o=r.sent())?(0===t.Fr.length&&n.ir(),[3,7]):(i=o.batchId,function(e,t){e.Fr.push(t);var n=zo(e);n.er()&&n.pr&&n.Er(t.mutations)}(t,o),[3,6]);case 4:return a=r.sent(),[4,Do(t,a)];case 5:return r.sent(),[3,6];case 6:return[3,1];case 7:return Bo(t)&&ko(t),[2]}}))}))}function Bo(e){return Oo(e)&&!zo(e).tr()&&e.Fr.length>0}function ko(e){zo(e).start()}function Fo(e){return Object(r["a"])(this,void 0,void 0,(function(){return Object(r["c"])(this,(function(t){return zo(e).Ar(),[2]}))}))}function Uo(e){return Object(r["a"])(this,void 0,void 0,(function(){var t,n,i,o;return Object(r["c"])(this,(function(r){for(t=zo(e),n=0,i=e.Fr;n<i.length;n++)o=i[n],t.Er(o.mutations);return[2]}))}))}function Ho(e,t,n){return Object(r["a"])(this,void 0,void 0,(function(){var i,o;return Object(r["c"])(this,(function(r){switch(r.label){case 0:return i=e.Fr.shift(),o=vr.from(i,t,n),[4,Po(e,(function(){return e.remoteSyncer.applySuccessfulWrite(o)}))];case 1:return r.sent(),[4,No(e)];case 2:return r.sent(),[2]}}))}))}function jo(e,t){return Object(r["a"])(this,void 0,void 0,(function(){return Object(r["c"])(this,(function(n){switch(n.label){case 0:return t&&zo(e).pr?[4,function(e,t){return Object(r["a"])(this,void 0,void 0,(function(){var n,i;return Object(r["c"])(this,(function(r){switch(r.label){case 0:return Mt(i=t.code)&&i!==c.ABORTED?(n=e.Fr.shift(),zo(e).sr(),[4,Po(e,(function(){return e.remoteSyncer.rejectFailedWrite(n.batchId,t)}))]):[3,3];case 1:return r.sent(),[4,No(e)];case 2:r.sent(),r.label=3;case 3:return[2]}}))}))}(e,t)]:[3,2];case 1:n.sent(),n.label=2;case 2:return Bo(e)&&ko(e),[2]}}))}))}function Go(e,t){return Object(r["a"])(this,void 0,void 0,(function(){var n;return Object(r["c"])(this,(function(r){switch(r.label){case 0:return n=y(e),t?(n.Or.delete(2),[4,wo(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return t?[3,4]:(n.Or.add(2),[4,Eo(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function Vo(e){var t=this;return e.Ur||(e.Ur=function(e,t,n){var r=y(e);return r.br(),new mo(t,r.Hi,r.credentials,r.R,n)}(e.datastore,e.asyncQueue,{Ii:Co.bind(null,e),Ri:Io.bind(null,e),_r:Lo.bind(null,e)}),e.Mr.push((function(n){return Object(r["a"])(t,void 0,void 0,(function(){return Object(r["c"])(this,(function(t){switch(t.label){case 0:return n?(e.Ur.sr(),Mo(e)?So(e):e.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,e.Ur.stop()];case 2:t.sent(),Ro(e),t.label=3;case 3:return[2]}}))}))}))),e.Ur}function zo(e){var t=this;return e.Kr||(e.Kr=function(e,t,n){var r=y(e);return r.br(),new vo(t,r.Hi,r.credentials,r.R,n)}(e.datastore,e.asyncQueue,{Ii:Fo.bind(null,e),Ri:jo.bind(null,e),Ir:Uo.bind(null,e),Tr:Ho.bind(null,e)}),e.Mr.push((function(n){return Object(r["a"])(t,void 0,void 0,(function(){return Object(r["c"])(this,(function(t){switch(t.label){case 0:return n?(e.Kr.sr(),[4,No(e)]):[3,2];case 1:return t.sent(),[3,4];case 2:return[4,e.Kr.stop()];case 3:t.sent(),e.Fr.length>0&&(f("RemoteStore","Stopping write stream with "+e.Fr.length+" pending writes"),e.Fr=[]),t.label=4;case 4:return[2]}}))}))}))),e.Kr
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var Wo=function(){function e(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new nr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return e.createAndSchedule=function(t,n,r,i,o){var a=new e(t,n,Date.now()+r,i,o);return a.start(r),a},e.prototype.start=function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)},e.prototype.skipDelay=function(){return this.handleDelayElapsed()},e.prototype.cancel=function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new u(c.CANCELLED,"Operation cancelled"+(e?": "+e:""))))},e.prototype.handleDelayElapsed=function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))},e.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},e}();function qo(e,t){if(d("AsyncQueue",t+": "+e),cr(e))return new u(c.UNAVAILABLE,t+": "+e);throw e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Yo=function(){function e(e){this.comparator=e?function(t,n){return e(t,n)||W.comparator(t.key,n.key)}:function(e,t){return W.comparator(e.key,t.key)},this.keyedMap=kt(),this.sortedSet=new Rt(this.comparator)}return e.emptySet=function(t){return new e(t.comparator)},e.prototype.has=function(e){return null!=this.keyedMap.get(e)},e.prototype.get=function(e){return this.keyedMap.get(e)},e.prototype.first=function(){return this.sortedSet.minKey()},e.prototype.last=function(){return this.sortedSet.maxKey()},e.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},e.prototype.indexOf=function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1},Object.defineProperty(e.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),e.prototype.forEach=function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))},e.prototype.add=function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))},e.prototype.delete=function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this},e.prototype.isEqual=function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},e.prototype.toString=function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"},e.prototype.copy=function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r},e}(),Xo=function(){function e(){this.Qr=new Rt(W.comparator)}return e.prototype.track=function(e){var t=e.doc.key,n=this.Qr.get(t);n?0!==e.type&&3===n.type?this.Qr=this.Qr.insert(t,e):3===e.type&&1!==n.type?this.Qr=this.Qr.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Qr=this.Qr.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Qr=this.Qr.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Qr=this.Qr.remove(t):1===e.type&&2===n.type?this.Qr=this.Qr.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Qr=this.Qr.insert(t,{type:2,doc:e.doc}):v():this.Qr=this.Qr.insert(t,e)},e.prototype.jr=function(){var e=[];return this.Qr.inorderTraversal((function(t,n){e.push(n)})),e},e}(),Qo=function(){function e(e,t,n,r,i,o,a,s){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s}return e.fromInitialDocuments=function(t,n,r,i){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,Yo.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&He(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0},e}(),Ko=function(){this.Wr=void 0,this.listeners=[]},Jo=function(){this.queries=new ri((function(e){return je(e)}),He),this.onlineState="Unknown",this.Gr=new Set};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zo(e,t){return Object(r["a"])(this,void 0,void 0,(function(){var n,i,o,a,s,c,u;return Object(r["c"])(this,(function(r){switch(r.label){case 0:if(n=y(e),i=t.query,o=!1,(a=n.queries.get(i))||(o=!0,a=new Ko),!o)return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),s=a,[4,n.onListen(i)];case 2:return s.Wr=r.sent(),[3,4];case 3:return c=r.sent(),u=qo(c,"Initialization of query '"+Ge(t.query)+"' failed"),[2,void t.onError(u)];case 4:return n.queries.set(i,a),a.listeners.push(t),t.zr(n.onlineState),a.Wr&&t.Hr(a.Wr)&&na(n),[2]}}))}))}function $o(e,t){return Object(r["a"])(this,void 0,void 0,(function(){var n,i,o,a,s;return Object(r["c"])(this,(function(r){return n=y(e),i=t.query,o=!1,(a=n.queries.get(i))&&(s=a.listeners.indexOf(t))>=0&&(a.listeners.splice(s,1),o=0===a.listeners.length),o?[2,(n.queries.delete(i),n.onUnlisten(i))]:[2]}))}))}function ea(e,t){for(var n=y(e),r=!1,i=0,o=t;i<o.length;i++){var a=o[i],s=a.query,c=n.queries.get(s);if(c){for(var u=0,l=c.listeners;u<l.length;u++)l[u].Hr(a)&&(r=!0);c.Wr=a}}r&&na(n)}function ta(e,t,n){var r=y(e),i=r.queries.get(t);if(i)for(var o=0,a=i.listeners;o<a.length;o++)a[o].onError(n);r.queries.delete(t)}function na(e){e.Gr.forEach((function(e){e.next()}))}var ra=function(){function e(e,t,n){this.query=e,this.Jr=t,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return e.prototype.Hr=function(e){if(!this.options.includeMetadataChanges){for(var t=[],n=0,r=e.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&t.push(i)}e=new Qo(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(e)&&(this.Jr.next(e),o=!0):this.eo(e,this.onlineState)&&(this.no(e),o=!0),this.Xr=e,o},e.prototype.onError=function(e){this.Jr.error(e)},e.prototype.zr=function(e){this.onlineState=e;var t=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,e)&&(this.no(this.Xr),t=!0),t},e.prototype.eo=function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return!(this.options.so&&n||e.docs.isEmpty()&&"Offline"!==t)},e.prototype.Zr=function(e){if(e.docChanges.length>0)return!0;var t=this.Xr&&this.Xr.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges},e.prototype.no=function(e){e=Qo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Yr=!0,this.Jr.next(e)},e}(),ia=function(){function e(e,t){this.payload=e,this.byteLength=t}return e.prototype.io=function(){return"metadata"in this.payload},e}(),oa=function(){function e(e){this.R=e}return e.prototype.qn=function(e){return ln(this.R,e)},e.prototype.Un=function(e){return e.metadata.exists?vn(this.R,e.document,!1):ce.newNoDocument(this.qn(e.metadata.name),this.Kn(e.metadata.readTime))},e.prototype.Kn=function(e){return an(e)},e}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(){function e(e,t,n){this.ro=e,this.localStore=t,this.R=n,this.queries=[],this.documents=[],this.progress=aa(e)}e.prototype.oo=function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null},e.prototype.co=function(e){for(var t=new Map,n=new oa(this.R),r=0,i=e;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var a=n.qn(o.metadata.name),s=0,c=o.metadata.queries;s<c.length;s++){var u=c[s],l=(t.get(u)||jt()).add(a);t.set(u,l)}}return t},e.prototype.complete=function(){return Object(r["a"])(this,void 0,void 0,(function(){var e,t,n,i,o;return Object(r["c"])(this,(function(r){switch(r.label){case 0:return[4,Ni(this.localStore,new oa(this.R),this.documents,this.ro.id)];case 1:e=r.sent(),t=this.co(this.documents),n=0,i=this.queries,r.label=2;case 2:return n<i.length?(o=i[n],[4,Bi(this.localStore,o,t.get(o.name))]):[3,5];case 3:r.sent(),r.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new gi(Object.assign({},this.progress),e))]}}))}))}})();function aa(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var sa=function(e){this.key=e},ca=function(e){this.key=e},ua=function(){function e(e,t){this.query=e,this.uo=t,this.ao=null,this.current=!1,this.ho=jt(),this.mutatedKeys=jt(),this.lo=ze(e),this.fo=new Yo(this.lo)}return Object.defineProperty(e.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),e.prototype._o=function(e,t){var n=this,r=t?t.mo:new Xo,i=t?t.fo:this.fo,o=t?t.mutatedKeys:this.mutatedKeys,a=i,s=!1,c=Le(this.query)&&i.size===this.query.limit?i.last():null,u=De(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),h=Ve(n.query,t)?t:null,f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?f!==d&&(r.track({type:3,doc:h}),p=!0):n.yo(l,h)||(r.track({type:2,doc:h}),p=!0,(c&&n.lo(h,c)>0||u&&n.lo(h,u)<0)&&(s=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(c||u)&&(s=!0)),p&&(h?(a=a.add(h),o=d?o.add(e):o.delete(e)):(a=a.delete(e),o=o.delete(e)))})),Le(this.query)||De(this.query))for(;a.size>this.query.limit;){var l=Le(this.query)?a.last():a.first();a=a.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{fo:a,mo:r,Nn:s,mutatedKeys:o}},e.prototype.yo=function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations},e.prototype.applyChanges=function(e,t,n){var r=this,i=this.fo;this.fo=e.fo,this.mutatedKeys=e.mutatedKeys;var o=e.mo.jr();o.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return v()}};return n(e)-n(t)}(e.type,t.type)||r.lo(e.doc,t.doc)})),this.po(n);var a=t?this.Eo():[],s=0===this.ho.size&&this.current?1:0,c=s!==this.ao;return this.ao=s,0!==o.length||c?{snapshot:new Qo(this.query,e.fo,i,o,e.mutatedKeys,0===s,c,!1),To:a}:{To:a}},e.prototype.zr=function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({fo:this.fo,mo:new Xo,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},e.prototype.Io=function(e){return!this.uo.has(e)&&!!this.fo.has(e)&&!this.fo.get(e).hasLocalMutations},e.prototype.po=function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.uo=t.uo.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.uo=t.uo.delete(e)})),this.current=e.current)},e.prototype.Eo=function(){var e=this;if(!this.current)return[];var t=this.ho;this.ho=jt(),this.fo.forEach((function(t){e.Io(t.key)&&(e.ho=e.ho.add(t.key))}));var n=[];return t.forEach((function(t){e.ho.has(t)||n.push(new ca(t))})),this.ho.forEach((function(e){t.has(e)||n.push(new sa(e))})),n},e.prototype.Ao=function(e){this.uo=e.Bn,this.ho=jt();var t=this._o(e.documents);return this.applyChanges(t,!0)},e.prototype.Ro=function(){return Qo.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},e}(),la=function(e,t,n){this.query=e,this.targetId=t,this.view=n},ha=function(e){this.key=e,this.bo=!1},fa=function(){function e(e,t,n,r,i,o){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new ri((function(e){return je(e)}),He),this.Vo=new Map,this.So=new Set,this.Do=new Rt(W.comparator),this.Co=new Map,this.No=new Fi,this.xo={},this.ko=new Map,this.Fo=Wr.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(e.prototype,"isPrimaryClient",{get:function(){return!0===this.$o},enumerable:!1,configurable:!0}),e}();function da(e,t){return Object(r["a"])(this,void 0,void 0,(function(){var n,i,o,a,s,c;return Object(r["c"])(this,(function(r){switch(r.label){case 0:return n=Ga(e),(a=n.Po.get(t))?(i=a.targetId,n.sharedClientState.addLocalQueryTarget(i),o=a.view.Ro(),[3,4]):[3,1];case 1:return[4,Ri(n.localStore,Fe(t))];case 2:return s=r.sent(),c=n.sharedClientState.addLocalQueryTarget(s.targetId),i=s.targetId,[4,pa(n,t,i,"current"===c)];case 3:o=r.sent(),n.isPrimaryClient&&xo(n.remoteStore,s),r.label=4;case 4:return[2,o]}}))}))}function pa(e,t,n,i){return Object(r["a"])(this,void 0,void 0,(function(){var o,a,s,c,u,l;return Object(r["c"])(this,(function(h){switch(h.label){case 0:return e.Oo=function(t,n,i){return function(e,t,n,i){return Object(r["a"])(this,void 0,void 0,(function(){var o,a,s;return Object(r["c"])(this,(function(r){switch(r.label){case 0:return o=t.view._o(n),o.Nn?[4,Ii(e.localStore,t.query,!1).then((function(e){var n=e.documents;return t.view._o(n,o)}))]:[3,2];case 1:o=r.sent(),r.label=2;case 2:return a=i&&i.targetChanges.get(t.targetId),s=t.view.applyChanges(o,e.isPrimaryClient,a),[2,(Ma(e,t.targetId,s.To),s.snapshot)]}}))}))}(e,t,n,i)},[4,Ii(e.localStore,t,!0)];case 1:return o=h.sent(),a=new ua(t,o.Bn),s=a._o(o.documents),c=Wt.createSynthesizedTargetChangeForCurrentChange(n,i&&"Offline"!==e.onlineState),u=a.applyChanges(s,e.isPrimaryClient,c),Ma(e,n,u.To),l=new la(t,n,a),[2,(e.Po.set(t,l),e.Vo.has(n)?e.Vo.get(n).push(t):e.Vo.set(n,[t]),u.snapshot)]}}))}))}function ma(e,t){return Object(r["a"])(this,void 0,void 0,(function(){var n,i,o;return Object(r["c"])(this,(function(r){switch(r.label){case 0:return n=y(e),i=n.Po.get(t),(o=n.Vo.get(i.targetId)).length>1?[2,(n.Vo.set(i.targetId,o.filter((function(e){return!He(e,t)}))),void n.Po.delete(t))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)?[3,2]:[4,Ci(n.localStore,i.targetId,!1).then((function(){n.sharedClientState.clearQueryState(i.targetId),_o(n.remoteStore,i.targetId),Aa(n,i.targetId)})).catch(Kr)]):[3,3];case 1:r.sent(),r.label=2;case 2:return[3,5];case 3:return Aa(n,i.targetId),[4,Ci(n.localStore,i.targetId,!0)];case 4:r.sent(),r.label=5;case 5:return[2]}}))}))}function va(e,t,n){return Object(r["a"])(this,void 0,void 0,(function(){var i,o,a,s;return Object(r["c"])(this,(function(r){switch(r.label){case 0:i=Va(e),r.label=1;case 1:return r.trys.push([1,5,,6]),[4,function(e,t){var n,r=y(e),i=T.now(),o=t.reduce((function(e,t){return e.add(t.key)}),jt());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(e){return r.Mn.pn(e,o).next((function(o){n=o;for(var a=[],s=0,c=t;s<c.length;s++){var u=c[s],l=pt(u,n.get(u.key));null!=l&&a.push(new yt(u.key,l,se(l.value.mapValue),ut.exists(!0)))}return r._n.addMutationBatch(e,i,a,t)}))})).then((function(e){return e.applyToLocalDocumentSet(n),{batchId:e.batchId,changes:n}}))}(i.localStore,t)];case 2:return o=r.sent(),i.sharedClientState.addPendingMutation(o.batchId),function(e,t,n){var r=e.xo[e.currentUser.toKey()];r||(r=new Rt(E)),r=r.insert(t,n),e.xo[e.currentUser.toKey()]=r}(i,o.batchId,n),[4,Ca(i,o.changes)];case 3:return r.sent(),[4,No(i.remoteStore)];case 4:return r.sent(),[3,6];case 5:return a=r.sent(),s=qo(a,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}}))}))}function ga(e,t){return Object(r["a"])(this,void 0,void 0,(function(){var n,i;return Object(r["c"])(this,(function(r){switch(r.label){case 0:n=y(e),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,Si(n.localStore,t)];case 2:return i=r.sent(),t.targetChanges.forEach((function(e,t){var r=n.Co.get(t);r&&(g(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.bo=!0:e.modifiedDocuments.size>0?g(r.bo):e.removedDocuments.size>0&&(g(r.bo),r.bo=!1))})),[4,Ca(n,i,t)];case 3:return r.sent(),[3,6];case 4:return[4,Kr(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))}function ya(e,t,n){var r=y(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach((function(e,n){var r=n.view.zr(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=y(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(t)&&(r=!0)})),r&&na(n)}(r.eventManager,t),i.length&&r.vo._r(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function ba(e,t,n){return Object(r["a"])(this,void 0,void 0,(function(){var i,o,a,s,c,u;return Object(r["c"])(this,(function(r){switch(r.label){case 0:return(i=y(e)).sharedClientState.updateQueryState(t,"rejected",n),o=i.Co.get(t),(a=o&&o.key)?(s=(s=new Rt(W.comparator)).insert(a,ce.newNoDocument(a,A.min())),c=jt().add(a),u=new zt(A.min(),new Map,new Lt(E),s,c),[4,ga(i,u)]):[3,2];case 1:return r.sent(),i.Do=i.Do.remove(a),i.Co.delete(t),Ra(i),[3,4];case 2:return[4,Ci(i.localStore,t,!1).then((function(){return Aa(i,t,n)})).catch(Kr)];case 3:r.sent(),r.label=4;case 4:return[2]}}))}))}function wa(e,t){return Object(r["a"])(this,void 0,void 0,(function(){var n,i,o;return Object(r["c"])(this,(function(r){switch(r.label){case 0:n=y(e),i=t.batch.batchId,r.label=1;case 1:return r.trys.push([1,4,,6]),[4,Ti(n.localStore,t)];case 2:return o=r.sent(),Ta(n,i,null),_a(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),[4,Ca(n,o)];case 3:return r.sent(),[3,6];case 4:return[4,Kr(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))}function Ea(e,t,n){return Object(r["a"])(this,void 0,void 0,(function(){var i,o;return Object(r["c"])(this,(function(r){switch(r.label){case 0:i=y(e),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,function(e,t){var n=y(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n._n.lookupMutationBatch(e,t).next((function(t){return g(null!==t),r=t.keys(),n._n.removeMutationBatch(e,t)})).next((function(){return n._n.performConsistencyCheck(e)})).next((function(){return n.Mn.pn(e,r)}))}))}(i.localStore,t)];case 2:return o=r.sent(),Ta(i,t,n),_a(i,t),i.sharedClientState.updateMutationState(t,"rejected",n),[4,Ca(i,o)];case 3:return r.sent(),[3,6];case 4:return[4,Kr(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))}function xa(e,t){return Object(r["a"])(this,void 0,void 0,(function(){var n,i,o,a,s;return Object(r["c"])(this,(function(r){switch(r.label){case 0:Oo((n=y(e)).remoteStore)||f("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,function(e){var t=y(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t._n.getHighestUnacknowledgedBatchId(e)}))}(n.localStore)];case 2:return-1===(i=r.sent())?[2,void t.resolve()]:((o=n.ko.get(i)||[]).push(t),n.ko.set(i,o),[3,4]);case 3:return a=r.sent(),s=qo(a,"Initialization of waitForPendingWrites() operation failed"),t.reject(s),[3,4];case 4:return[2]}}))}))}function _a(e,t){(e.ko.get(t)||[]).forEach((function(e){e.resolve()})),e.ko.delete(t)}function Ta(e,t,n){var r=y(e),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(t);o&&(n?o.reject(n):o.resolve(),i=i.remove(t)),r.xo[r.currentUser.toKey()]=i}}function Aa(e,t,n){void 0===n&&(n=null),e.sharedClientState.removeLocalQueryTarget(t);for(var r=0,i=e.Vo.get(t);r<i.length;r++){var o=i[r];e.Po.delete(o),n&&e.vo.Mo(o,n)}e.Vo.delete(t),e.isPrimaryClient&&e.No.Zn(t).forEach((function(t){e.No.containsKey(t)||Sa(e,t)}))}function Sa(e,t){e.So.delete(t.path.canonicalString());var n=e.Do.get(t);null!==n&&(_o(e.remoteStore,n),e.Do=e.Do.remove(t),e.Co.delete(n),Ra(e))}function Ma(e,t,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof sa?(e.No.addReference(o.key,t),Oa(e,o)):o instanceof ca?(f("SyncEngine","Document no longer in limbo: "+o.key),e.No.removeReference(o.key,t),e.No.containsKey(o.key)||Sa(e,o.key)):v()}}function Oa(e,t){var n=t.key,r=n.path.canonicalString();e.Do.get(n)||e.So.has(r)||(f("SyncEngine","New document in limbo: "+n),e.So.add(r),Ra(e))}function Ra(e){for(;e.So.size>0&&e.Do.size<e.maxConcurrentLimboResolutions;){var t=e.So.values().next().value;e.So.delete(t);var n=new W(C.fromString(t)),r=e.Fo.next();e.Co.set(r,new ha(n)),e.Do=e.Do.insert(n,r),xo(e.remoteStore,new gr(Fe(Ie(n.path)),r,2,s.o))}}function Ca(e,t,n){return Object(r["a"])(this,void 0,void 0,(function(){var i,o,a,s;return Object(r["c"])(this,(function(c){switch(c.label){case 0:return i=y(e),o=[],a=[],s=[],i.Po.isEmpty()?[3,3]:(i.Po.forEach((function(e,r){s.push(i.Oo(r,t,n).then((function(e){if(e){i.isPrimaryClient&&i.sharedClientState.updateQueryState(r.targetId,e.fromCache?"not-current":"current"),o.push(e);var t=bi.Pn(r.targetId,e);a.push(t)}})))})),[4,Promise.all(s)]);case 1:return c.sent(),i.vo._r(o),[4,function(e,t){return Object(r["a"])(this,void 0,void 0,(function(){var n,i,o,a,s,c,u,l,h;return Object(r["c"])(this,(function(r){switch(r.label){case 0:n=y(e),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return rr.forEach(t,(function(t){return rr.forEach(t.bn,(function(r){return n.persistence.referenceDelegate.addReference(e,t.targetId,r)})).next((function(){return rr.forEach(t.vn,(function(r){return n.persistence.referenceDelegate.removeReference(e,t.targetId,r)}))}))}))}))];case 2:return r.sent(),[3,4];case 3:if(!cr(i=r.sent()))throw i;return f("LocalStore","Failed to update sequence numbers: "+i),[3,4];case 4:for(o=0,a=t;o<a.length;o++)s=a[o],c=s.targetId,s.fromCache||(u=n.kn.get(c),l=u.snapshotVersion,h=u.withLastLimboFreeSnapshotVersion(l),n.kn=n.kn.insert(c,h));return[2]}}))}))}(i.localStore,a)];case 2:c.sent(),c.label=3;case 3:return[2]}}))}))}function Ia(e,t){return Object(r["a"])(this,void 0,void 0,(function(){var n,i;return Object(r["c"])(this,(function(r){switch(r.label){case 0:return(n=y(e)).currentUser.isEqual(t)?[3,3]:(f("SyncEngine","User change. New user:",t.toKey()),[4,_i(n.localStore,t)]);case 1:return i=r.sent(),n.currentUser=t,function(e,t){e.ko.forEach((function(e){e.forEach((function(e){e.reject(new u(c.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.ko.clear()}(n),n.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),[4,Ca(n,i.Ln)];case 2:r.sent(),r.label=3;case 3:return[2]}}))}))}function La(e,t){var n=y(e),r=n.Co.get(t);if(r&&r.bo)return jt().add(r.key);var i=jt(),o=n.Vo.get(t);if(!o)return i;for(var a=0,s=o;a<s.length;a++){var c=s[a],u=n.Po.get(c);i=i.unionWith(u.view.wo)}return i}function Da(e,t){return Object(r["a"])(this,void 0,void 0,(function(){var n,i,o;return Object(r["c"])(this,(function(r){switch(r.label){case 0:return[4,Ii((n=y(e)).localStore,t.query,!0)];case 1:return i=r.sent(),o=t.view.Ao(i),[2,(n.isPrimaryClient&&Ma(n,t.targetId,o.To),o)]}}))}))}function Pa(e){return Object(r["a"])(this,void 0,void 0,(function(){var t;return Object(r["c"])(this,(function(n){return[2,Di((t=y(e)).localStore).then((function(e){return Ca(t,e)}))]}))}))}function Na(e,t,n,i){return Object(r["a"])(this,void 0,void 0,(function(){var o,a;return Object(r["c"])(this,(function(r){switch(r.label){case 0:return[4,function(e,t){var n=y(e),r=y(n._n);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.jt(e,t).next((function(t){return t?n.Mn.pn(e,t):rr.resolve(null)}))}))}((o=y(e)).localStore,t)];case 1:return null===(a=r.sent())?[3,6]:"pending"!==n?[3,3]:[4,No(o.remoteStore)];case 2:return r.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(Ta(o,t,i||null),_a(o,t),function(e,t){y(y(e)._n).Gt(t)}(o.localStore,t)):v(),r.label=4;case 4:return[4,Ca(o,a)];case 5:return r.sent(),[3,7];case 6:f("SyncEngine","Cannot apply mutation batch with id: "+t),r.label=7;case 7:return[2]}}))}))}function Ba(e,t){return Object(r["a"])(this,void 0,void 0,(function(){var n,i,o,a,s,c,u,l;return Object(r["c"])(this,(function(r){switch(r.label){case 0:return Ga(n=y(e)),Va(n),!0!==t||!0===n.$o?[3,3]:(i=n.sharedClientState.getAllActiveQueryTargets(),[4,ka(n,i.toArray())]);case 1:return o=r.sent(),n.$o=!0,[4,Go(n.remoteStore,!0)];case 2:for(r.sent(),a=0,s=o;a<s.length;a++)c=s[a],xo(n.remoteStore,c);return[3,7];case 3:return!1!==t||!1===n.$o?[3,7]:(u=[],l=Promise.resolve(),n.Vo.forEach((function(e,t){n.sharedClientState.isLocalQueryTarget(t)?u.push(t):l=l.then((function(){return Aa(n,t),Ci(n.localStore,t,!0)})),_o(n.remoteStore,t)})),[4,l]);case 4:return r.sent(),[4,ka(n,u)];case 5:return r.sent(),function(e){var t=y(e);t.Co.forEach((function(e,n){_o(t.remoteStore,n)})),t.No.ts(),t.Co=new Map,t.Do=new Rt(W.comparator)}(n),n.$o=!1,[4,Go(n.remoteStore,!1)];case 6:r.sent(),r.label=7;case 7:return[2]}}))}))}function ka(e,t,n){return Object(r["a"])(this,void 0,void 0,(function(){var n,i,o,a,s,c,u,l,h,f,d,p,m,v;return Object(r["c"])(this,(function(r){switch(r.label){case 0:n=y(e),i=[],o=[],a=0,s=t,r.label=1;case 1:return a<s.length?(c=s[a],u=void 0,(l=n.Vo.get(c))&&0!==l.length?[4,Ri(n.localStore,Fe(l[0]))]:[3,7]):[3,13];case 2:u=r.sent(),h=0,f=l,r.label=3;case 3:return h<f.length?(d=f[h],p=n.Po.get(d),[4,Da(n,p)]):[3,6];case 4:(m=r.sent()).snapshot&&o.push(m.snapshot),r.label=5;case 5:return h++,[3,3];case 6:return[3,11];case 7:return[4,Li(n.localStore,c)];case 8:return v=r.sent(),[4,Ri(n.localStore,v)];case 9:return u=r.sent(),[4,pa(n,Fa(v),c,!1)];case 10:r.sent(),r.label=11;case 11:i.push(u),r.label=12;case 12:return a++,[3,1];case 13:return[2,(n.vo._r(o),i)]}}))}))}function Fa(e){return Ce(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function Ua(e){var t=y(e);return y(y(t.localStore).persistence).fn()}function Ha(e,t,n,i){return Object(r["a"])(this,void 0,void 0,(function(){var o,a,s;return Object(r["c"])(this,(function(r){switch(r.label){case 0:return(o=y(e)).$o?(f("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!o.Vo.has(t))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Di(o.localStore)];case 3:return a=r.sent(),s=zt.createSynthesizedRemoteEventForCurrentChange(t,"current"===n),[4,Ca(o,a,s)];case 4:return r.sent(),[3,8];case 5:return[4,Ci(o.localStore,t,!0)];case 6:return r.sent(),Aa(o,t,i),[3,8];case 7:v(),r.label=8;case 8:return[2]}}))}))}function ja(e,t,n){return Object(r["a"])(this,void 0,void 0,(function(){var i,o,a,s,c,u,l,h,d,p;return Object(r["c"])(this,(function(m){switch(m.label){case 0:if(!(i=Ga(e)).$o)return[3,10];o=0,a=t,m.label=1;case 1:return o<a.length?(s=a[o],i.Vo.has(s)?(f("SyncEngine","Adding an already active target "+s),[3,5]):[4,Li(i.localStore,s)]):[3,6];case 2:return c=m.sent(),[4,Ri(i.localStore,c)];case 3:return u=m.sent(),[4,pa(i,Fa(c),u.targetId,!1)];case 4:m.sent(),xo(i.remoteStore,u),m.label=5;case 5:return o++,[3,1];case 6:l=function(e){return Object(r["c"])(this,(function(t){switch(t.label){case 0:return i.Vo.has(e)?[4,Ci(i.localStore,e,!1).then((function(){_o(i.remoteStore,e),Aa(i,e)})).catch(Kr)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))},h=0,d=n,m.label=7;case 7:return h<d.length?(p=d[h],[5,l(p)]):[3,10];case 8:m.sent(),m.label=9;case 9:return h++,[3,7];case 10:return[2]}}))}))}function Ga(e){var t=y(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=ga.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=La.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=ba.bind(null,t),t.vo._r=ea.bind(null,t.eventManager),t.vo.Mo=ta.bind(null,t.eventManager),t}function Va(e){var t=y(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=wa.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Ea.bind(null,t),t}var za=function(){function e(){this.synchronizeTabs=!1}return e.prototype.initialize=function(e){return Object(r["a"])(this,void 0,void 0,(function(){return Object(r["c"])(this,(function(t){switch(t.label){case 0:return this.R=ho(e.databaseInfo.databaseId),this.sharedClientState=this.Bo(e),this.persistence=this.qo(e),[4,this.persistence.start()];case 1:return t.sent(),this.gcScheduler=this.Uo(e),this.localStore=this.Ko(e),[2]}}))}))},e.prototype.Uo=function(e){return null},e.prototype.Ko=function(e){return xi(this.persistence,new wi,e.initialUser,this.R)},e.prototype.qo=function(e){return new zi(qi.bs,this.R)},e.prototype.Bo=function(e){return new ro},e.prototype.terminate=function(){return Object(r["a"])(this,void 0,void 0,(function(){return Object(r["c"])(this,(function(e){switch(e.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return e.sent(),[4,this.persistence.shutdown()];case 2:return e.sent(),[2]}}))}))},e}(),Wa=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).Qo=t,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Object(r["b"])(t,e),t.prototype.initialize=function(t){return Object(r["a"])(this,void 0,void 0,(function(){var n=this;return Object(r["c"])(this,(function(r){switch(r.label){case 0:return[4,e.prototype.initialize.call(this,t)];case 1:return r.sent(),[4,Pi(this.localStore)];case 2:return r.sent(),[4,this.Qo.initialize(this,t)];case 3:return r.sent(),[4,Va(this.Qo.syncEngine)];case 4:return r.sent(),[4,No(this.Qo.remoteStore)];case 5:return r.sent(),[4,this.persistence.He((function(){return n.gcScheduler&&!n.gcScheduler.started&&n.gcScheduler.start(n.localStore),Promise.resolve()}))];case 6:return r.sent(),[2]}}))}))},t.prototype.Ko=function(e){return xi(this.persistence,new wi,e.initialUser,this.R)},t.prototype.Uo=function(e){var t=this.persistence.referenceDelegate.garbageCollector;return new $r(t,e.asyncQueue)},t.prototype.qo=function(e){var t=vi(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?kr.withCacheSize(this.cacheSizeBytes):kr.DEFAULT;return new di(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,uo(),lo(),this.R,this.sharedClientState,!!this.forceOwnership)},t.prototype.Bo=function(e){return new ro},t}(za),qa=function(e){function t(t,n){var r=this;return(r=e.call(this,t,n,!1)||this).Qo=t,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Object(r["b"])(t,e),t.prototype.initialize=function(t){return Object(r["a"])(this,void 0,void 0,(function(){var n,i=this;return Object(r["c"])(this,(function(o){switch(o.label){case 0:return[4,e.prototype.initialize.call(this,t)];case 1:return o.sent(),n=this.Qo.syncEngine,this.sharedClientState instanceof no?(this.sharedClientState.syncEngine={ui:Na.bind(null,n),ai:Ha.bind(null,n),hi:ja.bind(null,n),fn:Ua.bind(null,n),ci:Pa.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:o.sent(),o.label=3;case 3:return[4,this.persistence.He((function(e){return Object(r["a"])(i,void 0,void 0,(function(){return Object(r["c"])(this,(function(t){switch(t.label){case 0:return[4,Ba(this.Qo.syncEngine,e)];case 1:return t.sent(),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):e||this.gcScheduler.stop()),[2]}}))}))}))];case 4:return o.sent(),[2]}}))}))},t.prototype.Bo=function(e){var t=uo();if(!no.yt(t))throw new u(c.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=vi(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new no(t,e.asyncQueue,n,e.clientId,e.initialUser)},t}(Wa),Ya=function(){function e(){}return e.prototype.initialize=function(e,t){return Object(r["a"])(this,void 0,void 0,(function(){var n=this;return Object(r["c"])(this,(function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return ya(n.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Ia.bind(null,this.syncEngine),[4,Go(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},e.prototype.createEventManager=function(e){return new Jo},e.prototype.createDatastore=function(e){var t,n=ho(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new co(t));return function(e,t,n){return new go(e,t,n)}(e.credentials,r,n)},e.prototype.createRemoteStore=function(e){var t,n,r,i,o,a=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return ya(a.syncEngine,e,0)},o=oo.yt()?new oo:new io,new bo(t,n,r,i,o)},e.prototype.createSyncEngine=function(e,t){return function(e,t,n,r,i,o,a){var s=new fa(e,t,n,r,i,o);return a&&(s.$o=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)},e.prototype.terminate=function(){return function(e){return Object(r["a"])(this,void 0,void 0,(function(){var t;return Object(r["c"])(this,(function(n){switch(n.label){case 0:return t=y(e),f("RemoteStore","RemoteStore shutting down."),t.Or.add(5),[4,Eo(t)];case 1:return n.sent(),t.Lr.shutdown(),t.Br.set("Unknown"),[2]}}))}))}(this.remoteStore)},e}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Xa=function(){function e(e){this.observer=e,this.muted=!1}return e.prototype.next=function(e){this.observer.next&&this.jo(this.observer.next,e)},e.prototype.error=function(e){this.observer.error?this.jo(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)},e.prototype.Wo=function(){this.muted=!0},e.prototype.jo=function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)},e}(),Qa=(function(){function e(e,t){var n=this;this.Go=e,this.R=t,this.metadata=new nr,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then((function(e){e&&e.io()?n.metadata.resolve(e.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==e?void 0:e.payload)))}),(function(e){return n.metadata.reject(e)}))}e.prototype.close=function(){return this.Go.cancel()},e.prototype.getMetadata=function(){return Object(r["a"])(this,void 0,void 0,(function(){return Object(r["c"])(this,(function(e){return[2,this.metadata.promise]}))}))},e.prototype.Lo=function(){return Object(r["a"])(this,void 0,void 0,(function(){return Object(r["c"])(this,(function(e){switch(e.label){case 0:return[4,this.getMetadata()];case 1:return[2,(e.sent(),this.Ho())]}}))}))},e.prototype.Ho=function(){return Object(r["a"])(this,void 0,void 0,(function(){var e,t,n,i;return Object(r["c"])(this,(function(r){switch(r.label){case 0:return[4,this.Jo()];case 1:return null===(e=r.sent())?[2,null]:(t=this.zo.decode(e),n=Number(t),isNaN(n)&&this.Yo("length string ("+t+") is not valid number"),[4,this.Xo(n)]);case 2:return i=r.sent(),[2,new ia(JSON.parse(i),e.length+n)]}}))}))},e.prototype.Zo=function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))},e.prototype.Jo=function(){return Object(r["a"])(this,void 0,void 0,(function(){var e,t;return Object(r["c"])(this,(function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((e=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),t=this.buffer.slice(0,e),[2,(this.buffer=this.buffer.slice(e),t)])}}))}))},e.prototype.Xo=function(e){return Object(r["a"])(this,void 0,void 0,(function(){var t;return Object(r["c"])(this,(function(n){switch(n.label){case 0:return this.buffer.length<e?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return t=this.zo.decode(this.buffer.slice(0,e)),[2,(this.buffer=this.buffer.slice(e),t)]}}))}))},e.prototype.Yo=function(e){throw this.Go.cancel(),new Error("Invalid bundle format: "+e)},e.prototype.tc=function(){return Object(r["a"])(this,void 0,void 0,(function(){var e,t;return Object(r["c"])(this,(function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(e=n.sent()).done||((t=new Uint8Array(this.buffer.length+e.value.length)).set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t),[2,e.done]}}))}))}}(),function(){function e(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return e.prototype.lookup=function(e){return Object(r["a"])(this,void 0,void 0,(function(){var t,n=this;return Object(r["c"])(this,(function(i){switch(i.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new u(c.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(e,t){return Object(r["a"])(this,void 0,void 0,(function(){var n,i,o,a,s,c;return Object(r["c"])(this,(function(r){switch(r.label){case 0:return n=y(e),i=dn(n.R)+"/documents",o={documents:t.map((function(e){return un(n.R,e)}))},[4,n.$i("BatchGetDocuments",i,o)];case 1:return a=r.sent(),s=new Map,a.forEach((function(e){var t=function(e,t){return"found"in t?function(e,t){g(!!t.found),t.found.name,t.found.updateTime;var n=ln(e,t.found.name),r=an(t.found.updateTime),i=new ae({mapValue:{fields:t.found.fields}});return ce.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){g(!!t.missing),g(!!t.readTime);var n=ln(e,t.missing),r=an(t.readTime);return ce.newNoDocument(n,r)}(e,t):v()}(n.R,e);s.set(t.key.toString(),t)})),c=[],[2,(t.forEach((function(e){var t=s.get(e.toString());g(!!t),c.push(t)})),c)]}}))}))}(this.datastore,e)];case 1:return[2,((t=i.sent()).forEach((function(e){return n.recordVersion(e)})),t)]}}))}))},e.prototype.set=function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())},e.prototype.update=function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())},e.prototype.delete=function(e){this.write(new Tt(e,this.precondition(e))),this.writtenDocs.add(e.toString())},e.prototype.commit=function(){return Object(r["a"])(this,void 0,void 0,(function(){var e,t=this;return Object(r["c"])(this,(function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return e=this.readVersions,this.mutations.forEach((function(t){e.delete(t.key.toString())})),e.forEach((function(e,n){var r=W.fromPath(n);t.mutations.push(new At(r,t.precondition(r)))})),[4,function(e,t){return Object(r["a"])(this,void 0,void 0,(function(){var n,i,o;return Object(r["c"])(this,(function(r){switch(r.label){case 0:return n=y(e),i=dn(n.R)+"/documents",o={writes:t.map((function(e){return gn(n.R,e)}))},[4,n.Ni("Commit",i,o)];case 1:return r.sent(),[2]}}))}))}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}}))}))},e.prototype.recordVersion=function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw v();t=A.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new u(c.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)},e.prototype.precondition=function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?ut.updateTime(t):ut.none()},e.prototype.preconditionForUpdate=function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(A.min()))throw new u(c.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ut.updateTime(t)}return ut.exists(!0)},e.prototype.write=function(e){this.ensureCommitNotCalled(),this.mutations.push(e)},e.prototype.ensureCommitNotCalled=function(){},e}()),Ka=function(){function e(e,t,n,r){this.asyncQueue=e,this.datastore=t,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new fo(this.asyncQueue,"transaction_retry")}return e.prototype.run=function(){this.ec-=1,this.nc()},e.prototype.nc=function(){var e=this;this.Zi.ji((function(){return Object(r["a"])(e,void 0,void 0,(function(){var e,t,n=this;return Object(r["c"])(this,(function(r){return e=new Qa(this.datastore),(t=this.sc(e))&&t.then((function(t){n.asyncQueue.enqueueAndForget((function(){return e.commit().then((function(){n.deferred.resolve(t)})).catch((function(e){n.ic(e)}))}))})).catch((function(e){n.ic(e)})),[2]}))}))}))},e.prototype.sc=function(e){try{var t=this.updateFunction(e);return!G(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}},e.prototype.ic=function(e){var t=this;this.ec>0&&this.rc(e)?(this.ec-=1,this.asyncQueue.enqueueAndForget((function(){return t.nc(),Promise.resolve()}))):this.deferred.reject(e)},e.prototype.rc=function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!Mt(t)}return!1},e}(),Ja=function(){function e(e,t,n){var i=this;this.credentials=e,this.asyncQueue=t,this.databaseInfo=n,this.user=Yi.UNAUTHENTICATED,this.clientId=w.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(t,(function(e){return Object(r["a"])(i,void 0,void 0,(function(){return Object(r["c"])(this,(function(t){switch(t.label){case 0:return f("FirestoreClient","Received user=",e.uid),[4,this.credentialListener(e)];case 1:return t.sent(),this.user=e,[2]}}))}))}))}return e.prototype.getConfiguration=function(){return Object(r["a"])(this,void 0,void 0,(function(){return Object(r["c"])(this,(function(e){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]}))}))},e.prototype.setCredentialChangeListener=function(e){this.credentialListener=e},e.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new u(c.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.terminate=function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new nr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((function(){return Object(r["a"])(e,void 0,void 0,(function(){var e,n;return Object(r["c"])(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),t.resolve(),[3,6];case 5:return e=r.sent(),n=qo(e,"Failed to shutdown persistence"),t.reject(n),[3,6];case 6:return[2]}}))}))})),t.promise},e}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Za(e,t){return Object(r["a"])(this,void 0,void 0,(function(){var n,i,o=this;return Object(r["c"])(this,(function(a){switch(a.label){case 0:return e.asyncQueue.verifyOperationInProgress(),f("FirestoreClient","Initializing OfflineComponentProvider"),[4,e.getConfiguration()];case 1:return n=a.sent(),[4,t.initialize(n)];case 2:return a.sent(),i=n.initialUser,e.setCredentialChangeListener((function(e){return Object(r["a"])(o,void 0,void 0,(function(){return Object(r["c"])(this,(function(n){switch(n.label){case 0:return i.isEqual(e)?[3,2]:[4,_i(t.localStore,e)];case 1:n.sent(),i=e,n.label=2;case 2:return[2]}}))}))})),t.persistence.setDatabaseDeletedListener((function(){return e.terminate()})),e.offlineComponents=t,[2]}}))}))}function $a(e,t){return Object(r["a"])(this,void 0,void 0,(function(){var n,i;return Object(r["c"])(this,(function(o){switch(o.label){case 0:return e.asyncQueue.verifyOperationInProgress(),[4,es(e)];case 1:return n=o.sent(),f("FirestoreClient","Initializing OnlineComponentProvider"),[4,e.getConfiguration()];case 2:return i=o.sent(),[4,t.initialize(n,i)];case 3:return o.sent(),e.setCredentialChangeListener((function(e){return function(e,t){return Object(r["a"])(this,void 0,void 0,(function(){var n,i;return Object(r["c"])(this,(function(r){switch(r.label){case 0:return(n=y(e)).asyncQueue.verifyOperationInProgress(),f("RemoteStore","RemoteStore received new credentials"),i=Oo(n),n.Or.add(3),[4,Eo(n)];case 1:return r.sent(),i&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(t)];case 2:return r.sent(),n.Or.delete(3),[4,wo(n)];case 3:return r.sent(),[2]}}))}))}(t.remoteStore,e)})),e.onlineComponents=t,[2]}}))}))}function es(e){return Object(r["a"])(this,void 0,void 0,(function(){return Object(r["c"])(this,(function(t){switch(t.label){case 0:return e.offlineComponents?[3,2]:(f("FirestoreClient","Using default OfflineComponentProvider"),[4,Za(e,new za)]);case 1:t.sent(),t.label=2;case 2:return[2,e.offlineComponents]}}))}))}function ts(e){return Object(r["a"])(this,void 0,void 0,(function(){return Object(r["c"])(this,(function(t){switch(t.label){case 0:return e.onlineComponents?[3,2]:(f("FirestoreClient","Using default OnlineComponentProvider"),[4,$a(e,new Ya)]);case 1:t.sent(),t.label=2;case 2:return[2,e.onlineComponents]}}))}))}function ns(e){return es(e).then((function(e){return e.persistence}))}function rs(e){return es(e).then((function(e){return e.localStore}))}function is(e){return ts(e).then((function(e){return e.remoteStore}))}function os(e){return ts(e).then((function(e){return e.syncEngine}))}function as(e){return Object(r["a"])(this,void 0,void 0,(function(){var t,n;return Object(r["c"])(this,(function(r){switch(r.label){case 0:return[4,ts(e)];case 1:return t=r.sent(),[2,((n=t.eventManager).onListen=da.bind(null,t.syncEngine),n.onUnlisten=ma.bind(null,t.syncEngine),n)]}}))}))}function ss(e,t,n){var i=this;void 0===n&&(n={});var o=new nr;return e.asyncQueue.enqueueAndForget((function(){return Object(r["a"])(i,void 0,void 0,(function(){var i;return Object(r["c"])(this,(function(r){switch(r.label){case 0:return i=function(e,t,n,r,i){var o=new Xa({next:function(o){t.enqueueAndForget((function(){return $o(e,a)}));var s=o.docs.has(n);!s&&o.fromCache?i.reject(new u(c.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&o.fromCache&&r&&"server"===r.source?i.reject(new u(c.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(e){return i.reject(e)}}),a=new ra(Ie(n.path),o,{includeMetadataChanges:!0,so:!0});return Zo(e,a)},[4,as(e)];case 1:return[2,i.apply(void 0,[r.sent(),e.asyncQueue,t,n,o])]}}))}))})),o.promise}function cs(e,t,n){var i=this;void 0===n&&(n={});var o=new nr;return e.asyncQueue.enqueueAndForget((function(){return Object(r["a"])(i,void 0,void 0,(function(){var i;return Object(r["c"])(this,(function(r){switch(r.label){case 0:return i=function(e,t,n,r,i){var o=new Xa({next:function(n){t.enqueueAndForget((function(){return $o(e,a)})),n.fromCache&&"server"===r.source?i.reject(new u(c.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),a=new ra(n,o,{includeMetadataChanges:!0,so:!0});return Zo(e,a)},[4,as(e)];case 1:return[2,i.apply(void 0,[r.sent(),e.asyncQueue,t,n,o])]}}))}))})),o.promise}var us=function(e,t,n,r,i,o,a,s){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.useFetchStreams=s},ls=function(){function e(e,t){this.projectId=e,this.database=t||"(default)"}return Object.defineProperty(e.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database},e}(),hs=new Map,fs=function(e,t){this.user=t,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+e},ds=function(){function e(){this.changeListener=null}return e.prototype.getToken=function(){return Promise.resolve(null)},e.prototype.invalidateToken=function(){},e.prototype.setChangeListener=function(e,t){this.changeListener=t,e.enqueueRetryable((function(){return t(Yi.UNAUTHENTICATED)}))},e.prototype.removeChangeListener=function(){this.changeListener=null},e}(),ps=function(){function e(e){this.token=e,this.changeListener=null}return e.prototype.getToken=function(){return Promise.resolve(this.token)},e.prototype.invalidateToken=function(){},e.prototype.setChangeListener=function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))},e.prototype.removeChangeListener=function(){this.changeListener=null},e}(),ms=function(){function e(e){var t=this;this.currentUser=Yi.UNAUTHENTICATED,this.oc=new nr,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){t.cc++,t.currentUser=t.ac(),t.oc.resolve(),t.changeListener&&t.asyncQueue.enqueueRetryable((function(){return t.changeListener(t.currentUser)}))};var n=function(e){f("FirebaseCredentialsProvider","Auth detected"),t.auth=e,t.auth.addAuthTokenListener(t.uc)};e.onInit((function(e){return n(e)})),setTimeout((function(){if(!t.auth){var r=e.getImmediate({optional:!0});r?n(r):(f("FirebaseCredentialsProvider","Auth not yet detected"),t.oc.resolve())}}),0)}return e.prototype.getToken=function(){var e=this,t=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.cc!==t?(f("FirebaseCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(g("string"==typeof n.accessToken),new fs(n.accessToken,e.currentUser)):null})):Promise.resolve(null)},e.prototype.invalidateToken=function(){this.forceRefresh=!0},e.prototype.setChangeListener=function(e,t){var n=this;this.asyncQueue=e,this.asyncQueue.enqueueRetryable((function(){return Object(r["a"])(n,void 0,void 0,(function(){return Object(r["c"])(this,(function(e){switch(e.label){case 0:return[4,this.oc.promise];case 1:return e.sent(),[4,t(this.currentUser)];case 2:return e.sent(),this.changeListener=t,[2]}}))}))}))},e.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},e.prototype.ac=function(){var e=this.auth&&this.auth.getUid();return g(null===e||"string"==typeof e),new Yi(e)},e}(),vs=function(){function e(e,t,n){this.hc=e,this.lc=t,this.fc=n,this.type="FirstParty",this.user=Yi.FIRST_PARTY}return Object.defineProperty(e.prototype,"authHeaders",{get:function(){var e={"X-Goog-AuthUser":this.lc},t=this.hc.auth.getAuthHeaderValueForFirstParty([]);return t&&(e.Authorization=t),this.fc&&(e["X-Goog-Iam-Authorization-Token"]=this.fc),e},enumerable:!1,configurable:!0}),e}(),gs=function(){function e(e,t,n){this.hc=e,this.lc=t,this.fc=n}return e.prototype.getToken=function(){return Promise.resolve(new vs(this.hc,this.lc,this.fc))},e.prototype.setChangeListener=function(e,t){e.enqueueRetryable((function(){return t(Yi.FIRST_PARTY)}))},e.prototype.removeChangeListener=function(){},e.prototype.invalidateToken=function(){},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ys(e,t,n){if(!n)throw new u(c.INVALID_ARGUMENT,"Function "+e+"() cannot be called with an empty "+t+".")}function bs(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new u(c.INVALID_ARGUMENT,"Invalid options passed to function "+e+'(): You cannot specify both "merge" and "mergeFields".');return t}function ws(e,t,n,r){if(!0===t&&!0===r)throw new u(c.INVALID_ARGUMENT,e+" and "+n+" cannot be used together.")}function Es(e){if(!W.isDocumentKey(e))throw new u(c.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e+" has "+e.length+".")}function xs(e){if(W.isDocumentKey(e))throw new u(c.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+e+" has "+e.length+".")}function _s(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=e.substring(0,20)+"..."),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){if(e.constructor){var t=/function\s+([^\s(]+)\s*\(/.exec(e.constructor.toString());if(t&&t.length>1)return t[1]}return null}(e);return t?"a custom "+t+" object":"an object"}return"function"==typeof e?"a function":v()}function Ts(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new u(c.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=_s(e);throw new u(c.INVALID_ARGUMENT,"Expected type '"+t.name+"', but it was: "+n)}return e}function As(e,t){if(t<=0)throw new u(c.INVALID_ARGUMENT,"Function "+e+"() requires a positive number, but it was: "+t+".")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ss=function(){function e(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new u(c.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new u(c.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,ws("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}return e.prototype.isEqual=function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams},e}(),Ms=function(){function e(e,t){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ss({}),this._settingsFrozen=!1,e instanceof ls?(this._databaseId=e,this._credentials=new ds):(this._app=e,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new u(c.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ls(e.options.projectId)}(e),this._credentials=new ms(t))}return Object.defineProperty(e.prototype,"app",{get:function(){if(!this._app)throw new u(c.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),e.prototype._setSettings=function(e){if(this._settingsFrozen)throw new u(c.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ss(e),void 0!==e.credentials&&(this._credentials=function(e){if(!e)return new ds;switch(e.type){case"gapi":var t=e.client;return g(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new gs(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new u(c.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))},e.prototype._getSettings=function(){return this._settings},e.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},e.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},e.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},e.prototype._terminate=function(){return e=this,(t=hs.get(e))&&(f("ComponentProvider","Removing Datastore"),hs.delete(e),t.terminate()),Promise.resolve();var e,t},e}(),Os=function(){function e(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}return Object.defineProperty(e.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new Cs(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._key)},e}(),Rs=function(){function e(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}return e.prototype.withConverter=function(t){return new e(this.firestore,t,this._query)},e}(),Cs=function(e){function t(t,n,r){var i=this;return(i=e.call(this,t,n,Ie(r))||this)._path=r,i.type="collection",i}return Object(r["b"])(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._path.popLast();return e.isEmpty()?null:new Os(this.firestore,null,new W(e))},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._path)},t}(Rs);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Is(e,t){for(var n,o=[],a=2;a<arguments.length;a++)o[a-2]=arguments[a];if(e=Object(i["i"])(e),ys("collection","path",t),e instanceof Ms)return xs(n=C.fromString.apply(C,Object(r["d"])([t],o))),new Cs(e,null,n);if(!(e instanceof Os||e instanceof Cs))throw new u(c.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return xs(n=C.fromString.apply(C,Object(r["d"])([e.path],o)).child(C.fromString(t))),new Cs(e.firestore,null,n)}function Ls(e,t){for(var n,o=[],a=2;a<arguments.length;a++)o[a-2]=arguments[a];if(e=Object(i["i"])(e),1===arguments.length&&(t=w.u()),ys("doc","path",t),e instanceof Ms)return Es(n=C.fromString.apply(C,Object(r["d"])([t],o))),new Os(e,null,new W(n));if(!(e instanceof Os||e instanceof Cs))throw new u(c.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Es(n=e._path.child(C.fromString.apply(C,Object(r["d"])([t],o)))),new Os(e.firestore,e instanceof Cs?e.converter:null,new W(n))}function Ds(e,t){return e=Object(i["i"])(e),t=Object(i["i"])(t),(e instanceof Os||e instanceof Cs)&&(t instanceof Os||t instanceof Cs)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function Ps(e,t){return e=Object(i["i"])(e),t=Object(i["i"])(t),e instanceof Rs&&t instanceof Rs&&e.firestore===t.firestore&&He(e._query,t._query)&&e.converter===t.converter
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var Ns=function(){function e(){var e=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=!1,this.Tc=[],this.Zi=new fo(this,"async_queue_retry"),this.Ic=function(){var t=lo();t&&f("AsyncQueue","Visibility state changed to "+t.visibilityState),e.Zi.Gi()};var t=lo();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Ic)}return Object.defineProperty(e.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),e.prototype.enqueueAndForget=function(e){this.enqueue(e)},e.prototype.enqueueAndForgetEvenWhileRestricted=function(e){this.Ac(),this.Rc(e)},e.prototype.enterRestrictedMode=function(e){if(!this._c){this._c=!0,this.Ec=e||!1;var t=lo();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ic)}},e.prototype.enqueue=function(e){var t=this;if(this.Ac(),this._c)return new Promise((function(){}));var n=new nr;return this.Rc((function(){return t._c&&t.Ec?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))},e.prototype.enqueueRetryable=function(e){var t=this;this.enqueueAndForget((function(){return t.wc.push(e),t.bc()}))},e.prototype.bc=function(){return Object(r["a"])(this,void 0,void 0,(function(){var e,t=this;return Object(r["c"])(this,(function(n){switch(n.label){case 0:if(0===this.wc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return n.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!cr(e=n.sent()))throw e;return f("AsyncQueue","Operation failed with retryable error: "+e),[3,4];case 4:this.wc.length>0&&this.Zi.ji((function(){return t.bc()})),n.label=5;case 5:return[2]}}))}))},e.prototype.Rc=function(e){var t=this,n=this.dc.then((function(){return t.gc=!0,e().catch((function(e){throw t.yc=e,t.gc=!1,d("INTERNAL UNHANDLED ERROR: ",function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e)),e})).then((function(e){return t.gc=!1,e}))}));return this.dc=n,n},e.prototype.enqueueAfterDelay=function(e,t,n){var r=this;this.Ac(),this.Tc.indexOf(e)>-1&&(t=0);var i=Wo.createAndSchedule(this,e,t,n,(function(e){return r.vc(e)}));return this.mc.push(i),i},e.prototype.Ac=function(){this.yc&&v()},e.prototype.verifyOperationInProgress=function(){},e.prototype.Pc=function(){return Object(r["a"])(this,void 0,void 0,(function(){var e;return Object(r["c"])(this,(function(t){switch(t.label){case 0:return[4,e=this.dc];case 1:t.sent(),t.label=2;case 2:if(e!==this.dc)return[3,0];t.label=3;case 3:return[2]}}))}))},e.prototype.Vc=function(e){for(var t=0,n=this.mc;t<n.length;t++)if(n[t].timerId===e)return!0;return!1},e.prototype.Sc=function(e){var t=this;return this.Pc().then((function(){t.mc.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));for(var n=0,r=t.mc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==e&&i.timerId===e)break}return t.Pc()}))},e.prototype.Dc=function(e){this.Tc.push(e)},e.prototype.vc=function(e){var t=this.mc.indexOf(e);this.mc.splice(t,1)},e}();function Bs(e){return function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=e,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(e)}(function(){function e(){this._progressObserver={},this._taskCompletionResolver=new nr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}e.prototype.onProgress=function(e,t,n){this._progressObserver={next:e,error:t,complete:n}},e.prototype.catch=function(e){return this._taskCompletionResolver.promise.catch(e)},e.prototype.then=function(e,t){return this._taskCompletionResolver.promise.then(e,t)},e.prototype._completeWith=function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)},e.prototype._failWith=function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)},e.prototype._updateProgress=function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}})();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ks=-1,Fs=function(e){function t(t,n){var r=this;return(r=e.call(this,t,n)||this).type="firestore",r._queue=new Ns,r._persistenceKey="name"in t?t.name:"[DEFAULT]",r}return Object(r["b"])(t,e),t.prototype._terminate=function(){return this._firestoreClient||Hs(this),this._firestoreClient.terminate()},t}(Ms);function Us(e){return e._firestoreClient||Hs(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Hs(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new us(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new Ja(e._credentials,e._queue,r)}function js(e,t,n){var i=this,o=new nr;return e.asyncQueue.enqueue((function(){return Object(r["a"])(i,void 0,void 0,(function(){var i;return Object(r["c"])(this,(function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),[4,Za(e,n)];case 1:return r.sent(),[4,$a(e,t)];case 2:return r.sent(),o.resolve(),[3,4];case 3:if(!function(e){return"FirebaseError"===e.name?e.code===c.FAILED_PRECONDITION||e.code===c.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(i=r.sent()))throw i;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i),o.reject(i),[3,4];case 4:return[2]}}))}))})).then((function(){return o.promise}))}function Gs(e){if(e._initialized||e._terminated)throw new u(c.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vs=function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=0;n<e.length;++n)if(0===e[n].length)throw new u(c.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new L(e)}return e.prototype.isEqual=function(e){return this._internalPath.isEqual(e._internalPath)},e}(),zs=function(){function e(e){this._byteString=e}return e.fromBase64String=function(t){try{return new e(P.fromBase64String(t))}catch(t){throw new u(c.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}},e.fromUint8Array=function(t){return new e(P.fromUint8Array(t))},e.prototype.toBase64=function(){return this._byteString.toBase64()},e.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},e.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},e.prototype.isEqual=function(e){return this._byteString.isEqual(e._byteString)},e}(),Ws=function(e){this._methodName=e},qs=function(){function e(e,t){if(!isFinite(e)||e<-90||e>90)throw new u(c.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new u(c.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}return Object.defineProperty(e.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(e){return this._lat===e._lat&&this._long===e._long},e.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},e.prototype._compareTo=function(e){return E(this._lat,e._lat)||E(this._long,e._long)},e}(),Ys=/^__.*__$/,Xs=function(){function e(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}return e.prototype.toMutation=function(e,t){return null!==this.fieldMask?new yt(e,this.data,this.fieldMask,t,this.fieldTransforms):new gt(e,this.data,t,this.fieldTransforms)},e}(),Qs=function(){function e(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}return e.prototype.toMutation=function(e,t){return new yt(e,this.data,this.fieldMask,t,this.fieldTransforms)},e}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ks(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw v()}}var Js=function(){function e(e,t,n,r,i,o){this.settings=e,this.databaseId=t,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Cc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(e.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Nc",{get:function(){return this.settings.Nc},enumerable:!1,configurable:!0}),e.prototype.xc=function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},e.prototype.kc=function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.xc({path:n,Fc:!1});return r.$c(e),r},e.prototype.Oc=function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.xc({path:n,Fc:!1});return r.Cc(),r},e.prototype.Mc=function(e){return this.xc({path:void 0,Fc:!0})},e.prototype.Lc=function(e){return gc(e,this.settings.methodName,this.settings.Bc||!1,this.path,this.settings.qc)},e.prototype.contains=function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))},e.prototype.Cc=function(){if(this.path)for(var e=0;e<this.path.length;e++)this.$c(this.path.get(e))},e.prototype.$c=function(e){if(0===e.length)throw this.Lc("Document fields must not be empty");if(Ks(this.Nc)&&Ys.test(e))throw this.Lc('Document fields cannot begin and end with "__"')},e}(),Zs=function(){function e(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.R=n||ho(e)}return e.prototype.Uc=function(e,t,n,r){return void 0===r&&(r=!1),new Js({Nc:e,methodName:t,qc:n,path:L.emptyPath(),Fc:!1,Bc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},e}();function $s(e){var t=e._freezeSettings(),n=ho(e._databaseId);return new Zs(e._databaseId,!!t.ignoreUndefinedProperties,n)}function ec(e,t,n,r,i,o){void 0===o&&(o={});var a=e.Uc(o.merge||o.mergeFields?2:0,t,n,i);dc("Data must be an object, but it was:",a,r);var s,l,h=hc(r,a);if(o.merge)s=new D(a.fieldMask),l=a.fieldTransforms;else if(o.mergeFields){for(var f=[],d=0,p=o.mergeFields;d<p.length;d++){var m=pc(t,p[d],n);if(!a.contains(m))throw new u(c.INVALID_ARGUMENT,"Field '"+m+"' is specified in your field mask but missing from your input data.");yc(f,m)||f.push(m)}s=new D(f),l=a.fieldTransforms.filter((function(e){return s.covers(e.field)}))}else s=null,l=a.fieldTransforms;return new Xs(new ae(h),s,l)}var tc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r["b"])(t,e),t.prototype._toFieldTransform=function(e){if(2!==e.Nc)throw 1===e.Nc?e.Lc(this._methodName+"() can only appear at the top level of your update data"):e.Lc(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return e.fieldMask.push(e.path),null},t.prototype.isEqual=function(e){return e instanceof t},t}(Ws);function nc(e,t,n){return new Js({Nc:3,qc:t.settings.qc,methodName:e._methodName,Fc:n},t.databaseId,t.R,t.ignoreUndefinedProperties)}var rc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r["b"])(t,e),t.prototype._toFieldTransform=function(e){return new st(e.path,new $e)},t.prototype.isEqual=function(e){return e instanceof t},t}(Ws),ic=function(e){function t(t,n){var r=this;return(r=e.call(this,t)||this).Kc=n,r}return Object(r["b"])(t,e),t.prototype._toFieldTransform=function(e){var t=nc(this,e,!0),n=this.Kc.map((function(e){return lc(e,t)})),r=new et(n);return new st(e.path,r)},t.prototype.isEqual=function(e){return this===e},t}(Ws),oc=function(e){function t(t,n){var r=this;return(r=e.call(this,t)||this).Kc=n,r}return Object(r["b"])(t,e),t.prototype._toFieldTransform=function(e){var t=nc(this,e,!0),n=this.Kc.map((function(e){return lc(e,t)})),r=new nt(n);return new st(e.path,r)},t.prototype.isEqual=function(e){return this===e},t}(Ws),ac=function(e){function t(t,n){var r=this;return(r=e.call(this,t)||this).Qc=n,r}return Object(r["b"])(t,e),t.prototype._toFieldTransform=function(e){var t=new it(e.R,Xe(e.R,this.Qc));return new st(e.path,t)},t.prototype.isEqual=function(e){return this===e},t}(Ws);function sc(e,t,n,r){var o=e.Uc(1,t,n);dc("Data must be an object, but it was:",o,r);var a=[],s=ae.empty();M(r,(function(e,r){var c=vc(t,e,n);r=Object(i["i"])(r);var u=o.Oc(c);if(r instanceof tc)a.push(c);else{var l=lc(r,u);null!=l&&(a.push(c),s.set(c,l))}}));var c=new D(a);return new Qs(s,c,o.fieldTransforms)}function cc(e,t,n,r,o,a){var s=e.Uc(1,t,n),l=[pc(t,r,n)],h=[o];if(a.length%2!=0)throw new u(c.INVALID_ARGUMENT,"Function "+t+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var f=0;f<a.length;f+=2)l.push(pc(t,a[f])),h.push(a[f+1]);for(var d=[],p=ae.empty(),m=l.length-1;m>=0;--m)if(!yc(d,l[m])){var v=l[m],g=h[m];g=Object(i["i"])(g);var y=s.Oc(v);if(g instanceof tc)d.push(v);else{var b=lc(g,y);null!=b&&(d.push(v),p.set(v,b))}}var w=new D(d);return new Qs(p,w,s.fieldTransforms)}function uc(e,t,n,r){return void 0===r&&(r=!1),lc(n,e.Uc(r?4:3,t))}function lc(e,t){if(fc(e=Object(i["i"])(e)))return dc("Unsupported field value:",t,e),hc(e,t);if(e instanceof Ws)return function(e,t){if(!Ks(t.Nc))throw t.Lc(e._methodName+"() can only be used with update() and set()");if(!t.path)throw t.Lc(e._methodName+"() is not currently supported inside arrays");var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Fc&&4!==t.Nc)throw t.Lc("Nested arrays are not supported");return function(e,t){for(var n=[],r=0,i=0,o=e;i<o.length;i++){var a=lc(o[i],t.Mc(r));null==a&&(a={nullValue:"NULL_VALUE"}),n.push(a),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=Object(i["i"])(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Xe(t.R,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=T.fromDate(e);return{timestampValue:nn(t.R,n)}}if(e instanceof T)return n=new T(e.seconds,1e3*Math.floor(e.nanoseconds/1e3)),{timestampValue:nn(t.R,n)};if(e instanceof qs)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof zs)return{bytesValue:rn(t.R,e._byteString)};if(e instanceof Os){n=t.databaseId;var r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Lc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:sn(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.Lc("Unsupported field value: "+_s(e))}(e,t)}function hc(e,t){var n={};return O(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):M(e,(function(e,r){var i=lc(r,t.kc(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function fc(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof T||e instanceof qs||e instanceof zs||e instanceof Os||e instanceof Ws)}function dc(e,t,n){if(!fc(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=_s(n);throw"an object"===r?t.Lc(e+" a custom object"):t.Lc(e+" "+r)}}function pc(e,t,n){if((t=Object(i["i"])(t))instanceof Vs)return t._internalPath;if("string"==typeof t)return vc(e,t);throw gc("Field path arguments must be of type string or FieldPath.",e,!1,void 0,n)}var mc=new RegExp("[~\\*/\\[\\]]");function vc(e,t,n){if(t.search(mc)>=0)throw gc("Invalid field path ("+t+"). Paths must not contain '~', '*', '/', '[', or ']'",e,!1,void 0,n);try{return(new(Vs.bind.apply(Vs,Object(r["d"])([void 0],t.split(".")))))._internalPath}catch(i){throw gc("Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",e,!1,void 0,n)}}function gc(e,t,n,r,i){var o=r&&!r.isEmpty(),a=void 0!==i,s="Function "+t+"() called with invalid data";n&&(s+=" (via `toFirestore()`)");var l="";return(o||a)&&(l+=" (found",o&&(l+=" in field "+r),a&&(l+=" in document "+i),l+=")"),new u(c.INVALID_ARGUMENT,(s+=". ")+e+l)}function yc(e,t){return e.some((function(e){return e.isEqual(t)}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bc=function(){function e(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(e.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ref",{get:function(){return new Os(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),e.prototype.exists=function(){return null!==this._document},e.prototype.data=function(){if(this._document){if(this._converter){var e=new wc(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}},e.prototype.get=function(e){if(this._document){var t=this._document.data.field(Ec("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}},e}(),wc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r["b"])(t,e),t.prototype.data=function(){return e.prototype.data.call(this)},t}(bc);function Ec(e,t){return"string"==typeof t?vc(e,t):t instanceof Vs?t._internalPath:t._delegate._internalPath}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xc=function(){function e(e,t){this.hasPendingWrites=e,this.fromCache=t}return e.prototype.isEqual=function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache},e}(),_c=function(e){function t(t,n,r,i,o,a){var s=this;return(s=e.call(this,t,n,r,i,a)||this)._firestore=t,s._firestoreImpl=t,s.metadata=o,s}return Object(r["b"])(t,e),t.prototype.exists=function(){return e.prototype.exists.call(this)},t.prototype.data=function(e){if(void 0===e&&(e={}),this._document){if(this._converter){var t=new Tc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}},t.prototype.get=function(e,t){if(void 0===t&&(t={}),this._document){var n=this._document.data.field(Ec("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}},t}(bc),Tc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r["b"])(t,e),t.prototype.data=function(t){return void 0===t&&(t={}),e.prototype.data.call(this,t)},t}(_c),Ac=function(){function e(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new xc(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(e.prototype,"docs",{get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),e.prototype.forEach=function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new Tc(n._firestore,n._userDataWriter,r.key,r,new xc(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))},e.prototype.docChanges=function(e){void 0===e&&(e={});var t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new u(c.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){return{type:"added",doc:new Tc(e._firestore,e._userDataWriter,t.doc.key,t.doc,new xc(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new Tc(e._firestore,e._userDataWriter,t.doc.key,t.doc,new xc(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,o=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(o=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:Sc(t.type),doc:n,oldIndex:i,newIndex:o}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges},e}();function Sc(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return v()}}function Mc(e,t){return e instanceof _c&&t instanceof _c?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof Ac&&t instanceof Ac&&e._firestore===t._firestore&&Ps(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oc(e){if(De(e)&&0===e.explicitOrderBy.length)throw new u(c.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Rc=function(){};function Cc(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0,i=t;r<i.length;r++){var o=i[r];e=o._apply(e)}return e}var Ic=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).jc=t,i.Wc=n,i.Gc=r,i.type="where",i}return Object(r["b"])(t,e),t.prototype._apply=function(e){var t=$s(e.firestore),n=function(e,t,n,r,i,o,a){var s;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new u(c.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){Fc(a,o);for(var l=[],h=0,f=a;h<f.length;h++){var d=f[h];l.push(kc(r,e,d))}s={arrayValue:{values:l}}}else s=kc(r,e,a)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||Fc(a,o),s=uc(n,"where",a,"in"===o||"not-in"===o);var p=pe.create(i,o,s);return function(e,t){if(t.g()){var n=Ne(e);if(null!==n&&!n.isEqual(t.field))throw new u(c.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+t.field.toString()+"'");var r=Pe(e);null!==r&&Uc(e,t.field,r)}var i=function(e,t){for(var n=0,r=e.filters;n<r.length;n++){var i=r[n];if(t.indexOf(i.op)>=0)return i.op}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new u(c.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+t.op.toString()+"' filter."):new u(c.INVALID_ARGUMENT,"Invalid query. You cannot use '"+t.op.toString()+"' filters with '"+i.toString()+"' filters.")}(e,p),p}(e._query,0,t,e.firestore._databaseId,this.jc,this.Wc,this.Gc);return new Rs(e.firestore,e.converter,function(e,t){var n=e.filters.concat([t]);return new Re(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))},t}(Rc),Lc=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).jc=t,r.zc=n,r.type="orderBy",r}return Object(r["b"])(t,e),t.prototype._apply=function(e){var t=function(e,t,n){if(null!==e.startAt)throw new u(c.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new u(c.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Ae(t,n);return function(e,t){if(null===Pe(e)){var n=Ne(e);null!==n&&Uc(e,n,t.field)}}(e,r),r}(e._query,this.jc,this.zc);return new Rs(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new Re(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))},t}(Rc),Dc=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).type=t,i.Hc=n,i.Jc=r,i}return Object(r["b"])(t,e),t.prototype._apply=function(e){return new Rs(e.firestore,e.converter,Ue(e._query,this.Hc,this.Jc))},t}(Rc),Pc=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).type=t,i.Yc=n,i.Xc=r,i}return Object(r["b"])(t,e),t.prototype._apply=function(e){var t=Bc(e,this.type,this.Yc,this.Xc);return new Rs(e.firestore,e.converter,function(e,t){return new Re(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))},t}(Rc),Nc=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).type=t,i.Yc=n,i.Xc=r,i}return Object(r["b"])(t,e),t.prototype._apply=function(e){var t=Bc(e,this.type,this.Yc,this.Xc);return new Rs(e.firestore,e.converter,function(e,t){return new Re(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))},t}(Rc);function Bc(e,t,n,r){if(n[0]=Object(i["i"])(n[0]),n[0]instanceof bc)return function(e,t,n,r,i){if(!r)throw new u(c.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],a=0,s=ke(e);a<s.length;a++){var l=s[a];if(l.field.isKeyField())o.push($(t,r.key));else{var h=r.data.field(l.field);if(U(h))throw new u(c.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+l.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===h){var f=l.field.canonicalString();throw new u(c.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+f+"' (used as the orderBy) does not exist.")}o.push(h)}}return new _e(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var o=$s(e.firestore);return function(e,t,n,r,i,o){var a=e.explicitOrderBy;if(i.length>a.length)throw new u(c.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var s=[],l=0;l<i.length;l++){var h=i[l];if(a[l].field.isKeyField()){if("string"!=typeof h)throw new u(c.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof h);if(!Be(e)&&-1!==h.indexOf("/"))throw new u(c.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+h+"' contains a slash.");var f=e.path.child(C.fromString(h));if(!W.isDocumentKey(f))throw new u(c.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+f+"' is not because it contains an odd number of segments.");var d=new W(f);s.push($(t,d))}else{var p=uc(n,r,h);s.push(p)}}return new _e(s,o)}(e._query,e.firestore._databaseId,o,t,n,r)}function kc(e,t,n){if("string"==typeof(n=Object(i["i"])(n))){if(""===n)throw new u(c.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Be(t)&&-1!==n.indexOf("/"))throw new u(c.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=t.path.child(C.fromString(n));if(!W.isDocumentKey(r))throw new u(c.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return $(e,new W(r))}if(n instanceof Os)return $(e,n._key);throw new u(c.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+_s(n)+".")}function Fc(e,t){if(!Array.isArray(e)||0===e.length)throw new u(c.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+t.toString()+"' filters.");if(e.length>10)throw new u(c.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters support a maximum of 10 elements in the value array.")}function Uc(e,t,n){if(!n.isEqual(t))throw new u(c.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+t.toString()+"' and so you must also use '"+t.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Hc=function(){function e(){}return e.prototype.convertValue=function(e,t){switch(void 0===t&&(t="none"),q(e)){case 0:return null;case 1:return e.booleanValue;case 2:return k(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(F(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw v()}},e.prototype.convertObject=function(e,t){var n=this,r={};return M(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r},e.prototype.convertGeoPoint=function(e){return new qs(k(e.latitude),k(e.longitude))},e.prototype.convertArray=function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))},e.prototype.convertServerTimestamp=function(e,t){switch(t){case"previous":var n=H(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(j(e));default:return null}},e.prototype.convertTimestamp=function(e){var t=B(e);return new T(t.seconds,t.nanos)},e.prototype.convertDocumentKey=function(e,t){var n=C.fromString(e);g(Ln(n));var r=new ls(n.get(1),n.get(3)),i=new W(n.popFirst(5));return r.isEqual(t)||d("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+t.projectId+"/"+t.database+") instead."),i},e}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jc(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var Gc=function(e){function t(t){var n=this;return(n=e.call(this)||this).firestore=t,n}return Object(r["b"])(t,e),t.prototype.convertBytes=function(e){return new zs(e)},t.prototype.convertReference=function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new Os(this.firestore,null,t)},t}(Hc),Vc=function(){function e(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=$s(e)}return e.prototype.set=function(e,t,n){this._verifyNotCommitted();var r=zc(e,this._firestore),i=jc(r.converter,t,n),o=ec(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,ut.none())),this},e.prototype.update=function(e,t,n){for(var r=[],o=3;o<arguments.length;o++)r[o-3]=arguments[o];this._verifyNotCommitted();var a,s=zc(e,this._firestore);return a="string"==typeof(t=Object(i["i"])(t))||t instanceof Vs?cc(this._dataReader,"WriteBatch.update",s._key,t,n,r):sc(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(a.toMutation(s._key,ut.exists(!0))),this},e.prototype.delete=function(e){this._verifyNotCommitted();var t=zc(e,this._firestore);return this._mutations=this._mutations.concat(new Tt(t._key,ut.none())),this},e.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},e.prototype._verifyNotCommitted=function(){if(this._committed)throw new u(c.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},e}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zc(e,t){if((e=Object(i["i"])(e)).firestore!==t)throw new u(c.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wc=function(e){function t(t){var n=this;return(n=e.call(this)||this).firestore=t,n}return Object(r["b"])(t,e),t.prototype.convertBytes=function(e){return new zs(e)},t.prototype.convertReference=function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new Os(this.firestore,null,t)},t}(Hc);function qc(e,t,n){for(var r=[],o=3;o<arguments.length;o++)r[o-3]=arguments[o];e=Ts(e,Os);var a=Ts(e.firestore,Fs),s=$s(a);return Xc(a,[("string"==typeof(t=Object(i["i"])(t))||t instanceof Vs?cc(s,"updateDoc",e._key,t,n,r):sc(s,"updateDoc",e._key,t)).toMutation(e._key,ut.exists(!0))])}function Yc(e){for(var t,n,o,a=[],s=1;s<arguments.length;s++)a[s-1]=arguments[s];e=Object(i["i"])(e);var c={includeMetadataChanges:!1},u=0;"object"!=typeof a[u]||Bs(a[u])||(c=a[u],u++);var l,h,f,d={includeMetadataChanges:c.includeMetadataChanges};if(Bs(a[u])){var p=a[u];a[u]=null===(t=p.next)||void 0===t?void 0:t.bind(p),a[u+1]=null===(n=p.error)||void 0===n?void 0:n.bind(p),a[u+2]=null===(o=p.complete)||void 0===o?void 0:o.bind(p)}if(e instanceof Os)h=Ts(e.firestore,Fs),f=Ie(e._key.path),l={next:function(t){a[u]&&a[u](Qc(h,e,t))},error:a[u+1],complete:a[u+2]};else{var m=Ts(e,Rs);h=Ts(m.firestore,Fs),f=m._query;var v=new Wc(h);l={next:function(e){a[u]&&a[u](new Ac(h,v,m,e))},error:a[u+1],complete:a[u+2]},Oc(e._query)}return function(e,t,n,i){var o=this,a=new Xa(i),s=new ra(t,a,n);return e.asyncQueue.enqueueAndForget((function(){return Object(r["a"])(o,void 0,void 0,(function(){var t;return Object(r["c"])(this,(function(n){switch(n.label){case 0:return t=Zo,[4,as(e)];case 1:return[2,t.apply(void 0,[n.sent(),s])]}}))}))})),function(){a.Wo(),e.asyncQueue.enqueueAndForget((function(){return Object(r["a"])(o,void 0,void 0,(function(){var t;return Object(r["c"])(this,(function(n){switch(n.label){case 0:return t=$o,[4,as(e)];case 1:return[2,t.apply(void 0,[n.sent(),s])]}}))}))}))}}(Us(h),f,d,l)}function Xc(e,t){return function(e,t){var n=this,i=new nr;return e.asyncQueue.enqueueAndForget((function(){return Object(r["a"])(n,void 0,void 0,(function(){var n;return Object(r["c"])(this,(function(r){switch(r.label){case 0:return n=va,[4,os(e)];case 1:return[2,n.apply(void 0,[r.sent(),t,i])]}}))}))})),i.promise}(Us(e),t)}function Qc(e,t,n){var r=n.docs.get(t._key),i=new Wc(e);return new _c(e,i,t._key,r,new xc(n.hasPendingWrites,n.fromCache),t.converter)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Kc=function(e){function t(t,n){var r=this;return(r=e.call(this,t,n)||this)._firestore=t,r}return Object(r["b"])(t,e),t.prototype.get=function(t){var n=this,r=zc(t,this._firestore),i=new Wc(this._firestore);return e.prototype.get.call(this,t).then((function(e){return new _c(n._firestore,i,r._key,e._document,new xc(!1,!1),r.converter)}))},t}(function(){function e(e,t){this._firestore=e,this._transaction=t,this._dataReader=$s(e)}return e.prototype.get=function(e){var t=this,n=zc(e,this._firestore),r=new Gc(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return v();var i=e[0];if(i.isFoundDocument())return new bc(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new bc(t._firestore,r,n._key,null,n.converter);throw v()}))},e.prototype.set=function(e,t,n){var r=zc(e,this._firestore),i=jc(r.converter,t,n),o=ec(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this},e.prototype.update=function(e,t,n){for(var r=[],o=3;o<arguments.length;o++)r[o-3]=arguments[o];var a,s=zc(e,this._firestore);return a="string"==typeof(t=Object(i["i"])(t))||t instanceof Vs?cc(this._dataReader,"Transaction.update",s._key,t,n,r):sc(this._dataReader,"Transaction.update",s._key,t),this._transaction.update(s._key,a),this},e.prototype.delete=function(e){var t=zc(e,this._firestore);return this._transaction.delete(t._key),this},e}());
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jc(){if("undefined"==typeof Uint8Array)throw new u(c.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Zc(){if("undefined"==typeof atob)throw new u(c.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var $c=function(){function e(e){this._delegate=e}return e.fromBase64String=function(t){return Zc(),new e(zs.fromBase64String(t))},e.fromUint8Array=function(t){return Jc(),new e(zs.fromUint8Array(t))},e.prototype.toBase64=function(){return Zc(),this._delegate.toBase64()},e.prototype.toUint8Array=function(){return Jc(),this._delegate.toUint8Array()},e.prototype.isEqual=function(e){return this._delegate.isEqual(e._delegate)},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e}(),eu=function(){function e(){}return e.prototype.enableIndexedDbPersistence=function(e,t){return function(e,t){Gs(e=Ts(e,Fs));var n=Us(e),r=e._freezeSettings(),i=new Ya;return js(n,i,new Wa(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})},e.prototype.enableMultiTabIndexedDbPersistence=function(e){return function(e){Gs(e=Ts(e,Fs));var t=Us(e),n=e._freezeSettings(),r=new Ya;return js(t,r,new qa(r,n.cacheSizeBytes))}(e._delegate)},e.prototype.clearIndexedDbPersistence=function(e){return function(e){var t=this;if(e._initialized&&!e._terminated)throw new u(c.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new nr;return e._queue.enqueueAndForgetEvenWhileRestricted((function(){return Object(r["a"])(t,void 0,void 0,(function(){var t;return Object(r["c"])(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,function(e){return Object(r["a"])(this,void 0,void 0,(function(){var t;return Object(r["c"])(this,(function(n){switch(n.label){case 0:return or.yt()?(t=e+"main",[4,or.delete(t)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))}(vi(e._databaseId,e._persistenceKey))];case 1:return i.sent(),n.resolve(),[3,3];case 2:return t=i.sent(),n.reject(t),[3,3];case 3:return[2]}}))}))})),n.promise}(e._delegate)},e}(),tu=function(){function e(e,t,n){var r=this;this._delegate=t,this.Zc=n,this.INTERNAL={delete:function(){return r.terminate()}},e instanceof ls||(this.tu=e)}return Object.defineProperty(e.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),e.prototype.settings=function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||p("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)},e.prototype.useEmulator=function(e,t,n){void 0===n&&(n={}),function(e,t,n,r){var o;void 0===r&&(r={});var a=(e=Ts(e,Ms))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&p("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:t+":"+n,ssl:!1})),r.mockUserToken){var s,l;if("string"==typeof r.mockUserToken)s=r.mockUserToken,l=Yi.MOCK_USER;else{s=Object(i["e"])(r.mockUserToken,null===(o=e._app)||void 0===o?void 0:o.options.projectId);var h=r.mockUserToken.sub||r.mockUserToken.user_id;if(!h)throw new u(c.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Yi(h)}e._credentials=new ps(new fs(s,l))}}(this._delegate,e,t,n)},e.prototype.enableNetwork=function(){return function(e){var t=this;return e.asyncQueue.enqueue((function(){return Object(r["a"])(t,void 0,void 0,(function(){var t,n;return Object(r["c"])(this,(function(r){switch(r.label){case 0:return[4,ns(e)];case 1:return t=r.sent(),[4,is(e)];case 2:return n=r.sent(),[2,(t.setNetworkEnabled(!0),function(e){var t=y(e);return t.Or.delete(0),wo(t)}(n))]}}))}))}))}(Us(Ts(this._delegate,Fs)))},e.prototype.disableNetwork=function(){return function(e){var t=this;return e.asyncQueue.enqueue((function(){return Object(r["a"])(t,void 0,void 0,(function(){var t,n;return Object(r["c"])(this,(function(i){switch(i.label){case 0:return[4,ns(e)];case 1:return t=i.sent(),[4,is(e)];case 2:return n=i.sent(),[2,(t.setNetworkEnabled(!1),function(e){return Object(r["a"])(this,void 0,void 0,(function(){var t;return Object(r["c"])(this,(function(n){switch(n.label){case 0:return(t=y(e)).Or.add(0),[4,Eo(t)];case 1:return n.sent(),t.Br.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(Us(Ts(this._delegate,Fs)))},e.prototype.enablePersistence=function(e){var t=!1,n=!1;return e&&ws("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this.Zc.enableMultiTabIndexedDbPersistence(this):this.Zc.enableIndexedDbPersistence(this,n)},e.prototype.clearPersistence=function(){return this.Zc.clearIndexedDbPersistence(this)},e.prototype.terminate=function(){return this.tu&&(this.tu._removeServiceInstance("firestore"),this.tu._removeServiceInstance("firestore-exp")),this._delegate._delete()},e.prototype.waitForPendingWrites=function(){return function(e){var t=this,n=new nr;return e.asyncQueue.enqueueAndForget((function(){return Object(r["a"])(t,void 0,void 0,(function(){var t;return Object(r["c"])(this,(function(r){switch(r.label){case 0:return t=xa,[4,os(e)];case 1:return[2,t.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(Us(Ts(this._delegate,Fs)))},e.prototype.onSnapshotsInSync=function(e){return function(e,t){return function(e,t){var n=this,i=new Xa(t);return e.asyncQueue.enqueueAndForget((function(){return Object(r["a"])(n,void 0,void 0,(function(){var t;return Object(r["c"])(this,(function(n){switch(n.label){case 0:return t=function(e,t){y(e).Gr.add(t),t.next()},[4,as(e)];case 1:return[2,t.apply(void 0,[n.sent(),i])]}}))}))})),function(){i.Wo(),e.asyncQueue.enqueueAndForget((function(){return Object(r["a"])(n,void 0,void 0,(function(){var t;return Object(r["c"])(this,(function(n){switch(n.label){case 0:return t=function(e,t){y(e).Gr.delete(t)},[4,as(e)];case 1:return[2,t.apply(void 0,[n.sent(),i])]}}))}))}))}}(Us(e=Ts(e,Fs)),Bs(t)?t:{next:t})}(this._delegate,e)},Object.defineProperty(e.prototype,"app",{get:function(){if(!this.tu)throw new u(c.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.tu},enumerable:!1,configurable:!0}),e.prototype.collection=function(e){try{return new vu(this,Is(this._delegate,e))}catch(e){throw cu(e,"collection()","Firestore.collection()")}},e.prototype.doc=function(e){try{return new su(this,Ls(this._delegate,e))}catch(e){throw cu(e,"doc()","Firestore.doc()")}},e.prototype.collectionGroup=function(e){try{return new du(this,function(e,t){if(e=Ts(e,Ms),ys("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new u(c.INVALID_ARGUMENT,"Invalid collection ID '"+t+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new Rs(e,null,function(e){return new Re(C.emptyPath(),e)}(t))}(this._delegate,e))}catch(e){throw cu(e,"collectionGroup()","Firestore.collectionGroup()")}},e.prototype.runTransaction=function(e){var t=this;return function(e,t){return function(e,t){var n=this,i=new nr;return e.asyncQueue.enqueueAndForget((function(){return Object(r["a"])(n,void 0,void 0,(function(){var n;return Object(r["c"])(this,(function(r){switch(r.label){case 0:return[4,function(e){return ts(e).then((function(e){return e.datastore}))}(e)];case 1:return n=r.sent(),new Ka(e.asyncQueue,n,t,i).run(),[2]}}))}))})),i.promise}(Us(e),(function(n){return t(new Kc(e,n))}))}(this._delegate,(function(n){return e(new iu(t,n))}))},e.prototype.batch=function(){var e=this;return Us(this._delegate),new ou(new Vc(this._delegate,(function(t){return Xc(e._delegate,t)})))},e.prototype.loadBundle=function(e){throw new u(c.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},e.prototype.namedQuery=function(e){throw new u(c.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},e}(),nu=function(e){function t(t){var n=this;return(n=e.call(this)||this).firestore=t,n}return Object(r["b"])(t,e),t.prototype.convertBytes=function(e){return new $c(new zs(e))},t.prototype.convertReference=function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return su.eu(t,this.firestore,null)},t}(Hc);function ru(e){var t;t=e,l.setLogLevel(t)}var iu=function(){function e(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new nu(e)}return e.prototype.get=function(e){var t=this,n=gu(e);return this._delegate.get(n).then((function(e){return new hu(t._firestore,new _c(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))},e.prototype.set=function(e,t,n){var r=gu(e);return n?(bs("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this},e.prototype.update=function(e,t,n){for(var i,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];var s=gu(e);return 2===arguments.length?this._delegate.update(s,t):(i=this._delegate).update.apply(i,Object(r["d"])([s,t,n],o)),this},e.prototype.delete=function(e){var t=gu(e);return this._delegate.delete(t),this},e}(),ou=function(){function e(e){this._delegate=e}return e.prototype.set=function(e,t,n){var r=gu(e);return n?(bs("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this},e.prototype.update=function(e,t,n){for(var i,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];var s=gu(e);return 2===arguments.length?this._delegate.update(s,t):(i=this._delegate).update.apply(i,Object(r["d"])([s,t,n],o)),this},e.prototype.delete=function(e){var t=gu(e);return this._delegate.delete(t),this},e.prototype.commit=function(){return this._delegate.commit()},e}(),au=function(){function e(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}return e.prototype.fromFirestore=function(e,t){var n=new Tc(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new fu(this._firestore,n),null!=t?t:{})},e.prototype.toFirestore=function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)},e.nu=function(t,n){var r=e.su,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var o=i.get(n);return o||(o=new e(t,new nu(t),n),i.set(n,o)),o},e}();au.su=new WeakMap;var su=function(){function e(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new nu(e)}return e.iu=function(t,n,r){if(t.length%2!=0)throw new u(c.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.canonicalString()+" has "+t.length);return new e(n,new Os(n._delegate,r,new W(t)))},e.eu=function(t,n,r){return new e(n,new Os(n._delegate,r,t))},Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new vu(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),e.prototype.collection=function(e){try{return new vu(this.firestore,Is(this._delegate,e))}catch(e){throw cu(e,"collection()","DocumentReference.collection()")}},e.prototype.isEqual=function(e){return(e=Object(i["i"])(e))instanceof Os&&Ds(this._delegate,e)},e.prototype.set=function(e,t){t=bs("DocumentReference.set",t);try{return function(e,t,n){e=Ts(e,Os);var r=Ts(e.firestore,Fs),i=jc(e.converter,t,n);return Xc(r,[ec($s(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,ut.none())])}(this._delegate,e,t)}catch(e){throw cu(e,"setDoc()","DocumentReference.set()")}},e.prototype.update=function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];try{return 1===arguments.length?qc(this._delegate,e):qc.apply(void 0,Object(r["d"])([this._delegate,e,t],n))}catch(e){throw cu(e,"updateDoc()","DocumentReference.update()")}},e.prototype.delete=function(){return Xc(Ts((e=this._delegate).firestore,Fs),[new Tt(e._key,ut.none())]);var e},e.prototype.onSnapshot=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=uu(t),i=lu(t,(function(t){return new hu(e.firestore,new _c(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return Yc(this._delegate,r,i)},e.prototype.get=function(e){var t=this;return("cache"===(null==e?void 0:e.source)?function(e){e=Ts(e,Os);var t=Ts(e.firestore,Fs),n=Us(t),i=new Wc(t);return function(e,t){var n=this,i=new nr;return e.asyncQueue.enqueueAndForget((function(){return Object(r["a"])(n,void 0,void 0,(function(){var n;return Object(r["c"])(this,(function(o){switch(o.label){case 0:return n=function(e,t,n){return Object(r["a"])(this,void 0,void 0,(function(){var i,o;return Object(r["c"])(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(e,t){var n=y(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.Mn.mn(e,t)}))}(e,t)];case 1:return(o=r.sent()).isFoundDocument()?n.resolve(o):o.isNoDocument()?n.resolve(null):n.reject(new u(c.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return i=r.sent(),o=qo(i,"Failed to get document '"+t+" from cache"),n.reject(o),[3,3];case 3:return[2]}}))}))},[4,rs(e)];case 1:return[2,n.apply(void 0,[o.sent(),t,i])]}}))}))})),i.promise}(n,e._key).then((function(n){return new _c(t,i,e._key,n,new xc(null!==n&&n.hasLocalMutations,!0),e.converter)}))}(this._delegate):"server"===(null==e?void 0:e.source)?function(e){e=Ts(e,Os);var t=Ts(e.firestore,Fs);return ss(Us(t),e._key,{source:"server"}).then((function(n){return Qc(t,e,n)}))}(this._delegate):function(e){e=Ts(e,Os);var t=Ts(e.firestore,Fs);return ss(Us(t),e._key).then((function(n){return Qc(t,e,n)}))}(this._delegate)).then((function(e){return new hu(t.firestore,new _c(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))}))},e.prototype.withConverter=function(t){return new e(this.firestore,t?this._delegate.withConverter(au.nu(this.firestore,t)):this._delegate.withConverter(null))},e}();function cu(e,t,n){return e.message=e.message.replace(t,n),e}function uu(e){for(var t=0,n=e;t<n.length;t++){var r=n[t];if("object"==typeof r&&!Bs(r))return r}return{}}function lu(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=Bs(e[0])?e[0]:Bs(e[1])?e[1]:"function"==typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var hu=function(){function e(e,t){this._firestore=e,this._delegate=t}return Object.defineProperty(e.prototype,"ref",{get:function(){return new su(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),e.prototype.data=function(e){return this._delegate.data(e)},e.prototype.get=function(e,t){return this._delegate.get(e,t)},e.prototype.isEqual=function(e){return Mc(this._delegate,e._delegate)},e}(),fu=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r["b"])(t,e),t.prototype.data=function(e){return this._delegate.data(e)},t}(hu),du=function(){function e(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new nu(e)}return e.prototype.where=function(t,n,r){try{return new e(this.firestore,Cc(this._delegate,function(e,t,n){var r=t,i=Ec("where",e);return new Ic(i,r,n)}(t,n,r)))}catch(t){throw cu(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.orderBy=function(t,n){try{return new e(this.firestore,Cc(this._delegate,function(e,t){void 0===t&&(t="asc");var n=t,r=Ec("orderBy",e);return new Lc(r,n)}(t,n)))}catch(t){throw cu(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.limit=function(t){try{return new e(this.firestore,Cc(this._delegate,function(e){return As("limit",e),new Dc("limit",e,"F")}(t)))}catch(t){throw cu(t,"limit()","Query.limit()")}},e.prototype.limitToLast=function(t){try{return new e(this.firestore,Cc(this._delegate,function(e){return As("limitToLast",e),new Dc("limitToLast",e,"L")}(t)))}catch(t){throw cu(t,"limitToLast()","Query.limitToLast()")}},e.prototype.startAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Cc(this._delegate,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new Pc("startAt",e,!0)}.apply(void 0,t)))}catch(t){throw cu(t,"startAt()","Query.startAt()")}},e.prototype.startAfter=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Cc(this._delegate,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new Pc("startAfter",e,!1)}.apply(void 0,t)))}catch(t){throw cu(t,"startAfter()","Query.startAfter()")}},e.prototype.endBefore=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Cc(this._delegate,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new Nc("endBefore",e,!0)}.apply(void 0,t)))}catch(t){throw cu(t,"endBefore()","Query.endBefore()")}},e.prototype.endAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Cc(this._delegate,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new Nc("endAt",e,!1)}.apply(void 0,t)))}catch(t){throw cu(t,"endAt()","Query.endAt()")}},e.prototype.isEqual=function(e){return Ps(this._delegate,e._delegate)},e.prototype.get=function(e){var t=this;return("cache"===(null==e?void 0:e.source)?function(e){e=Ts(e,Rs);var t=Ts(e.firestore,Fs),n=Us(t),i=new Wc(t);return function(e,t){var n=this,i=new nr;return e.asyncQueue.enqueueAndForget((function(){return Object(r["a"])(n,void 0,void 0,(function(){var n;return Object(r["c"])(this,(function(o){switch(o.label){case 0:return n=function(e,t,n){return Object(r["a"])(this,void 0,void 0,(function(){var i,o,a,s,c;return Object(r["c"])(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,Ii(e,t,!0)];case 1:return c=r.sent(),i=new ua(t,c.Bn),o=i._o(c.documents),a=i.applyChanges(o,!1),n.resolve(a.snapshot),[3,3];case 2:return s=r.sent(),c=qo(s,"Failed to execute query '"+t+" against cache"),n.reject(c),[3,3];case 3:return[2]}}))}))},[4,rs(e)];case 1:return[2,n.apply(void 0,[o.sent(),t,i])]}}))}))})),i.promise}(n,e._query).then((function(n){return new Ac(t,i,e,n)}))}(this._delegate):"server"===(null==e?void 0:e.source)?function(e){e=Ts(e,Rs);var t=Ts(e.firestore,Fs),n=Us(t),r=new Wc(t);return cs(n,e._query,{source:"server"}).then((function(n){return new Ac(t,r,e,n)}))}(this._delegate):function(e){e=Ts(e,Rs);var t=Ts(e.firestore,Fs),n=Us(t),r=new Wc(t);return Oc(e._query),cs(n,e._query).then((function(n){return new Ac(t,r,e,n)}))}(this._delegate)).then((function(e){return new mu(t.firestore,new Ac(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}))},e.prototype.onSnapshot=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=uu(t),i=lu(t,(function(t){return new mu(e.firestore,new Ac(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return Yc(this._delegate,r,i)},e.prototype.withConverter=function(t){return new e(this.firestore,t?this._delegate.withConverter(au.nu(this.firestore,t)):this._delegate.withConverter(null))},e}(),pu=function(){function e(e,t){this._firestore=e,this._delegate=t}return Object.defineProperty(e.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"doc",{get:function(){return new fu(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),e}(),mu=function(){function e(e,t){this._firestore=e,this._delegate=t}return Object.defineProperty(e.prototype,"query",{get:function(){return new du(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"docs",{get:function(){var e=this;return this._delegate.docs.map((function(t){return new fu(e._firestore,t)}))},enumerable:!1,configurable:!0}),e.prototype.docChanges=function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new pu(t._firestore,e)}))},e.prototype.forEach=function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new fu(n._firestore,r))}))},e.prototype.isEqual=function(e){return Mc(this._delegate,e._delegate)},e}(),vu=function(e){function t(t,n){var r=this;return(r=e.call(this,t,n)||this).firestore=t,r._delegate=n,r}return Object(r["b"])(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._delegate.parent;return e?new su(this.firestore,e):null},enumerable:!1,configurable:!0}),t.prototype.doc=function(e){try{return new su(this.firestore,void 0===e?Ls(this._delegate):Ls(this._delegate,e))}catch(e){throw cu(e,"doc()","CollectionReference.doc()")}},t.prototype.add=function(e){var t=this;return function(e,t){var n=Ts(e.firestore,Fs),r=Ls(e),i=jc(e.converter,t);return Xc(n,[ec($s(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,ut.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new su(t.firestore,e)}))},t.prototype.isEqual=function(e){return Ds(this._delegate,e._delegate)},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(au.nu(this.firestore,e)):this._delegate.withConverter(null))},t}(du);function gu(e){return Ts(e,Os)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yu=function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._delegate=new(Vs.bind.apply(Vs,Object(r["d"])([void 0],e)))}return e.documentId=function(){return new e(L.keyField().canonicalString())},e.prototype.isEqual=function(e){return(e=Object(i["i"])(e))instanceof Vs&&this._delegate._internalPath.isEqual(e._internalPath)},e}(),bu=function(){function e(e){this._delegate=e}return e.serverTimestamp=function(){var t=new rc("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)},e.delete=function(){var t=new tc("deleteField");return t._methodName="FieldValue.delete",new e(t)},e.arrayUnion=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new ic("arrayUnion",e)}.apply(void 0,t);return r._methodName="FieldValue.arrayUnion",new e(r)},e.arrayRemove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new oc("arrayRemove",e)}.apply(void 0,t);return r._methodName="FieldValue.arrayRemove",new e(r)},e.increment=function(t){var n=function(e){return new ac("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)},e.prototype.isEqual=function(e){return this._delegate.isEqual(e._delegate)},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}).call(this,n("4362"))},a79d:function(e,t,n){"use strict";var r=n("23e7"),i=n("c430"),o=n("fea9"),a=n("d039"),s=n("d066"),c=n("1626"),u=n("4840"),l=n("cdf9"),h=n("6eeb"),f=!!o&&a((function(){o.prototype["finally"].call({then:function(){}},(function(){}))}));if(r({target:"Promise",proto:!0,real:!0,forced:f},{finally:function(e){var t=u(this,s("Promise")),n=c(e);return this.then(n?function(n){return l(t,e()).then((function(){return n}))}:e,n?function(n){return l(t,e()).then((function(){throw n}))}:e)}}),!i&&c(o)){var d=s("Promise").prototype["finally"];o.prototype["finally"]!==d&&h(o.prototype,"finally",d,{unsafe:!0})}},a8e9:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return S})),n.d(t,"c",(function(){return A})),n.d(t,"d",(function(){return R})),n.d(t,"e",(function(){return d})),n.d(t,"f",(function(){return C})),n.d(t,"g",(function(){return u})),n.d(t,"h",(function(){return l})),n.d(t,"i",(function(){return P})),n.d(t,"j",(function(){return p})),n.d(t,"k",(function(){return g})),n.d(t,"l",(function(){return y})),n.d(t,"m",(function(){return w})),n.d(t,"n",(function(){return E})),n.d(t,"o",(function(){return m})),n.d(t,"p",(function(){return v})),n.d(t,"q",(function(){return b})),n.d(t,"r",(function(){return _})),n.d(t,"s",(function(){return x}));var r=n("fbb0"),i=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},o=function(e){var t=[],n=0,r=0;while(n<e.length){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){o=e[n++];var a=e[n++],s=e[n++],c=((7&i)<<18|(63&o)<<12|(63&a)<<6|63&s)-65536;t[r++]=String.fromCharCode(55296+(c>>10)),t[r++]=String.fromCharCode(56320+(1023&c))}else{o=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return t.join("")},a={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var o=e[i],a=i+1<e.length,s=a?e[i+1]:0,c=i+2<e.length,u=c?e[i+2]:0,l=o>>2,h=(3&o)<<4|s>>4,f=(15&s)<<2|u>>6,d=63&u;c||(d=64,a||(f=64)),r.push(n[l],n[h],n[f],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(i(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):o(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var o=n[e.charAt(i++)],a=i<e.length,s=a?n[e.charAt(i)]:0;++i;var c=i<e.length,u=c?n[e.charAt(i)]:64;++i;var l=i<e.length,h=l?n[e.charAt(i)]:64;if(++i,null==o||null==s||null==u||null==h)throw Error();var f=o<<2|s>>4;if(r.push(f),64!==u){var d=s<<4&240|u>>2;if(r.push(d),64!==h){var p=u<<6&192|h;r.push(p)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},s=function(e){var t=i(e);return a.encodeByteArray(t,!0)},c=function(e){return s(e).replace(/\./g,"")};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function u(e){return l(void 0,e)}function l(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:var n=t;return new Date(n.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var r in t)t.hasOwnProperty(r)&&h(r)&&(e[r]=l(e[r],t[r]));return e}function h(e){return"__proto__"!==e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var f=function(){function e(){var e=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))}return e.prototype.wrapCallback=function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}},e}();
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n={alg:"none",type:"JWT"},i=t||"demo-project",o=e.iat||0,a=e.sub||e.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var s=Object(r["a"])({iss:"https://securetoken.google.com/"+i,aud:i,iat:o,exp:o+3600,auth_time:o,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},e),u="";return[c(JSON.stringify(n)),c(JSON.stringify(s)),u].join(".")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p(){return"undefined"!==typeof navigator&&"string"===typeof navigator["userAgent"]?navigator["userAgent"]:""}function m(){return"undefined"!==typeof window&&!!(window["cordova"]||window["phonegap"]||window["PhoneGap"])&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(p())}function v(){try{return"[object process]"===Object.prototype.toString.call(e.process)}catch(t){return!1}}function g(){return"object"===typeof self&&self.self===self}function y(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function b(){return"object"===typeof navigator&&"ReactNative"===navigator["product"]}function w(){return p().indexOf("Electron/")>=0}function E(){var e=p();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function x(){return p().indexOf("MSAppHost/")>=0}function _(){return!v()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var T="FirebaseError",A=function(e){function t(n,r,i){var o=e.call(this,r)||this;return o.code=n,o.customData=i,o.name=T,Object.setPrototypeOf(o,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,S.prototype.create),o}return Object(r["b"])(t,e),t}(Error),S=function(){function e(e,t,n){this.service=e,this.serviceName=t,this.errors=n}return e.prototype.create=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=t[0]||{},i=this.service+"/"+e,o=this.errors[e],a=o?M(o,r):"Error",s=this.serviceName+": "+a+" ("+i+").",c=new A(i,s,r);return c},e}();function M(e,t){return e.replace(O,(function(e,n){var r=t[n];return null!=r?String(r):"<"+n+"?>"}))}var O=/\{\$([^}]+)}/g;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function R(e,t){return Object.prototype.hasOwnProperty.call(e,t)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
(function(){function e(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}e.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},e.prototype.compress_=function(e,t){t||(t=0);var n=this.W_;if("string"===typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(r=0;r<16;r++)n[r]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,a,s=this.chain_[0],c=this.chain_[1],u=this.chain_[2],l=this.chain_[3],h=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(o=l^c&(u^l),a=1518500249):(o=c^u^l,a=1859775393):r<60?(o=c&u|l&(c|u),a=2400959708):(o=c^u^l,a=3395469782);i=(s<<5|s>>>27)+o+h+a+n[r]&4294967295;h=l,l=u,u=4294967295&(c<<30|c>>>2),c=s,s=i}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+c&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295},e.prototype.update=function(e,t){if(null!=e){void 0===t&&(t=e.length);var n=t-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;while(r<t){if(0===o)while(r<=n)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){while(r<t)if(i[o]=e.charCodeAt(r),++o,++r,o===this.blockSize){this.compress_(i),o=0;break}}else while(r<t)if(i[o]=e[r],++o,++r,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=t}},e.prototype.digest=function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)e[r]=this.chain_[n]>>i&255,++r;return e}})();function C(e,t){var n=new I(e,t);return n.subscribe.bind(n)}var I=function(){function e(e,t){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((function(){e(n)})).catch((function(e){n.error(e)}))}return e.prototype.next=function(e){this.forEachObserver((function(t){t.next(e)}))},e.prototype.error=function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)},e.prototype.complete=function(){this.forEachObserver((function(e){e.complete()})),this.close()},e.prototype.subscribe=function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=L(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=D),void 0===r.error&&(r.error=D),void 0===r.complete&&(r.complete=D);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),o},e.prototype.unsubscribeOne=function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},e.prototype.forEachObserver=function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)},e.prototype.sendOne=function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))},e.prototype.close=function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))},e}();function L(e,t){if("object"!==typeof e||null===e)return!1;for(var n=0,r=t;n<r.length;n++){var i=r[n];if(i in e&&"function"===typeof e[i])return!0}return!1}function D(){}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function P(e){return e&&e._delegate?e._delegate:e}}).call(this,n("c8ba"))},abc5:function(e,t,n){"use strict";(function(e){function r(){return i().__VUE_DEVTOOLS_GLOBAL_HOOK__}function i(){return"undefined"!==typeof navigator&&"undefined"!==typeof window?window:"undefined"!==typeof e?e:{}}n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return o}));const o="function"===typeof Proxy}).call(this,n("c8ba"))},abfd:function(e,t,n){"use strict";
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
function r(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var i;n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return h})),n.d(t,"c",(function(){return f})),n.d(t,"d",(function(){return d}));var o,a=[];(function(e){e[e["DEBUG"]=0]="DEBUG",e[e["VERBOSE"]=1]="VERBOSE",e[e["INFO"]=2]="INFO",e[e["WARN"]=3]="WARN",e[e["ERROR"]=4]="ERROR",e[e["SILENT"]=5]="SILENT"})(o||(o={}));var s={debug:o.DEBUG,verbose:o.VERBOSE,info:o.INFO,warn:o.WARN,error:o.ERROR,silent:o.SILENT},c=o.INFO,u=(i={},i[o.DEBUG]="log",i[o.VERBOSE]="log",i[o.INFO]="info",i[o.WARN]="warn",i[o.ERROR]="error",i),l=function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(t<e.logLevel)){var o=(new Date).toISOString(),a=u[t];if(!a)throw new Error("Attempted to log a message with an invalid logType (value: "+t+")");console[a].apply(console,r(["["+o+"]  "+e.name+":"],n))}},h=function(){function e(e){this.name=e,this._logLevel=c,this._logHandler=l,this._userLogHandler=null,a.push(this)}return Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in o))throw new TypeError('Invalid value "'+e+'" assigned to `logLevel`');this._logLevel=e},enumerable:!1,configurable:!0}),e.prototype.setLogLevel=function(e){this._logLevel="string"===typeof e?s[e]:e},Object.defineProperty(e.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e},enumerable:!1,configurable:!0}),e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.DEBUG],e)),this._logHandler.apply(this,r([this,o.DEBUG],e))},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.VERBOSE],e)),this._logHandler.apply(this,r([this,o.VERBOSE],e))},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.INFO],e)),this._logHandler.apply(this,r([this,o.INFO],e))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.WARN],e)),this._logHandler.apply(this,r([this,o.WARN],e))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.ERROR],e)),this._logHandler.apply(this,r([this,o.ERROR],e))},e}();function f(e){a.forEach((function(t){t.setLogLevel(e)}))}function d(e,t){for(var n=function(n){var r=null;t&&t.level&&(r=s[t.level]),n.userLogHandler=null===e?null:function(t,n){for(var i=[],a=2;a<arguments.length;a++)i[a-2]=arguments[a];var s=i.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==r&&void 0!==r?r:t.logLevel)&&e({level:o[n].toLowerCase(),message:s,args:i,type:t.name})}},r=0,i=a;r<i.length;r++){var c=i[r];n(c)}}},ae93:function(e,t,n){"use strict";var r,i,o,a=n("d039"),s=n("1626"),c=n("7c73"),u=n("e163"),l=n("6eeb"),h=n("b622"),f=n("c430"),d=h("iterator"),p=!1;[].keys&&(o=[].keys(),"next"in o?(i=u(u(o)),i!==Object.prototype&&(r=i)):p=!0);var m=void 0==r||a((function(){var e={};return r[d].call(e)!==e}));m?r={}:f&&(r=c(r)),s(r[d])||l(r,d,(function(){return this})),e.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:p}},af03:function(e,t,n){var r=n("d039");e.exports=function(e){return r((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}))}},b041:function(e,t,n){"use strict";var r=n("00ee"),i=n("f5df");e.exports=r?{}.toString:function(){return"[object "+i(this)+"]"}},b0c0:function(e,t,n){var r=n("83ab"),i=n("5e77").EXISTS,o=n("e330"),a=n("9bf2").f,s=Function.prototype,c=o(s.toString),u=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,l=o(u.exec),h="name";r&&!i&&a(s,h,{configurable:!0,get:function(){try{return l(u,c(this))[1]}catch(e){return""}}})},b575:function(e,t,n){var r,i,o,a,s,c,u,l,h=n("da84"),f=n("0366"),d=n("06cf").f,p=n("2cf4").set,m=n("1cdc"),v=n("d4c3"),g=n("a4b4"),y=n("605d"),b=h.MutationObserver||h.WebKitMutationObserver,w=h.document,E=h.process,x=h.Promise,_=d(h,"queueMicrotask"),T=_&&_.value;T||(r=function(){var e,t;y&&(e=E.domain)&&e.exit();while(i){t=i.fn,i=i.next;try{t()}catch(n){throw i?a():o=void 0,n}}o=void 0,e&&e.enter()},m||y||g||!b||!w?!v&&x&&x.resolve?(u=x.resolve(void 0),u.constructor=x,l=f(u.then,u),a=function(){l(r)}):y?a=function(){E.nextTick(r)}:(p=f(p,h),a=function(){p(r)}):(s=!0,c=w.createTextNode(""),new b(r).observe(c,{characterData:!0}),a=function(){c.data=s=!s})),e.exports=T||function(e){var t={fn:e,next:void 0};o&&(o.next=t),i||(i=t,a()),o=t}},b622:function(e,t,n){var r=n("da84"),i=n("5692"),o=n("1a2d"),a=n("90e3"),s=n("4930"),c=n("fdbf"),u=i("wks"),l=r.Symbol,h=l&&l["for"],f=c?l:l&&l.withoutSetter||a;e.exports=function(e){if(!o(u,e)||!s&&"string"!=typeof u[e]){var t="Symbol."+e;s&&o(l,e)?u[e]=l[e]:u[e]=c&&h?h(t):f(t)}return u[e]}},b727:function(e,t,n){var r=n("0366"),i=n("e330"),o=n("44ad"),a=n("7b0b"),s=n("07fa"),c=n("65f0"),u=i([].push),l=function(e){var t=1==e,n=2==e,i=3==e,l=4==e,h=6==e,f=7==e,d=5==e||h;return function(p,m,v,g){for(var y,b,w=a(p),E=o(w),x=r(m,v),_=s(E),T=0,A=g||c,S=t?A(p,_):n||f?A(p,0):void 0;_>T;T++)if((d||T in E)&&(y=E[T],b=x(y,T,w),e))if(t)S[T]=b;else if(b)switch(e){case 3:return!0;case 5:return y;case 6:return T;case 2:u(S,y)}else switch(e){case 4:return!1;case 7:u(S,y)}return h?-1:i||l?l:S}};e.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6),filterReject:l(7)}},b7aa:function(e,t,n){"use strict";(function(e){var t=n("cc84");(function(){var n,r="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){e!=Array.prototype&&e!=Object.prototype&&(e[t]=n.value)};function i(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof e&&e,t];for(var n=0;n<t.length;++n){var r=t[n];if(r&&r.Math==Math)return r}return globalThis}var o=i(this);function a(e,t){if(t){var n=o;e=e.split(".");for(var i=0;i<e.length-1;i++){var a=e[i];a in n||(n[a]={}),n=n[a]}e=e[e.length-1],i=n[e],t=t(i),t!=i&&null!=t&&r(n,e,{configurable:!0,writable:!0,value:t})}}function s(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}function c(e){var t="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return t?t.call(e):{next:s(e)}}a("Promise",(function(e){function t(e){this.b=0,this.c=void 0,this.a=[];var t=this.f();try{e(t.resolve,t.reject)}catch(n){t.reject(n)}}function n(){this.a=null}function r(e){return e instanceof t?e:new t((function(t){t(e)}))}if(e)return e;n.prototype.b=function(e){if(null==this.a){this.a=[];var t=this;this.c((function(){t.g()}))}this.a.push(e)};var i=o.setTimeout;n.prototype.c=function(e){i(e,0)},n.prototype.g=function(){for(;this.a&&this.a.length;){var e=this.a;this.a=[];for(var t=0;t<e.length;++t){var n=e[t];e[t]=null;try{n()}catch(r){this.f(r)}}}this.a=null},n.prototype.f=function(e){this.c((function(){throw e}))},t.prototype.f=function(){function e(e){return function(r){n||(n=!0,e.call(t,r))}}var t=this,n=!1;return{resolve:e(this.m),reject:e(this.g)}},t.prototype.m=function(e){if(e===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.s(e);else{e:switch(typeof e){case"object":var n=null!=e;break e;case"function":n=!0;break e;default:n=!1}n?this.v(e):this.h(e)}},t.prototype.v=function(e){var t=void 0;try{t=e.then}catch(n){return void this.g(n)}"function"==typeof t?this.u(t,e):this.h(e)},t.prototype.g=function(e){this.i(2,e)},t.prototype.h=function(e){this.i(1,e)},t.prototype.i=function(e,t){if(0!=this.b)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.b);this.b=e,this.c=t,this.l()},t.prototype.l=function(){if(null!=this.a){for(var e=0;e<this.a.length;++e)a.b(this.a[e]);this.a=null}};var a=new n;return t.prototype.s=function(e){var t=this.f();e.Ra(t.resolve,t.reject)},t.prototype.u=function(e,t){var n=this.f();try{e.call(t,n.resolve,n.reject)}catch(r){n.reject(r)}},t.prototype.then=function(e,n){function r(e,t){return"function"==typeof e?function(t){try{i(e(t))}catch(n){o(n)}}:t}var i,o,a=new t((function(e,t){i=e,o=t}));return this.Ra(r(e,i),r(n,o)),a},t.prototype.catch=function(e){return this.then(void 0,e)},t.prototype.Ra=function(e,t){function n(){switch(r.b){case 1:e(r.c);break;case 2:t(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?a.b(n):this.a.push(n)},t.resolve=r,t.reject=function(e){return new t((function(t,n){n(e)}))},t.race=function(e){return new t((function(t,n){for(var i=c(e),o=i.next();!o.done;o=i.next())r(o.value).Ra(t,n)}))},t.all=function(e){var n=c(e),i=n.next();return i.done?r([]):new t((function(e,t){function o(t){return function(n){a[t]=n,s--,0==s&&e(a)}}var a=[],s=0;do{a.push(void 0),s++,r(i.value).Ra(o(a.length-1),t),i=n.next()}while(!i.done)}))},t}));var u=u||{},l=this||self,h=/^[\w+/_-]+[=]{0,2}$/,f=null;function d(e){return(e=e.querySelector&&e.querySelector("script[nonce]"))&&(e=e.nonce||e.getAttribute("nonce"))&&h.test(e)?e:""}function p(){}function m(e){var t=typeof e;return"object"!=t?t:e?Array.isArray(e)?"array":t:"null"}function v(e){var t=m(e);return"array"==t||"object"==t&&"number"==typeof e.length}function g(e){return"function"==m(e)}function y(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function b(e){return Object.prototype.hasOwnProperty.call(e,w)&&e[w]||(e[w]=++E)}var w="closure_uid_"+(1e9*Math.random()>>>0),E=0;function x(e,t,n){return e.call.apply(e.bind,arguments)}function _(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function T(e,t,n){return T=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?x:_,T.apply(null,arguments)}function A(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}var S=Date.now;function M(e,t){function n(){}n.prototype=t.prototype,e.bb=t.prototype,e.prototype=new n,e.prototype.constructor=e}function O(e){return e}function R(e,t,n){this.code=L+e,this.message=t||D[e]||"",this.a=n||null}function C(e){var t=e&&e.code;return t?new R(t.substring(L.length),e.message,e.serverResponse):null}M(R,Error),R.prototype.w=function(){var e={code:this.code,message:this.message};return this.a&&(e.serverResponse=this.a),e},R.prototype.toJSON=function(){return this.w()};var I,L="auth/",D={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},P={ld:{Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ua:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://securetoken.googleapis.com/v1/token",Xa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ua:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ua:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",$a:"https://test-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function N(e){for(var t in P)if(P[t].id===e)return e=P[t],{firebaseEndpoint:e.Ua,secureTokenEndpoint:e.$a,identityPlatformEndpoint:e.Xa};return null}function B(e){if(!e)return!1;try{return!!e.$goog_Thenable}catch(t){return!1}}function k(e){if(Error.captureStackTrace)Error.captureStackTrace(this,k);else{var t=Error().stack;t&&(this.stack=t)}e&&(this.message=String(e))}function F(e,t){e=e.split("%s");for(var n="",r=e.length-1,i=0;i<r;i++)n+=e[i]+(i<t.length?t[i]:"%s");k.call(this,n+e[r])}function U(e,t){throw new F("Failure"+(e?": "+e:""),Array.prototype.slice.call(arguments,1))}function H(e,t){this.c=e,this.f=t,this.b=0,this.a=null}function j(e,t){e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}function G(){this.b=this.a=null}I=N("__EID__")?"__EID__":void 0,M(k,Error),k.prototype.name="CustomError",M(F,k),F.prototype.name="AssertionError",H.prototype.get=function(){if(0<this.b){this.b--;var e=this.a;this.a=e.next,e.next=null}else e=this.c();return e};var V=new H((function(){return new W}),(function(e){e.reset()}));function z(){var e=It,t=null;return e.a&&(t=e.a,e.a=e.a.next,e.a||(e.b=null),t.next=null),t}function W(){this.next=this.b=this.a=null}G.prototype.add=function(e,t){var n=V.get();n.set(e,t),this.b?this.b.next=n:this.a=n,this.b=n},W.prototype.set=function(e,t){this.a=e,this.b=t,this.next=null},W.prototype.reset=function(){this.next=this.b=this.a=null};var q=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},Y=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"===typeof e?e.split(""):e,o=0;o<r;o++)o in i&&t.call(n,i[o],o,e)};function X(e,t){for(var n="string"===typeof e?e.split(""):e,r=e.length-1;0<=r;--r)r in n&&t.call(void 0,n[r],r,e)}var Q=Array.prototype.filter?function(e,t){return Array.prototype.filter.call(e,t,void 0)}:function(e,t){for(var n=e.length,r=[],i=0,o="string"===typeof e?e.split(""):e,a=0;a<n;a++)if(a in o){var s=o[a];t.call(void 0,s,a,e)&&(r[i++]=s)}return r},K=Array.prototype.map?function(e,t){return Array.prototype.map.call(e,t,void 0)}:function(e,t){for(var n=e.length,r=Array(n),i="string"===typeof e?e.split(""):e,o=0;o<n;o++)o in i&&(r[o]=t.call(void 0,i[o],o,e));return r},J=Array.prototype.some?function(e,t){return Array.prototype.some.call(e,t,void 0)}:function(e,t){for(var n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e))return!0;return!1};function Z(e){e:{for(var t=os,n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}function $(e,t){return 0<=q(e,t)}function ee(e,t){var n;return t=q(e,t),(n=0<=t)&&Array.prototype.splice.call(e,t,1),n}function te(e,t){X(e,(function(n,r){t.call(void 0,n,r,e)&&1==Array.prototype.splice.call(e,r,1).length&&0}))}function ne(e){return Array.prototype.concat.apply([],arguments)}function re(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}var ie,oe=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]},ae=/&/g,se=/</g,ce=/>/g,ue=/"/g,le=/'/g,he=/\x00/g,fe=/[\x00&<>"']/;function de(e,t){return-1!=e.indexOf(t)}function pe(e,t){return e<t?-1:e>t?1:0}e:{var me=l.navigator;if(me){var ve=me.userAgent;if(ve){ie=ve;break e}}ie=""}function ge(e){return de(ie,e)}function ye(e,t){for(var n in e)t.call(void 0,e[n],n,e)}function be(e){for(var t in e)return!1;return!0}function we(e){var t,n={};for(t in e)n[t]=e[t];return n}var Ee="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function xe(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(var o=0;o<Ee.length;o++)n=Ee[o],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function _e(e,t){e:{try{var n=e&&e.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if(r=r||l,r.Element&&r.Location){var i=r;break e}}catch(a){}i=null}if(i&&"undefined"!=typeof i[t]&&(!e||!(e instanceof i[t])&&(e instanceof i.Location||e instanceof i.Element))){if(y(e))try{var o=e.constructor.displayName||e.constructor.name||Object.prototype.toString.call(e)}catch(a){o="<object could not be stringified>"}else o=void 0===e?"undefined":null===e?"null":typeof e;U("Argument is not a %s (or a non-Element, non-Location mock); got: %s",t,o)}}function Te(e,t){this.a=e===Oe&&t||"",this.b=Me}function Ae(e){return e instanceof Te&&e.constructor===Te&&e.b===Me?e.a:(U("expected object of type Const, got '"+e+"'"),"type_error:Const")}Te.prototype.ta=!0,Te.prototype.sa=function(){return this.a},Te.prototype.toString=function(){return"Const{"+this.a+"}"};var Se,Me={},Oe={};function Re(){if(void 0===Se){var e=null,t=l.trustedTypes;if(t&&t.createPolicy){try{e=t.createPolicy("goog#html",{createHTML:O,createScript:O,createScriptURL:O})}catch(n){l.console&&l.console.error(n.message)}Se=e}else Se=e}return Se}function Ce(e,t){this.a=t===Ne?e:""}function Ie(e){return e instanceof Ce&&e.constructor===Ce?e.a:(U("expected object of type TrustedResourceUrl, got '"+e+"' of type "+m(e)),"type_error:TrustedResourceUrl")}function Le(e,t){var n=Ae(e);if(!Pe.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return e=n.replace(De,(function(e,r){if(!Object.prototype.hasOwnProperty.call(t,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(t));return e=t[r],e instanceof Te?Ae(e):encodeURIComponent(String(e))})),Be(e)}Ce.prototype.ta=!0,Ce.prototype.sa=function(){return this.a.toString()},Ce.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var De=/%{(\w+)}/g,Pe=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,Ne={};function Be(e){var t=Re();return e=t?t.createScriptURL(e):e,new Ce(e,Ne)}function ke(e,t){this.a=t===ze?e:""}function Fe(e){return e instanceof ke&&e.constructor===ke?e.a:(U("expected object of type SafeUrl, got '"+e+"' of type "+m(e)),"type_error:SafeUrl")}ke.prototype.ta=!0,ke.prototype.sa=function(){return this.a.toString()},ke.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Ue=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,He=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,je=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Ge(e){if(e instanceof ke)return e;if(e="object"==typeof e&&e.ta?e.sa():String(e),je.test(e))e=new ke(e,ze);else{e=String(e),e=e.replace(/(%0A|%0D)/g,"");var t=e.match(He);e=t&&Ue.test(t[1])?new ke(e,ze):null}return e}function Ve(e){return e instanceof ke?e:(e="object"==typeof e&&e.ta?e.sa():String(e),je.test(e)||(e="about:invalid#zClosurez"),new ke(e,ze))}var ze={},We=new ke("about:invalid#zClosurez",ze);function qe(e,t,n){this.a=n===Xe?e:""}function Ye(e){return e instanceof qe&&e.constructor===qe?e.a:(U("expected object of type SafeHtml, got '"+e+"' of type "+m(e)),"type_error:SafeHtml")}qe.prototype.ta=!0,qe.prototype.sa=function(){return this.a.toString()},qe.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Xe={};function Qe(e,t){_e(e,"HTMLScriptElement"),e.src=Ie(t),(t=e.ownerDocument&&e.ownerDocument.defaultView)&&t!=l?t=d(t.document):(null===f&&(f=d(l.document)),t=f),t&&e.setAttribute("nonce",t)}function Ke(e,t,n,r){return e=e instanceof ke?e:Ve(e),t=t||l,n=n instanceof Te?Ae(n):n||"",t.open(Fe(e),n,r,void 0)}function Je(e,t){for(var n=e.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function Ze(e){return fe.test(e)&&(-1!=e.indexOf("&")&&(e=e.replace(ae,"&amp;")),-1!=e.indexOf("<")&&(e=e.replace(se,"&lt;")),-1!=e.indexOf(">")&&(e=e.replace(ce,"&gt;")),-1!=e.indexOf('"')&&(e=e.replace(ue,"&quot;")),-1!=e.indexOf("'")&&(e=e.replace(le,"&#39;")),-1!=e.indexOf("\0")&&(e=e.replace(he,"&#0;"))),e}function $e(e){return $e[" "](e),e}function et(e,t){var n=dt;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}$e[" "]=p;var tt,nt=ge("Opera"),rt=ge("Trident")||ge("MSIE"),it=ge("Edge"),ot=it||rt,at=ge("Gecko")&&!(de(ie.toLowerCase(),"webkit")&&!ge("Edge"))&&!(ge("Trident")||ge("MSIE"))&&!ge("Edge"),st=de(ie.toLowerCase(),"webkit")&&!ge("Edge");function ct(){var e=l.document;return e?e.documentMode:void 0}e:{var ut="",lt=function(){var e=ie;return at?/rv:([^\);]+)(\)|;)/.exec(e):it?/Edge\/([\d\.]+)/.exec(e):rt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):st?/WebKit\/(\S+)/.exec(e):nt?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(lt&&(ut=lt?lt[1]:""),rt){var ht=ct();if(null!=ht&&ht>parseFloat(ut)){tt=String(ht);break e}}tt=ut}var ft,dt={};function pt(e){return et(e,(function(){for(var t=0,n=oe(String(tt)).split("."),r=oe(String(e)).split("."),i=Math.max(n.length,r.length),o=0;0==t&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;t=pe(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||pe(0==a[2].length,0==s[2].length)||pe(a[2],s[2]),a=a[3],s=s[3]}while(0==t)}return 0<=t}))}if(l.document&&rt){var mt=ct();ft=mt||(parseInt(tt,10)||void 0)}else ft=void 0;var vt=ft;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(ep){}var gt=!rt||9<=Number(vt);function yt(e){var t=document;return"string"===typeof e?t.getElementById(e):e}function bt(e,t){ye(t,(function(t,n){t&&"object"==typeof t&&t.ta&&(t=t.sa()),"style"==n?e.style.cssText=t:"class"==n?e.className=t:"for"==n?e.htmlFor=t:xt.hasOwnProperty(n)?e.setAttribute(xt[n],t):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?e.setAttribute(n,t):e[n]=t}))}var wt,Et,xt={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function _t(e,t,n){var r=arguments,i=document,o=String(r[0]),a=r[1];if(!gt&&a&&(a.name||a.type)){if(o=["<",o],a.name&&o.push(' name="',Ze(a.name),'"'),a.type){o.push(' type="',Ze(a.type),'"');var s={};xe(s,a),delete s.type,a=s}o.push(">"),o=o.join("")}return o=At(i,o),a&&("string"===typeof a?o.className=a:Array.isArray(a)?o.className=a.join(" "):bt(o,a)),2<r.length&&Tt(i,o,r),o}function Tt(e,t,n){function r(n){n&&t.appendChild("string"===typeof n?e.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];if(!v(o)||y(o)&&0<o.nodeType)r(o);else{e:{if(o&&"number"==typeof o.length){if(y(o)){var a="function"==typeof o.item||"string"==typeof o.item;break e}if(g(o)){a="function"==typeof o.item;break e}}a=!1}Y(a?re(o):o,r)}}}function At(e,t){return t=String(t),"application/xhtml+xml"===e.contentType&&(t=t.toLowerCase()),e.createElement(t)}function St(e){l.setTimeout((function(){throw e}),0)}function Mt(){var e=l.MessageChannel;if("undefined"===typeof e&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!ge("Presto")&&(e=function(){var e=At(document,"IFRAME");e.style.display="none",document.documentElement.appendChild(e);var t=e.contentWindow;e=t.document,e.open(),e.close();var n="callImmediate"+Math.random(),r="file:"==t.location.protocol?"*":t.location.protocol+"//"+t.location.host;e=T((function(e){"*"!=r&&e.origin!=r||e.data!=n||this.port1.onmessage()}),this),t.addEventListener("message",e,!1),this.port1={},this.port2={postMessage:function(){t.postMessage(n,r)}}}),"undefined"!==typeof e&&!ge("Trident")&&!ge("MSIE")){var t=new e,n={},r=n;return t.port1.onmessage=function(){if(void 0!==n.next){n=n.next;var e=n.Hb;n.Hb=null,e()}},function(e){r.next={Hb:e},r=r.next,t.port2.postMessage(0)}}return function(e){l.setTimeout(e,0)}}function Ot(e,t){Et||Rt(),Ct||(Et(),Ct=!0),It.add(e,t)}function Rt(){if(l.Promise&&l.Promise.resolve){var e=l.Promise.resolve(void 0);Et=function(){e.then(Lt)}}else Et=function(){var e=Lt;!g(l.setImmediate)||l.Window&&l.Window.prototype&&!ge("Edge")&&l.Window.prototype.setImmediate==l.setImmediate?(wt||(wt=Mt()),wt(e)):l.setImmediate(e)}}var Ct=!1,It=new G;function Lt(){for(var e;e=z();){try{e.a.call(e.b)}catch(t){St(t)}j(V,e)}Ct=!1}function Dt(e,t){if(this.a=Pt,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,e!=p)try{var n=this;e.call(t,(function(e){Xt(n,Nt,e)}),(function(e){if(!(e instanceof rn))try{if(e instanceof Error)throw e;throw Error("Promise rejected.")}catch(t){}Xt(n,Bt,e)}))}catch(r){Xt(this,Bt,r)}}var Pt=0,Nt=2,Bt=3;function kt(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}kt.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Ft=new H((function(){return new kt}),(function(e){e.reset()}));function Ut(e,t,n){var r=Ft.get();return r.g=e,r.b=t,r.f=n,r}function Ht(e){if(e instanceof Dt)return e;var t=new Dt(p);return Xt(t,Nt,e),t}function jt(e){return new Dt((function(t,n){n(e)}))}function Gt(e,t,n){Qt(e,t,n,null)||Ot(A(t,e))}function Vt(e){return new Dt((function(t,n){var r=e.length,i=[];if(r)for(var o,a=function(e,n){r--,i[e]=n,0==r&&t(i)},s=function(e){n(e)},c=0;c<e.length;c++)o=e[c],Gt(o,A(a,c),s);else t(i)}))}function zt(e){return new Dt((function(t){var n=e.length,r=[];if(n)for(var i,o=function(e,i,o){n--,r[e]=i?{Qb:!0,value:o}:{Qb:!1,reason:o},0==n&&t(r)},a=0;a<e.length;a++)i=e[a],Gt(i,A(o,a,!0),A(o,a,!1));else t(r)}))}function Wt(e,t){if(e.a==Pt)if(e.c){var n=e.c;if(n.b){for(var r=0,i=null,o=null,a=n.b;a&&(a.c||(r++,a.a==e&&(i=a),!(i&&1<r)));a=a.next)i||(o=a);i&&(n.a==Pt&&1==r?Wt(n,t):(o?(r=o,r.next==n.f&&(n.f=r),r.next=r.next.next):Zt(n),$t(n,i,Bt,t)))}e.c=null}else Xt(e,Bt,t)}function qt(e,t){e.b||e.a!=Nt&&e.a!=Bt||Jt(e),e.f?e.f.next=t:e.b=t,e.f=t}function Yt(e,t,n,r){var i=Ut(null,null,null);return i.a=new Dt((function(e,o){i.g=t?function(n){try{var i=t.call(r,n);e(i)}catch(a){o(a)}}:e,i.b=n?function(t){try{var i=n.call(r,t);void 0===i&&t instanceof rn?o(t):e(i)}catch(a){o(a)}}:o})),i.a.c=e,qt(e,i),i.a}function Xt(e,t,n){e.a==Pt&&(e===n&&(t=Bt,n=new TypeError("Promise cannot resolve to itself")),e.a=1,Qt(n,e.$c,e.ad,e)||(e.i=n,e.a=t,e.c=null,Jt(e),t!=Bt||n instanceof rn||tn(e,n)))}function Qt(e,t,n,r){if(e instanceof Dt)return qt(e,Ut(t||p,n||null,r)),!0;if(B(e))return e.then(t,n,r),!0;if(y(e))try{var i=e.then;if(g(i))return Kt(e,i,t,n,r),!0}catch(o){return n.call(r,o),!0}return!1}function Kt(e,t,n,r,i){function o(e){s||(s=!0,r.call(i,e))}function a(e){s||(s=!0,n.call(i,e))}var s=!1;try{t.call(e,a,o)}catch(c){o(c)}}function Jt(e){e.h||(e.h=!0,Ot(e.gc,e))}function Zt(e){var t=null;return e.b&&(t=e.b,e.b=t.next,t.next=null),e.b||(e.f=null),t}function $t(e,t,n,r){if(n==Bt&&t.b&&!t.c)for(;e&&e.g;e=e.c)e.g=!1;if(t.a)t.a.c=null,en(t,n,r);else try{t.c?t.g.call(t.f):en(t,n,r)}catch(i){nn.call(null,i)}j(Ft,t)}function en(e,t,n){t==Nt?e.g.call(e.f,n):e.b&&e.b.call(e.f,n)}function tn(e,t){e.g=!0,Ot((function(){e.g&&nn.call(null,t)}))}Dt.prototype.then=function(e,t,n){return Yt(this,g(e)?e:null,g(t)?t:null,n)},Dt.prototype.$goog_Thenable=!0,n=Dt.prototype,n.oa=function(e,t){return e=Ut(e,e,t),e.c=!0,qt(this,e),this},n.o=function(e,t){return Yt(this,null,e,t)},n.cancel=function(e){if(this.a==Pt){var t=new rn(e);Ot((function(){Wt(this,t)}),this)}},n.$c=function(e){this.a=Pt,Xt(this,Nt,e)},n.ad=function(e){this.a=Pt,Xt(this,Bt,e)},n.gc=function(){for(var e;e=Zt(this);)$t(this,e,this.a,this.i);this.h=!1};var nn=St;function rn(e){k.call(this,e)}function on(){0!=an&&(sn[b(this)]=this),this.ya=this.ya,this.pa=this.pa}M(rn,k),rn.prototype.name="cancel";var an=0,sn={};function cn(e){if(!e.ya&&(e.ya=!0,e.Da(),0!=an)){var t=b(e);if(0!=an&&e.pa&&0<e.pa.length)throw Error(e+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete sn[t]}}on.prototype.ya=!1,on.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var un=Object.freeze||function(e){return e},ln=!rt||9<=Number(vt),hn=rt&&!pt("9"),fn=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{l.addEventListener("test",p,t),l.removeEventListener("test",p,t)}catch(n){}return e}();function dn(e,t){this.type=e,this.b=this.target=t,this.defaultPrevented=!1}function pn(e,t){if(dn.call(this,e?e.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.b=t,t=e.relatedTarget){if(at){e:{try{$e(t.nodeName);var i=!0;break e}catch(o){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:mn[e.pointerType]||"",this.a=e,e.defaultPrevented&&this.preventDefault()}}dn.prototype.preventDefault=function(){this.defaultPrevented=!0},M(pn,dn);var mn=un({2:"touch",3:"pen",4:"mouse"});pn.prototype.preventDefault=function(){pn.bb.preventDefault.call(this);var e=this.a;if(e.preventDefault)e.preventDefault();else if(e.returnValue=!1,hn)try{(e.ctrlKey||112<=e.keyCode&&123>=e.keyCode)&&(e.keyCode=-1)}catch(t){}},pn.prototype.g=function(){return this.a};var vn="closure_listenable_"+(1e6*Math.random()|0),gn=0;function yn(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.Wa=i,this.key=++gn,this.wa=this.Qa=!1}function bn(e){e.wa=!0,e.listener=null,e.proxy=null,e.src=null,e.Wa=null}function wn(e){this.src=e,this.a={},this.b=0}function En(e,t){var n=t.type;n in e.a&&ee(e.a[n],t)&&(bn(t),0==e.a[n].length&&(delete e.a[n],e.b--))}function xn(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.wa&&o.listener==t&&o.capture==!!n&&o.Wa==r)return i}return-1}wn.prototype.add=function(e,t,n,r,i){var o=e.toString();e=this.a[o],e||(e=this.a[o]=[],this.b++);var a=xn(e,t,r,i);return-1<a?(t=e[a],n||(t.Qa=!1)):(t=new yn(t,this.src,o,!!r,i),t.Qa=n,e.push(t)),t};var _n="closure_lm_"+(1e6*Math.random()|0),Tn={};function An(e,t,n,r,i){if(r&&r.once)On(e,t,n,r,i);else if(Array.isArray(t))for(var o=0;o<t.length;o++)An(e,t[o],n,r,i);else n=kn(n),e&&e[vn]?Un(e,t,n,y(r)?!!r.capture:!!r,i):Sn(e,t,n,!1,r,i)}function Sn(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var a=y(i)?!!i.capture:!!i,s=Nn(e);if(s||(e[_n]=s=new wn(e)),n=s.add(t,n,r,a,o),!n.proxy){if(r=Mn(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)fn||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(In(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}0}}function Mn(){var e=Pn,t=ln?function(n){return e.call(t.src,t.listener,n)}:function(n){if(n=e.call(t.src,t.listener,n),!n)return n};return t}function On(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)On(e,t[o],n,r,i);else n=kn(n),e&&e[vn]?Hn(e,t,n,y(r)?!!r.capture:!!r,i):Sn(e,t,n,!0,r,i)}function Rn(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)Rn(e,t[o],n,r,i);else r=y(r)?!!r.capture:!!r,n=kn(n),e&&e[vn]?(e=e.v,t=String(t).toString(),t in e.a&&(o=e.a[t],n=xn(o,n,r,i),-1<n&&(bn(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete e.a[t],e.b--)))):e&&(e=Nn(e))&&(t=e.a[t.toString()],e=-1,t&&(e=xn(t,n,r,i)),(n=-1<e?t[e]:null)&&Cn(n))}function Cn(e){if("number"!==typeof e&&e&&!e.wa){var t=e.src;if(t&&t[vn])En(t.v,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(In(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Nn(t))?(En(n,e),0==n.b&&(n.src=null,t[_n]=null)):bn(e)}}}function In(e){return e in Tn?Tn[e]:Tn[e]="on"+e}function Ln(e,t,n,r){var i=!0;if((e=Nn(e))&&(t=e.a[t.toString()]))for(t=t.concat(),e=0;e<t.length;e++){var o=t[e];o&&o.capture==n&&!o.wa&&(o=Dn(o,r),i=i&&!1!==o)}return i}function Dn(e,t){var n=e.listener,r=e.Wa||e.src;return e.Qa&&Cn(e),n.call(r,t)}function Pn(e,t){if(e.wa)return!0;if(!ln){if(!t)e:{t=["window","event"];for(var n=l,r=0;r<t.length;r++)if(n=n[t[r]],null==n){t=null;break e}t=n}if(r=t,t=new pn(r,this),n=!0,!(0>r.keyCode||void 0!=r.returnValue)){e:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break e}catch(a){i=!0}(i||void 0==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=t.b;i;i=i.parentNode)r.push(i);for(e=e.type,i=r.length-1;0<=i;i--){t.b=r[i];var o=Ln(r[i],e,!0,t);n=n&&o}for(i=0;i<r.length;i++)t.b=r[i],o=Ln(r[i],e,!1,t),n=n&&o}return n}return Dn(e,new pn(t,this))}function Nn(e){return e=e[_n],e instanceof wn?e:null}var Bn="__closure_events_fn_"+(1e9*Math.random()>>>0);function kn(e){return g(e)?e:(e[Bn]||(e[Bn]=function(t){return e.handleEvent(t)}),e[Bn])}function Fn(){on.call(this),this.v=new wn(this),this.bc=this,this.hb=null}function Un(e,t,n,r,i){e.v.add(String(t),n,!1,r,i)}function Hn(e,t,n,r,i){e.v.add(String(t),n,!0,r,i)}function jn(e,t,n,r){if(t=e.v.a[String(t)],!t)return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var a=t[o];if(a&&!a.wa&&a.capture==n){var s=a.listener,c=a.Wa||a.src;a.Qa&&En(e.v,a),i=!1!==s.call(c,r)&&i}}return i&&!r.defaultPrevented}function Gn(e,t,n){if(g(e))n&&(e=T(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=T(e.handleEvent,e)}return 2147483647<Number(t)?-1:l.setTimeout(e,t||0)}function Vn(e){var t=null;return new Dt((function(n,r){t=Gn((function(){n(void 0)}),e),-1==t&&r(Error("Failed to schedule timer."))})).o((function(e){throw l.clearTimeout(t),e}))}function zn(e){if(e.X&&"function"==typeof e.X)return e.X();if("string"===typeof e)return e.split("");if(v(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}function Wn(e){if(e.Y&&"function"==typeof e.Y)return e.Y();if(!e.X||"function"!=typeof e.X){if(v(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}function qn(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(v(e)||"string"===typeof e)Y(e,t,void 0);else for(var n=Wn(e),r=zn(e),i=r.length,o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}function Yn(e,t){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof Yn)for(n=e.Y(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function Xn(e){if(e.c!=e.a.length){for(var t=0,n=0;t<e.a.length;){var r=e.a[t];Qn(e.b,r)&&(e.a[n++]=r),t++}e.a.length=n}if(e.c!=e.a.length){var i={};for(n=t=0;t<e.a.length;)r=e.a[t],Qn(i,r)||(e.a[n++]=r,i[r]=1),t++;e.a.length=n}}function Qn(e,t){return Object.prototype.hasOwnProperty.call(e,t)}M(Fn,on),Fn.prototype[vn]=!0,Fn.prototype.addEventListener=function(e,t,n,r){An(this,e,t,n,r)},Fn.prototype.removeEventListener=function(e,t,n,r){Rn(this,e,t,n,r)},Fn.prototype.dispatchEvent=function(e){var t,n=this.hb;if(n)for(t=[];n;n=n.hb)t.push(n);n=this.bc;var r=e.type||e;if("string"===typeof e)e=new dn(e,n);else if(e instanceof dn)e.target=e.target||n;else{var i=e;e=new dn(r,n),xe(e,i)}if(i=!0,t)for(var o=t.length-1;0<=o;o--){var a=e.b=t[o];i=jn(a,r,!0,e)&&i}if(a=e.b=n,i=jn(a,r,!0,e)&&i,i=jn(a,r,!1,e)&&i,t)for(o=0;o<t.length;o++)a=e.b=t[o],i=jn(a,r,!1,e)&&i;return i},Fn.prototype.Da=function(){if(Fn.bb.Da.call(this),this.v){var e,t=this.v;for(e in t.a){for(var n=t.a[e],r=0;r<n.length;r++)bn(n[r]);delete t.a[e],t.b--}}this.hb=null},n=Yn.prototype,n.X=function(){Xn(this);for(var e=[],t=0;t<this.a.length;t++)e.push(this.b[this.a[t]]);return e},n.Y=function(){return Xn(this),this.a.concat()},n.clear=function(){this.b={},this.c=this.a.length=0},n.get=function(e,t){return Qn(this.b,e)?this.b[e]:t},n.set=function(e,t){Qn(this.b,e)||(this.c++,this.a.push(e)),this.b[e]=t},n.forEach=function(e,t){for(var n=this.Y(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);e.call(t,o,i,this)}};var Kn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Jn(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function Zn(e,t){var n;this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1,e instanceof Zn?(this.i=void 0!==t?t:e.i,$n(this,e.c),this.l=e.l,this.a=e.a,er(this,e.g),this.f=e.f,tr(this,wr(e.b)),this.h=e.h):e&&(n=String(e).match(Kn))?(this.i=!!t,$n(this,n[1]||"",!0),this.l=ar(n[2]||""),this.a=ar(n[3]||"",!0),er(this,n[4]),this.f=ar(n[5]||"",!0),tr(this,n[6]||"",!0),this.h=ar(n[7]||"")):(this.i=!!t,this.b=new pr(null,this.i))}function $n(e,t,n){e.c=n?ar(t,!0):t,e.c&&(e.c=e.c.replace(/:$/,""))}function er(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.g=t}else e.g=null}function tr(e,t,n){t instanceof pr?(e.b=t,xr(e.b,e.i)):(n||(t=sr(t,fr)),e.b=new pr(t,e.i))}function nr(e,t,n){e.b.set(t,n)}function rr(e,t){return e.b.get(t)}function ir(e){return e instanceof Zn?new Zn(e):new Zn(e,void 0)}function or(e,t,n,r){var i=new Zn(null,void 0);return e&&$n(i,e),t&&(i.a=t),n&&er(i,n),r&&(i.f=r),i}function ar(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function sr(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,cr),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function cr(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(15&e).toString(16)}Zn.prototype.toString=function(){var e=[],t=this.c;t&&e.push(sr(t,ur,!0),":");var n=this.a;return(n||"file"==t)&&(e.push("//"),(t=this.l)&&e.push(sr(t,ur,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.g,null!=n&&e.push(":",String(n))),(n=this.f)&&(this.a&&"/"!=n.charAt(0)&&e.push("/"),e.push(sr(n,"/"==n.charAt(0)?hr:lr,!0))),(n=this.b.toString())&&e.push("?",n),(n=this.h)&&e.push("#",sr(n,dr)),e.join("")},Zn.prototype.resolve=function(e){var t=new Zn(this),n=!!e.c;n?$n(t,e.c):n=!!e.l,n?t.l=e.l:n=!!e.a,n?t.a=e.a:n=null!=e.g;var r=e.f;if(n)er(t,e.g);else if(n=!!e.f){if("/"!=r.charAt(0))if(this.a&&!this.f)r="/"+r;else{var i=t.f.lastIndexOf("/");-1!=i&&(r=t.f.substr(0,i+1)+r)}if(i=r,".."==i||"."==i)r="";else if(de(i,"./")||de(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i}return n?t.f=r:n=""!==e.b.toString(),n?tr(t,wr(e.b)):n=!!e.h,n&&(t.h=e.h),t};var ur=/[#\/\?@]/g,lr=/[#\?:]/g,hr=/[#\?]/g,fr=/[#\?@]/g,dr=/#/g;function pr(e,t){this.b=this.a=null,this.c=e||null,this.f=!!t}function mr(e){e.a||(e.a=new Yn,e.b=0,e.c&&Jn(e.c,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function vr(e){var t=Wn(e);if("undefined"==typeof t)throw Error("Keys are undefined");var n=new pr(null,void 0);e=zn(e);for(var r=0;r<t.length;r++){var i=t[r],o=e[r];Array.isArray(o)?br(n,i,o):n.add(i,o)}return n}function gr(e,t){mr(e),t=Er(e,t),Qn(e.a.b,t)&&(e.c=null,e.b-=e.a.get(t).length,e=e.a,Qn(e.b,t)&&(delete e.b[t],e.c--,e.a.length>2*e.c&&Xn(e)))}function yr(e,t){return mr(e),t=Er(e,t),Qn(e.a.b,t)}function br(e,t,n){gr(e,t),0<n.length&&(e.c=null,e.a.set(Er(e,t),re(n)),e.b+=n.length)}function wr(e){var t=new pr;return t.c=e.c,e.a&&(t.a=new Yn(e.a),t.b=e.b),t}function Er(e,t){return t=String(t),e.f&&(t=t.toLowerCase()),t}function xr(e,t){t&&!e.f&&(mr(e),e.c=null,e.a.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(gr(this,t),br(this,n,e))}),e)),e.f=t}function _r(e){var t=[];return Ar(new Tr,e,t),t.join("")}function Tr(){}function Ar(e,t,n){if(null==t)n.push("null");else{if("object"==typeof t){if(Array.isArray(t)){var r=t;t=r.length,n.push("[");for(var i="",o=0;o<t;o++)n.push(i),Ar(e,r[o],n),i=",";return void n.push("]")}if(!(t instanceof String||t instanceof Number||t instanceof Boolean)){for(r in n.push("{"),i="",t)Object.prototype.hasOwnProperty.call(t,r)&&(o=t[r],"function"!=typeof o&&(n.push(i),Or(r,n),n.push(":"),Ar(e,o,n),i=","));return void n.push("}")}t=t.valueOf()}switch(typeof t){case"string":Or(t,n);break;case"number":n.push(isFinite(t)&&!isNaN(t)?String(t):"null");break;case"boolean":n.push(String(t));break;case"function":n.push("null");break;default:throw Error("Unknown type: "+typeof t)}}}n=pr.prototype,n.add=function(e,t){mr(this),this.c=null,e=Er(this,e);var n=this.a.get(e);return n||this.a.set(e,n=[]),n.push(t),this.b+=1,this},n.clear=function(){this.a=this.c=null,this.b=0},n.forEach=function(e,t){mr(this),this.a.forEach((function(n,r){Y(n,(function(n){e.call(t,n,r,this)}),this)}),this)},n.Y=function(){mr(this);for(var e=this.a.X(),t=this.a.Y(),n=[],r=0;r<t.length;r++)for(var i=e[r],o=0;o<i.length;o++)n.push(t[r]);return n},n.X=function(e){mr(this);var t=[];if("string"===typeof e)yr(this,e)&&(t=ne(t,this.a.get(Er(this,e))));else{e=this.a.X();for(var n=0;n<e.length;n++)t=ne(t,e[n])}return t},n.set=function(e,t){return mr(this),this.c=null,e=Er(this,e),yr(this,e)&&(this.b-=this.a.get(e).length),this.a.set(e,[t]),this.b+=1,this},n.get=function(e,t){return e?(e=this.X(e),0<e.length?String(e[0]):t):t},n.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var e=[],t=this.a.Y(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.X(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),e.push(a)}}return this.c=e.join("&")};var Sr={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},Mr=/\uffff/.test("￿")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function Or(e,t){t.push('"',e.replace(Mr,(function(e){var t=Sr[e];return t||(t="\\u"+(65536|e.charCodeAt(0)).toString(16).substr(1),Sr[e]=t),t})),'"')}function Rr(){var e=$r();return rt&&!!vt&&11==vt||/Edge\/\d+/.test(e)}function Cr(){return l.window&&l.window.location.href||self&&self.location&&self.location.href||""}function Ir(e,t){t=t||l.window;var n="about:blank";e&&(n=Fe(Ge(e)||We)),t.location.href=n}function Lr(e,t){var n,r=[];for(n in e)n in t?typeof e[n]!=typeof t[n]?r.push(n):"object"==typeof e[n]&&null!=e[n]&&null!=t[n]?0<Lr(e[n],t[n]).length&&r.push(n):e[n]!==t[n]&&r.push(n):r.push(n);for(n in t)n in e||r.push(n);return r}function Dr(){var e=$r();return e=Kr(e)!=Qr?null:(e=e.match(/\sChrome\/(\d+)/i))&&2==e.length?parseInt(e[1],10):null,!(e&&30>e)&&(!rt||!vt||9<vt)}function Pr(e){return e=(e||$r()).toLowerCase(),!!(e.match(/android/)||e.match(/webos/)||e.match(/iphone|ipad|ipod/)||e.match(/blackberry/)||e.match(/windows phone/)||e.match(/iemobile/))}function Nr(e){e=e||l.window;try{e.close()}catch(t){}}function Br(e,t,n){var r=Math.floor(1e9*Math.random()).toString();t=t||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-t)/2;for(a in t={width:t,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=$r().toLowerCase(),r&&(t.target=r,de(n,"crios/")&&(t.target="_blank")),Kr($r())==Xr&&(e=e||"http://localhost",t.scrollbars=!0),n=e||"",(e=t)||(e={}),r=window,t=n instanceof ke?n:Ge("undefined"!=typeof n.href?n.href:String(n))||We,n=e.target||n.target,i=[],e)switch(a){case"width":case"height":case"top":case"left":i.push(a+"="+e[a]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(a+"="+(e[a]?1:0))}var a=i.join(",");if((ge("iPhone")&&!ge("iPod")&&!ge("iPad")||ge("iPad")||ge("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(a=At(document,"A"),_e(a,"HTMLAnchorElement"),t=t instanceof ke?t:Ve(t),a.href=Fe(t),a.setAttribute("target",n),e.noreferrer&&a.setAttribute("rel","noreferrer"),e=document.createEvent("MouseEvent"),e.initMouseEvent("click",!0,!0,r,1),a.dispatchEvent(e),a={}):e.noreferrer?(a=Ke("",r,n,a),e=Fe(t),a&&(ot&&de(e,";")&&(e="'"+e.replace(/'/g,"%27")+"'"),a.opener=null,e='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Ze(e)+'">',e=(r=Re())?r.createHTML(e):e,e=new qe(e,null,Xe),r=a.document)&&(r.write(Ye(e)),r.close())):(a=Ke(t,r,n,a))&&e.noopener&&(a.opener=null),a)try{a.focus()}catch(s){}return a}function kr(e){return new Dt((function(t){function n(){Vn(2e3).then((function(){if(e&&!e.closed)return n();t()}))}return n()}))}var Fr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ur=/^[^@]+@[^@]+$/;function Hr(){var e=null;return new Dt((function(t){"complete"==l.document.readyState?t():(e=function(){t()},On(window,"load",e))})).o((function(t){throw Rn(window,"load",e),t}))}function jr(){return Gr(void 0)?Hr().then((function(){return new Dt((function(e,t){var n=l.document,r=setTimeout((function(){t(Error("Cordova framework is not ready."))}),1e3);n.addEventListener("deviceready",(function(){clearTimeout(r),e()}),!1)}))})):jt(Error("Cordova must run in an Android or iOS file scheme."))}function Gr(e){return e=e||$r(),!("file:"!==ii()&&"ionic:"!==ii()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function Vr(){var e=l.window;try{return!(!e||e==e.top)}catch(t){return!1}}function zr(){return"undefined"!==typeof l.WorkerGlobalScope&&"function"===typeof l.importScripts}function Wr(){return t["a"].INTERNAL.hasOwnProperty("reactNative")?"ReactNative":t["a"].INTERNAL.hasOwnProperty("node")?"Node":zr()?"Worker":"Browser"}function qr(){var e=Wr();return"ReactNative"===e||"Node"===e}function Yr(){for(var e=50,t=[];0<e;)t.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),e--;return t.join("")}var Xr="Firefox",Qr="Chrome";function Kr(e){var t=e.toLowerCase();return de(t,"opera/")||de(t,"opr/")||de(t,"opios/")?"Opera":de(t,"iemobile")?"IEMobile":de(t,"msie")||de(t,"trident/")?"IE":de(t,"edge/")?"Edge":de(t,"firefox/")?Xr:de(t,"silk/")?"Silk":de(t,"blackberry")?"Blackberry":de(t,"webos")?"Webos":!de(t,"safari/")||de(t,"chrome/")||de(t,"crios/")||de(t,"android")?!de(t,"chrome/")&&!de(t,"crios/")||de(t,"edge/")?de(t,"android")?"Android":(e=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==e.length?e[1]:"Other":Qr:"Safari"}var Jr={md:"FirebaseCore-web",od:"FirebaseUI-web"};function Zr(e,t){t=t||[];var n,r=[],i={};for(n in Jr)i[Jr[n]]=!0;for(n=0;n<t.length;n++)"undefined"!==typeof i[t[n]]&&(delete i[t[n]],r.push(t[n]));return r.sort(),t=r,t.length||(t=["FirebaseCore-web"]),r=Wr(),"Browser"===r?(i=$r(),r=Kr(i)):"Worker"===r&&(i=$r(),r=Kr(i)+"-"+r),r+"/JsCore/"+e+"/"+t.join(",")}function $r(){return l.navigator&&l.navigator.userAgent||""}function ei(e,t){e=e.split("."),t=t||l;for(var n=0;n<e.length&&"object"==typeof t&&null!=t;n++)t=t[e[n]];return n!=e.length&&(t=void 0),t}function ti(){try{var e=l.localStorage,t=ui();if(e)return e.setItem(t,"1"),e.removeItem(t),!Rr()||!!l.indexedDB}catch(n){return zr()&&!!l.indexedDB}return!1}function ni(){return(ri()||"chrome-extension:"===ii()||Gr())&&!qr()&&ti()&&!zr()}function ri(){return"http:"===ii()||"https:"===ii()}function ii(){return l.location&&l.location.protocol||null}function oi(e){return e=e||$r(),!Pr(e)&&Kr(e)!=Xr}function ai(e){return"undefined"===typeof e?null:_r(e)}function si(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&null!==e[t]&&void 0!==e[t]&&(n[t]=e[t]);return n}function ci(e){if(null!==e)return JSON.parse(e)}function ui(e){return e||Math.floor(1e9*Math.random()).toString()}function li(e){return e=e||$r(),"Safari"!=Kr(e)&&!e.toLowerCase().match(/iphone|ipad|ipod/)}function hi(){var e=l.___jsl;if(e&&e.H)for(var t in e.H)if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=e.H[t].L.concat(),e.CP)for(var n=0;n<e.CP.length;n++)e.CP[n]=null}function fi(e,t){if(e>t)throw Error("Short delay should be less than long delay!");this.a=e,this.c=t,e=$r(),t=Wr(),this.b=Pr(e)||"ReactNative"===t}function di(){var e=l.document;return!e||"undefined"===typeof e.visibilityState||"visible"==e.visibilityState}function pi(){var e=l.document,t=null;return di()||!e?Ht():new Dt((function(n){t=function(){di()&&(e.removeEventListener("visibilitychange",t,!1),n())},e.addEventListener("visibilitychange",t,!1)})).o((function(n){throw e.removeEventListener("visibilitychange",t,!1),n}))}function mi(e){try{var t=new Date(parseInt(e,10));if(!isNaN(t.getTime())&&!/[^0-9]/.test(e))return t.toUTCString()}catch(n){}return null}function vi(){return!(!ei("fireauth.oauthhelper",l)&&!ei("fireauth.iframe",l))}function gi(){var e=l.navigator;return e&&e.serviceWorker&&e.serviceWorker.controller||null}function yi(){var e=l.navigator;return e&&e.serviceWorker?Ht().then((function(){return e.serviceWorker.ready})).then((function(e){return e.active||null})).o((function(){return null})):Ht(null)}fi.prototype.get=function(){var e=l.navigator;return!e||"boolean"!==typeof e.onLine||!ri()&&"chrome-extension:"!==ii()&&"undefined"===typeof e.connection||e.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var bi,wi={};function Ei(e){wi[e]||(wi[e]=!0,"undefined"!==typeof console&&"function"===typeof console.warn&&console.warn(e))}try{var xi={};Object.defineProperty(xi,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(xi,"abcd",{configurable:!0,enumerable:!0,value:2}),bi=2==xi.abcd}catch(ep){bi=!1}function _i(e,t,n){bi?Object.defineProperty(e,t,{configurable:!0,enumerable:!0,value:n}):e[t]=n}function Ti(e,t){if(t)for(var n in t)t.hasOwnProperty(n)&&_i(e,n,t[n])}function Ai(e){var t={};return Ti(t,e),t}function Si(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function Mi(e,t){if(!t||!t.length)return!0;if(!e)return!1;for(var n=0;n<t.length;n++){var r=e[t[n]];if(void 0===r||null===r||""===r)return!1}return!0}function Oi(e){var t=e;if("object"==typeof e&&null!=e)for(var n in t="length"in e?[]:{},e)_i(t,n,Oi(e[n]));return t}function Ri(e){var t=e&&(e[Pi]?"phone":null);if(!(t&&e&&e[Di]))throw new R("internal-error","Internal assert: invalid MultiFactorInfo object");_i(this,"uid",e[Di]),_i(this,"displayName",e[Ii]||null);var n=null;e[Li]&&(n=new Date(e[Li]).toUTCString()),_i(this,"enrollmentTime",n),_i(this,"factorId",t)}function Ci(e){try{var t=new Ni(e)}catch(n){t=null}return t}Ri.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var Ii="displayName",Li="enrolledAt",Di="mfaEnrollmentId",Pi="phoneInfo";function Ni(e){Ri.call(this,e),_i(this,"phoneNumber",e[Pi])}function Bi(e){var t={},n=e[Hi],r=e[Gi],i=e[Vi];if(e=Ci(e[ji]),!i||i!=Fi&&i!=Ui&&!n||i==Ui&&!r||i==ki&&!e)throw Error("Invalid checkActionCode response!");i==Ui?(t[Wi]=n||null,t[Yi]=n||null,t[zi]=r):(t[Wi]=r||null,t[Yi]=r||null,t[zi]=n||null),t[qi]=e||null,_i(this,Qi,i),_i(this,Xi,Oi(t))}M(Ni,Ri),Ni.prototype.w=function(){var e=Ni.bb.w.call(this);return e.phoneNumber=this.phoneNumber,e};var ki="REVERT_SECOND_FACTOR_ADDITION",Fi="EMAIL_SIGNIN",Ui="VERIFY_AND_CHANGE_EMAIL",Hi="email",ji="mfaInfo",Gi="newEmail",Vi="requestType",zi="email",Wi="fromEmail",qi="multiFactorInfo",Yi="previousEmail",Xi="data",Qi="operation";function Ki(e){e=ir(e);var t=rr(e,Ji)||null,n=rr(e,Zi)||null,r=rr(e,to)||null;if(r=r&&ro[r]||null,!t||!n||!r)throw new R("argument-error",Ji+", "+Zi+"and "+to+" are required in a valid action code URL.");Ti(this,{apiKey:t,operation:r,code:n,continueUrl:rr(e,$i)||null,languageCode:rr(e,eo)||null,tenantId:rr(e,no)||null})}var Ji="apiKey",Zi="oobCode",$i="continueUrl",eo="languageCode",to="mode",no="tenantId",ro={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:ki,signIn:Fi,verifyAndChangeEmail:Ui,verifyEmail:"VERIFY_EMAIL"};function io(e){try{return new Ki(e)}catch(t){return null}}function oo(e){var t=e[lo];if("undefined"===typeof t)throw new R("missing-continue-uri");if("string"!==typeof t||"string"===typeof t&&!t.length)throw new R("invalid-continue-uri");this.h=t,this.b=this.a=null,this.g=!1;var n=e[ao];if(n&&"object"===typeof n){t=n[po];var r=n[ho];if(n=n[fo],"string"===typeof t&&t.length){if(this.a=t,"undefined"!==typeof r&&"boolean"!==typeof r)throw new R("argument-error",ho+" property must be a boolean when specified.");if(this.g=!!r,"undefined"!==typeof n&&("string"!==typeof n||"string"===typeof n&&!n.length))throw new R("argument-error",fo+" property must be a non empty string when specified.");this.b=n||null}else{if("undefined"!==typeof t)throw new R("argument-error",po+" property must be a non empty string when specified.");if("undefined"!==typeof r||"undefined"!==typeof n)throw new R("missing-android-pkg-name")}}else if("undefined"!==typeof n)throw new R("argument-error",ao+" property must be a non null object when specified.");if(this.f=null,(t=e[uo])&&"object"===typeof t){if(t=t[mo],"string"===typeof t&&t.length)this.f=t;else if("undefined"!==typeof t)throw new R("argument-error",mo+" property must be a non empty string when specified.")}else if("undefined"!==typeof t)throw new R("argument-error",uo+" property must be a non null object when specified.");if(t=e[co],"undefined"!==typeof t&&"boolean"!==typeof t)throw new R("argument-error",co+" property must be a boolean when specified.");if(this.c=!!t,e=e[so],"undefined"!==typeof e&&("string"!==typeof e||"string"===typeof e&&!e.length))throw new R("argument-error",so+" property must be a non empty string when specified.");this.i=e||null}var ao="android",so="dynamicLinkDomain",co="handleCodeInApp",uo="iOS",lo="url",ho="installApp",fo="minimumVersion",po="packageName",mo="bundleId";function vo(e){var t={};for(var n in t.continueUrl=e.h,t.canHandleCodeInApp=e.c,(t.androidPackageName=e.a)&&(t.androidMinimumVersion=e.b,t.androidInstallApp=e.g),t.iOSBundleId=e.f,t.dynamicLinkDomain=e.i,t)null===t[n]&&delete t[n];return t}function go(e){return K(e,(function(e){return e=e.toString(16),1<e.length?e:"0"+e})).join("")}var yo=null;function bo(e){var t=[];return wo(e,(function(e){t.push(e)})),t}function wo(e,t){function n(t){for(;r<e.length;){var n=e.charAt(r++),i=yo[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return t}Eo();for(var r=0;;){var i=n(-1),o=n(0),a=n(64),s=n(64);if(64===s&&-1===i)break;t(i<<2|o>>4),64!=a&&(t(o<<4&240|a>>2),64!=s&&t(a<<6&192|s))}}function Eo(){if(!yo){yo={};for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),t=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++)for(var r=e.concat(t[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===yo[o]&&(yo[o]=i)}}}function xo(e){var t=To(e);if(!(t&&t.sub&&t.iss&&t.aud&&t.exp))throw Error("Invalid JWT");this.h=e,this.a=t.exp,this.i=t.sub,e=Date.now()/1e3,this.g=t.iat||(e>this.a?this.a:e),this.b=t.provider_id||t.firebase&&t.firebase.sign_in_provider||null,this.f=t.firebase&&t.firebase.tenant||null,this.c=!!t.is_anonymous||"anonymous"==this.b}function _o(e){try{return new xo(e)}catch(t){return null}}function To(e){if(!e)return null;if(e=e.split("."),3!=e.length)return null;e=e[1];for(var t=(4-e.length%4)%4,n=0;n<t;n++)e+=".";try{var r=bo(e);for(e=[],n=t=0;t<r.length;){var i=r[t++];if(128>i)e[n++]=String.fromCharCode(i);else if(191<i&&224>i){var o=r[t++];e[n++]=String.fromCharCode((31&i)<<6|63&o)}else if(239<i&&365>i){o=r[t++];var a=r[t++],s=r[t++],c=((7&i)<<18|(63&o)<<12|(63&a)<<6|63&s)-65536;e[n++]=String.fromCharCode(55296+(c>>10)),e[n++]=String.fromCharCode(56320+(1023&c))}else o=r[t++],a=r[t++],e[n++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}return JSON.parse(e.join(""))}catch(u){}return null}xo.prototype.T=function(){return this.f},xo.prototype.l=function(){return this.c},xo.prototype.toString=function(){return this.h};var Ao="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),So=["client_id","response_type","scope","redirect_uri","state"],Mo={nd:{Ja:"locale",va:700,ua:600,fa:"facebook.com",Ya:So},pd:{Ja:null,va:500,ua:750,fa:"github.com",Ya:So},qd:{Ja:"hl",va:515,ua:680,fa:"google.com",Ya:So},wd:{Ja:"lang",va:485,ua:705,fa:"twitter.com",Ya:Ao},kd:{Ja:"locale",va:640,ua:600,fa:"apple.com",Ya:[]}};function Oo(e){for(var t in Mo)if(Mo[t].fa==e)return Mo[t];return null}function Ro(e){var t={};t["facebook.com"]=Po,t["google.com"]=Bo,t["github.com"]=No,t["twitter.com"]=ko;var n=e&&e[Io];try{if(n)return t[n]?new t[n](e):new Do(e);if("undefined"!==typeof e[Co])return new Lo(e)}catch(r){}return null}var Co="idToken",Io="providerId";function Lo(e){var t=e[Io];if(!t&&e[Co]){var n=_o(e[Co]);n&&n.b&&(t=n.b)}if(!t)throw Error("Invalid additional user info!");"anonymous"!=t&&"custom"!=t||(t=null),n=!1,"undefined"!==typeof e.isNewUser?n=!!e.isNewUser:"identitytoolkit#SignupNewUserResponse"===e.kind&&(n=!0),_i(this,"providerId",t),_i(this,"isNewUser",n)}function Do(e){Lo.call(this,e),e=ci(e.rawUserInfo||"{}"),_i(this,"profile",Oi(e||{}))}function Po(e){if(Do.call(this,e),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function No(e){if(Do.call(this,e),"github.com"!=this.providerId)throw Error("Invalid provider ID!");_i(this,"username",this.profile&&this.profile.login||null)}function Bo(e){if(Do.call(this,e),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function ko(e){if(Do.call(this,e),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");_i(this,"username",e.screenName||null)}function Fo(e){var t=ir(e),n=rr(t,"link"),r=rr(ir(n),"link");return t=rr(t,"deep_link_id"),rr(ir(t),"link")||t||r||n||e}function Uo(e,t){if(!e&&!t)throw new R("internal-error","Internal assert: no raw session string available");if(e&&t)throw new R("internal-error","Internal assert: unable to determine the session type");this.a=e||null,this.b=t||null,this.type=this.a?Ho:jo}M(Do,Lo),M(Po,Do),M(No,Do),M(Bo,Do),M(ko,Do);var Ho="enroll",jo="signin";function Go(){}function Vo(e,t){return e.then((function(e){if(e[Bs]){var n=_o(e[Bs]);if(!n||t!=n.i)throw new R("user-mismatch");return e}throw new R("user-mismatch")})).o((function(e){throw e&&e.code&&e.code==L+"user-not-found"?new R("user-mismatch"):e}))}function zo(e,t){if(!t)throw new R("internal-error","failed to construct a credential");this.a=t,_i(this,"providerId",e),_i(this,"signInMethod",e)}function Wo(e){return{pendingToken:e.a,requestUri:"http://localhost"}}function qo(e){if(e&&e.providerId&&e.signInMethod&&0==e.providerId.indexOf("saml.")&&e.pendingToken)try{return new zo(e.providerId,e.pendingToken)}catch(t){}return null}function Yo(e,t,n){if(this.a=null,t.idToken||t.accessToken)t.idToken&&_i(this,"idToken",t.idToken),t.accessToken&&_i(this,"accessToken",t.accessToken),t.nonce&&!t.pendingToken&&_i(this,"nonce",t.nonce),t.pendingToken&&(this.a=t.pendingToken);else{if(!t.oauthToken||!t.oauthTokenSecret)throw new R("internal-error","failed to construct a credential");_i(this,"accessToken",t.oauthToken),_i(this,"secret",t.oauthTokenSecret)}_i(this,"providerId",e),_i(this,"signInMethod",n)}function Xo(e){var t={};return e.idToken&&(t.id_token=e.idToken),e.accessToken&&(t.access_token=e.accessToken),e.secret&&(t.oauth_token_secret=e.secret),t.providerId=e.providerId,e.nonce&&!e.a&&(t.nonce=e.nonce),t={postBody:vr(t).toString(),requestUri:"http://localhost"},e.a&&(delete t.postBody,t.pendingToken=e.a),t}function Qo(e){if(e&&e.providerId&&e.signInMethod){var t={idToken:e.oauthIdToken,accessToken:e.oauthTokenSecret?null:e.oauthAccessToken,oauthTokenSecret:e.oauthTokenSecret,oauthToken:e.oauthTokenSecret&&e.oauthAccessToken,nonce:e.nonce,pendingToken:e.pendingToken};try{return new Yo(e.providerId,t,e.signInMethod)}catch(n){}}return null}function Ko(e,t){this.Qc=t||[],Ti(this,{providerId:e,isOAuthProvider:!0}),this.Jb={},this.qb=(Oo(e)||{}).Ja||null,this.pb=null}function Jo(e){if("string"!==typeof e||0!=e.indexOf("saml."))throw new R("argument-error",'SAML provider IDs must be prefixed with "saml."');Ko.call(this,e,[])}function Zo(e){Ko.call(this,e,So),this.a=[]}function $o(){Zo.call(this,"facebook.com")}function ea(e){if(!e)throw new R("argument-error","credential failed: expected 1 argument (the OAuth access token).");var t=e;return y(e)&&(t=e.accessToken),(new $o).credential({accessToken:t})}function ta(){Zo.call(this,"github.com")}function na(e){if(!e)throw new R("argument-error","credential failed: expected 1 argument (the OAuth access token).");var t=e;return y(e)&&(t=e.accessToken),(new ta).credential({accessToken:t})}function ra(){Zo.call(this,"google.com"),this.Ca("profile")}function ia(e,t){var n=e;return y(e)&&(n=e.idToken,t=e.accessToken),(new ra).credential({idToken:n,accessToken:t})}function oa(){Ko.call(this,"twitter.com",Ao)}function aa(e,t){var n=e;if(y(n)||(n={oauthToken:e,oauthTokenSecret:t}),!n.oauthToken||!n.oauthTokenSecret)throw new R("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new Yo("twitter.com",n,"twitter.com")}function sa(e,t,n){this.a=e,this.f=t,_i(this,"providerId","password"),_i(this,"signInMethod",n===ua.EMAIL_LINK_SIGN_IN_METHOD?ua.EMAIL_LINK_SIGN_IN_METHOD:ua.EMAIL_PASSWORD_SIGN_IN_METHOD)}function ca(e){return e&&e.email&&e.password?new sa(e.email,e.password,e.signInMethod):null}function ua(){Ti(this,{providerId:"password",isOAuthProvider:!1})}function la(e,t){if(t=ha(t),!t)throw new R("argument-error","Invalid email link!");return new sa(e,t.code,ua.EMAIL_LINK_SIGN_IN_METHOD)}function ha(e){return e=Fo(e),(e=io(e))&&e.operation===Fi?e:null}function fa(e){if(!(e.fb&&e.eb||e.La&&e.ea))throw new R("internal-error");this.a=e,_i(this,"providerId","phone"),this.fa="phone",_i(this,"signInMethod","phone")}function da(e){if(e&&"phone"===e.providerId&&(e.verificationId&&e.verificationCode||e.temporaryProof&&e.phoneNumber)){var t={};return Y(["verificationId","verificationCode","temporaryProof","phoneNumber"],(function(n){e[n]&&(t[n]=e[n])})),new fa(t)}return null}function pa(e){return e.a.La&&e.a.ea?{temporaryProof:e.a.La,phoneNumber:e.a.ea}:{sessionInfo:e.a.fb,code:e.a.eb}}function ma(e){try{this.a=e||t["a"].auth()}catch(n){throw new R("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Ti(this,{providerId:"phone",isOAuthProvider:!1})}function va(e,t){if(!e)throw new R("missing-verification-id");if(!t)throw new R("missing-verification-code");return new fa({fb:e,eb:t})}function ga(e){if(e.temporaryProof&&e.phoneNumber)return new fa({La:e.temporaryProof,ea:e.phoneNumber});var t=e&&e.providerId;if(!t||"password"===t)return null;var n=e&&e.oauthAccessToken,r=e&&e.oauthTokenSecret,i=e&&e.nonce,o=e&&e.oauthIdToken,a=e&&e.pendingToken;try{switch(t){case"google.com":return ia(o,n);case"facebook.com":return ea(n);case"github.com":return na(n);case"twitter.com":return aa(n,r);default:return n||r||o||a?a?0==t.indexOf("saml.")?new zo(t,a):new Yo(t,{pendingToken:a,idToken:e.oauthIdToken,accessToken:e.oauthAccessToken},t):new Zo(t).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(s){return null}}function ya(e){if(!e.isOAuthProvider)throw new R("invalid-oauth-provider")}function ba(e,t,n,r,i,o,a){if(this.c=e,this.b=t||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=a||null,this.a=i||null,!this.g&&!this.a)throw new R("invalid-auth-event");if(this.g&&this.a)throw new R("invalid-auth-event");if(this.g&&!this.f)throw new R("invalid-auth-event")}function wa(e){return e=e||{},e.type?new ba(e.type,e.eventId,e.urlResponse,e.sessionId,e.error&&C(e.error),e.postBody,e.tenantId):null}function Ea(){this.b=null,this.a=[]}Uo.prototype.Ha=function(){return this.a?Ht(this.a):Ht(this.b)},Uo.prototype.w=function(){return this.type==Ho?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},Go.prototype.ka=function(){},Go.prototype.b=function(){},Go.prototype.c=function(){},Go.prototype.w=function(){},zo.prototype.ka=function(e){return fc(e,Wo(this))},zo.prototype.b=function(e,t){var n=Wo(this);return n.idToken=t,dc(e,n)},zo.prototype.c=function(e,t){return Vo(pc(e,Wo(this)),t)},zo.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},Yo.prototype.ka=function(e){return fc(e,Xo(this))},Yo.prototype.b=function(e,t){var n=Xo(this);return n.idToken=t,dc(e,n)},Yo.prototype.c=function(e,t){var n=Xo(this);return Vo(pc(e,n),t)},Yo.prototype.w=function(){var e={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(e.oauthIdToken=this.idToken),this.accessToken&&(e.oauthAccessToken=this.accessToken),this.secret&&(e.oauthTokenSecret=this.secret),this.nonce&&(e.nonce=this.nonce),this.a&&(e.pendingToken=this.a),e},Ko.prototype.Ka=function(e){return this.Jb=we(e),this},M(Jo,Ko),M(Zo,Ko),Zo.prototype.Ca=function(e){return $(this.a,e)||this.a.push(e),this},Zo.prototype.Rb=function(){return re(this.a)},Zo.prototype.credential=function(e,t){var n;if(n=y(e)?{idToken:e.idToken||null,accessToken:e.accessToken||null,nonce:e.rawNonce||null}:{idToken:e||null,accessToken:t||null},!n.idToken&&!n.accessToken)throw new R("argument-error","credential failed: must provide the ID token and/or the access token.");return new Yo(this.providerId,n,this.providerId)},M($o,Zo),_i($o,"PROVIDER_ID","facebook.com"),_i($o,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),M(ta,Zo),_i(ta,"PROVIDER_ID","github.com"),_i(ta,"GITHUB_SIGN_IN_METHOD","github.com"),M(ra,Zo),_i(ra,"PROVIDER_ID","google.com"),_i(ra,"GOOGLE_SIGN_IN_METHOD","google.com"),M(oa,Ko),_i(oa,"PROVIDER_ID","twitter.com"),_i(oa,"TWITTER_SIGN_IN_METHOD","twitter.com"),sa.prototype.ka=function(e){return this.signInMethod==ua.EMAIL_LINK_SIGN_IN_METHOD?Qc(e,xc,{email:this.a,oobCode:this.f}):Qc(e,zc,{email:this.a,password:this.f})},sa.prototype.b=function(e,t){return this.signInMethod==ua.EMAIL_LINK_SIGN_IN_METHOD?Qc(e,_c,{idToken:t,email:this.a,oobCode:this.f}):Qc(e,Bc,{idToken:t,email:this.a,password:this.f})},sa.prototype.c=function(e,t){return Vo(this.ka(e),t)},sa.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},Ti(ua,{PROVIDER_ID:"password"}),Ti(ua,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Ti(ua,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),fa.prototype.ka=function(e){return e.gb(pa(this))},fa.prototype.b=function(e,t){var n=pa(this);return n.idToken=t,Qc(e,qc,n)},fa.prototype.c=function(e,t){var n=pa(this);return n.operation="REAUTH",e=Qc(e,Yc,n),Vo(e,t)},fa.prototype.w=function(){var e={providerId:"phone"};return this.a.fb&&(e.verificationId=this.a.fb),this.a.eb&&(e.verificationCode=this.a.eb),this.a.La&&(e.temporaryProof=this.a.La),this.a.ea&&(e.phoneNumber=this.a.ea),e},ma.prototype.gb=function(e,t){var n=this.a.a;return Ht(t.verify()).then((function(r){if("string"!==typeof r)throw new R("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(t.type){case"recaptcha":var i,o=y(e)?e.session:null,a=y(e)?e.phoneNumber:e;return i=o&&o.type==Ho?o.Ha().then((function(e){return oc(n,{idToken:e,phoneEnrollmentInfo:{phoneNumber:a,recaptchaToken:r}})})):o&&o.type==jo?o.Ha().then((function(t){return sc(n,{mfaPendingCredential:t,mfaEnrollmentId:e.multiFactorHint&&e.multiFactorHint.uid||e.multiFactorUid,phoneSignInInfo:{recaptchaToken:r}})})):ic(n,{phoneNumber:a,recaptchaToken:r}),i.then((function(e){return"function"===typeof t.reset&&t.reset(),e}),(function(e){throw"function"===typeof t.reset&&t.reset(),e}));default:throw new R("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}}))},Ti(ma,{PROVIDER_ID:"phone"}),Ti(ma,{PHONE_SIGN_IN_METHOD:"phone"}),ba.prototype.getUid=function(){var e=[];return e.push(this.c),this.b&&e.push(this.b),this.f&&e.push(this.f),this.h&&e.push(this.h),e.join("-")},ba.prototype.T=function(){return this.h},ba.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var xa,_a=null;function Ta(e){var t=_a;t.a.push(e),t.b||(t.b=function(e){for(var n=0;n<t.a.length;n++)t.a[n](e)},e=ei("universalLinks.subscribe",l),"function"===typeof e&&e(null,t.b))}function Aa(e){var t="unauthorized-domain",n=void 0,r=ir(e);e=r.a,r=r.c,"chrome-extension"==r?n=Je("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",e):"http"==r||"https"==r?n=Je("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",e):t="operation-not-supported-in-this-environment",R.call(this,t,n)}function Sa(e,t,n){R.call(this,e,n),e=t||{},e.Kb&&_i(this,"email",e.Kb),e.ea&&_i(this,"phoneNumber",e.ea),e.credential&&_i(this,"credential",e.credential),e.$b&&_i(this,"tenantId",e.$b)}function Ma(e){if(e.code){var t=e.code||"";0==t.indexOf(L)&&(t=t.substring(L.length));var n={credential:ga(e),$b:e.tenantId};if(e.email)n.Kb=e.email;else if(e.phoneNumber)n.ea=e.phoneNumber;else if(!n.credential)return new R(t,e.message||void 0);return new Sa(t,n,e.message)}return null}function Oa(){}function Ra(e){return e.c||(e.c=e.b())}function Ca(){}function Ia(e){if(!e.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var t=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<t.length;n++){var r=t[n];try{return new ActiveXObject(r),e.f=r}catch(i){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return e.f}function La(){}function Da(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=T(this.qc,this),this.a.onerror=T(this.Tb,this),this.a.onprogress=T(this.rc,this),this.a.ontimeout=T(this.vc,this)}function Pa(e,t){e.readyState=t,e.onreadystatechange&&e.onreadystatechange()}function Na(e,t,n){this.reset(e,t,n,void 0,void 0)}M(Aa,R),M(Sa,R),Sa.prototype.w=function(){var e={code:this.code,message:this.message};this.email&&(e.email=this.email),this.phoneNumber&&(e.phoneNumber=this.phoneNumber),this.tenantId&&(e.tenantId=this.tenantId);var t=this.credential&&this.credential.w();return t&&xe(e,t),e},Sa.prototype.toJSON=function(){return this.w()},Oa.prototype.c=null,M(Ca,Oa),Ca.prototype.a=function(){var e=Ia(this);return e?new ActiveXObject(e):new XMLHttpRequest},Ca.prototype.b=function(){var e={};return Ia(this)&&(e[0]=!0,e[1]=!0),e},xa=new Ca,M(La,Oa),La.prototype.a=function(){var e=new XMLHttpRequest;if("withCredentials"in e)return e;if("undefined"!=typeof XDomainRequest)return new Da;throw Error("Unsupported browser")},La.prototype.b=function(){return{}},n=Da.prototype,n.open=function(e,t,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(e,t)},n.send=function(e){if(e){if("string"!=typeof e)throw Error("Only string data is supported");this.a.send(e)}else this.a.send()},n.abort=function(){this.a.abort()},n.setRequestHeader=function(){},n.getResponseHeader=function(e){return"content-type"==e.toLowerCase()?this.a.contentType:""},n.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,Pa(this,4)},n.Tb=function(){this.status=500,this.response=this.responseText="",Pa(this,4)},n.vc=function(){this.Tb()},n.rc=function(){this.status=200,Pa(this,1)},n.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},Na.prototype.a=null;function Ba(e){this.f=e,this.b=this.c=this.a=null}function ka(e,t){this.name=e,this.value=t}Na.prototype.reset=function(e,t,n,r,i){"number"==typeof i||0,r||S(),delete this.a},ka.prototype.toString=function(){return this.name};var Fa=new ka("SEVERE",1e3),Ua=new ka("WARNING",900),Ha=new ka("CONFIG",700),ja=new ka("FINE",500);function Ga(e){return e.c?e.c:e.a?Ga(e.a):(U("Root logger has no level set."),null)}Ba.prototype.log=function(e,t,n){if(e.value>=Ga(this).value)for(g(t)&&(t=t()),e=new Na(e,String(t),this.f),n&&(e.a=n),n=this;n;)n=n.a};var Va={},za=null;function Wa(e){var t;if(za||(za=new Ba(""),Va[""]=za,za.c=Ha),!(t=Va[e])){t=new Ba(e);var n=e.lastIndexOf("."),r=e.substr(n+1);n=Wa(e.substr(0,n)),n.b||(n.b={}),n.b[r]=t,t.a=n,Va[e]=t}return t}function qa(e,t){e&&e.log(ja,t,void 0)}function Ya(e){this.f=e}function Xa(e){Fn.call(this),this.u=e,this.h=void 0,this.readyState=Qa,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=Wa("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}M(Ya,Oa),Ya.prototype.a=function(){return new Xa(this.f)},Ya.prototype.b=function(e){return function(){return e}}({}),M(Xa,Fn);var Qa=0;function Ka(e){e.c.read().then(e.pc.bind(e)).catch(e.Va.bind(e))}function Ja(e){e.readyState=4,e.g=null,e.c=null,e.m=null,Za(e)}function Za(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function $a(e){Fn.call(this),this.headers=new Yn,this.D=e||null,this.c=!1,this.C=this.a=null,this.h=this.P=this.l="",this.f=this.N=this.i=this.J=!1,this.g=0,this.s=null,this.m=es,this.u=this.S=!1}n=Xa.prototype,n.open=function(e,t){if(this.readyState!=Qa)throw this.abort(),Error("Error reopening a connection");this.s=e,this.f=t,this.readyState=1,Za(this)},n.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var t={headers:this.l,method:this.s,credentials:this.h,cache:void 0};e&&(t.body=e),this.u.fetch(new Request(this.f,t)).then(this.uc.bind(this),this.Va.bind(this))},n.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,Ja(this)),this.readyState=Qa},n.uc=function(e){this.a&&(this.g=e,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=e.headers,this.readyState=2,Za(this)),this.a&&(this.readyState=3,Za(this),this.a&&("arraybuffer"===this.responseType?e.arrayBuffer().then(this.sc.bind(this),this.Va.bind(this)):"undefined"!==typeof l.ReadableStream&&"body"in e?(this.response=this.responseText="",this.c=e.body.getReader(),this.m=new TextDecoder,Ka(this)):e.text().then(this.tc.bind(this),this.Va.bind(this)))))},n.pc=function(e){if(this.a){var t=this.m.decode(e.value?e.value:new Uint8Array(0),{stream:!e.done});t&&(this.response=this.responseText+=t),e.done?Ja(this):Za(this),3==this.readyState&&Ka(this)}},n.tc=function(e){this.a&&(this.response=this.responseText=e,Ja(this))},n.sc=function(e){this.a&&(this.response=e,Ja(this))},n.Va=function(e){var t=this.i;t&&t.log(Ua,"Failed to fetch url "+this.f,e instanceof Error?e:Error(e)),this.a&&Ja(this)},n.setRequestHeader=function(e,t){this.l.append(e,t)},n.getResponseHeader=function(e){return this.b?this.b.get(e.toLowerCase())||"":((e=this.i)&&e.log(Ua,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},n.getAllResponseHeaders=function(){if(!this.b){var e=this.i;return e&&e.log(Ua,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}e=[];for(var t=this.b.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Xa.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(e){this.h=e?"include":"same-origin"}}),M($a,Fn);var es="";$a.prototype.b=Wa("goog.net.XhrIo");var ts=/^https?$/i,ns=["POST","PUT"];function rs(e,t,n,r,i){if(e.a)throw Error("[goog.net.XhrIo] Object is active with another request="+e.l+"; newUri="+t);n=n?n.toUpperCase():"GET",e.l=t,e.h="",e.P=n,e.J=!1,e.c=!0,e.a=e.D?e.D.a():xa.a(),e.C=e.D?Ra(e.D):Ra(xa),e.a.onreadystatechange=T(e.Wb,e);try{qa(e.b,ps(e,"Opening Xhr")),e.N=!0,e.a.open(n,String(t),!0),e.N=!1}catch(a){return qa(e.b,ps(e,"Error opening Xhr: "+a.message)),void as(e,a)}t=r||"";var o=new Yn(e.headers);i&&qn(i,(function(e,t){o.set(t,e)})),i=Z(o.Y()),r=l.FormData&&t instanceof l.FormData,!$(ns,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach((function(e,t){this.a.setRequestHeader(t,e)}),e),e.m&&(e.a.responseType=e.m),"withCredentials"in e.a&&e.a.withCredentials!==e.S&&(e.a.withCredentials=e.S);try{ls(e),0<e.g&&(e.u=is(e.a),qa(e.b,ps(e,"Will abort after "+e.g+"ms if incomplete, xhr2 "+e.u)),e.u?(e.a.timeout=e.g,e.a.ontimeout=T(e.Ma,e)):e.s=Gn(e.Ma,e.g,e)),qa(e.b,ps(e,"Sending request")),e.i=!0,e.a.send(t),e.i=!1}catch(a){qa(e.b,ps(e,"Send error: "+a.message)),as(e,a)}}function is(e){return rt&&pt(9)&&"number"===typeof e.timeout&&void 0!==e.ontimeout}function os(e){return"content-type"==e.toLowerCase()}function as(e,t){e.c=!1,e.a&&(e.f=!0,e.a.abort(),e.f=!1),e.h=t,ss(e),us(e)}function ss(e){e.J||(e.J=!0,e.dispatchEvent("complete"),e.dispatchEvent("error"))}function cs(e){if(e.c&&"undefined"!=typeof u)if(e.C[1]&&4==hs(e)&&2==fs(e))qa(e.b,ps(e,"Local request error detected and ignored"));else if(e.i&&4==hs(e))Gn(e.Wb,0,e);else if(e.dispatchEvent("readystatechange"),4==hs(e)){qa(e.b,ps(e,"Request complete")),e.c=!1;try{var t,n=fs(e);e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var o=String(e.l).match(Kn)[1]||null;if(!o&&l.self&&l.self.location){var a=l.self.location.protocol;o=a.substr(0,a.length-1)}i=!ts.test(o?o.toLowerCase():"")}t=i}if(t)e.dispatchEvent("complete"),e.dispatchEvent("success");else{try{var s=2<hs(e)?e.a.statusText:""}catch(c){qa(e.b,"Can not get status: "+c.message),s=""}e.h=s+" ["+fs(e)+"]",ss(e)}}finally{us(e)}}}function us(e,t){if(e.a){ls(e);var n=e.a,r=e.C[0]?p:null;e.a=null,e.C=null,t||e.dispatchEvent("ready");try{n.onreadystatechange=r}catch(i){(e=e.b)&&e.log(Fa,"Problem encountered resetting onreadystatechange: "+i.message,void 0)}}}function ls(e){e.a&&e.u&&(e.a.ontimeout=null),e.s&&(l.clearTimeout(e.s),e.s=null)}function hs(e){return e.a?e.a.readyState:0}function fs(e){try{return 2<hs(e)?e.a.status:-1}catch(t){return-1}}function ds(e){try{return e.a?e.a.responseText:""}catch(t){return qa(e.b,"Can not get responseText: "+t.message),""}}function ps(e,t){return t+" ["+e.P+" "+e.l+" "+fs(e)+"]"}function ms(e){var t=Os;this.g=[],this.u=t,this.s=e||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}function vs(e,t,n){e.a=!0,e.c=n,e.f=!t,Es(e)}function gs(e){if(e.a){if(!e.v)throw new xs(e);e.v=!1}}function ys(e,t){bs(e,null,t,void 0)}function bs(e,t,n,r){e.g.push([t,n,r]),e.a&&Es(e)}function ws(e){return J(e.g,(function(e){return g(e[1])}))}function Es(e){if(e.h&&e.a&&ws(e)){var t=e.h,n=As[t];n&&(l.clearTimeout(n.a),delete As[t]),e.h=0}e.b&&(e.b.l--,delete e.b),t=e.c;for(var r=n=!1;e.g.length&&!e.i;){var i=e.g.shift(),o=i[0],a=i[1];if(i=i[2],o=e.f?a:o)try{var s=o.call(i||e.s,t);void 0!==s&&(e.f=e.f&&(s==t||s instanceof Error),e.c=t=s),(B(t)||"function"===typeof l.Promise&&t instanceof l.Promise)&&(r=!0,e.i=!0)}catch(c){t=c,e.f=!0,ws(e)||(n=!0)}}e.c=t,r&&(s=T(e.m,e,!0),r=T(e.m,e,!1),t instanceof ms?(bs(t,s,r),t.C=!0):t.then(s,r)),n&&(t=new Ts(t),As[t.a]=t,e.h=t.a)}function xs(){k.call(this)}function _s(){k.call(this)}function Ts(e){this.a=l.setTimeout(T(this.c,this),0),this.b=e}n=$a.prototype,n.Ma=function(){"undefined"!=typeof u&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",qa(this.b,ps(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},n.abort=function(){this.a&&this.c&&(qa(this.b,ps(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),us(this))},n.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),us(this,!0)),$a.bb.Da.call(this)},n.Wb=function(){this.ya||(this.N||this.i||this.f?cs(this):this.Jc())},n.Jc=function(){cs(this)},n.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case es:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var e=this.b;return e&&e.log(Fa,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(t){return qa(this.b,"Can not get response: "+t.message),null}},ms.prototype.cancel=function(e){if(this.a)this.c instanceof ms&&this.c.cancel();else{if(this.b){var t=this.b;delete this.b,e?t.cancel(e):(t.l--,0>=t.l&&t.cancel())}this.u?this.u.call(this.s,this):this.v=!0,this.a||(e=new _s(this),gs(this),vs(this,!1,e))}},ms.prototype.m=function(e,t){this.i=!1,vs(this,e,t)},ms.prototype.then=function(e,t,n){var r,i,o=new Dt((function(e,t){r=e,i=t}));return bs(this,r,(function(e){e instanceof _s?o.cancel():i(e)})),o.then(e,t,n)},ms.prototype.$goog_Thenable=!0,M(xs,k),xs.prototype.message="Deferred has already fired",xs.prototype.name="AlreadyCalledError",M(_s,k),_s.prototype.message="Deferred was canceled",_s.prototype.name="CanceledError",Ts.prototype.c=function(){throw delete As[this.a],this.b};var As={};function Ss(e){var t={},n=t.document||document,r=Ie(e).toString(),i=At(document,"SCRIPT"),o={Xb:i,Ma:void 0},a=new ms(o),s=null,c=null!=t.timeout?t.timeout:5e3;return 0<c&&(s=window.setTimeout((function(){Rs(i,!0);var e=new Ls(Is,"Timeout reached for loading script "+r);gs(a),vs(a,!1,e)}),c),o.Ma=s),i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(Rs(i,t.xd||!1,s),gs(a),vs(a,!0,null))},i.onerror=function(){Rs(i,!0,s);var e=new Ls(Cs,"Error while loading script "+r);gs(a),vs(a,!1,e)},o=t.attributes||{},xe(o,{type:"text/javascript",charset:"UTF-8"}),bt(i,o),Qe(i,e),Ms(n).appendChild(i),a}function Ms(e){var t;return(t=(e||document).getElementsByTagName("HEAD"))&&0!=t.length?t[0]:e.documentElement}function Os(){if(this&&this.Xb){var e=this.Xb;e&&"SCRIPT"==e.tagName&&Rs(e,!0,this.Ma)}}function Rs(e,t,n){null!=n&&l.clearTimeout(n),e.onload=p,e.onerror=p,e.onreadystatechange=p,t&&window.setTimeout((function(){e&&e.parentNode&&e.parentNode.removeChild(e)}),0)}var Cs=0,Is=1;function Ls(e,t){var n="Jsloader error (code #"+e+")";t&&(n+=": "+t),k.call(this,n),this.code=e}function Ds(e){this.f=e}function Ps(e,n,r){if(this.c=e,e=n||{},this.l=e.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=e.secureTokenTimeout||ks,this.g=we(e.secureTokenHeaders||Fs),this.h=e.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=e.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=e.firebaseTimeout||Us,this.a=we(e.firebaseHeaders||Hs),r&&(this.a["X-Client-Version"]=r,this.g["X-Client-Version"]=r),r="Node"==Wr(),r=l.XMLHttpRequest||r&&t["a"].INTERNAL.node&&t["a"].INTERNAL.node.XMLHttpRequest,!r&&!zr())throw new R("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,zr()?this.f=new Ya(self):qr()?this.f=new Ds(r):this.f=new La,this.b=null}M(Ls,k),M(Ds,Oa),Ds.prototype.a=function(){return new this.f},Ds.prototype.b=function(){return{}};var Ns,Bs="idToken",ks=new fi(3e4,6e4),Fs={"Content-Type":"application/x-www-form-urlencoded"},Us=new fi(3e4,6e4),Hs={"Content-Type":"application/json"};function js(e,t){t?e.a["X-Firebase-Locale"]=t:delete e.a["X-Firebase-Locale"]}function Gs(e,t){t&&(e.l=Vs("https://securetoken.googleapis.com/v1/token",t),e.h=Vs("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",t),e.i=Vs("https://identitytoolkit.googleapis.com/v2/",t))}function Vs(e,t){return e=ir(e),t=ir(t.url),e.f=e.a+e.f,$n(e,t.c),e.a=t.a,er(e,t.g),e.toString()}function zs(e,t){t?(e.a["X-Client-Version"]=t,e.g["X-Client-Version"]=t):(delete e.a["X-Client-Version"],delete e.g["X-Client-Version"])}function Ws(e,t,n,r,i,o,a){Dr()||zr()?e=T(e.u,e):(Ns||(Ns=new Dt((function(e,t){Xs(e,t)}))),e=T(e.s,e)),e(t,n,r,i,o,a)}Ps.prototype.T=function(){return this.b},Ps.prototype.u=function(e,t,n,r,i,o){if(zr()&&("undefined"===typeof l.fetch||"undefined"===typeof l.Headers||"undefined"===typeof l.Request))throw new R("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var a=new $a(this.f);if(o){a.g=Math.max(0,o);var s=setTimeout((function(){a.dispatchEvent("timeout")}),o)}Un(a,"complete",(function(){s&&clearTimeout(s);var e=null;try{e=JSON.parse(ds(this))||null}catch(n){e=null}t&&t(e)})),Hn(a,"ready",(function(){s&&clearTimeout(s),cn(this)})),Hn(a,"timeout",(function(){s&&clearTimeout(s),cn(this),t&&t(null)})),rs(a,e,n,r,i)};var qs=new Te(Oe,"https://apis.google.com/js/client.js?onload=%{onload}"),Ys="__fcb"+Math.floor(1e6*Math.random()).toString();function Xs(e,t){if(((window.gapi||{}).client||{}).request)e();else{l[Ys]=function(){((window.gapi||{}).client||{}).request?e():t(Error("CORS_UNSUPPORTED"))};var n=Le(qs,{onload:Ys});ys(Ss(n),(function(){t(Error("CORS_UNSUPPORTED"))}))}}function Qs(e,t){return new Dt((function(n,r){"refresh_token"==t.grant_type&&t.refresh_token||"authorization_code"==t.grant_type&&t.code?Ws(e,e.l+"?key="+encodeURIComponent(e.c),(function(e){e?e.error?r(Jc(e)):e.access_token&&e.refresh_token?n(e):r(new R("internal-error")):r(new R("network-request-failed"))}),"POST",vr(t).toString(),e.g,e.m.get()):r(new R("internal-error"))}))}function Ks(e,t,n,r,i,o,a){var s=ir(t+n);nr(s,"key",e.c),a&&nr(s,"cb",Date.now().toString());var c="GET"==r;if(c)for(var u in i)i.hasOwnProperty(u)&&nr(s,u,i[u]);return new Dt((function(t,n){Ws(e,s.toString(),(function(e){e?e.error?n(Jc(e,o||{})):t(e):n(new R("network-request-failed"))}),r,c?void 0:_r(si(i)),e.a,e.v.get())}))}function Js(e){if(e=e.email,"string"!==typeof e||!Ur.test(e))throw new R("invalid-email")}function Zs(e){"email"in e&&Js(e)}function $s(e,t){return Qc(e,bc,{identifier:t,continueUri:ri()?Cr():"http://localhost"}).then((function(e){return e.signinMethods||[]}))}function ec(e){return Qc(e,Ic,{}).then((function(e){return e.authorizedDomains||[]}))}function tc(e){if(!e[Bs]){if(e.mfaPendingCredential)throw new R("multi-factor-auth-required",null,we(e));throw new R("internal-error")}}function nc(e){if(e.phoneNumber||e.temporaryProof){if(!e.phoneNumber||!e.temporaryProof)throw new R("internal-error")}else{if(!e.sessionInfo)throw new R("missing-verification-id");if(!e.code)throw new R("missing-verification-code")}}Ps.prototype.s=function(e,t,n,r,i){var o=this;Ns.then((function(){window.gapi.client.setApiKey(o.c);var a=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:e,method:n,body:r,headers:i,authType:"none",callback:function(e){window.gapi.auth.setToken(a),t&&t(e)}})})).o((function(e){t&&t({error:{message:e&&e.message||"CORS_UNSUPPORTED"}})}))},Ps.prototype.Ab=function(){return Qc(this,kc,{})},Ps.prototype.Cb=function(e,t){return Qc(this,Nc,{idToken:e,email:t})},Ps.prototype.Db=function(e,t){return Qc(this,Bc,{idToken:e,password:t})};var rc={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function ic(e,t){return Qc(e,Pc,t)}function oc(e,t){return Qc(e,Fc,t).then((function(e){return e.phoneSessionInfo.sessionInfo}))}function ac(e){if(!e.phoneVerificationInfo)throw new R("internal-error");if(!e.phoneVerificationInfo.sessionInfo)throw new R("missing-verification-id");if(!e.phoneVerificationInfo.code)throw new R("missing-verification-code")}function sc(e,t){return Qc(e,Uc,t).then((function(e){return e.phoneResponseInfo.sessionInfo}))}function cc(e,t,n){return Qc(e,Ec,{idToken:t,deleteProvider:n})}function uc(e){if(!e.requestUri||!e.sessionId&&!e.postBody&&!e.pendingToken)throw new R("internal-error")}function lc(e,t){return t.oauthIdToken&&t.providerId&&0==t.providerId.indexOf("oidc.")&&!t.pendingToken&&(e.sessionId?t.nonce=e.sessionId:e.postBody&&(e=new pr(e.postBody),yr(e,"nonce")&&(t.nonce=e.get("nonce")))),t}function hc(e){var t=null;if(e.needConfirmation?(e.code="account-exists-with-different-credential",t=Ma(e)):"FEDERATED_USER_ID_ALREADY_LINKED"==e.errorMessage?(e.code="credential-already-in-use",t=Ma(e)):"EMAIL_EXISTS"==e.errorMessage?(e.code="email-already-in-use",t=Ma(e)):e.errorMessage&&(t=Kc(e.errorMessage)),t)throw t;tc(e)}function fc(e,t){return t.returnIdpCredential=!0,Qc(e,Hc,t)}function dc(e,t){return t.returnIdpCredential=!0,Qc(e,Gc,t)}function pc(e,t){return t.returnIdpCredential=!0,t.autoCreate=!1,Qc(e,jc,t)}function mc(e){if(!e.oobCode)throw new R("invalid-action-code")}n=Ps.prototype,n.Eb=function(e,t){var n={idToken:e},r=[];return ye(rc,(function(e,i){var o=t[i];null===o?r.push(e):i in t&&(n[i]=o)})),r.length&&(n.deleteAttribute=r),Qc(this,Nc,n)},n.wb=function(e,t){return e={requestType:"PASSWORD_RESET",email:e},xe(e,t),Qc(this,Cc,e)},n.xb=function(e,t){return e={requestType:"EMAIL_SIGNIN",email:e},xe(e,t),Qc(this,Mc,e)},n.vb=function(e,t){return e={requestType:"VERIFY_EMAIL",idToken:e},xe(e,t),Qc(this,Oc,e)},n.Fb=function(e,t,n){return e={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:e,newEmail:t},xe(e,n),Qc(this,Rc,e)},n.gb=function(e){return Qc(this,Wc,e)},n.ob=function(e,t){return Qc(this,Dc,{oobCode:e,newPassword:t})},n.Sa=function(e){return Qc(this,gc,{oobCode:e})},n.kb=function(e){return Qc(this,vc,{oobCode:e})};var vc={endpoint:"setAccountInfo",A:mc,Z:"email",B:!0},gc={endpoint:"resetPassword",A:mc,G:function(e){var t=e.requestType;if(!t||!e.email&&"EMAIL_SIGNIN"!=t&&"VERIFY_AND_CHANGE_EMAIL"!=t)throw new R("internal-error")},B:!0},yc={endpoint:"signupNewUser",A:function(e){if(Js(e),!e.password)throw new R("weak-password")},G:tc,V:!0,B:!0},bc={endpoint:"createAuthUri",B:!0},wc={endpoint:"deleteAccount",O:["idToken"]},Ec={endpoint:"setAccountInfo",O:["idToken","deleteProvider"],A:function(e){if(!Array.isArray(e.deleteProvider))throw new R("internal-error")}},xc={endpoint:"emailLinkSignin",O:["email","oobCode"],A:Js,G:tc,V:!0,B:!0},_c={endpoint:"emailLinkSignin",O:["idToken","email","oobCode"],A:Js,G:tc,V:!0},Tc={endpoint:"accounts/mfaEnrollment:finalize",O:["idToken","phoneVerificationInfo"],A:ac,G:tc,B:!0,Na:!0},Ac={endpoint:"accounts/mfaSignIn:finalize",O:["mfaPendingCredential","phoneVerificationInfo"],A:ac,G:tc,B:!0,Na:!0},Sc={endpoint:"getAccountInfo"},Mc={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(e){if("EMAIL_SIGNIN"!=e.requestType)throw new R("internal-error");Js(e)},Z:"email",B:!0},Oc={endpoint:"getOobConfirmationCode",O:["idToken","requestType"],A:function(e){if("VERIFY_EMAIL"!=e.requestType)throw new R("internal-error")},Z:"email",B:!0},Rc={endpoint:"getOobConfirmationCode",O:["idToken","newEmail","requestType"],A:function(e){if("VERIFY_AND_CHANGE_EMAIL"!=e.requestType)throw new R("internal-error")},Z:"email",B:!0},Cc={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(e){if("PASSWORD_RESET"!=e.requestType)throw new R("internal-error");Js(e)},Z:"email",B:!0},Ic={mb:!0,endpoint:"getProjectConfig",Vb:"GET"},Lc={mb:!0,endpoint:"getRecaptchaParam",Vb:"GET",G:function(e){if(!e.recaptchaSiteKey)throw new R("internal-error")}},Dc={endpoint:"resetPassword",A:mc,Z:"email",B:!0},Pc={endpoint:"sendVerificationCode",O:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},Nc={endpoint:"setAccountInfo",O:["idToken"],A:Zs,V:!0},Bc={endpoint:"setAccountInfo",O:["idToken"],A:function(e){if(Zs(e),!e.password)throw new R("weak-password")},G:tc,V:!0},kc={endpoint:"signupNewUser",G:tc,V:!0,B:!0},Fc={endpoint:"accounts/mfaEnrollment:start",O:["idToken","phoneEnrollmentInfo"],A:function(e){if(!e.phoneEnrollmentInfo)throw new R("internal-error");if(!e.phoneEnrollmentInfo.phoneNumber)throw new R("missing-phone-number");if(!e.phoneEnrollmentInfo.recaptchaToken)throw new R("missing-app-credential")},G:function(e){if(!e.phoneSessionInfo||!e.phoneSessionInfo.sessionInfo)throw new R("internal-error")},B:!0,Na:!0},Uc={endpoint:"accounts/mfaSignIn:start",O:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(e){if(!e.phoneSignInInfo||!e.phoneSignInInfo.recaptchaToken)throw new R("missing-app-credential")},G:function(e){if(!e.phoneResponseInfo||!e.phoneResponseInfo.sessionInfo)throw new R("internal-error")},B:!0,Na:!0},Hc={endpoint:"verifyAssertion",A:uc,Za:lc,G:hc,V:!0,B:!0},jc={endpoint:"verifyAssertion",A:uc,Za:lc,G:function(e){if(e.errorMessage&&"USER_NOT_FOUND"==e.errorMessage)throw new R("user-not-found");if(e.errorMessage)throw Kc(e.errorMessage);tc(e)},V:!0,B:!0},Gc={endpoint:"verifyAssertion",A:function(e){if(uc(e),!e.idToken)throw new R("internal-error")},Za:lc,G:hc,V:!0},Vc={endpoint:"verifyCustomToken",A:function(e){if(!e.token)throw new R("invalid-custom-token")},G:tc,V:!0,B:!0},zc={endpoint:"verifyPassword",A:function(e){if(Js(e),!e.password)throw new R("wrong-password")},G:tc,V:!0,B:!0},Wc={endpoint:"verifyPhoneNumber",A:nc,G:tc,B:!0},qc={endpoint:"verifyPhoneNumber",A:function(e){if(!e.idToken)throw new R("internal-error");nc(e)},G:function(e){if(e.temporaryProof)throw e.code="credential-already-in-use",Ma(e);tc(e)}},Yc={Ib:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:nc,G:tc,B:!0},Xc={endpoint:"accounts/mfaEnrollment:withdraw",O:["idToken","mfaEnrollmentId"],G:function(e){if(!!e[Bs]^!!e.refreshToken)throw new R("internal-error")},B:!0,Na:!0};function Qc(e,t,n){if(!Mi(n,t.O))return jt(new R("internal-error"));var r,i=!!t.Na,o=t.Vb||"POST";return Ht(n).then(t.A).then((function(){return t.V&&(n.returnSecureToken=!0),t.B&&e.b&&"undefined"===typeof n.tenantId&&(n.tenantId=e.b),Ks(e,i?e.i:e.h,t.endpoint,o,n,t.Ib,t.mb||!1)})).then((function(e){return r=e,t.Za?t.Za(n,r):r})).then(t.G).then((function(){if(!t.Z)return r;if(!(t.Z in r))throw new R("internal-error");return r[t.Z]}))}function Kc(e){return Jc({error:{errors:[{message:e}],code:400,message:e}})}function Jc(e,t){var n=(e.error&&e.error.errors&&e.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new R(r[n]):null)return n;for(var i in n=e.error&&e.error.message||"",r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},xe(r,t||{}),t=(t=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<t.length?t[1]:void 0,r)if(0===n.indexOf(i))return new R(r[i],t);return!t&&e&&(t=ai(e)),new R("internal-error",t)}function Zc(e){this.b=e,this.a=null,this.sb=$c(this)}function $c(e){return au().then((function(){return new Dt((function(t,n){ei("gapi.iframes.getContext")().open({where:document.body,url:e.b,messageHandlersFilter:ei("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(r){function i(){clearTimeout(o),t()}e.a=r,e.a.restyle({setHideOnLeave:!1});var o=setTimeout((function(){n(Error("Network Error"))}),iu.get());r.ping(i).then(i,(function(){n(Error("Network Error"))}))}))}))}))}function eu(e,t){return e.sb.then((function(){return new Dt((function(n){e.a.send(t.type,t,n,ei("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}))}function tu(e,t){e.sb.then((function(){e.a.register("authEvent",t,ei("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}var nu=new Te(Oe,"https://apis.google.com/js/api.js?onload=%{onload}"),ru=new fi(3e4,6e4),iu=new fi(5e3,15e3),ou=null;function au(){return ou||(ou=new Dt((function(e,t){function n(){hi(),ei("gapi.load")("gapi.iframes",{callback:e,ontimeout:function(){hi(),t(Error("Network Error"))},timeout:ru.get()})}if(ei("gapi.iframes.Iframe"))e();else if(ei("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();l[r]=function(){ei("gapi.load")?n():t(Error("Network Error"))},r=Le(nu,{onload:r}),Ht(Ss(r)).o((function(){t(Error("Network Error"))}))}})).o((function(e){throw ou=null,e})))}function su(e,t,n,r){this.l=e,this.h=t,this.i=n,this.g=r,this.f=null,this.g?(e=ir(this.g.url),e=or(e.c,e.a,e.g,"/emulator/auth/iframe")):e=or("https",this.l,null,"/__/auth/iframe"),this.a=e,nr(this.a,"apiKey",this.h),nr(this.a,"appName",this.i),this.b=null,this.c=[]}function cu(e,t,n,r,i,o){this.u=e,this.s=t,this.c=n,this.m=r,this.v=o,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function uu(e){try{return t["a"].app(e).auth().Ga()}catch(n){return[]}}function lu(e,t,n,r,i,o){this.s=e,this.g=t,this.b=n,this.f=o,this.c=r||null,this.i=i||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function hu(e){var t=Cr();return ec(e).then((function(e){e:{var n=ir(t),r=n.c;n=n.a;for(var i=0;i<e.length;i++){var o=e[i],a=n,s=r;if(0==o.indexOf("chrome-extension://")?a=ir(o).a==a&&"chrome-extension"==s:"http"!=s&&"https"!=s?a=!1:Fr.test(o)?a=a==o:(o=o.split(".").join("\\."),a=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)),a){e=!0;break e}}e=!1}if(!e)throw new Aa(Cr())}))}function fu(e){return e.m||(e.m=Hr().then((function(){if(!e.u){var t=e.c,n=e.i,r=uu(e.b),i=new su(e.s,e.g,e.b,e.f);i.f=t,i.b=n,i.c=re(r||[]),e.u=i.toString()}e.v=new Zc(e.u),mu(e)}))),e.m}function du(e){return e.l||(e.C=e.c?Zr(e.c,uu(e.b)):null,e.l=new Ps(e.g,N(e.i),e.C),e.f&&Gs(e.l,e.f)),e.l}function pu(e,t,n,r,i,o,a,s,c,u,l,h){return e=new cu(e,t,n,r,i,h),e.l=o,e.g=a,e.i=s,e.b=we(c||null),e.f=u,e.zb(l).toString()}function mu(e){if(!e.v)throw Error("IfcHandler must be initialized!");tu(e.v,(function(t){var n={};if(t&&t.authEvent){var r=!1;for(t=wa(t.authEvent),n=0;n<e.h.length;n++)r=e.h[n](t)||r;return n={},n.status=r?"ACK":"ERROR",Ht(n)}return n.status="ERROR",Ht(n)}))}function vu(e){var t={type:"webStorageSupport"};return fu(e).then((function(){return eu(e.v,t)})).then((function(e){if(e&&e.length&&"undefined"!==typeof e[0].webStorageSupport)return e[0].webStorageSupport;throw Error()}))}function gu(e){if(this.a=e||t["a"].INTERNAL.reactNative&&t["a"].INTERNAL.reactNative.AsyncStorage,!this.a)throw new R("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function yu(e){this.b=e,this.a={},this.f=T(this.c,this)}su.prototype.toString=function(){return this.f?nr(this.a,"v",this.f):gr(this.a.b,"v"),this.b?nr(this.a,"eid",this.b):gr(this.a.b,"eid"),this.c.length?nr(this.a,"fw",this.c.join(",")):gr(this.a.b,"fw"),this.a.toString()},cu.prototype.zb=function(e){return this.h=e,this},cu.prototype.toString=function(){if(this.v){var e=ir(this.v.url);e=or(e.c,e.a,e.g,"/emulator/auth/handler")}else e=or("https",this.u,null,"/__/auth/handler");if(nr(e,"apiKey",this.s),nr(e,"appName",this.c),nr(e,"authType",this.m),this.a.isOAuthProvider){var n=this.a;try{var r=t["a"].app(this.c).auth().la()}catch(c){r=null}for(var i in n.pb=r,nr(e,"providerId",this.a.providerId),r=this.a,n=si(r.Jb),n)n[i]=n[i].toString();i=r.Qc,n=we(n);for(var o=0;o<i.length;o++){var a=i[o];a in n&&delete n[a]}r.qb&&r.pb&&!n[r.qb]&&(n[r.qb]=r.pb),be(n)||nr(e,"customParameters",ai(n))}if("function"===typeof this.a.Rb&&(r=this.a.Rb(),r.length&&nr(e,"scopes",r.join(","))),this.l?nr(e,"redirectUrl",this.l):gr(e.b,"redirectUrl"),this.g?nr(e,"eventId",this.g):gr(e.b,"eventId"),this.i?nr(e,"v",this.i):gr(e.b,"v"),this.b)for(var s in this.b)this.b.hasOwnProperty(s)&&!rr(e,s)&&nr(e,s,this.b[s]);return this.h?nr(e,"tid",this.h):gr(e.b,"tid"),this.f?nr(e,"eid",this.f):gr(e.b,"eid"),s=uu(this.c),s.length&&nr(e,"fw",s.join(",")),e.toString()},n=lu.prototype,n.Pb=function(e,t,n){var r=new R("popup-closed-by-user"),i=new R("web-storage-unsupported"),o=this,a=!1;return this.ma().then((function(){vu(o).then((function(n){n||(e&&Nr(e),t(i),a=!0)}))})).o((function(){})).then((function(){if(!a)return kr(e)})).then((function(){if(!a)return Vn(n).then((function(){t(r)}))}))},n.Yb=function(){var e=$r();return!oi(e)&&!li(e)},n.Ub=function(){return!1},n.Nb=function(e,t,n,r,i,o,a,s){if(!e)return jt(new R("popup-blocked"));if(a&&!oi())return this.ma().o((function(t){Nr(e),i(t)})),r(),Ht();this.a||(this.a=hu(du(this)));var c=this;return this.a.then((function(){var t=c.ma().o((function(t){throw Nr(e),i(t),t}));return r(),t})).then((function(){if(ya(n),!a){var r=pu(c.s,c.g,c.b,t,n,null,o,c.c,void 0,c.i,s,c.f);Ir(r,e)}})).o((function(e){throw"auth/network-request-failed"==e.code&&(c.a=null),e}))},n.Ob=function(e,t,n,r){this.a||(this.a=hu(du(this)));var i=this;return this.a.then((function(){ya(t);var o=pu(i.s,i.g,i.b,e,t,Cr(),n,i.c,void 0,i.i,r,i.f);Ir(o)})).o((function(e){throw"auth/network-request-failed"==e.code&&(i.a=null),e}))},n.ma=function(){var e=this;return fu(this).then((function(){return e.v.sb})).o((function(){throw e.a=null,new R("network-request-failed")}))},n.ac=function(){return!0},n.Ea=function(e){this.h.push(e)},n.Ta=function(e){te(this.h,(function(t){return t==e}))},n=gu.prototype,n.get=function(e){return Ht(this.a.getItem(e)).then((function(e){return e&&ci(e)}))},n.set=function(e,t){return Ht(this.a.setItem(e,ai(t)))},n.U=function(e){return Ht(this.a.removeItem(e))},n.ca=function(){},n.ia=function(){};var bu,wu=[];function Eu(){var e=zr()?self:null;if(Y(wu,(function(n){n.b==e&&(t=n)})),!t){var t=new yu(e);wu.push(t)}return t}function xu(e,t,n){be(e.a)&&e.b.addEventListener("message",e.f),"undefined"===typeof e.a[t]&&(e.a[t]=[]),e.a[t].push(n)}function _u(e){this.a=e}function Tu(e){this.c=e,this.b=!1,this.a=[]}function Au(e,t,n,r){var i,o,a,s,c=n||{},u=null;if(e.b)return jt(Error("connection_unavailable"));var l=r?800:50,h="undefined"!==typeof MessageChannel?new MessageChannel:null;return new Dt((function(n,r){h?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),h.port1.start(),a=setTimeout((function(){r(Error("unsupported_event"))}),l),o=function(e){e.data.eventId===i&&("ack"===e.data.status?(clearTimeout(a),s=setTimeout((function(){r(Error("timeout"))}),3e3)):"done"===e.data.status?(clearTimeout(s),"undefined"!==typeof e.data.response?n(e.data.response):r(Error("unknown_error"))):(clearTimeout(a),clearTimeout(s),r(Error("invalid_response"))))},u={messageChannel:h,onMessage:o},e.a.push(u),h.port1.addEventListener("message",o),e.c.postMessage({eventType:t,eventId:i,data:c},[h.port2])):r(Error("connection_unavailable"))})).then((function(t){return Su(e,u),t})).o((function(t){throw Su(e,u),t}))}function Su(e,t){if(t){var n=t.messageChannel,r=t.onMessage;n&&(n.port1.removeEventListener("message",r),n.port1.close()),te(e.a,(function(e){return e==t}))}}function Mu(){if(!Lu())throw new R("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=l.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var e=this;zr()&&self?(this.v=Eu(),xu(this.v,"keyChanged",(function(t,n){return ku(e).then((function(t){return 0<t.length&&Y(e.a,(function(e){e(t)})),{keyProcessed:$(t,n.key)}}))})),xu(this.v,"ping",(function(){return Ht(["keyChanged"])}))):yi().then((function(t){(e.h=t)&&(e.g=new Tu(new _u(t)),Au(e.g,"ping",null,!0).then((function(t){t[0].fulfilled&&$(t[0].value,"keyChanged")&&(e.s=!0)})).o((function(){})))}))}function Ou(e){return new Dt((function(t,n){var r=e.m.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){t()},r.onerror=function(e){n(Error(e.target.error))}}))}function Ru(e){return new Dt((function(t,n){var r=e.m.open("firebaseLocalStorageDb",1);r.onerror=function(e){try{e.preventDefault()}catch(t){}n(Error(e.target.error))},r.onupgradeneeded=function(e){e=e.target.result;try{e.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){n(t)}},r.onsuccess=function(r){r=r.target.result,r.objectStoreNames.contains("firebaseLocalStorage")?t(r):Ou(e).then((function(){return Ru(e)})).then((function(e){t(e)})).o((function(e){n(e)}))}}))}function Cu(e){return e.i||(e.i=Ru(e)),e.i}function Iu(e,t){function n(i,o){Cu(e).then(t).then(i).o((function(t){if(!(3<++r))return Cu(e).then((function(t){return t.close(),e.i=void 0,n(i,o)})).o((function(e){o(e)}));o(t)}))}var r=0;return new Dt(n)}function Lu(){try{return!!l.indexedDB}catch(ep){return!1}}function Du(e){return e.objectStore("firebaseLocalStorage")}function Pu(e,t){return e.transaction(["firebaseLocalStorage"],t?"readwrite":"readonly")}function Nu(e){return new Dt((function(t,n){e.onsuccess=function(e){e&&e.target?t(e.target.result):t()},e.onerror=function(e){n(e.target.error)}}))}function Bu(e,t){return e.g&&e.h&&gi()===e.h?Au(e.g,"keyChanged",{key:t},e.s).then((function(){})).o((function(){})):Ht()}function ku(e){return Cu(e).then((function(e){var t=Du(Pu(e,!1));return t.getAll?Nu(t.getAll()):new Dt((function(e,n){var r=[],i=t.openCursor();i.onsuccess=function(t){(t=t.target.result)?(r.push(t.value),t["continue"]()):e(r)},i.onerror=function(e){n(e.target.error)}}))})).then((function(t){var n={},r=[];if(0==e.b){for(r=0;r<t.length;r++)n[t[r].fbase_key]=t[r].value;r=Lr(e.c,n),e.c=n}return r}))}function Fu(e){function t(){e.f=setTimeout((function(){e.l=ku(e).then((function(t){0<t.length&&Y(e.a,(function(e){e(t)}))})).then((function(){t()})).o((function(e){"STOP_EVENT"!=e.message&&t()}))}),800)}Uu(e),t()}function Uu(e){e.l&&e.l.cancel("STOP_EVENT"),e.f&&(clearTimeout(e.f),e.f=null)}function Hu(e){var t=this,n=null;this.a=[],this.type="indexedDB",this.c=e,this.b=Ht().then((function(){if(Lu()){var e=ui(),r="__sak"+e;return bu||(bu=new Mu),n=bu,n.set(r,e).then((function(){return n.get(r)})).then((function(t){if(t!==e)throw Error("indexedDB not supported!");return n.U(r)})).then((function(){return n})).o((function(){return t.c}))}return t.c})).then((function(e){return t.type=e.type,e.ca((function(e){Y(t.a,(function(t){t(e)}))})),e}))}function ju(){this.a={},this.type="inMemory"}function Gu(){if(!zu()){if("Node"==Wr())throw new R("internal-error","The LocalStorage compatibility library was not found.");throw new R("web-storage-unsupported")}this.a=Vu()||t["a"].INTERNAL.node.localStorage,this.type="localStorage"}function Vu(){try{var e=l.localStorage,t=ui();return e&&(e.setItem(t,"1"),e.removeItem(t)),e}catch(n){return null}}function zu(){var e="Node"==Wr();if(e=Vu()||e&&t["a"].INTERNAL.node&&t["a"].INTERNAL.node.localStorage,!e)return!1;try{return e.setItem("__sak","1"),e.removeItem("__sak"),!0}catch(n){return!1}}function Wu(){this.type="nullStorage"}function qu(){if(!Xu()){if("Node"==Wr())throw new R("internal-error","The SessionStorage compatibility library was not found.");throw new R("web-storage-unsupported")}this.a=Yu()||t["a"].INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Yu(){try{var e=l.sessionStorage,t=ui();return e&&(e.setItem(t,"1"),e.removeItem(t)),e}catch(n){return null}}function Xu(){var e="Node"==Wr();if(e=Yu()||e&&t["a"].INTERNAL.node&&t["a"].INTERNAL.node.sessionStorage,!e)return!1;try{return e.setItem("__sak","1"),e.removeItem("__sak"),!0}catch(n){return!1}}function Qu(){var e={};e.Browser=Zu,e.Node=$u,e.ReactNative=el,e.Worker=tl,this.a=e[Wr()]}yu.prototype.c=function(e){var t=e.data.eventType,n=e.data.eventId,r=this.a[t];if(r&&0<r.length){e.ports[0].postMessage({status:"ack",eventId:n,eventType:t,response:null});var i=[];Y(r,(function(t){i.push(Ht().then((function(){return t(e.origin,e.data.data)})))})),zt(i).then((function(r){var i=[];Y(r,(function(e){i.push({fulfilled:e.Qb,value:e.value,reason:e.reason?e.reason.message:void 0})})),Y(i,(function(e){for(var t in e)"undefined"===typeof e[t]&&delete e[t]})),e.ports[0].postMessage({status:"done",eventId:n,eventType:t,response:i})}))}},_u.prototype.postMessage=function(e,t){this.a.postMessage(e,t)},Tu.prototype.close=function(){for(;0<this.a.length;)Su(this,this.a[0]);this.b=!0},n=Mu.prototype,n.set=function(e,t){var n=this,r=!1;return Iu(this,(function(t){return t=Du(Pu(t,!0)),Nu(t.get(e))})).then((function(i){return Iu(n,(function(o){if(o=Du(Pu(o,!0)),i)return i.value=t,Nu(o.put(i));n.b++,r=!0;var a={};return a.fbase_key=e,a.value=t,Nu(o.add(a))}))})).then((function(){return n.c[e]=t,Bu(n,e)})).oa((function(){r&&n.b--}))},n.get=function(e){return Iu(this,(function(t){return Nu(Du(Pu(t,!1)).get(e))})).then((function(e){return e&&e.value}))},n.U=function(e){var t=this,n=!1;return Iu(this,(function(r){return n=!0,t.b++,Nu(Du(Pu(r,!0))["delete"](e))})).then((function(){return delete t.c[e],Bu(t,e)})).oa((function(){n&&t.b--}))},n.ca=function(e){0==this.a.length&&Fu(this),this.a.push(e)},n.ia=function(e){te(this.a,(function(t){return t==e})),0==this.a.length&&Uu(this)},n=Hu.prototype,n.get=function(e){return this.b.then((function(t){return t.get(e)}))},n.set=function(e,t){return this.b.then((function(n){return n.set(e,t)}))},n.U=function(e){return this.b.then((function(t){return t.U(e)}))},n.ca=function(e){this.a.push(e)},n.ia=function(e){te(this.a,(function(t){return t==e}))},n=ju.prototype,n.get=function(e){return Ht(this.a[e])},n.set=function(e,t){return this.a[e]=t,Ht()},n.U=function(e){return delete this.a[e],Ht()},n.ca=function(){},n.ia=function(){},n=Gu.prototype,n.get=function(e){var t=this;return Ht().then((function(){var n=t.a.getItem(e);return ci(n)}))},n.set=function(e,t){var n=this;return Ht().then((function(){var r=ai(t);null===r?n.U(e):n.a.setItem(e,r)}))},n.U=function(e){var t=this;return Ht().then((function(){t.a.removeItem(e)}))},n.ca=function(e){l.window&&An(l.window,"storage",e)},n.ia=function(e){l.window&&Rn(l.window,"storage",e)},n=Wu.prototype,n.get=function(){return Ht(null)},n.set=function(){return Ht()},n.U=function(){return Ht()},n.ca=function(){},n.ia=function(){},n=qu.prototype,n.get=function(e){var t=this;return Ht().then((function(){var n=t.a.getItem(e);return ci(n)}))},n.set=function(e,t){var n=this;return Ht().then((function(){var r=ai(t);null===r?n.U(e):n.a.setItem(e,r)}))},n.U=function(e){var t=this;return Ht().then((function(){t.a.removeItem(e)}))},n.ca=function(){},n.ia=function(){};var Ku,Ju,Zu={F:Gu,cb:qu},$u={F:Gu,cb:qu},el={F:gu,cb:Wu},tl={F:Gu,cb:Wu},nl={rd:"local",NONE:"none",td:"session"};function rl(e){var t=new R("invalid-persistence-type"),n=new R("unsupported-persistence-type");e:{for(r in nl)if(nl[r]==e){var r=!0;break e}r=!1}if(!r||"string"!==typeof e)throw t;switch(Wr()){case"ReactNative":if("session"===e)throw n;break;case"Node":if("none"!==e)throw n;break;case"Worker":if("session"===e||!Lu()&&"none"!==e)throw n;break;default:if(!ti()&&"none"!==e)throw n}}function il(){var e=!(li($r())||!Vr()),t=oi(),n=ti();this.m=e,this.h=t,this.l=n,this.a={},Ku||(Ku=new Qu),e=Ku;try{this.g=!Rr()&&vi()||!l.indexedDB?new e.a.F:new Hu(zr()?new ju:new e.a.F)}catch(r){this.g=new ju,this.h=!0}try{this.i=new e.a.cb}catch(r){this.i=new ju}this.v=new ju,this.f=T(this.Zb,this),this.b={}}function ol(){return Ju||(Ju=new il),Ju}function al(e,t){switch(t){case"session":return e.i;case"none":return e.v;default:return e.g}}function sl(e,t){return"firebase:"+e.name+(t?":"+t:"")}function cl(e,t,n){var r=sl(t,n),i=al(e,t.F);return e.get(t,n).then((function(o){var a=null;try{a=ci(l.localStorage.getItem(r))}catch(s){}if(a&&!o)return l.localStorage.removeItem(r),e.set(t,a,n);a&&o&&"localStorage"!=i.type&&l.localStorage.removeItem(r)}))}function ul(e,t,n){return n=sl(t,n),"local"==t.F&&(e.b[n]=null),al(e,t.F).U(n)}function ll(e){hl(e),e.c=setInterval((function(){for(var t in e.a){var n=l.localStorage.getItem(t),r=e.b[t];n!=r&&(e.b[t]=n,n=new pn({type:"storage",key:t,target:window,oldValue:r,newValue:n,a:!0}),e.Zb(n))}}),1e3)}function hl(e){e.c&&(clearInterval(e.c),e.c=null)}function fl(e){this.a=e,this.b=ol()}n=il.prototype,n.get=function(e,t){return al(this,e.F).get(sl(e,t))},n.set=function(e,t,n){var r=sl(e,n),i=this,o=al(this,e.F);return o.set(r,t).then((function(){return o.get(r)})).then((function(t){"local"==e.F&&(i.b[r]=t)}))},n.addListener=function(e,t,n){e=sl(e,t),this.l&&(this.b[e]=l.localStorage.getItem(e)),be(this.a)&&(al(this,"local").ca(this.f),this.h||(Rr()||!vi())&&l.indexedDB||!this.l||ll(this)),this.a[e]||(this.a[e]=[]),this.a[e].push(n)},n.removeListener=function(e,t,n){e=sl(e,t),this.a[e]&&(te(this.a[e],(function(e){return e==n})),0==this.a[e].length&&delete this.a[e]),be(this.a)&&(al(this,"local").ia(this.f),hl(this))},n.Zb=function(e){if(e&&e.g){var t=e.a.key;if(null==t)for(var n in this.a){var r=this.b[n];"undefined"===typeof r&&(r=null);var i=l.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.nb(n))}else if(0==t.indexOf("firebase:")&&this.a[t]){if("undefined"!==typeof e.a.a?al(this,"local").ia(this.f):hl(this),this.m)if(n=l.localStorage.getItem(t),r=e.a.newValue,r!==n)null!==r?l.localStorage.setItem(t,r):l.localStorage.removeItem(t);else if(this.b[t]===r&&"undefined"===typeof e.a.a)return;var o=this;n=function(){"undefined"===typeof e.a.a&&o.b[t]===l.localStorage.getItem(t)||(o.b[t]=l.localStorage.getItem(t),o.nb(t))},rt&&vt&&10==vt&&l.localStorage.getItem(t)!==e.a.newValue&&e.a.newValue!==e.a.oldValue?setTimeout(n,10):n()}}else Y(e,T(this.nb,this))},n.nb=function(e){this.a[e]&&Y(this.a[e],(function(e){e()}))};var dl,pl={name:"authEvent",F:"local"};function ml(e){return e.b.get(pl,e.a).then((function(e){return wa(e)}))}function vl(){this.a=ol()}function gl(){this.b=-1}function yl(e,t){this.b=bl,this.f=l.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=e,this.h=t,this.l=l.Int32Array?new Int32Array(64):Array(64),void 0===dl&&(dl=l.Int32Array?new Int32Array(Sl):Sl),this.reset()}M(yl,gl);for(var bl=64,wl=bl-1,El=[],xl=0;xl<wl;xl++)El[xl]=0;var _l=ne(128,El);function Tl(e){for(var t=e.f,n=e.l,r=0,i=0;i<t.length;)n[r++]=t[i]<<24|t[i+1]<<16|t[i+2]<<8|t[i+3],i=4*r;for(t=16;64>t;t++){i=0|n[t-15],r=0|n[t-2];var o=(0|n[t-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,a=(0|n[t-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[t]=o+a|0}r=0|e.a[0],i=0|e.a[1];var s=0|e.a[2],c=0|e.a[3],u=0|e.a[4],l=0|e.a[5],h=0|e.a[6];for(o=0|e.a[7],t=0;64>t;t++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&s^i&s)|0;a=u&l^~u&h,o=o+((u>>>6|u<<26)^(u>>>11|u<<21)^(u>>>25|u<<7))|0,a=a+(0|dl[t])|0,a=o+(a+(0|n[t])|0)|0,o=h,h=l,l=u,u=c+a|0,c=s,s=i,i=r,r=a+f|0}e.a[0]=e.a[0]+r|0,e.a[1]=e.a[1]+i|0,e.a[2]=e.a[2]+s|0,e.a[3]=e.a[3]+c|0,e.a[4]=e.a[4]+u|0,e.a[5]=e.a[5]+l|0,e.a[6]=e.a[6]+h|0,e.a[7]=e.a[7]+o|0}function Al(e,t,n){void 0===n&&(n=t.length);var r=0,i=e.c;if("string"===typeof t)for(;r<n;)e.f[i++]=t.charCodeAt(r++),i==e.b&&(Tl(e),i=0);else{if(!v(t))throw Error("message must be string or array");for(;r<n;){var o=t[r++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");e.f[i++]=o,i==e.b&&(Tl(e),i=0)}}e.c=i,e.g+=n}yl.prototype.reset=function(){this.g=this.c=0,this.a=l.Int32Array?new Int32Array(this.h):re(this.h)};var Sl=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Ml(){yl.call(this,8,Ol)}M(Ml,yl);var Ol=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function Rl(e,t,n,r,i,o){this.v=e,this.i=t,this.l=n,this.m=r||null,this.u=i||null,this.s=o,this.h=t+":"+n,this.C=new vl,this.g=new fl(this.h),this.f=null,this.b=[],this.a=this.c=null}function Cl(e){return new R("invalid-cordova-configuration",e)}function Il(){for(var e=20,t=[];0<e;)t.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),e--;return t.join("")}function Ll(e){var t=new Ml;Al(t,e),e=[];var n=8*t.g;56>t.c?Al(t,_l,56-t.c):Al(t,_l,t.b-(t.c-56));for(var r=63;56<=r;r--)t.f[r]=255&n,n/=256;for(Tl(t),r=n=0;r<t.i;r++)for(var i=24;0<=i;i-=8)e[n++]=t.a[r]>>i&255;return go(e)}function Dl(e,t,n,r,i){var o=Il(),a=new ba(t,r,null,o,new R("no-auth-event"),null,i),s=ei("BuildInfo.packageName",l);if("string"!==typeof s)throw new R("invalid-cordova-configuration");var c=ei("BuildInfo.displayName",l),u={};if($r().toLowerCase().match(/iphone|ipad|ipod/))u.ibi=s;else{if(!$r().toLowerCase().match(/android/))return jt(new R("operation-not-supported-in-this-environment"));u.apn=s}c&&(u.appDisplayName=c),o=Ll(o),u.sessionId=o;var h=pu(e.v,e.i,e.l,t,n,null,r,e.m,u,e.u,i,e.s);return e.ma().then((function(){var t=e.h;return e.C.a.set(pl,a.w(),t)})).then((function(){var t=ei("cordova.plugins.browsertab.isAvailable",l);if("function"!==typeof t)throw new R("invalid-cordova-configuration");var n=null;t((function(t){if(t){if(n=ei("cordova.plugins.browsertab.openUrl",l),"function"!==typeof n)throw new R("invalid-cordova-configuration");n(h)}else{if(n=ei("cordova.InAppBrowser.open",l),"function"!==typeof n)throw new R("invalid-cordova-configuration");t=$r(),e.a=n(h,t.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||t.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}}))}))}function Pl(e,t){for(var n=0;n<e.b.length;n++)try{e.b[n](t)}catch(r){}}function Nl(e){return e.f||(e.f=e.ma().then((function(){return new Dt((function(t){function n(r){return t(r),e.Ta(n),!1}e.Ea(n),kl(e)}))}))),e.f}function Bl(e){var t=null;return ml(e.g).then((function(n){return t=n,n=e.g,ul(n.b,pl,n.a)})).then((function(){return t}))}function kl(e){function t(t){r=!0,i&&i.cancel(),Bl(e).then((function(r){var i=n;if(r&&t&&t.url){var o=null;i=Fo(t.url),-1!=i.indexOf("/__/auth/callback")&&(o=ir(i),o=ci(rr(o,"firebaseError")||null),o=(o="object"===typeof o?C(o):null)?new ba(r.c,r.b,null,null,o,null,r.T()):new ba(r.c,r.b,i,r.f,null,null,r.T())),i=o||n}Pl(e,i)}))}var n=new ba("unknown",null,null,null,new R("no-auth-event")),r=!1,i=Vn(500).then((function(){return Bl(e).then((function(){r||Pl(e,n)}))})),o=l.handleOpenURL;l.handleOpenURL=function(e){if(0==e.toLowerCase().indexOf(ei("BuildInfo.packageName",l).toLowerCase()+"://")&&t({url:e}),"function"===typeof o)try{o(e)}catch(n){console.error(n)}},_a||(_a=new Ea),Ta(t)}function Fl(e){this.a=e,this.b=ol()}n=Rl.prototype,n.ma=function(){return this.Ia?this.Ia:this.Ia=jr().then((function(){if("function"!==typeof ei("universalLinks.subscribe",l))throw Cl("cordova-universal-links-plugin-fix is not installed");if("undefined"===typeof ei("BuildInfo.packageName",l))throw Cl("cordova-plugin-buildinfo is not installed");if("function"!==typeof ei("cordova.plugins.browsertab.openUrl",l))throw Cl("cordova-plugin-browsertab is not installed");if("function"!==typeof ei("cordova.InAppBrowser.open",l))throw Cl("cordova-plugin-inappbrowser is not installed")}),(function(){throw new R("cordova-not-ready")}))},n.Pb=function(e,t){return t(new R("operation-not-supported-in-this-environment")),Ht()},n.Nb=function(){return jt(new R("operation-not-supported-in-this-environment"))},n.ac=function(){return!1},n.Yb=function(){return!0},n.Ub=function(){return!0},n.Ob=function(e,t,n,r){if(this.c)return jt(new R("redirect-operation-pending"));var i=this,o=l.document,a=null,s=null,c=null,u=null;return this.c=Ht().then((function(){return ya(t),Nl(i)})).then((function(){return Dl(i,e,t,n,r)})).then((function(){return new Dt((function(e,t){s=function(){var t=ei("cordova.plugins.browsertab.close",l);return e(),"function"===typeof t&&t(),i.a&&"function"===typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ea(s),c=function(){a||(a=Vn(2e3).then((function(){t(new R("redirect-cancelled-by-user"))})))},u=function(){di()&&c()},o.addEventListener("resume",c,!1),$r().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",u,!1)})).o((function(e){return Bl(i).then((function(){throw e}))}))})).oa((function(){c&&o.removeEventListener("resume",c,!1),u&&o.removeEventListener("visibilitychange",u,!1),a&&a.cancel(),s&&i.Ta(s),i.c=null}))},n.Ea=function(e){this.b.push(e),Nl(this).o((function(t){"auth/invalid-cordova-configuration"===t.code&&(t=new ba("unknown",null,null,null,new R("no-auth-event")),e(t))}))},n.Ta=function(e){te(this.b,(function(t){return t==e}))};var Ul={name:"pendingRedirect",F:"session"};function Hl(e){return e.b.set(Ul,"pending",e.a)}function jl(e){return ul(e.b,Ul,e.a)}function Gl(e){return e.b.get(Ul,e.a).then((function(e){return"pending"==e}))}function Vl(e,t,n,r){this.i={},this.u=0,this.D=e,this.v=t,this.m=n,this.J=r,this.h=[],this.f=!1,this.l=T(this.s,this),this.b=new ih,this.C=new fh,this.g=new Fl(nh(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=zl(this.D,this.v,this.m,I,this.J)}function zl(e,n,r,i,o){var a=t["a"].SDK_VERSION||null;return Gr()?new Rl(e,n,r,a,i,o):new lu(e,n,r,a,i,o)}function Wl(e){e.f||(e.f=!0,e.a.Ea(e.l));var t=e.a;return e.a.ma().o((function(n){throw e.a==t&&e.reset(),n}))}function ql(e){e.a.Yb()&&Wl(e).o((function(t){var n=new ba("unknown",null,null,null,new R("operation-not-supported-in-this-environment"));Zl(t)&&e.s(n)})),e.a.Ub()||oh(e.b)}function Yl(e,t){$(e.h,t)||e.h.push(t),e.f||Gl(e.g).then((function(t){t?jl(e.g).then((function(){Wl(e).o((function(t){var n=new ba("unknown",null,null,null,new R("operation-not-supported-in-this-environment"));Zl(t)&&e.s(n)}))})):ql(e)})).o((function(){ql(e)}))}function Xl(e,t){te(e.h,(function(e){return e==t}))}Vl.prototype.reset=function(){this.f=!1,this.a.Ta(this.l),this.a=zl(this.D,this.v,this.m,null,this.J),this.i={}},Vl.prototype.s=function(e){if(!e)throw new R("invalid-auth-event");if(6e5<=Date.now()-this.u&&(this.i={},this.u=0),e&&e.getUid()&&this.i.hasOwnProperty(e.getUid()))return!1;for(var t=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Gb(e.c,e.b)){(t=this.c[e.c])&&(t.h(e,r),e&&(e.f||e.b)&&(this.i[e.getUid()]=!0,this.u=Date.now())),t=!0;break}}return oh(this.b),t};var Ql=new fi(2e3,1e4),Kl=new fi(3e4,6e4);function Jl(e,t,n,r,i,o,a){return e.a.Nb(t,n,r,(function(){e.f||(e.f=!0,e.a.Ea(e.l))}),(function(){e.reset()}),i,o,a)}function Zl(e){return!(!e||"auth/cordova-not-ready"!=e.code)}function $l(e,t,n,r,i){var o;return Hl(e.g).then((function(){return e.a.Ob(t,n,r,i).o((function(t){if(Zl(t))throw new R("operation-not-supported-in-this-environment");return o=t,jl(e.g).then((function(){throw o}))})).then((function(){return e.a.ac()?new Dt((function(){})):jl(e.g).then((function(){return e.ra()})).then((function(){})).o((function(){}))}))}))}function eh(e,t,n,r,i){return e.a.Pb(r,(function(e){t.na(n,null,e,i)}),Ql.get())}Vl.prototype.ra=function(){return this.b.ra()};var th={};function nh(e,t,n){return e=e+":"+t,n&&(e=e+":"+n.url),e}function rh(e,t,n,r){var i=nh(t,n,r);return th[i]||(th[i]=new Vl(e,t,n,r)),th[i]}function ih(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function oh(e){e.g||(e.g=!0,lh(e,!1,null,null))}function ah(e){e.g&&!e.i&&lh(e,!1,null,null)}function sh(e,t,n){n=n.Fa(t.c,t.b);var r=t.g,i=t.f,o=t.i,a=t.T(),s=!!t.c.match(/Redirect$/);n(r,i,a,o).then((function(t){lh(e,s,t,null)})).o((function(t){lh(e,s,null,t)}))}function ch(e,t){if(e.b=function(){return jt(t)},e.c.length)for(var n=0;n<e.c.length;n++)e.c[n](t)}function uh(e,t){if(e.b=function(){return Ht(t)},e.f.length)for(var n=0;n<e.f.length;n++)e.f[n](t)}function lh(e,t,n,r){t?r?ch(e,r):uh(e,n):uh(e,{user:null}),e.f=[],e.c=[]}function hh(e){var t=new R("timeout");e.a&&e.a.cancel(),e.a=Vn(Kl.get()).then((function(){e.b||(e.g=!0,lh(e,!0,null,t))}))}function fh(){}function dh(e,t){var n=e.b,r=e.c;t.Fa(r,n)(e.g,e.f,e.T(),e.i).then((function(e){t.na(r,e,null,n)})).o((function(e){t.na(r,null,e,n)}))}function ph(){this.jb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.jb},set:function(e){this.jb=e},enumerable:!1})}function mh(e,t){this.a=t,_i(this,"verificationId",e)}function vh(e,t,n,r){return new ma(e).gb(t,n).then((function(e){return new mh(e,r)}))}function gh(e){var t=To(e);if(!(t&&t.exp&&t.auth_time&&t.iat))throw new R("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Ti(this,{token:e,expirationTime:mi(1e3*t.exp),authTime:mi(1e3*t.auth_time),issuedAtTime:mi(1e3*t.iat),signInProvider:t.firebase&&t.firebase.sign_in_provider?t.firebase.sign_in_provider:null,signInSecondFactor:t.firebase&&t.firebase.sign_in_second_factor?t.firebase.sign_in_second_factor:null,claims:t})}function yh(e,t,n){var r=t&&t[wh];if(!r)throw new R("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=e,this.f=we(t),this.g=n,this.c=new Uo(null,r),this.b=[];var i=this;Y(t[bh]||[],(function(e){(e=Ci(e))&&i.b.push(e)})),_i(this,"auth",this.a),_i(this,"session",this.c),_i(this,"hints",this.b)}ih.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},ih.prototype.h=function(e,t){if(e){this.reset(),this.g=!0;var n=e.c,r=e.b,i=e.a&&"auth/web-storage-unsupported"==e.a.code,o=e.a&&"auth/operation-not-supported-in-this-environment"==e.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?e.a?(lh(this,!0,null,e.a),Ht()):t.Fa(n,r)?sh(this,e,t):jt(new R("invalid-auth-event")):(lh(this,!1,null,null),Ht())}else jt(new R("invalid-auth-event"))},ih.prototype.ra=function(){var e=this;return new Dt((function(t,n){e.b?e.b().then(t,n):(e.f.push(t),e.c.push(n),hh(e))}))},fh.prototype.h=function(e,t){if(e){var n=e.c,r=e.b;e.a?(t.na(e.c,null,e.a,e.b),Ht()):t.Fa(n,r)?dh(e,t):jt(new R("invalid-auth-event"))}else jt(new R("invalid-auth-event"))},mh.prototype.confirm=function(e){return e=va(this.verificationId,e),this.a(e)};var bh="mfaInfo",wh="mfaPendingCredential";function Eh(e,t,n,r){R.call(this,"multi-factor-auth-required",r,t),this.b=new yh(e,t,n),_i(this,"resolver",this.b)}function xh(e,t,n){if(e&&y(e.serverResponse)&&"auth/multi-factor-auth-required"===e.code)try{return new Eh(t,e.serverResponse,n,e.message)}catch(r){}return null}function _h(){}function Th(e,t,n,r){return n.Ha().then((function(n){return n={idToken:n},"undefined"!==typeof r&&(n.displayName=r),xe(n,{phoneVerificationInfo:pa(e.a)}),Qc(t,Tc,n)}))}function Ah(e,t,n){return n.Ha().then((function(n){return n={mfaPendingCredential:n},xe(n,{phoneVerificationInfo:pa(e.a)}),Qc(t,Ac,n)}))}function Sh(e){_i(this,"factorId",e.fa),this.a=e}function Mh(e){if(Sh.call(this,e),this.a.fa!=ma.PROVIDER_ID)throw new R("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function Oh(e,t){for(var n in dn.call(this,e),t)this[n]=t[n]}function Rh(e,t){this.a=e,this.b=[],this.c=T(this.yc,this),An(this.a,"userReloaded",this.c);var n=[];t&&t.multiFactor&&t.multiFactor.enrolledFactors&&Y(t.multiFactor.enrolledFactors,(function(e){var t=null,r={};if(e){e.uid&&(r[Di]=e.uid),e.displayName&&(r[Ii]=e.displayName),e.enrollmentTime&&(r[Li]=new Date(e.enrollmentTime).toISOString()),e.phoneNumber&&(r[Pi]=e.phoneNumber);try{t=new Ni(r)}catch(i){}e=t}else e=null;e&&n.push(e)})),Ih(this,n)}function Ch(e){var t=[];return Y(e.mfaInfo||[],(function(e){(e=Ci(e))&&t.push(e)})),t}function Ih(e,t){e.b=t,_i(e,"enrolledFactors",t)}function Lh(e,t,n){if(this.h=e,this.i=t,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function Dh(e,t){return t?(e.a=e.c,e.g()):(t=e.a,e.a*=2,e.a>e.f&&(e.a=e.f),t)}function Ph(e,t){e.stop(),e.b=Vn(Dh(e,t)).then((function(){return pi()})).then((function(){return e.h()})).then((function(){Ph(e,!0)})).o((function(t){e.i(t)&&Ph(e,!1)}))}function Nh(e){this.f=e,this.b=this.a=null,this.c=Date.now()}function Bh(e,t){"undefined"===typeof t&&(e.b?(t=e.b,t=t.a-t.g):t=0),e.c=Date.now()+1e3*t}function kh(e,t){e.b=_o(t[Bs]||""),e.a=t.refreshToken,t=t.expiresIn,Bh(e,"undefined"!==typeof t?Number(t):void 0)}function Fh(e,t){e.b=t.b,e.a=t.a,e.c=t.c}function Uh(e,t){return Qs(e.f,t).then((function(t){return e.b=_o(t.access_token),e.a=t.refresh_token,Bh(e,t.expires_in),{accessToken:e.b.toString(),refreshToken:e.a}})).o((function(t){throw"auth/user-token-expired"==t.code&&(e.a=null),t}))}function Hh(e,t){this.a=e||null,this.b=t||null,Ti(this,{lastSignInTime:mi(t||null),creationTime:mi(e||null)})}function jh(e){return new Hh(e.a,e.b)}function Gh(e,t,n,r,i,o){Ti(this,{uid:e,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:t})}function Vh(e,n,r){this.N=[],this.l=e.apiKey,this.m=e.appName,this.s=e.authDomain||null;var i=t["a"].SDK_VERSION?Zr(t["a"].SDK_VERSION):null;this.a=new Ps(this.l,N(I),i),(this.u=e.emulatorConfig||null)&&Gs(this.a,this.u),this.h=new Nh(this.a),$h(this,n[Bs]),kh(this.h,n),_i(this,"refreshToken",this.h.a),rf(this,r||{}),Fn.call(this),this.P=!1,this.s&&ni()&&(this.b=rh(this.s,this.l,this.m,this.u)),this.W=[],this.i=null,this.D=Kh(this),this.ba=T(this.ib,this);var o=this;this.za=null,this.Pa=function(e){o.xa(e.h)},this.qa=null,this.Ba=function(e){zh(o,e.c)},this.$=null,this.aa=[],this.Oa=function(e){Yh(o,e.f)},this.ja=null,this.S=new Rh(this,r),_i(this,"multiFactor",this.S)}function zh(e,t){e.u=t,Gs(e.a,t),e.b&&(t=e.b,e.b=rh(e.s,e.l,e.m,e.u),e.P&&(Xl(t,e),Yl(e.b,e)))}function Wh(e,t){e.qa&&Rn(e.qa,"languageCodeChanged",e.Pa),(e.qa=t)&&An(t,"languageCodeChanged",e.Pa)}function qh(e,t){e.$&&Rn(e.$,"emulatorConfigChanged",e.Ba),(e.$=t)&&An(t,"emulatorConfigChanged",e.Ba)}function Yh(e,n){e.aa=n,zs(e.a,t["a"].SDK_VERSION?Zr(t["a"].SDK_VERSION,e.aa):null)}function Xh(e,t){e.ja&&Rn(e.ja,"frameworkChanged",e.Oa),(e.ja=t)&&An(t,"frameworkChanged",e.Oa)}function Qh(e){try{return t["a"].app(e.m).auth()}catch(n){throw new R("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+e.m+"'!")}}function Kh(e){return new Lh((function(){return e.I(!0)}),(function(e){return!(!e||"auth/network-request-failed"!=e.code)}),(function(){var t=e.h.c-Date.now()-3e5;return 0<t?t:0}))}function Jh(e){e.J||e.D.b||(e.D.start(),Rn(e,"tokenChanged",e.ba),An(e,"tokenChanged",e.ba))}function Zh(e){Rn(e,"tokenChanged",e.ba),e.D.stop()}function $h(e,t){e.Aa=t,_i(e,"_lat",t)}function ef(e,t){te(e.W,(function(e){return e==t}))}function tf(e){for(var t=[],n=0;n<e.W.length;n++)t.push(e.W[n](e));return zt(t).then((function(){return e}))}function nf(e){e.b&&!e.P&&(e.P=!0,Yl(e.b,e))}function rf(e,t){Ti(e,{uid:t.uid,displayName:t.displayName||null,photoURL:t.photoURL||null,email:t.email||null,emailVerified:t.emailVerified||!1,phoneNumber:t.phoneNumber||null,isAnonymous:t.isAnonymous||!1,tenantId:t.tenantId||null,metadata:new Hh(t.createdAt,t.lastLoginAt),providerData:[]}),e.a.b=e.tenantId}function of(){}function af(e){return Ht().then((function(){if(e.J)throw new R("app-deleted")}))}function sf(e){return K(e.providerData,(function(e){return e.providerId}))}function cf(e,t){t&&(uf(e,t.providerId),e.providerData.push(t))}function uf(e,t){te(e.providerData,(function(e){return e.providerId==t}))}function lf(e,t,n){("uid"!=t||n)&&e.hasOwnProperty(t)&&_i(e,t,n)}function hf(e,t){e!=t&&(Ti(e,{uid:t.uid,displayName:t.displayName,photoURL:t.photoURL,email:t.email,emailVerified:t.emailVerified,phoneNumber:t.phoneNumber,isAnonymous:t.isAnonymous,tenantId:t.tenantId,providerData:[]}),t.metadata?_i(e,"metadata",jh(t.metadata)):_i(e,"metadata",new Hh),Y(t.providerData,(function(t){cf(e,t)})),Fh(e.h,t.h),_i(e,"refreshToken",e.h.a),Ih(e.S,t.S.b))}function ff(e){return e.I().then((function(t){var n=e.isAnonymous;return pf(e,t).then((function(){return n||lf(e,"isAnonymous",!1),t}))}))}function df(e,t){t[Bs]&&e.Aa!=t[Bs]&&(kh(e.h,t),e.dispatchEvent(new Oh("tokenChanged")),$h(e,t[Bs]),lf(e,"refreshToken",e.h.a))}function pf(e,t){return Qc(e.a,Sc,{idToken:t}).then(T(e.Kc,e))}function mf(e){return(e=e.providerUserInfo)&&e.length?K(e,(function(e){return new Gh(e.rawId,e.providerId,e.email,e.displayName,e.photoUrl,e.phoneNumber)})):[]}function vf(e,t){return ff(e).then((function(){if($(sf(e),t))return tf(e).then((function(){throw new R("provider-already-linked")}))}))}function gf(e,t,n){var r=ga(t);return t=Ro(t),Ai({user:e,credential:r,additionalUserInfo:t,operationType:n})}function yf(e,t){return df(e,t),e.reload().then((function(){return e}))}function bf(e,n,r,i,o){if(!ni())return jt(new R("operation-not-supported-in-this-environment"));if(e.i&&!o)return jt(e.i);var a=Oo(r.providerId),s=ui(e.uid+":::"),c=null;(!oi()||Vr())&&e.s&&r.isOAuthProvider&&(c=pu(e.s,e.l,e.m,n,r,null,s,t["a"].SDK_VERSION||null,null,null,e.tenantId,e.u));var u=Br(c,a&&a.va,a&&a.ua);return i=i().then((function(){if(Ef(e),!o)return e.I().then((function(){}))})).then((function(){return Jl(e.b,u,n,r,s,!!c,e.tenantId)})).then((function(){return new Dt((function(t,r){e.na(n,null,new R("cancelled-popup-request"),e.g||null),e.f=t,e.C=r,e.g=s,e.c=eh(e.b,e,n,u,s)}))})).then((function(e){return u&&Nr(u),e?Ai(e):null})).o((function(e){throw u&&Nr(u),e})),xf(e,i,o)}function wf(e,t,n,r,i){if(!ni())return jt(new R("operation-not-supported-in-this-environment"));if(e.i&&!i)return jt(e.i);var o=null,a=ui(e.uid+":::");return r=r().then((function(){if(Ef(e),!i)return e.I().then((function(){}))})).then((function(){return e.ga=a,tf(e)})).then((function(t){return e.ha&&(t=e.ha,t=t.b.set(Of,e.w(),t.a)),t})).then((function(){return $l(e.b,t,n,a,e.tenantId)})).o((function(t){if(o=t,e.ha)return Rf(e.ha);throw o})).then((function(){if(o)throw o})),xf(e,r,i)}function Ef(e){if(!e.b||!e.P){if(e.b&&!e.P)throw new R("internal-error");throw new R("auth-domain-config-required")}}function xf(e,t,n){var r=_f(e,t,n);return e.N.push(r),r.oa((function(){ee(e.N,r)})),r.o((function(t){var n=null;throw t&&"auth/multi-factor-auth-required"===t.code&&(n=xh(t.w(),Qh(e),T(e.jc,e))),n||t}))}function _f(e,t,n){return e.i&&!n?(t.cancel(),jt(e.i)):t.o((function(t){throw!t||"auth/user-disabled"!=t.code&&"auth/user-token-expired"!=t.code||(e.i||e.dispatchEvent(new Oh("userInvalidated")),e.i=t),t}))}function Tf(e){if(!e.apiKey)return null;var t={apiKey:e.apiKey,authDomain:e.authDomain,appName:e.appName,emulatorConfig:e.emulatorConfig},n={};if(!e.stsTokenManager||!e.stsTokenManager.accessToken)return null;n[Bs]=e.stsTokenManager.accessToken,n.refreshToken=e.stsTokenManager.refreshToken||null;var r=e.stsTokenManager.expirationTime;r&&(n.expiresIn=(r-Date.now())/1e3);var i=new Vh(t,n,e);return e.providerData&&Y(e.providerData,(function(e){e&&cf(i,Ai(e))})),e.redirectEventId&&(i.ga=e.redirectEventId),i}function Af(e,t,n,r){var i=new Vh(e,t);return n&&(i.ha=n),r&&Yh(i,r),i.reload().then((function(){return i}))}function Sf(e,t,n,r){var i=e.h,o={};return o[Bs]=i.b&&i.b.toString(),o.refreshToken=i.a,t=new Vh(t||{apiKey:e.l,authDomain:e.s,appName:e.m},o),n&&(t.ha=n),r&&Yh(t,r),hf(t,e),t}function Mf(e){this.a=e,this.b=ol()}yh.prototype.Rc=function(e){var t=this;return e.tb(this.a.a,this.c).then((function(e){var n=we(t.f);return delete n[bh],delete n[wh],xe(n,e),t.g(n)}))},M(Eh,R),_h.prototype.tb=function(e,t,n){return t.type==Ho?Th(this,e,t,n):Ah(this,e,t)},M(Sh,_h),M(Mh,Sh),M(Oh,dn),n=Rh.prototype,n.yc=function(e){Ih(this,Ch(e.hd))},n.Sb=function(){return this.a.I().then((function(e){return new Uo(e,null)}))},n.fc=function(e,t){var n=this,r=this.a.a;return this.Sb().then((function(n){return e.tb(r,n,t)})).then((function(e){return df(n.a,e),n.a.reload()}))},n.bd=function(e){var t=this,n="string"===typeof e?e:e.uid,r=this.a.a;return this.a.I().then((function(e){return Qc(r,Xc,{idToken:e,mfaEnrollmentId:n})})).then((function(e){var r=Q(t.b,(function(e){return e.uid!=n}));return Ih(t,r),df(t.a,e),t.a.reload().o((function(e){if("auth/user-token-expired"!=e.code)throw e}))}))},n.w=function(){return{multiFactor:{enrolledFactors:K(this.b,(function(e){return e.w()}))}}},Lh.prototype.start=function(){this.a=this.c,Ph(this,!0)},Lh.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},Nh.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}},Nh.prototype.getToken=function(e){return e=!!e,this.b&&!this.a?jt(new R("user-token-expired")):e||!this.b||Date.now()>this.c-3e4?this.a?Uh(this,{grant_type:"refresh_token",refresh_token:this.a}):Ht(null):Ht({accessToken:this.b.toString(),refreshToken:this.a})},Hh.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},M(Vh,Fn),Vh.prototype.xa=function(e){this.za=e,js(this.a,e)},Vh.prototype.la=function(){return this.za},Vh.prototype.Ga=function(){return re(this.aa)},Vh.prototype.ib=function(){this.D.b&&(this.D.stop(),this.D.start())},_i(Vh.prototype,"providerId","firebase"),n=Vh.prototype,n.reload=function(){var e=this;return xf(this,af(this).then((function(){return ff(e).then((function(){return tf(e)})).then(of)})))},n.oc=function(e){return this.I(e).then((function(e){return new gh(e)}))},n.I=function(e){var t=this;return xf(this,af(this).then((function(){return t.h.getToken(e)})).then((function(e){if(!e)throw new R("internal-error");return e.accessToken!=t.Aa&&($h(t,e.accessToken),t.dispatchEvent(new Oh("tokenChanged"))),lf(t,"refreshToken",e.refreshToken),e.accessToken})))},n.Kc=function(e){if(e=e.users,!e||!e.length)throw new R("internal-error");e=e[0],rf(this,{uid:e.localId,displayName:e.displayName,photoURL:e.photoUrl,email:e.email,emailVerified:!!e.emailVerified,phoneNumber:e.phoneNumber,lastLoginAt:e.lastLoginAt,createdAt:e.createdAt,tenantId:e.tenantId});for(var t=mf(e),n=0;n<t.length;n++)cf(this,t[n]);lf(this,"isAnonymous",!(this.email&&e.passwordHash)&&!(this.providerData&&this.providerData.length)),this.dispatchEvent(new Oh("userReloaded",{hd:e}))},n.Lc=function(e){return Ei("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.ub(e)},n.ub=function(e){var t=this,n=null;return xf(this,e.c(this.a,this.uid).then((function(e){return df(t,e),n=gf(t,e,"reauthenticate"),t.i=null,t.reload()})).then((function(){return n})),!0)},n.Cc=function(e){return Ei("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.rb(e)},n.rb=function(e){var t=this,n=null;return xf(this,vf(this,e.providerId).then((function(){return t.I()})).then((function(n){return e.b(t.a,n)})).then((function(e){return n=gf(t,e,"link"),yf(t,e)})).then((function(){return n})))},n.Dc=function(e,t){var n=this;return xf(this,vf(this,"phone").then((function(){return vh(Qh(n),e,t,T(n.rb,n))})))},n.Mc=function(e,t){var n=this;return xf(this,Ht().then((function(){return vh(Qh(n),e,t,T(n.ub,n))})),!0)},n.Cb=function(e){var t=this;return xf(this,this.I().then((function(n){return t.a.Cb(n,e)})).then((function(e){return df(t,e),t.reload()})))},n.ed=function(e){var t=this;return xf(this,this.I().then((function(n){return e.b(t.a,n)})).then((function(e){return df(t,e),t.reload()})))},n.Db=function(e){var t=this;return xf(this,this.I().then((function(n){return t.a.Db(n,e)})).then((function(e){return df(t,e),t.reload()})))},n.Eb=function(e){if(void 0===e.displayName&&void 0===e.photoURL)return af(this);var t=this;return xf(this,this.I().then((function(n){return t.a.Eb(n,{displayName:e.displayName,photoUrl:e.photoURL})})).then((function(e){return df(t,e),lf(t,"displayName",e.displayName||null),lf(t,"photoURL",e.photoUrl||null),Y(t.providerData,(function(e){"password"===e.providerId&&(_i(e,"displayName",t.displayName),_i(e,"photoURL",t.photoURL))})),tf(t)})).then(of))},n.cd=function(e){var t=this;return xf(this,ff(this).then((function(n){return $(sf(t),e)?cc(t.a,n,[e]).then((function(e){var n={};return Y(e.providerUserInfo||[],(function(e){n[e.providerId]=!0})),Y(sf(t),(function(e){n[e]||uf(t,e)})),n[ma.PROVIDER_ID]||_i(t,"phoneNumber",null),tf(t)})):tf(t).then((function(){throw new R("no-such-provider")}))})))},n.delete=function(){var e=this;return xf(this,this.I().then((function(t){return Qc(e.a,wc,{idToken:t})})).then((function(){e.dispatchEvent(new Oh("userDeleted"))}))).then((function(){for(var t=0;t<e.N.length;t++)e.N[t].cancel("app-deleted");Wh(e,null),qh(e,null),Xh(e,null),e.N=[],e.J=!0,Zh(e),_i(e,"refreshToken",null),e.b&&Xl(e.b,e)}))},n.Gb=function(e,t){return!!("linkViaPopup"==e&&(this.g||null)==t&&this.f||"reauthViaPopup"==e&&(this.g||null)==t&&this.f||"linkViaRedirect"==e&&(this.ga||null)==t||"reauthViaRedirect"==e&&(this.ga||null)==t)},n.na=function(e,t,n,r){"linkViaPopup"!=e&&"reauthViaPopup"!=e||r!=(this.g||null)||(n&&this.C?this.C(n):t&&!n&&this.f&&this.f(t),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},n.Fa=function(e,t){return"linkViaPopup"==e&&t==(this.g||null)?T(this.Lb,this):"reauthViaPopup"==e&&t==(this.g||null)?T(this.Mb,this):"linkViaRedirect"==e&&(this.ga||null)==t?T(this.Lb,this):"reauthViaRedirect"==e&&(this.ga||null)==t?T(this.Mb,this):null},n.Ec=function(e){var t=this;return bf(this,"linkViaPopup",e,(function(){return vf(t,e.providerId).then((function(){return tf(t)}))}),!1)},n.Nc=function(e){return bf(this,"reauthViaPopup",e,(function(){return Ht()}),!0)},n.Fc=function(e){var t=this;return wf(this,"linkViaRedirect",e,(function(){return vf(t,e.providerId)}),!1)},n.Oc=function(e){return wf(this,"reauthViaRedirect",e,(function(){return Ht()}),!0)},n.Lb=function(e,t,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return n=this.I().then((function(n){return dc(i.a,{requestUri:e,postBody:r,sessionId:t,idToken:n})})).then((function(e){return o=gf(i,e,"link"),yf(i,e)})).then((function(){return o})),xf(this,n)},n.Mb=function(e,t,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null,a=Ht().then((function(){return Vo(pc(i.a,{requestUri:e,sessionId:t,postBody:r,tenantId:n}),i.uid)})).then((function(e){return o=gf(i,e,"reauthenticate"),df(i,e),i.i=null,i.reload()})).then((function(){return o}));return xf(this,a,!0)},n.vb=function(e){var t=this,n=null;return xf(this,this.I().then((function(t){return n=t,"undefined"===typeof e||be(e)?{}:vo(new oo(e))})).then((function(e){return t.a.vb(n,e)})).then((function(e){if(t.email!=e)return t.reload()})).then((function(){})))},n.Fb=function(e,t){var n=this,r=null;return xf(this,this.I().then((function(e){return r=e,"undefined"===typeof t||be(t)?{}:vo(new oo(t))})).then((function(t){return n.a.Fb(r,e,t)})).then((function(e){if(n.email!=e)return n.reload()})).then((function(){})))},n.jc=function(e){var t=null,n=this;return e=Vo(Ht(e),n.uid).then((function(e){return t=gf(n,e,"reauthenticate"),df(n,e),n.i=null,n.reload()})).then((function(){return t})),xf(this,e,!0)},n.toJSON=function(){return this.w()},n.w=function(){var e={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.h.w(),redirectEventId:this.ga||null};return this.metadata&&xe(e,this.metadata.w()),Y(this.providerData,(function(t){e.providerData.push(Si(t))})),xe(e,this.S.w()),e};var Of={name:"redirectUser",F:"session"};function Rf(e){return ul(e.b,Of,e.a)}function Cf(e,t){return e.b.get(Of,e.a).then((function(e){return e&&t&&(e.authDomain=t),Tf(e||{})}))}function If(e){this.a=e,this.b=ol(),this.c=null,this.f=Df(this),this.b.addListener(Nf("local"),this.a,T(this.g,this))}function Lf(e,t){var n,r=[];for(n in nl)nl[n]!==t&&r.push(ul(e.b,Nf(nl[n]),e.a));return r.push(ul(e.b,Pf,e.a)),Vt(r)}function Df(e){var t=Nf("local"),n=Nf("session"),r=Nf("none");return cl(e.b,t,e.a).then((function(){return e.b.get(n,e.a)})).then((function(i){return i?n:e.b.get(r,e.a).then((function(n){return n?r:e.b.get(t,e.a).then((function(n){return n?t:e.b.get(Pf,e.a).then((function(e){return e?Nf(e):t}))}))}))})).then((function(t){return e.c=t,Lf(e,t.F)})).o((function(){e.c||(e.c=t)}))}If.prototype.g=function(){var e=this,t=Nf("local");Hf(this,(function(){return Ht().then((function(){return e.c&&"local"!=e.c.F?e.b.get(t,e.a):null})).then((function(n){if(n)return Lf(e,"local").then((function(){e.c=t}))}))}))};var Pf={name:"persistence",F:"session"};function Nf(e){return{name:"authUser",F:e}}function Bf(e){return Hf(e,(function(){return e.b.set(Pf,e.c.F,e.a)}))}function kf(e,t){return Hf(e,(function(){return e.b.set(e.c,t.w(),e.a)}))}function Ff(e){return Hf(e,(function(){return ul(e.b,e.c,e.a)}))}function Uf(e,t,n){return Hf(e,(function(){return e.b.get(e.c,e.a).then((function(e){return e&&t&&(e.authDomain=t),e&&n&&(e.emulatorConfig=n),Tf(e||{})}))}))}function Hf(e,t){return e.f=e.f.then(t,t),e.f}function jf(e){if(this.l=!1,_i(this,"settings",new ph),_i(this,"app",e),!nd(this).options||!nd(this).options.apiKey)throw new R("invalid-api-key");e=t["a"].SDK_VERSION?Zr(t["a"].SDK_VERSION):null,this.a=new Ps(nd(this).options&&nd(this).options.apiKey,N(I),e),this.P=[],this.s=[],this.N=[],this.Pa=t["a"].INTERNAL.createSubscribe(T(this.zc,this)),this.W=void 0,this.ib=t["a"].INTERNAL.createSubscribe(T(this.Ac,this)),Jf(this,null),this.i=new If(nd(this).options.apiKey+":"+nd(this).name),this.D=new Mf(nd(this).options.apiKey+":"+nd(this).name),this.$=sd(this,$f(this)),this.h=sd(this,ed(this)),this.ba=!1,this.ja=T(this.Zc,this),this.Ba=T(this.da,this),this.qa=T(this.mc,this),this.za=T(this.wc,this),this.Aa=T(this.xc,this),this.b=null,Xf(this),this.INTERNAL={},this.INTERNAL["delete"]=T(this.delete,this),this.INTERNAL.logFramework=T(this.Gc,this),this.u=0,Fn.call(this),qf(this),this.J=[],this.R=null}function Gf(e){dn.call(this,"languageCodeChanged"),this.h=e}function Vf(e){dn.call(this,"emulatorConfigChanged"),this.c=e}function zf(e){dn.call(this,"frameworkChanged"),this.f=e}function Wf(e){"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),l.document&&!e&&Hr().then((function(){var e=l.document.createElement("div");e.innerText="Running in emulator mode. Do not use with production credentials.",e.style.position="fixed",e.style.width="100%",e.style.backgroundColor="#ffffff",e.style.border=".1em solid #000000",e.style.color="#b50000",e.style.bottom="0px",e.style.left="0px",e.style.margin="0px",e.style.zIndex=1e4,e.style.textAlign="center",e.classList.add("firebase-emulator-warning"),l.document.body.appendChild(e)}))}function qf(e){Object.defineProperty(e,"lc",{get:function(){return this.la()},set:function(e){this.xa(e)},enumerable:!1}),e.aa=null,Object.defineProperty(e,"ti",{get:function(){return this.T()},set:function(e){this.zb(e)},enumerable:!1}),e.S=null,Object.defineProperty(e,"emulatorConfig",{get:function(){if(this.R){var e=ir(this.R.url);e=Ai({protocol:e.c,host:e.a,port:e.g,options:Ai({disableWarnings:this.R.ec})})}else e=null;return e},enumerable:!1})}function Yf(e){return e.Oa||jt(new R("auth-domain-config-required"))}function Xf(e){var t=nd(e).options.authDomain,n=nd(e).options.apiKey;t&&ni()&&(e.Oa=e.$.then((function(){if(!e.l){if(e.b=rh(t,n,nd(e).name,e.R),Yl(e.b,e),rd(e)&&nf(rd(e)),e.m){nf(e.m);var r=e.m;r.xa(e.la()),Wh(r,e),r=e.m,Yh(r,e.J),Xh(r,e),r=e.m,zh(r,e.R),qh(r,e),e.m=null}return e.b}})))}function Qf(e){if(!ni())return jt(new R("operation-not-supported-in-this-environment"));var t=Yf(e).then((function(){return e.b.ra()})).then((function(e){return e?Ai(e):null}));return sd(e,t)}function Kf(e,t){var n={};return n.apiKey=nd(e).options.apiKey,n.authDomain=nd(e).options.authDomain,n.appName=nd(e).name,e.R&&(n.emulatorConfig=e.R),e.$.then((function(){return Af(n,t,e.D,e.Ga())})).then((function(t){return rd(e)&&t.uid==rd(e).uid?(hf(rd(e),t),e.da(t)):(Jf(e,t),nf(t),e.da(t))})).then((function(){od(e)}))}function Jf(e,t){rd(e)&&(ef(rd(e),e.Ba),Rn(rd(e),"tokenChanged",e.qa),Rn(rd(e),"userDeleted",e.za),Rn(rd(e),"userInvalidated",e.Aa),Zh(rd(e))),t&&(t.W.push(e.Ba),An(t,"tokenChanged",e.qa),An(t,"userDeleted",e.za),An(t,"userInvalidated",e.Aa),0<e.u&&Jh(t)),_i(e,"currentUser",t),t&&(t.xa(e.la()),Wh(t,e),Yh(t,e.J),Xh(t,e),zh(t,e.R),qh(t,e))}function Zf(e){var t=Cf(e.D,nd(e).options.authDomain).then((function(t){return(e.m=t)&&(t.ha=e.D),Rf(e.D)}));return sd(e,t)}function $f(e){var t=nd(e).options.authDomain,n=Zf(e).then((function(){return Uf(e.i,t,e.R)})).then((function(t){return t?(t.ha=e.D,e.m&&(e.m.ga||null)==(t.ga||null)?t:t.reload().then((function(){return kf(e.i,t).then((function(){return t}))})).o((function(n){return"auth/network-request-failed"==n.code?t:Ff(e.i)}))):null})).then((function(t){Jf(e,t||null)}));return sd(e,n)}function ed(e){return e.$.then((function(){return Qf(e)})).o((function(){})).then((function(){if(!e.l)return e.ja()})).o((function(){})).then((function(){if(!e.l){e.ba=!0;var t=e.i;t.b.addListener(Nf("local"),t.a,e.ja)}}))}function td(e,t){var n=null,r=null;return sd(e,t.then((function(t){return n=ga(t),r=Ro(t),Kf(e,t)}),(function(t){var n=null;throw t&&"auth/multi-factor-auth-required"===t.code&&(n=xh(t.w(),e,T(e.kc,e))),n||t})).then((function(){return Ai({user:rd(e),credential:n,additionalUserInfo:r,operationType:"signIn"})})))}function nd(e){return e.app}function rd(e){return e.currentUser}function id(e){return rd(e)&&rd(e)._lat||null}function od(e){if(e.ba){for(var t=0;t<e.s.length;t++)e.s[t]&&e.s[t](id(e));if(e.W!==e.getUid()&&e.N.length)for(e.W=e.getUid(),t=0;t<e.N.length;t++)e.N[t]&&e.N[t](id(e))}}function ad(e,t){e.N.push(t),sd(e,e.h.then((function(){!e.l&&$(e.N,t)&&e.W!==e.getUid()&&(e.W=e.getUid(),t(id(e)))})))}function sd(e,t){return e.P.push(t),t.oa((function(){ee(e.P,t)})),t}function cd(){}function ud(){this.a={},this.b=1e12}If.prototype.yb=function(e){var t=null,n=this;return rl(e),Hf(this,(function(){return e!=n.c.F?n.b.get(n.c,n.a).then((function(r){return t=r,Lf(n,e)})).then((function(){if(n.c=Nf(e),t)return n.b.set(n.c,t,n.a)})):Ht()}))},M(jf,Fn),M(Gf,dn),M(Vf,dn),M(zf,dn),n=jf.prototype,n.yb=function(e){return e=this.i.yb(e),sd(this,e)},n.xa=function(e){this.aa===e||this.l||(this.aa=e,js(this.a,this.aa),this.dispatchEvent(new Gf(this.la())))},n.la=function(){return this.aa},n.fd=function(){var e=l.navigator;this.xa(e&&(e.languages&&e.languages[0]||e.language||e.userLanguage)||null)},n.gd=function(e,t){if(!this.R){if(!/^https?:\/\//.test(e))throw new R("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");t=!!t&&!!t.disableWarnings,Wf(t),this.R={url:e,ec:t},this.settings.jb=!0,Gs(this.a,this.R),this.dispatchEvent(new Vf(this.R))}},n.Gc=function(e){this.J.push(e),zs(this.a,t["a"].SDK_VERSION?Zr(t["a"].SDK_VERSION,this.J):null),this.dispatchEvent(new zf(this.J))},n.Ga=function(){return re(this.J)},n.zb=function(e){this.S===e||this.l||(this.S=e,this.a.b=this.S)},n.T=function(){return this.S},n.toJSON=function(){return{apiKey:nd(this).options.apiKey,authDomain:nd(this).options.authDomain,appName:nd(this).name,currentUser:rd(this)&&rd(this).w()}},n.Gb=function(e,t){switch(e){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==t&&!!this.f;default:return!1}},n.na=function(e,t,n,r){"signInViaPopup"==e&&this.g==r&&(n&&this.C?this.C(n):t&&!n&&this.f&&this.f(t),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},n.Fa=function(e,t){return"signInViaRedirect"==e||"signInViaPopup"==e&&this.g==t&&this.f?T(this.ic,this):null},n.ic=function(e,t,n,r){var i=this,o={requestUri:e,postBody:r,sessionId:t,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.$.then((function(){return td(i,fc(i.a,o))}))},n.Xc=function(e){if(!ni())return jt(new R("operation-not-supported-in-this-environment"));var n=this,r=Oo(e.providerId),i=ui(),o=null;(!oi()||Vr())&&nd(this).options.authDomain&&e.isOAuthProvider&&(o=pu(nd(this).options.authDomain,nd(this).options.apiKey,nd(this).name,"signInViaPopup",e,null,i,t["a"].SDK_VERSION||null,null,null,this.T(),this.R));var a=Br(o,r&&r.va,r&&r.ua);return r=Yf(this).then((function(t){return Jl(t,a,"signInViaPopup",e,i,!!o,n.T())})).then((function(){return new Dt((function(e,t){n.na("signInViaPopup",null,new R("cancelled-popup-request"),n.g),n.f=e,n.C=t,n.g=i,n.c=eh(n.b,n,"signInViaPopup",a,i)}))})).then((function(e){return a&&Nr(a),e?Ai(e):null})).o((function(e){throw a&&Nr(a),e})),sd(this,r)},n.Yc=function(e){if(!ni())return jt(new R("operation-not-supported-in-this-environment"));var t=this,n=Yf(this).then((function(){return Bf(t.i)})).then((function(){return $l(t.b,"signInViaRedirect",e,void 0,t.T())}));return sd(this,n)},n.ra=function(){var e=this;return Qf(this).then((function(t){return e.b&&ah(e.b.b),t})).o((function(t){throw e.b&&ah(e.b.b),t}))},n.dd=function(e){if(!e)return jt(new R("null-user"));if(this.S!=e.tenantId)return jt(new R("tenant-id-mismatch"));var t=this,n={};n.apiKey=nd(this).options.apiKey,n.authDomain=nd(this).options.authDomain,n.appName=nd(this).name;var r=Sf(e,n,t.D,t.Ga());return sd(this,this.h.then((function(){if(nd(t).options.apiKey!=e.l)return r.reload()})).then((function(){return rd(t)&&e.uid==rd(t).uid?(hf(rd(t),e),t.da(e)):(Jf(t,r),nf(r),t.da(r))})).then((function(){od(t)})))},n.Bb=function(){var e=this,t=this.h.then((function(){return e.b&&ah(e.b.b),rd(e)?(Jf(e,null),Ff(e.i).then((function(){od(e)}))):Ht()}));return sd(this,t)},n.Zc=function(){var e=this;return Uf(this.i,nd(this).options.authDomain).then((function(t){if(!e.l){var n;if(n=rd(e)&&t){n=rd(e).uid;var r=t.uid;n=void 0!==n&&null!==n&&""!==n&&void 0!==r&&null!==r&&""!==r&&n==r}if(n)return hf(rd(e),t),rd(e).I();(rd(e)||t)&&(Jf(e,t),t&&(nf(t),t.ha=e.D),e.b&&Yl(e.b,e),od(e))}}))},n.da=function(e){return kf(this.i,e)},n.mc=function(){od(this),this.da(rd(this))},n.wc=function(){this.Bb()},n.xc=function(){this.Bb()},n.kc=function(e){var t=this;return this.h.then((function(){return td(t,Ht(e))}))},n.zc=function(e){var t=this;this.addAuthTokenListener((function(){e.next(rd(t))}))},n.Ac=function(e){var t=this;ad(this,(function(){e.next(rd(t))}))},n.Ic=function(e,t,n){var r=this;return this.ba&&Promise.resolve().then((function(){"function"===typeof e?e(rd(r)):"function"===typeof e.next&&e.next(rd(r))})),this.Pa(e,t,n)},n.Hc=function(e,t,n){var r=this;return this.ba&&Promise.resolve().then((function(){r.W=r.getUid(),"function"===typeof e?e(rd(r)):"function"===typeof e.next&&e.next(rd(r))})),this.ib(e,t,n)},n.nc=function(e){var t=this,n=this.h.then((function(){return rd(t)?rd(t).I(e).then((function(e){return{accessToken:e}})):null}));return sd(this,n)},n.Tc=function(e){var t=this;return this.h.then((function(){return td(t,Qc(t.a,Vc,{token:e}))})).then((function(e){var n=e.user;return lf(n,"isAnonymous",!1),t.da(n),e}))},n.Uc=function(e,t){var n=this;return this.h.then((function(){return td(n,Qc(n.a,zc,{email:e,password:t}))}))},n.dc=function(e,t){var n=this;return this.h.then((function(){return td(n,Qc(n.a,yc,{email:e,password:t}))}))},n.ab=function(e){var t=this;return this.h.then((function(){return td(t,e.ka(t.a))}))},n.Sc=function(e){return Ei("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.ab(e)},n.Ab=function(){var e=this;return this.h.then((function(){var t=rd(e);if(t&&t.isAnonymous){var n=Ai({providerId:null,isNewUser:!1});return Ai({user:t,credential:null,additionalUserInfo:n,operationType:"signIn"})}return td(e,e.a.Ab()).then((function(t){var n=t.user;return lf(n,"isAnonymous",!0),e.da(n),t}))}))},n.getUid=function(){return rd(this)&&rd(this).uid||null},n.cc=function(e){this.addAuthTokenListener(e),this.u++,0<this.u&&rd(this)&&Jh(rd(this))},n.Pc=function(e){var t=this;Y(this.s,(function(n){n==e&&t.u--})),0>this.u&&(this.u=0),0==this.u&&rd(this)&&Zh(rd(this)),this.removeAuthTokenListener(e)},n.addAuthTokenListener=function(e){var t=this;this.s.push(e),sd(this,this.h.then((function(){t.l||$(t.s,e)&&e(id(t))})))},n.removeAuthTokenListener=function(e){te(this.s,(function(t){return t==e}))},n.delete=function(){this.l=!0;for(var e=0;e<this.P.length;e++)this.P[e].cancel("app-deleted");return this.P=[],this.i&&(e=this.i,e.b.removeListener(Nf("local"),e.a,this.ja)),this.b&&(Xl(this.b,this),ah(this.b.b)),Promise.resolve()},n.hc=function(e){return sd(this,$s(this.a,e))},n.Bc=function(e){return!!ha(e)},n.xb=function(e,t){var n=this;return sd(this,Ht().then((function(){var e=new oo(t);if(!e.c)throw new R("argument-error",co+" must be true when sending sign in link to email");return vo(e)})).then((function(t){return n.a.xb(e,t)})).then((function(){})))},n.jd=function(e){return this.Sa(e).then((function(e){return e.data.email}))},n.ob=function(e,t){return sd(this,this.a.ob(e,t).then((function(){})))},n.Sa=function(e){return sd(this,this.a.Sa(e).then((function(e){return new Bi(e)})))},n.kb=function(e){return sd(this,this.a.kb(e).then((function(){})))},n.wb=function(e,t){var n=this;return sd(this,Ht().then((function(){return"undefined"===typeof t||be(t)?{}:vo(new oo(t))})).then((function(t){return n.a.wb(e,t)})).then((function(){})))},n.Wc=function(e,t){return sd(this,vh(this,e,t,T(this.ab,this)))},n.Vc=function(e,t){var n=this;return sd(this,Ht().then((function(){var r=t||Cr(),i=la(e,r);if(r=ha(r),!r)throw new R("argument-error","Invalid email link!");if(r.tenantId!==n.T())throw new R("tenant-id-mismatch");return n.ab(i)})))},cd.prototype.render=function(){},cd.prototype.reset=function(){},cd.prototype.getResponse=function(){},cd.prototype.execute=function(){};var ld=null;function hd(e,t){return(t=fd(t))&&e.a[t]||null}function fd(e){return(e="undefined"===typeof e?1e12:e)?e.toString():null}function dd(e,t){this.g=!1,this.c=t,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=yt(e);var n=this;this.i=function(){n.execute()},this.h?this.execute():An(this.f,"click",this.i)}function pd(e){if(e.g)throw Error("reCAPTCHA mock was already deleted!")}function md(){}function vd(){}ud.prototype.render=function(e,t){return this.a[this.b.toString()]=new dd(e,t),this.b++},ud.prototype.reset=function(e){var t=hd(this,e);e=fd(e),t&&e&&(t.delete(),delete this.a[e])},ud.prototype.getResponse=function(e){return(e=hd(this,e))?e.getResponse():null},ud.prototype.execute=function(e){(e=hd(this,e))&&e.execute()},dd.prototype.getResponse=function(){return pd(this),this.b},dd.prototype.execute=function(){pd(this);var e=this;this.a||(this.a=setTimeout((function(){e.b=Yr();var t=e.c.callback,n=e.c["expired-callback"];if(t)try{t(e.b)}catch(r){}e.a=setTimeout((function(){if(e.a=null,e.b=null,n)try{n()}catch(r){}e.h&&e.execute()}),6e4)}),500))},dd.prototype.delete=function(){pd(this),this.g=!0,clearTimeout(this.a),this.a=null,Rn(this.f,"click",this.i)},_i(md,"FACTOR_ID","phone"),vd.prototype.g=function(){return ld||(ld=new ud),Ht(ld)},vd.prototype.c=function(){};var gd=null;function yd(){this.b=l.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var bd=new Te(Oe,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),wd=new fi(3e4,6e4);yd.prototype.g=function(e){var t=this;return new Dt((function(n,r){var i=setTimeout((function(){r(new R("network-request-failed"))}),wd.get());if(!l.grecaptcha||e!==t.f&&!t.b){l[t.a]=function(){if(l.grecaptcha){t.f=e;var o=l.grecaptcha.render;l.grecaptcha.render=function(e,n){return e=o(e,n),t.b++,e},clearTimeout(i),n(l.grecaptcha)}else clearTimeout(i),r(new R("internal-error"));delete l[t.a]};var o=Le(bd,{onload:t.a,hl:e||""});Ht(Ss(o)).o((function(){clearTimeout(i),r(new R("internal-error","Unable to load external reCAPTCHA dependencies!"))}))}else clearTimeout(i),n(l.grecaptcha)}))},yd.prototype.c=function(){this.b--};var Ed=null;function xd(e,t,n,r,i,o,a){if(_i(this,"type","recaptcha"),this.c=this.f=null,this.J=!1,this.v=t,this.g=null,a?(gd||(gd=new vd),a=gd):(Ed||(Ed=new yd),a=Ed),this.m=a,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[Ad])throw new R("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Sd],!l.document)throw new R("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!yt(t)||!this.i&&yt(t).hasChildNodes())throw new R("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new Ps(e,o||null,i||null),this.u=r||function(){return null};var s=this;this.l=[];var c=this.a[_d];this.a[_d]=function(e){if(Md(s,e),"function"===typeof c)c(e);else if("string"===typeof c){var t=ei(c,l);"function"===typeof t&&t(e)}};var u=this.a[Td];this.a[Td]=function(){if(Md(s,null),"function"===typeof u)u();else if("string"===typeof u){var e=ei(u,l);"function"===typeof e&&e()}}}var _d="callback",Td="expired-callback",Ad="sitekey",Sd="size";function Md(e,t){for(var n=0;n<e.l.length;n++)try{e.l[n](t)}catch(r){}}function Od(e,t){te(e.l,(function(e){return e==t}))}function Rd(e,t){return e.h.push(t),t.oa((function(){ee(e.h,t)})),t}function Cd(e){if(e.J)throw new R("internal-error","RecaptchaVerifier instance has been destroyed.")}function Id(e,n,r){var i=!1;try{this.b=r||t["a"].app()}catch(s){throw new R("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new R("invalid-api-key");r=this.b.options.apiKey;var o=this,a=null;try{a=this.b.auth().Ga()}catch(s){}try{i=this.b.auth().settings.appVerificationDisabledForTesting}catch(s){}a=t["a"].SDK_VERSION?Zr(t["a"].SDK_VERSION,a):null,xd.call(this,r,e,n,(function(){try{var e=o.b.auth().la()}catch(t){e=null}return e}),a,N(I),i)}function Ld(e,t,n,r){e:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,a=0;a<t.length;a++)if(t[a].optional)o=!0;else{if(o)throw new R("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=t.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=t[i].optional&&void 0===n[i],!t[i].M(n[i])&&!o){if(t=t[i],0>i||i>=Dd.length)throw new R("internal-error","Argument validator received an unsupported number of arguments.");n=Dd[i],r=(r?"":n+" argument ")+(t.name?'"'+t.name+'" ':"")+"must be "+t.K+".";break e}r=null}}if(r)throw new R("argument-error",e+" failed: "+r)}n=xd.prototype,n.Ia=function(){var e=this;return this.f?this.f:this.f=Rd(this,Ht().then((function(){if(ri()&&!zr())return Hr();throw new R("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return e.m.g(e.u())})).then((function(t){return e.g=t,Qc(e.s,Lc,{})})).then((function(t){e.a[Ad]=t.recaptchaSiteKey})).o((function(t){throw e.f=null,t})))},n.render=function(){Cd(this);var e=this;return Rd(this,this.Ia().then((function(){if(null===e.c){var t=e.v;if(!e.i){var n=yt(t);t=_t("DIV"),n.appendChild(t)}e.c=e.g.render(t,e.a)}return e.c})))},n.verify=function(){Cd(this);var e=this;return Rd(this,this.render().then((function(t){return new Dt((function(n){var r=e.g.getResponse(t);if(r)n(r);else{var i=function(t){t&&(Od(e,i),n(t))};e.l.push(i),e.i&&e.g.execute(e.c)}}))})))},n.reset=function(){Cd(this),null!==this.c&&this.g.reset(this.c)},n.clear=function(){Cd(this),this.J=!0,this.m.c();for(var e=0;e<this.h.length;e++)this.h[e].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){e=yt(this.v);for(var t;t=e.firstChild;)e.removeChild(t)}},M(Id,xd);var Dd="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Pd(e,t){return{name:e||"",K:"a valid string",optional:!!t,M:function(e){return"string"===typeof e}}}function Nd(e,t){return{name:e||"",K:"a boolean",optional:!!t,M:function(e){return"boolean"===typeof e}}}function Bd(e,t){return{name:e||"",K:"a valid object",optional:!!t,M:y}}function kd(e,t){return{name:e||"",K:"a function",optional:!!t,M:function(e){return"function"===typeof e}}}function Fd(e,t){return{name:e||"",K:"null",optional:!!t,M:function(e){return null===e}}}function Ud(){return{name:"",K:"an HTML element",optional:!1,M:function(e){return!!(e&&e instanceof Element)}}}function Hd(){return{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(e){return!!(e&&e instanceof jf)}}}function jd(){return{name:"app",K:"an instance of Firebase App",optional:!0,M:function(e){return!!(e&&e instanceof t["a"].app.App)}}}function Gd(e){return{name:e?e+"Credential":"credential",K:e?"a valid "+e+" credential":"a valid credential",optional:!1,M:function(t){if(!t)return!1;var n=!e||t.providerId===e;return!(!t.ka||!n)}}}function Vd(){return{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(e){return!!e&&!!e.tb}}}function zd(){return{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}}function Wd(e,t){return y(e)&&"string"===typeof e.type&&e.type===t&&"function"===typeof e.Ha}function qd(e){return y(e)&&"string"===typeof e.uid}function Yd(){return{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(e){return!(!e||"string"!==typeof e.type||"function"!==typeof e.verify)}}}function Xd(e,t,n,r){return{name:n||"",K:e.K+" or "+t.K,optional:!!r,M:function(n){return e.M(n)||t.M(n)}}}function Qd(e,t){for(var n in t){var r=t[n].name;e[r]=Zd(r,e[n],t[n].j)}}function Kd(e,t){for(var n in t){var r=t[n].name;r!==n&&Object.defineProperty(e,r,{get:A((function(e){return this[e]}),n),set:A((function(e,t,n,r){Ld(e,[n],[r],!0),this[t]=r}),r,n,t[n].lb),enumerable:!0})}}function Jd(e,t,n,r){e[t]=Zd(t,n,r)}function Zd(e,t,n){function r(){var e=Array.prototype.slice.call(arguments);return Ld(o,n,e),t.apply(this,e)}if(!n)return t;var i,o=$d(e);for(i in t)r[i]=t[i];for(i in t.prototype)r.prototype[i]=t.prototype[i];return r}function $d(e){return e=e.split("."),e[e.length-1]}Qd(jf.prototype,{kb:{name:"applyActionCode",j:[Pd("code")]},Sa:{name:"checkActionCode",j:[Pd("code")]},ob:{name:"confirmPasswordReset",j:[Pd("code"),Pd("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[Pd("email"),Pd("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[Pd("email")]},ra:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[Pd("emailLink")]},Hc:{name:"onAuthStateChanged",j:[Xd(Bd(),kd(),"nextOrObserver"),kd("opt_error",!0),kd("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[Xd(Bd(),kd(),"nextOrObserver"),kd("opt_error",!0),kd("opt_completed",!0)]},wb:{name:"sendPasswordResetEmail",j:[Pd("email"),Xd(Bd("opt_actionCodeSettings",!0),Fd(null,!0),"opt_actionCodeSettings",!0)]},xb:{name:"sendSignInLinkToEmail",j:[Pd("email"),Bd("actionCodeSettings")]},yb:{name:"setPersistence",j:[Pd("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[Gd()]},Ab:{name:"signInAnonymously",j:[]},ab:{name:"signInWithCredential",j:[Gd()]},Tc:{name:"signInWithCustomToken",j:[Pd("token")]},Uc:{name:"signInWithEmailAndPassword",j:[Pd("email"),Pd("password")]},Vc:{name:"signInWithEmailLink",j:[Pd("email"),Pd("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[Pd("phoneNumber"),Yd()]},Xc:{name:"signInWithPopup",j:[zd()]},Yc:{name:"signInWithRedirect",j:[zd()]},dd:{name:"updateCurrentUser",j:[Xd(function(e){return{name:"user",K:"an instance of Firebase User",optional:!!e,M:function(e){return!!(e&&e instanceof Vh)}}}(),Fd(),"user")]},Bb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Pd(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[Pd("url"),Bd("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[Pd("code")]}}),Kd(jf.prototype,{lc:{name:"languageCode",lb:Xd(Pd(),Fd(),"languageCode")},ti:{name:"tenantId",lb:Xd(Pd(),Fd(),"tenantId")}}),jf.Persistence=nl,jf.Persistence.LOCAL="local",jf.Persistence.SESSION="session",jf.Persistence.NONE="none",Qd(Vh.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[Nd("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Nd("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[Gd()]},rb:{name:"linkWithCredential",j:[Gd()]},Dc:{name:"linkWithPhoneNumber",j:[Pd("phoneNumber"),Yd()]},Ec:{name:"linkWithPopup",j:[zd()]},Fc:{name:"linkWithRedirect",j:[zd()]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Gd()]},ub:{name:"reauthenticateWithCredential",j:[Gd()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[Pd("phoneNumber"),Yd()]},Nc:{name:"reauthenticateWithPopup",j:[zd()]},Oc:{name:"reauthenticateWithRedirect",j:[zd()]},reload:{name:"reload",j:[]},vb:{name:"sendEmailVerification",j:[Xd(Bd("opt_actionCodeSettings",!0),Fd(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Pd(null,!0)]},cd:{name:"unlink",j:[Pd("provider")]},Cb:{name:"updateEmail",j:[Pd("email")]},Db:{name:"updatePassword",j:[Pd("password")]},ed:{name:"updatePhoneNumber",j:[Gd("phone")]},Eb:{name:"updateProfile",j:[Bd("profile")]},Fb:{name:"verifyBeforeUpdateEmail",j:[Pd("email"),Xd(Bd("opt_actionCodeSettings",!0),Fd(null,!0),"opt_actionCodeSettings",!0)]}}),Qd(ud.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Qd(cd.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Qd(Dt.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),Kd(ph.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",lb:Nd("appVerificationDisabledForTesting")}}),Qd(mh.prototype,{confirm:{name:"confirm",j:[Pd("verificationCode")]}}),Jd(Go,"fromJSON",(function(e){e="string"===typeof e?JSON.parse(e):e;for(var t,n=[Qo,ca,da,qo],r=0;r<n.length;r++)if(t=n[r](e))return t;return null}),[Xd(Pd(),Bd(),"json")]),Jd(ua,"credential",(function(e,t){return new sa(e,t)}),[Pd("email"),Pd("password")]),Qd(sa.prototype,{w:{name:"toJSON",j:[Pd(null,!0)]}}),Qd($o.prototype,{Ca:{name:"addScope",j:[Pd("scope")]},Ka:{name:"setCustomParameters",j:[Bd("customOAuthParameters")]}}),Jd($o,"credential",ea,[Xd(Pd(),Bd(),"token")]),Jd(ua,"credentialWithLink",la,[Pd("email"),Pd("emailLink")]),Qd(ta.prototype,{Ca:{name:"addScope",j:[Pd("scope")]},Ka:{name:"setCustomParameters",j:[Bd("customOAuthParameters")]}}),Jd(ta,"credential",na,[Xd(Pd(),Bd(),"token")]),Qd(ra.prototype,{Ca:{name:"addScope",j:[Pd("scope")]},Ka:{name:"setCustomParameters",j:[Bd("customOAuthParameters")]}}),Jd(ra,"credential",ia,[Xd(Pd(),Xd(Bd(),Fd()),"idToken"),Xd(Pd(),Fd(),"accessToken",!0)]),Qd(oa.prototype,{Ka:{name:"setCustomParameters",j:[Bd("customOAuthParameters")]}}),Jd(oa,"credential",aa,[Xd(Pd(),Bd(),"token"),Pd("secret",!0)]),Qd(Zo.prototype,{Ca:{name:"addScope",j:[Pd("scope")]},credential:{name:"credential",j:[Xd(Pd(),Xd(Bd(),Fd()),"optionsOrIdToken"),Xd(Pd(),Fd(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[Bd("customOAuthParameters")]}}),Qd(Yo.prototype,{w:{name:"toJSON",j:[Pd(null,!0)]}}),Qd(zo.prototype,{w:{name:"toJSON",j:[Pd(null,!0)]}}),Jd(ma,"credential",va,[Pd("verificationId"),Pd("verificationCode")]),Qd(ma.prototype,{gb:{name:"verifyPhoneNumber",j:[Xd(Pd(),function(e,t){return{name:e||"phoneInfoOptions",K:"valid phone info options",optional:!!t,M:function(e){return!!e&&(e.session&&e.phoneNumber?Wd(e.session,Ho)&&"string"===typeof e.phoneNumber:e.session&&e.multiFactorHint?Wd(e.session,jo)&&qd(e.multiFactorHint):e.session&&e.multiFactorUid?Wd(e.session,jo)&&"string"===typeof e.multiFactorUid:!!e.phoneNumber&&"string"===typeof e.phoneNumber)}}}(),"phoneInfoOptions"),Yd()]}}),Qd(fa.prototype,{w:{name:"toJSON",j:[Pd(null,!0)]}}),Qd(R.prototype,{toJSON:{name:"toJSON",j:[Pd(null,!0)]}}),Qd(Sa.prototype,{toJSON:{name:"toJSON",j:[Pd(null,!0)]}}),Qd(Aa.prototype,{toJSON:{name:"toJSON",j:[Pd(null,!0)]}}),Qd(Eh.prototype,{toJSON:{name:"toJSON",j:[Pd(null,!0)]}}),Qd(yh.prototype,{Rc:{name:"resolveSignIn",j:[Vd()]}}),Qd(Rh.prototype,{Sb:{name:"getSession",j:[]},fc:{name:"enroll",j:[Vd(),Pd("displayName",!0)]},bd:{name:"unenroll",j:[Xd({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:qd},Pd(),"multiFactorInfoIdentifier")]}}),Qd(Id.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),Jd(Ki,"parseLink",io,[Pd("link")]),Jd(md,"assertion",(function(e){return new Mh(e)}),[Gd("phone")]),function(){if("undefined"===typeof t["a"]||!t["a"].INTERNAL||!t["a"].INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var e={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Fi,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:ki,VERIFY_AND_CHANGE_EMAIL:Ui,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:jf,AuthCredential:Go,Error:R};Jd(e,"EmailAuthProvider",ua,[]),Jd(e,"FacebookAuthProvider",$o,[]),Jd(e,"GithubAuthProvider",ta,[]),Jd(e,"GoogleAuthProvider",ra,[]),Jd(e,"TwitterAuthProvider",oa,[]),Jd(e,"OAuthProvider",Zo,[Pd("providerId")]),Jd(e,"SAMLAuthProvider",Jo,[Pd("providerId")]),Jd(e,"PhoneAuthProvider",ma,[Hd()]),Jd(e,"RecaptchaVerifier",Id,[Xd(Pd(),Ud(),"recaptchaContainer"),Bd("recaptchaParameters",!0),jd()]),Jd(e,"ActionCodeURL",Ki,[]),Jd(e,"PhoneMultiFactorGenerator",md,[]),t["a"].INTERNAL.registerComponent({name:"auth",instanceFactory:function(e){return e=e.getProvider("app").getImmediate(),new jf(e)},multipleInstances:!1,serviceProps:e,instantiationMode:"LAZY",type:"PUBLIC",onInstanceCreated:function(e){e.getProvider("auth-internal").initialize()}}),t["a"].INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(e){return e=e.getProvider("auth").getImmediate(),{getUid:T(e.getUid,e),getToken:T(e.nc,e),addAuthTokenListener:T(e.cc,e),removeAuthTokenListener:T(e.Pc,e)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),t["a"].registerVersion("@firebase/auth","0.16.8"),t["a"].INTERNAL.extendNamespace({User:Vh})}()}).apply("undefined"!==typeof e?e:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})}).call(this,n("c8ba"))},c04e:function(e,t,n){var r=n("da84"),i=n("c65b"),o=n("861d"),a=n("d9b5"),s=n("dc4a"),c=n("485a"),u=n("b622"),l=r.TypeError,h=u("toPrimitive");e.exports=function(e,t){if(!o(e)||a(e))return e;var n,r=s(e,h);if(r){if(void 0===t&&(t="default"),n=i(r,e,t),!o(n)||a(n))return n;throw l("Can't convert object to primitive value")}return void 0===t&&(t="number"),c(e,t)}},c430:function(e,t){e.exports=!1},c65b:function(e,t){var n=Function.prototype.call;e.exports=n.bind?n.bind(n):function(){return n.apply(n,arguments)}},c6b6:function(e,t,n){var r=n("e330"),i=r({}.toString),o=r("".slice);e.exports=function(e){return o(i(e),8,-1)}},c6cd:function(e,t,n){var r=n("da84"),i=n("ce4e"),o="__core-js_shared__",a=r[o]||i(o,{});e.exports=a},c7b2:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return Cr})),n.d(t,"b",(function(){return Lr})),n.d(t,"c",(function(){return Ir})),n.d(t,"d",(function(){return Pr})),n.d(t,"e",(function(){return Dr})),n.d(t,"f",(function(){return Nr})),n.d(t,"g",(function(){return Br})),n.d(t,"h",(function(){return Or})),n.d(t,"i",(function(){return Rr}));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)};function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function o(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}var a,s="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof e?e:"undefined"!==typeof self?self:{},c=c||{},u=s||self;function l(){}function h(e){var t=typeof e;return t="object"!=t?t:e?Array.isArray(e)?"array":t:"null","array"==t||"object"==t&&"number"==typeof e.length}function f(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function d(e){return Object.prototype.hasOwnProperty.call(e,p)&&e[p]||(e[p]=++m)}var p="closure_uid_"+(1e9*Math.random()>>>0),m=0;function v(e,t,n){return e.call.apply(e.bind,arguments)}function g(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function y(e,t,n){return y=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?v:g,y.apply(null,arguments)}function b(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function w(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}function E(){this.s=this.s,this.o=this.o}var x=0,_={};E.prototype.s=!1,E.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0!=x)){var e=d(this);delete _[e]}},E.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var T=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},A=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"===typeof e?e.split(""):e,o=0;o<r;o++)o in i&&t.call(n,i[o],o,e)};function S(e){e:{for(var t=zn,n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}function M(e){return Array.prototype.concat.apply([],arguments)}function O(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function R(e){return/^[\s\xa0]*$/.test(e)}var C,I=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function L(e,t){return-1!=e.indexOf(t)}function D(e,t){return e<t?-1:e>t?1:0}e:{var P=u.navigator;if(P){var N=P.userAgent;if(N){C=N;break e}}C=""}function B(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function k(e){var t={};for(var n in e)t[n]=e[n];return t}var F="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function U(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(var o=0;o<F.length;o++)n=F[o],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function H(e){return H[" "](e),e}function j(e){var t=ee;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}H[" "]=l;var G,V=L(C,"Opera"),z=L(C,"Trident")||L(C,"MSIE"),W=L(C,"Edge"),q=W||z,Y=L(C,"Gecko")&&!(L(C.toLowerCase(),"webkit")&&!L(C,"Edge"))&&!(L(C,"Trident")||L(C,"MSIE"))&&!L(C,"Edge"),X=L(C.toLowerCase(),"webkit")&&!L(C,"Edge");function Q(){var e=u.document;return e?e.documentMode:void 0}e:{var K="",J=function(){var e=C;return Y?/rv:([^\);]+)(\)|;)/.exec(e):W?/Edge\/([\d\.]+)/.exec(e):z?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):X?/WebKit\/(\S+)/.exec(e):V?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(J&&(K=J?J[1]:""),z){var Z=Q();if(null!=Z&&Z>parseFloat(K)){G=String(Z);break e}}G=K}var $,ee={};function te(){return j((function(){for(var e=0,t=I(String(G)).split("."),n=I("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var o=t[i]||"",a=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==o[0].length&&0==a[0].length)break;e=D(0==o[1].length?0:parseInt(o[1],10),0==a[1].length?0:parseInt(a[1],10))||D(0==o[2].length,0==a[2].length)||D(o[2],a[2]),o=o[3],a=a[3]}while(0==e)}return 0<=e}))}if(u.document&&z){var ne=Q();$=ne||(parseInt(G,10)||void 0)}else $=void 0;var re=$,ie=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{u.addEventListener("test",l,t),u.removeEventListener("test",l,t)}catch(n){}return e}();function oe(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function ae(e,t){if(oe.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Y){e:{try{H(t.nodeName);var i=!0;break e}catch(o){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:se[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&ae.Z.h.call(this)}}oe.prototype.h=function(){this.defaultPrevented=!0},w(ae,oe);var se={2:"touch",3:"pen",4:"mouse"};ae.prototype.h=function(){ae.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var ce="closure_listenable_"+(1e6*Math.random()|0),ue=0;function le(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++ue,this.ca=this.fa=!1}function he(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function fe(e){this.src=e,this.g={},this.h=0}function de(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],o=T(i,t);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(he(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function pe(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.ca&&o.listener==t&&o.capture==!!n&&o.ia==r)return i}return-1}fe.prototype.add=function(e,t,n,r,i){var o=e.toString();e=this.g[o],e||(e=this.g[o]=[],this.h++);var a=pe(e,t,r,i);return-1<a?(t=e[a],n||(t.fa=!1)):(t=new le(t,this.src,o,!!r,i),t.fa=n,e.push(t)),t};var me="closure_lm_"+(1e6*Math.random()|0),ve={};function ge(e,t,n,r,i){if(r&&r.once)return we(e,t,n,r,i);if(Array.isArray(t)){for(var o=0;o<t.length;o++)ge(e,t[o],n,r,i);return null}return n=Me(n),e&&e[ce]?e.N(t,n,f(r)?!!r.capture:!!r,i):ye(e,t,n,!1,r,i)}function ye(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var a=f(i)?!!i.capture:!!i,s=Ae(e);if(s||(e[me]=s=new fe(e)),n=s.add(t,n,r,a,o),n.proxy)return n;if(r=be(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)ie||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(_e(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function be(){function e(n){return t.call(e.src,e.listener,n)}var t=Te;return e}function we(e,t,n,r,i){if(Array.isArray(t)){for(var o=0;o<t.length;o++)we(e,t[o],n,r,i);return null}return n=Me(n),e&&e[ce]?e.O(t,n,f(r)?!!r.capture:!!r,i):ye(e,t,n,!0,r,i)}function Ee(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)Ee(e,t[o],n,r,i);else r=f(r)?!!r.capture:!!r,n=Me(n),e&&e[ce]?(e=e.i,t=String(t).toString(),t in e.g&&(o=e.g[t],n=pe(o,n,r,i),-1<n&&(he(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete e.g[t],e.h--)))):e&&(e=Ae(e))&&(t=e.g[t.toString()],e=-1,t&&(e=pe(t,n,r,i)),(n=-1<e?t[e]:null)&&xe(n))}function xe(e){if("number"!==typeof e&&e&&!e.ca){var t=e.src;if(t&&t[ce])de(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(_e(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Ae(t))?(de(n,e),0==n.h&&(n.src=null,t[me]=null)):he(e)}}}function _e(e){return e in ve?ve[e]:ve[e]="on"+e}function Te(e,t){if(e.ca)e=!0;else{t=new ae(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&xe(e),e=n.call(r,t)}return e}function Ae(e){return e=e[me],e instanceof fe?e:null}var Se="__closure_events_fn_"+(1e9*Math.random()>>>0);function Me(e){return"function"===typeof e?e:(e[Se]||(e[Se]=function(t){return e.handleEvent(t)}),e[Se])}function Oe(){E.call(this),this.i=new fe(this),this.P=this,this.I=null}function Re(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new oe(t,e);else if(t instanceof oe)t.target=t.target||e;else{var i=t;t=new oe(r,e),U(t,i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var a=t.g=n[o];i=Ce(a,r,!0,t)&&i}if(a=t.g=e,i=Ce(a,r,!0,t)&&i,i=Ce(a,r,!1,t)&&i,n)for(o=0;o<n.length;o++)a=t.g=n[o],i=Ce(a,r,!1,t)&&i}function Ce(e,t,n,r){if(t=e.i.g[String(t)],!t)return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var a=t[o];if(a&&!a.ca&&a.capture==n){var s=a.listener,c=a.ia||a.src;a.fa&&de(e.i,a),i=!1!==s.call(c,r)&&i}}return i&&!r.defaultPrevented}w(Oe,E),Oe.prototype[ce]=!0,Oe.prototype.removeEventListener=function(e,t,n,r){Ee(this,e,t,n,r)},Oe.prototype.M=function(){if(Oe.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)he(n[r]);delete t.g[e],t.h--}}this.I=null},Oe.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Oe.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Ie=u.JSON.stringify;function Le(){var e=je,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var De,Pe=function(){function e(){this.h=this.g=null}return e.prototype.add=function(e,t){var n=Ne.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n},e}(),Ne=new(function(){function e(e,t){this.i=e,this.j=t,this.h=0,this.g=null}return e.prototype.get=function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e},e}())((function(){return new Be}),(function(e){return e.reset()})),Be=function(){function e(){this.next=this.g=this.h=null}return e.prototype.set=function(e,t){this.h=e,this.g=t,this.next=null},e.prototype.reset=function(){this.next=this.g=this.h=null},e}();function ke(e){u.setTimeout((function(){throw e}),0)}function Fe(e,t){De||Ue(),He||(De(),He=!0),je.add(e,t)}function Ue(){var e=u.Promise.resolve(void 0);De=function(){e.then(Ge)}}var He=!1,je=new Pe;function Ge(){for(var e;e=Le();){try{e.h.call(e.g)}catch(n){ke(n)}var t=Ne;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}He=!1}function Ve(e,t){Oe.call(this),this.h=e||1,this.g=t||u,this.j=y(this.kb,this),this.l=Date.now()}function ze(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function We(e,t,n){if("function"===typeof e)n&&(e=y(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=y(e.handleEvent,e)}return 2147483647<Number(t)?-1:u.setTimeout(e,t||0)}function qe(e){e.g=We((function(){e.g=null,e.i&&(e.i=!1,qe(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}w(Ve,Oe),a=Ve.prototype,a.da=!1,a.S=null,a.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Re(this,"tick"),this.da&&(ze(this),this.start()))}},a.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},a.M=function(){Ve.Z.M.call(this),ze(this),delete this.g};var Ye=function(e){function t(t,n){var r=e.call(this)||this;return r.m=t,r.j=n,r.h=null,r.i=!1,r.g=null,r}return i(t,e),t.prototype.l=function(e){this.h=arguments,this.g?this.i=!0:qe(this)},t.prototype.M=function(){e.prototype.M.call(this),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},t}(E);function Xe(e){E.call(this),this.h=e,this.g={}}w(Xe,E);var Qe=[];function Ke(e,t,n,r){Array.isArray(n)||(n&&(Qe[0]=n.toString()),n=Qe);for(var i=0;i<n.length;i++){var o=ge(t,n[i],r||e.handleEvent,!1,e.h||e);if(!o)break;e.g[o.key]=o}}function Je(e){B(e.g,(function(e,t){this.g.hasOwnProperty(t)&&xe(e)}),e),e.g={}}function Ze(){this.g=!0}function $e(e,t,n,r,i,o){e.info((function(){if(e.g)if(o)for(var a="",s=o.split("&"),c=0;c<s.length;c++){var u=s[c].split("=");if(1<u.length){var l=u[0];u=u[1];var h=l.split("_");a=2<=h.length&&"type"==h[1]?a+(l+"=")+u+"&":a+(l+"=redacted&")}}else a=null;else a=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+a}))}function et(e,t,n,r,i,o,a){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+o+" "+a}))}function tt(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+rt(e,n)+(r?" "+r:"")}))}function nt(e,t){e.info((function(){return"TIMEOUT: "+t}))}function rt(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var a=1;a<i.length;a++)i[a]=""}}}return Ie(n)}catch(s){return t}}Xe.prototype.M=function(){Xe.Z.M.call(this),Je(this)},Xe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ze.prototype.Aa=function(){this.g=!1},Ze.prototype.info=function(){};var it={},ot=null;function at(){return ot=ot||new Oe}function st(e){oe.call(this,it.Ma,e)}function ct(e){var t=at();Re(t,new st(t,e))}function ut(e,t){oe.call(this,it.STAT_EVENT,e),this.stat=t}function lt(e){var t=at();Re(t,new ut(t,e))}function ht(e,t){oe.call(this,it.Na,e),this.size=t}function ft(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return u.setTimeout((function(){e()}),t)}it.Ma="serverreachability",w(st,oe),it.STAT_EVENT="statevent",w(ut,oe),it.Na="timingevent",w(ht,oe);var dt={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},pt={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function mt(){}function vt(e){return e.h||(e.h=e.i())}function gt(){}mt.prototype.h=null;var yt,bt={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function wt(){oe.call(this,"d")}function Et(){oe.call(this,"c")}function xt(){}function _t(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new Xe(this),this.P=At,e=q?125:void 0,this.W=new Ve(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Tt}function Tt(){this.i=null,this.g="",this.h=!1}w(wt,oe),w(Et,oe),w(xt,mt),xt.prototype.g=function(){return new XMLHttpRequest},xt.prototype.i=function(){return{}},yt=new xt;var At=45e3,St={},Mt={};function Ot(e,t,n){e.K=1,e.v=$t(Yt(t)),e.s=n,e.U=!0,Rt(e,null)}function Rt(e,t){e.F=Date.now(),Dt(e),e.A=Yt(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),mn(n.h,"t",r),e.C=0,n=e.l.H,e.h=new Tt,e.g=Er(e.l,n?t:null,!e.s),0<e.O&&(e.L=new Ye(y(e.Ia,e,e.g),e.O)),Ke(e.V,e.g,"readystatechange",e.gb),t=e.H?k(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),ct(1),$e(e.j,e.u,e.A,e.m,e.X,e.s)}function Ct(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Ba)}function It(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if(r=Lt(e,n),r==Mt){4==t&&(e.o=4,lt(14),i=!1),tt(e.j,e.m,null,"[Incomplete Response]");break}if(r==St){e.o=4,lt(15),tt(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}tt(e.j,e.m,r,null),Ft(e,r)}Ct(e)&&r!=Mt&&r!=St&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,lt(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,t=e.l,t.g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),dr(t),t.L=!0,lt(11))):(tt(e.j,e.m,n,"[Invalid Chunked Response]"),kt(e),Bt(e))}function Lt(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Mt:(n=Number(t.substring(n,r)),isNaN(n)?St:(r+=1,r+n>t.length?Mt:(t=t.substr(r,n),e.C=r+n,t)))}function Dt(e){e.Y=Date.now()+e.P,Pt(e,e.P)}function Pt(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=ft(y(e.eb,e),t)}function Nt(e){e.B&&(u.clearTimeout(e.B),e.B=null)}function Bt(e){0==e.l.G||e.I||vr(e.l,e)}function kt(e){Nt(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,ze(e.W),Je(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function Ft(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||_n(n.i,e)))if(n.I=e.N,!e.J&&_n(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(o){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;mr(n),rr(n)}fr(n),lt(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=ft(y(n.ab,n),6e3));if(1>=xn(n.i)&&n.ka){try{n.ka()}catch(o){}n.ka=void 0}}else yr(n,11)}else if((e.J||n.g==e)&&mr(n),!R(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var o=i[t];if(n.U=o[0],o=o[1],2==n.G)if("c"==o[0]){n.J=o[1],n.la=o[2];var a=o[3];null!=a&&(n.ma=a,n.h.info("VER="+n.ma));var s=o[4];null!=s&&(n.za=s,n.h.info("SVER="+n.za));var c=o[5];null!=c&&"number"===typeof c&&0<c&&(r=1.5*c,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var u=e.g;if(u){var l=u.g?u.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=r.i;!h.g&&(L(l,"spdy")||L(l,"quic")||L(l,"h2"))&&(h.j=h.l,h.g=new Set,h.h&&(Tn(h,h.h),h.h=null))}if(r.D){var f=u.g?u.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.sa=f,Zt(r.F,r.D,f))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms")),r=n;var d=e;if(r.oa=wr(r,r.H?r.la:null,r.W),d.J){An(r.i,d);var p=d,m=r.K;m&&p.setTimeout(m),p.B&&(Nt(p),Dt(p)),r.g=d}else hr(r);0<n.l.length&&ar(n)}else"stop"!=o[0]&&"close"!=o[0]||yr(n,7);else 3==n.G&&("stop"==o[0]||"close"==o[0]?"stop"==o[0]?yr(n,7):nr(n):"noop"!=o[0]&&n.j&&n.j.wa(o),n.A=0)}ct(4)}catch(o){}}function Ut(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"===typeof e)return e.split("");if(h(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}function Ht(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(h(e)||"string"===typeof e)A(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(h(e)||"string"===typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=Ut(e),i=r.length;for(var o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}}function jt(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof jt)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function Gt(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];Vt(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)r=e.g[t],Vt(i,r)||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function Vt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}a=_t.prototype,a.setTimeout=function(e){this.P=e},a.gb=function(e){e=e.target;var t=this.L;t&&3==Kn(e)?t.l():this.Ia(e)},a.Ia=function(e){try{if(e==this.g)e:{var t=Kn(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||q||this.g&&(this.h.h||this.g.ga()||Jn(this.g)))){this.I||4!=t||7==n||ct(8==n||0>=r?3:2),Nt(this);var i=this.g.ba();this.N=i;t:if(Ct(this)){var o=Jn(this.g);e="";var a=o.length,s=4==Kn(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){kt(this),Bt(this);var c="";break t}this.h.i=new u.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(o[n],{stream:s&&n==a-1});o.splice(0,a),this.h.g+=e,this.C=0,c=this.h.g}else c=this.g.ga();if(this.i=200==i,et(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var l,h=this.g;if((l=h.g?h.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(l)){var f=l;break t}}f=null}if(!(i=f)){this.i=!1,this.o=3,lt(12),kt(this),Bt(this);break e}tt(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Ft(this,i)}this.U?(It(this,t,c),q&&this.i&&3==t&&(Ke(this.V,this.W,"tick",this.fb),this.W.start())):(tt(this.j,this.m,c,null),Ft(this,c)),4==t&&kt(this),this.i&&!this.I&&(4==t?vr(this.l,this):(this.i=!1,Dt(this)))}else 400==i&&0<c.indexOf("Unknown SID")?(this.o=3,lt(12)):(this.o=0,lt(13)),kt(this),Bt(this)}}}catch(t){}},a.fb=function(){if(this.g){var e=Kn(this.g),t=this.g.ga();this.C<t.length&&(Nt(this),It(this,e,t),this.i&&4!=e&&Dt(this))}},a.cancel=function(){this.I=!0,kt(this)},a.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(nt(this.j,this.A),2!=this.K&&(ct(3),lt(17)),kt(this),this.o=2,Bt(this)):Pt(this,this.Y-e)},a=jt.prototype,a.R=function(){Gt(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},a.T=function(){return Gt(this),this.g.concat()},a.get=function(e,t){return Vt(this.h,e)?this.h[e]:t},a.set=function(e,t){Vt(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},a.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);e.call(t,o,i,this)}};var zt=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Wt(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function qt(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof qt){this.g=void 0!==t?t:e.g,Xt(this,e.j),this.s=e.s,Qt(this,e.i),Kt(this,e.m),this.l=e.l,t=e.h;var n=new hn;n.i=t.i,t.g&&(n.g=new jt(t.g),n.h=t.h),Jt(this,n),this.o=e.o}else e&&(n=String(e).match(zt))?(this.g=!!t,Xt(this,n[1]||"",!0),this.s=nn(n[2]||""),Qt(this,n[3]||"",!0),Kt(this,n[4]),this.l=nn(n[5]||"",!0),Jt(this,n[6]||"",!0),this.o=nn(n[7]||"")):(this.g=!!t,this.h=new hn(null,this.g))}function Yt(e){return new qt(e)}function Xt(e,t,n){e.j=n?nn(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Qt(e,t,n){e.i=n?nn(t,!0):t}function Kt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Jt(e,t,n){t instanceof hn?(e.h=t,gn(e.h,e.g)):(n||(t=rn(t,un)),e.h=new hn(t,e.g))}function Zt(e,t,n){e.h.set(t,n)}function $t(e){return Zt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function en(e){return e instanceof qt?Yt(e):new qt(e,void 0)}function tn(e,t,n,r){var i=new qt(null,void 0);return e&&Xt(i,e),t&&Qt(i,t),n&&Kt(i,n),r&&(i.l=r),i}function nn(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function rn(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,on),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function on(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(15&e).toString(16)}qt.prototype.toString=function(){var e=[],t=this.j;t&&e.push(rn(t,an,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(rn(t,an,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,null!=n&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(rn(n,"/"==n.charAt(0)?cn:sn,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",rn(n,ln)),e.join("")};var an=/[#\/\?@]/g,sn=/[#\?:]/g,cn=/[#\?]/g,un=/[#\?@]/g,ln=/#/g;function hn(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function fn(e){e.g||(e.g=new jt,e.h=0,e.i&&Wt(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function dn(e,t){fn(e),t=vn(e,t),Vt(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,e=e.g,Vt(e.h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&Gt(e)))}function pn(e,t){return fn(e),t=vn(e,t),Vt(e.g.h,t)}function mn(e,t,n){dn(e,t),0<n.length&&(e.i=null,e.g.set(vn(e,t),O(n)),e.h+=n.length)}function vn(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function gn(e,t){t&&!e.j&&(fn(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(dn(this,t),mn(this,n,e))}),e)),e.j=t}a=hn.prototype,a.add=function(e,t){fn(this),this.i=null,e=vn(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},a.forEach=function(e,t){fn(this),this.g.forEach((function(n,r){A(n,(function(n){e.call(t,n,r,this)}),this)}),this)},a.T=function(){fn(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],o=0;o<i.length;o++)n.push(t[r]);return n},a.R=function(e){fn(this);var t=[];if("string"===typeof e)pn(this,e)&&(t=M(t,this.g.get(vn(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=M(t,e[n])}return t},a.set=function(e,t){return fn(this),this.i=null,e=vn(this,e),pn(this,e)&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},a.get=function(e,t){return e?(e=this.R(e),0<e.length?String(e[0]):t):t},a.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),e.push(a)}}return this.i=e.join("&")};var yn=function(){function e(e,t){this.h=e,this.g=t}return e}();function bn(e){this.l=e||wn,u.PerformanceNavigationTiming?(e=u.performance.getEntriesByType("navigation"),e=0<e.length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol)):e=!!(u.g&&u.g.Ea&&u.g.Ea()&&u.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var wn=10;function En(e){return!!e.h||!!e.g&&e.g.size>=e.j}function xn(e){return e.h?1:e.g?e.g.size:0}function _n(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Tn(e,t){e.g?e.g.add(t):e.h=t}function An(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Sn(e){var t,n;if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var r=e.i;try{for(var i=o(e.g.values()),a=i.next();!a.done;a=i.next()){var s=a.value;r=r.concat(s.D)}}catch(c){t={error:c}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}return O(e.i)}function Mn(){}function On(){this.g=new Mn}function Rn(e,t,n){var r=n||"";try{Ht(e,(function(e,n){var i=e;f(e)&&(i=Ie(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Cn(e,t){var n=new Ze;if(u.Image){var r=new Image;r.onload=b(In,n,r,"TestLoadImage: loaded",!0,t),r.onerror=b(In,n,r,"TestLoadImage: error",!1,t),r.onabort=b(In,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=b(In,n,r,"TestLoadImage: timeout",!1,t),u.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}function In(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(o){}}function Ln(e){this.l=e.$b||null,this.j=e.ib||!1}function Dn(e,t){Oe.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=Pn,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}bn.prototype.cancel=function(){var e,t;if(this.i=Sn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){try{for(var n=o(this.g.values()),r=n.next();!r.done;r=n.next()){var i=r.value;i.cancel()}}catch(a){e={error:a}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}this.g.clear()}},Mn.prototype.stringify=function(e){return u.JSON.stringify(e,void 0)},Mn.prototype.parse=function(e){return u.JSON.parse(e,void 0)},w(Ln,mt),Ln.prototype.g=function(){return new Dn(this.l,this.j)},Ln.prototype.i=function(e){return function(){return e}}({}),w(Dn,Oe);var Pn=0;function Nn(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function Bn(e){e.readyState=4,e.l=null,e.j=null,e.A=null,kn(e)}function kn(e){e.onreadystatechange&&e.onreadystatechange.call(e)}a=Dn.prototype,a.open=function(e,t){if(this.readyState!=Pn)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,kn(this)},a.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||u).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},a.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Bn(this)),this.readyState=Pn},a.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,kn(this)),this.g&&(this.readyState=3,kn(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if("undefined"!==typeof u.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Nn(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},a.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Bn(this):kn(this),3==this.readyState&&Nn(this)}},a.Ua=function(e){this.g&&(this.response=this.responseText=e,Bn(this))},a.Ta=function(e){this.g&&(this.response=e,Bn(this))},a.ha=function(){this.g&&Bn(this)},a.setRequestHeader=function(e,t){this.v.append(e,t)},a.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},a.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Dn.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Fn=u.JSON.parse;function Un(e){Oe.call(this),this.headers=new jt,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Hn,this.K=this.L=!1}w(Un,Oe);var Hn="",jn=/^https?$/i,Gn=["POST","PUT"];function Vn(e){return z&&te()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}function zn(e){return"content-type"==e.toLowerCase()}function Wn(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,qn(e),Xn(e)}function qn(e){e.D||(e.D=!0,Re(e,"complete"),Re(e,"error"))}function Yn(e){if(e.h&&"undefined"!=typeof c&&(!e.C[1]||4!=Kn(e)||2!=e.ba()))if(e.v&&4==Kn(e))We(e.Fa,0,e);else if(Re(e,"readystatechange"),4==Kn(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var o=String(e.H).match(zt)[1]||null;if(!o&&u.self&&u.self.location){var a=u.self.location.protocol;o=a.substr(0,a.length-1)}i=!jn.test(o?o.toLowerCase():"")}t=i}if(t)Re(e,"complete"),Re(e,"success");else{e.m=6;try{var s=2<Kn(e)?e.g.statusText:""}catch(l){s=""}e.j=s+" ["+e.ba()+"]",qn(e)}}finally{Xn(e)}}}function Xn(e,t){if(e.g){Qn(e);var n=e.g,r=e.C[0]?l:null;e.g=null,e.C=null,t||Re(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function Qn(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(u.clearTimeout(e.A),e.A=null)}function Kn(e){return e.g?e.g.readyState:0}function Jn(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case Hn:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Zn(e){var t="";return B(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function $n(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Zn(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Zt(e,t,n))}function er(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function tr(e){this.za=0,this.l=[],this.h=new Ze,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=er("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=er("baseRetryDelayMs",5e3,e),this.$a=er("retryDelaySeedMs",1e4,e),this.Ya=er("forwardChannelMaxRetries",2,e),this.ra=er("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new bn(e&&e.concurrentRequestLimit),this.Ca=new On,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function nr(e){if(ir(e),3==e.G){var t=e.V++,n=Yt(e.F);Zt(n,"SID",e.J),Zt(n,"RID",t),Zt(n,"TYPE","terminate"),ur(e,n),t=new _t(e,e.h,t,void 0),t.K=2,t.v=$t(Yt(n)),n=!1,u.navigator&&u.navigator.sendBeacon&&(n=u.navigator.sendBeacon(t.v.toString(),"")),!n&&u.Image&&((new Image).src=t.v,n=!0),n||(t.g=Er(t.l,null),t.g.ea(t.v)),t.F=Date.now(),Dt(t)}br(e)}function rr(e){e.g&&(dr(e),e.g.cancel(),e.g=null)}function ir(e){rr(e),e.u&&(u.clearTimeout(e.u),e.u=null),mr(e),e.i.cancel(),e.m&&("number"===typeof e.m&&u.clearTimeout(e.m),e.m=null)}function or(e,t){e.l.push(new yn(e.Za++,t)),3==e.G&&ar(e)}function ar(e){En(e.i)||e.m||(e.m=!0,Fe(e.Ha,e),e.C=0)}function sr(e,t){return!(xn(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.l=t.D.concat(e.l),!0):!(1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya))&&(e.m=ft(y(e.Ha,e,t),gr(e,e.C)),e.C++,!0))}function cr(e,t){var n;n=t?t.m:e.V++;var r=Yt(e.F);Zt(r,"SID",e.J),Zt(r,"RID",n),Zt(r,"AID",e.U),ur(e,r),e.o&&e.s&&$n(r,e.o,e.s),n=new _t(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=lr(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),Tn(e.i,n),Ot(n,r,t)}function ur(e,t){e.j&&Ht({},(function(e,n){Zt(t,n,e)}))}function lr(e,t,n){n=Math.min(e.l.length,n);var r=e.j?y(e.j.Oa,e.j,e):null;e:for(var i=e.l,o=-1;;){var a=["count="+n];-1==o?0<n?(o=i[0].h,a.push("ofs="+o)):o=0:a.push("ofs="+o);for(var s=!0,c=0;c<n;c++){var u=i[c].h,l=i[c].g;if(u-=o,0>u)o=Math.max(0,i[c].h-100),s=!1;else try{Rn(l,a,"req"+u+"_")}catch(h){r&&r(l)}}if(s){r=a.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function hr(e){e.g||e.u||(e.Y=1,Fe(e.Ga,e),e.A=0)}function fr(e){return!(e.g||e.u||3<=e.A)&&(e.Y++,e.u=ft(y(e.Ga,e),gr(e,e.A)),e.A++,!0)}function dr(e){null!=e.B&&(u.clearTimeout(e.B),e.B=null)}function pr(e){e.g=new _t(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=Yt(e.oa);Zt(t,"RID","rpc"),Zt(t,"SID",e.J),Zt(t,"CI",e.N?"0":"1"),Zt(t,"AID",e.U),ur(e,t),Zt(t,"TYPE","xmlhttp"),e.o&&e.s&&$n(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=$t(Yt(t)),n.s=null,n.U=!0,Rt(n,e)}function mr(e){null!=e.v&&(u.clearTimeout(e.v),e.v=null)}function vr(e,t){var n=null;if(e.g==t){mr(e),dr(e),e.g=null;var r=2}else{if(!_n(e.i,t))return;n=t.D,An(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;r=at(),Re(r,new ht(r,n,t,i)),ar(e)}else hr(e);else if(i=t.o,3==i||0==i&&0<e.I||!(1==r&&sr(e,t)||2==r&&fr(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:yr(e,5);break;case 4:yr(e,10);break;case 3:yr(e,6);break;default:yr(e,2)}}function gr(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function yr(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=y(e.jb,e);n||(n=new qt("//www.google.com/images/cleardot.gif"),u.location&&"http"==u.location.protocol||Xt(n,"https"),$t(n)),Cn(n.toString(),r)}else lt(2);e.G=0,e.j&&e.j.va(t),br(e),ir(e)}function br(e){e.G=0,e.I=-1,e.j&&(0==Sn(e.i).length&&0==e.l.length||(e.i.i.length=0,O(e.l),e.l.length=0),e.j.ua())}function wr(e,t,n){var r=en(n);if(""!=r.i)t&&Qt(r,t+"."+r.i),Kt(r,r.m);else{var i=u.location;r=tn(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&B(e.aa,(function(e,t){Zt(r,t,e)})),t=e.D,n=e.sa,t&&n&&Zt(r,t,n),Zt(r,"VER",e.ma),ur(e,r),r}function Er(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return t=n&&e.Ba&&!e.qa?new Un(new Ln({ib:!0})):new Un(e.qa),t.L=e.H,t}function xr(){}function _r(){if(z&&!(10<=Number(re)))throw Error("Environmental error: no available transport.")}function Tr(e,t){Oe.call(this),this.g=new tr(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!R(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!R(t)&&(this.g.D=t,e=this.h,null!==e&&t in e&&(e=this.h,t in e&&delete e[t])),this.j=new Mr(this)}function Ar(e){wt.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Sr(){Et.call(this),this.status=1}function Mr(e){this.g=e}a=Un.prototype,a.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():yt.g(),this.C=this.u?vt(this.u):vt(yt),this.g.onreadystatechange=y(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(o){return void Wn(this,o)}e=n||"";var i=new jt(this.headers);r&&Ht(r,(function(e,t){i.set(t,e)})),r=S(i.T()),n=u.FormData&&e instanceof u.FormData,!(0<=T(Gn,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Qn(this),0<this.B&&((this.K=Vn(this.g))?(this.g.timeout=this.B,this.g.ontimeout=y(this.pa,this)):this.A=We(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(o){Wn(this,o)}},a.pa=function(){"undefined"!=typeof c&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Re(this,"timeout"),this.abort(8))},a.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Re(this,"complete"),Re(this,"abort"),Xn(this))},a.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Xn(this,!0)),Un.Z.M.call(this)},a.Fa=function(){this.s||(this.F||this.v||this.l?Yn(this):this.cb())},a.cb=function(){Yn(this)},a.ba=function(){try{return 2<Kn(this)?this.g.status:-1}catch(e){return-1}},a.ga=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},a.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Fn(t)}},a.Da=function(){return this.m},a.La=function(){return"string"===typeof this.j?this.j:String(this.j)},a=tr.prototype,a.ma=8,a.G=1,a.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(t){}},a.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new _t(this,this.h,e,void 0),n=this.s;if(this.P&&(n?(n=k(n),U(n,this.P)):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var o=this.l[i];if(o="__data__"in o.g&&(o=o.g.__data__,"string"===typeof o)?o.length:void 0,void 0===o)break;if(r+=o,4096<r){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=lr(this,t,r),i=Yt(this.F),Zt(i,"RID",e),Zt(i,"CVER",22),this.D&&Zt(i,"X-HTTP-Session-Id",this.D),ur(this,i),this.o&&n&&$n(i,this.o,n),Tn(this.i,t),this.Ra&&Zt(i,"TYPE","init"),this.ja?(Zt(i,"$req",r),Zt(i,"SID","null"),t.$=!0,Ot(t,i,null)):Ot(t,i,r),this.G=2}}else 3==this.G&&(e?cr(this,e):0==this.l.length||En(this.i)||cr(this))},a.Ga=function(){if(this.u=null,pr(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=ft(y(this.bb,this),e)}},a.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,lt(10),rr(this),pr(this))},a.ab=function(){null!=this.v&&(this.v=null,rr(this),fr(this),lt(19))},a.jb=function(e){e?(this.h.info("Successfully pinged google.com"),lt(2)):(this.h.info("Failed to ping google.com"),lt(1))},a=xr.prototype,a.xa=function(){},a.wa=function(){},a.va=function(){},a.ua=function(){},a.Oa=function(){},_r.prototype.g=function(e,t){return new Tr(e,t)},w(Tr,Oe),Tr.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),Fe(y(e.hb,e,t))),lt(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=wr(e,null,e.W),ar(e)},Tr.prototype.close=function(){nr(this.g)},Tr.prototype.u=function(e){if("string"===typeof e){var t={};t.__data__=e,or(this.g,t)}else this.v?(t={},t.__data__=Ie(e),or(this.g,t)):or(this.g,e)},Tr.prototype.M=function(){this.g.j=null,delete this.j,nr(this.g),delete this.g,Tr.Z.M.call(this)},w(Ar,wt),w(Sr,Et),w(Mr,xr),Mr.prototype.xa=function(){Re(this.g,"a")},Mr.prototype.wa=function(e){Re(this.g,new Ar(e))},Mr.prototype.va=function(e){Re(this.g,new Sr(e))},Mr.prototype.ua=function(){Re(this.g,"b")},_r.prototype.createWebChannel=_r.prototype.g,Tr.prototype.send=Tr.prototype.u,Tr.prototype.open=Tr.prototype.m,Tr.prototype.close=Tr.prototype.close,dt.NO_ERROR=0,dt.TIMEOUT=8,dt.HTTP_ERROR=6,pt.COMPLETE="complete",gt.EventType=bt,bt.OPEN="a",bt.CLOSE="b",bt.ERROR="c",bt.MESSAGE="d",Oe.prototype.listen=Oe.prototype.N,Un.prototype.listenOnce=Un.prototype.O,Un.prototype.getLastError=Un.prototype.La,Un.prototype.getLastErrorCode=Un.prototype.Da,Un.prototype.getStatus=Un.prototype.ba,Un.prototype.getResponseJson=Un.prototype.Qa,Un.prototype.getResponseText=Un.prototype.ga,Un.prototype.send=Un.prototype.ea;var Or=function(){return new _r},Rr=function(){return at()},Cr=dt,Ir=pt,Lr=it,Dr={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Pr=Ln,Nr=gt,Br=Un}).call(this,n("c8ba"))},c8ba:function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"===typeof window&&(n=window)}e.exports=n},ca84:function(e,t,n){var r=n("e330"),i=n("1a2d"),o=n("fc6a"),a=n("4d64").indexOf,s=n("d012"),c=r([].push);e.exports=function(e,t){var n,r=o(e),u=0,l=[];for(n in r)!i(s,n)&&i(r,n)&&c(l,n);while(t.length>u)i(r,n=t[u++])&&(~a(l,n)||c(l,n));return l}},cc12:function(e,t,n){var r=n("da84"),i=n("861d"),o=r.document,a=i(o)&&i(o.createElement);e.exports=function(e){return a?o.createElement(e):{}}},cc84:function(e,t,n){"use strict";
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var r=function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)};Object.create;Object.create;var i,o,a=n("a8e9"),s=n("ffa6"),c=n("abfd"),u=(i={},i["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",i["bad-app-name"]="Illegal App name: '{$appName}",i["duplicate-app"]="Firebase App named '{$appName}' already exists",i["app-deleted"]="Firebase App named '{$appName}' already deleted",i["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",i["invalid-log-argument"]="First argument to `onLog` must be null or a function.",i),l=new a["b"]("app","Firebase",u),h="@firebase/app",f="0.6.30",d="@firebase/analytics",p="@firebase/app-check",m="@firebase/auth",v="@firebase/database",g="@firebase/functions",y="@firebase/installations",b="@firebase/messaging",w="@firebase/performance",E="@firebase/remote-config",x="@firebase/storage",_="@firebase/firestore",T="firebase-wrapper",A="[DEFAULT]",S=(o={},o[h]="fire-core",o[d]="fire-analytics",o[p]="fire-app-check",o[m]="fire-auth",o[v]="fire-rtdb",o[g]="fire-fn",o[y]="fire-iid",o[b]="fire-fcm",o[w]="fire-perf",o[E]="fire-rc",o[x]="fire-gcs",o[_]="fire-fst",o["fire-js"]="fire-js",o[T]="fire-js-all",o),M=new c["b"]("@firebase/app"),O=function(){function e(e,t,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=t.name,this.automaticDataCollectionEnabled_=t.automaticDataCollectionEnabled||!1,this.options_=Object(a["g"])(e),this.container=new s["b"](t.name),this._addComponent(new s["a"]("app",(function(){return r}),"PUBLIC")),this.firebase_.INTERNAL.components.forEach((function(e){return r._addComponent(e)}))}return Object.defineProperty(e.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(e){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),e.prototype.delete=function(){var e=this;return new Promise((function(t){e.checkDestroyed_(),t()})).then((function(){return e.firebase_.INTERNAL.removeApp(e.name_),Promise.all(e.container.getProviders().map((function(e){return e.delete()})))})).then((function(){e.isDeleted_=!0}))},e.prototype._getService=function(e,t){var n;void 0===t&&(t=A),this.checkDestroyed_();var r=this.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:t})},e.prototype._removeServiceInstance=function(e,t){void 0===t&&(t=A),this.container.getProvider(e).clearInstance(t)},e.prototype._addComponent=function(e){try{this.container.addComponent(e)}catch(t){M.debug("Component "+e.name+" failed to register with FirebaseApp "+this.name,t)}},e.prototype._addOrOverwriteComponent=function(e){this.container.addOrOverwriteComponent(e)},e.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},e.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},e}();O.prototype.name&&O.prototype.options||O.prototype.delete||console.log("dc");var R="8.10.0";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C(e){var t={},n=new Map,r={__esModule:!0,initializeApp:u,app:o,registerVersion:d,setLogLevel:c["c"],onLog:p,apps:null,SDK_VERSION:R,INTERNAL:{registerComponent:f,removeApp:i,components:n,useAsService:m}};function i(e){delete t[e]}function o(e){if(e=e||A,!Object(a["d"])(t,e))throw l.create("no-app",{appName:e});return t[e]}function u(n,i){if(void 0===i&&(i={}),"object"!==typeof i||null===i){var o=i;i={name:o}}var s=i;void 0===s.name&&(s.name=A);var c=s.name;if("string"!==typeof c||!c)throw l.create("bad-app-name",{appName:String(c)});if(Object(a["d"])(t,c))throw l.create("duplicate-app",{appName:c});var u=new e(n,s,r);return t[c]=u,u}function h(){return Object.keys(t).map((function(e){return t[e]}))}function f(i){var s=i.name;if(n.has(s))return M.debug("There were multiple attempts to register component "+s+"."),"PUBLIC"===i.type?r[s]:null;if(n.set(s,i),"PUBLIC"===i.type){var c=function(e){if(void 0===e&&(e=o()),"function"!==typeof e[s])throw l.create("invalid-app-argument",{appName:s});return e[s]()};void 0!==i.serviceProps&&Object(a["h"])(c,i.serviceProps),r[s]=c,e.prototype[s]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this._getService.bind(this,s);return n.apply(this,i.multipleInstances?e:[])}}for(var u=0,h=Object.keys(t);u<h.length;u++){var f=h[u];t[f]._addComponent(i)}return"PUBLIC"===i.type?r[s]:null}function d(e,t,n){var r,i=null!==(r=S[e])&&void 0!==r?r:e;n&&(i+="-"+n);var o=i.match(/\s|\//),a=t.match(/\s|\//);if(o||a){var c=['Unable to register library "'+i+'" with version "'+t+'":'];return o&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),o&&a&&c.push("and"),a&&c.push('version name "'+t+'" contains illegal characters (whitespace or "/")'),void M.warn(c.join(" "))}f(new s["a"](i+"-version",(function(){return{library:i,version:t}}),"VERSION"))}function p(e,t){if(null!==e&&"function"!==typeof e)throw l.create("invalid-log-argument");Object(c["d"])(e,t)}function m(e,t){if("serverAuth"===t)return null;var n=t;return n}return r["default"]=r,Object.defineProperty(r,"apps",{get:h}),o["App"]=e,r}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I(){var e=C(O);function t(t){Object(a["h"])(e,t)}return e.INTERNAL=r(r({},e.INTERNAL),{createFirebaseNamespace:I,extendNamespace:t,createSubscribe:a["f"],ErrorFactory:a["b"],deepExtend:a["h"]}),e}var L=I(),D=function(){function e(e){this.container=e}return e.prototype.getPlatformInfoString=function(){var e=this.container.getProviders();return e.map((function(e){if(P(e)){var t=e.getImmediate();return t.library+"/"+t.version}return null})).filter((function(e){return e})).join(" ")},e}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N(e,t){e.INTERNAL.registerComponent(new s["a"]("platform-logger",(function(e){return new D(e)}),"PRIVATE")),e.registerVersion(h,f,t),e.registerVersion("fire-js","")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */if(Object(a["k"])()&&void 0!==self.firebase){M.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var B=self.firebase.SDK_VERSION;B&&B.indexOf("LITE")>=0&&M.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var k=L.initializeApp;L.initializeApp=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Object(a["p"])()&&M.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),k.apply(void 0,e)};var F=L;N(F);t["a"]=F},cca6:function(e,t,n){var r=n("23e7"),i=n("60da");r({target:"Object",stat:!0,forced:Object.assign!==i},{assign:i})},cdf9:function(e,t,n){var r=n("825a"),i=n("861d"),o=n("f069");e.exports=function(e,t){if(r(e),i(t)&&t.constructor===e)return t;var n=o.f(e),a=n.resolve;return a(t),n.promise}},ce4e:function(e,t,n){var r=n("da84"),i=Object.defineProperty;e.exports=function(e,t){try{i(r,e,{value:t,configurable:!0,writable:!0})}catch(n){r[e]=t}return t}},d012:function(e,t){e.exports={}},d039:function(e,t){e.exports=function(e){try{return!!e()}catch(t){return!0}}},d066:function(e,t,n){var r=n("da84"),i=n("1626"),o=function(e){return i(e)?e:void 0};e.exports=function(e,t){return arguments.length<2?o(r[e]):r[e]&&r[e][t]}},d1e7:function(e,t,n){"use strict";var r={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,o=i&&!r.call({1:2},1);t.f=o?function(e){var t=i(this,e);return!!t&&t.enumerable}:r},d2bb:function(e,t,n){var r=n("e330"),i=n("825a"),o=n("3bbe");e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{e=r(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set),e(n,[]),t=n instanceof Array}catch(a){}return function(n,r){return i(n),o(r),t?e(n,r):n.__proto__=r,n}}():void 0)},d3b7:function(e,t,n){var r=n("00ee"),i=n("6eeb"),o=n("b041");r||i(Object.prototype,"toString",o,{unsafe:!0})},d44e:function(e,t,n){var r=n("9bf2").f,i=n("1a2d"),o=n("b622"),a=o("toStringTag");e.exports=function(e,t,n){e&&!n&&(e=e.prototype),e&&!i(e,a)&&r(e,a,{configurable:!0,value:t})}},d4c3:function(e,t,n){var r=n("342f"),i=n("da84");e.exports=/ipad|iphone|ipod/i.test(r)&&void 0!==i.Pebble},d9b5:function(e,t,n){var r=n("da84"),i=n("d066"),o=n("1626"),a=n("3a9b"),s=n("fdbf"),c=r.Object;e.exports=s?function(e){return"symbol"==typeof e}:function(e){var t=i("Symbol");return o(t)&&a(t.prototype,c(e))}},da84:function(e,t,n){(function(t){var n=function(e){return e&&e.Math==Math&&e};e.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof t&&t)||function(){return this}()||Function("return this")()}).call(this,n("c8ba"))},dc4a:function(e,t,n){var r=n("59ed");e.exports=function(e,t){var n=e[t];return null==n?void 0:r(n)}},df75:function(e,t,n){var r=n("ca84"),i=n("7839");e.exports=Object.keys||function(e){return r(e,i)}},df7c:function(e,t,n){(function(e){function n(e,t){for(var n=0,r=e.length-1;r>=0;r--){var i=e[r];"."===i?e.splice(r,1):".."===i?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}function r(e){"string"!==typeof e&&(e+="");var t,n=0,r=-1,i=!0;for(t=e.length-1;t>=0;--t)if(47===e.charCodeAt(t)){if(!i){n=t+1;break}}else-1===r&&(i=!1,r=t+1);return-1===r?"":e.slice(n,r)}function i(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}t.resolve=function(){for(var t="",r=!1,o=arguments.length-1;o>=-1&&!r;o--){var a=o>=0?arguments[o]:e.cwd();if("string"!==typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(t=a+"/"+t,r="/"===a.charAt(0))}return t=n(i(t.split("/"),(function(e){return!!e})),!r).join("/"),(r?"/":"")+t||"."},t.normalize=function(e){var r=t.isAbsolute(e),a="/"===o(e,-1);return e=n(i(e.split("/"),(function(e){return!!e})),!r).join("/"),e||r||(e="."),e&&a&&(e+="/"),(r?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(i(e,(function(e,t){if("string"!==typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))},t.relative=function(e,n){function r(e){for(var t=0;t<e.length;t++)if(""!==e[t])break;for(var n=e.length-1;n>=0;n--)if(""!==e[n])break;return t>n?[]:e.slice(t,n-t+1)}e=t.resolve(e).substr(1),n=t.resolve(n).substr(1);for(var i=r(e.split("/")),o=r(n.split("/")),a=Math.min(i.length,o.length),s=a,c=0;c<a;c++)if(i[c]!==o[c]){s=c;break}var u=[];for(c=s;c<i.length;c++)u.push("..");return u=u.concat(o.slice(s)),u.join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){if("string"!==typeof e&&(e+=""),0===e.length)return".";for(var t=e.charCodeAt(0),n=47===t,r=-1,i=!0,o=e.length-1;o>=1;--o)if(t=e.charCodeAt(o),47===t){if(!i){r=o;break}}else i=!1;return-1===r?n?"/":".":n&&1===r?"/":e.slice(0,r)},t.basename=function(e,t){var n=r(e);return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},t.extname=function(e){"string"!==typeof e&&(e+="");for(var t=-1,n=0,r=-1,i=!0,o=0,a=e.length-1;a>=0;--a){var s=e.charCodeAt(a);if(47!==s)-1===r&&(i=!1,r=a+1),46===s?-1===t?t=a:1!==o&&(o=1):-1!==t&&(o=-1);else if(!i){n=a+1;break}}return-1===t||-1===r||0===o||1===o&&t===r-1&&t===n+1?"":e.slice(t,r)};var o="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return t<0&&(t=e.length+t),e.substr(t,n)}}).call(this,n("4362"))},e163:function(e,t,n){var r=n("da84"),i=n("1a2d"),o=n("1626"),a=n("7b0b"),s=n("f772"),c=n("e177"),u=s("IE_PROTO"),l=r.Object,h=l.prototype;e.exports=c?l.getPrototypeOf:function(e){var t=a(e);if(i(t,u))return t[u];var n=t.constructor;return o(n)&&t instanceof n?n.prototype:t instanceof l?h:null}},e177:function(e,t,n){var r=n("d039");e.exports=!r((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},e260:function(e,t,n){"use strict";var r=n("fc6a"),i=n("44d2"),o=n("3f8c"),a=n("69f3"),s=n("9bf2").f,c=n("7dd0"),u=n("c430"),l=n("83ab"),h="Array Iterator",f=a.set,d=a.getterFor(h);e.exports=c(Array,"Array",(function(e,t){f(this,{type:h,target:r(e),index:0,kind:t})}),(function(){var e=d(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:t[r],done:!1}:{value:[r,t[r]],done:!1}}),"values");var p=o.Arguments=o.Array;if(i("keys"),i("values"),i("entries"),!u&&l&&"values"!==p.name)try{s(p,"name",{value:"values"})}catch(m){}},e2cc:function(e,t,n){var r=n("6eeb");e.exports=function(e,t,n){for(var i in t)r(e,i,t[i],n);return e}},e330:function(e,t){var n=Function.prototype,r=n.bind,i=n.call,o=r&&r.bind(i);e.exports=r?function(e){return e&&o(i,e)}:function(e){return e&&function(){return i.apply(e,arguments)}}},e667:function(e,t){e.exports=function(e){try{return{error:!1,value:e()}}catch(t){return{error:!0,value:t}}}},e6cf:function(e,t,n){"use strict";var r,i,o,a,s=n("23e7"),c=n("c430"),u=n("da84"),l=n("d066"),h=n("c65b"),f=n("fea9"),d=n("6eeb"),p=n("e2cc"),m=n("d2bb"),v=n("d44e"),g=n("2626"),y=n("59ed"),b=n("1626"),w=n("861d"),E=n("19aa"),x=n("8925"),_=n("2266"),T=n("1c7e"),A=n("4840"),S=n("2cf4").set,M=n("b575"),O=n("cdf9"),R=n("44de"),C=n("f069"),I=n("e667"),L=n("01b4"),D=n("69f3"),P=n("94ca"),N=n("b622"),B=n("6069"),k=n("605d"),F=n("2d00"),U=N("species"),H="Promise",j=D.getterFor(H),G=D.set,V=D.getterFor(H),z=f&&f.prototype,W=f,q=z,Y=u.TypeError,X=u.document,Q=u.process,K=C.f,J=K,Z=!!(X&&X.createEvent&&u.dispatchEvent),$=b(u.PromiseRejectionEvent),ee="unhandledrejection",te="rejectionhandled",ne=0,re=1,ie=2,oe=1,ae=2,se=!1,ce=P(H,(function(){var e=x(W),t=e!==String(W);if(!t&&66===F)return!0;if(c&&!q["finally"])return!0;if(F>=51&&/native code/.test(e))return!1;var n=new W((function(e){e(1)})),r=function(e){e((function(){}),(function(){}))},i=n.constructor={};return i[U]=r,se=n.then((function(){}))instanceof r,!se||!t&&B&&!$})),ue=ce||!T((function(e){W.all(e)["catch"]((function(){}))})),le=function(e){var t;return!(!w(e)||!b(t=e.then))&&t},he=function(e,t){var n,r,i,o=t.value,a=t.state==re,s=a?e.ok:e.fail,c=e.resolve,u=e.reject,l=e.domain;try{s?(a||(t.rejection===ae&&ve(t),t.rejection=oe),!0===s?n=o:(l&&l.enter(),n=s(o),l&&(l.exit(),i=!0)),n===e.promise?u(Y("Promise-chain cycle")):(r=le(n))?h(r,n,c,u):c(n)):u(o)}catch(f){l&&!i&&l.exit(),u(f)}},fe=function(e,t){e.notified||(e.notified=!0,M((function(){var n,r=e.reactions;while(n=r.get())he(n,e);e.notified=!1,t&&!e.rejection&&pe(e)})))},de=function(e,t,n){var r,i;Z?(r=X.createEvent("Event"),r.promise=t,r.reason=n,r.initEvent(e,!1,!0),u.dispatchEvent(r)):r={promise:t,reason:n},!$&&(i=u["on"+e])?i(r):e===ee&&R("Unhandled promise rejection",n)},pe=function(e){h(S,u,(function(){var t,n=e.facade,r=e.value,i=me(e);if(i&&(t=I((function(){k?Q.emit("unhandledRejection",r,n):de(ee,n,r)})),e.rejection=k||me(e)?ae:oe,t.error))throw t.value}))},me=function(e){return e.rejection!==oe&&!e.parent},ve=function(e){h(S,u,(function(){var t=e.facade;k?Q.emit("rejectionHandled",t):de(te,t,e.value)}))},ge=function(e,t,n){return function(r){e(t,r,n)}},ye=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=ie,fe(e,!0))},be=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw Y("Promise can't be resolved itself");var r=le(t);r?M((function(){var n={done:!1};try{h(r,t,ge(be,n,e),ge(ye,n,e))}catch(i){ye(n,i,e)}})):(e.value=t,e.state=re,fe(e,!1))}catch(i){ye({done:!1},i,e)}}};if(ce&&(W=function(e){E(this,q),y(e),h(r,this);var t=j(this);try{e(ge(be,t),ge(ye,t))}catch(n){ye(t,n)}},q=W.prototype,r=function(e){G(this,{type:H,done:!1,notified:!1,parent:!1,reactions:new L,rejection:!1,state:ne,value:void 0})},r.prototype=p(q,{then:function(e,t){var n=V(this),r=K(A(this,W));return n.parent=!0,r.ok=!b(e)||e,r.fail=b(t)&&t,r.domain=k?Q.domain:void 0,n.state==ne?n.reactions.add(r):M((function(){he(r,n)})),r.promise},catch:function(e){return this.then(void 0,e)}}),i=function(){var e=new r,t=j(e);this.promise=e,this.resolve=ge(be,t),this.reject=ge(ye,t)},C.f=K=function(e){return e===W||e===o?new i(e):J(e)},!c&&b(f)&&z!==Object.prototype)){a=z.then,se||(d(z,"then",(function(e,t){var n=this;return new W((function(e,t){h(a,n,e,t)})).then(e,t)}),{unsafe:!0}),d(z,"catch",q["catch"],{unsafe:!0}));try{delete z.constructor}catch(we){}m&&m(z,q)}s({global:!0,wrap:!0,forced:ce},{Promise:W}),v(W,H,!1,!0),g(H),o=l(H),s({target:H,stat:!0,forced:ce},{reject:function(e){var t=K(this);return h(t.reject,void 0,e),t.promise}}),s({target:H,stat:!0,forced:c||ce},{resolve:function(e){return O(c&&this===o?W:this,e)}}),s({target:H,stat:!0,forced:ue},{all:function(e){var t=this,n=K(t),r=n.resolve,i=n.reject,o=I((function(){var n=y(t.resolve),o=[],a=0,s=1;_(e,(function(e){var c=a++,u=!1;s++,h(n,t,e).then((function(e){u||(u=!0,o[c]=e,--s||r(o))}),i)})),--s||r(o)}));return o.error&&i(o.value),n.promise},race:function(e){var t=this,n=K(t),r=n.reject,i=I((function(){var i=y(t.resolve);_(e,(function(e){h(i,t,e).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}})},e71f:function(e,t,n){"use strict";n.r(t);var r=n("cc84"),i=n("a6a6"),o=n("ffa6"),a=(n("a8e9"),n("abfd"),n("c7b2"),{Firestore:i["f"],GeoPoint:i["a"],Timestamp:i["c"],Blob:i["j"],Transaction:i["k"],WriteBatch:i["g"],DocumentReference:i["r"],DocumentSnapshot:i["h"],Query:i["q"],QueryDocumentSnapshot:i["i"],QuerySnapshot:i["l"],CollectionReference:i["p"],FieldPath:i["o"],FieldValue:i["m"],setLogLevel:i["d"],CACHE_SIZE_UNLIMITED:i["b"]});
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function s(e){!function(e,t){e.INTERNAL.registerComponent(new o["a"]("firestore",(function(e){var n=e.getProvider("app").getImmediate();return t(n,e.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},a)))}(e,(function(e,t){return new i["f"](e,new i["e"](e,t),new i["n"])})),e.registerVersion("@firebase/firestore","2.4.0")}s(r["a"])},e893:function(e,t,n){var r=n("1a2d"),i=n("56ef"),o=n("06cf"),a=n("9bf2");e.exports=function(e,t,n){for(var s=i(t),c=a.f,u=o.f,l=0;l<s.length;l++){var h=s[l];r(e,h)||n&&r(n,h)||c(e,h,u(t,h))}}},e8b5:function(e,t,n){var r=n("c6b6");e.exports=Array.isArray||function(e){return"Array"==r(e)}},e95a:function(e,t,n){var r=n("b622"),i=n("3f8c"),o=r("iterator"),a=Array.prototype;e.exports=function(e){return void 0!==e&&(i.Array===e||a[o]===e)}},ea7b:function(e,t,n){"use strict";n("b7aa")},f069:function(e,t,n){"use strict";var r=n("59ed"),i=function(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=r(t),this.reject=r(n)};e.exports.f=function(e){return new i(e)}},f36a:function(e,t,n){var r=n("e330");e.exports=r([].slice)},f5df:function(e,t,n){var r=n("da84"),i=n("00ee"),o=n("1626"),a=n("c6b6"),s=n("b622"),c=s("toStringTag"),u=r.Object,l="Arguments"==a(function(){return arguments}()),h=function(e,t){try{return e[t]}catch(n){}};e.exports=i?a:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=h(t=u(e),c))?n:l?a(t):"Object"==(r=a(t))&&o(t.callee)?"Arguments":r}},f772:function(e,t,n){var r=n("5692"),i=n("90e3"),o=r("keys");e.exports=function(e){return o[e]||(o[e]=i(e))}},fbb0:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return o}));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)};function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},o.apply(this,arguments)};Object.create;Object.create},fc6a:function(e,t,n){var r=n("44ad"),i=n("1d80");e.exports=function(e){return r(i(e))}},fdbc:function(e,t){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},fdbf:function(e,t,n){var r=n("4930");e.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},fea9:function(e,t,n){var r=n("da84");e.exports=r.Promise},ffa6:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return p}));function r(e,t,n,r){function i(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function a(e){try{c(r.next(e))}catch(t){o(t)}}function s(e){try{c(r["throw"](e))}catch(t){o(t)}}function c(e){e.done?n(e.value):i(e.value).then(a,s)}c((r=r.apply(e,t||[])).next())}))}function i(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(e){return function(t){return c([e,t])}}function c(o){if(n)throw new TypeError("Generator is already executing.");while(a)try{if(n=1,r&&(i=2&o[0]?r["return"]:o[0]?r["throw"]||((i=r["return"])&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!(i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}}Object.create;function o(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function a(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{while((void 0===t||t-- >0)&&!(r=o.next()).done)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o["return"])&&n.call(o)}finally{if(i)throw i.error}}return a}function s(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}Object.create;var c=n("a8e9"),u=function(){function e(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return e.prototype.setInstantiationMode=function(e){return this.instantiationMode=e,this},e.prototype.setMultipleInstances=function(e){return this.multipleInstances=e,this},e.prototype.setServiceProps=function(e){return this.serviceProps=e,this},e.prototype.setInstanceCreatedCallback=function(e){return this.onInstanceCreated=e,this},e}(),l="[DEFAULT]",h=function(){function e(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return e.prototype.get=function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new c["a"];if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise},e.prototype.getImmediate=function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}},e.prototype.getComponent=function(){return this.component},e.prototype.setComponent=function(e){var t,n;if(e.name!==this.name)throw Error("Mismatching Component "+e.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=e,this.shouldAutoInitialize()){if(d(e))try{this.getOrInitializeService({instanceIdentifier:l})}catch(p){}try{for(var r=o(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var s=a(i.value,2),c=s[0],u=s[1],h=this.normalizeInstanceIdentifier(c);try{var f=this.getOrInitializeService({instanceIdentifier:h});u.resolve(f)}catch(p){}}}catch(m){t={error:m}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}}},e.prototype.clearInstance=function(e){void 0===e&&(e=l),this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)},e.prototype.delete=function(){return r(this,void 0,void 0,(function(){var e;return i(this,(function(t){switch(t.label){case 0:return e=Array.from(this.instances.values()),[4,Promise.all(s(s([],a(e.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()})))),a(e.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))))];case 1:return t.sent(),[2]}}))}))},e.prototype.isComponentSet=function(){return null!=this.component},e.prototype.isInitialized=function(e){return void 0===e&&(e=l),this.instances.has(e)},e.prototype.getOptions=function(e){return void 0===e&&(e=l),this.instancesOptions.get(e)||{}},e.prototype.initialize=function(e){var t,n;void 0===e&&(e={});var r=e.options,i=void 0===r?{}:r,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(this.name+"("+s+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var c=this.getOrInitializeService({instanceIdentifier:s,options:i});try{for(var u=o(this.instancesDeferred.entries()),l=u.next();!l.done;l=u.next()){var h=a(l.value,2),f=h[0],d=h[1],p=this.normalizeInstanceIdentifier(f);s===p&&d.resolve(c)}}catch(m){t={error:m}}finally{try{l&&!l.done&&(n=u.return)&&n.call(u)}finally{if(t)throw t.error}}return c},e.prototype.onInit=function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var o=this.instances.get(r);return o&&e(o,r),function(){i.delete(e)}},e.prototype.invokeOnInitCallbacks=function(e,t){var n,r,i=this.onInitCallbacks.get(t);if(i)try{for(var a=o(i),s=a.next();!s.done;s=a.next()){var c=s.value;try{c(e,t)}catch(u){}}}catch(l){n={error:l}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}},e.prototype.getOrInitializeService=function(e){var t=e.instanceIdentifier,n=e.options,r=void 0===n?{}:n,i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:f(t),options:r}),this.instances.set(t,i),this.instancesOptions.set(t,r),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch(o){}return i||null},e.prototype.normalizeInstanceIdentifier=function(e){return void 0===e&&(e=l),this.component?this.component.multipleInstances?e:l:e},e.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},e}();function f(e){return e===l?void 0:e}function d(e){return"EAGER"===e.instantiationMode}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var p=function(){function e(e){this.name=e,this.providers=new Map}return e.prototype.addComponent=function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component "+e.name+" has already been registered with "+this.name);t.setComponent(e)},e.prototype.addOrOverwriteComponent=function(e){var t=this.getProvider(e.name);t.isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)},e.prototype.getProvider=function(e){if(this.providers.has(e))return this.providers.get(e);var t=new h(e,this);return this.providers.set(e,t),t},e.prototype.getProviders=function(){return Array.from(this.providers.values())},e}()}}]);
//# sourceMappingURL=chunk-vendors.9089ebfa.js.map